<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta http-equiv="x-ua-compatible" content="ie=edge, chrome=1" />
    <title>Sentinel Hub WMS services with Leaflet v1.0.3</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.0.3/leaflet.css" />
    <style>
        html,
        body {
            margin: 0;
            padding: 0;
            height: 100%;
            width: 100%;
        }
        
        #map {
            height: 100%;
            width: 100%;
        }
    </style>
</head>

<body>
    <div id="map"></div>

    <!-- Load Babel -->
    <script src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.0.3/leaflet.js"></script>
    <script type="text/babel">
        // settings
        window.mapCenter = { lat: 45.9131543, lng: 8.613351100000045 };
        window.defaultZoom = 12;
        window.shMinZoom = 7;
        window.shMaxZoom = 16;

        window.SH_BASE_WMS_URL = 'services.sentinel-hub.com';
        window.SH_INSTANCE_ID = '363b9a1a-de1b-4009-b1d2-ba935bea739e'; //this is my Sentinel Hub key
        window.SH_WMS_CONFIG = {};

        window.SH_WMS_CONFIG.layers = 'TRUE_COLOR';
        window.SH_WMS_CONFIG.atmFilter = 'ATMCOR';
        window.SH_WMS_CONFIG.gain = '2.0';
        window.SH_WMS_CONFIG.gamma = '0.8';

        window.SH_WMS_CONFIG.styles = '';
        window.SH_WMS_CONFIG.format = 'image/jpeg';
        window.SH_WMS_CONFIG.transparent = 'false';
        window.SH_WMS_CONFIG.version = '1.3.0';
        window.SH_WMS_CONFIG.tileSize = 512;
    </script>
    <script type="text/babel">
        // OpenStreetMap
        let osm = L.tileLayer('http://{s}.tile.osm.org/{z}/{x}/{y}.png', {
            attribution: '&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'
        });

        // Sentinel Hub WMS service
        // tiles generated using EPSG:3857 projection - Leaflet takes care of that
        let baseUrl = 'http://' + window.SH_BASE_WMS_URL + '/v1/wms/' + window.SH_INSTANCE_ID + '?showLogo=false';
        let sentinelHub = L.tileLayer.wms(baseUrl, {
            attribution: '&copy; <a href="http://www.sentinel-hub.com/" target="_blank">Sentinel Hub</a>',
            minZoom: window.shMinZoom,
            maxZoom: window.shMaxZoom,
            version: window.SH_WMS_CONFIG.version,
            layers: window.SH_WMS_CONFIG.layers,
            styles: window.SH_WMS_CONFIG.styles,
            format: window.SH_WMS_CONFIG.format,
            transparent: window.SH_WMS_CONFIG.transparent,
            tileSize: window.SH_WMS_CONFIG.tileSize,
            preview: '3',
            atmFilter: window.SH_WMS_CONFIG.atmFilter,
            gain: window.SH_WMS_CONFIG.gain,
            gamma: window.SH_WMS_CONFIG.gamma,
        });

        let baseMaps = {
            'OpenStreetMap': osm,
            'Sentinel Hub WMS': sentinelHub
        };

        // map uses EPSG:3857 projection
        let map = L.map('map', {
            center: L.latLng(window.mapCenter.lat, window.mapCenter.lng), // lat/lng in EPSG:4326
            zoom: window.defaultZoom,
            layers: [osm, sentinelHub]
        });

        L.control.layers(baseMaps, null).addTo(map);
    </script>
</body>

</html>