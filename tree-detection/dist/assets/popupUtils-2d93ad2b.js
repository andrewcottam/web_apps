import{t as m,ei as T,ct as x,r as f}from"./index-5df536c7.js";async function b(e,p=e.popupTemplate){var l,o;if(m(p))return[];const i=await p.getRequiredFields(e.fieldsIndex),{lastEditInfoEnabled:c}=p,{objectIdField:s,typeIdField:n,globalIdField:d,relationships:u}=e;if(i.includes("*"))return["*"];const h=c?await T(e):[],t=x(e.fieldsIndex,[...i,...h]);return n&&t.push(n),t&&s&&((l=e.fieldsIndex)!=null&&l.has(s))&&!t.includes(s)&&t.push(s),t&&d&&((o=e.fieldsIndex)!=null&&o.has(d))&&!t.includes(d)&&t.push(d),u&&u.forEach(I=>{var r;const{keyField:a}=I;t&&a&&((r=e.fieldsIndex)!=null&&r.has(a))&&!t.includes(a)&&t.push(a)}),t}function E(e,p){return e.popupTemplate?e.popupTemplate:f(p)&&p.defaultPopupTemplateEnabled&&f(e.defaultPopupTemplate)?e.defaultPopupTemplate:null}export{b as d,E as s};
