{"version":3,"sources":["../node_modules/@arcgis/core/layers/UnsupportedLayer.js","../node_modules/@arcgis/core/core/accessorSupport/MultiOriginStore.js","../node_modules/@arcgis/core/core/ReadOnlyMultiOriginJSONSupport.js","../node_modules/@arcgis/core/core/MultiOriginJSONSupport.js","../node_modules/@arcgis/core/layers/Layer.js","../node_modules/@arcgis/core/layers/mixins/PortalLayer.js"],"names":["u","r","resourceInfo","type","this","addResolvingPromise","Promise","o","s","layerType","e","id","title","Object","assign","n","p","t","readOnly","prototype","json","read","value","c","i","_propertyOriginMap","Map","_originStores","Array","_values","forEach","set","has","get","keys","delete","a","metadatas","store","internalGet","originIdOf","originOf","invalidate","revert","commit","f","l","setAtOrigin","write","toJSON","isDefaultToJSON","O","m","h","getLogger","arguments","attributionDataUrl","fullExtent","d","WGS84","Date","now","toString","legendEnabled","listMode","opacity","parent","popupEnabled","attributionVisible","spatialReference","url","visible","when","catch","declaredClass","error","layers","includes","remove","tables","baseLayers","referenceLayers","hasAttributionData","query","responseType","data","fromUrl","portalItem","fromItem","portal","portalUrl","EventedMixin","y","String","Boolean","nonNullable","Number","range","min","max","b","j","w","resourceReferences","paths","userHasEditingPrivileges","destroy","_get","removeOrigin","_set","itemId","I","load","instance","supportedTypes","validateItem","supportsData","warn","fetchUserHasEditingPrivileges","findCredential","P","credential","user","fetchEditingUser","privileges","findServerInfo","owningSystemUrl","g","getDefault","loaded","restUrl","signal","authMode","ok","v","fromJSON","layer","messages","push"],"mappings":"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","file":"static/js/80.92bf19fd.chunk.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../chunks/tslib.es6.js\";import e from\"../core/Error.js\";import{MultiOriginJSONMixin as o}from\"../core/MultiOriginJSONSupport.js\";import{schedule as s}from\"../core/scheduling.js\";import{property as t}from\"../core/accessorSupport/decorators/property.js\";import\"../core/has.js\";import\"../core/accessorSupport/ensureType.js\";import\"../core/Logger.js\";import{subclass as i}from\"../core/accessorSupport/decorators/subclass.js\";import p from\"./Layer.js\";import{PortalLayer as n}from\"./mixins/PortalLayer.js\";let u=class extends(n(o(p))){constructor(r){super(r),this.resourceInfo=null,this.type=\"unsupported\"}initialize(){this.addResolvingPromise(new Promise(((r,o)=>{s((()=>{const r=this.resourceInfo&&(this.resourceInfo.layerType||this.resourceInfo.type);let s=\"Unsupported layer type\";r&&(s+=\" \"+r),o(new e(\"layer:unsupported-layer-type\",s,{layerType:r}))}))})))}read(r,e){const o={resourceInfo:r};null!=r.id&&(o.id=r.id),null!=r.title&&(o.title=r.title),super.read(o,e)}write(r){return Object.assign(r||{},this.resourceInfo,{id:this.id})}};r([t({readOnly:!0})],u.prototype,\"resourceInfo\",void 0),r([t({type:[\"show\",\"hide\"]})],u.prototype,\"listMode\",void 0),r([t({json:{read:!1},readOnly:!0,value:\"unsupported\"})],u.prototype,\"type\",void 0),u=r([i(\"esri.layers.UnsupportedLayer\")],u);var c=u;export{c as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{clone as t}from\"../lang.js\";import{assumeNonNull as s}from\"../maybe.js\";import{OriginIdNum as e}from\"./PropertyOrigin.js\";class r{constructor(){this._propertyOriginMap=new Map,this._originStores=new Array(e),this._values=new Map}clone(s){const i=new r,o=this._originStores[0];o&&o.forEach(((s,e)=>{i.set(e,t(s),0)}));for(let r=2;r<e;r++){const e=this._originStores[r];e&&e.forEach(((e,o)=>{s&&s.has(o)||i.set(o,t(e),r)}))}return i}get(t,s){const e=void 0===s?this._values:this._originStores[s];return e?e.get(t):void 0}keys(t){const s=null==t?this._values:this._originStores[t];return s?[...s.keys()]:[]}set(t,e,r=6){let i=this._originStores[r];if(i||(i=new Map,this._originStores[r]=i),i.set(t,e),!this._values.has(t)||s(this._propertyOriginMap.get(t))<=r){const s=this._values.get(t);return this._values.set(t,e),this._propertyOriginMap.set(t,r),s!==e}return!1}delete(t,s=6){const e=this._originStores[s];if(!e)return;const r=e.get(t);if(e.delete(t),this._values.has(t)&&this._propertyOriginMap.get(t)===s){this._values.delete(t);for(let e=s-1;e>=0;e--){const s=this._originStores[e];if(s&&s.has(t)){this._values.set(t,s.get(t)),this._propertyOriginMap.set(t,e);break}}}return r}has(t,s){const e=void 0===s?this._values:this._originStores[s];return!!e&&e.has(t)}revert(t,s){for(;s>0&&!this.has(t,s);)--s;const e=this._originStores[s],r=e&&e.get(t),i=this._values.get(t);return this._values.set(t,r),this._propertyOriginMap.set(t,s),i!==r}originOf(t){return this._propertyOriginMap.get(t)||0}forEach(t){this._values.forEach(t)}}export{r as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../chunks/tslib.es6.js\";import t from\"./Accessor.js\";import{assumeNonNull as s}from\"./maybe.js\";import e from\"./accessorSupport/MultiOriginStore.js\";import{idToName as o,nameToId as i}from\"./accessorSupport/PropertyOrigin.js\";import{read as n}from\"./accessorSupport/read.js\";import{getProperties as c}from\"./accessorSupport/utils.js\";import{subclass as p}from\"./accessorSupport/decorators/subclass.js\";const a=t=>{let a=class extends t{constructor(...r){super(...r);const t=s(c(this)),o=t.metadatas,i=t.store,n=new e;t.store=n,i.keys().forEach((r=>{n.set(r,i.get(r),0)})),Object.keys(o).forEach((r=>{t.internalGet(r)&&n.set(r,t.internalGet(r),0)}))}read(r,t){n(this,r,t)}getAtOrigin(r,t){const s=u(this),e=i(t);if(\"string\"==typeof r)return s.get(r,e);const o={};return r.forEach((r=>{o[r]=s.get(r,e)})),o}originOf(r){return o(this.originIdOf(r))}originIdOf(r){return u(this).originOf(r)}revert(r,t){const s=u(this),e=i(t),o=c(this);let n;n=\"string\"==typeof r?\"*\"===r?s.keys(e):[r]:r,n.forEach((r=>{o.invalidate(r),s.revert(r,e),o.commit(r)}))}};return a=r([p(\"esri.core.ReadOnlyMultiOriginJSONSupport\")],a),a};function u(r){return c(r).store}let f=class extends(a(t)){};f=r([p(\"esri.core.ReadOnlyMultiOriginJSONSupport\")],f);export{a as ReadOnlyMultiOriginJSONMixin,f as ReadOnlyMultiOriginJSONSupport};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../chunks/tslib.es6.js\";import t from\"./Accessor.js\";import{ReadOnlyMultiOriginJSONMixin as s}from\"./ReadOnlyMultiOriginJSONSupport.js\";import{nameToId as e,OriginIdNum as o}from\"./accessorSupport/PropertyOrigin.js\";import{getProperties as i}from\"./accessorSupport/utils.js\";import{write as c}from\"./accessorSupport/write.js\";import{subclass as n}from\"./accessorSupport/decorators/subclass.js\";const p=t=>{let s=class extends t{constructor(...r){super(...r)}clear(r,t=\"user\"){return u(this).delete(r,e(t))}write(r={},t){return c(this,r=r||{},t),r}setAtOrigin(r,t,s){i(this).setAtOrigin(r,t,e(s))}removeOrigin(r){const t=u(this),s=e(r),o=t.keys(s);for(const e of o)t.originOf(e)===s&&t.set(e,t.get(e,s),6)}updateOrigin(r,t){const s=u(this),i=e(t),c=this.get(r);for(let e=i+1;e<o;++e)s.delete(r,e);s.set(r,c,i)}toJSON(r){return this.write({},r)}};return s=r([n(\"esri.core.WriteableMultiOriginJSONSupport\")],s),s.prototype.toJSON.isDefaultToJSON=!0,s};function u(r){return i(r).store}const l=t=>{let e=class extends(p(s(t))){constructor(...r){super(...r)}};return e=r([n(\"esri.core.MultiOriginJSONSupport\")],e),e};let O=class extends(l(t)){};O=r([n(\"esri.core.MultiOriginJSONSupport\")],O);export{l as MultiOriginJSONMixin,O as MultiOriginJSONSupport};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../chunks/tslib.es6.js\";import r from\"../config.js\";import\"../geometry.js\";import e from\"../request.js\";import o from\"../core/Error.js\";import i from\"../core/Evented.js\";import{IdentifiableMixin as a}from\"../core/Identifiable.js\";import s from\"../core/Loadable.js\";import l from\"../core/Logger.js\";import{isAbortError as p}from\"../core/promiseUtils.js\";import{urlToObject as n}from\"../core/urlUtils.js\";import{property as y}from\"../core/accessorSupport/decorators/property.js\";import\"../core/has.js\";import\"../core/accessorSupport/ensureType.js\";import{subclass as c}from\"../core/accessorSupport/decorators/subclass.js\";import u from\"../geometry/Extent.js\";import d from\"../geometry/SpatialReference.js\";let m=0;const h=l.getLogger(\"esri.layers.Layer\");let f=class extends(i.EventedMixin(a(s))){constructor(){super(...arguments),this.attributionDataUrl=null,this.fullExtent=new u(-180,-90,180,90,d.WGS84),this.id=Date.now().toString(16)+\"-layer-\"+m++,this.legendEnabled=!0,this.listMode=\"show\",this.opacity=1,this.parent=null,this.popupEnabled=!0,this.attributionVisible=!0,this.spatialReference=d.WGS84,this.title=null,this.type=null,this.url=null,this.visible=!0}static async fromArcGISServerUrl(t){const r=\"string\"==typeof t?{url:t}:t,e=await import(\"./support/arcgisLayers.js\");try{return await e.fromUrl(r)}catch(o){throw h.error(\"#fromArcGISServerUrl({ url: '\"+r.url+\"'})\",\"Failed to create layer from arcgis server url\",o),o}}static async fromPortalItem(t){const e=\"portalItem\"in t?t:{portalItem:t},o=await import(\"../portal/support/portalLayers.js\");try{return await o.fromItem(e)}catch(i){const t=e&&e.portalItem,o=t&&t.id||\"unset\",a=t&&t.portal&&t.portal.url||r.portalUrl;throw h.error(\"#fromPortalItem()\",\"Failed to create layer from portal item (portal: '\"+a+\"', id: '\"+o+\"')\",i),i}}initialize(){this.when().catch((t=>{var r,e;p(t)||l.getLogger(this.declaredClass).error(\"#load()\",`Failed to load layer (title: '${null!=(r=this.title)?r:\"no title\"}', id: '${null!=(e=this.id)?e:\"no id\"}')`,{error:t})}))}destroy(){if(this.parent){const t=this,r=this.parent;\"layers\"in r&&r.layers.includes(t)?r.layers.remove(t):\"tables\"in r&&r.tables.includes(t)?r.tables.remove(t):\"baseLayers\"in r&&r.baseLayers.includes(t)?r.baseLayers.remove(t):\"baseLayers\"in r&&r.referenceLayers.includes(t)&&r.referenceLayers.remove(t)}}get hasAttributionData(){return null!=this.attributionDataUrl}get parsedUrl(){const t=this.url;return t?n(t):null}async fetchAttributionData(){const t=this.attributionDataUrl;if(this.hasAttributionData&&t){return(await e(t,{query:{f:\"json\"},responseType:\"json\"})).data}throw new o(\"layer:no-attribution-data\",\"Layer does not have attribution data\")}};t([y({type:String})],f.prototype,\"attributionDataUrl\",void 0),t([y({type:u})],f.prototype,\"fullExtent\",void 0),t([y({readOnly:!0})],f.prototype,\"hasAttributionData\",null),t([y({type:String})],f.prototype,\"id\",void 0),t([y({type:Boolean,nonNullable:!0})],f.prototype,\"legendEnabled\",void 0),t([y({type:[\"show\",\"hide\",\"hide-children\"]})],f.prototype,\"listMode\",void 0),t([y({type:Number,range:{min:0,max:1},nonNullable:!0})],f.prototype,\"opacity\",void 0),t([y()],f.prototype,\"parent\",void 0),t([y({readOnly:!0})],f.prototype,\"parsedUrl\",null),t([y({type:Boolean})],f.prototype,\"popupEnabled\",void 0),t([y({type:Boolean})],f.prototype,\"attributionVisible\",void 0),t([y({type:d})],f.prototype,\"spatialReference\",void 0),t([y({type:String})],f.prototype,\"title\",void 0),t([y({type:String,readOnly:!0,json:{read:!1}})],f.prototype,\"type\",void 0),t([y()],f.prototype,\"url\",void 0),t([y({type:Boolean,nonNullable:!0})],f.prototype,\"visible\",void 0),f=t([c(\"esri.layers.Layer\")],f);var b=f;export{b as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../chunks/tslib.es6.js\";import{id as e}from\"../../kernel.js\";import r from\"../../request.js\";import{result as s}from\"../../core/asyncUtils.js\";import o from\"../../core/Error.js\";import i from\"../../core/Logger.js\";import{isNone as a,isSome as l}from\"../../core/maybe.js\";import{throwIfAborted as n,isAbortError as p,throwIfAbortError as m}from\"../../core/promiseUtils.js\";import{normalize as u,hasSamePortal as c}from\"../../core/urlUtils.js\";import{property as d}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/has.js\";import\"../../core/accessorSupport/ensureType.js\";import{reader as h}from\"../../core/accessorSupport/decorators/reader.js\";import{subclass as f}from\"../../core/accessorSupport/decorators/subclass.js\";import{writer as y}from\"../../core/accessorSupport/decorators/writer.js\";import g from\"../../portal/Portal.js\";import I from\"../../portal/PortalItem.js\";import v from\"../../portal/PortalUser.js\";const j=i.getLogger(\"esri.layers.mixins.PortalLayer\"),w=i=>{let w=class extends i{constructor(){super(...arguments),this.resourceReferences={portalItem:null,paths:[]},this.userHasEditingPrivileges=!0}destroy(){var t;null==(t=this.portalItem)||t.destroy(),this.portalItem=null}set portalItem(t){t!==this._get(\"portalItem\")&&(this.removeOrigin(\"portal-item\"),this._set(\"portalItem\",t))}readPortalItem(t,e,r){if(e.itemId)return new I({id:e.itemId,portal:r&&r.portal})}writePortalItem(t,e){t&&t.id&&(e.itemId=t.id)}async loadFromPortal(t,e){if(this.portalItem&&this.portalItem.id)try{const r=await import(\"../../portal/support/layersLoader.js\");return n(e),await r.load({instance:this,supportedTypes:t.supportedTypes,validateItem:t.validateItem,supportsData:t.supportsData},e)}catch(r){throw p(r)||j.warn(`Failed to load layer (${this.title}, ${this.id}) portal item (${this.portalItem.id})\\n  ${r}`),r}}async finishLoadEditablePortalLayer(t){this._set(\"userHasEditingPrivileges\",await this.fetchUserHasEditingPrivileges(t).catch((t=>(m(t),!0))))}async fetchUserHasEditingPrivileges(t){const r=this.url?null==e?void 0:e.findCredential(this.url):null;if(!r)return!0;const s=P.credential===r?P.user:await this.fetchEditingUser(t);return P.credential=r,P.user=s,a(s)||null==s.privileges||s.privileges.includes(\"features:user:edit\")}async fetchEditingUser(t){var o,i;const a=null==(o=this.portalItem)||null==(i=o.portal)?void 0:i.user;if(a)return a;const n=e.findServerInfo(this.url);if(null==n||!n.owningSystemUrl)return null;const p=`${n.owningSystemUrl}/sharing/rest`,m=g.getDefault();if(m&&m.loaded&&u(m.restUrl)===u(p))return m.user;const c=`${p}/community/self`,d=l(t)?t.signal:null,h=await s(r(c,{authMode:\"no-prompt\",query:{f:\"json\"},signal:d}));return h.ok?v.fromJSON(h.value.data):null}read(t,e){e&&(e.layer=this),super.read(t,e)}write(t,e){const r=e&&e.portal,s=this.portalItem&&this.portalItem.id&&(this.portalItem.portal||g.getDefault());return r&&s&&!c(s.restUrl,r.restUrl)?(e.messages&&e.messages.push(new o(\"layer:cross-portal\",`The layer '${this.title} (${this.id})' cannot be persisted because it refers to an item on a different portal than the one being saved to. To save the scene, set the layer.portalItem to null or save the scene to the same portal as the item associated with the layer`,{layer:this})),null):super.write(t,{...e,layer:this})}};return t([d({type:I})],w.prototype,\"portalItem\",null),t([h(\"web-document\",\"portalItem\",[\"itemId\"])],w.prototype,\"readPortalItem\",null),t([y(\"web-document\",\"portalItem\",{itemId:{type:String}})],w.prototype,\"writePortalItem\",null),t([d()],w.prototype,\"resourceReferences\",void 0),t([d({readOnly:!0})],w.prototype,\"userHasEditingPrivileges\",void 0),w=t([f(\"esri.layers.mixins.PortalLayer\")],w),w},P={credential:null,user:null};export{w as PortalLayer};\n"],"sourceRoot":""}