(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[60,92,115],{1060:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return ie}));var a=r(21),n=r(7),i=r.n(n),o=r(12),l=r(23),s=r(13),u=r(2),c=r(4),b=r(77),p=r(65),f=r(5),d=r(6),y=r(0),v=(r(114),r(52)),h=r(808),O=r(11),j=r(677),m=r(30),g=r(27),w=r(1),k=(r(19),r(14)),S=(r(15),r(57)),x=r(10),I=r(43),V=r(45),F=r(682),_=r(730),E=r(709),T=r(699),N=r(697),M=r(716),P=r(671),C=r(184),D=r(26),z=r(142),R=r(109),L=r(99),G=r(97),U=r(68),J=r(83),A=(r(214),r(82)),q=r(18),H=r(240),B=r(244),W=(r(715),r(668),{esriGeometryPoint:"points",esriGeometryPolyline:"polylines",esriGeometryPolygon:"polygons"});function K(e){var t=e.folders||[],r=t.slice(),a=new Map,n=new Map,i=new Map,o=new Map,l=new Map,s={esriGeometryPoint:n,esriGeometryPolyline:i,esriGeometryPolygon:o};(e.featureCollection&&e.featureCollection.layers||[]).forEach((function(e){var t=Object(q.a)(e);t.featureSet.features=[];var r=e.featureSet.geometryType;a.set(r,t);var l=e.layerDefinition.objectIdField;"esriGeometryPoint"===r?$(n,l,e.featureSet.features):"esriGeometryPolyline"===r?$(i,l,e.featureSet.features):"esriGeometryPolygon"===r&&$(o,l,e.featureSet.features)})),e.groundOverlays&&e.groundOverlays.forEach((function(e){l.set(e.id,e)})),t.forEach((function(t){t.networkLinkIds.forEach((function(a){var n=function(e,t,r){var a=function(e,t){var r;return t.some((function(t){return t.id===e&&(r=t,!0)})),r}(e,r);return a&&(a.parentFolderId=t,a.networkLink=a),a}(a,t.id,e.networkLinks);n&&r.push(n)}))})),r.forEach((function(e){e.featureInfos&&(e.points=Object(q.a)(a.get("esriGeometryPoint")),e.polylines=Object(q.a)(a.get("esriGeometryPolyline")),e.polygons=Object(q.a)(a.get("esriGeometryPolygon")),e.mapImages=[],e.featureInfos.map((function(t){switch(t.type){case"esriGeometryPoint":case"esriGeometryPolyline":case"esriGeometryPolygon":var r=s[t.type].get(t.id);r&&e[W[t.type]].featureSet.features.push(r);break;case"GroundOverlay":var a=l.get(t.id);a&&e.mapImages.push(a)}})),e.fullExtent=X([e]))}));var u=X(r);return{folders:t,sublayers:r,extent:u}}function Q(e,t,r,a){var n=J.b&&J.b.findCredential(e);e=Object(g.e)(e,{token:n&&n.token});var i=U.a.kmlServiceUrl;return Object(A.default)(i,{query:{url:e,model:"simple",folders:"",refresh:0!==r||void 0,outSR:JSON.stringify(t)},responseType:"json",signal:a})}function Z(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],n=[],i={},o=t.sublayers,l=t.folders.map((function(e){return e.id}));return o.forEach((function(t){var o=new e;if(r?o.read(t,r):o.read(t),a.length&&l.indexOf(o.id)>-1&&(o.visible=-1!==a.indexOf(o.id)),i[t.id]=o,null!=t.parentFolderId&&-1!==t.parentFolderId){var s=i[t.parentFolderId];s.sublayers||(s.sublayers=[]),s.sublayers.unshift(o)}else n.unshift(o)})),n}function $(e,t,r){r.forEach((function(r){e.set(r.attributes[t],r)}))}function X(e){var t,r=Object(H.b)(H.a),n=Object(H.b)(H.a),i=Object(a.a)(e);try{for(i.s();!(t=i.n()).done;){var o=t.value;if(o.polygons&&o.polygons.featureSet&&o.polygons.featureSet.features){var l,s=Object(a.a)(o.polygons.featureSet.features);try{for(s.s();!(l=s.n()).done;){var u=l.value;Object(B.b)(r,u.geometry),Object(H.e)(n,r)}}catch(j){s.e(j)}finally{s.f()}}if(o.polylines&&o.polylines.featureSet&&o.polylines.featureSet.features){var c,b=Object(a.a)(o.polylines.featureSet.features);try{for(b.s();!(c=b.n()).done;){var p=c.value;Object(B.b)(r,p.geometry),Object(H.e)(n,r)}}catch(j){b.e(j)}finally{b.f()}}if(o.points&&o.points.featureSet&&o.points.featureSet.features){var f,d=Object(a.a)(o.points.featureSet.features);try{for(d.s();!(f=d.n()).done;){var y=f.value;Object(B.b)(r,y.geometry),Object(H.e)(n,r)}}catch(j){d.e(j)}finally{d.f()}}if(o.mapImages){var v,h=Object(a.a)(o.mapImages);try{for(h.s();!(v=h.n()).done;){var O=v.value;Object(B.b)(r,O.extent),Object(H.e)(n,r)}}catch(j){h.e(j)}finally{h.f()}}}}catch(j){i.e(j)}finally{i.f()}return Object(H.d)(n,H.a)?null:{xmin:n[0],ymin:n[1],zmin:n[2],xmax:n[3],ymax:n[4],zmax:n[5],spatialReference:V.a.WGS84}}var Y,ee=r(58),te=Y=function(e){Object(f.a)(r,e);var t=Object(d.a)(r);function r(){var e;return Object(u.a)(this,r),(e=t.apply(this,arguments))._sublayersHandles=null,e.description=null,e.id=null,e.networkLink=null,e.title=null,e.sourceJSON=null,e.fullExtent=null,e}return Object(c.a)(r,[{key:"initialize",value:function(){var e=this;Object(L.f)(this,"networkLink").then((function(){return Object(L.g)(e,"visible")})).then((function(){return e.load()}))}},{key:"load",value:function(e){var t=this;if(this.networkLink&&!this.networkLink.viewFormat){var r=Object(O.j)(e)?e.signal:null,a=this._fetchService(this._get("networkLink").href,r).then((function(e){var r=X(e.sublayers);t.fullExtent=ee.a.fromJSON(r),t.sourceJSON=e;var a=Object(k.m)(v.a.ofType(Y),Z(Y,e));t.sublayers?t.sublayers.addMany(a):t.sublayers=a,t.layer.emit("sublayer-update"),t.layer&&t.layer.notifyChange("visibleSublayers")}));return this.addResolvingPromise(a),Promise.resolve(this)}}},{key:"sublayers",set:function(e){var t=this,r=this._get("sublayers");r&&(r.forEach((function(e){e.parent=null,e.layer=null})),this._sublayersHandles.forEach((function(e){return e.remove()})),this._sublayersHandles=null),e&&(e.forEach((function(e){e.parent=t,e.layer=t.layer})),this._sublayersHandles=[e.on("after-add",(function(e){var r=e.item;r.parent=t,r.layer=t.layer})),e.on("after-remove",(function(e){var t=e.item;t.parent=null,t.layer=null}))]),this._set("sublayers",e)}},{key:"castSublayers",value:function(e){return Object(k.m)(v.a.ofType(Y),e)}},{key:"visible",get:function(){return this._get("visible")},set:function(e){this._get("visible")!==e&&(this._set("visible",e),this.layer&&this.layer.notifyChange("visibleSublayers"))}},{key:"readVisible",value:function(e,t){return!!t.visibility}},{key:"layer",set:function(e){this._set("layer",e),this.sublayers&&this.sublayers.forEach((function(t){return t.layer=e}))}},{key:"_fetchService",value:function(e,t){return Q(e,this.layer.outSpatialReference,this.layer.refreshInterval,t).then((function(e){return K(e.data)}))}}]),r}(C.a.EventedMixin(Object(D.b)(z.a)));Object(y.a)([Object(w.b)()],te.prototype,"description",void 0),Object(y.a)([Object(w.b)()],te.prototype,"id",void 0),Object(y.a)([Object(w.b)({readOnly:!0,value:null})],te.prototype,"networkLink",void 0),Object(y.a)([Object(w.b)({json:{write:{allowNull:!0}}})],te.prototype,"parent",void 0),Object(y.a)([Object(w.b)({value:null,json:{write:{allowNull:!0}}})],te.prototype,"sublayers",null),Object(y.a)([Object(G.a)("sublayers")],te.prototype,"castSublayers",null),Object(y.a)([Object(w.b)({value:null,json:{read:{source:"name",reader:function(e){return Object(R.d)(e)}}}})],te.prototype,"title",void 0),Object(y.a)([Object(w.b)({value:!0})],te.prototype,"visible",null),Object(y.a)([Object(S.a)("visible",["visibility"])],te.prototype,"readVisible",null),Object(y.a)([Object(w.b)()],te.prototype,"sourceJSON",void 0),Object(y.a)([Object(w.b)({value:null})],te.prototype,"layer",null),Object(y.a)([Object(w.b)({type:ee.a})],te.prototype,"fullExtent",void 0);var re=te=Y=Object(y.a)([Object(x.a)("esri.layers.support.KMLSublayer")],te),ae=["kml","xml"],ne=function(e){Object(f.a)(r,e);var t=Object(d.a)(r);function r(){var e;Object(u.a)(this,r);for(var a=arguments.length,n=new Array(a),i=0;i<a;i++)n[i]=arguments[i];return(e=t.call.apply(t,[this].concat(n)))._visibleFolders=[],e.allSublayers=new h.a({getCollections:function(){return[e.sublayers]},getChildrenFunction:function(e){return e.sublayers}}),e.outSpatialReference=V.a.WGS84,e.path=null,e.legendEnabled=!1,e.operationalLayerType="KML",e.sublayers=null,e.type="kml",e.url=null,e}return Object(c.a)(r,[{key:"initialize",value:function(){var e=this;this.watch("sublayers",(function(t,r){r&&r.forEach((function(e){e.parent=null,e.layer=null})),t&&t.forEach((function(t){t.parent=e,t.layer=e}))}),!0),this.on("sublayer-update",(function(){return e.notifyChange("fullExtent")}))}},{key:"normalizeCtorArgs",value:function(e,t){return"string"==typeof e?Object(s.a)({url:e},t):e}},{key:"readSublayersFromItemOrWebMap",value:function(e,t){this._visibleFolders=t.visibleFolders}},{key:"readSublayers",value:function(e,t,r){return Z(re,t,r,this._visibleFolders)}},{key:"writeSublayers",value:function(e,t){for(var r=[],a=e.toArray();a.length;){var n=a[0];n.networkLink||(n.visible&&r.push(n.id),n.sublayers&&a.push.apply(a,Object(l.a)(n.sublayers.toArray()))),a.shift()}t.visibleFolders=r}},{key:"title",get:function(){var e=this._get("title");return e&&"defaults"!==this.originOf("title")?e:this.url?Object(g.k)(this.url,ae)||"KML":e||""},set:function(e){this._set("title",e)}},{key:"visibleSublayers",get:function(){var e=this.sublayers,t=[];return e&&e.forEach((function e(r){r.visible&&(t.push(r),r.sublayers&&r.sublayers.forEach(e))})),t}},{key:"fullExtent",get:function(){return this._recomputeFullExtent()}},{key:"load",value:function(e){var t=this,r=Object(O.j)(e)?e.signal:null;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["KML"]},e).catch(m.u).then((function(){return t._fetchService(r)}))),Promise.resolve(this)}},{key:"destroy",value:function(){Object(b.a)(Object(p.a)(r.prototype),"destroy",this).call(this),this.allSublayers.destroy()}},{key:"_fetchService",value:function(){var e=Object(o.a)(i.a.mark((function e(t){var r,a,n=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve().then((function(){return n.resourceInfo?{ssl:!1,data:n.resourceInfo}:Q(n.url,n.outSpatialReference,n.refreshInterval,t)}));case 2:r=e.sent,(a=K(r.data))&&this.read(a,{origin:"service"});case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_recomputeFullExtent",value:function(){var e=null;this.extent&&(e=this.extent.clone());return function t(r){if(r.sublayers){var n,i=Object(a.a)(r.sublayers.items);try{for(i.s();!(n=i.n()).done;){var o=n.value;t(o),o.visible&&o.fullExtent&&(e?e.union(o.fullExtent):e=o.fullExtent.clone())}}catch(l){i.e(l)}finally{i.f()}}}(this),e}}]),r}(Object(_.a)(Object(N.a)(Object(M.a)(Object(E.a)(Object(T.a)(Object(j.a)(F.a)))))));Object(y.a)([Object(w.b)({readOnly:!0})],ne.prototype,"allSublayers",void 0),Object(y.a)([Object(w.b)({type:V.a})],ne.prototype,"outSpatialReference",void 0),Object(y.a)([Object(w.b)({type:String,json:{origins:{"web-scene":{read:!0,write:!0}},read:!1}})],ne.prototype,"path",void 0),Object(y.a)([Object(w.b)({readOnly:!0,json:{read:!1,write:!1}})],ne.prototype,"legendEnabled",void 0),Object(y.a)([Object(w.b)({type:["show","hide","hide-children"]})],ne.prototype,"listMode",void 0),Object(y.a)([Object(w.b)({type:["KML"]})],ne.prototype,"operationalLayerType",void 0),Object(y.a)([Object(w.b)({})],ne.prototype,"resourceInfo",void 0),Object(y.a)([Object(w.b)({type:v.a.ofType(re),json:{write:{ignoreOrigin:!0}}})],ne.prototype,"sublayers",void 0),Object(y.a)([Object(S.a)(["web-map","portal-item"],"sublayers",["visibleFolders"])],ne.prototype,"readSublayersFromItemOrWebMap",null),Object(y.a)([Object(S.a)("service","sublayers",["sublayers"])],ne.prototype,"readSublayers",null),Object(y.a)([Object(I.a)("sublayers")],ne.prototype,"writeSublayers",null),Object(y.a)([Object(w.b)({readOnly:!0,json:{read:!1}})],ne.prototype,"type",void 0),Object(y.a)([Object(w.b)({json:{origins:{"web-map":{read:{source:"title"}}},write:{ignoreOrigin:!0}}})],ne.prototype,"title",null),Object(y.a)([Object(w.b)(P.n)],ne.prototype,"url",void 0),Object(y.a)([Object(w.b)({readOnly:!0})],ne.prototype,"visibleSublayers",null),Object(y.a)([Object(w.b)({type:ee.a})],ne.prototype,"extent",void 0),Object(y.a)([Object(w.b)()],ne.prototype,"fullExtent",null);var ie=ne=Object(y.a)([Object(x.a)("esri.layers.KMLLayer")],ne)},660:function(e,t,r){"use strict";r.d(t,"a",(function(){return d}));var a=r(2),n=r(5),i=r(6),o=r(0),l=r(42),s=r(26),u=r(1),c=(r(19),r(14),r(15),r(31)),b=r(10),p=new l.a({inherited:"inherited",codedValue:"coded-value",range:"range"}),f=function(e){Object(n.a)(r,e);var t=Object(i.a)(r);function r(e){var n;return Object(a.a)(this,r),(n=t.call(this,e)).name=null,n.type=null,n}return r}(s.a);Object(o.a)([Object(u.b)({type:String,json:{write:!0}})],f.prototype,"name",void 0),Object(o.a)([Object(c.a)(p)],f.prototype,"type",void 0);var d=f=Object(o.a)([Object(b.a)("esri.layers.support.Domain")],f)},661:function(e,t,r){"use strict";r.d(t,"a",(function(){return f}));var a,n=r(2),i=r(4),o=r(5),l=r(6),s=r(0),u=(r(1),r(19),r(14),r(15),r(31)),c=r(10),b=r(660),p=a=function(e){Object(o.a)(r,e);var t=Object(l.a)(r);function r(e){var a;return Object(n.a)(this,r),(a=t.call(this,e)).type="inherited",a}return Object(i.a)(r,[{key:"clone",value:function(){return new a}}]),r}(b.a);Object(s.a)([Object(u.a)({inherited:"inherited"})],p.prototype,"type",void 0);var f=p=a=Object(s.a)([Object(c.a)("esri.layers.support.InheritedDomain")],p)},662:function(e,t,r){"use strict";r.d(t,"a",(function(){return d}));var a,n=r(2),i=r(4),o=r(5),l=r(6),s=r(0),u=r(1),c=(r(19),r(14),r(15),r(31)),b=r(10),p=r(660),f=a=function(e){Object(o.a)(r,e);var t=Object(l.a)(r);function r(e){var a;return Object(n.a)(this,r),(a=t.call(this,e)).maxValue=null,a.minValue=null,a.type="range",a}return Object(i.a)(r,[{key:"clone",value:function(){return new a({maxValue:this.maxValue,minValue:this.minValue,name:this.name})}}]),r}(p.a);Object(s.a)([Object(u.b)({type:Number,json:{type:[Number],read:{source:"range",reader:function(e,t){return t.range&&t.range[1]}},write:{enabled:!1,overridePolicy:function(){return{enabled:null!=this.maxValue&&null==this.minValue}},target:"range",writer:function(e,t,r){t[r]=[this.minValue||0,e]}}}})],f.prototype,"maxValue",void 0),Object(s.a)([Object(u.b)({type:Number,json:{type:[Number],read:{source:"range",reader:function(e,t){return t.range&&t.range[0]}},write:{target:"range",writer:function(e,t,r){t[r]=[e,this.maxValue||0]}}}})],f.prototype,"minValue",void 0),Object(s.a)([Object(c.a)({range:"range"})],f.prototype,"type",void 0);var d=f=a=Object(s.a)([Object(b.a)("esri.layers.support.RangeDomain")],f)},664:function(e,t,r){"use strict";r.d(t,"a",(function(){return j}));var a,n=r(2),i=r(4),o=r(5),l=r(6),s=r(0),u=r(18),c=r(1),b=(r(14),r(19),r(15),r(31)),p=r(10),f=r(26),d=a=function(e){Object(o.a)(r,e);var t=Object(l.a)(r);function r(e){var a;return Object(n.a)(this,r),(a=t.call(this,e)).name=null,a.code=null,a}return Object(i.a)(r,[{key:"clone",value:function(){return new a({name:this.name,code:this.code})}}]),r}(f.a);Object(s.a)([Object(c.b)({type:String,json:{write:!0}})],d.prototype,"name",void 0),Object(s.a)([Object(c.b)({type:[String,Number],json:{write:!0}})],d.prototype,"code",void 0);var y,v=d=a=Object(s.a)([Object(p.a)("esri.layers.support.CodedValue")],d),h=r(660),O=y=function(e){Object(o.a)(r,e);var t=Object(l.a)(r);function r(e){var a;return Object(n.a)(this,r),(a=t.call(this,e)).codedValues=null,a.type="coded-value",a}return Object(i.a)(r,[{key:"getName",value:function(e){var t=null;if(this.codedValues){var r=String(e);this.codedValues.some((function(e){return String(e.code)===r&&(t=e.name),!!t}))}return t}},{key:"clone",value:function(){return new y({codedValues:Object(u.a)(this.codedValues),name:this.name})}}]),r}(h.a);Object(s.a)([Object(c.b)({type:[v],json:{write:!0}})],O.prototype,"codedValues",void 0),Object(s.a)([Object(b.a)({codedValue:"coded-value"})],O.prototype,"type",void 0);var j=O=y=Object(s.a)([Object(p.a)("esri.layers.support.CodedValueDomain")],O)},666:function(e,t,r){"use strict";r.d(t,"a",(function(){return m}));var a,n=r(2),i=r(4),o=r(5),l=r(6),s=r(0),u=r(42),c=r(26),b=r(1),p=(r(19),r(14)),f=(r(15),r(31)),d=r(57),y=r(10),v=r(679),h=r(690),O=new u.a({binary:"binary",coordinate:"coordinate",countOrAmount:"count-or-amount",dateAndTime:"date-and-time",description:"description",locationOrPlaceName:"location-or-place-name",measurement:"measurement",nameOrTitle:"name-or-title",none:"none",orderedOrRanked:"ordered-or-ranked",percentageOrRatio:"percentage-or-ratio",typeOrCategory:"type-or-category",uniqueIdentifier:"unique-identifier"}),j=a=function(e){Object(o.a)(r,e);var t=Object(l.a)(r);function r(e){var a;return Object(n.a)(this,r),(a=t.call(this,e)).alias=null,a.defaultValue=void 0,a.description=null,a.domain=null,a.editable=!0,a.length=-1,a.name=null,a.nullable=!0,a.type=null,a.valueType=null,a}return Object(i.a)(r,[{key:"readDescription",value:function(e,t){var r,a=t.description;try{r=JSON.parse(a)}catch(n){}return r?r.value:null}},{key:"readValueType",value:function(e,t){var r,a=t.description;try{r=JSON.parse(a)}catch(n){}return r?O.fromJSON(r.fieldValueType):null}},{key:"clone",value:function(){return new a({alias:this.alias,defaultValue:this.defaultValue,description:this.description,domain:this.domain&&this.domain.clone()||null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type,valueType:this.valueType})}}]),r}(c.a);Object(s.a)([Object(b.b)({type:String,json:{write:!0}})],j.prototype,"alias",void 0),Object(s.a)([Object(b.b)({type:[String,Number],json:{write:{allowNull:!0}}})],j.prototype,"defaultValue",void 0),Object(s.a)([Object(b.b)()],j.prototype,"description",void 0),Object(s.a)([Object(d.a)("description")],j.prototype,"readDescription",null),Object(s.a)([Object(b.b)({types:v.b,json:{read:{reader:v.a},write:!0}})],j.prototype,"domain",void 0),Object(s.a)([Object(b.b)({type:Boolean,json:{write:!0}})],j.prototype,"editable",void 0),Object(s.a)([Object(b.b)({type:p.a,json:{write:!0}})],j.prototype,"length",void 0),Object(s.a)([Object(b.b)({type:String,json:{write:!0}})],j.prototype,"name",void 0),Object(s.a)([Object(b.b)({type:Boolean,json:{write:!0}})],j.prototype,"nullable",void 0),Object(s.a)([Object(f.a)(h.a)],j.prototype,"type",void 0),Object(s.a)([Object(b.b)()],j.prototype,"valueType",void 0),Object(s.a)([Object(d.a)("valueType",["description"])],j.prototype,"readValueType",null);var m=j=a=Object(s.a)([Object(y.a)("esri.layers.support.Field")],j)},668:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return S}));var a=r(22),n=r(21),i=r(2),o=r(4),l=r(5),s=r(6),u=r(0),c=r(114),b=r(210),p=r(42),f=r(26),d=r(11),y=r(1),v=(r(19),r(14),r(15),r(57)),h=r(10),O=r(43),j=r(45),m=r(62),g=r(666),w=new p.a({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh","":null}),k=function(e){Object(l.a)(r,e);var t=Object(s.a)(r);function r(e){var a;return Object(i.a)(this,r),(a=t.call(this,e)).displayFieldName=null,a.exceededTransferLimit=!1,a.features=[],a.fields=null,a.geometryType=null,a.hasM=!1,a.hasZ=!1,a.queryGeometry=null,a.spatialReference=null,a}return Object(o.a)(r,[{key:"readFeatures",value:function(e,t){for(var r=j.a.fromJSON(t.spatialReference),a=[],n=0;n<e.length;n++){var i=e[n],o=b.a.fromJSON(i),l=i.geometry&&i.geometry.spatialReference;Object(d.j)(o.geometry)&&!l&&(o.geometry.spatialReference=r),a.push(o)}return a}},{key:"writeGeometryType",value:function(e,t,r,a){if(e)w.write(e,t,r,a);else{var i=this.features;if(i){var o,l=Object(n.a)(i);try{for(l.s();!(o=l.n()).done;){var s=o.value;if(s&&Object(d.j)(s.geometry))return void w.write(s.geometry.type,t,r,a)}}catch(u){l.e(u)}finally{l.f()}}}}},{key:"readQueryGeometry",value:function(e,t){if(!e)return null;var r=!!e.spatialReference,a=Object(m.a)(e);return!r&&t.spatialReference&&(a.spatialReference=j.a.fromJSON(t.spatialReference)),a}},{key:"writeSpatialReference",value:function(e,t){if(e)t.spatialReference=e.toJSON();else{var r=this.features;if(r){var a,i=Object(n.a)(r);try{for(i.s();!(a=i.n()).done;){var o=a.value;if(o&&Object(d.j)(o.geometry)&&o.geometry.spatialReference)return void(t.spatialReference=o.geometry.spatialReference.toJSON())}}catch(l){i.e(l)}finally{i.f()}}}}},{key:"toJSON",value:function(e){var t=this.write(null);if(t.features&&Array.isArray(e)&&e.length>0)for(var r=0;r<t.features.length;r++){var a=t.features[r];if(a.geometry){var n=e&&e[r];a.geometry=n&&n.toJSON()||a.geometry}}return t}},{key:"quantize",value:function(e){for(var t=Object(a.a)(e.scale,2),r=t[0],n=t[1],i=Object(a.a)(e.translate,2),o=i[0],l=i[1],s=this.features,u=this._getQuantizationFunction(this.geometryType,(function(e){return Math.round((e-o)/r)}),(function(e){return Math.round((l-e)/n)})),c=0,b=s.length;c<b;c++)u(Object(d.q)(s[c].geometry))||(s.splice(c,1),c--,b--);return this.transform=e,this}},{key:"unquantize",value:function(){var e=this.geometryType,t=this.features,r=this.transform;if(!r)return this;var i,o=Object(a.a)(r.translate,2),l=o[0],s=o[1],u=Object(a.a)(r.scale,2),c=u[0],b=u[1],p=this._getHydrationFunction(e,(function(e){return e*c+l}),(function(e){return s-e*b})),f=Object(n.a)(t);try{for(f.s();!(i=f.n()).done;){var y=i.value.geometry;Object(d.j)(y)&&p(y)}}catch(v){f.e(v)}finally{f.f()}return this.transform=null,this}},{key:"_quantizePoints",value:function(e,t,r){for(var a,n,i=[],o=0,l=e.length;o<l;o++){var s=e[o];if(o>0){var u=t(s[0]),c=r(s[1]);u===a&&c===n||(i.push([u-a,c-n]),a=u,n=c)}else a=t(s[0]),n=r(s[1]),i.push([a,n])}return i.length>0?i:null}},{key:"_getQuantizationFunction",value:function(e,t,r){var a=this;return"point"===e?function(e){return e.x=t(e.x),e.y=r(e.y),e}:"polyline"===e||"polygon"===e?function(e){for(var n=Object(m.g)(e)?e.rings:e.paths,i=[],o=0,l=n.length;o<l;o++){var s=n[o],u=a._quantizePoints(s,t,r);u&&i.push(u)}return i.length>0?(Object(m.g)(e)?e.rings=i:e.paths=i,e):null}:"multipoint"===e?function(e){var n=a._quantizePoints(e.points,t,r);return n.length>0?(e.points=n,e):null}:"extent"===e?function(e){return e}:null}},{key:"_getHydrationFunction",value:function(e,t,r){return"point"===e?function(e){e.x=t(e.x),e.y=r(e.y)}:"polyline"===e||"polygon"===e?function(e){for(var a,n,i=Object(m.g)(e)?e.rings:e.paths,o=0,l=i.length;o<l;o++)for(var s=i[o],u=0,c=s.length;u<c;u++){var b=s[u];u>0?(a+=b[0],n+=b[1]):(a=b[0],n=b[1]),b[0]=t(a),b[1]=r(n)}}:"extent"===e?function(e){e.xmin=t(e.xmin),e.ymin=r(e.ymin),e.xmax=t(e.xmax),e.ymax=r(e.ymax)}:"multipoint"===e?function(e){for(var a,n,i=e.points,o=0,l=i.length;o<l;o++){var s=i[o];o>0?(a+=s[0],n+=s[1]):(a=s[0],n=s[1]),s[0]=t(a),s[1]=r(n)}}:void 0}}]),r}(f.a);Object(u.a)([Object(y.b)({type:String,json:{write:!0}})],k.prototype,"displayFieldName",void 0),Object(u.a)([Object(y.b)({type:Boolean,json:{write:{overridePolicy:function(e){return{enabled:e}}}}})],k.prototype,"exceededTransferLimit",void 0),Object(u.a)([Object(y.b)({type:[b.a],json:{write:!0}})],k.prototype,"features",void 0),Object(u.a)([Object(v.a)("features")],k.prototype,"readFeatures",null),Object(u.a)([Object(y.b)({type:[g.a],json:{write:!0}})],k.prototype,"fields",void 0),Object(u.a)([Object(y.b)({type:["point","multipoint","polyline","polygon","extent","mesh"],json:{read:{reader:w.read}}})],k.prototype,"geometryType",void 0),Object(u.a)([Object(O.a)("geometryType")],k.prototype,"writeGeometryType",null),Object(u.a)([Object(y.b)({type:Boolean,json:{write:{overridePolicy:function(e){return{enabled:e}}}}})],k.prototype,"hasM",void 0),Object(u.a)([Object(y.b)({type:Boolean,json:{write:{overridePolicy:function(e){return{enabled:e}}}}})],k.prototype,"hasZ",void 0),Object(u.a)([Object(y.b)({types:c.a,json:{write:!0}})],k.prototype,"queryGeometry",void 0),Object(u.a)([Object(v.a)("queryGeometry")],k.prototype,"readQueryGeometry",null),Object(u.a)([Object(y.b)({type:j.a,json:{write:!0}})],k.prototype,"spatialReference",void 0),Object(u.a)([Object(O.a)("spatialReference")],k.prototype,"writeSpatialReference",null),Object(u.a)([Object(y.b)({json:{write:!0}})],k.prototype,"transform",void 0),(k=Object(u.a)([Object(h.a)("esri.rest.support.FeatureSet")],k)).prototype.toJSON.isDefaultToJSON=!0,k||(k={});var S=k},677:function(e,t,r){"use strict";r.d(t,"a",(function(){return S})),r.d(t,"b",(function(){return x}));var a=r(21),n=r(2),i=r(4),o=r(5),l=r(6),s=r(0),u=r(60),c=r(8),b=r(11),p=r(23),f=r(18),d=r(164),y=function(){function e(){Object(n.a)(this,e),this._propertyOriginMap=new Map,this._originStores=new Array(d.a),this._values=new Map}return Object(i.a)(e,[{key:"clone",value:function(t){var r=this,a=new e,n=this._originStores[0];n&&n.forEach((function(e,t){a.set(t,Object(f.a)(e),0)}));for(var i=function(e){var n=r._originStores[e];n&&n.forEach((function(r,n){t&&t.has(n)||a.set(n,Object(f.a)(r),e)}))},o=2;o<d.a;o++)i(o);return a}},{key:"get",value:function(e,t){var r=void 0===t?this._values:this._originStores[t];return r?r.get(e):void 0}},{key:"keys",value:function(e){var t=null==e?this._values:this._originStores[e];return t?Object(p.a)(t.keys()):[]}},{key:"set",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:6,a=this._originStores[r];if(a||(a=new Map,this._originStores[r]=a),a.set(e,t),!this._values.has(e)||Object(b.c)(this._propertyOriginMap.get(e))<=r){var n=this._values.get(e);return this._values.set(e,t),this._propertyOriginMap.set(e,r),n!==t}return!1}},{key:"delete",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6,r=this._originStores[t];if(r){var a=r.get(e);if(r.delete(e),this._values.has(e)&&this._propertyOriginMap.get(e)===t){this._values.delete(e);for(var n=t-1;n>=0;n--){var i=this._originStores[n];if(i&&i.has(e)){this._values.set(e,i.get(e)),this._propertyOriginMap.set(e,n);break}}}return a}}},{key:"has",value:function(e,t){var r=void 0===t?this._values:this._originStores[t];return!!r&&r.has(e)}},{key:"revert",value:function(e,t){for(;t>0&&!this.has(e,t);)--t;var r=this._originStores[t],a=r&&r.get(e),n=this._values.get(e);return this._values.set(e,a),this._propertyOriginMap.set(e,t),n!==a}},{key:"originOf",value:function(e){return this._propertyOriginMap.get(e)||0}},{key:"forEach",value:function(e){this._values.forEach(e)}}]),e}(),v=r(336),h=r(69),O=r(10),j=function(e){var t=function(e){Object(o.a)(r,e);var t=Object(l.a)(r);function r(){var e;Object(n.a)(this,r);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];e=t.call.apply(t,[this].concat(i));var l=Object(b.c)(Object(h.a)(Object(c.a)(e))),s=l.metadatas,u=l.store,p=new y;return l.store=p,u.keys().forEach((function(e){p.set(e,u.get(e),0)})),Object.keys(s).forEach((function(e){l.internalGet(e)&&p.set(e,l.internalGet(e),0)})),e}return Object(i.a)(r,[{key:"read",value:function(e,t){Object(v.a)(this,e,t)}},{key:"getAtOrigin",value:function(e,t){var r=m(this),a=Object(d.d)(t);if("string"==typeof e)return r.get(e,a);var n={};return e.forEach((function(e){n[e]=r.get(e,a)})),n}},{key:"originOf",value:function(e){return Object(d.b)(this.originIdOf(e))}},{key:"originIdOf",value:function(e){return m(this).originOf(e)}},{key:"revert",value:function(e,t){var r=m(this),a=Object(d.d)(t),n=Object(h.a)(this);("string"==typeof e?"*"===e?r.keys(a):[e]:e).forEach((function(e){n.invalidate(e),r.revert(e,a),n.commit(e)}))}}]),r}(e);return t=Object(s.a)([Object(O.a)("esri.core.ReadOnlyMultiOriginJSONSupport")],t),t};function m(e){return Object(h.a)(e).store}var g=function(e){Object(o.a)(r,e);var t=Object(l.a)(r);function r(){return Object(n.a)(this,r),t.apply(this,arguments)}return r}(j(u.a));g=Object(s.a)([Object(O.a)("esri.core.ReadOnlyMultiOriginJSONSupport")],g);var w=r(335);function k(e){return Object(h.a)(e).store}var S=function(e){var t=function(e){Object(o.a)(r,e);var t=Object(l.a)(r);function r(){Object(n.a)(this,r);for(var e=arguments.length,a=new Array(e),i=0;i<e;i++)a[i]=arguments[i];return t.call.apply(t,[this].concat(a))}return r}(function(e){var t=function(e){Object(o.a)(r,e);var t=Object(l.a)(r);function r(){Object(n.a)(this,r);for(var e=arguments.length,a=new Array(e),i=0;i<e;i++)a[i]=arguments[i];return t.call.apply(t,[this].concat(a))}return Object(i.a)(r,[{key:"clear",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"user";return k(this).delete(e,Object(d.d)(t))}},{key:"write",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return Object(w.b)(this,e=e||{},t),e}},{key:"setAtOrigin",value:function(e,t,r){Object(h.a)(this).setAtOrigin(e,t,Object(d.d)(r))}},{key:"removeOrigin",value:function(e){var t,r=k(this),n=Object(d.d)(e),i=r.keys(n),o=Object(a.a)(i);try{for(o.s();!(t=o.n()).done;){var l=t.value;r.originOf(l)===n&&r.set(l,r.get(l,n),6)}}catch(s){o.e(s)}finally{o.f()}}},{key:"updateOrigin",value:function(e,t){for(var r=k(this),a=Object(d.d)(t),n=this.get(e),i=a+1;i<d.a;++i)r.delete(e,i);r.set(e,n,a)}},{key:"toJSON",value:function(e){return this.write({},e)}}]),r}(e);return(t=Object(s.a)([Object(O.a)("esri.core.WriteableMultiOriginJSONSupport")],t)).prototype.toJSON.isDefaultToJSON=!0,t}(j(e)));return t=Object(s.a)([Object(O.a)("esri.core.MultiOriginJSONSupport")],t)},x=function(e){Object(o.a)(r,e);var t=Object(l.a)(r);function r(){return Object(n.a)(this,r),t.apply(this,arguments)}return r}(S(u.a));x=Object(s.a)([Object(O.a)("esri.core.MultiOriginJSONSupport")],x)},679:function(e,t,r){"use strict";r.d(t,"a",(function(){return s})),r.d(t,"b",(function(){return l}));r(19);var a=r(664),n=r(660),i=r(661),o=r(662),l={key:"type",base:n.a,typeMap:{range:o.a,"coded-value":a.a,inherited:i.a}};function s(e){if(!e||!e.type)return null;switch(e.type){case"range":return o.a.fromJSON(e);case"codedValue":return a.a.fromJSON(e);case"inherited":return i.a.fromJSON(e)}return null}},682:function(e,t,r){"use strict";r.d(t,"a",(function(){return V}));var a=r(7),n=r.n(a),i=r(12),o=r(2),l=r(4),s=r(5),u=r(6),c=r(0),b=r(68),p=(r(114),r(82)),f=r(29),d=r(184),y=r(239),v=r(142),h=r(15),O=r(30),j=r(27),m=r(1),g=(r(19),r(14),r(10)),w=r(58),k=r(45),S=0,x=h.a.getLogger("esri.layers.Layer"),I=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(o.a)(this,a),(e=t.apply(this,arguments)).attributionDataUrl=null,e.fullExtent=new w.a(-180,-90,180,90,k.a.WGS84),e.id=Date.now().toString(16)+"-layer-"+S++,e.legendEnabled=!0,e.listMode="show",e.opacity=1,e.parent=null,e.popupEnabled=!0,e.attributionVisible=!0,e.spatialReference=k.a.WGS84,e.title=null,e.type=null,e.url=null,e.visible=!0,e}return Object(l.a)(a,[{key:"initialize",value:function(){var e=this;this.when().catch((function(t){var r,a;Object(O.m)(t)||h.a.getLogger(e.declaredClass).error("#load()","Failed to load layer (title: '".concat(null!=(r=e.title)?r:"no title","', id: '").concat(null!=(a=e.id)?a:"no id","')"),{error:t})}))}},{key:"destroy",value:function(){if(this.parent){var e=this,t=this.parent;"layers"in t&&t.layers.includes(e)?t.layers.remove(e):"tables"in t&&t.tables.includes(e)?t.tables.remove(e):"baseLayers"in t&&t.baseLayers.includes(e)?t.baseLayers.remove(e):"baseLayers"in t&&t.referenceLayers.includes(e)&&t.referenceLayers.remove(e)}}},{key:"hasAttributionData",get:function(){return null!=this.attributionDataUrl}},{key:"parsedUrl",get:function(){var e=this.url;return e?Object(j.J)(e):null}},{key:"fetchAttributionData",value:function(){var e=Object(i.a)(n.a.mark((function e(){var t;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.attributionDataUrl,!this.hasAttributionData||!t){e.next=5;break}return e.next=4,Object(p.default)(t,{query:{f:"json"},responseType:"json"});case 4:return e.abrupt("return",e.sent.data);case 5:throw new f.a("layer:no-attribution-data","Layer does not have attribution data");case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}],[{key:"fromArcGISServerUrl",value:function(){var e=Object(i.a)(n.a.mark((function e(t){var a,i;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="string"==typeof t?{url:t}:t,e.next=3,r.e(85).then(r.bind(null,783));case 3:return i=e.sent,e.prev=4,e.next=7,i.fromUrl(a);case 7:return e.abrupt("return",e.sent);case 10:throw e.prev=10,e.t0=e.catch(4),x.error("#fromArcGISServerUrl({ url: '"+a.url+"'})","Failed to create layer from arcgis server url",e.t0),e.t0;case 13:case"end":return e.stop()}}),e,null,[[4,10]])})));return function(t){return e.apply(this,arguments)}}()},{key:"fromPortalItem",value:function(){var e=Object(i.a)(n.a.mark((function e(t){var a,i,o,l,s;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="portalItem"in t?t:{portalItem:t},e.next=3,Promise.all([r.e(17),r.e(97)]).then(r.bind(null,774));case 3:return i=e.sent,e.prev=4,e.next=7,i.fromItem(a);case 7:return e.abrupt("return",e.sent);case 10:throw e.prev=10,e.t0=e.catch(4),o=a&&a.portalItem,l=o&&o.id||"unset",s=o&&o.portal&&o.portal.url||b.a.portalUrl,x.error("#fromPortalItem()","Failed to create layer from portal item (portal: '"+s+"', id: '"+l+"')",e.t0),e.t0;case 14:case"end":return e.stop()}}),e,null,[[4,10]])})));return function(t){return e.apply(this,arguments)}}()}]),a}(d.a.EventedMixin(Object(y.a)(v.a)));Object(c.a)([Object(m.b)({type:String})],I.prototype,"attributionDataUrl",void 0),Object(c.a)([Object(m.b)({type:w.a})],I.prototype,"fullExtent",void 0),Object(c.a)([Object(m.b)({readOnly:!0})],I.prototype,"hasAttributionData",null),Object(c.a)([Object(m.b)({type:String})],I.prototype,"id",void 0),Object(c.a)([Object(m.b)({type:Boolean,nonNullable:!0})],I.prototype,"legendEnabled",void 0),Object(c.a)([Object(m.b)({type:["show","hide","hide-children"]})],I.prototype,"listMode",void 0),Object(c.a)([Object(m.b)({type:Number,range:{min:0,max:1},nonNullable:!0})],I.prototype,"opacity",void 0),Object(c.a)([Object(m.b)()],I.prototype,"parent",void 0),Object(c.a)([Object(m.b)({readOnly:!0})],I.prototype,"parsedUrl",null),Object(c.a)([Object(m.b)({type:Boolean})],I.prototype,"popupEnabled",void 0),Object(c.a)([Object(m.b)({type:Boolean})],I.prototype,"attributionVisible",void 0),Object(c.a)([Object(m.b)({type:k.a})],I.prototype,"spatialReference",void 0),Object(c.a)([Object(m.b)({type:String})],I.prototype,"title",void 0),Object(c.a)([Object(m.b)({type:String,readOnly:!0,json:{read:!1}})],I.prototype,"type",void 0),Object(c.a)([Object(m.b)()],I.prototype,"url",void 0),Object(c.a)([Object(m.b)({type:Boolean,nonNullable:!0})],I.prototype,"visible",void 0);var V=I=Object(c.a)([Object(g.a)("esri.layers.Layer")],I)},683:function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var a=r(135),n=r(70),i={inches:Object(a.b)(1,"meters","inches"),feet:Object(a.b)(1,"meters","feet"),"us-feet":Object(a.b)(1,"meters","us-feet"),yards:Object(a.b)(1,"meters","yards"),miles:Object(a.b)(1,"meters","miles"),"nautical-miles":Object(a.b)(1,"meters","nautical-miles"),millimeters:Object(a.b)(1,"meters","millimeters"),centimeters:Object(a.b)(1,"meters","centimeters"),decimeters:Object(a.b)(1,"meters","decimeters"),meters:Object(a.b)(1,"meters","meters"),kilometers:Object(a.b)(1,"meters","kilometers"),"decimal-degrees":1/Object(a.i)(1,"meters",n.a.radius)}},690:function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var a=new(r(42).a)({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml"})},694:function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));r(19);function a(e){}},697:function(e,t,r){"use strict";r.d(t,"a",(function(){return V}));var a=r(7),n=r.n(a),i=r(12),o=r(2),l=r(4),s=r(8),u=r(5),c=r(6),b=r(0),p=r(15),f=r(30),d=r(1),y=(r(19),r(14),r(10)),v=r(21),h=r(52),O=r(215),j=new h.a,m=new WeakMap;function g(e){w(e)&&j.push(e)}function w(e){return e&&"object"==typeof e&&"refreshInterval"in e&&"refresh"in e}function k(e,t){return Number.isFinite(e)&&Number.isFinite(t)?t<=0?e:k(t,e%t):0}var S=0,x=0;function I(){var e,t=Date.now(),r=Object(v.a)(j);try{for(r.s();!(e=r.n()).done;){var a,n=e.value;if(n.refreshInterval)t-(null!=(a=m.get(n))?a:0)+5>=6e4*n.refreshInterval&&(m.set(n,t),n.refresh(t))}}catch(i){r.e(i)}finally{r.f()}}Object(O.a)((function(){var e,t=Date.now(),r=0,a=Object(v.a)(j);try{for(a.s();!(e=a.n()).done;){var n=e.value;r=k(Math.round(6e4*n.refreshInterval),r),n.refreshInterval?m.get(n)||m.set(n,t):m.delete(n)}}catch(i){a.e(i)}finally{a.f()}if(r!==x){if(x=r,clearInterval(S),0===x)return void(S=0);S=setInterval(I,x)}}));var V=function(e){var t=function(e){Object(u.a)(r,e);var t=Object(c.a)(r);function r(){var e;Object(o.a)(this,r);for(var a=arguments.length,n=new Array(a),i=0;i<a;i++)n[i]=arguments[i];return(e=t.call.apply(t,[this].concat(n))).refreshInterval=0,e.refreshTimestamp=0,e._debounceHasDataChanged=Object(f.i)((function(){return e.hasDataChanged()})),e.when().then((function(){g(Object(s.a)(e))}),(function(){})),e}return Object(l.a)(r,[{key:"destroy",value:function(){var e;w(e=this)&&j.includes(e)&&j.remove(e)}},{key:"refreshParameters",get:function(){return{_ts:this.refreshTimestamp||null}}},{key:"refresh",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now();Object(f.l)(this._debounceHasDataChanged()).then((function(r){r&&(e._set("refreshTimestamp",t),e.emit("refresh"))}),(function(t){p.a.getLogger(e.declaredClass).error(t)}))}},{key:"hasDataChanged",value:function(){var e=Object(i.a)(n.a.mark((function e(){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),r}(e);return Object(b.a)([Object(d.b)({type:Number,cast:function(e){return e>=.1?e:e<=0?0:.1},json:{write:!0,origins:{"web-document":{write:!0}}}})],t.prototype,"refreshInterval",void 0),Object(b.a)([Object(d.b)({readOnly:!0})],t.prototype,"refreshTimestamp",void 0),Object(b.a)([Object(d.b)()],t.prototype,"refreshParameters",null),t=Object(b.a)([Object(y.a)("esri.layers.mixins.RefreshableLayer")],t),t}},699:function(e,t,r){"use strict";r.d(t,"a",(function(){return E}));var a=r(13),n=r(7),i=r.n(n),o=r(12),l=r(2),s=r(4),u=r(77),c=r(65),b=r(5),p=r(6),f=r(0),d=r(83),y=r(82),v=r(295),h=r(29),O=r(15),j=r(11),m=r(30),g=r(27),w=r(1),k=(r(19),r(14),r(57)),S=r(10),x=r(43),I=r(85),V=r(334),F=r(338),_=O.a.getLogger("esri.layers.mixins.PortalLayer"),E=function(e){var t=function(e){Object(b.a)(n,e);var t=Object(p.a)(n);function n(){var e;return Object(l.a)(this,n),(e=t.apply(this,arguments)).resourceReferences={portalItem:null,paths:[]},e.userHasEditingPrivileges=!0,e}return Object(s.a)(n,[{key:"destroy",value:function(){var e;null==(e=this.portalItem)||e.destroy(),this.portalItem=null}},{key:"portalItem",set:function(e){e!==this._get("portalItem")&&(this.removeOrigin("portal-item"),this._set("portalItem",e))}},{key:"readPortalItem",value:function(e,t,r){if(t.itemId)return new V.default({id:t.itemId,portal:r&&r.portal})}},{key:"writePortalItem",value:function(e,t){e&&e.id&&(t.itemId=e.id)}},{key:"loadFromPortal",value:function(){var e=Object(o.a)(i.a.mark((function e(t,a){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.portalItem||!this.portalItem.id){e.next=14;break}return e.prev=1,e.next=4,r.e(17).then(r.bind(null,781));case 4:return n=e.sent,Object(m.v)(a),e.next=8,n.load({instance:this,supportedTypes:t.supportedTypes,validateItem:t.validateItem,supportsData:t.supportsData},a);case 8:return e.abrupt("return",e.sent);case 11:throw e.prev=11,e.t0=e.catch(1),Object(m.m)(e.t0)||_.warn("Failed to load layer (".concat(this.title,", ").concat(this.id,") portal item (").concat(this.portalItem.id,")\n  ").concat(e.t0)),e.t0;case 14:case"end":return e.stop()}}),e,this,[[1,11]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"finishLoadEditablePortalLayer",value:function(){var e=Object(o.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=this,e.next=3,this.fetchUserHasEditingPrivileges(t).catch((function(e){return Object(m.u)(e),!0}));case 3:e.t1=e.sent,e.t0._set.call(e.t0,"userHasEditingPrivileges",e.t1);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchUserHasEditingPrivileges",value:function(){var e=Object(o.a)(i.a.mark((function e(t){var r,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.url?null==d.b?void 0:d.b.findCredential(this.url):null){e.next=3;break}return e.abrupt("return",!0);case 3:if(T.credential!==r){e.next=7;break}e.t0=T.user,e.next=10;break;case 7:return e.next=9,this.fetchEditingUser(t);case 9:e.t0=e.sent;case 10:return a=e.t0,e.abrupt("return",(T.credential=r,T.user=a,Object(j.i)(a)||null==a.privileges||a.privileges.includes("features:user:edit")));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchEditingUser",value:function(){var e=Object(o.a)(i.a.mark((function e(t){var r,a,n,o,l,s,u,c,b;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=null==(r=this.portalItem)||null==(a=r.portal)?void 0:a.user)){e.next=3;break}return e.abrupt("return",n);case 3:if(null!=(o=d.b.findServerInfo(this.url))&&o.owningSystemUrl){e.next=6;break}return e.abrupt("return",null);case 6:if(l="".concat(o.owningSystemUrl,"/sharing/rest"),!(s=I.a.getDefault())||!s.loaded||Object(g.C)(s.restUrl)!==Object(g.C)(l)){e.next=9;break}return e.abrupt("return",s.user);case 9:return u="".concat(l,"/community/self"),c=Object(j.j)(t)?t.signal:null,e.next=13,Object(v.c)(Object(y.default)(u,{authMode:"no-prompt",query:{f:"json"},signal:c}));case 13:return b=e.sent,e.abrupt("return",b.ok?F.default.fromJSON(b.value.data):null);case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"read",value:function(e,t){t&&(t.layer=this),Object(u.a)(Object(c.a)(n.prototype),"read",this).call(this,e,t)}},{key:"write",value:function(e,t){var r=t&&t.portal,i=this.portalItem&&this.portalItem.id&&(this.portalItem.portal||I.a.getDefault());return r&&i&&!Object(g.r)(i.restUrl,r.restUrl)?(t.messages&&t.messages.push(new h.a("layer:cross-portal","The layer '".concat(this.title," (").concat(this.id,")' cannot be persisted because it refers to an item on a different portal than the one being saved to. To save the scene, set the layer.portalItem to null or save the scene to the same portal as the item associated with the layer"),{layer:this})),null):Object(u.a)(Object(c.a)(n.prototype),"write",this).call(this,e,Object(a.a)(Object(a.a)({},t),{},{layer:this}))}}]),n}(e);return Object(f.a)([Object(w.b)({type:V.default})],t.prototype,"portalItem",null),Object(f.a)([Object(k.a)("web-document","portalItem",["itemId"])],t.prototype,"readPortalItem",null),Object(f.a)([Object(x.a)("web-document","portalItem",{itemId:{type:String}})],t.prototype,"writePortalItem",null),Object(f.a)([Object(w.b)()],t.prototype,"resourceReferences",void 0),Object(f.a)([Object(w.b)({readOnly:!0})],t.prototype,"userHasEditingPrivileges",void 0),t=Object(f.a)([Object(S.a)("esri.layers.mixins.PortalLayer")],t),t},T={credential:null,user:null}},704:function(e,t,r){"use strict";function a(e){return e&&"esri.renderers.visualVariables.SizeVariable"===e.declaredClass}function n(e){return null!=e&&!isNaN(e)&&isFinite(e)}function i(e){return e.valueExpression?"expression":e.field&&"string"==typeof e.field?"field":"unknown"}function o(e,t){var r=t||i(e),a=e.valueUnit||"unknown";return"unknown"===r?"constant":e.stops?"stops":null!=e.minSize&&null!=e.maxSize&&null!=e.minDataValue&&null!=e.maxDataValue?"clamped-linear":"unknown"===a?null!=e.minSize&&null!=e.minDataValue?e.minSize&&e.minDataValue?"proportional":"additive":"identity":"real-world-size"}r.d(t,"a",(function(){return i})),r.d(t,"b",(function(){return o})),r.d(t,"c",(function(){return a})),r.d(t,"d",(function(){return n}))},726:function(e,t,r){"use strict";r.d(t,"a",(function(){return d})),r.d(t,"b",(function(){return f}));var a=r(2),n=r(4),i=r(5),o=r(6),l=r(0),s=r(60),u=r(183),c=r(1),b=r(10),p=r(763),f=function(e){var t=function(e){Object(i.a)(r,e);var t=Object(o.a)(r);function r(){return Object(a.a)(this,r),t.apply(this,arguments)}return Object(n.a)(r,[{key:"destroy",value:function(){this.destroyed||(this.handles.destroy(),this.updatingHandles.destroy())}},{key:"handles",get:function(){return this._get("handles")||new u.a}},{key:"updatingHandles",get:function(){return this._get("updatingHandles")||new p.a}}]),r}(e);return Object(l.a)([Object(c.b)({readOnly:!0})],t.prototype,"handles",null),Object(l.a)([Object(c.b)({readOnly:!0})],t.prototype,"updatingHandles",null),t=Object(l.a)([Object(b.a)("esri.core.HandleOwner")],t),t},d=function(e){Object(i.a)(r,e);var t=Object(o.a)(r);function r(){return Object(a.a)(this,r),t.apply(this,arguments)}return r}(f(s.a));d=Object(l.a)([Object(b.a)("esri.core.HandleOwner")],d)},751:function(e,t,r){"use strict";r.d(t,"a",(function(){return S})),r.d(t,"b",(function(){return v})),r.d(t,"c",(function(){return h})),r.d(t,"d",(function(){return O})),r.d(t,"e",(function(){return j})),r.d(t,"f",(function(){return w})),r.d(t,"g",(function(){return y}));var a=r(21),n=r(22),i=r(46),o=r(210),l=r(694),s=r(15),u=r(11),c=r(683),b=r(704),p=s.a.getLogger("esri.renderers.visualVariables.support.visualVariableUtils"),f=new o.a,d=Math.PI,y=/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i;function v(e,t,r){var a="visualVariables"in e&&e.visualVariables?e.visualVariables.filter((function(e){return"color"===e.type}))[0]:e;if(a)if("esri.renderers.visualVariables.ColorVariable"===a.declaredClass){var n="number"==typeof t,o=n?null:t,l=o&&o.attributes,s=n?t:null,c=a.field,b=a.cache,f=b.ipData,d=b.hasExpression,y=a.cache.compiledFunc;if(!c&&!d){var v=a.stops;return v&&v[0]&&v[0].color}if("number"!=typeof s)if(d){if(!Object(u.j)(r)||!Object(u.j)(r.arcade))return void p.error("Use of arcade expressions requires an arcade context");var h={viewingMode:r.viewingMode,scale:r.scale,spatialReference:r.spatialReference},O=r.arcade.arcadeUtils,j=O.getViewInfo(h),m=O.createExecContext(o,j);if(!y){var g=O.createSyntaxTree(a.valueExpression);y=O.createFunction(g),a.cache.compiledFunc=y}s=O.executeFunction(y,m)}else l&&(s=l[c]);var w=a.normalizationField,S=l?parseFloat(l[w]):void 0;if(null!=s&&(!w||n||!isNaN(S)&&0!==S)){isNaN(S)||n||(s/=S);var x=k(s,f);if(x){var I=x[0],V=x[1],F=I===V?a.stops[I].color:i.a.blendColors(a.stops[I].color,a.stops[V].color,x[2],Object(u.j)(r)?r.color:void 0);return new i.a(F)}}}else p.warn("The visualVariable should be an instance of esri.renderers.visualVariables.ColorVariable")}function h(e,t,r){var a="visualVariables"in e&&e.visualVariables?e.visualVariables.filter((function(e){return"opacity"===e.type}))[0]:e;if(a)if("esri.renderers.visualVariables.OpacityVariable"===a.declaredClass){var n="number"==typeof t,i=n?null:t,o=i&&i.attributes,l=n?t:null,s=a.field,c=a.cache,b=c.ipData,f=c.hasExpression,d=a.cache.compiledFunc;if(!s&&!f){var y=a.stops;return y&&y[0]&&y[0].opacity}if("number"!=typeof l)if(f){if(Object(u.i)(r)||Object(u.i)(r.arcade))return void p.error("Use of arcade expressions requires an arcade context");var v={viewingMode:r.viewingMode,scale:r.scale,spatialReference:r.spatialReference},h=r.arcade.arcadeUtils,O=h.getViewInfo(v),j=h.createExecContext(i,O);if(!d){var m=h.createSyntaxTree(a.valueExpression);d=h.createFunction(m),a.cache.compiledFunc=d}l=h.executeFunction(d,j)}else o&&(l=o[s]);var g=a.normalizationField,w=o?parseFloat(o[g]):void 0;if(null!=l&&(!g||n||!isNaN(w)&&0!==w)){isNaN(w)||n||(l/=w);var S=k(l,b);if(S){var x=S[0],I=S[1];if(x===I)return a.stops[x].opacity;var V=a.stops[x].opacity;return V+(a.stops[I].opacity-V)*S[2]}}}else p.warn("The visualVariable should be an instance of esri.renderers.visualVariables.OpacityVariable")}function O(e,t,r){var a="visualVariables"in e&&e.visualVariables?e.visualVariables.filter((function(e){return"rotation"===e.type}))[0]:e;if(a){if("esri.renderers.visualVariables.RotationVariable"===a.declaredClass){var n=a.axis||"heading",i="heading"===n&&"arithmetic"===a.rotationType?90:0,o="heading"===n&&"arithmetic"===a.rotationType?-1:1,l="number"==typeof t?null:t,s=l&&l.attributes,c=a.field,b=a.cache.hasExpression,f=a.cache.compiledFunc,d=0;if(!c&&!b)return d;if(b){if(Object(u.i)(r)||Object(u.i)(r.arcade))return void p.error("Use of arcade expressions requires an arcade context");var y={viewingMode:r.viewingMode,scale:r.scale,spatialReference:r.spatialReference},v=r.arcade.arcadeUtils,h=v.getViewInfo(y),O=v.createExecContext(l,h);if(!f){var j=v.createSyntaxTree(a.valueExpression);f=v.createFunction(j),a.cache.compiledFunc=f}d=v.executeFunction(f,O)}else s&&(d=s[c]||0);return d="number"!=typeof d||isNaN(d)?null:i+o*d}p.warn("The visualVariable should be an instance of esri.renderers.visualVariables.RotationVariable")}}function j(e,t,r){var a="visualVariables"in e&&e.visualVariables?e.visualVariables.filter((function(e){return"size"===e.type}))[0]:e;if(a){if("esri.renderers.visualVariables.SizeVariable"===a.declaredClass){var i=function(e,t,r,a,i){switch(t.transformationType){case"additive":return function(e,t,r,a){return e+(m(t.minSize,r,a)||t.minDataValue)}(e,t,r,a);case"constant":return function(e,t,r){var a=e.stops,n=a&&a.length&&a[0].size;return null==n&&(n=e.minSize),m(n,t,r)}(t,r,a);case"clamped-linear":return function(e,t,r,a){var n=(e-t.minDataValue)/(t.maxDataValue-t.minDataValue),i=m(t.minSize,r,a),o=m(t.maxSize,r,a),l=Object(u.j)(a)?a.shape:void 0;if(e<=t.minDataValue)return i;if(e>=t.maxDataValue)return o;if("area"===t.scaleBy&&l){var s="circle"===l,c=s?d*Math.pow(i/2,2):i*i,b=c+n*((s?d*Math.pow(o/2,2):o*o)-c);return s?2*Math.sqrt(b/d):Math.sqrt(b)}return i+n*(o-i)}(e,t,r,a);case"proportional":return function(e,t,r,a){var n=Object(u.j)(a)?a.shape:void 0,i=e/t.minDataValue,o=m(t.minSize,r,a),l=m(t.maxSize,r,a);return g("circle"===n?2*Math.sqrt(i*Math.pow(o/2,2)):"square"===n||"diamond"===n||"image"===n?Math.sqrt(i*Math.pow(o,2)):i*o,o,l)}(e,t,r,a);case"stops":return function(e,t,r,a,i){var o=k(e,i),l=Object(n.a)(o,3),s=l[0],u=l[1],c=l[2];if(s===u)return m(t.stops[s].size,r,a);var b=m(t.stops[s].size,r,a);return b+(m(t.stops[u].size,r,a)-b)*c}(e,t,r,a,i);case"real-world-size":return function(e,t,r,a){var n=(Object(u.j)(a)&&a.resolution?a.resolution:1)*c.a[t.valueUnit],i=m(t.minSize,r,a),o=m(t.maxSize,r,a),l=t.valueRepresentation;return g("area"===l?2*Math.sqrt(e/d)/n:"radius"===l||"distance"===l?2*e/n:e/n,i,o)}(e,t,r,a);case"identity":return e;case"unknown":return null}}(function(e,t,r){var a="number"==typeof t,n=a?null:t,i=n&&n.attributes,o=a?t:null,l=e.cache.isScaleDriven,s=e.cache.compiledFunc;if(l){var c=Object(u.j)(r)?r.scale:void 0,f=Object(u.j)(r)?r.view:void 0;o=null==c||"3d"===f?function(e){var t=null,r=null,a=e.stops;return a?(t=a[0].value,r=a[a.length-1].value):(t=e.minDataValue||0,r=e.maxDataValue||0),(t+r)/2}(e):c}else if(!a)switch(e.inputValueType){case"expression":if(Object(u.i)(r)||Object(u.i)(r.arcade))return void p.error("Use of arcade expressions requires an arcade context");var d={viewingMode:r.viewingMode,scale:r.scale,spatialReference:r.spatialReference},y=r.arcade.arcadeUtils,v=y.getViewInfo(d),h=y.createExecContext(n,v);if(!s){var O=y.createSyntaxTree(e.valueExpression);s=y.createFunction(O),e.cache.compiledFunc=s}o=y.executeFunction(s,h);break;case"field":i&&(o=i[e.field]);break;case"unknown":o=null}if(!Object(b.d)(o))return null;if(a||!e.normalizationField)return o;var j=i?parseFloat(i[e.normalizationField]):null;return Object(b.d)(j)&&0!==j?o/j:null}(a,t,r),a,t,r,a.cache.ipData);return null==i||isNaN(i)?0:i}p.warn("The visualVariable should be an instance of esri.renderers.visualVariables.SizeVariable")}}function m(e,t,r){return null==e?null:Object(b.c)(e)?j(e,t,r):Object(b.d)(e)?e:null}function g(e,t,r){return Object(b.d)(r)&&e>r?r:Object(b.d)(t)&&e<t?t:e}function w(e,t,r){if(!(e.cache.isScaleDriven&&"3d"===r||t))return null;var a={scale:t,view:r},n=m(e.minSize,f,a),i=m(e.maxSize,f,a);if(null!=n||null!=i){if(n>i){var o=i;i=n,n=o}return{minSize:n,maxSize:i}}}function k(e,t){if(t){var r=0,a=t.length-1;return t.some((function(t,n){return e<t?(a=n,!0):(r=n,!1)})),[r,a,(e-t[r])/(t[a]-t[r])]}}function S(e,t,r){var n,i=["proportional","proportional","proportional"],o=Object(a.a)(e);try{for(o.s();!(n=o.n()).done;){var s=n.value,u=s.useSymbolValue?"symbol-value":j(s,t,r);switch(s.axis){case"width":i[0]=u;break;case"depth":i[1]=u;break;case"height":i[2]=u;break;case"width-and-depth":i[0]=u,i[1]=u;break;case"all":case void 0:case null:i[0]=u,i[1]=u,i[2]=u;break;default:Object(l.a)(s.axis)}}}catch(c){o.e(c)}finally{o.f()}return i}},763:function(e,t,r){"use strict";r.d(t,"a",(function(){return h}));var a=r(2),n=r(4),i=r(5),o=r(6),l=r(0),s=r(60),u=r(183),c=r(11),b=r(241),p=r(99),f=r(100),d=r(215),y=r(1),v=r(10),h=function(e){Object(i.a)(r,e);var t=Object(o.a)(r);function r(){var e;return Object(a.a)(this,r),(e=t.apply(this,arguments)).updating=!1,e.handleId=0,e.handles=new u.a,e.scheduleHandleId=0,e.pendingPromises=new Set,e}return Object(n.a)(r,[{key:"destroy",value:function(){this.removeAll(),this.handles.destroy()}},{key:"add",value:function(e,t,r){var a=this,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=0!=(1&n),o=++this.handleId;i||this.installSyncUpdatingWatch(e,t,o);var l=0!=(2&n)?Object(p.a)(e,t,r,i):e.watch(t,r,i);return this.handles.add(l,o),{remove:function(){return a.handles.remove(o)}}}},{key:"addOnCollectionPropertyChange",value:function(e,t,r){var a=this,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=0!=(2&n),o=++this.handleId;return this.handles.add([Object(p.b)(e,t,"after-changes",this.createSyncUpdatingCallback()),Object(p.b)(e,t,"change",r,i?function(e){r({added:e.items,removed:[],moved:[],target:e})}:void 0)],o),{remove:function(){a.handles.remove(o)}}}},{key:"addOnCollectionChange",value:function(e,t){var r=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=0!=(2&a),i=++this.handleId;return this.handles.add([e.on("after-changes",this.createSyncUpdatingCallback()),e.on("change",t)],i),n&&t({added:e.items,removed:[],moved:[],target:e}),{remove:function(){r.handles.remove(i)}}}},{key:"addPromise",value:function(e){var t=this;if(Object(c.i)(e))return e;var r=++this.handleId;this.handles.add({remove:function(){t.pendingPromises.delete(e)&&(0!==t.pendingPromises.size||t.handles.has(O)||t._set("updating",!1))}},r),this.pendingPromises.add(e),this._set("updating",!0);var a=function(){return t.handles.remove(r)};return e.then(a,a),e}},{key:"removeAll",value:function(){this.pendingPromises.clear(),this.handles.removeAll(),this._set("updating",!1)}},{key:"installSyncUpdatingWatch",value:function(e,t,r){var a=this.createSyncUpdatingCallback(),n=Object(d.b)((function(){return Object(f.c)(e,t)}),a);return this.handles.add(n,r),n}},{key:"createSyncUpdatingCallback",value:function(){var e=this;return function(){e.handles.remove(O),++e.scheduleHandleId;var t=e.scheduleHandleId;e._get("updating")||e._set("updating",!0),e.handles.add(Object(b.a)((function(){t===e.scheduleHandleId&&(e._set("updating",e.pendingPromises.size>0),e.handles.remove(O))})),O)}}}]),r}(s.a);Object(l.a)([Object(y.b)({readOnly:!0})],h.prototype,"updating",void 0),h=Object(l.a)([Object(v.a)("esri.views.support.WatchUpdatingTracking")],h);var O=-42},808:function(e,t,r){"use strict";r.d(t,"a",(function(){return v}));var a=r(21),n=r(2),i=r(4),o=r(5),l=r(6),s=r(0),u=r(52),c=r(726),b=r(11),p=r(1),f=(r(19),r(14),r(15),r(10)),d=r(215),y=function(e){Object(o.a)(r,e);var t=Object(l.a)(r);function r(e){var a;return Object(n.a)(this,r),(a=t.call(this,e)).getCollections=null,a}return Object(i.a)(r,[{key:"initialize",value:function(){var e=this;this.handles.add(Object(d.a)((function(){return e.refresh()})))}},{key:"destroy",value:function(){this.getCollections=null}},{key:"refresh",value:function(){var e=Object(b.j)(this.getCollections)?this.getCollections():null;if(Object(b.i)(e))this.removeAll();else{var t,r=0,n=Object(a.a)(e);try{for(n.s();!(t=n.n()).done;){var i=t.value;Object(b.j)(i)&&(r=this._processCollection(r,i))}}catch(o){n.e(o)}finally{n.f()}this.splice(r,this.length)}}},{key:"_createNewInstance",value:function(e){return new u.a(e)}},{key:"_processCollection",value:function(e,t){if(!t)return e;var r,n=this.itemFilterFunction?this.itemFilterFunction:function(e){return!!e},i=Object(a.a)(t);try{for(i.s();!(r=i.n()).done;){var o=r.value;if(o){if(n(o)){var l=this.indexOf(o,e);l>=0?l!==e&&this.reorder(o,e):this.add(o,e),++e}if(this.getChildrenFunction){var s=this.getChildrenFunction(o);if(Array.isArray(s)){var u,c=Object(a.a)(s);try{for(c.s();!(u=c.n()).done;){var b=u.value;e=this._processCollection(e,b)}}catch(p){c.e(p)}finally{c.f()}}else e=this._processCollection(e,s)}}}}catch(p){i.e(p)}finally{i.f()}return e}}]),r}(Object(c.b)(u.a));Object(s.a)([Object(p.b)()],y.prototype,"getCollections",void 0),Object(s.a)([Object(p.b)()],y.prototype,"getChildrenFunction",void 0),Object(s.a)([Object(p.b)()],y.prototype,"itemFilterFunction",void 0);var v=y=Object(s.a)([Object(f.a)("esri.core.CollectionFlattener")],y)}}]);
//# sourceMappingURL=60.f7726023.chunk.js.map