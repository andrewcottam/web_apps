(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[67,92,105],{1052:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return ge}));var a=r(7),n=r.n(a),i=r(12),s=r(13),o=r(2),l=r(4),u=r(77),c=r(65),h=r(5),p=r(6),f=r(0),y=r(82),d=r(29),b=r(37),v=r(18),m=r(677),g=r(30),O=r(27),j=r(1),w=(r(14),r(19),r(15)),_=r(57),S=r(10),k=r(43),x=r(58),M=r(45),A=r(682),I=r(917),R=r(710),T=r(730),E=r(709),U=r(699),P=r(716);function D(e){var t={lossy:"UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",lossless:"UklGRhoAAABXRUJQVlA4TA0AAAAvAAAAEAcQERGIiP4HAA==",alpha:"UklGRkoAAABXRUJQVlA4WAoAAAAQAAAAAAAAAAAAQUxQSAwAAAARBxAR/Q9ERP8DAABWUDggGAAAABQBAJ0BKgEAAQAAAP4AAA3AAP7mtQAAAA==",animation:"UklGRlIAAABXRUJQVlA4WAoAAAASAAAAAAAAAAAAQU5JTQYAAAD/////AABBTk1GJgAAAAAAAAAAAAAAAAAAAGQAAABWUDhMDQAAAC8AAAAQBxAREYiI/gcA"};return new Promise((function(r){var a=new Image;a.onload=function(){a.onload=a.onerror=null,r(a.width>0&&a.height>0)},a.onerror=function(){a.onload=a.onerror=null,r(!1)},a.src="data:image/webp;base64,"+t[e]}))}var z=r(22),L=w.a.getLogger("esri.layers.support.SpriteSource"),F=function(){function e(t,r,a,n){Object(o.a)(this,e),this.baseURL=t,this.devicePixelRatio=r,this.maxTextureSize=a,this._spriteImageFormat=n,this._isRetina=!1,this._spritesData={},this.image=null,this.width=null,this.height=null,this.loadStatus="not-loaded"}return Object(l.a)(e,[{key:"spriteNames",get:function(){var e=[];for(var t in this._spritesData)e.push(t);return e.sort(),e}},{key:"getSpriteInfo",value:function(e){return this._spritesData[e]}},{key:"load",value:function(){var e=Object(i.a)(n.a.mark((function e(t){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.baseURL){e.next=13;break}return this.loadStatus="loading",e.prev=2,e.next=5,this._loadSprites(t);case 5:this.loadStatus="loaded",e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),this.loadStatus="failed";case 11:e.next=14;break;case 13:this.loadStatus="failed";case 14:case"end":return e.stop()}}),e,this,[[2,8]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_loadSprites",value:function(e){var t=this;this._isRetina=this.devicePixelRatio>1.15;var r=Object(O.J)(this.baseURL),a=r.query?"?"+Object(O.D)(r.query):"",n=this._isRetina?"@2x":"",i="".concat(r.path).concat(n,".").concat(this._spriteImageFormat).concat(a),o="".concat(r.path).concat(n,".json").concat(a);return Promise.all([Object(y.default)(o,e),Object(y.default)(i,Object(s.a)({responseType:"image"},e))]).then((function(e){var a=Object(z.a)(e,2),n=a[0],i=a[1],s=Object.keys(n.data);if(!s||0===s.length||1===s.length&&"_ssl"===s[0]||!i||!i.data)return t._spritesData=t.image=null,t.width=t.height=0,Promise.resolve(null);t._spritesData=n.data;var o=i.data,l=Math.max(t.maxTextureSize,4096);if(o.width>l||o.height>l){var u="Sprite resource for style ".concat(r.path," is bigger than the maximum allowed of ").concat(l," pixels}");throw L.error(u),new d.a("SpriteSource",u)}t.width=o.width,t.height=o.height;var c=document.createElement("canvas"),h=c.getContext("2d");c.width=o.width,c.height=o.height,h.drawImage(o,0,0,o.width,o.height);for(var p,f=h.getImageData(0,0,o.width,o.height),y=new Uint8Array(f.data),b=0;b<y.length;b+=4)p=y[b+3]/255,y[b]=y[b]*p,y[b+1]=y[b+1]*p,y[b+2]=y[b+2]*p;t.image=y}))}}]),e}(),N=r(743),C=r(840),q=r(21),B=r(68),G=r(856),J=r(835),V=function(){function e(t){if(Object(o.a)(this,e),t instanceof C.a)this._tilemapCache=t;else{if(!t||!("index"in t))throw new Error("Invalid tilemap!");this._tilemap=t.index}}return Object(l.a)(e,[{key:"dataKey",value:function(e,t){if(this._tilemapCache){var r=e.level,a=e.row,n=e.col,i=new J.a(e);return this._tilemapCache.fetchAvailabilityUpsample(r,a,n,i,t).then((function(){return i.world=e.world,i})).catch((function(e){if(Object(g.m)(e))throw e;return null}))}return this._getIndexedDataKey(e)}},{key:"forEach",value:function(e,t,r,a,n){this._callback=n,this._maxLevel=t+e,this._forEach(this._tilemap,t,r,a)}},{key:"_forEach",value:function(e,t,r,a){0!==e&&(this._callback(t,r,a),t!==this._maxLevel&&"object"==typeof e&&(this._forEach(e[0],t+1,2*r,2*a),this._forEach(e[1],t+1,2*r,2*a+1),this._forEach(e[2],t+1,2*r+1,2*a),this._forEach(e[3],t+1,2*r+1,2*a+1)))}},{key:"_getIndexedDataKey",value:function(e){var t=[e];if(e.level<0||e.row<0||e.col<0||e.row>>e.level>0||e.col>>e.level>0)return Promise.resolve(null);for(var r=e;0!==r.level;)r=new J.a(r.level-1,r.row>>1,r.col>>1,r.world),t.push(r);var a,n,i=this._tilemap,s=t.pop();if(1===i)return Promise.resolve(s);for(;t.length;)if(n=(1&(a=t.pop()).col)+((1&a.row)<<1),i){if(0===i[n]){s=null;break}if(1===i[n]){s=a;break}s=a,i=i[n]}return Promise.resolve(s)}}]),e}(),Q=function(){function e(t,r,a){Object(o.a)(this,e),this.tileMapURL="",this.tilemapCache=null,this.parsedUrl=null,this.tileInfo=null,this.capabilities=null,this.tileIndex=null,this.fullExtent=null,this.name=t,this.sourceUrl=r,r&&(this.parsedUrl=Object(O.J)(this.sourceUrl));var n=this.parsedUrl.path,i=this.parsedUrl.query?"?"+Object(O.D)(this.parsedUrl.query):"",s=Object(v.a)(a),l=s.tiles;r&&l.forEach((function(e,t){Object(O.s)(e)||(l[t]=Object(O.y)(n,e)+i)})),this.tileServers=l,a.tileMap&&(this.tileMapURL=Object(O.y)(r,a.tileMap));var u=a.capabilities&&a.capabilities.split(",").map((function(e){return e.toLowerCase().trim()})),c=!!a.exportTilesAllowed,h=!!u&&-1!==u.indexOf("tilemap"),p=c&&a.hasOwnProperty("maxExportTilesCount")?a.maxExportTilesCount:0;this.capabilities={operations:{supportsExportTiles:c,supportsTileMap:h},exportTiles:c?{maxExportTilesCount:+p}:null},this.tileInfo=Object(G.a)(s.tileInfo,s,null,{ignoreMinMaxLOD:!0}),h&&(this.type="vector-tile",this.tilemapCache=new C.a({layer:this}),this.tilemapCache&&(this.tileIndex=new V(this.tilemapCache))),this.fullExtent=x.a.fromJSON(a.fullExtent)}return Object(l.a)(e,[{key:"getRefKey",value:function(e,t){return this.tileIndex?this.tileIndex.dataKey(e,t):Promise.resolve(e)}},{key:"getSourceTileUrl",value:function(e,t,r){var a=this.tileServers[t%this.tileServers.length];return a=a.replace(/\{z\}/gi,e.toString()).replace(/\{y\}/gi,t.toString()).replace(/\{x\}/gi,r.toString())}},{key:"isCompatibleWith",value:function(e){var t=this.tileInfo,r=e.tileInfo;if(!t.spatialReference.equals(r.spatialReference))return!1;if(!t.origin.equals(r.origin))return!1;if(Math.round(t.dpi)!==Math.round(r.dpi))return!1;for(var a=t.lods,n=r.lods,i=Math.min(a.length,n.length),s=0;s<i;s++){var o=a[s],l=n[s];if(o.level!==l.level||Math.round(o.scale)!==Math.round(l.scale))return!1}return!0}}]),e}(),H=B.a.defaults&&B.a.defaults.io.corsEnabledServers;function W(e,t){return Y.apply(this,arguments)}function Y(){return(Y=Object(i.a)(n.a.mark((function e(t,r){var a,i,s,o,l,u,c;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={source:null,sourceBase:null,sourceUrl:null,validatedSource:null,style:null,styleBase:null,styleUrl:null,sourceNameToSource:{},primarySourceName:"",spriteFormat:"png"},i="string"==typeof t?[t,null]:[null,t.jsonUrl],s=Object(z.a)(i,2),o=s[0],l=s[1],u=o?Object(O.J)(o):null,e.next=3,Z(a,"esri",t,l,r);case 3:return c={layerDefinition:a.validatedSource,url:o,parsedUrl:u,serviceUrl:a.sourceUrl,style:a.style,styleUrl:a.styleUrl,spriteUrl:a.style.sprite&&K(a.styleBase,a.style.sprite),spriteFormat:a.spriteFormat,glyphsUrl:a.style.glyphs&&K(a.styleBase,a.style.glyphs),sourceNameToSource:a.sourceNameToSource,primarySourceName:a.primarySourceName},e.abrupt("return",(X(c.spriteUrl),X(c.glyphsUrl),c));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function X(e){if(e){var t=Object(O.m)(e);H&&-1===H.indexOf(t)&&H.push(t)}}function K(){for(var e,t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];for(var n=0;n<r.length;++n)if(Object(O.w)(r[n])){if(e){var i=e.split("://")[0];e=i+":"+r[n].trim()}}else e=Object(O.s)(r[n])?r[n]:Object(O.y)(e,r[n]);return Object(O.H)(e)}function Z(e,t,r,a,n){return $.apply(this,arguments)}function $(){return($=Object(i.a)(n.a.mark((function e(t,r,a,i,o){var l,u,c,h,p,f;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Object(g.v)(o),"string"!=typeof a){e.next=11;break}return X(h=Object(O.C)(a)),p=Object(O.J)(h),e.next=6,Object(y.default)(p.path,Object(s.a)({query:{f:"json"},responseType:"json"},o));case 6:c=e.sent,l=h,u=h,e.next=12;break;case 11:c={data:a},l=a.jsonUrl||null,u=i;case 12:return f=c.data,e.abrupt("return",(c.ssl&&(l&&(l=l.replace(/^http:/i,"https:")),u&&(u=u.replace(/^http:/i,"https:"))),ee(f)?(t.styleUrl=l||null,re(t,f,u,o)):te(f)?t.sourceUrl?ne(t,f,u,!1,r,o):(t.sourceUrl=l||null,ne(t,f,u,!0,r,o)):Promise.reject("You must specify the URL or the JSON for a service or for a style.")));case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ee(e){return!!e.sources}function te(e){return!ee(e)}function re(e,t,r,a){return ae.apply(this,arguments)}function ae(){return(ae=Object(i.a)(n.a.mark((function e(t,r,a,i){var s,o,l,u,c,h;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=a?Object(O.F)(a):O.f,t.styleBase=s,t.style=r,t.styleUrl&&X(t.styleUrl),r["sprite-format"]&&"webp"===r["sprite-format"].toLowerCase()&&(t.spriteFormat="webp"),o=[],!r.sources||!r.sources.esri){e.next=11;break}if(!(l=r.sources.esri).url){e.next=10;break}return e.next=8,Z(t,"esri",K(s,l.url),void 0,i);case 8:e.next=11;break;case 10:o.push(Z(t,"esri",l,s,i));case 11:for(u=0,c=Object.keys(r.sources);u<c.length;u++)"esri"!==(h=c[u])&&"vector"===r.sources[h].type&&(r.sources[h].url?o.push(Z(t,h,K(s,r.sources[h].url),void 0,i)):r.sources[h].tiles&&o.push(Z(t,h,r.sources[h],s,i)));return e.next=14,Promise.all(o);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ne(e,t,r,a,n,i){return ie.apply(this,arguments)}function ie(){return(ie=Object(i.a)(n.a.mark((function e(t,r,a,i,s,o){var l,u,c,h;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l=a?Object(O.H)(a)+"/":O.f,u=se(r,l),c=new Q(s,l,u),i||!(t.primarySourceName in t.sourceNameToSource)){e.next=6;break}if((h=t.sourceNameToSource[t.primarySourceName]).isCompatibleWith(c)){e.next=5;break}return e.abrupt("return",Promise.resolve());case 5:null!=c.fullExtent&&(null!=h.fullExtent?h.fullExtent.union(c.fullExtent):h.fullExtent=c.fullExtent.clone()),h.tileInfo.lods.length<c.tileInfo.lods.length&&(h.tileInfo=c.tileInfo);case 6:if(i?(t.sourceBase=l,t.source=r,t.validatedSource=u,t.primarySourceName=s,t.sourceUrl&&X(t.sourceUrl)):X(l),t.sourceNameToSource[s]=c,t.style){e.next=8;break}return e.abrupt("return",null==r.defaultStyles?Promise.reject():"string"==typeof r.defaultStyles?Z(t,"",K(l,r.defaultStyles,"root.json"),void 0,o):Z(t,"",r.defaultStyles,K(l,"root.json"),o));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function se(e,t){if(e.hasOwnProperty("tileInfo"))return e;for(var r={xmin:-20037507.067161843,ymin:-20037507.067161843,xmax:20037507.067161843,ymax:20037507.067161843,spatialReference:{wkid:102100}},a=78271.51696400007,n=295828763.7957775,i=[],s=e.hasOwnProperty("minzoom")?parseFloat(e.minzoom):0,o=e.hasOwnProperty("maxzoom")?parseFloat(e.maxzoom):22,l=0;l<=o;l++)l>=s&&i.push({level:l,scale:n,resolution:a}),a/=2,n/=2;var u,c=Object(q.a)(e.tiles);try{for(c.s();!(u=c.n()).done;){X(K(t,u.value))}}catch(h){c.e(h)}finally{c.f()}return{capabilities:"TilesOnly",initialExtent:r,fullExtent:r,minScale:0,maxScale:0,tiles:e.tiles,tileInfo:{rows:512,cols:512,dpi:96,format:"pbf",origin:{x:-20037508.342787,y:20037508.342787},lods:i,spatialReference:{wkid:102100}}}}var oe=r(975),le=r(768),ue=function(){function e(t,r){Object(o.a)(this,e),this.lockedSchemaPixelSize=t,this.isGCS=r}return Object(l.a)(e,[{key:"getLevelRowColumn",value:function(e){return this.isGCS?[e[0],e[1]>>1,e[2]>>1]:256===this.lockedSchemaPixelSize&&e[0]>0?[e[0]-1,e[1]>>1,e[2]>>1]:e}},{key:"adjustLevel",value:function(e){return this.isGCS?e:256===this.lockedSchemaPixelSize?e>0?e-1:0:e}},{key:"getShift",value:function(e,t){var r=0,a=0;return(256===this.lockedSchemaPixelSize||this.isGCS)&&(e[2]%2&&(r=t),e[1]%2&&(a=t)),[r,a]}},{key:"getScale",value:function(e){if(this.isGCS){if(512===this.lockedSchemaPixelSize)return 4}else if(256===this.lockedSchemaPixelSize&&0===e)return 1;return 2}}],[{key:"create256x256CompatibleTileInfo",value:function(e){if(!e)return null;if(256===e.size[0]&&256===e.size[1])return e;for(var t=e.spatialReference.isGeographic,r=[],a=e.lods.length,n=0;n<a;n++){var i=e.lods[n],s=t?i.resolution:2*i.resolution;r.push(new le.a({level:i.level,scale:i.scale,resolution:s}))}return new N.a({size:[256,256],dpi:e.dpi,format:e.format,compressionQuality:e.compressionQuality,origin:e.origin,spatialReference:e.spatialReference,lods:r})}},{key:"create512x512CompatibleTileInfo",value:function(e){if(!e)return null;if(256===e.size[0]||256===e.size[1])return null;for(var t=[],r=e.lods.length,a=0;a<r;a++){var n=e.lods[a],i=.5*n.resolution;t.push(new le.a({level:n.level,scale:n.scale,resolution:i}))}return new N.a({size:[512,512],dpi:e.dpi,format:e.format,compressionQuality:e.compressionQuality,origin:e.origin,spatialReference:e.spatialReference,lods:t})}}]),e}(),ce=1e-6;function he(e,t){if(e===t)return!0;if(!e&&null!=t)return!1;if(null!=e&&!t)return!1;if(!e.spatialReference.equals(t.spatialReference)||e.dpi!==t.dpi)return!1;var r,a,n=e.origin,i=t.origin;if(Math.abs(n.x-i.x)>=ce||Math.abs(n.y-i.y)>=ce)return!1;e.lods[0].scale>t.lods[0].scale?(r=e,a=t):(a=e,r=t);for(var s=r.lods[0].scale;s>=a.lods[a.lods.length-1].scale-ce;s/=2)if(Math.abs(s-a.lods[0].scale)<ce)return!0;return!1}function pe(e,t){if(e===t)return e;if(!e&&null!=t)return t;if(null!=e&&!t)return e;for(var r=e.size[0],a=e.format,n=e.dpi,i={x:e.origin.x,y:e.origin.y},s=e.spatialReference.toJSON(),o=e.lods[0].scale>t.lods[0].scale?e.lods[0]:t.lods[0],l=e.lods[e.lods.length-1].scale<=t.lods[t.lods.length-1].scale?e.lods[e.lods.length-1]:t.lods[t.lods.length-1],u=o.scale,c=o.resolution,h=l.scale,p=[],f=u,y=c,d=0;f>h;)p.push({level:d,resolution:y,scale:f}),d++,f/=2,y/=2;return new N.a({size:[r,r],dpi:n,format:a||"pbf",origin:i,lods:p,spatialReference:s})}var fe=r(1028),ye=r(11);function de(e,t){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=1===t?["webgl","experimental-webgl","webkit-3d","moz-webgl"]:["webgl2"],n=null,i=0,s=a;i<s.length;i++){var o=s[i];try{n=e.getContext(o,r)}catch(l){}if(n)break}return n}var be;function ve(){return be||(be=function(){var e={available:!1,version:0,majorPerformanceCaveat:!1,maxTextureSize:0,supportsHighPrecisionFragment:!1,supportsVertexShaderSamplers:!1,supportsElementIndexUint:!1,supportsStandardDerivatives:!1,supportsInstancedArrays:!1,supportsTextureFloat:!1,supportsColorBufferFloat:!1};if(void 0===typeof WebGLRenderingContext)return e;var t=document.createElement("canvas");if(!t)return e;var r=de(t,1,{failIfMajorPerformanceCaveat:!0});if(Object(ye.i)(r)&&(r=de(t,1),Object(ye.j)(r)&&(e.majorPerformanceCaveat=!0)),Object(ye.i)(r))return e;var a=r.getParameter(r.VERSION);if(!a)return e;var n=a.match(/^WebGL\s+([\d.]*)/);if(n){var i=parseFloat(n[1]);e.available=i>=.94;var s=r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.HIGH_FLOAT);s&&(e.supportsHighPrecisionFragment=s.precision>0),e.supportsVertexShaderSamplers=r.getParameter(r.MAX_VERTEX_TEXTURE_IMAGE_UNITS)>0,e.supportsElementIndexUint=null!==r.getExtension("OES_element_index_uint"),e.supportsStandardDerivatives=null!==r.getExtension("OES_standard_derivatives"),e.supportsInstancedArrays=null!==r.getExtension("ANGLE_instanced_arrays"),e.supportsTextureFloat=null!==r.getExtension("OES_texture_float"),e.supportsColorBufferFloat=null!==r.getExtension("WEBGL_color_buffer_float")&&null!==r.getExtension("EXT_float_blend")}return e.maxTextureSize=r.getParameter(r.MAX_TEXTURE_SIZE),e.version=function(){if(void 0===typeof WebGL2RenderingContext)return!1;var e=document.createElement("canvas");if(!e)return!1;var t=de(e,2);return!!Object(ye.j)(t)}()?2:1,e}()),be}var me=function(e){Object(h.a)(r,e);var t=Object(p.a)(r);function r(){var e;Object(o.a)(this,r);for(var a=arguments.length,n=new Array(a),i=0;i<a;i++)n[i]=arguments[i];return(e=t.call.apply(t,[this].concat(n)))._spriteSourceMap=new Map,e.currentStyleInfo=null,e.style=null,e.isReference=null,e.operationalLayerType="VectorTileLayer",e.type="vector-tile",e.url=null,e.symbolCollisionBoxesVisible=!1,e}return Object(l.a)(r,[{key:"normalizeCtorArgs",value:function(e,t){return"string"==typeof e?Object(s.a)({url:e},t):e}},{key:"destroy",value:function(){this._spriteSourceMap.clear()}},{key:"prefetchResources",value:function(){var e=Object(i.a)(n.a.mark((function e(t){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadSpriteSource(b.a.devicePixelRatio||1,t);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"load",value:function(e){var t=this,r=this.loadFromPortal({supportedTypes:["Vector Tile Service"],supportsData:!1},e).catch(g.u).then(Object(i.a)(n.a.mark((function r(){var a;return n.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(t.portalItem&&t.portalItem.id){r.next=2;break}return r.abrupt("return");case 2:return a="".concat(t.portalItem.itemUrl,"/resources/styles/root.json"),r.next=5,Object(y.default)(a,Object(s.a)(Object(s.a)({},e),{},{query:{f:"json"}}));case 5:if(r.t0=r.sent.data,!r.t0){r.next=8;break}t.read({url:a},Object(oe.a)(t.portalItem));case 8:case"end":return r.stop()}}),r)})))).catch(g.u).then((function(){return t._loadStyle(e)}));return this.addResolvingPromise(r),Promise.resolve(this)}},{key:"attributionDataUrl",get:function(){var e=this.currentStyleInfo,t=e&&e.serviceUrl&&Object(O.J)(e.serviceUrl);return t?this._getDefaultAttribution(t.path):null}},{key:"capabilities",get:function(){var e=this._getPrimarySource();return e?e.capabilities:{operations:{supportsExportTiles:!1,supportsTileMap:!1},exportTiles:null}}},{key:"fullExtent",get:function(){var e=this._getPrimarySource();return e?e.fullExtent:null}},{key:"parsedUrl",get:function(){return this.serviceUrl?Object(O.J)(this.serviceUrl):null}},{key:"serviceUrl",get:function(){return this.currentStyleInfo&&this.currentStyleInfo.serviceUrl||null}},{key:"spatialReference",get:function(){return this.tileInfo&&this.tileInfo.spatialReference||null}},{key:"styleUrl",get:function(){return this.currentStyleInfo&&this.currentStyleInfo.styleUrl||null}},{key:"writeStyleUrl",value:function(e,t){e&&Object(O.w)(e)&&(e="https:".concat(e)),t.styleUrl=e}},{key:"tileIndexType",get:function(){var e=this._getPrimarySource();return e?e.type:""}},{key:"tileIndexUrl",get:function(){var e=this._getPrimarySource();return e?e.tileMapURL:""}},{key:"tileInfo",get:function(){var e,t=[];for(var r in this.sourceNameToSource)t.push(this.sourceNameToSource[r]);var a=(null==(e=this._getPrimarySource())?void 0:e.tileInfo)||new N.a;if(t.length>1)for(var n=0;n<t.length;n++)he(a,t[n].tileInfo)&&(a=pe(a,t[n].tileInfo));return a}},{key:"tilemapCache",get:function(){var e=this._getPrimarySource();return e&&e.capabilities.operations.supportsTileMap?e.tilemapCache:null}},{key:"tileServers",get:function(){var e=this._getPrimarySource();return e?e.tileServers:[]}},{key:"readVersion",value:function(e,t){return t.version?parseFloat(t.version):parseFloat(t.currentVersion)}},{key:"compatibleTileInfo256",get:function(){return ue.create256x256CompatibleTileInfo(this.tileInfo)}},{key:"compatibleTileInfo512",get:function(){return ue.create512x512CompatibleTileInfo(this.tileInfo)}},{key:"loadSpriteSource",value:function(){var e=Object(i.a)(n.a.mark((function e(){var t,r,a,i,s=arguments;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=s.length>0&&void 0!==s[0]?s[0]:1,r=s.length>1?s[1]:void 0,this._spriteSourceMap.has(t)){e.next=7;break}return a=ve(),i=new F(this.styleRepository.sprite,t,a.maxTextureSize,this.currentStyleInfo.spriteFormat),e.next=6,i.load(r);case 6:this._spriteSourceMap.set(t,i);case 7:return e.abrupt("return",Promise.resolve(this._spriteSourceMap.get(t)));case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadStyle",value:function(){var e=Object(i.a)(n.a.mark((function e(t,r){var a,i,s,o=this;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t||this.style||this.url,!this._loadingPromise||"string"!=typeof a||this.url!==a||Object(g.n)(this._abortController)){e.next=3;break}return e.abrupt("return",this._loadingPromise);case 3:return(i=this._abortController)&&i.abort(),s=Object(g.d)(),e.abrupt("return",(this._loadingPromise=new Promise((function(e,t){var n={signal:s.signal};o._spriteSourceMap.clear(),o._getSourceAndStyle(a,n).then(e,t),Object(g.q)(r,(function(){s.abort()}))})),this._abortController=s,this._loadingPromise));case 7:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getStyleLayerId",value:function(e){return this.styleRepository.getStyleLayerId(e)}},{key:"getStyleLayerIndex",value:function(e){return this.styleRepository.getStyleLayerIndex(e)}},{key:"getPaintProperties",value:function(e){return Object(v.a)(this.styleRepository.getPaintProperties(e))}},{key:"setPaintProperties",value:function(e,t){var r=this.styleRepository.isPainterDataDriven(e);this.styleRepository.setPaintProperties(e,t);var a=this.styleRepository.isPainterDataDriven(e);this.emit("paint-change",{layer:e,paint:t,isDataDriven:r||a})}},{key:"getStyleLayer",value:function(e){return Object(v.a)(this.styleRepository.getStyleLayer(e))}},{key:"setStyleLayer",value:function(e,t){this.styleRepository.setStyleLayer(e,t),this.emit("style-layer-change",{layer:e,index:t})}},{key:"deleteStyleLayer",value:function(e){this.styleRepository.deleteStyleLayer(e),this.emit("delete-style-layer",{layer:e})}},{key:"getLayoutProperties",value:function(e){return Object(v.a)(this.styleRepository.getLayoutProperties(e))}},{key:"setLayoutProperties",value:function(e,t){this.styleRepository.setLayoutProperties(e,t),this.emit("layout-change",{layer:e,layout:t})}},{key:"setStyleLayerVisibility",value:function(e,t){this.styleRepository.setStyleLayerVisibility(e,t),this.emit("style-layer-visibility-change",{layer:e,visibility:t})}},{key:"getStyleLayerVisibility",value:function(e){return this.styleRepository.getStyleLayerVisibility(e)}},{key:"getTileUrl",value:function(e,t,r){var a=this.tileServers[t%this.tileServers.length];return a=a.replace(/\{z\}/gi,e.toString()).replace(/\{y\}/gi,t.toString()).replace(/\{x\}/gi,r.toString())}},{key:"write",value:function(e,t){return t&&t.origin&&!this.styleUrl?(t.messages&&t.messages.push(new d.a("vectortilelayer:unsupported","VectorTileLayer (".concat(this.title,", ").concat(this.id,") with style defined by JSON only are not supported"),{layer:this})),null):Object(u.a)(Object(c.a)(r.prototype),"write",this).call(this,e,t)}},{key:"_getSourceAndStyle",value:function(){var e=Object(i.a)(n.a.mark((function e(t,r){var a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}throw new Error("invalid style!");case 2:return e.next=4,W(t,r);case 4:if("webp"!==(a=e.sent).spriteFormat){e.next=11;break}return e.next=8,D("lossy");case 8:if(e.t0=e.sent,e.t0){e.next=11;break}a.spriteFormat="png";case 11:this._set("currentStyleInfo",Object(s.a)({},a)),"string"==typeof t?(this.url=t,this.style=null):(this.url=null,this.style=t),this._set("sourceNameToSource",a.sourceNameToSource),this._set("primarySourceName",a.primarySourceName),this._set("styleRepository",new fe.a(a.style,a)),this.read(a.layerDefinition,{origin:"service"}),this.emit("load-style",{});case 12:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"_getDefaultAttribution",value:function(e){var t=e.match(/^https?:\/\/(?:basemaps|basemapsbeta|basemapsdev)(?:-api)?\.arcgis\.com(\/[^\/]+)?\/arcgis\/rest\/services\/([^\/]+(\/[^\/]+)*)\/vectortileserver/i);if(t){var r=t[2]&&t[2].toLowerCase();if(r)for(var a=t[1]||"",n=0,i=["OpenStreetMap_v2","OpenStreetMap_Daylight_v2","OpenStreetMap_Export_v2","OpenStreetMap_FTS_v2","OpenStreetMap_GCS_v2","World_Basemap","World_Basemap_v2","World_Basemap_Export_v2","World_Basemap_GCS_v2","World_Basemap_WGS84","World_Contours_v2"];n<i.length;n++){var s=i[n];if(s.toLowerCase().indexOf(r)>-1)return Object(O.C)("//static.arcgis.com/attribution/Vector".concat(a,"/").concat(s))}}}},{key:"_getPrimarySource",value:function(){return this.sourceNameToSource&&this.primarySourceName in this.sourceNameToSource?this.sourceNameToSource[this.primarySourceName]:null}},{key:"_loadStyle",value:function(){var e=Object(i.a)(n.a.mark((function e(t){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._loadingPromise?this._loadingPromise:this.loadStyle(null,t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(Object(T.a)(Object(P.a)(Object(I.a)(Object(R.a)(Object(E.a)(Object(U.a)(Object(m.a)(A.a))))))));Object(f.a)([Object(j.b)({readOnly:!0})],me.prototype,"attributionDataUrl",null),Object(f.a)([Object(j.b)({type:["show","hide"]})],me.prototype,"listMode",void 0),Object(f.a)([Object(j.b)({readOnly:!0,dependsOn:["sourceNameToSource","primarySourceName"],json:{read:!1}})],me.prototype,"capabilities",null),Object(f.a)([Object(j.b)({readOnly:!0})],me.prototype,"currentStyleInfo",void 0),Object(f.a)([Object(j.b)({json:{read:!1},readOnly:!0,type:x.a})],me.prototype,"fullExtent",null),Object(f.a)([Object(j.b)()],me.prototype,"style",void 0),Object(f.a)([Object(j.b)({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:function(){return{enabled:!1}}}}})],me.prototype,"isReference",void 0),Object(f.a)([Object(j.b)({type:["VectorTileLayer"]})],me.prototype,"operationalLayerType",void 0),Object(f.a)([Object(j.b)({readOnly:!0})],me.prototype,"parsedUrl",null),Object(f.a)([Object(j.b)({readOnly:!0})],me.prototype,"serviceUrl",null),Object(f.a)([Object(j.b)({type:M.a,readOnly:!0})],me.prototype,"spatialReference",null),Object(f.a)([Object(j.b)({readOnly:!0})],me.prototype,"styleRepository",void 0),Object(f.a)([Object(j.b)({readOnly:!0})],me.prototype,"sourceNameToSource",void 0),Object(f.a)([Object(j.b)({readOnly:!0})],me.prototype,"primarySourceName",void 0),Object(f.a)([Object(j.b)({type:String,readOnly:!0,json:{write:{ignoreOrigin:!0},origins:{"web-document":{write:{ignoreOrigin:!0,isRequired:!0}}}}})],me.prototype,"styleUrl",null),Object(f.a)([Object(k.a)(["portal-item","web-document"],"styleUrl")],me.prototype,"writeStyleUrl",null),Object(f.a)([Object(j.b)({json:{read:!1},readOnly:!0})],me.prototype,"tileIndexType",null),Object(f.a)([Object(j.b)({json:{read:!1},readOnly:!0})],me.prototype,"tileIndexUrl",null),Object(f.a)([Object(j.b)({json:{read:!1,origins:{service:{read:!1}}},readOnly:!0,type:N.a})],me.prototype,"tileInfo",null),Object(f.a)([Object(j.b)({json:{read:!1},readOnly:!0,type:C.a})],me.prototype,"tilemapCache",null),Object(f.a)([Object(j.b)({json:{read:!1},readOnly:!0})],me.prototype,"tileServers",null),Object(f.a)([Object(j.b)({json:{read:!1},readOnly:!0,value:"vector-tile"})],me.prototype,"type",void 0),Object(f.a)([Object(j.b)({json:{origins:{"web-document":{read:{source:"styleUrl"}},"portal-item":{read:{source:"url"}}},write:!1,read:!1}})],me.prototype,"url",void 0),Object(f.a)([Object(j.b)({readOnly:!0})],me.prototype,"version",void 0),Object(f.a)([Object(_.a)("version",["version","currentVersion"])],me.prototype,"readVersion",null),Object(f.a)([Object(j.b)({readOnly:!0})],me.prototype,"compatibleTileInfo256",null),Object(f.a)([Object(j.b)({readOnly:!0})],me.prototype,"compatibleTileInfo512",null),Object(f.a)([Object(j.b)({type:Boolean})],me.prototype,"symbolCollisionBoxesVisible",void 0);var ge=me=Object(f.a)([Object(S.a)("esri.layers.VectorTileLayer")],me)},665:function(e,t,r){"use strict";r.d(t,"a",(function(){return g}));var a,n=r(2),i=r(4),s=r(5),o=r(6),l=r(0),u=r(26),c=r(11),h=r(692),p=r(1),f=(r(19),r(14),r(15),r(57)),y=r(10),d=r(43),b=a=function(e){Object(s.a)(r,e);var t=Object(o.a)(r);function r(e){var a;return Object(n.a)(this,r),(a=t.call(this,e)).end=null,a.start=null,a}return Object(i.a)(r,[{key:"readEnd",value:function(e,t){return null!=t.end?new Date(t.end):null}},{key:"writeEnd",value:function(e,t){t.end=e?e.getTime():null}},{key:"isAllTime",get:function(){return this.equals(a.allTime)}},{key:"isEmpty",get:function(){return this.equals(a.empty)}},{key:"readStart",value:function(e,t){return null!=t.start?new Date(t.start):null}},{key:"writeStart",value:function(e,t){t.start=e?e.getTime():null}},{key:"clone",value:function(){return new a({end:this.end,start:this.start})}},{key:"equals",value:function(e){if(!e)return!1;var t=Object(c.j)(this.start)?this.start.getTime():this.start,r=Object(c.j)(this.end)?this.end.getTime():this.end,a=Object(c.j)(e.start)?e.start.getTime():e.start,n=Object(c.j)(e.end)?e.end.getTime():e.end;return t===a&&r===n}},{key:"expandTo",value:function(e){if(this.isEmpty||this.isAllTime)return this.clone();var t=Object(c.a)(this.start,(function(t){return Object(h.c)(t,e)})),r=Object(c.a)(this.end,(function(t){return Object(h.b)(Object(h.c)(t,e),1,e)}));return new a({start:t,end:r})}},{key:"intersection",value:function(e){if(!e)return this.clone();if(this.isEmpty||e.isEmpty)return a.empty;if(this.isAllTime)return e.clone();if(e.isAllTime)return this.clone();var t,r,n=Object(c.m)(this.start,-1/0,(function(e){return e.getTime()})),i=Object(c.m)(this.end,1/0,(function(e){return e.getTime()})),s=Object(c.m)(e.start,-1/0,(function(e){return e.getTime()})),o=Object(c.m)(e.end,1/0,(function(e){return e.getTime()}));if(s>=n&&s<=i?t=s:n>=s&&n<=o&&(t=n),i>=s&&i<=o?r=i:o>=n&&o<=i&&(r=o),!isNaN(t)&&!isNaN(r)){var l=new a;return l.start=t===-1/0?null:new Date(t),l.end=r===1/0?null:new Date(r),l}return a.empty}},{key:"offset",value:function(e,t){if(this.isEmpty||this.isAllTime)return this.clone();var r=new a,n=this.start,i=this.end;return Object(c.j)(n)&&(r.start=Object(h.b)(n,e,t)),Object(c.j)(i)&&(r.end=Object(h.b)(i,e,t)),r}},{key:"union",value:function(e){if(!e||e.isEmpty)return this.clone();if(this.isEmpty)return e.clone();if(this.isAllTime||e.isAllTime)return v.clone();var t=Object(c.j)(this.start)&&Object(c.j)(e.start)?new Date(Math.min(this.start.getTime(),e.start.getTime())):null,r=Object(c.j)(this.end)&&Object(c.j)(e.end)?new Date(Math.max(this.end.getTime(),e.end.getTime())):null;return new a({start:t,end:r})}}],[{key:"allTime",get:function(){return v}},{key:"empty",get:function(){return m}}]),r}(u.a);Object(l.a)([Object(p.b)({type:Date,json:{write:{allowNull:!0}}})],b.prototype,"end",void 0),Object(l.a)([Object(f.a)("end")],b.prototype,"readEnd",null),Object(l.a)([Object(d.a)("end")],b.prototype,"writeEnd",null),Object(l.a)([Object(p.b)({readOnly:!0,json:{read:!1}})],b.prototype,"isAllTime",null),Object(l.a)([Object(p.b)({readOnly:!0,json:{read:!1}})],b.prototype,"isEmpty",null),Object(l.a)([Object(p.b)({type:Date,json:{write:{allowNull:!0}}})],b.prototype,"start",void 0),Object(l.a)([Object(f.a)("start")],b.prototype,"readStart",null),Object(l.a)([Object(d.a)("start")],b.prototype,"writeStart",null);var v=new(b=a=Object(l.a)([Object(y.a)("esri.TimeExtent")],b)),m=new b({start:void 0,end:void 0}),g=b},677:function(e,t,r){"use strict";r.d(t,"a",(function(){return S})),r.d(t,"b",(function(){return k}));var a=r(21),n=r(2),i=r(4),s=r(5),o=r(6),l=r(0),u=r(60),c=r(8),h=r(11),p=r(23),f=r(18),y=r(164),d=function(){function e(){Object(n.a)(this,e),this._propertyOriginMap=new Map,this._originStores=new Array(y.a),this._values=new Map}return Object(i.a)(e,[{key:"clone",value:function(t){var r=this,a=new e,n=this._originStores[0];n&&n.forEach((function(e,t){a.set(t,Object(f.a)(e),0)}));for(var i=function(e){var n=r._originStores[e];n&&n.forEach((function(r,n){t&&t.has(n)||a.set(n,Object(f.a)(r),e)}))},s=2;s<y.a;s++)i(s);return a}},{key:"get",value:function(e,t){var r=void 0===t?this._values:this._originStores[t];return r?r.get(e):void 0}},{key:"keys",value:function(e){var t=null==e?this._values:this._originStores[e];return t?Object(p.a)(t.keys()):[]}},{key:"set",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:6,a=this._originStores[r];if(a||(a=new Map,this._originStores[r]=a),a.set(e,t),!this._values.has(e)||Object(h.c)(this._propertyOriginMap.get(e))<=r){var n=this._values.get(e);return this._values.set(e,t),this._propertyOriginMap.set(e,r),n!==t}return!1}},{key:"delete",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6,r=this._originStores[t];if(r){var a=r.get(e);if(r.delete(e),this._values.has(e)&&this._propertyOriginMap.get(e)===t){this._values.delete(e);for(var n=t-1;n>=0;n--){var i=this._originStores[n];if(i&&i.has(e)){this._values.set(e,i.get(e)),this._propertyOriginMap.set(e,n);break}}}return a}}},{key:"has",value:function(e,t){var r=void 0===t?this._values:this._originStores[t];return!!r&&r.has(e)}},{key:"revert",value:function(e,t){for(;t>0&&!this.has(e,t);)--t;var r=this._originStores[t],a=r&&r.get(e),n=this._values.get(e);return this._values.set(e,a),this._propertyOriginMap.set(e,t),n!==a}},{key:"originOf",value:function(e){return this._propertyOriginMap.get(e)||0}},{key:"forEach",value:function(e){this._values.forEach(e)}}]),e}(),b=r(336),v=r(69),m=r(10),g=function(e){var t=function(e){Object(s.a)(r,e);var t=Object(o.a)(r);function r(){var e;Object(n.a)(this,r);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];e=t.call.apply(t,[this].concat(i));var o=Object(h.c)(Object(v.a)(Object(c.a)(e))),l=o.metadatas,u=o.store,p=new d;return o.store=p,u.keys().forEach((function(e){p.set(e,u.get(e),0)})),Object.keys(l).forEach((function(e){o.internalGet(e)&&p.set(e,o.internalGet(e),0)})),e}return Object(i.a)(r,[{key:"read",value:function(e,t){Object(b.a)(this,e,t)}},{key:"getAtOrigin",value:function(e,t){var r=O(this),a=Object(y.d)(t);if("string"==typeof e)return r.get(e,a);var n={};return e.forEach((function(e){n[e]=r.get(e,a)})),n}},{key:"originOf",value:function(e){return Object(y.b)(this.originIdOf(e))}},{key:"originIdOf",value:function(e){return O(this).originOf(e)}},{key:"revert",value:function(e,t){var r=O(this),a=Object(y.d)(t),n=Object(v.a)(this);("string"==typeof e?"*"===e?r.keys(a):[e]:e).forEach((function(e){n.invalidate(e),r.revert(e,a),n.commit(e)}))}}]),r}(e);return t=Object(l.a)([Object(m.a)("esri.core.ReadOnlyMultiOriginJSONSupport")],t),t};function O(e){return Object(v.a)(e).store}var j=function(e){Object(s.a)(r,e);var t=Object(o.a)(r);function r(){return Object(n.a)(this,r),t.apply(this,arguments)}return r}(g(u.a));j=Object(l.a)([Object(m.a)("esri.core.ReadOnlyMultiOriginJSONSupport")],j);var w=r(335);function _(e){return Object(v.a)(e).store}var S=function(e){var t=function(e){Object(s.a)(r,e);var t=Object(o.a)(r);function r(){Object(n.a)(this,r);for(var e=arguments.length,a=new Array(e),i=0;i<e;i++)a[i]=arguments[i];return t.call.apply(t,[this].concat(a))}return r}(function(e){var t=function(e){Object(s.a)(r,e);var t=Object(o.a)(r);function r(){Object(n.a)(this,r);for(var e=arguments.length,a=new Array(e),i=0;i<e;i++)a[i]=arguments[i];return t.call.apply(t,[this].concat(a))}return Object(i.a)(r,[{key:"clear",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"user";return _(this).delete(e,Object(y.d)(t))}},{key:"write",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return Object(w.b)(this,e=e||{},t),e}},{key:"setAtOrigin",value:function(e,t,r){Object(v.a)(this).setAtOrigin(e,t,Object(y.d)(r))}},{key:"removeOrigin",value:function(e){var t,r=_(this),n=Object(y.d)(e),i=r.keys(n),s=Object(a.a)(i);try{for(s.s();!(t=s.n()).done;){var o=t.value;r.originOf(o)===n&&r.set(o,r.get(o,n),6)}}catch(l){s.e(l)}finally{s.f()}}},{key:"updateOrigin",value:function(e,t){for(var r=_(this),a=Object(y.d)(t),n=this.get(e),i=a+1;i<y.a;++i)r.delete(e,i);r.set(e,n,a)}},{key:"toJSON",value:function(e){return this.write({},e)}}]),r}(e);return(t=Object(l.a)([Object(m.a)("esri.core.WriteableMultiOriginJSONSupport")],t)).prototype.toJSON.isDefaultToJSON=!0,t}(g(e)));return t=Object(l.a)([Object(m.a)("esri.core.MultiOriginJSONSupport")],t)},k=function(e){Object(s.a)(r,e);var t=Object(o.a)(r);function r(){return Object(n.a)(this,r),t.apply(this,arguments)}return r}(S(u.a));k=Object(l.a)([Object(m.a)("esri.core.MultiOriginJSONSupport")],k)},682:function(e,t,r){"use strict";r.d(t,"a",(function(){return M}));var a=r(7),n=r.n(a),i=r(12),s=r(2),o=r(4),l=r(5),u=r(6),c=r(0),h=r(68),p=(r(114),r(82)),f=r(29),y=r(184),d=r(239),b=r(142),v=r(15),m=r(30),g=r(27),O=r(1),j=(r(19),r(14),r(10)),w=r(58),_=r(45),S=0,k=v.a.getLogger("esri.layers.Layer"),x=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(s.a)(this,a),(e=t.apply(this,arguments)).attributionDataUrl=null,e.fullExtent=new w.a(-180,-90,180,90,_.a.WGS84),e.id=Date.now().toString(16)+"-layer-"+S++,e.legendEnabled=!0,e.listMode="show",e.opacity=1,e.parent=null,e.popupEnabled=!0,e.attributionVisible=!0,e.spatialReference=_.a.WGS84,e.title=null,e.type=null,e.url=null,e.visible=!0,e}return Object(o.a)(a,[{key:"initialize",value:function(){var e=this;this.when().catch((function(t){var r,a;Object(m.m)(t)||v.a.getLogger(e.declaredClass).error("#load()","Failed to load layer (title: '".concat(null!=(r=e.title)?r:"no title","', id: '").concat(null!=(a=e.id)?a:"no id","')"),{error:t})}))}},{key:"destroy",value:function(){if(this.parent){var e=this,t=this.parent;"layers"in t&&t.layers.includes(e)?t.layers.remove(e):"tables"in t&&t.tables.includes(e)?t.tables.remove(e):"baseLayers"in t&&t.baseLayers.includes(e)?t.baseLayers.remove(e):"baseLayers"in t&&t.referenceLayers.includes(e)&&t.referenceLayers.remove(e)}}},{key:"hasAttributionData",get:function(){return null!=this.attributionDataUrl}},{key:"parsedUrl",get:function(){var e=this.url;return e?Object(g.J)(e):null}},{key:"fetchAttributionData",value:function(){var e=Object(i.a)(n.a.mark((function e(){var t;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.attributionDataUrl,!this.hasAttributionData||!t){e.next=5;break}return e.next=4,Object(p.default)(t,{query:{f:"json"},responseType:"json"});case 4:return e.abrupt("return",e.sent.data);case 5:throw new f.a("layer:no-attribution-data","Layer does not have attribution data");case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}],[{key:"fromArcGISServerUrl",value:function(){var e=Object(i.a)(n.a.mark((function e(t){var a,i;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="string"==typeof t?{url:t}:t,e.next=3,r.e(85).then(r.bind(null,783));case 3:return i=e.sent,e.prev=4,e.next=7,i.fromUrl(a);case 7:return e.abrupt("return",e.sent);case 10:throw e.prev=10,e.t0=e.catch(4),k.error("#fromArcGISServerUrl({ url: '"+a.url+"'})","Failed to create layer from arcgis server url",e.t0),e.t0;case 13:case"end":return e.stop()}}),e,null,[[4,10]])})));return function(t){return e.apply(this,arguments)}}()},{key:"fromPortalItem",value:function(){var e=Object(i.a)(n.a.mark((function e(t){var a,i,s,o,l;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="portalItem"in t?t:{portalItem:t},e.next=3,Promise.all([r.e(17),r.e(97)]).then(r.bind(null,774));case 3:return i=e.sent,e.prev=4,e.next=7,i.fromItem(a);case 7:return e.abrupt("return",e.sent);case 10:throw e.prev=10,e.t0=e.catch(4),s=a&&a.portalItem,o=s&&s.id||"unset",l=s&&s.portal&&s.portal.url||h.a.portalUrl,k.error("#fromPortalItem()","Failed to create layer from portal item (portal: '"+l+"', id: '"+o+"')",e.t0),e.t0;case 14:case"end":return e.stop()}}),e,null,[[4,10]])})));return function(t){return e.apply(this,arguments)}}()}]),a}(y.a.EventedMixin(Object(d.a)(b.a)));Object(c.a)([Object(O.b)({type:String})],x.prototype,"attributionDataUrl",void 0),Object(c.a)([Object(O.b)({type:w.a})],x.prototype,"fullExtent",void 0),Object(c.a)([Object(O.b)({readOnly:!0})],x.prototype,"hasAttributionData",null),Object(c.a)([Object(O.b)({type:String})],x.prototype,"id",void 0),Object(c.a)([Object(O.b)({type:Boolean,nonNullable:!0})],x.prototype,"legendEnabled",void 0),Object(c.a)([Object(O.b)({type:["show","hide","hide-children"]})],x.prototype,"listMode",void 0),Object(c.a)([Object(O.b)({type:Number,range:{min:0,max:1},nonNullable:!0})],x.prototype,"opacity",void 0),Object(c.a)([Object(O.b)()],x.prototype,"parent",void 0),Object(c.a)([Object(O.b)({readOnly:!0})],x.prototype,"parsedUrl",null),Object(c.a)([Object(O.b)({type:Boolean})],x.prototype,"popupEnabled",void 0),Object(c.a)([Object(O.b)({type:Boolean})],x.prototype,"attributionVisible",void 0),Object(c.a)([Object(O.b)({type:_.a})],x.prototype,"spatialReference",void 0),Object(c.a)([Object(O.b)({type:String})],x.prototype,"title",void 0),Object(c.a)([Object(O.b)({type:String,readOnly:!0,json:{read:!1}})],x.prototype,"type",void 0),Object(c.a)([Object(O.b)()],x.prototype,"url",void 0),Object(c.a)([Object(O.b)({type:Boolean,nonNullable:!0})],x.prototype,"visible",void 0);var M=x=Object(c.a)([Object(j.a)("esri.layers.Layer")],x)},692:function(e,t,r){"use strict";r.d(t,"a",(function(){return o})),r.d(t,"b",(function(){return i})),r.d(t,"c",(function(){return s}));r(19);var a={milliseconds:1,seconds:1e3,minutes:6e4,hours:36e5,days:864e5,weeks:6048e5,months:26784e5,years:31536e6,decades:31536e7,centuries:31536e8},n={milliseconds:{getter:"getMilliseconds",setter:"setMilliseconds",multiplier:1},seconds:{getter:"getSeconds",setter:"setSeconds",multiplier:1},minutes:{getter:"getMinutes",setter:"setMinutes",multiplier:1},hours:{getter:"getHours",setter:"setHours",multiplier:1},days:{getter:"getDate",setter:"setDate",multiplier:1},weeks:{getter:"getDate",setter:"setDate",multiplier:7},months:{getter:"getMonth",setter:"setMonth",multiplier:1},years:{getter:"getFullYear",setter:"setFullYear",multiplier:1},decades:{getter:"getFullYear",setter:"setFullYear",multiplier:10},centuries:{getter:"getFullYear",setter:"setFullYear",multiplier:100}};function i(e,t,r){var a=new Date(e.getTime());if(t&&r){var i=n[r],s=i.getter,o=i.setter,l=i.multiplier;a[o](a[s]()+t*l)}return a}function s(e,t){switch(t){case"milliseconds":return new Date(e.getTime());case"seconds":return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds());case"minutes":return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes());case"hours":return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours());case"days":return new Date(e.getFullYear(),e.getMonth(),e.getDate());case"weeks":return new Date(e.getFullYear(),e.getMonth(),e.getDate()-e.getDay());case"months":return new Date(e.getFullYear(),e.getMonth(),1);case"years":return new Date(e.getFullYear(),0,1);case"decades":return new Date(e.getFullYear()-e.getFullYear()%10,0,1);case"centuries":return new Date(e.getFullYear()-e.getFullYear()%100,0,1);default:return new Date}}function o(e,t,r){return 0===e?0:e*a[t]/a[r]}},699:function(e,t,r){"use strict";r.d(t,"a",(function(){return R}));var a=r(13),n=r(7),i=r.n(n),s=r(12),o=r(2),l=r(4),u=r(77),c=r(65),h=r(5),p=r(6),f=r(0),y=r(83),d=r(82),b=r(295),v=r(29),m=r(15),g=r(11),O=r(30),j=r(27),w=r(1),_=(r(19),r(14),r(57)),S=r(10),k=r(43),x=r(85),M=r(334),A=r(338),I=m.a.getLogger("esri.layers.mixins.PortalLayer"),R=function(e){var t=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(){var e;return Object(o.a)(this,n),(e=t.apply(this,arguments)).resourceReferences={portalItem:null,paths:[]},e.userHasEditingPrivileges=!0,e}return Object(l.a)(n,[{key:"destroy",value:function(){var e;null==(e=this.portalItem)||e.destroy(),this.portalItem=null}},{key:"portalItem",set:function(e){e!==this._get("portalItem")&&(this.removeOrigin("portal-item"),this._set("portalItem",e))}},{key:"readPortalItem",value:function(e,t,r){if(t.itemId)return new M.default({id:t.itemId,portal:r&&r.portal})}},{key:"writePortalItem",value:function(e,t){e&&e.id&&(t.itemId=e.id)}},{key:"loadFromPortal",value:function(){var e=Object(s.a)(i.a.mark((function e(t,a){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.portalItem||!this.portalItem.id){e.next=14;break}return e.prev=1,e.next=4,r.e(17).then(r.bind(null,781));case 4:return n=e.sent,Object(O.v)(a),e.next=8,n.load({instance:this,supportedTypes:t.supportedTypes,validateItem:t.validateItem,supportsData:t.supportsData},a);case 8:return e.abrupt("return",e.sent);case 11:throw e.prev=11,e.t0=e.catch(1),Object(O.m)(e.t0)||I.warn("Failed to load layer (".concat(this.title,", ").concat(this.id,") portal item (").concat(this.portalItem.id,")\n  ").concat(e.t0)),e.t0;case 14:case"end":return e.stop()}}),e,this,[[1,11]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"finishLoadEditablePortalLayer",value:function(){var e=Object(s.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=this,e.next=3,this.fetchUserHasEditingPrivileges(t).catch((function(e){return Object(O.u)(e),!0}));case 3:e.t1=e.sent,e.t0._set.call(e.t0,"userHasEditingPrivileges",e.t1);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchUserHasEditingPrivileges",value:function(){var e=Object(s.a)(i.a.mark((function e(t){var r,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.url?null==y.b?void 0:y.b.findCredential(this.url):null){e.next=3;break}return e.abrupt("return",!0);case 3:if(T.credential!==r){e.next=7;break}e.t0=T.user,e.next=10;break;case 7:return e.next=9,this.fetchEditingUser(t);case 9:e.t0=e.sent;case 10:return a=e.t0,e.abrupt("return",(T.credential=r,T.user=a,Object(g.i)(a)||null==a.privileges||a.privileges.includes("features:user:edit")));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchEditingUser",value:function(){var e=Object(s.a)(i.a.mark((function e(t){var r,a,n,s,o,l,u,c,h;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=null==(r=this.portalItem)||null==(a=r.portal)?void 0:a.user)){e.next=3;break}return e.abrupt("return",n);case 3:if(null!=(s=y.b.findServerInfo(this.url))&&s.owningSystemUrl){e.next=6;break}return e.abrupt("return",null);case 6:if(o="".concat(s.owningSystemUrl,"/sharing/rest"),!(l=x.a.getDefault())||!l.loaded||Object(j.C)(l.restUrl)!==Object(j.C)(o)){e.next=9;break}return e.abrupt("return",l.user);case 9:return u="".concat(o,"/community/self"),c=Object(g.j)(t)?t.signal:null,e.next=13,Object(b.c)(Object(d.default)(u,{authMode:"no-prompt",query:{f:"json"},signal:c}));case 13:return h=e.sent,e.abrupt("return",h.ok?A.default.fromJSON(h.value.data):null);case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"read",value:function(e,t){t&&(t.layer=this),Object(u.a)(Object(c.a)(n.prototype),"read",this).call(this,e,t)}},{key:"write",value:function(e,t){var r=t&&t.portal,i=this.portalItem&&this.portalItem.id&&(this.portalItem.portal||x.a.getDefault());return r&&i&&!Object(j.r)(i.restUrl,r.restUrl)?(t.messages&&t.messages.push(new v.a("layer:cross-portal","The layer '".concat(this.title," (").concat(this.id,")' cannot be persisted because it refers to an item on a different portal than the one being saved to. To save the scene, set the layer.portalItem to null or save the scene to the same portal as the item associated with the layer"),{layer:this})),null):Object(u.a)(Object(c.a)(n.prototype),"write",this).call(this,e,Object(a.a)(Object(a.a)({},t),{},{layer:this}))}}]),n}(e);return Object(f.a)([Object(w.b)({type:M.default})],t.prototype,"portalItem",null),Object(f.a)([Object(_.a)("web-document","portalItem",["itemId"])],t.prototype,"readPortalItem",null),Object(f.a)([Object(k.a)("web-document","portalItem",{itemId:{type:String}})],t.prototype,"writePortalItem",null),Object(f.a)([Object(w.b)()],t.prototype,"resourceReferences",void 0),Object(f.a)([Object(w.b)({readOnly:!0})],t.prototype,"userHasEditingPrivileges",void 0),t=Object(f.a)([Object(S.a)("esri.layers.mixins.PortalLayer")],t),t},T={credential:null,user:null}},708:function(e,t,r){"use strict";r.d(t,"a",(function(){return l})),r.d(t,"b",(function(){return u}));var a=r(22),n=r(21),i=r(2),s=r(4),o=r(297),l=function(){function e(t,r,a){Object(i.a)(this,e),this._namespace=t,this._storage=r,this._removeFunc=!1,this._hit=0,this._miss=0,this._storage.register(this),this._namespace+=":",a&&(this._storage.registerRemoveFunc(this._namespace,a),this._removeFunc=!0)}return Object(s.a)(e,[{key:"destroy",value:function(){this._storage.clear(this._namespace),this._removeFunc&&this._storage.deregisterRemoveFunc(this._namespace),this._storage.deregister(this),this._storage=null}},{key:"namespace",get:function(){return this._namespace.slice(0,-1)}},{key:"hitRate",get:function(){return this._hit/(this._hit+this._miss)}},{key:"size",get:function(){return this._storage.size}},{key:"maxSize",get:function(){return this._storage.maxSize}},{key:"resetHitRate",value:function(){this._hit=this._miss=0}},{key:"put",value:function(e,t,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this._storage.put(this._namespace+e,t,r,a)}},{key:"get",value:function(e){var t=this._storage.get(this._namespace+e);return void 0===t?++this._miss:++this._hit,t}},{key:"pop",value:function(e){var t=this._storage.pop(this._namespace+e);return void 0===t?++this._miss:++this._hit,t}},{key:"updateSize",value:function(e,t,r){this._storage.updateSize(this._namespace+e,t,r)}},{key:"clear",value:function(){this._storage.clear(this._namespace)}},{key:"clearAll",value:function(){this._storage.clearAll()}},{key:"getStats",value:function(){return this._storage.getStats()}},{key:"resetStats",value:function(){this._storage.resetStats()}}]),e}(),u=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10485760;Object(i.a)(this,e),this._maxSize=t,this._db=new Map,this._size=0,this._hit=0,this._miss=0,this._removeFuncs=new o.a,this._users=new o.a}return Object(s.a)(e,[{key:"destroy",value:function(){this.clearAll(),this._removeFuncs.clear(),this._users.clear(),this._db=null}},{key:"register",value:function(e){this._users.push(e)}},{key:"deregister",value:function(e){this._users.removeUnordered(e)}},{key:"registerRemoveFunc",value:function(e,t){this._removeFuncs.push([e,t])}},{key:"deregisterRemoveFunc",value:function(e){this._removeFuncs.filterInPlace((function(t){return t[0]!==e}))}},{key:"size",get:function(){return this._size}},{key:"maxSize",get:function(){return this._maxSize},set:function(e){this._maxSize=Math.max(e,0),this._checkSizeLimit()}},{key:"put",value:function(e,t,r,a){var n=this._db.get(e);if(n&&(this._size-=n.size,this._db.delete(e),n.entry!==t&&this._notifyRemoved(e,n.entry)),r>this._maxSize)this._notifyRemoved(e,t);else if(void 0!==t)if(!r||r<0)console.warn("Refusing to cache entry with invalid size "+r);else{var i=1+Math.max(a,-3)- -3;this._db.set(e,{entry:t,size:r,lifetime:i,lives:i}),this._size+=r,this._checkSizeLimit()}else console.warn("Refusing to cache undefined entry ")}},{key:"updateSize",value:function(e,t,r){var a=this._db.get(e);if(a&&a.entry===t){if(this._size-=a.size,r>this._maxSize)return this._db.delete(e),void this._notifyRemoved(e,t);a.size=r,this._size+=r,this._checkSizeLimit()}}},{key:"pop",value:function(e){var t=this._db.get(e);if(t)return this._size-=t.size,this._db.delete(e),++this._hit,t.entry;++this._miss}},{key:"get",value:function(e){var t=this._db.get(e);if(void 0!==t)return this._db.delete(e),t.lives=t.lifetime,this._db.set(e,t),++this._hit,t.entry;++this._miss}},{key:"getStats",value:function(){var e=this,t={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},r={},a=new Array;this._db.forEach((function(t,n){var i=t.lifetime;a[i]=(a[i]||0)+t.size,e._users.forAll((function(e){var a=e.namespace;if(n.startsWith(a)){var i=r[a]||0;r[a]=i+t.size}}))}));var n={};this._users.forAll((function(e){var t=e.namespace;if(!isNaN(e.hitRate)&&e.hitRate>0){var a=r[t]||0;r[t]=a,n[t]=Math.round(100*e.hitRate)+"%"}else n[t]="0%"}));var i=Object.keys(r);i.forEach((function(t){return r[t]=r[t]/e._size*100})),i.sort((function(e,t){return r[t]-r[e]})),i.forEach((function(e){return t[e]=Math.round(r[e])+"% / "+n[e]}));for(var s=a.length-1;s>=0;--s){var o=a[s];o&&(t["Priority "+(s+-3-1)]=Math.round(o/this.size*100)+"%")}return t}},{key:"resetStats",value:function(){this._hit=this._miss=0,this._users.forAll((function(e){return e.resetHitRate()}))}},{key:"clear",value:function(e){var t=this;this._db.forEach((function(r,a){a.startsWith(e)&&(t._size-=r.size,t._db.delete(a),t._notifyRemoved(a,r.entry))}))}},{key:"clearAll",value:function(){var e=this;this._db.forEach((function(t,r){return e._notifyRemoved(r,t.entry)})),this._size=0,this._db.clear()}},{key:"_getHitRate",value:function(){return this._hit/(this._hit+this._miss)}},{key:"_notifyRemoved",value:function(e,t){this._removeFuncs.forAll((function(r){e.startsWith(r[0])&&r[1](t)}))}},{key:"_checkSizeLimit",value:function(){if(!(this._size<=this._maxSize)){var e,t=Object(n.a)(this._db);try{for(t.s();!(e=t.n()).done;){var r=Object(a.a)(e.value,2),i=r[0],s=r[1];if(this._db.delete(i),s.lives<=1?(this._size-=s.size,this._notifyRemoved(i,s.entry)):(--s.lives,this._db.set(i,s)),this._size<=.9*this.maxSize)return}}catch(o){t.e(o)}finally{t.f()}}}}]),e}()},738:function(e,t,r){"use strict";r.d(t,"a",(function(){return l})),r.d(t,"b",(function(){return u})),r.d(t,"c",(function(){return f})),r.d(t,"d",(function(){return i})),r.d(t,"e",(function(){return p})),r.d(t,"f",(function(){return g})),r.d(t,"g",(function(){return m})),r.d(t,"h",(function(){return o})),r.d(t,"i",(function(){return c})),r.d(t,"j",(function(){return y})),r.d(t,"k",(function(){return O})),r.d(t,"l",(function(){return s})),r.d(t,"m",(function(){return h}));var a=r(211),n=r(93);function i(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function s(e,t,r,a,n,i,s,o,l,u,c,h,p,f,y,d,b){return e[0]=t,e[1]=r,e[2]=a,e[3]=n,e[4]=i,e[5]=s,e[6]=o,e[7]=l,e[8]=u,e[9]=c,e[10]=h,e[11]=p,e[12]=f,e[13]=y,e[14]=d,e[15]=b,e}function o(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function l(e,t){if(e===t){var r=t[1],a=t[2],n=t[3],i=t[6],s=t[7],o=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=r,e[6]=t[9],e[7]=t[13],e[8]=a,e[9]=i,e[11]=t[14],e[12]=n,e[13]=s,e[14]=o}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}function u(e,t){var r=t[0],a=t[1],n=t[2],i=t[3],s=t[4],o=t[5],l=t[6],u=t[7],c=t[8],h=t[9],p=t[10],f=t[11],y=t[12],d=t[13],b=t[14],v=t[15],m=r*o-a*s,g=r*l-n*s,O=r*u-i*s,j=a*l-n*o,w=a*u-i*o,_=n*u-i*l,S=c*d-h*y,k=c*b-p*y,x=c*v-f*y,M=h*b-p*d,A=h*v-f*d,I=p*v-f*b,R=m*I-g*A+O*M+j*x-w*k+_*S;return R?(R=1/R,e[0]=(o*I-l*A+u*M)*R,e[1]=(n*A-a*I-i*M)*R,e[2]=(d*_-b*w+v*j)*R,e[3]=(p*w-h*_-f*j)*R,e[4]=(l*x-s*I-u*k)*R,e[5]=(r*I-n*x+i*k)*R,e[6]=(b*O-y*_-v*g)*R,e[7]=(c*_-p*O+f*g)*R,e[8]=(s*A-o*x+u*S)*R,e[9]=(a*x-r*A-i*S)*R,e[10]=(y*w-d*O+v*m)*R,e[11]=(h*O-c*w-f*m)*R,e[12]=(o*k-s*M-l*S)*R,e[13]=(r*M-a*k+n*S)*R,e[14]=(d*g-y*j-b*m)*R,e[15]=(c*j-h*g+p*m)*R,e):null}function c(e,t,r){var a=t[0],n=t[1],i=t[2],s=t[3],o=t[4],l=t[5],u=t[6],c=t[7],h=t[8],p=t[9],f=t[10],y=t[11],d=t[12],b=t[13],v=t[14],m=t[15],g=r[0],O=r[1],j=r[2],w=r[3];return e[0]=g*a+O*o+j*h+w*d,e[1]=g*n+O*l+j*p+w*b,e[2]=g*i+O*u+j*f+w*v,e[3]=g*s+O*c+j*y+w*m,g=r[4],O=r[5],j=r[6],w=r[7],e[4]=g*a+O*o+j*h+w*d,e[5]=g*n+O*l+j*p+w*b,e[6]=g*i+O*u+j*f+w*v,e[7]=g*s+O*c+j*y+w*m,g=r[8],O=r[9],j=r[10],w=r[11],e[8]=g*a+O*o+j*h+w*d,e[9]=g*n+O*l+j*p+w*b,e[10]=g*i+O*u+j*f+w*v,e[11]=g*s+O*c+j*y+w*m,g=r[12],O=r[13],j=r[14],w=r[15],e[12]=g*a+O*o+j*h+w*d,e[13]=g*n+O*l+j*p+w*b,e[14]=g*i+O*u+j*f+w*v,e[15]=g*s+O*c+j*y+w*m,e}function h(e,t,r){var a,n,i,s,o,l,u,c,h,p,f,y,d=r[0],b=r[1],v=r[2];return t===e?(e[12]=t[0]*d+t[4]*b+t[8]*v+t[12],e[13]=t[1]*d+t[5]*b+t[9]*v+t[13],e[14]=t[2]*d+t[6]*b+t[10]*v+t[14],e[15]=t[3]*d+t[7]*b+t[11]*v+t[15]):(a=t[0],n=t[1],i=t[2],s=t[3],o=t[4],l=t[5],u=t[6],c=t[7],h=t[8],p=t[9],f=t[10],y=t[11],e[0]=a,e[1]=n,e[2]=i,e[3]=s,e[4]=o,e[5]=l,e[6]=u,e[7]=c,e[8]=h,e[9]=p,e[10]=f,e[11]=y,e[12]=a*d+o*b+h*v+t[12],e[13]=n*d+l*b+p*v+t[13],e[14]=i*d+u*b+f*v+t[14],e[15]=s*d+c*b+y*v+t[15]),e}function p(e,t,r){var a=r[0],n=r[1],i=r[2];return e[0]=t[0]*a,e[1]=t[1]*a,e[2]=t[2]*a,e[3]=t[3]*a,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e[8]=t[8]*i,e[9]=t[9]*i,e[10]=t[10]*i,e[11]=t[11]*i,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function f(e,t,r,a){var i,s,o,l,u,c,h,p,f,y,d,b,v,m,g,O,j,w,_,S,k,x,M,A,I=a[0],R=a[1],T=a[2],E=Math.sqrt(I*I+R*R+T*T);return E<n.a?null:(I*=E=1/E,R*=E,T*=E,i=Math.sin(r),o=1-(s=Math.cos(r)),l=t[0],u=t[1],c=t[2],h=t[3],p=t[4],f=t[5],y=t[6],d=t[7],b=t[8],v=t[9],m=t[10],g=t[11],O=I*I*o+s,j=R*I*o+T*i,w=T*I*o-R*i,_=I*R*o-T*i,S=R*R*o+s,k=T*R*o+I*i,x=I*T*o+R*i,M=R*T*o-I*i,A=T*T*o+s,e[0]=l*O+p*j+b*w,e[1]=u*O+f*j+v*w,e[2]=c*O+y*j+m*w,e[3]=h*O+d*j+g*w,e[4]=l*_+p*S+b*k,e[5]=u*_+f*S+v*k,e[6]=c*_+y*S+m*k,e[7]=h*_+d*S+g*k,e[8]=l*x+p*M+b*A,e[9]=u*x+f*M+v*A,e[10]=c*x+y*M+m*A,e[11]=h*x+d*M+g*A,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)}function y(e,t){var r=Math.sin(t),a=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=a,e[6]=r,e[7]=0,e[8]=0,e[9]=-r,e[10]=a,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function d(e,t,r){var a=t[0],n=t[1],i=t[2],s=t[3],o=a+a,l=n+n,u=i+i,c=a*o,h=a*l,p=a*u,f=n*l,y=n*u,d=i*u,b=s*o,v=s*l,m=s*u;return e[0]=1-(f+d),e[1]=h+m,e[2]=p-v,e[3]=0,e[4]=h-m,e[5]=1-(c+d),e[6]=y+b,e[7]=0,e[8]=p+v,e[9]=y-b,e[10]=1-(c+f),e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e}var b=Object(a.e)();function v(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e[4]=t[4]-r[4],e[5]=t[5]-r[5],e[6]=t[6]-r[6],e[7]=t[7]-r[7],e[8]=t[8]-r[8],e[9]=t[9]-r[9],e[10]=t[10]-r[10],e[11]=t[11]-r[11],e[12]=t[12]-r[12],e[13]=t[13]-r[13],e[14]=t[14]-r[14],e[15]=t[15]-r[15],e}function m(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]}function g(e,t){var r=e[0],a=e[1],i=e[2],s=e[3],o=e[4],l=e[5],u=e[6],c=e[7],h=e[8],p=e[9],f=e[10],y=e[11],d=e[12],b=e[13],v=e[14],m=e[15],g=t[0],O=t[1],j=t[2],w=t[3],_=t[4],S=t[5],k=t[6],x=t[7],M=t[8],A=t[9],I=t[10],R=t[11],T=t[12],E=t[13],U=t[14],P=t[15];return Math.abs(r-g)<=n.a*Math.max(1,Math.abs(r),Math.abs(g))&&Math.abs(a-O)<=n.a*Math.max(1,Math.abs(a),Math.abs(O))&&Math.abs(i-j)<=n.a*Math.max(1,Math.abs(i),Math.abs(j))&&Math.abs(s-w)<=n.a*Math.max(1,Math.abs(s),Math.abs(w))&&Math.abs(o-_)<=n.a*Math.max(1,Math.abs(o),Math.abs(_))&&Math.abs(l-S)<=n.a*Math.max(1,Math.abs(l),Math.abs(S))&&Math.abs(u-k)<=n.a*Math.max(1,Math.abs(u),Math.abs(k))&&Math.abs(c-x)<=n.a*Math.max(1,Math.abs(c),Math.abs(x))&&Math.abs(h-M)<=n.a*Math.max(1,Math.abs(h),Math.abs(M))&&Math.abs(p-A)<=n.a*Math.max(1,Math.abs(p),Math.abs(A))&&Math.abs(f-I)<=n.a*Math.max(1,Math.abs(f),Math.abs(I))&&Math.abs(y-R)<=n.a*Math.max(1,Math.abs(y),Math.abs(R))&&Math.abs(d-T)<=n.a*Math.max(1,Math.abs(d),Math.abs(T))&&Math.abs(b-E)<=n.a*Math.max(1,Math.abs(b),Math.abs(E))&&Math.abs(v-U)<=n.a*Math.max(1,Math.abs(v),Math.abs(U))&&Math.abs(m-P)<=n.a*Math.max(1,Math.abs(m),Math.abs(P))}function O(e){var t=n.a,r=e[0],a=e[1],i=e[2],s=e[4],o=e[5],l=e[6],u=e[8],c=e[9],h=e[10];return Math.abs(1-(r*r+s*s+u*u))<=t&&Math.abs(1-(a*a+o*o+c*c))<=t&&Math.abs(1-(i*i+l*l+h*h))<=t}var j=c,w=v;Object.freeze({__proto__:null,copy:i,set:s,identity:o,transpose:l,invert:u,adjoint:function(e,t){var r=t[0],a=t[1],n=t[2],i=t[3],s=t[4],o=t[5],l=t[6],u=t[7],c=t[8],h=t[9],p=t[10],f=t[11],y=t[12],d=t[13],b=t[14],v=t[15];return e[0]=o*(p*v-f*b)-h*(l*v-u*b)+d*(l*f-u*p),e[1]=-(a*(p*v-f*b)-h*(n*v-i*b)+d*(n*f-i*p)),e[2]=a*(l*v-u*b)-o*(n*v-i*b)+d*(n*u-i*l),e[3]=-(a*(l*f-u*p)-o*(n*f-i*p)+h*(n*u-i*l)),e[4]=-(s*(p*v-f*b)-c*(l*v-u*b)+y*(l*f-u*p)),e[5]=r*(p*v-f*b)-c*(n*v-i*b)+y*(n*f-i*p),e[6]=-(r*(l*v-u*b)-s*(n*v-i*b)+y*(n*u-i*l)),e[7]=r*(l*f-u*p)-s*(n*f-i*p)+c*(n*u-i*l),e[8]=s*(h*v-f*d)-c*(o*v-u*d)+y*(o*f-u*h),e[9]=-(r*(h*v-f*d)-c*(a*v-i*d)+y*(a*f-i*h)),e[10]=r*(o*v-u*d)-s*(a*v-i*d)+y*(a*u-i*o),e[11]=-(r*(o*f-u*h)-s*(a*f-i*h)+c*(a*u-i*o)),e[12]=-(s*(h*b-p*d)-c*(o*b-l*d)+y*(o*p-l*h)),e[13]=r*(h*b-p*d)-c*(a*b-n*d)+y*(a*p-n*h),e[14]=-(r*(o*b-l*d)-s*(a*b-n*d)+y*(a*l-n*o)),e[15]=r*(o*p-l*h)-s*(a*p-n*h)+c*(a*l-n*o),e},determinant:function(e){var t=e[0],r=e[1],a=e[2],n=e[3],i=e[4],s=e[5],o=e[6],l=e[7],u=e[8],c=e[9],h=e[10],p=e[11],f=e[12],y=e[13],d=e[14],b=e[15];return(t*s-r*i)*(h*b-p*d)-(t*o-a*i)*(c*b-p*y)+(t*l-n*i)*(c*d-h*y)+(r*o-a*s)*(u*b-p*f)-(r*l-n*s)*(u*d-h*f)+(a*l-n*o)*(u*y-c*f)},multiply:c,translate:h,scale:p,rotate:f,rotateX:function(e,t,r){var a=Math.sin(r),n=Math.cos(r),i=t[4],s=t[5],o=t[6],l=t[7],u=t[8],c=t[9],h=t[10],p=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=i*n+u*a,e[5]=s*n+c*a,e[6]=o*n+h*a,e[7]=l*n+p*a,e[8]=u*n-i*a,e[9]=c*n-s*a,e[10]=h*n-o*a,e[11]=p*n-l*a,e},rotateY:function(e,t,r){var a=Math.sin(r),n=Math.cos(r),i=t[0],s=t[1],o=t[2],l=t[3],u=t[8],c=t[9],h=t[10],p=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=i*n-u*a,e[1]=s*n-c*a,e[2]=o*n-h*a,e[3]=l*n-p*a,e[8]=i*a+u*n,e[9]=s*a+c*n,e[10]=o*a+h*n,e[11]=l*a+p*n,e},rotateZ:function(e,t,r){var a=Math.sin(r),n=Math.cos(r),i=t[0],s=t[1],o=t[2],l=t[3],u=t[4],c=t[5],h=t[6],p=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=i*n+u*a,e[1]=s*n+c*a,e[2]=o*n+h*a,e[3]=l*n+p*a,e[4]=u*n-i*a,e[5]=c*n-s*a,e[6]=h*n-o*a,e[7]=p*n-l*a,e},fromTranslation:function(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e},fromScaling:function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},fromRotation:function(e,t,r){var a,i,s,o=r[0],l=r[1],u=r[2],c=Math.sqrt(o*o+l*l+u*u);return c<n.a?null:(o*=c=1/c,l*=c,u*=c,a=Math.sin(t),s=1-(i=Math.cos(t)),e[0]=o*o*s+i,e[1]=l*o*s+u*a,e[2]=u*o*s-l*a,e[3]=0,e[4]=o*l*s-u*a,e[5]=l*l*s+i,e[6]=u*l*s+o*a,e[7]=0,e[8]=o*u*s+l*a,e[9]=l*u*s-o*a,e[10]=u*u*s+i,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)},fromXRotation:y,fromYRotation:function(e,t){var r=Math.sin(t),a=Math.cos(t);return e[0]=a,e[1]=0,e[2]=-r,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=r,e[9]=0,e[10]=a,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},fromZRotation:function(e,t){var r=Math.sin(t),a=Math.cos(t);return e[0]=a,e[1]=r,e[2]=0,e[3]=0,e[4]=-r,e[5]=a,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},fromRotationTranslation:d,fromQuat2:function(e,t){var r=b,a=-t[0],n=-t[1],i=-t[2],s=t[3],o=t[4],l=t[5],u=t[6],c=t[7],h=a*a+n*n+i*i+s*s;return h>0?(r[0]=2*(o*s+c*a+l*i-u*n)/h,r[1]=2*(l*s+c*n+u*a-o*i)/h,r[2]=2*(u*s+c*i+o*n-l*a)/h):(r[0]=2*(o*s+c*a+l*i-u*n),r[1]=2*(l*s+c*n+u*a-o*i),r[2]=2*(u*s+c*i+o*n-l*a)),d(e,t,r),e},getTranslation:function(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e},getScaling:function(e,t){var r=t[0],a=t[1],n=t[2],i=t[4],s=t[5],o=t[6],l=t[8],u=t[9],c=t[10];return e[0]=Math.sqrt(r*r+a*a+n*n),e[1]=Math.sqrt(i*i+s*s+o*o),e[2]=Math.sqrt(l*l+u*u+c*c),e},getRotation:function(e,t){var r=t[0]+t[5]+t[10],a=0;return r>0?(a=2*Math.sqrt(r+1),e[3]=.25*a,e[0]=(t[6]-t[9])/a,e[1]=(t[8]-t[2])/a,e[2]=(t[1]-t[4])/a):t[0]>t[5]&&t[0]>t[10]?(a=2*Math.sqrt(1+t[0]-t[5]-t[10]),e[3]=(t[6]-t[9])/a,e[0]=.25*a,e[1]=(t[1]+t[4])/a,e[2]=(t[8]+t[2])/a):t[5]>t[10]?(a=2*Math.sqrt(1+t[5]-t[0]-t[10]),e[3]=(t[8]-t[2])/a,e[0]=(t[1]+t[4])/a,e[1]=.25*a,e[2]=(t[6]+t[9])/a):(a=2*Math.sqrt(1+t[10]-t[0]-t[5]),e[3]=(t[1]-t[4])/a,e[0]=(t[8]+t[2])/a,e[1]=(t[6]+t[9])/a,e[2]=.25*a),e},fromRotationTranslationScale:function(e,t,r,a){var n=t[0],i=t[1],s=t[2],o=t[3],l=n+n,u=i+i,c=s+s,h=n*l,p=n*u,f=n*c,y=i*u,d=i*c,b=s*c,v=o*l,m=o*u,g=o*c,O=a[0],j=a[1],w=a[2];return e[0]=(1-(y+b))*O,e[1]=(p+g)*O,e[2]=(f-m)*O,e[3]=0,e[4]=(p-g)*j,e[5]=(1-(h+b))*j,e[6]=(d+v)*j,e[7]=0,e[8]=(f+m)*w,e[9]=(d-v)*w,e[10]=(1-(h+y))*w,e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e},fromRotationTranslationScaleOrigin:function(e,t,r,a,n){var i=t[0],s=t[1],o=t[2],l=t[3],u=i+i,c=s+s,h=o+o,p=i*u,f=i*c,y=i*h,d=s*c,b=s*h,v=o*h,m=l*u,g=l*c,O=l*h,j=a[0],w=a[1],_=a[2],S=n[0],k=n[1],x=n[2],M=(1-(d+v))*j,A=(f+O)*j,I=(y-g)*j,R=(f-O)*w,T=(1-(p+v))*w,E=(b+m)*w,U=(y+g)*_,P=(b-m)*_,D=(1-(p+d))*_;return e[0]=M,e[1]=A,e[2]=I,e[3]=0,e[4]=R,e[5]=T,e[6]=E,e[7]=0,e[8]=U,e[9]=P,e[10]=D,e[11]=0,e[12]=r[0]+S-(M*S+R*k+U*x),e[13]=r[1]+k-(A*S+T*k+P*x),e[14]=r[2]+x-(I*S+E*k+D*x),e[15]=1,e},fromQuat:function(e,t){var r=t[0],a=t[1],n=t[2],i=t[3],s=r+r,o=a+a,l=n+n,u=r*s,c=a*s,h=a*o,p=n*s,f=n*o,y=n*l,d=i*s,b=i*o,v=i*l;return e[0]=1-h-y,e[1]=c+v,e[2]=p-b,e[3]=0,e[4]=c-v,e[5]=1-u-y,e[6]=f+d,e[7]=0,e[8]=p+b,e[9]=f-d,e[10]=1-u-h,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},frustum:function(e,t,r,a,n,i,s){var o=1/(r-t),l=1/(n-a),u=1/(i-s);return e[0]=2*i*o,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*i*l,e[6]=0,e[7]=0,e[8]=(r+t)*o,e[9]=(n+a)*l,e[10]=(s+i)*u,e[11]=-1,e[12]=0,e[13]=0,e[14]=s*i*2*u,e[15]=0,e},perspective:function(e,t,r,a,n){var i,s=1/Math.tan(t/2);return e[0]=s/r,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=s,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=n&&n!==1/0?(i=1/(a-n),e[10]=(n+a)*i,e[14]=2*n*a*i):(e[10]=-1,e[14]=-2*a),e},perspectiveFromFieldOfView:function(e,t,r,a){var n=Math.tan(t.upDegrees*Math.PI/180),i=Math.tan(t.downDegrees*Math.PI/180),s=Math.tan(t.leftDegrees*Math.PI/180),o=Math.tan(t.rightDegrees*Math.PI/180),l=2/(s+o),u=2/(n+i);return e[0]=l,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=u,e[6]=0,e[7]=0,e[8]=-(s-o)*l*.5,e[9]=(n-i)*u*.5,e[10]=a/(r-a),e[11]=-1,e[12]=0,e[13]=0,e[14]=a*r/(r-a),e[15]=0,e},ortho:function(e,t,r,a,n,i,s){var o=1/(t-r),l=1/(a-n),u=1/(i-s);return e[0]=-2*o,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*u,e[11]=0,e[12]=(t+r)*o,e[13]=(n+a)*l,e[14]=(s+i)*u,e[15]=1,e},lookAt:function(e,t,r,a){var i,s,l,u,c,h,p,f,y,d,b=t[0],v=t[1],m=t[2],g=a[0],O=a[1],j=a[2],w=r[0],_=r[1],S=r[2];return Math.abs(b-w)<n.a&&Math.abs(v-_)<n.a&&Math.abs(m-S)<n.a?o(e):(p=b-w,f=v-_,y=m-S,i=O*(y*=d=1/Math.sqrt(p*p+f*f+y*y))-j*(f*=d),s=j*(p*=d)-g*y,l=g*f-O*p,(d=Math.sqrt(i*i+s*s+l*l))?(i*=d=1/d,s*=d,l*=d):(i=0,s=0,l=0),u=f*l-y*s,c=y*i-p*l,h=p*s-f*i,(d=Math.sqrt(u*u+c*c+h*h))?(u*=d=1/d,c*=d,h*=d):(u=0,c=0,h=0),e[0]=i,e[1]=u,e[2]=p,e[3]=0,e[4]=s,e[5]=c,e[6]=f,e[7]=0,e[8]=l,e[9]=h,e[10]=y,e[11]=0,e[12]=-(i*b+s*v+l*m),e[13]=-(u*b+c*v+h*m),e[14]=-(p*b+f*v+y*m),e[15]=1,e)},targetTo:function(e,t,r,a){var n=t[0],i=t[1],s=t[2],o=a[0],l=a[1],u=a[2],c=n-r[0],h=i-r[1],p=s-r[2],f=c*c+h*h+p*p;f>0&&(c*=f=1/Math.sqrt(f),h*=f,p*=f);var y=l*p-u*h,d=u*c-o*p,b=o*h-l*c;return(f=y*y+d*d+b*b)>0&&(y*=f=1/Math.sqrt(f),d*=f,b*=f),e[0]=y,e[1]=d,e[2]=b,e[3]=0,e[4]=h*b-p*d,e[5]=p*y-c*b,e[6]=c*d-h*y,e[7]=0,e[8]=c,e[9]=h,e[10]=p,e[11]=0,e[12]=n,e[13]=i,e[14]=s,e[15]=1,e},str:function(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"},frob:function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2)+Math.pow(e[4],2)+Math.pow(e[5],2)+Math.pow(e[6],2)+Math.pow(e[7],2)+Math.pow(e[8],2)+Math.pow(e[9],2)+Math.pow(e[10],2)+Math.pow(e[11],2)+Math.pow(e[12],2)+Math.pow(e[13],2)+Math.pow(e[14],2)+Math.pow(e[15],2))},add:function(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e[4]=t[4]+r[4],e[5]=t[5]+r[5],e[6]=t[6]+r[6],e[7]=t[7]+r[7],e[8]=t[8]+r[8],e[9]=t[9]+r[9],e[10]=t[10]+r[10],e[11]=t[11]+r[11],e[12]=t[12]+r[12],e[13]=t[13]+r[13],e[14]=t[14]+r[14],e[15]=t[15]+r[15],e},subtract:v,multiplyScalar:function(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*r,e[5]=t[5]*r,e[6]=t[6]*r,e[7]=t[7]*r,e[8]=t[8]*r,e[9]=t[9]*r,e[10]=t[10]*r,e[11]=t[11]*r,e[12]=t[12]*r,e[13]=t[13]*r,e[14]=t[14]*r,e[15]=t[15]*r,e},multiplyScalarAndAdd:function(e,t,r,a){return e[0]=t[0]+r[0]*a,e[1]=t[1]+r[1]*a,e[2]=t[2]+r[2]*a,e[3]=t[3]+r[3]*a,e[4]=t[4]+r[4]*a,e[5]=t[5]+r[5]*a,e[6]=t[6]+r[6]*a,e[7]=t[7]+r[7]*a,e[8]=t[8]+r[8]*a,e[9]=t[9]+r[9]*a,e[10]=t[10]+r[10]*a,e[11]=t[11]+r[11]*a,e[12]=t[12]+r[12]*a,e[13]=t[13]+r[13]*a,e[14]=t[14]+r[14]*a,e[15]=t[15]+r[15]*a,e},exactEquals:m,equals:g,isOrthoNormal:O,mul:j,sub:w})},754:function(e,t,r){"use strict";(function(e){r.d(t,"a",(function(){return i})),r.d(t,"b",(function(){return a})),r.d(t,"c",(function(){return n}));var a="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof e?e:"undefined"!=typeof self?self:{};function n(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function i(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}}).call(this,r(216))},835:function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));var a=r(22),n=r(2),i=r(4),s=r(145),o=function(){function e(t,r,a,i){Object(n.a)(this,e),this.set(t,r,a,i)}return Object(i.a)(e,[{key:"key",get:function(){return this}},{key:"id",get:function(){return this.toString()},set:function(e){this.set(e)}},{key:"hash",get:function(){var e=4095&this.row,t=4095&this.col,r=63&this.level;return(3&this.world)<<30|t<<22|e<<8|r}},{key:"acquire",value:function(e,t,r,a){this.set(e,t,r,a)}},{key:"contains",value:function(e){var t=e.level-this.level;return this.row===e.row>>t&&this.col===e.col>>t&&this.world===e.world}},{key:"equals",value:function(e){return this.level===e.level&&this.row===e.row&&this.col===e.col&&this.world===e.world}},{key:"clone",value:function(){return new e(this)}},{key:"release",value:function(){this.level=0,this.row=0,this.col=0,this.world=0}},{key:"set",value:function(e,t,r,n){if(null==e)this.level=0,this.row=0,this.col=0,this.world=0;else if("object"==typeof e)this.level=e.level||0,this.row=e.row||0,this.col=e.col||0,this.world=e.world||0;else if("string"==typeof e){var i=e.split("/"),s=Object(a.a)(i,4),o=s[0],l=s[1],u=s[2],c=s[3];this.level=parseFloat(o),this.row=parseFloat(l),this.col=parseFloat(u),this.world=parseFloat(c)}else this.level=+e,this.row=+t,this.col=+r,this.world=+n||0;return this}},{key:"toString",value:function(){return"".concat(this.level,"/").concat(this.row,"/").concat(this.col,"/").concat(this.world)}},{key:"getParentKey",value:function(){return this.level<=0?null:new e(this.level-1,this.row>>1,this.col>>1,this.world)}},{key:"getChildKeys",value:function(){var t=this.level+1,r=this.row<<1,a=this.col<<1,n=this.world;return[new e(t,r,a,n),new e(t,r,a+1,n),new e(t,r+1,a,n),new e(t,r+1,a+1,n)]}},{key:"compareRowMajor",value:function(e){return this.row<e.row?-1:this.row>e.row?1:this.col<e.col?-1:this.col>e.col?1:0}}],[{key:"getId",value:function(e,t,r,a){return"object"==typeof e?"".concat(e.level,"/").concat(e.row,"/").concat(e.col,"/").concat(e.world):"".concat(e,"/").concat(t,"/").concat(r,"/").concat(a)}}]),e}();o.pool=new s.a(o,null,null,25,50)},975:function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var a=r(27),n=r(85);function i(e){return{origin:"portal-item",url:Object(a.J)(e.itemUrl),portal:e.portal||n.a.getDefault(),portalItem:e,readResourcePaths:[]}}}}]);
//# sourceMappingURL=67.cb432dbc.chunk.js.map