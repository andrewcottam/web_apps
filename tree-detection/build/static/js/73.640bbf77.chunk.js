(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[73],{1092:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return J}));var n=r(13),a=r(21),u=r(23),s=r(7),i=r.n(s),o=r(2),c=r(4),l=r(5),p=r(6),d=r(12),f=r(0),h=(r(114),r(210)),y=r(82),b=r(665),O=r(29),v=r(19),j=r(42),m=r(142),x=r(11),g=r(66),k=r(30),F=r(27),R=r(1),I=(r(14),r(15),r(10)),w=r(58),S=r(62),q=r(776),_=r(862),E=r(702),T=r(908),D=r(45),C=new j.a({originalAndCurrentFeatures:"original-and-current-features",none:"none"});function P(e){return A.apply(this,arguments)}function A(){return(A=Object(d.a)(i.a.mark((function e(t){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("string"!=typeof t){e.next=3;break}return r=Object(F.i)(t),e.abrupt("return",r||{data:t});case 3:return e.abrupt("return",new Promise((function(e,r){var n=new FileReader;n.readAsDataURL(t),n.onload=function(){return e(Object(F.i)(n.result))},n.onerror=function(e){return r(e)}})));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var G=new Set(["Feature Layer","Table"]),N=function(e){Object(l.a)(r,e);var t=Object(p.a)(r);function r(){var e;return Object(o.a)(this,r),(e=t.apply(this,arguments)).type="feature-layer",e.refresh=Object(k.i)(Object(d.a)(i.a.mark((function t(){var r,n,a,u;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.load();case 2:if(null!=(a=null==(r=e.sourceJSON.editingInfo)?void 0:r.lastEditDate)){t.next=5;break}return t.abrupt("return",{hasUpdates:!0,updates:{}});case 5:return t.prev=5,t.next=8,e._fetchService(null);case 8:t.next=13;break;case 10:return t.prev=10,t.t0=t.catch(5),t.abrupt("return",{hasUpdates:!0,updates:{}});case 13:return u=a!==(null==(n=e.sourceJSON.editingInfo)?void 0:n.lastEditDate),t.abrupt("return",{hasUpdates:u,updates:u?{editingInfo:e.sourceJSON.editingInfo,extent:e.sourceJSON.extent}:null});case 15:case"end":return t.stop()}}),t,null,[[5,10]])})))),e}return Object(c.a)(r,[{key:"load",value:function(e){var t=Object(x.j)(e)?e.signal:null;return this.addResolvingPromise(this._fetchService(this.layer.sourceJSON,t)),Promise.resolve(this)}},{key:"queryTask",get:function(){var e=this.layer,t=e.capabilities.query.supportsFormatPBF,r=e.parsedUrl,n=e.dynamicDataSource,a=e.infoFor3D,u=e.gdbVersion,s=e.spatialReference,i=e.fieldsIndex,o=Object(v.a)("featurelayer-pbf")&&t&&Object(x.i)(a)?"pbf":"json";return new T.a({url:r.path,format:o,fieldsIndex:i,infoFor3D:a,dynamicDataSource:n,gdbVersion:u,sourceSpatialReference:s})}},{key:"addAttachment",value:function(){var e=Object(d.a)(i.a.mark((function e(t,r){var n,a,u,s,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.load();case 2:return n=t.attributes[this.layer.objectIdField],a=this.layer.parsedUrl.path+"/"+n+"/addAttachment",u=this._getLayerRequestOptions(),s=this._getFormDataForAttachment(r,u.query),e.prev=3,e.next=6,Object(y.default)(a,{body:s});case 6:return o=e.sent,e.abrupt("return",this._createFeatureEditResult(o.data.addAttachmentResult));case 10:throw e.prev=10,e.t0=e.catch(3),this._createAttachmentErrorResult(n,e.t0);case 13:case"end":return e.stop()}}),e,this,[[3,10]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"updateAttachment",value:function(){var e=Object(d.a)(i.a.mark((function e(t,r,n){var a,u,s,o,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.load();case 2:return a=t.attributes[this.layer.objectIdField],u=this.layer.parsedUrl.path+"/"+a+"/updateAttachment",s=this._getLayerRequestOptions({query:{attachmentId:r}}),o=this._getFormDataForAttachment(n,s.query),e.prev=3,e.next=6,Object(y.default)(u,{body:o});case 6:return c=e.sent,e.abrupt("return",this._createFeatureEditResult(c.data.updateAttachmentResult));case 10:throw e.prev=10,e.t0=e.catch(3),this._createAttachmentErrorResult(a,e.t0);case 13:case"end":return e.stop()}}),e,this,[[3,10]])})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"applyEdits",value:function(){var e=Object(d.a)(i.a.mark((function e(t,r){var n,s,o,c,l,p,d,f,h,b,O,v,j,m,x,g,k;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.load();case 2:n=t.addFeatures.map(this._serializeFeature,this),s=t.updateFeatures.map(this._serializeFeature,this),o=this._getFeatureIds(t.deleteFeatures,null==r?void 0:r.globalIdUsed),Object(E.b)(n,s,this.layer.spatialReference),c=[],l=[],p=Object(u.a)(t.deleteAttachments),d=Object(a.a)(t.addAttachments),e.prev=6,d.s();case 8:if((f=d.n()).done){e.next=17;break}return h=f.value,e.t0=c,e.next=13,this._serializeAttachment(h);case 13:e.t1=e.sent,e.t0.push.call(e.t0,e.t1);case 15:e.next=8;break;case 17:e.next=22;break;case 19:e.prev=19,e.t2=e.catch(6),d.e(e.t2);case 22:return e.prev=22,d.f(),e.finish(22);case 25:b=Object(a.a)(t.updateAttachments),e.prev=26,b.s();case 28:if((O=b.n()).done){e.next=37;break}return v=O.value,e.t3=l,e.next=33,this._serializeAttachment(v);case 33:e.t4=e.sent,e.t3.push.call(e.t3,e.t4);case 35:e.next=28;break;case 37:e.next=42;break;case 39:e.prev=39,e.t5=e.catch(26),b.e(e.t5);case 42:return e.prev=42,b.f(),e.finish(42);case 45:return j=c.length||l.length||p.length?{adds:c,updates:l,deletes:p}:null,m={gdbVersion:(null==r?void 0:r.gdbVersion)||this.layer.gdbVersion,rollbackOnFailure:null==r?void 0:r.rollbackOnFailureEnabled,useGlobalIds:null==r?void 0:r.globalIdUsed,returnEditMoment:null==r?void 0:r.returnEditMoment,usePreviousEditMoment:null==r?void 0:r.usePreviousEditMoment,sessionId:null==r?void 0:r.sessionId},null!=r&&r.returnServiceEditsOption?(m.edits=JSON.stringify([{id:this.layer.layerId,adds:n,updates:s,deletes:o,attachments:j}]),m.returnServiceEditsOption=C.toJSON(null==r?void 0:r.returnServiceEditsOption),m.returnServiceEditsInSourceSR=null==r?void 0:r.returnServiceEditsInSourceSR):(m.adds=n.length?JSON.stringify(n):null,m.updates=s.length?JSON.stringify(s):null,m.deletes=o.length?null!=r&&r.globalIdUsed?JSON.stringify(o):o.join(","):null,m.attachments=j&&JSON.stringify(j)),x=this._getLayerRequestOptions({method:"post",query:m}),g=null!=r&&r.returnServiceEditsOption?this.layer.url:this.layer.parsedUrl.path,e.next=51,Object(y.default)(g+"/applyEdits",x);case 51:return k=e.sent,e.abrupt("return",this._createEditsResult(k));case 53:case"end":return e.stop()}}),e,this,[[6,19,22,25],[26,39,42,45]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"deleteAttachments",value:function(){var e=Object(d.a)(i.a.mark((function e(t,r){var n,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.load();case 2:return n=t.attributes[this.layer.objectIdField],a=this.layer.parsedUrl.path+"/"+n+"/deleteAttachments",e.prev=3,e.next=6,Object(y.default)(a,this._getLayerRequestOptions({query:{attachmentIds:r.join(",")},method:"post"}));case 6:return e.abrupt("return",e.sent.data.deleteAttachmentResults.map(this._createFeatureEditResult));case 9:throw e.prev=9,e.t0=e.catch(3),this._createAttachmentErrorResult(n,e.t0);case 12:case"end":return e.stop()}}),e,this,[[3,9]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"fetchRecomputedExtents",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.signal;return this.load({signal:r}).then(Object(d.a)(i.a.mark((function r(){var a,u,s,o,c,l,p,d,f,h,O;return i.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return a=e._getLayerRequestOptions(Object(n.a)(Object(n.a)({},t),{},{query:{returnUpdates:!0}})),u=e.layer,s=u.layerId,o=u.url,r.next=6,Object(y.default)("".concat(o,"/").concat(s),a);case 6:return c=r.sent,l=c.data,p=l.id,d=l.extent,f=l.fullExtent,h=l.timeExtent,O=d||f,r.abrupt("return",{id:p,fullExtent:O&&w.a.fromJSON(O),timeExtent:h&&b.a.fromJSON({start:h[0],end:h[1]})});case 14:case"end":return r.stop()}}),r)}))))}},{key:"queryAttachments",value:function(){var e=Object(d.a)(i.a.mark((function e(t){var r,n,u,s,o,c,l,p,d,f,h=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>1&&void 0!==h[1]?h[1]:{},n=this.layer.parsedUrl,u=n.path,e.next=4,this.load();case 4:if(s=this._getLayerRequestOptions(r),this.layer.get("capabilities.operations.supportsQueryAttachments")){e.next=10;break}o=t.objectIds,c=[],l=Object(a.a)(o);try{for(l.s();!(p=l.n()).done;)d=p.value,f=u+"/"+d+"/attachments",c.push(Object(y.default)(f,s))}catch(i){l.e(i)}finally{l.f()}return e.abrupt("return",Promise.all(c).then((function(e){return o.map((function(t,r){return{parentObjectId:t,attachmentInfos:e[r].data.attachmentInfos}}))})).then((function(e){return Object(_.b)(e,u)})));case 10:return e.abrupt("return",this.queryTask.executeAttachmentQuery(t,s));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queryFeatures",value:function(){var e=Object(d.a)(i.a.mark((function e(t,r){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.load();case 2:return e.abrupt("return",this.queryTask.execute(t,Object(n.a)(Object(n.a)({},r),{},{query:this._createRequestQueryOptions(r)})));case 3:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"queryFeaturesJSON",value:function(){var e=Object(d.a)(i.a.mark((function e(t,r){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.load();case 2:return e.abrupt("return",this.queryTask.executeJSON(t,Object(n.a)(Object(n.a)({},r),{},{query:this._createRequestQueryOptions(r)})));case 3:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"queryObjectIds",value:function(){var e=Object(d.a)(i.a.mark((function e(t,r){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.load();case 2:return e.abrupt("return",this.queryTask.executeForIds(t,Object(n.a)(Object(n.a)({},r),{},{query:this._createRequestQueryOptions(r)})));case 3:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"queryFeatureCount",value:function(){var e=Object(d.a)(i.a.mark((function e(t,r){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.load();case 2:return e.abrupt("return",this.queryTask.executeForCount(t,Object(n.a)(Object(n.a)({},r),{},{query:this._createRequestQueryOptions(r)})));case 3:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"queryExtent",value:function(){var e=Object(d.a)(i.a.mark((function e(t,r){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.load();case 2:return e.abrupt("return",this.queryTask.executeForExtent(t,Object(n.a)(Object(n.a)({},r),{},{query:this._createRequestQueryOptions(r)})));case 3:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"queryRelatedFeatures",value:function(){var e=Object(d.a)(i.a.mark((function e(t,r){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.load();case 2:return e.abrupt("return",this.queryTask.executeRelationshipQuery(t,Object(n.a)(Object(n.a)({},r),{},{query:this._createRequestQueryOptions(r)})));case 3:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"queryRelatedFeaturesCount",value:function(){var e=Object(d.a)(i.a.mark((function e(t,r){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.load();case 2:return e.abrupt("return",this.queryTask.executeRelationshipQueryForCount(t,Object(n.a)(Object(n.a)({},r),{},{query:this._createRequestQueryOptions(r)})));case 3:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"queryTopFeatures",value:function(){var e=Object(d.a)(i.a.mark((function e(t,r){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.load();case 2:return e.abrupt("return",this.queryTask.executeTopFeaturesQuery(t,Object(n.a)(Object(n.a)({},r),{},{query:this._createRequestQueryOptions(r)})));case 3:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"queryTopObjectIds",value:function(){var e=Object(d.a)(i.a.mark((function e(t,r){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.load();case 2:return e.abrupt("return",this.queryTask.executeForTopIds(t,Object(n.a)(Object(n.a)({},r),{},{query:this._createRequestQueryOptions(r)})));case 3:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"queryTopExtents",value:function(){var e=Object(d.a)(i.a.mark((function e(t,r){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.load();case 2:return e.abrupt("return",this.queryTask.executeForTopExtents(t,Object(n.a)(Object(n.a)({},r),{},{query:this._createRequestQueryOptions(r)})));case 3:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"queryTopCount",value:function(){var e=Object(d.a)(i.a.mark((function e(t,r){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.load();case 2:return e.abrupt("return",this.queryTask.executeForTopCount(t,Object(n.a)(Object(n.a)({},r),{},{query:this._createRequestQueryOptions(r)})));case 3:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"_createRequestQueryOptions",value:function(e){var t=Object(n.a)(Object(n.a)({},this.layer.customParameters),{},{token:this.layer.apiKey},null==e?void 0:e.query);return this.layer.datesInUnknownTimezone&&(t.timeReferenceUnknownClient=!0),t}},{key:"_fetchService",value:function(){var e=Object(d.a)(i.a.mark((function e(t,r){var n,a,u;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=6;break}return e.next=3,Object(y.default)(this.layer.parsedUrl.path,this._getLayerRequestOptions({query:Object(v.a)("featurelayer-advanced-symbols")?{returnAdvancedSymbols:!0}:{},signal:r}));case 3:n=e.sent,a=n.data,t=a;case 6:if(this.sourceJSON=this._patchServiceJSON(t),u=t.type,G.has(u)){e.next=10;break}throw new O.a("feature-layer-source:unsupported-type",'Source type "'.concat(u,'" is not supported'));case 10:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"_patchServiceJSON",value:function(e){var t;if("Table"!==e.type&&e.geometryType&&(null==e||null==(t=e.drawingInfo)||!t.renderer)&&!e.defaultSymbol){var r=Object(q.d)(e.geometryType).renderer;Object(g.c)("drawingInfo.renderer",r,e)}return"esriGeometryMultiPatch"===e.geometryType&&e.infoFor3D&&(e.geometryType="mesh"),e}},{key:"_serializeFeature",value:function(e){var t=e.geometry,r=e.attributes;return Object(x.i)(t)?{attributes:r}:"mesh"===t.type||"extent"===t.type?null:{geometry:t.toJSON(),attributes:r}}},{key:"_serializeAttachment",value:function(){var e=Object(d.a)(i.a.mark((function e(t){var r,n,a,u,s,o,c,l,p;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.feature,n=t.attachment,a=n.globalId,u=n.name,s=n.contentType,o=n.data,c=n.uploadId,l={globalId:a,parentGlobalId:null,contentType:null,name:null,uploadId:null,data:null},r&&(l.parentGlobalId="attributes"in r?r.attributes&&r.attributes[this.layer.globalIdField]:r.globalId),!c){e.next=5;break}l.uploadId=c,e.next=10;break;case 5:if(!o){e.next=10;break}return e.next=8,P(o);case 8:p=e.sent,l.contentType=p.mediaType,l.data=p.data,o instanceof File&&(l.name=o.name);case 10:return e.abrupt("return",(u&&(l.name=u),s&&(l.contentType=s),l));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_getFeatureIds",value:function(e,t){var r=e[0];return r?this._canUseGlobalIds(t,e)?this._getGlobalIdsFromFeatureIdentifier(e):"objectId"in r?this._getObjectIdsFromFeatureIdentifier(e):this._getIdsFromFeatures(e):[]}},{key:"_getIdsFromFeatures",value:function(e){var t=this.layer.objectIdField;return e.map((function(e){return e.attributes&&e.attributes[t]}))}},{key:"_canUseGlobalIds",value:function(e,t){return e&&"globalId"in t[0]}},{key:"_getObjectIdsFromFeatureIdentifier",value:function(e){return e.map((function(e){return e.objectId}))}},{key:"_getGlobalIdsFromFeatureIdentifier",value:function(e){return e.map((function(e){return e.globalId}))}},{key:"_createEditsResult",value:function(e){var t,r=this,n=e.data,u=this.layer.layerId,s=[],i=null;if(Array.isArray(n)){var o,c=Object(a.a)(n);try{for(c.s();!(o=c.n()).done;){var l=o.value;s.push({id:l.id,editedFeatures:l.editedFeatures}),l.id===u&&(i={addResults:l.addResults,updateResults:l.updateResults,deleteResults:l.deleteResults,attachments:l.attachments,editMoment:l.editMoment})}}catch(b){c.e(b)}finally{c.f()}}else i=n;var p=null==(t=i)?void 0:t.attachments,d={addFeatureResults:i.addResults?i.addResults.map(this._createFeatureEditResult,this):[],updateFeatureResults:i.updateResults?i.updateResults.map(this._createFeatureEditResult,this):[],deleteFeatureResults:i.deleteResults?i.deleteResults.map(this._createFeatureEditResult,this):[],addAttachmentResults:p&&p.addResults?p.addResults.map(this._createFeatureEditResult,this):[],updateAttachmentResults:p&&p.updateResults?p.updateResults.map(this._createFeatureEditResult,this):[],deleteAttachmentResults:p&&p.deleteResults?p.deleteResults.map(this._createFeatureEditResult,this):[]};if(i.editMoment&&(d.editMoment=i.editMoment),s.length>0){d.editedFeatureResults=[];var f,h=Object(a.a)(s);try{var y=function(){var e=f.value,t=e.editedFeatures,n=t.adds,a=t.updates,u=t.deletes,s=t.spatialReference,i=s?new D.a(s):null;d.editedFeatureResults.push({layerId:e.id,editedFeatures:{adds:(null==n?void 0:n.map((function(e){return r._createEditedFeature(e,i)})))||[],updates:(null==a?void 0:a.map((function(e){return{original:r._createEditedFeature(e[0],i),current:r._createEditedFeature(e[1],i)}})))||[],deletes:(null==u?void 0:u.map((function(e){return r._createEditedFeature(e,i)})))||[],spatialReference:i}})};for(h.s();!(f=h.n()).done;)y()}catch(b){h.e(b)}finally{h.f()}}return d}},{key:"_createEditedFeature",value:function(e,t){return new h.a({attributes:e.attributes,geometry:Object(S.a)(Object(n.a)(Object(n.a)({},e.geometry),{},{spatialReference:t}))})}},{key:"_createFeatureEditResult",value:function(e){var t=!0===e.success?null:e.error||{code:void 0,description:void 0};return{objectId:e.objectId,globalId:e.globalId,error:t?new O.a("feature-layer-source:edit-failure",t.description,{code:t.code}):null}}},{key:"_createAttachmentErrorResult",value:function(e,t){var r=t.details.messages&&t.details.messages[0]||t.message,n=t.details.httpStatus||t.details.messageCode;return{objectId:e,globalId:null,error:new O.a("feature-layer-source:attachment-failure",r,{code:n})}}},{key:"_getFormDataForAttachment",value:function(e,t){var r=e instanceof FormData?e:e&&e.elements?new FormData(e):null;if(r)for(var n in t){var a=t[n];null!=a&&(r.set?r.set(n,a):r.append(n,a))}return r}},{key:"_getLayerRequestOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.layer,r=t.parsedUrl,a=t.gdbVersion,u=t.dynamicDataSource;return Object(n.a)(Object(n.a)({},e),{},{query:Object(n.a)(Object(n.a)({gdbVersion:a,layer:u?JSON.stringify({source:u}):void 0},r.query),{},{f:"json"},this._createRequestQueryOptions(e)),responseType:"json"})}}]),r}(m.a);Object(f.a)([Object(R.b)()],N.prototype,"type",void 0),Object(f.a)([Object(R.b)({constructOnly:!0})],N.prototype,"layer",void 0),Object(f.a)([Object(R.b)({readOnly:!0})],N.prototype,"queryTask",null);var J=N=Object(f.a)([Object(I.a)("esri.layers.graphics.sources.FeatureLayerSource")],N)},752:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var n={supportsStatistics:!0,supportsPercentileStatistics:!0,supportsCentroid:!0,supportsCacheHint:!1,supportsDistance:!0,supportsDistinct:!0,supportsExtent:!0,supportsGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQuantization:!0,supportsQuantizationEditMode:!1,supportsQueryGeometry:!0,supportsResultType:!1,supportsSqlExpression:!0,supportsMaxRecordCountFactor:!1,supportsStandardizedQueriesOnly:!0,supportsTopFeaturesQuery:!1,supportsQueryByOthers:!0,supportsHistoricMoment:!1,supportsFormatPBF:!1,supportsDisjointSpatialRelationship:!0,maxRecordCountFactor:void 0,maxRecordCount:void 0,standardMaxRecordCount:void 0,tileMaxRecordCount:void 0}},776:function(e,t,r){"use strict";r.d(t,"a",(function(){return d})),r.d(t,"b",(function(){return l})),r.d(t,"c",(function(){return p})),r.d(t,"d",(function(){return c}));var n=r(9),a=r(13),u=r(19),s=r(18),i=r(752),o=r(703);function c(e){return{renderer:{type:"simple",symbol:"esriGeometryPoint"===e||"esriGeometryMultipoint"===e?o.a:"esriGeometryPolyline"===e?o.c:o.b}}}function l(e,t){if(Object(u.a)("csp-restrictions"))return function(){return Object(a.a)(Object(n.a)({},t,null),e)};try{var r="this.".concat(t," = null;");for(var s in e)r+="this".concat(s.indexOf(".")?'["'.concat(s,'"]'):".".concat(s)," = ").concat(JSON.stringify(e[s]),";");var i=new Function(r);return function(){return new i}}catch(o){return function(){return Object(a.a)(Object(n.a)({},t,null),e)}}}function p(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[{name:"New Feature",description:"",prototype:{attributes:Object(s.a)(e)}}]}function d(e,t){return{attachment:null,data:{isVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:e},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:t,supportsDelete:t,supportsEditing:t,supportsChangeTracking:!1,supportsQuery:!0,supportsQueryAttachments:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:t,supportsExceedsLimitStatistics:!0},query:i.a,queryRelated:{supportsCount:!0,supportsOrderBy:!0,supportsPagination:!0},editing:{supportsGeometryUpdate:t,supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,supportsRollbackOnFailure:!1,supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1,supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1}}}},847:function(e,t,r){"use strict";r.d(t,"a",(function(){return l}));var n=r(7),a=r.n(n),u=r(13),s=r(12),i=r(80),o=r(722),c=r(670);function l(e,t,r){return p.apply(this,arguments)}function p(){return p=Object(s.a)(a.a.mark((function e(t,r,n){var s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=Object(i.c)(t),e.abrupt("return",Object(o.executeQueryForCount)(s,c.a.from(r),Object(u.a)({},n)).then((function(e){return e.data.count})));case 2:case"end":return e.stop()}}),e)}))),p.apply(this,arguments)}},848:function(e,t,r){"use strict";r.d(t,"a",(function(){return l}));var n=r(7),a=r.n(n),u=r(13),s=r(12),i=r(80),o=r(722),c=r(670);function l(e,t,r){return p.apply(this,arguments)}function p(){return p=Object(s.a)(a.a.mark((function e(t,r,n){var s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=Object(i.c)(t),e.abrupt("return",Object(o.executeQueryForIds)(s,c.a.from(r),Object(u.a)({},n)).then((function(e){return e.data.objectIds})));case 2:case"end":return e.stop()}}),e)}))),p.apply(this,arguments)}},849:function(e,t,r){"use strict";r.d(t,"a",(function(){return p})),r.d(t,"b",(function(){return f}));var n=r(13),a=r(7),u=r.n(a),s=r(12),i=r(80),o=r(722),c=r(668),l=r(670);function p(e,t,r){return d.apply(this,arguments)}function d(){return d=Object(s.a)(u.a.mark((function e(t,r,n){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f(t,r,n);case 2:return a=e.sent,e.abrupt("return",c.default.fromJSON(a));case 4:case"end":return e.stop()}}),e)}))),d.apply(this,arguments)}function f(e,t,r){return h.apply(this,arguments)}function h(){return h=Object(s.a)(u.a.mark((function e(t,r,a){var s,c,p,d,f;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=Object(i.c)(t),c=Object(n.a)({},a),p=l.a.from(r),e.next=5,Object(o.executeQuery)(s,p,p.sourceSpatialReference,c);case 5:return d=e.sent,f=d.data,e.abrupt("return",f);case 8:case"end":return e.stop()}}),e)}))),h.apply(this,arguments)}},852:function(e,t,r){"use strict";r.d(t,"a",(function(){return y}));var n,a=r(2),u=r(4),s=r(5),i=r(6),o=r(0),c=r(26),l=r(1),p=(r(19),r(14)),d=(r(15),r(10));var f={1:{id:1,rotation:0,mirrored:!1},2:{id:2,rotation:0,mirrored:!0},3:{id:3,rotation:180,mirrored:!1},4:{id:4,rotation:180,mirrored:!0},5:{id:5,rotation:-90,mirrored:!0},6:{id:6,rotation:90,mirrored:!1},7:{id:7,rotation:90,mirrored:!0},8:{id:8,rotation:-90,mirrored:!1}},h=n=function(e){Object(s.a)(r,e);var t=Object(i.a)(r);function r(e){var n;return Object(a.a)(this,r),(n=t.call(this,e)).contentType=null,n.exifInfo=null,n.id=null,n.globalId=null,n.keywords=null,n.name=null,n.parentGlobalId=null,n.parentObjectId=null,n.size=null,n.url=null,n}return Object(u.a)(r,[{key:"orientationInfo",get:function(){var e=function(e){var t=e.exifInfo,r=e.exifName,n=e.tagName;if(!t||!r||!n)return null;var a=t.find((function(e){return e.name===r}));return a?function(e){var t=e.tagName,r=e.tags;if(!r||!t)return null;var n=r.find((function(e){return e.name===t}));return n&&n.value||null}({tagName:n,tags:a.tags}):null}({exifName:"Exif IFD0",tagName:"Orientation",exifInfo:this.exifInfo});return f[e]||null}},{key:"clone",value:function(){return new n({contentType:this.contentType,exifInfo:this.exifInfo,id:this.id,globalId:this.globalId,keywords:this.keywords,name:this.name,parentGlobalId:this.parentGlobalId,parentObjectId:this.parentObjectId,size:this.size,url:this.url})}}]),r}(c.a);Object(o.a)([Object(l.b)({type:String})],h.prototype,"contentType",void 0),Object(o.a)([Object(l.b)()],h.prototype,"exifInfo",void 0),Object(o.a)([Object(l.b)({readOnly:!0})],h.prototype,"orientationInfo",null),Object(o.a)([Object(l.b)({type:p.a})],h.prototype,"id",void 0),Object(o.a)([Object(l.b)({type:String})],h.prototype,"globalId",void 0),Object(o.a)([Object(l.b)({type:String})],h.prototype,"keywords",void 0),Object(o.a)([Object(l.b)({type:String})],h.prototype,"name",void 0),Object(o.a)([Object(l.b)({json:{read:!1}})],h.prototype,"parentGlobalId",void 0),Object(o.a)([Object(l.b)({json:{read:!1}})],h.prototype,"parentObjectId",void 0),Object(o.a)([Object(l.b)({type:p.a})],h.prototype,"size",void 0),Object(o.a)([Object(l.b)({json:{read:!1}})],h.prototype,"url",void 0);var y=h=n=Object(o.a)([Object(d.a)("esri.layers.support.AttachmentInfo")],h)},862:function(e,t,r){"use strict";r.d(t,"a",(function(){return d})),r.d(t,"b",(function(){return p}));var n=r(13),a=r(21),u=r(83),s=r(82),i=r(27),o=r(852),c=r(757);function l(e){var t=e.toJSON();return t.attachmentTypes&&(t.attachmentTypes=t.attachmentTypes.join(",")),t.keywords&&(t.keywords=t.keywords.join(",")),t.globalIds&&(t.globalIds=t.globalIds.join(",")),t.objectIds&&(t.objectIds=t.objectIds.join(",")),t.size&&(t.size=t.size.join(",")),t}function p(e,t){var r,n={},s=Object(a.a)(e);try{for(s.s();!(r=s.n()).done;){var c,l=r.value,p=l.parentObjectId,d=l.parentGlobalId,f=l.attachmentInfos,h=Object(a.a)(f);try{for(h.s();!(c=h.n()).done;){var y=c.value,b=y.id,O=Object(i.b)(Object(u.a)("".concat(t,"/").concat(p,"/attachments/").concat(b))),v=o.a.fromJSON(y);v.set({url:O,parentObjectId:p,parentGlobalId:d}),n[p]?n[p].push(v):n[p]=[v]}}catch(j){h.e(j)}finally{h.f()}}}catch(j){s.e(j)}finally{s.f()}return n}function d(e,t,r){var a={query:Object(c.a)(Object(n.a)(Object(n.a)({},e.query),{},{f:"json"},l(t)))};return r&&(a=Object(n.a)(Object(n.a)(Object(n.a)({},r),a),{},{query:Object(n.a)(Object(n.a)({},r.query),a.query)})),Object(s.default)(e.path+"/queryAttachments",a)}},908:function(e,t,r){"use strict";r.d(t,"a",(function(){return ge}));var n=r(21),a=r(7),u=r.n(a),s=r(13),i=r(12),o=r(2),c=r(4),l=r(5),p=r(6),d=r(0),f=r(29),h=r(19),y=r(11),b=r(30),O=r(1),v=(r(14),r(15),r(10)),j=r(673),m=r(80),x=r(862),g=r(747);function k(){return(k=Object(i.a)(u.a.mark((function e(t,r,n){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object(m.c)(t),e.abrupt("return",Object(x.a)(a,g.a.from(r),Object(s.a)({},n)).then((function(e){return Object(x.b)(e.data.attachmentGroups,a.path)})));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var F=r(847),R=(r(114),r(722)),I=r(670),w=r(58);function S(){return(S=Object(i.a)(u.a.mark((function e(t,r,n){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object(m.c)(t),e.abrupt("return",Object(R.executeQueryForExtent)(a,I.a.from(r),Object(s.a)({},n)).then((function(e){return{count:e.data.count,extent:w.a.fromJSON(e.data.extent)}})));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var q=r(848),_=r(849),E=r(694),T=r(680),D=r(702);function C(e,t){return t}function P(e,t,r,n){switch(r){case 0:return J(e,t+n,0);case 1:return"lowerLeft"===e.originPosition?J(e,t+n,1):function(e,t,r){var n=e.translate,a=e.scale;return n[r]-t*a[r]}(e,t+n,1)}}function A(e,t,r,n){return 2===r?J(e,t,2):P(e,t,r,n)}function G(e,t,r,n){return 2===r?J(e,t,3):P(e,t,r,n)}function N(e,t,r,n){return 3===r?J(e,t,3):A(e,t,r,n)}function J(e,t,r){var n=e.translate,a=e.scale;return n[r]+t*a[r]}var Q=function(){function e(t){Object(o.a)(this,e),this.options=t,this.geometryTypes=["esriGeometryPoint","esriGeometryMultipoint","esriGeometryPolyline","esriGeometryPolygon"],this.previousCoordinate=[0,0],this.transform=null,this.applyTransform=C,this.lengths=[],this.currentLengthIndex=0,this.toAddInCurrentPath=0,this.vertexDimension=0,this.coordinateBuffer=null,this.coordinateBufferPtr=0,this.AttributesConstructor=function(){}}return Object(c.a)(e,[{key:"createFeatureResult",value:function(){return{fields:[],features:[]}}},{key:"finishFeatureResult",value:function(e){if(this.options.applyTransform&&(e.transform=null),this.AttributesConstructor=function(){},this.coordinateBuffer=null,this.lengths.length=0,e.hasZ){var t=Object(D.a)(e.geometryType,this.options.sourceSpatialReference,e.spatialReference);if(t){var r,a=Object(n.a)(e.features);try{for(a.s();!(r=a.n()).done;){t(r.value.geometry)}}catch(u){a.e(u)}finally{a.f()}}}}},{key:"createSpatialReference",value:function(){return{}}},{key:"addField",value:function(e,t){e.fields.push(t);var r=e.fields.map((function(e){return e.name}));this.AttributesConstructor=function(){var e,t=Object(n.a)(r);try{for(t.s();!(e=t.n()).done;){this[e.value]=null}}catch(a){t.e(a)}finally{t.f()}}}},{key:"addFeature",value:function(e,t){e.features.push(t)}},{key:"prepareFeatures",value:function(e){var t=this;switch(this.transform=e.transform,this.options.applyTransform&&e.transform&&(this.applyTransform=this.deriveApplyTransform(e)),this.vertexDimension=2,e.hasZ&&this.vertexDimension++,e.hasM&&this.vertexDimension++,e.geometryType){case"esriGeometryPoint":this.addCoordinate=function(e,r,n){return t.addCoordinatePoint(e,r,n)},this.createGeometry=function(e){return t.createPointGeometry(e)};break;case"esriGeometryPolygon":this.addCoordinate=function(e,r,n){return t.addCoordinatePolygon(e,r,n)},this.createGeometry=function(e){return t.createPolygonGeometry(e)};break;case"esriGeometryPolyline":this.addCoordinate=function(e,r,n){return t.addCoordinatePolyline(e,r,n)},this.createGeometry=function(e){return t.createPolylineGeometry(e)};break;case"esriGeometryMultipoint":this.addCoordinate=function(e,r,n){return t.addCoordinateMultipoint(e,r,n)},this.createGeometry=function(e){return t.createMultipointGeometry(e)};break;default:Object(E.a)(e.geometryType)}}},{key:"createFeature",value:function(){return this.lengths.length=0,this.currentLengthIndex=0,this.previousCoordinate[0]=0,this.previousCoordinate[1]=0,this.coordinateBuffer=null,this.coordinateBufferPtr=0,{attributes:new this.AttributesConstructor}}},{key:"allocateCoordinates",value:function(){}},{key:"addLength",value:function(e,t,r){0===this.lengths.length&&(this.toAddInCurrentPath=t),this.lengths.push(t)}},{key:"addQueryGeometry",value:function(e,t){var r=t.queryGeometry,n=t.queryGeometryType,a=Object(T.w)(r.clone(),r,!1,!1,this.transform),u=Object(T.h)(a,n,!1,!1);e.queryGeometryType=n,e.queryGeometry=Object(s.a)({},u)}},{key:"createPointGeometry",value:function(e){var t={x:0,y:0,spatialReference:e.spatialReference};return e.hasZ&&(t.z=0),e.hasM&&(t.m=0),t}},{key:"addCoordinatePoint",value:function(e,t,r){switch(t=this.applyTransform(this.transform,t,r,0),r){case 0:e.x=t;break;case 1:e.y=t;break;case 2:"z"in e?e.z=t:e.m=t;break;case 3:e.m=t}}},{key:"transformPathLikeValue",value:function(e,t){var r=0;return t<=1&&(r=this.previousCoordinate[t],this.previousCoordinate[t]+=e),this.applyTransform(this.transform,e,t,r)}},{key:"addCoordinatePolyline",value:function(e,t,r){this.dehydratedAddPointsCoordinate(e.paths,t,r)}},{key:"addCoordinatePolygon",value:function(e,t,r){this.dehydratedAddPointsCoordinate(e.rings,t,r)}},{key:"addCoordinateMultipoint",value:function(e,t,r){0===r&&e.points.push([]);var n=this.transformPathLikeValue(t,r);e.points[e.points.length-1].push(n)}},{key:"createPolygonGeometry",value:function(e){return{rings:[[]],spatialReference:e.spatialReference,hasZ:!!e.hasZ,hasM:!!e.hasM}}},{key:"createPolylineGeometry",value:function(e){return{paths:[[]],spatialReference:e.spatialReference,hasZ:!!e.hasZ,hasM:!!e.hasM}}},{key:"createMultipointGeometry",value:function(e){return{points:[],spatialReference:e.spatialReference,hasZ:!!e.hasZ,hasM:!!e.hasM}}},{key:"dehydratedAddPointsCoordinate",value:function(e,t,r){0===r&&0==this.toAddInCurrentPath--&&(e.push([]),this.toAddInCurrentPath=this.lengths[++this.currentLengthIndex]-1,this.previousCoordinate[0]=0,this.previousCoordinate[1]=0);var n=this.transformPathLikeValue(t,r),a=e[e.length-1];0===r&&(this.coordinateBufferPtr=0,this.coordinateBuffer=new Array(this.vertexDimension),a.push(this.coordinateBuffer)),this.coordinateBuffer[this.coordinateBufferPtr++]=n}},{key:"deriveApplyTransform",value:function(e){var t=e.hasZ,r=e.hasM;return t&&r?N:t?A:r?G:P}}]),e}(),M=r(668);function B(e,t,r){return U.apply(this,arguments)}function U(){return(U=Object(i.a)(u.a.mark((function e(t,r,n){var a,i,o,c,l,p;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object(m.c)(t),i=Object(s.a)({},n),o=I.a.from(r),c=!o.quantizationParameters,e.next=6,Object(R.executeQueryPBF)(a,o,new Q({sourceSpatialReference:o.sourceSpatialReference,applyTransform:c}),i);case 6:return l=e.sent,p=l.data,e.abrupt("return",p);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var z=r(82),V=r(757);function L(e,t){var r=e.toJSON();return r.objectIds&&(r.objectIds=r.objectIds.join(",")),r.orderByFields&&(r.orderByFields=r.orderByFields.join(",")),!r.outFields||null!=t&&t.returnCountOnly?delete r.outFields:-1!==r.outFields.indexOf("*")?r.outFields="*":r.outFields=r.outFields.join(","),r.outSpatialReference&&(r.outSR=r.outSR.wkid||JSON.stringify(r.outSR.toJSON()),delete r.outSpatialReference),r.dynamicDataSource&&(r.layer=JSON.stringify({source:r.dynamicDataSource}),delete r.dynamicDataSource),r}function Z(e,t,r){return X.apply(this,arguments)}function X(){return(X=Object(i.a)(u.a.mark((function e(t,r,a){var i,o,c,l,p,d,f,h,y,b;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W(t,r,a);case 2:i=e.sent,o=i.data,c=o.geometryType,l=o.spatialReference,p={},d=Object(n.a)(o.relatedRecordGroups);try{for(d.s();!(f=d.n()).done;)if(h=f.value,y={fields:void 0,objectIdFieldName:void 0,geometryType:c,spatialReference:l,hasZ:!!o.hasZ,hasM:!!o.hasM,features:h.relatedRecords},null!=h.objectId)p[h.objectId]=y;else for(b in h)h.hasOwnProperty(b)&&"relatedRecords"!==b&&(p[h[b]]=y)}catch(u){d.e(u)}finally{d.f()}return e.abrupt("return",Object(s.a)(Object(s.a)({},i),{},{data:p}));case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Y(e,t,r){return H.apply(this,arguments)}function H(){return(H=Object(i.a)(u.a.mark((function e(t,r,a){var i,o,c,l,p,d;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W(t,r,a,{returnCountOnly:!0});case 2:i=e.sent,o=i.data,c={},l=Object(n.a)(o.relatedRecordGroups);try{for(l.s();!(p=l.n()).done;)null!=(d=p.value).objectId&&(c[d.objectId]=d.count)}catch(u){l.e(u)}finally{l.f()}return e.abrupt("return",Object(s.a)(Object(s.a)({},i),{},{data:c}));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function W(e,t){return K.apply(this,arguments)}function K(){return K=Object(i.a)(u.a.mark((function e(t,r){var n,a,i,o=arguments;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>2&&void 0!==o[2]?o[2]:{},a=o.length>3?o[3]:void 0,i=Object(V.a)(Object(s.a)(Object(s.a)(Object(s.a)({},t.query),{},{f:"json"},a),L(r,a))),e.abrupt("return",Object(z.default)(t.path+"/queryRelatedRecords",Object(s.a)(Object(s.a)({},n),{},{query:Object(s.a)(Object(s.a)({},n.query),i)})));case 4:case"end":return e.stop()}}),e)}))),K.apply(this,arguments)}var $=r(729);function ee(){return(ee=Object(i.a)(u.a.mark((function e(t,r,n){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=$.a.from(r),a=Object(m.c)(t),e.abrupt("return",Z(a,r,n).then((function(e){var t=e.data,r={};return Object.keys(t).forEach((function(e){return r[e]=M.default.fromJSON(t[e])})),r})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function te(){return(te=Object(i.a)(u.a.mark((function e(t,r,n){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=$.a.from(r),a=Object(m.c)(t),e.abrupt("return",Y(a,r,Object(s.a)({},n)).then((function(e){return e.data})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var re=r(27),ne=r(62),ae=r(696),ue=r(723),se="Layer does not support extent calculation.";function ie(e,t){var r,n,a=e.geometry,u=e.toJSON(),s=u;if(Object(y.j)(a)&&(s.geometry=JSON.stringify(a),s.geometryType=Object(ne.c)(a),s.inSR=a.spatialReference.wkid||JSON.stringify(a.spatialReference)),null!=(r=u.topFilter)&&r.groupByFields&&(s.topFilter.groupByFields=u.topFilter.groupByFields.join(",")),null!=(n=u.topFilter)&&n.orderByFields&&(s.topFilter.orderByFields=u.topFilter.orderByFields.join(",")),u.topFilter&&(s.topFilter=JSON.stringify(s.topFilter)),u.objectIds&&(s.objectIds=u.objectIds.join(",")),u.orderByFields&&(s.orderByFields=u.orderByFields.join(",")),u.outFields&&!(null!=t&&t.returnCountOnly||null!=t&&t.returnExtentOnly||null!=t&&t.returnIdsOnly)?-1!==u.outFields.indexOf("*")?s.outFields="*":s.outFields=u.outFields.join(","):delete s.outFields,u.outSR?s.outSR=u.outSR.wkid||JSON.stringify(u.outSR):a&&u.returnGeometry&&(s.outSR=s.inSR),u.returnGeometry&&delete u.returnGeometry,u.timeExtent){var i=u.timeExtent,o=i.start,c=i.end;null==o&&null==c||(s.time=o===c?o:"".concat(null==o?"null":o,",").concat(null==c?"null":c)),delete u.timeExtent}return s}function oe(e,t,r,n){return ce.apply(this,arguments)}function ce(){return(ce=Object(i.a)(u.a.mark((function e(t,r,n,a){var s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ye(t,r,"json",a);case 2:return s=e.sent,e.abrupt("return",(Object(ue.a)(r,n,s.data),s));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function le(e,t,r){return pe.apply(this,arguments)}function pe(){return(pe=Object(i.a)(u.a.mark((function e(t,r,n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(y.j)(r.timeExtent)&&r.timeExtent.isEmpty?Promise.resolve({data:{objectIds:[]}}):ye(t,r,"json",n,{returnIdsOnly:!0}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function de(e,t,r){return fe.apply(this,arguments)}function fe(){return(fe=Object(i.a)(u.a.mark((function e(t,r,n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(y.j)(r.timeExtent)&&r.timeExtent.isEmpty?Promise.resolve({data:{count:0,extent:null}}):ye(t,r,"json",n,{returnExtentOnly:!0,returnCountOnly:!0}).then((function(e){var t=e.data;if(t.hasOwnProperty("extent"))return e;if(t.features)throw new Error(se);if(t.hasOwnProperty("count"))throw new Error(se);return e})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function he(e,t,r){return Object(y.j)(t.timeExtent)&&t.timeExtent.isEmpty?Promise.resolve({data:{count:0}}):ye(e,t,"json",r,{returnIdsOnly:!0,returnCountOnly:!0})}function ye(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},u="string"==typeof e?Object(re.J)(e):e,i=t.geometry?[t.geometry]:[];return n.responseType="pbf"===r?"array-buffer":"json",Object(ae.a)(i,null,n).then((function(e){var i=e&&e[0];Object(y.j)(i)&&((t=t.clone()).geometry=i);var o=Object(V.a)(Object(s.a)(Object(s.a)(Object(s.a)({},u.query),{},{f:r},a),ie(t,a)));return Object(z.default)(Object(re.y)(u.path,"queryTopFeatures"),Object(s.a)(Object(s.a)({},n),{},{query:Object(s.a)(Object(s.a)({},o),n.query)}))}))}var be=r(720);function Oe(){return(Oe=Object(i.a)(u.a.mark((function e(t,r,n,a){var i,o,c,l;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Object(m.c)(t),o=Object(s.a)({},a),e.next=4,oe(i,be.a.from(r),n,o);case 4:return c=e.sent,l=c.data,e.abrupt("return",M.default.fromJSON(l));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ve(){return(ve=Object(i.a)(u.a.mark((function e(t,r,n){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object(m.c)(t),e.next=3,le(a,be.a.from(r),Object(s.a)({},n));case 3:return e.abrupt("return",e.sent.data.objectIds);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function je(){return(je=Object(i.a)(u.a.mark((function e(t,r,n){var a,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object(m.c)(t),e.next=3,de(a,be.a.from(r),Object(s.a)({},n));case 3:return i=e.sent,e.abrupt("return",{count:i.data.count,extent:w.a.fromJSON(i.data.extent)});case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function me(){return(me=Object(i.a)(u.a.mark((function e(t,r,n){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object(m.c)(t),e.next=3,he(a,be.a.from(r),Object(s.a)({},n));case 3:return e.abrupt("return",e.sent.data.count);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var xe=function(e){Object(l.a)(a,e);var t=Object(p.a)(a);function a(e){var r;return Object(o.a)(this,a),(r=t.call(this,e)).dynamicDataSource=null,r.fieldsIndex=null,r.format="json",r.gdbVersion=null,r.infoFor3D=null,r.sourceSpatialReference=null,r}return Object(c.a)(a,[{key:"execute",value:function(e,t){var r=this;return this.executeJSON(e,t).then((function(n){return r.featureSetFromJSON(e,n,t)}))}},{key:"executeJSON",value:function(){var e=Object(i.a)(u.a.mark((function e(t,r){var n,a,i,o,c,l,p;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=Object(s.a)(Object(s.a)({},this.requestOptions),r),i=this._normalizeQuery(t),o=null!=(null==(n=t.outStatistics)?void 0:n[0]),c=Object(h.a)("featurelayer-pbf-statistics"),l=!o||c,"pbf"!==this.format||!l){e.next=13;break}return e.prev=2,e.next=5,B(this.url,i,a);case 5:p=e.sent,e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(2),"query:parsing-pbf"===e.t0.name){e.next=12;break}throw e.t0;case 12:this.format="json";case 13:if(e.t1="json"!==this.format&&l,e.t1){e.next=18;break}return e.next=17,Object(_.b)(this.url,i,a);case 17:p=e.sent;case 18:return this._normalizeFields(p.fields),e.abrupt("return",p);case 20:case"end":return e.stop()}}),e,this,[[2,8]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"featureSetFromJSON",value:function(){var e=Object(i.a)(u.a.mark((function e(t,n,a){var s,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._queryIs3DObjectFormat(t)&&Object(y.j)(this.infoFor3D)&&n.features&&n.features.length){e.next=2;break}return e.abrupt("return",M.default.fromJSON(n));case 2:return e.next=4,Object(b.y)(Promise.all([r.e(4),r.e(12),r.e(20),r.e(74)]).then(r.bind(null,1105)),a);case 4:return s=e.sent,i=s.meshFeatureSetFromJSON,e.abrupt("return",i(t,this.infoFor3D,n));case 7:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"executeForCount",value:function(e,t){var r=Object(s.a)(Object(s.a)({},this.requestOptions),t),n=this._normalizeQuery(e);return Object(F.a)(this.url,n,r)}},{key:"executeForExtent",value:function(e,t){var r=Object(s.a)(Object(s.a)({},this.requestOptions),t),n=this._normalizeQuery(e);return function(e,t,r){return S.apply(this,arguments)}(this.url,n,r)}},{key:"executeForIds",value:function(e,t){var r=Object(s.a)(Object(s.a)({},this.requestOptions),t),n=this._normalizeQuery(e);return Object(q.a)(this.url,n,r)}},{key:"executeRelationshipQuery",value:function(e,t){e=$.a.from(e);var r=Object(s.a)(Object(s.a)({},this.requestOptions),t);return(this.gdbVersion||this.dynamicDataSource)&&((e=e.clone()).gdbVersion=e.gdbVersion||this.gdbVersion,e.dynamicDataSource=e.dynamicDataSource||this.dynamicDataSource),function(e,t,r){return ee.apply(this,arguments)}(this.url,e,r)}},{key:"executeRelationshipQueryForCount",value:function(e,t){e=$.a.from(e);var r=Object(s.a)(Object(s.a)({},this.requestOptions),t);return(this.gdbVersion||this.dynamicDataSource)&&((e=e.clone()).gdbVersion=e.gdbVersion||this.gdbVersion,e.dynamicDataSource=e.dynamicDataSource||this.dynamicDataSource),function(e,t,r){return te.apply(this,arguments)}(this.url,e,r)}},{key:"executeAttachmentQuery",value:function(e,t){var r=Object(s.a)(Object(s.a)({},this.requestOptions),t);return function(e,t,r){return k.apply(this,arguments)}(this.url,e,r)}},{key:"executeTopFeaturesQuery",value:function(e,t){var r=Object(s.a)(Object(s.a)({},this.requestOptions),t);return function(e,t,r,n){return Oe.apply(this,arguments)}(this.parsedUrl,e,this.sourceSpatialReference,r)}},{key:"executeForTopIds",value:function(e,t){var r=Object(s.a)(Object(s.a)({},this.requestOptions),t);return function(e,t,r){return ve.apply(this,arguments)}(this.parsedUrl,e,r)}},{key:"executeForTopExtents",value:function(e,t){var r=Object(s.a)(Object(s.a)({},this.requestOptions),t);return function(e,t,r){return je.apply(this,arguments)}(this.parsedUrl,e,r)}},{key:"executeForTopCount",value:function(e,t){var r=Object(s.a)(Object(s.a)({},this.requestOptions),t);return function(e,t,r){return me.apply(this,arguments)}(this.parsedUrl,e,r)}},{key:"_normalizeQuery",value:function(e){var t=I.a.from(e);if(t.sourceSpatialReference=t.sourceSpatialReference||this.sourceSpatialReference,(this.gdbVersion||this.dynamicDataSource)&&((t=t===e?t.clone():t).gdbVersion=e.gdbVersion||this.gdbVersion,t.dynamicDataSource=e.dynamicDataSource?j.a.from(e.dynamicDataSource):this.dynamicDataSource),Object(y.j)(this.infoFor3D)&&this._queryIs3DObjectFormat(e)){(t=t===e?t.clone():t).formatOf3DObjects=null;var r,a=Object(n.a)(this.infoFor3D.queryFormats);try{for(a.s();!(r=a.n()).done;){var u=r.value;if("3D_glb"===u.id){t.formatOf3DObjects=u.id;break}"3D_gltf"!==u.id||t.formatOf3DObjects||(t.formatOf3DObjects=u.id)}}catch(k){a.e(k)}finally{a.f()}if(!t.formatOf3DObjects)throw new f.a("query:unsupported-3d-query-formats","Could not find any supported 3D object query format. Only supported formats are 3D_glb and 3D_gltf");if(Object(y.i)(t.outFields)||!t.outFields.includes("*")){t=t===e?t.clone():t,Object(y.i)(t.outFields)&&(t.outFields=[]);var s=this.infoFor3D.transformFieldRoles,i=s.originX,o=s.originY,c=s.originZ,l=s.translationX,p=s.translationY,d=s.translationZ,h=s.scaleX,b=s.scaleY,O=s.scaleZ,v=s.rotationX,m=s.rotationY,x=s.rotationZ,g=s.rotationDeg;t.outFields.push(i,o,c,l,p,d,h,b,O,v,m,x,g)}}return t}},{key:"_normalizeFields",value:function(e){if(Object(y.j)(this.fieldsIndex)&&Object(y.j)(e)){var t,r=Object(n.a)(e);try{for(r.s();!(t=r.n()).done;){var a=t.value,u=this.fieldsIndex.get(a.name);u&&Object.assign(a,u.toJSON())}}catch(s){r.e(s)}finally{r.f()}}}},{key:"_queryIs3DObjectFormat",value:function(e){return Object(y.j)(this.infoFor3D)&&e.returnGeometry&&"xyFootprint"!==e.multipatchOption&&!e.outStatistics}}]),a}(r(340).a);Object(d.a)([Object(O.b)({type:j.a})],xe.prototype,"dynamicDataSource",void 0),Object(d.a)([Object(O.b)()],xe.prototype,"fieldsIndex",void 0),Object(d.a)([Object(O.b)()],xe.prototype,"format",void 0),Object(d.a)([Object(O.b)()],xe.prototype,"gdbVersion",void 0),Object(d.a)([Object(O.b)()],xe.prototype,"infoFor3D",void 0),Object(d.a)([Object(O.b)()],xe.prototype,"sourceSpatialReference",void 0);var ge=xe=Object(d.a)([Object(v.a)("esri.tasks.QueryTask")],xe)}}]);
//# sourceMappingURL=73.640bbf77.chunk.js.map