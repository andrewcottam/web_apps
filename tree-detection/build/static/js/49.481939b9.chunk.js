(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[49,15,16],{1033:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return A}));var a=r(13),i=r(2),n=r(4),o=r(5),l=r(6),s=r(0),c=(r(114),r(82)),u=r(29),b=r(726),p=r(11),d=r(677),f=r(30),y=r(27),v=r(1),h=(r(19),r(97)),j=(r(15),r(57)),O=r(10),m=r(43),g=r(682),w=r(724),S=r(917),x=r(898),k=r(710),I=r(730),_=r(721),T=r(709),L=r(699),P=r(697),F=r(716),V=r(899),E=r(676),D=r(671),C=r(839),N=r(45),R=["Canvas/World_Dark_Gray_Base","Canvas/World_Dark_Gray_Reference","Canvas/World_Light_Gray_Base","Canvas/World_Light_Gray_Reference","Elevation/World_Hillshade","Elevation/World_Hillshade_Dark","Ocean/World_Ocean_Base","Ocean/World_Ocean_Reference","Ocean_Basemap","Reference/World_Boundaries_and_Places","Reference/World_Boundaries_and_Places_Alternate","Reference/World_Transportation","World_Imagery","World_Street_Map","World_Topo_Map"],M=function(e){Object(o.a)(r,e);var t=Object(l.a)(r);function r(){var e;Object(i.a)(this,r);for(var a=arguments.length,n=new Array(a),o=0;o<a;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).listMode="show",e.isReference=null,e.operationalLayerType="ArcGISTiledMapServiceLayer",e.resampling=!0,e.sourceJSON=null,e.spatialReference=null,e.path=null,e.sublayers=null,e.type="tile",e.url=null,e}return Object(n.a)(r,[{key:"normalizeCtorArgs",value:function(e,t){return"string"==typeof e?Object(a.a)({url:e},t):e}},{key:"load",value:function(e){var t=this,r=Object(p.j)(e)?e.signal:null;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Map Service"]},e).catch(f.u).then((function(){return t._fetchService(r)}))),Promise.resolve(this)}},{key:"attributionDataUrl",get:function(){var e,t=null==(e=this.parsedUrl)?void 0:e.path.toLowerCase();return t&&this._getDefaultAttribution(this._getMapName(t))}},{key:"readSpatialReference",value:function(e,t){return(e=e||t.tileInfo&&t.tileInfo.spatialReference)&&N.a.fromJSON(e)}},{key:"writeSublayers",value:function(e,t,r,i){if(this.loaded&&e){var n=e.slice().reverse().flatten((function(e){var t=e.sublayers;return t&&t.toArray().reverse()})).toArray(),o=[],l=Object(a.a)({writeSublayerStructure:!1},i);n.forEach((function(e){var t=e.write({},l);o.push(t)})),o.some((function(e){return Object.keys(e).length>1}))&&(t.layers=o)}}},{key:"tileServers",get:function(){return this._getDefaultTileServers(this.parsedUrl.path)}},{key:"castTileServers",value:function(e){return Array.isArray(e)?e.map((function(e){return Object(y.J)(e).path})):null}},{key:"fetchTile",value:function(e,t,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=i.signal,o=this.getTileUrl(e,t,r),l={responseType:"image",signal:n,query:Object(a.a)({},this.refreshParameters)};return Object(c.default)(o,l).then((function(e){return e.data}))}},{key:"getTileUrl",value:function(e,t,r){var i=!this.tilemapCache&&this.supportsBlankTile,n=Object(y.D)(Object(a.a)(Object(a.a)(Object(a.a)({},this.parsedUrl.query),{},{blankTile:!i&&null},this.customParameters),{},{token:this.apiKey})),o=this.tileServers;return"".concat(o&&o.length?o[t%o.length]:this.parsedUrl.path,"/tile/").concat(e,"/").concat(t,"/").concat(r).concat(n?"?"+n:"")}},{key:"_fetchService",value:function(e){var t=this;return new Promise((function(r,i){if(t.sourceJSON){if(null!=t.sourceJSON.bandCount&&null!=t.sourceJSON.pixelSizeX)throw new u.a("tile-layer:unsupported-url","use ImageryTileLayer to open a tiled image service");r({data:t.sourceJSON})}else{if(!t.parsedUrl)throw new u.a("tile-layer:undefined-url","layer's url is not defined");var n=Object(E.e)(t.parsedUrl.path);if(Object(p.j)(n)&&"ImageServer"===n.serverType)throw new u.a("tile-layer:unsupported-url","use ImageryTileLayer to open a tiled image service");Object(c.default)(t.parsedUrl.path,{query:Object(a.a)(Object(a.a)(Object(a.a)({f:"json"},t.parsedUrl.query),t.customParameters),{},{token:t.apiKey}),responseType:"json",signal:e}).then(r,i)}})).then((function(r){if(r.ssl&&(t.url=t.url.replace(/^http:/i,"https:")),t.sourceJSON=r.data,t.read(r.data,{origin:"service",url:t.parsedUrl}),10.1===t.version&&!Object(E.c)(t.url))return t._fetchServerVersion(t.url,e).then((function(e){t.read({currentVersion:e})})).catch((function(){}))}))}},{key:"_fetchServerVersion",value:function(e,t){if(!Object(E.b)(e))return Promise.reject();var r=e.replace(/(.*\/rest)\/.*/i,"$1")+"/info";return Object(c.default)(r,{query:Object(a.a)(Object(a.a)({f:"json"},this.customParameters),{},{token:this.apiKey}),responseType:"json",signal:t}).then((function(e){if(e.data&&e.data.currentVersion)return e.data.currentVersion;throw new u.a("tile-layer:version-not-available")}))}},{key:"_getMapName",value:function(e){var t=e.match(/^(?:https?:)?\/\/(server\.arcgisonline\.com|services\.arcgisonline\.com|ibasemaps-api\.arcgis\.com)\/arcgis\/rest\/services\/([^\/]+(\/[^\/]+)*)\/mapserver/i);return t&&t[2]}},{key:"_getDefaultAttribution",value:function(e){if(e){var t;e=e.toLowerCase();for(var r=0,a=R.length;r<a;r++)if((t=R[r]).toLowerCase().indexOf(e)>-1)return Object(y.z)("//static.arcgis.com/attribution/"+t)}}},{key:"_getDefaultTileServers",value:function(e){var t=-1!==e.search(/^(?:https?:)?\/\/server\.arcgisonline\.com/i),r=-1!==e.search(/^(?:https?:)?\/\/services\.arcgisonline\.com/i);return t||r?[e,e.replace(t?/server\.arcgisonline/i:/services\.arcgisonline/i,t?"services.arcgisonline":"server.arcgisonline")]:[]}},{key:"hasOverriddenFetchTile",get:function(){return!this.fetchTile.__isDefault__}}]),r}(Object(I.a)(Object(V.a)(Object(F.a)(Object(T.a)(Object(L.a)(Object(S.a)(Object(x.a)(Object(k.a)(Object(d.a)(Object(b.b)(Object(P.a)(Object(w.a)(Object(_.a)(g.a))))))))))))));Object(s.a)([Object(v.b)({readOnly:!0})],M.prototype,"attributionDataUrl",null),Object(s.a)([Object(v.b)({type:["show","hide","hide-children"]})],M.prototype,"listMode",void 0),Object(s.a)([Object(v.b)({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:function(){return{enabled:!1}}}}})],M.prototype,"isReference",void 0),Object(s.a)([Object(v.b)({readOnly:!0,type:["ArcGISTiledMapServiceLayer"]})],M.prototype,"operationalLayerType",void 0),Object(s.a)([Object(v.b)({type:Boolean})],M.prototype,"resampling",void 0),Object(s.a)([Object(v.b)()],M.prototype,"sourceJSON",void 0),Object(s.a)([Object(v.b)({type:N.a})],M.prototype,"spatialReference",void 0),Object(s.a)([Object(j.a)("spatialReference",["spatialReference","tileInfo"])],M.prototype,"readSpatialReference",null),Object(s.a)([Object(v.b)({type:String,json:{origins:{"web-scene":{read:!0,write:!0}},read:!1}})],M.prototype,"path",void 0),Object(s.a)([Object(v.b)({readOnly:!0})],M.prototype,"sublayers",void 0),Object(s.a)([Object(m.a)("sublayers",{layers:{type:[C.a]}})],M.prototype,"writeSublayers",null),Object(s.a)([Object(v.b)({json:{read:!1,write:!1}})],M.prototype,"popupEnabled",void 0),Object(s.a)([Object(v.b)()],M.prototype,"tileServers",null),Object(s.a)([Object(h.a)("tileServers")],M.prototype,"castTileServers",null),Object(s.a)([Object(v.b)({readOnly:!0,json:{read:!1}})],M.prototype,"type",void 0),Object(s.a)([Object(v.b)(D.n)],M.prototype,"url",void 0),(M=Object(s.a)([Object(O.a)("esri.layers.TileLayer")],M)).prototype.fetchTile.__isDefault__=!0;var A=M},660:function(e,t,r){"use strict";r.d(t,"a",(function(){return f}));var a=r(2),i=r(5),n=r(6),o=r(0),l=r(42),s=r(26),c=r(1),u=(r(19),r(14),r(15),r(31)),b=r(10),p=new l.a({inherited:"inherited",codedValue:"coded-value",range:"range"}),d=function(e){Object(i.a)(r,e);var t=Object(n.a)(r);function r(e){var i;return Object(a.a)(this,r),(i=t.call(this,e)).name=null,i.type=null,i}return r}(s.a);Object(o.a)([Object(c.b)({type:String,json:{write:!0}})],d.prototype,"name",void 0),Object(o.a)([Object(u.a)(p)],d.prototype,"type",void 0);var f=d=Object(o.a)([Object(b.a)("esri.layers.support.Domain")],d)},661:function(e,t,r){"use strict";r.d(t,"a",(function(){return d}));var a,i=r(2),n=r(4),o=r(5),l=r(6),s=r(0),c=(r(1),r(19),r(14),r(15),r(31)),u=r(10),b=r(660),p=a=function(e){Object(o.a)(r,e);var t=Object(l.a)(r);function r(e){var a;return Object(i.a)(this,r),(a=t.call(this,e)).type="inherited",a}return Object(n.a)(r,[{key:"clone",value:function(){return new a}}]),r}(b.a);Object(s.a)([Object(c.a)({inherited:"inherited"})],p.prototype,"type",void 0);var d=p=a=Object(s.a)([Object(u.a)("esri.layers.support.InheritedDomain")],p)},662:function(e,t,r){"use strict";r.d(t,"a",(function(){return f}));var a,i=r(2),n=r(4),o=r(5),l=r(6),s=r(0),c=r(1),u=(r(19),r(14),r(15),r(31)),b=r(10),p=r(660),d=a=function(e){Object(o.a)(r,e);var t=Object(l.a)(r);function r(e){var a;return Object(i.a)(this,r),(a=t.call(this,e)).maxValue=null,a.minValue=null,a.type="range",a}return Object(n.a)(r,[{key:"clone",value:function(){return new a({maxValue:this.maxValue,minValue:this.minValue,name:this.name})}}]),r}(p.a);Object(s.a)([Object(c.b)({type:Number,json:{type:[Number],read:{source:"range",reader:function(e,t){return t.range&&t.range[1]}},write:{enabled:!1,overridePolicy:function(){return{enabled:null!=this.maxValue&&null==this.minValue}},target:"range",writer:function(e,t,r){t[r]=[this.minValue||0,e]}}}})],d.prototype,"maxValue",void 0),Object(s.a)([Object(c.b)({type:Number,json:{type:[Number],read:{source:"range",reader:function(e,t){return t.range&&t.range[0]}},write:{target:"range",writer:function(e,t,r){t[r]=[e,this.maxValue||0]}}}})],d.prototype,"minValue",void 0),Object(s.a)([Object(u.a)({range:"range"})],d.prototype,"type",void 0);var f=d=a=Object(s.a)([Object(b.a)("esri.layers.support.RangeDomain")],d)},664:function(e,t,r){"use strict";r.d(t,"a",(function(){return O}));var a,i=r(2),n=r(4),o=r(5),l=r(6),s=r(0),c=r(18),u=r(1),b=(r(14),r(19),r(15),r(31)),p=r(10),d=r(26),f=a=function(e){Object(o.a)(r,e);var t=Object(l.a)(r);function r(e){var a;return Object(i.a)(this,r),(a=t.call(this,e)).name=null,a.code=null,a}return Object(n.a)(r,[{key:"clone",value:function(){return new a({name:this.name,code:this.code})}}]),r}(d.a);Object(s.a)([Object(u.b)({type:String,json:{write:!0}})],f.prototype,"name",void 0),Object(s.a)([Object(u.b)({type:[String,Number],json:{write:!0}})],f.prototype,"code",void 0);var y,v=f=a=Object(s.a)([Object(p.a)("esri.layers.support.CodedValue")],f),h=r(660),j=y=function(e){Object(o.a)(r,e);var t=Object(l.a)(r);function r(e){var a;return Object(i.a)(this,r),(a=t.call(this,e)).codedValues=null,a.type="coded-value",a}return Object(n.a)(r,[{key:"getName",value:function(e){var t=null;if(this.codedValues){var r=String(e);this.codedValues.some((function(e){return String(e.code)===r&&(t=e.name),!!t}))}return t}},{key:"clone",value:function(){return new y({codedValues:Object(c.a)(this.codedValues),name:this.name})}}]),r}(h.a);Object(s.a)([Object(u.b)({type:[v],json:{write:!0}})],j.prototype,"codedValues",void 0),Object(s.a)([Object(b.a)({codedValue:"coded-value"})],j.prototype,"type",void 0);var O=j=y=Object(s.a)([Object(p.a)("esri.layers.support.CodedValueDomain")],j)},666:function(e,t,r){"use strict";r.d(t,"a",(function(){return m}));var a,i=r(2),n=r(4),o=r(5),l=r(6),s=r(0),c=r(42),u=r(26),b=r(1),p=(r(19),r(14)),d=(r(15),r(31)),f=r(57),y=r(10),v=r(679),h=r(690),j=new c.a({binary:"binary",coordinate:"coordinate",countOrAmount:"count-or-amount",dateAndTime:"date-and-time",description:"description",locationOrPlaceName:"location-or-place-name",measurement:"measurement",nameOrTitle:"name-or-title",none:"none",orderedOrRanked:"ordered-or-ranked",percentageOrRatio:"percentage-or-ratio",typeOrCategory:"type-or-category",uniqueIdentifier:"unique-identifier"}),O=a=function(e){Object(o.a)(r,e);var t=Object(l.a)(r);function r(e){var a;return Object(i.a)(this,r),(a=t.call(this,e)).alias=null,a.defaultValue=void 0,a.description=null,a.domain=null,a.editable=!0,a.length=-1,a.name=null,a.nullable=!0,a.type=null,a.valueType=null,a}return Object(n.a)(r,[{key:"readDescription",value:function(e,t){var r,a=t.description;try{r=JSON.parse(a)}catch(i){}return r?r.value:null}},{key:"readValueType",value:function(e,t){var r,a=t.description;try{r=JSON.parse(a)}catch(i){}return r?j.fromJSON(r.fieldValueType):null}},{key:"clone",value:function(){return new a({alias:this.alias,defaultValue:this.defaultValue,description:this.description,domain:this.domain&&this.domain.clone()||null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type,valueType:this.valueType})}}]),r}(u.a);Object(s.a)([Object(b.b)({type:String,json:{write:!0}})],O.prototype,"alias",void 0),Object(s.a)([Object(b.b)({type:[String,Number],json:{write:{allowNull:!0}}})],O.prototype,"defaultValue",void 0),Object(s.a)([Object(b.b)()],O.prototype,"description",void 0),Object(s.a)([Object(f.a)("description")],O.prototype,"readDescription",null),Object(s.a)([Object(b.b)({types:v.b,json:{read:{reader:v.a},write:!0}})],O.prototype,"domain",void 0),Object(s.a)([Object(b.b)({type:Boolean,json:{write:!0}})],O.prototype,"editable",void 0),Object(s.a)([Object(b.b)({type:p.a,json:{write:!0}})],O.prototype,"length",void 0),Object(s.a)([Object(b.b)({type:String,json:{write:!0}})],O.prototype,"name",void 0),Object(s.a)([Object(b.b)({type:Boolean,json:{write:!0}})],O.prototype,"nullable",void 0),Object(s.a)([Object(d.a)(h.a)],O.prototype,"type",void 0),Object(s.a)([Object(b.b)()],O.prototype,"valueType",void 0),Object(s.a)([Object(f.a)("valueType",["description"])],O.prototype,"readValueType",null);var m=O=a=Object(s.a)([Object(y.a)("esri.layers.support.Field")],O)},670:function(e,t,r){"use strict";r.d(t,"a",(function(){return P}));var a,i=r(2),n=r(4),o=r(5),l=r(6),s=r(0),c=r(114),u=r(665),b=r(42),p=r(26),d=r(18),f=r(11),y=r(1),v=r(97),h=(r(19),r(15),r(31)),j=r(10),O=r(43),m=r(14),g=r(62),w=r(673),S=r(717),x=r(714),k=r(45),I=r(48),_=new b.a({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),T=new b.a({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"}),L=a=function(e){Object(o.a)(r,e);var t=Object(l.a)(r);function r(e){var a;return Object(i.a)(this,r),(a=t.call(this,e)).aggregateIds=null,a.cacheHint=void 0,a.datumTransformation=null,a.distance=void 0,a.dynamicDataSource=void 0,a.formatOf3DObjects=null,a.gdbVersion=null,a.geometry=null,a.geometryPrecision=void 0,a.groupByFieldsForStatistics=null,a.having=null,a.historicMoment=null,a.maxAllowableOffset=void 0,a.maxRecordCountFactor=1,a.multipatchOption=null,a.num=void 0,a.objectIds=null,a.orderByFields=null,a.outFields=null,a.outSpatialReference=null,a.outStatistics=null,a.parameterValues=null,a.pixelSize=null,a.quantizationParameters=null,a.rangeValues=null,a.relationParameter=null,a.resultType=null,a.returnCentroid=!1,a.returnDistinctValues=!1,a.returnExceededLimitFeatures=!0,a.returnGeometry=!1,a.returnQueryGeometry=!1,a.returnM=void 0,a.returnZ=void 0,a.sourceSpatialReference=null,a.spatialRelationship="intersects",a.start=void 0,a.sqlFormat=null,a.text=null,a.timeExtent=null,a.timeReferenceUnknownClient=!1,a.units=null,a.where=null,a}return Object(n.a)(r,[{key:"castDatumTransformation",value:function(e){return"number"==typeof e||"object"==typeof e?e:null}},{key:"writeHistoricMoment",value:function(e,t){t.historicMoment=e&&e.getTime()}},{key:"writeParameterValues",value:function(e,t){if(e){var r={};for(var a in e){var i=e[a];Array.isArray(i)?r[a]=i.map((function(e){return e instanceof Date?e.getTime():e})):i instanceof Date?r[a]=i.getTime():r[a]=i}t.parameterValues=r}}},{key:"writeStart",value:function(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10,t.where="1=1"}},{key:"writeWhere",value:function(e,t){t.where=e||"1=1"}},{key:"clone",value:function(){return new a(Object(d.a)({aggregateIds:this.aggregateIds,cacheHint:this.cacheHint,datumTransformation:this.datumTransformation,distance:this.distance,gdbVersion:this.gdbVersion,geometry:this.geometry,geometryPrecision:this.geometryPrecision,groupByFieldsForStatistics:this.groupByFieldsForStatistics,having:this.having,historicMoment:Object(f.j)(this.historicMoment)?new Date(this.historicMoment.getTime()):null,maxAllowableOffset:this.maxAllowableOffset,maxRecordCountFactor:this.maxRecordCountFactor,multipatchOption:this.multipatchOption,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,outStatistics:this.outStatistics,parameterValues:this.parameterValues,pixelSize:this.pixelSize,quantizationParameters:this.quantizationParameters,rangeValues:this.rangeValues,relationParameter:this.relationParameter,resultType:this.resultType,returnDistinctValues:this.returnDistinctValues,returnGeometry:this.returnGeometry,returnCentroid:this.returnCentroid,returnExceededLimitFeatures:this.returnExceededLimitFeatures,returnQueryGeometry:this.returnQueryGeometry,returnM:this.returnM,returnZ:this.returnZ,dynamicDataSource:this.dynamicDataSource,sourceSpatialReference:this.sourceSpatialReference,spatialRelationship:this.spatialRelationship,start:this.start,sqlFormat:this.sqlFormat,text:this.text,timeExtent:this.timeExtent,timeReferenceUnknownClient:this.timeReferenceUnknownClient,units:this.units,where:this.where}))}}],[{key:"from",value:function(e){return Object(m.d)(a,e)}}]),r}(p.a);L.MAX_MAX_RECORD_COUNT_FACTOR=5,Object(s.a)([Object(y.b)({json:{write:!0}})],L.prototype,"aggregateIds",void 0),Object(s.a)([Object(y.b)({type:Boolean,json:{write:!0}})],L.prototype,"cacheHint",void 0),Object(s.a)([Object(y.b)({json:{write:!0}})],L.prototype,"datumTransformation",void 0),Object(s.a)([Object(v.a)("datumTransformation")],L.prototype,"castDatumTransformation",null),Object(s.a)([Object(y.b)({type:Number,json:{write:{overridePolicy:function(e){return{enabled:e>0}}}}})],L.prototype,"distance",void 0),Object(s.a)([Object(y.b)({type:w.a,json:{write:!0}})],L.prototype,"dynamicDataSource",void 0),Object(s.a)([Object(y.b)({type:String,json:{write:!0}})],L.prototype,"formatOf3DObjects",void 0),Object(s.a)([Object(y.b)({type:String,json:{write:!0}})],L.prototype,"gdbVersion",void 0),Object(s.a)([Object(y.b)({types:c.a,json:{read:g.a,write:!0}})],L.prototype,"geometry",void 0),Object(s.a)([Object(y.b)({type:Number,json:{write:!0}})],L.prototype,"geometryPrecision",void 0),Object(s.a)([Object(y.b)({type:[String],json:{write:!0}})],L.prototype,"groupByFieldsForStatistics",void 0),Object(s.a)([Object(y.b)({type:String,json:{write:!0}})],L.prototype,"having",void 0),Object(s.a)([Object(y.b)({type:Date})],L.prototype,"historicMoment",void 0),Object(s.a)([Object(O.a)("historicMoment")],L.prototype,"writeHistoricMoment",null),Object(s.a)([Object(y.b)({type:Number,json:{write:!0}})],L.prototype,"maxAllowableOffset",void 0),Object(s.a)([Object(y.b)({type:Number,cast:function(e){return e<1?1:e>a.MAX_MAX_RECORD_COUNT_FACTOR?a.MAX_MAX_RECORD_COUNT_FACTOR:e},json:{write:{overridePolicy:function(e){return{enabled:e>1}}}}})],L.prototype,"maxRecordCountFactor",void 0),Object(s.a)([Object(y.b)({type:["xyFootprint"],json:{write:!0}})],L.prototype,"multipatchOption",void 0),Object(s.a)([Object(y.b)({type:Number,json:{read:{source:"resultRecordCount"}}})],L.prototype,"num",void 0),Object(s.a)([Object(y.b)({json:{write:!0}})],L.prototype,"objectIds",void 0),Object(s.a)([Object(y.b)({type:[String],json:{write:!0}})],L.prototype,"orderByFields",void 0),Object(s.a)([Object(y.b)({type:[String],json:{write:!0}})],L.prototype,"outFields",void 0),Object(s.a)([Object(y.b)({type:k.a,json:{name:"outSR",write:!0}})],L.prototype,"outSpatialReference",void 0),Object(s.a)([Object(y.b)({type:[x.a],json:{write:{enabled:!0,overridePolicy:function(){return{enabled:Object(f.j)(this.outStatistics)&&this.outStatistics.length>0}}}}})],L.prototype,"outStatistics",void 0),Object(s.a)([Object(y.b)({json:{write:!0}})],L.prototype,"parameterValues",void 0),Object(s.a)([Object(O.a)("parameterValues")],L.prototype,"writeParameterValues",null),Object(s.a)([Object(y.b)({type:I.a,json:{write:!0}})],L.prototype,"pixelSize",void 0),Object(s.a)([Object(y.b)({type:S.a,json:{write:!0}})],L.prototype,"quantizationParameters",void 0),Object(s.a)([Object(y.b)({type:[Object],json:{write:!0}})],L.prototype,"rangeValues",void 0),Object(s.a)([Object(y.b)({type:String,json:{read:{source:"relationParam"},write:{target:"relationParam",overridePolicy:function(){return{enabled:"relation"===this.spatialRelationship}}}}})],L.prototype,"relationParameter",void 0),Object(s.a)([Object(y.b)({type:String,json:{write:!0}})],L.prototype,"resultType",void 0),Object(s.a)([Object(y.b)({type:Boolean,json:{default:!1,write:!0}})],L.prototype,"returnCentroid",void 0),Object(s.a)([Object(y.b)({type:Boolean,json:{default:!1,write:!0}})],L.prototype,"returnDistinctValues",void 0),Object(s.a)([Object(y.b)({type:Boolean,json:{default:!0,write:!0}})],L.prototype,"returnExceededLimitFeatures",void 0),Object(s.a)([Object(y.b)({type:Boolean,json:{write:!0}})],L.prototype,"returnGeometry",void 0),Object(s.a)([Object(y.b)({type:Boolean,json:{default:!1,write:!0}})],L.prototype,"returnQueryGeometry",void 0),Object(s.a)([Object(y.b)({type:Boolean,json:{default:!1,write:!0}})],L.prototype,"returnM",void 0),Object(s.a)([Object(y.b)({type:Boolean,json:{write:{overridePolicy:function(e){return{enabled:e}}}}})],L.prototype,"returnZ",void 0),Object(s.a)([Object(y.b)({type:k.a,json:{write:!0}})],L.prototype,"sourceSpatialReference",void 0),Object(s.a)([Object(h.a)(_,{ignoreUnknown:!1,name:"spatialRel"})],L.prototype,"spatialRelationship",void 0),Object(s.a)([Object(y.b)({type:Number,json:{read:{source:"resultOffset"}}})],L.prototype,"start",void 0),Object(s.a)([Object(O.a)("start"),Object(O.a)("num")],L.prototype,"writeStart",null),Object(s.a)([Object(y.b)({type:String,json:{write:!0}})],L.prototype,"sqlFormat",void 0),Object(s.a)([Object(y.b)({type:String,json:{write:!0}})],L.prototype,"text",void 0),Object(s.a)([Object(y.b)({type:u.a,json:{write:!0}})],L.prototype,"timeExtent",void 0),Object(s.a)([Object(y.b)({type:Boolean,json:{default:!1,write:!0}})],L.prototype,"timeReferenceUnknownClient",void 0),Object(s.a)([Object(h.a)(T,{ignoreUnknown:!1}),Object(y.b)({json:{write:{overridePolicy:function(e){return{enabled:e&&this.distance>0}}}}})],L.prototype,"units",void 0),Object(s.a)([Object(y.b)({type:String,json:{write:{overridePolicy:function(e){return{enabled:null!=e||this.start>0}}}}})],L.prototype,"where",void 0),Object(s.a)([Object(O.a)("where")],L.prototype,"writeWhere",null);var P=L=a=Object(s.a)([Object(j.a)("esri.rest.support.Query")],L)},672:function(e,t,r){"use strict";r.d(t,"a",(function(){return l}));var a=r(21),i=r(2),n=r(4);function o(e){return"date"===e.type||"esriFieldTypeDate"===e.type}var l=function(){function e(t){if(Object(i.a)(this,e),this.fields=t,this._fieldsMap=new Map,this._dateFieldsSet=new Set,this.dateFields=[],t){var r,n=[],l=Object(a.a)(t);try{for(l.s();!(r=l.n()).done;){var c=r.value,u=c&&c.name;if(u){var b=s(u);this._fieldsMap.set(u,c),this._fieldsMap.set(b,c),n.push(b),o(c)&&(this.dateFields.push(c),this._dateFieldsSet.add(c))}}}catch(p){l.e(p)}finally{l.f()}n.sort(),this.uid=n.join(",")}}return Object(n.a)(e,[{key:"destroy",value:function(){this._fieldsMap.clear()}},{key:"has",value:function(e){return null!=this.get(e)}},{key:"get",value:function(e){return null!=e?this._fieldsMap.get(e)||this._fieldsMap.get(s(e)):void 0}},{key:"isDateField",value:function(e){return this._dateFieldsSet.has(this.get(e))}},{key:"normalizeFieldName",value:function(e){var t=this.get(e);if(t)return t.name}}]),e}();function s(e){return e.toLowerCase().trim()}},673:function(e,t,r){"use strict";r.d(t,"a",(function(){return N}));var a,i,n=r(2),o=r(4),l=r(5),s=r(6),c=r(0),u=r(42),b=r(26),p=r(1),d=(r(19),r(97)),f=(r(15),r(31)),y=r(57),v=r(10),h=r(14),j=r(212),O=r(666),m=r(711),g=(r(114),r(45)),w=r(236),S=a=function(e){Object(l.a)(r,e);var t=Object(s.a)(r);function r(e){var a;return Object(n.a)(this,r),(a=t.call(this,e)).type="query-table",a}return Object(o.a)(r,[{key:"clone",value:function(){var e,t=this.workspaceId,r=this.query,i=this.oidFields,n=this.spatialReference,o=this.geometryType,l={workspaceId:t,query:r,oidFields:i,spatialReference:null!=(e=null==n?void 0:n.clone())?e:void 0,geometryType:o};return new a(l)}}]),r}(b.a);Object(c.a)([Object(f.a)({queryTable:"query-table"})],S.prototype,"type",void 0),Object(c.a)([Object(p.b)({type:String,json:{write:!0}})],S.prototype,"workspaceId",void 0),Object(c.a)([Object(p.b)({type:String,json:{write:!0}})],S.prototype,"query",void 0),Object(c.a)([Object(p.b)({type:String,json:{write:!0}})],S.prototype,"oidFields",void 0),Object(c.a)([Object(p.b)({type:g.a,json:{write:!0}})],S.prototype,"spatialReference",void 0),Object(c.a)([Object(f.a)(w.a)],S.prototype,"geometryType",void 0),S=a=Object(c.a)([Object(v.a)("esri.layers.support.source.QueryTableDataSource")],S);var x,k=i=function(e){Object(l.a)(r,e);var t=Object(s.a)(r);function r(e){var a;return Object(n.a)(this,r),(a=t.call(this,e)).type="raster",a}return Object(o.a)(r,[{key:"clone",value:function(){var e=this.workspaceId,t=this.dataSourceName;return new i({workspaceId:e,dataSourceName:t})}}]),r}(b.a);Object(c.a)([Object(f.a)({raster:"raster"})],k.prototype,"type",void 0),Object(c.a)([Object(p.b)({type:String,json:{write:!0}})],k.prototype,"dataSourceName",void 0),Object(c.a)([Object(p.b)({type:String,json:{write:!0}})],k.prototype,"workspaceId",void 0),k=i=Object(c.a)([Object(v.a)("esri.layers.support.source.RasterDataSource")],k);var I,_,T=x=function(e){Object(l.a)(r,e);var t=Object(s.a)(r);function r(e){var a;return Object(n.a)(this,r),(a=t.call(this,e)).type="table",a}return Object(o.a)(r,[{key:"clone",value:function(){var e=this.workspaceId,t=this.gdbVersion,r=this.dataSourceName;return new x({workspaceId:e,gdbVersion:t,dataSourceName:r})}}]),r}(b.a);Object(c.a)([Object(f.a)({table:"table"})],T.prototype,"type",void 0),Object(c.a)([Object(p.b)({type:String,json:{write:!0}})],T.prototype,"workspaceId",void 0),Object(c.a)([Object(p.b)({type:String,json:{write:!0}})],T.prototype,"gdbVersion",void 0),Object(c.a)([Object(p.b)({type:String,json:{write:!0}})],T.prototype,"dataSourceName",void 0),T=x=Object(c.a)([Object(v.a)("esri.layers.support.source.TableDataSource")],T);var L=Object(u.b)()({esriLeftInnerJoin:"left-inner-join",esriLeftOuterJoin:"left-outer-join"}),P=I=function(e){Object(l.a)(r,e);var t=Object(s.a)(r);function r(e){var a;return Object(n.a)(this,r),(a=t.call(this,e)).type="join-table",a}return Object(o.a)(r,[{key:"readLeftTableSource",value:function(e,t,r){return V()(e,t,r)}},{key:"castLeftTableSource",value:function(e){return Object(h.k)(D(),e)}},{key:"readRightTableSource",value:function(e,t,r){return V()(e,t,r)}},{key:"castRightTableSource",value:function(e){return Object(h.k)(D(),e)}},{key:"clone",value:function(){var e,t,r=this.leftTableKey,a=this.rightTableKey,i=this.leftTableSource,n=this.rightTableSource,o=this.joinType,l={leftTableKey:r,rightTableKey:a,leftTableSource:null!=(e=null==i?void 0:i.clone())?e:void 0,rightTableSource:null!=(t=null==n?void 0:n.clone())?t:void 0,joinType:o};return new I(l)}}]),r}(b.a);Object(c.a)([Object(f.a)({joinTable:"join-table"})],P.prototype,"type",void 0),Object(c.a)([Object(p.b)({type:String,json:{write:!0}})],P.prototype,"leftTableKey",void 0),Object(c.a)([Object(p.b)({type:String,json:{write:!0}})],P.prototype,"rightTableKey",void 0),Object(c.a)([Object(p.b)({json:{write:!0}})],P.prototype,"leftTableSource",void 0),Object(c.a)([Object(y.a)("leftTableSource")],P.prototype,"readLeftTableSource",null),Object(c.a)([Object(d.a)("leftTableSource")],P.prototype,"castLeftTableSource",null),Object(c.a)([Object(p.b)({json:{write:!0}})],P.prototype,"rightTableSource",void 0),Object(c.a)([Object(y.a)("rightTableSource")],P.prototype,"readRightTableSource",null),Object(c.a)([Object(d.a)("rightTableSource")],P.prototype,"castRightTableSource",null),Object(c.a)([Object(f.a)(L)],P.prototype,"joinType",void 0),P=I=Object(c.a)([Object(v.a)("esri.layers.support.source.JoinTableDataSource")],P);var F=null;function V(){return F||(F=Object(j.b)({types:D()})),F}var E=null;function D(){return E||(E={key:"type",base:null,typeMap:{"data-layer":N,"map-layer":m.a}}),E}var C={key:"type",base:null,typeMap:{"join-table":P,"query-table":S,raster:k,table:T}},N=_=function(e){Object(l.a)(r,e);var t=Object(s.a)(r);function r(e){var a;return Object(n.a)(this,r),(a=t.call(this,e)).type="data-layer",a}return Object(o.a)(r,[{key:"clone",value:function(){var e=this.fields,t=this.dataSource;return new _({fields:e,dataSource:t})}}]),r}(b.a);Object(c.a)([Object(f.a)({dataLayer:"data-layer"})],N.prototype,"type",void 0),Object(c.a)([Object(p.b)({type:[O.a],json:{write:!0}})],N.prototype,"fields",void 0),Object(c.a)([Object(p.b)({types:C,json:{write:!0}})],N.prototype,"dataSource",void 0),(N=_=Object(c.a)([Object(v.a)("esri.layers.support.source.DataLayerSource")],N)).from=Object(h.m)(N)},675:function(e,t,r){"use strict";r.d(t,"a",(function(){return T}));var a,i=r(2),n=r(4),o=r(5),l=r(6),s=r(0),c=r(332),u=r(42),b=r(26),p=r(18),d=r(1),f=(r(14),r(19),r(15),r(57)),y=r(10),v=r(43),h=r(693),j=a=function(e){Object(o.a)(r,e);var t=Object(l.a)(r);function r(){var e;return Object(i.a)(this,r),(e=t.apply(this,arguments)).expression=null,e.title=null,e.value=null,e}return Object(n.a)(r,[{key:"readExpression",value:function(e,t){return t.value?Object(h.a)(t.value):e}},{key:"writeExpression",value:function(e,t,r){null!=this.value&&(e=Object(h.a)(this.value)),t[r]=e}},{key:"clone",value:function(){return new a({expression:this.expression,title:this.title,value:this.value})}}]),r}(b.a);Object(s.a)([Object(d.b)({type:String,json:{write:{allowNull:!0}}})],j.prototype,"expression",void 0),Object(s.a)([Object(f.a)("expression",["expression","value"])],j.prototype,"readExpression",null),Object(s.a)([Object(v.a)("expression")],j.prototype,"writeExpression",null),Object(s.a)([Object(d.b)({type:String,json:{write:!0,origins:{"web-scene":{write:!1}}}})],j.prototype,"title",void 0),Object(s.a)([Object(d.b)({json:{read:!1,write:!1}})],j.prototype,"value",void 0);var O,m=j=a=Object(s.a)([Object(y.a)("esri.layers.support.LabelExpressionInfo")],j),g=r(725),w=r(753),S=new u.a({esriServerPointLabelPlacementAboveCenter:"above-center",esriServerPointLabelPlacementAboveLeft:"above-left",esriServerPointLabelPlacementAboveRight:"above-right",esriServerPointLabelPlacementBelowCenter:"below-center",esriServerPointLabelPlacementBelowLeft:"below-left",esriServerPointLabelPlacementBelowRight:"below-right",esriServerPointLabelPlacementCenterCenter:"center-center",esriServerPointLabelPlacementCenterLeft:"center-left",esriServerPointLabelPlacementCenterRight:"center-right",esriServerLinePlacementAboveAfter:"above-after",esriServerLinePlacementAboveAlong:"above-along",esriServerLinePlacementAboveBefore:"above-before",esriServerLinePlacementAboveStart:"above-start",esriServerLinePlacementAboveEnd:"above-end",esriServerLinePlacementBelowAfter:"below-after",esriServerLinePlacementBelowAlong:"below-along",esriServerLinePlacementBelowBefore:"below-before",esriServerLinePlacementBelowStart:"below-start",esriServerLinePlacementBelowEnd:"below-end",esriServerLinePlacementCenterAfter:"center-after",esriServerLinePlacementCenterAlong:"center-along",esriServerLinePlacementCenterBefore:"center-before",esriServerLinePlacementCenterStart:"center-start",esriServerLinePlacementCenterEnd:"center-end",esriServerPolygonPlacementAlwaysHorizontal:"always-horizontal"},{ignoreUnknown:!0});function x(e){return!e||"service"!==e.origin&&!k(e.layer)}function k(e){return"map-image"===(null==e?void 0:e.type)}function I(e){var t,r;return!!k(e)&&!(null==(t=e.capabilities)||null==(r=t.exportMap)||!r.supportsArcadeExpressionForLabeling)}var _=O=function(e){Object(o.a)(r,e);var t=Object(l.a)(r);function r(e){var a;return Object(i.a)(this,r),(a=t.call(this,e)).type="label",a.name=null,a.deconflictionStrategy="static",a.labelExpression=null,a.labelExpressionInfo=null,a.labelPlacement=null,a.maxScale=0,a.minScale=0,a.symbol=g.a,a.useCodedValues=void 0,a.where=null,a}return Object(n.a)(r,[{key:"readLabelExpression",value:function(e,t){var r=t.labelExpressionInfo;if(!r||!r.value&&!r.expression)return e}},{key:"writeLabelExpression",value:function(e,t,r){if(this.labelExpressionInfo)if(null!=this.labelExpressionInfo.value)e=Object(h.f)(this.labelExpressionInfo.value);else if(null!=this.labelExpressionInfo.expression){var a=Object(h.e)(this.labelExpressionInfo.expression);a&&(e="["+a+"]")}null!=e&&(t[r]=e)}},{key:"writeLabelExpressionInfo",value:function(e,t,r,a){if(null==e&&null!=this.labelExpression&&x(a))e=new m({expression:this.getLabelExpressionArcade()});else if(!e)return;var i=e.toJSON(a);i.expression&&(t[r]=i)}},{key:"writeMaxScale",value:function(e,t){(e||this.minScale)&&(t.maxScale=e)}},{key:"writeMinScale",value:function(e,t){(e||this.maxScale)&&(t.minScale=e)}},{key:"getLabelExpression",value:function(){return Object(h.b)(this)}},{key:"getLabelExpressionArcade",value:function(){return Object(h.c)(this)}},{key:"getLabelExpressionSingleField",value:function(){return Object(h.d)(this)}},{key:"hash",value:function(){return JSON.stringify(this)}},{key:"clone",value:function(){return new O({deconflictionStrategy:this.deconflictionStrategy,labelExpression:this.labelExpression,labelExpressionInfo:Object(p.a)(this.labelExpressionInfo),labelPlacement:this.labelPlacement,maxScale:this.maxScale,minScale:this.minScale,name:this.name,symbol:Object(p.a)(this.symbol),where:this.where,useCodedValues:this.useCodedValues})}}],[{key:"evaluateWhere",value:function(e,t){var r=function(e,t,r){switch(t){case"=":return e==r;case"<>":return e!=r;case">":return e>r;case">=":return e>=r;case"<":return e<r;case"<=":return e<=r}return!1};try{if(null==e)return!0;var a=e.split(" ");if(3===a.length)return r(t[a[0]],a[1],a[2]);if(7===a.length){var i=r(t[a[0]],a[1],a[2]),n=a[3],o=r(t[a[4]],a[5],a[6]);switch(n){case"AND":return i&&o;case"OR":return i||o}}return!1}catch(l){console.log("Error.: can't parse = "+e)}}}]),r}(b.a);Object(s.a)([Object(d.b)({type:String,json:{write:!0}})],_.prototype,"name",void 0),Object(s.a)([Object(d.b)({type:String,json:{write:!0,default:"static",origins:{"web-scene":{write:!1}}}})],_.prototype,"deconflictionStrategy",void 0),Object(s.a)([Object(d.b)({type:String,json:{write:{overridePolicy:function(e,t,r){return this.labelExpressionInfo&&"service"===(null==r?void 0:r.origin)&&I(r.layer)?{enabled:!1}:{allowNull:!0}}}}})],_.prototype,"labelExpression",void 0),Object(s.a)([Object(f.a)("labelExpression")],_.prototype,"readLabelExpression",null),Object(s.a)([Object(v.a)("labelExpression")],_.prototype,"writeLabelExpression",null),Object(s.a)([Object(d.b)({type:m,json:{write:{overridePolicy:function(e,t,r){return function(e){return x(e)||I(e.layer)}(r)?{allowNull:!0}:{enabled:!1}}}}})],_.prototype,"labelExpressionInfo",void 0),Object(s.a)([Object(v.a)("labelExpressionInfo")],_.prototype,"writeLabelExpressionInfo",null),Object(s.a)([Object(d.b)({type:S.apiValues,json:{type:S.jsonValues,read:S.read,write:S.write}})],_.prototype,"labelPlacement",void 0),Object(s.a)([Object(d.b)({type:Number})],_.prototype,"maxScale",void 0),Object(s.a)([Object(v.a)("maxScale")],_.prototype,"writeMaxScale",null),Object(s.a)([Object(d.b)({type:Number})],_.prototype,"minScale",void 0),Object(s.a)([Object(v.a)("minScale")],_.prototype,"writeMinScale",null),Object(s.a)([Object(d.b)({types:c.g,json:{origins:{"web-scene":{types:c.h,write:w.b,default:null}},write:w.b,default:null}})],_.prototype,"symbol",void 0),Object(s.a)([Object(d.b)({type:Boolean,json:{write:!0}})],_.prototype,"useCodedValues",void 0),Object(s.a)([Object(d.b)({type:String,json:{write:!0}})],_.prototype,"where",void 0);var T=_=O=Object(s.a)([Object(y.a)("esri.layers.support.LabelClass")],_)},676:function(e,t,r){"use strict";r.d(t,"a",(function(){return y})),r.d(t,"b",(function(){return p})),r.d(t,"c",(function(){return h})),r.d(t,"d",(function(){return g})),r.d(t,"e",(function(){return d})),r.d(t,"f",(function(){return f})),r.d(t,"g",(function(){return j})),r.d(t,"h",(function(){return O})),r.d(t,"i",(function(){return v})),r.d(t,"j",(function(){return m}));var a=r(22),i=r(11),n=r(27),o=r(87),l={mapserver:"MapServer",imageserver:"ImageServer",featureserver:"FeatureServer",sceneserver:"SceneServer",streamserver:"StreamServer",vectortileserver:"VectorTileServer"},s=Object.values(l),c=new RegExp("^((?:https?:)?\\/\\/\\S+?\\/rest\\/services\\/(.+?)\\/(".concat(s.join("|"),"))(?:\\/(?:layers\\/)?(\\d+))?"),"i"),u=new RegExp("^((?:https?:)?\\/\\/\\S+?\\/([^\\/\\n]+)\\/(".concat(s.join("|"),"))(?:\\/(?:layers\\/)?(\\d+))?"),"i"),b=/(.*?)\/(?:layers\/)?(\d+)\/?$/i;function p(e){return!!c.test(e)}function d(e){var t=Object(n.J)(e),r=t.path.match(c)||t.path.match(u);if(!r)return null;var i=Object(a.a)(r,5),o=i[1],s=i[2],b=i[3],p=i[4],d=s.indexOf("/");return{title:y(-1!==d?s.slice(d+1):s),serverType:l[b.toLowerCase()],sublayer:null!=p&&""!==p?parseInt(p,10):null,url:{path:o}}}function f(e){var t=Object(n.J)(e).path.match(b);return t?{serviceUrl:t[1],sublayerId:Number(t[2])}:null}function y(e){return(e=e.replace(/\s*[/_]+\s*/g," "))[0].toUpperCase()+e.slice(1)}function v(e,t){var r=[];if(e){var a=d(e);Object(i.j)(a)&&a.title&&r.push(a.title)}if(t){var n=y(t);r.push(n)}if(2===r.length){if(-1!==r[0].toLowerCase().indexOf(r[1].toLowerCase()))return r[0];if(-1!==r[1].toLowerCase().indexOf(r[0].toLowerCase()))return r[1]}return r.join(" - ")}function h(e){if(!e)return!1;var t=-1!==(e=e.toLowerCase()).indexOf(".arcgis.com/"),r=-1!==e.indexOf("//services")||-1!==e.indexOf("//tiles")||-1!==e.indexOf("//features");return t&&r}function j(e,t){return e?Object(n.H)(Object(n.G)(e,t)):e}function O(e){var t=e.url;if(!t)return{url:t};t=Object(n.G)(t,e.logger);var r,a=Object(n.J)(t),o=d(a.path);if(Object(i.j)(o))null!=o.sublayer&&null==e.layer.layerId&&(r=o.sublayer),t=o.url.path;else if(e.nonStandardUrlAllowed){var l=f(a.path);Object(i.j)(l)&&(t=l.serviceUrl,r=l.sublayerId)}return{url:Object(n.H)(t),layerId:r}}function m(e,t,r,a,i){Object(o.f)(t,a,"url",i),a.url&&null!=e.layerId&&(a.url=Object(n.y)(a.url,r,e.layerId.toString()))}function g(e){if(!e)return!1;var t=e.toLowerCase(),r=-1!==t.indexOf("/services/"),a=-1!==t.indexOf("/mapserver/wmsserver"),i=-1!==t.indexOf("/imageserver/wmsserver"),n=-1!==t.indexOf("/wmsserver");return r&&(a||i||n)}},679:function(e,t,r){"use strict";r.d(t,"a",(function(){return s})),r.d(t,"b",(function(){return l}));r(19);var a=r(664),i=r(660),n=r(661),o=r(662),l={key:"type",base:i.a,typeMap:{range:o.a,"coded-value":a.a,inherited:n.a}};function s(e){if(!e||!e.type)return null;switch(e.type){case"range":return o.a.fromJSON(e);case"codedValue":return a.a.fromJSON(e);case"inherited":return n.a.fromJSON(e)}return null}},683:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var a=r(135),i=r(70),n={inches:Object(a.b)(1,"meters","inches"),feet:Object(a.b)(1,"meters","feet"),"us-feet":Object(a.b)(1,"meters","us-feet"),yards:Object(a.b)(1,"meters","yards"),miles:Object(a.b)(1,"meters","miles"),"nautical-miles":Object(a.b)(1,"meters","nautical-miles"),millimeters:Object(a.b)(1,"meters","millimeters"),centimeters:Object(a.b)(1,"meters","centimeters"),decimeters:Object(a.b)(1,"meters","decimeters"),meters:Object(a.b)(1,"meters","meters"),kilometers:Object(a.b)(1,"meters","kilometers"),"decimal-degrees":1/Object(a.i)(1,"meters",i.a.radius)}},686:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return M}));var a,i=r(23),n=r(13),o=r(22),l=r(7),s=r.n(l),c=r(21),u=r(12),b=r(2),p=r(4),d=r(77),f=r(65),y=r(5),v=r(6),h=r(0),j=r(46),O=r(82),m=r(29),g=r(18),w=r(15),S=r(712),x=r(11),k=r(30),I=r(109),_=r(1),T=(r(14),r(19),r(10)),L=r(43),P=r(209),F=r(663),V=r(684),E=r(237),D=r(186),C=w.a.getLogger("esri.renderers.DictionaryRenderer"),N={type:"CIMSimpleLineCallout",lineSymbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",width:.5,color:[0,0,0,255]}]}},R=a=function(e){Object(y.a)(r,e);var t=Object(v.a)(r);function r(e){var a;return Object(b.a)(this,r),(a=t.call(this,e))._ongoingRequests=new Map,a._symbolCache=new S.a(100),a.config=null,a.fieldMap=null,a.scaleExpression=null,a.scaleExpressionTitle=null,a.url=null,a.type="dictionary",a}return Object(p.a)(r,[{key:"writeData",value:function(e,t){e&&(t.scalingExpressionInfo={expression:e,returnType:"number"})}},{key:"writeVisualVariables",value:function(e,t,a,i){null!=i&&i.origin||Object(d.a)(Object(f.a)(r.prototype),"writeVisualVariables",this).call(this,e,t,a,i)}},{key:"clone",value:function(){return new a({config:Object(g.a)(this.config),scaleExpression:this.scaleExpression,scaleExpressionTitle:this.scaleExpressionTitle,fieldMap:Object(g.a)(this.fieldMap),url:Object(g.a)(this.url),visualVariables:Object(g.a)(this.visualVariables)})}},{key:"getSymbolAsync",value:function(){var e=Object(u.a)(s.a.mark((function e(t,r){var a,i,n,o,l,u,b,p,d,f,y,v,h,O,m,g,w,S,_,T,L,P,F,V,E,D,C=this;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._dictionaryPromise||(this._dictionaryPromise=this.fetchResources(r)),e.prev=1,e.next=4,this._dictionaryPromise;case 4:a=e.sent,e.next=11;break;case 7:if(e.prev=7,e.t0=e.catch(1),!Object(k.m)(e.t0)){e.next=11;break}return e.abrupt("return",(this._dictionaryPromise=null,null));case 11:if(i={},this.fieldMap){n=Object(c.a)(this._symbolFields);try{for(n.s();!(o=n.n()).done;)l=o.value,(u=this.fieldMap[l])&&null!==t.attributes[u]&&void 0!==t.attributes[u]?(b=""+t.attributes[u],i[l]=b):i[l]=""}catch(s){n.e(s)}finally{n.f()}}if((p=a(i,r))&&"string"==typeof p){e.next=16;break}return e.abrupt("return",null);case 16:if(d=Object(I.b)(p).toString(),!(f=this._symbolCache.get(d))){e.next=19;break}return e.abrupt("return",(f.catch((function(){C._symbolCache.pop(d)})),f));case 19:y=p.split(";"),v=[],h=[],O=Object(c.a)(y);try{for(O.s();!(m=O.n()).done;)if((g=m.value)&&0!==g.length)if(-1===g.indexOf("po:"))if(-1!==g.indexOf("|")){w=Object(c.a)(g.split("|"));try{for(w.s();!(S=w.n()).done;)_=S.value,this._itemNames.has(_)&&v.push(_)}catch(s){w.e(s)}finally{w.f()}}else this._itemNames.has(g)&&v.push(g);else 3===(T=g.substr(3).split("|")).length&&(L=T[0],P=T[1],F=T[2],"DashTemplate"===P?F=F.split(" ").map((function(e){return Number(e)})):"Color"===P?(V=new j.a(F).toRgba(),F=[V[0],V[1],V[2],255*V[3]]):F=Number(F),h.push({primitiveName:L,propertyName:P,value:F}))}catch(s){O.e(s)}finally{O.f()}return E=!Object(x.j)(t.geometry)||!t.geometry.hasZ&&"point"===t.geometry.type,D=this._cimPartsToCIMSymbol(v,h,E,r),e.abrupt("return",(this._symbolCache.put(d,D,1),D));case 24:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"collectRequiredFields",value:function(){var e=Object(u.a)(s.a.mark((function e(t,r){var a,i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.collectVVRequiredFields(t,r);case 2:if(e.t0=this.scaleExpression,!e.t0){e.next=6;break}return e.next=6,Object(P.a)(t,r,this.scaleExpression);case 6:for(a in this.fieldMap)i=this.fieldMap[a],r.has(i)&&t.add(i);case 7:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"arcadeRequired",get:function(){return!0}},{key:"fetchResources",value:function(){var e=Object(u.a)(s.a.mark((function e(t){var r,a,i,l,u,b,p,d,f,y,v,h,j,g,w,S,k,I=this;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._dictionaryPromise){e.next=2;break}return e.abrupt("return",this._dictionaryPromise);case 2:if(this.url){e.next=4;break}return e.abrupt("return",void C.error("no valid URL!"));case 4:return r=Object(x.j)(t)?t.abortOptions:null,a=Object(O.default)(this.url+"/resources/styles/dictionary-info.json",Object(n.a)({responseType:"json",query:{f:"json"}},r)),e.next=8,Promise.all([a,Object(E.e)()]);case 8:if(i=e.sent,l=Object(o.a)(i,1),u=l[0].data){e.next=13;break}throw this._dictionaryPromise=null,new m.a("esri.renderers.DictionaryRenderer","Bad dictionary data!");case 13:if(b=u.expression,p=u.authoringInfo,this._refSymbolUrlTemplate=this.url+"/"+u.cimRefTemplateUrl,this._itemNames=new Set(u.itemsNames),this._symbolFields=p.symbol,d={},this.config)for(y in f=this.config)d[y]=f[y];if(p.configuration){v=Object(c.a)(p.configuration);try{for(v.s();!(h=v.n()).done;)j=h.value,d.hasOwnProperty(j.name)||(d[j.name]=j.value)}catch(s){v.e(s)}finally{v.f()}}if(g=[],Object(x.j)(t)&&t.fields&&this.fieldMap){w=Object(c.a)(this._symbolFields);try{for(k=function(){var e=S.value,r=I.fieldMap[e],a=t.fields.filter((function(e){return e.name===r}));a.length>0&&g.push(Object(n.a)(Object(n.a)({},a[0]),{},{name:e}))},w.s();!(S=w.n()).done;)k()}catch(s){w.e(s)}finally{w.f()}}return e.abrupt("return",(this._dictionaryPromise=Object(E.b)(b,Object(x.j)(t)?t.spatialReference:null,g,d).then((function(e){var t={scale:0};return function(r,a){var i=e.repurposeFeature({geometry:null,attributes:r});return t.scale=Object(x.j)(a)?a.scale:void 0,e.evaluate({$feature:i,$view:t})}})).catch((function(e){return C.error("Creating dictinoary expression failed:",e),null})),this._dictionaryPromise));case 21:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getSymbol",value:function(){return null}},{key:"getSymbols",value:function(){return[]}},{key:"getAttributeHash",value:function(){return this.visualVariables&&this.visualVariables.reduce((function(e,t){return e+t.getAttributeHash()}),"")}},{key:"getMeshHash",value:function(){return"".concat(this.url,"-").concat(JSON.stringify(this.fieldMap))}},{key:"getSymbolFields",value:function(){return this._symbolFields}},{key:"_getSymbolPart",value:function(){var e=Object(u.a)(s.a.mark((function e(t,r){var a,i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._ongoingRequests.has(t)){e.next=2;break}return e.abrupt("return",this._ongoingRequests.get(t).then((function(e){return e.data})));case 2:return a=this._refSymbolUrlTemplate.replace(/\{itemName\}/gi,t),i=Object(O.default)(a,Object(n.a)({responseType:"json",query:{f:"json"}},r)),this._ongoingRequests.set(t,i),e.prev=4,e.next=7,i;case 7:return e.abrupt("return",e.sent.data);case 10:return e.prev=10,e.t0=e.catch(4),e.abrupt("return",(this._ongoingRequests.delete(t),Promise.reject(e.t0)));case 13:case"end":return e.stop()}}),e,this,[[4,10]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"_combineSymbolParts",value:function(e,t,r){if(!e||0===e.length)return null;var a=Object(n.a)({},e[0]);if(e.length>1){a.symbolLayers=[];var o,l=Object(c.a)(e);try{for(l.s();!(o=l.n()).done;){var s,u=o.value;(s=a.symbolLayers).unshift.apply(s,Object(i.a)(u.symbolLayers))}}catch(b){l.e(b)}finally{l.f()}}return r&&(a.callout=N),{type:"CIMSymbolReference",symbol:a,primitiveOverrides:t}}},{key:"_cimPartsToCIMSymbol",value:function(){var e=Object(u.a)(s.a.mark((function e(t,r,a,i){var n,o,l;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n=new Array(t.length),o=0;o<t.length;o++)n[o]=this._getSymbolPart(t[o],i);return e.next=4,Promise.all(n);case 4:return l=e.sent,e.abrupt("return",new D.a({data:this._combineSymbolParts(l,r,a)}));case 6:case"end":return e.stop()}}),e,this)})));return function(t,r,a,i){return e.apply(this,arguments)}}()}]),r}(Object(V.a)(F.a));Object(h.a)([Object(_.b)({type:Object,json:{read:{source:"configuration"},write:{target:"configuration"}}})],R.prototype,"config",void 0),Object(h.a)([Object(_.b)({type:Object,json:{write:!0}})],R.prototype,"fieldMap",void 0),Object(h.a)([Object(_.b)({type:String,json:{read:{source:"scalingExpressionInfo.expression"},write:!0}})],R.prototype,"scaleExpression",void 0),Object(h.a)([Object(L.a)("scaleExpression")],R.prototype,"writeData",null),Object(h.a)([Object(_.b)({type:String,json:{read:{source:"scalingExpressionInfo.title"},write:{target:"scalingExpressionInfo.title",overridePolicy:function(e){return{enabled:!!e&&!!this.scaleExpression}}}}})],R.prototype,"scaleExpressionTitle",void 0),Object(h.a)([Object(_.b)({type:String,json:{write:!0}})],R.prototype,"url",void 0),Object(h.a)([Object(L.a)("visualVariables")],R.prototype,"writeVisualVariables",null);var M=R=a=Object(h.a)([Object(T.a)("esri.renderers.DictionaryRenderer")],R)},687:function(e,t,r){"use strict";r.d(t,"a",(function(){return m}));var a,i=r(7),n=r.n(i),o=r(12),l=r(2),s=r(4),c=r(5),u=r(6),b=r(0),p=r(18),d=r(1),f=(r(14),r(19),r(15),r(31)),y=r(10),v=r(663),h=r(684),j=r(765),O=a=function(e){Object(c.a)(r,e);var t=Object(u.a)(r);function r(e){var a;return Object(l.a)(this,r),(a=t.call(this,e)).description=null,a.label=null,a.symbol=null,a.type="simple",a}return Object(s.a)(r,[{key:"collectRequiredFields",value:function(){var e=Object(o.a)(n.a.mark((function e(t,r){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this.collectSymbolFields(t,r),this.collectVVRequiredFields(t,r)]);case 2:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"collectSymbolFields",value:function(){var e=Object(o.a)(n.a.mark((function e(t,r){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(this.getSymbols().map((function(e){return e.collectRequiredFields(t,r)})));case 2:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getSymbol",value:function(e,t){return this.symbol}},{key:"getSymbolAsync",value:function(){var e=Object(o.a)(n.a.mark((function e(t,r){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.symbol);case 1:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getSymbols",value:function(){return this.symbol?[this.symbol]:[]}},{key:"getAttributeHash",value:function(){return this.visualVariables&&this.visualVariables.reduce((function(e,t){return e+t.getAttributeHash()}),"")}},{key:"getMeshHash",value:function(){return this.getSymbols().reduce((function(e,t){return e+JSON.stringify(t)}),"")}},{key:"arcadeRequired",get:function(){return this.arcadeRequiredForVisualVariables}},{key:"clone",value:function(){return new a({description:this.description,label:this.label,symbol:this.symbol&&this.symbol.clone(),visualVariables:Object(p.a)(this.visualVariables),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})}}]),r}(Object(h.a)(v.a));Object(b.a)([Object(d.b)({type:String,json:{write:!0}})],O.prototype,"description",void 0),Object(b.a)([Object(d.b)({type:String,json:{write:!0}})],O.prototype,"label",void 0),Object(b.a)([Object(d.b)(j.b)],O.prototype,"symbol",void 0),Object(b.a)([Object(f.a)({simple:"simple"})],O.prototype,"type",void 0);var m=O=a=Object(b.a)([Object(y.a)("esri.renderers.SimpleRenderer")],O)},688:function(e,t,r){"use strict";r.d(t,"a",(function(){return N}));var a,i=r(21),n=r(7),o=r.n(n),l=r(12),s=r(2),c=r(4),u=r(5),b=r(6),p=r(0),d=r(46),f=r(18),y=r(61),v=r(14),h=(r(19),r(15)),j=r(31),O=r(1),m=r(10),g=r(209),w=r(663),S=r(684),x=r(26),k=r(97),I=h.a.getLogger("esri.renderers.support.AttributeColorInfo"),_=a=function(e){Object(u.a)(r,e);var t=Object(b.a)(r);function r(e){var a;return Object(s.a)(this,r),(a=t.call(this,e)).color=null,a.field=null,a.label=null,a.valueExpression=null,a.valueExpressionTitle=null,a}return Object(c.a)(r,[{key:"castField",value:function(e){return null==e?e:"function"==typeof e?(I.error(".field: field must be a string value"),null):Object(v.l)(e)}},{key:"getAttributeHash",value:function(){return"".concat(this.field,"-").concat(this.valueExpression)}},{key:"clone",value:function(){return new a({color:this.color&&this.color.clone(),field:this.field,label:this.label,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})}}]),r}(x.a);Object(p.a)([Object(O.b)({type:d.a,json:{type:[Number],write:!0}})],_.prototype,"color",void 0),Object(p.a)([Object(O.b)({type:String,json:{write:!0}})],_.prototype,"field",void 0),Object(p.a)([Object(k.a)("field")],_.prototype,"castField",null),Object(p.a)([Object(O.b)({type:String,json:{write:!0}})],_.prototype,"label",void 0),Object(p.a)([Object(O.b)({type:String,json:{write:!0}})],_.prototype,"valueExpression",void 0),Object(p.a)([Object(O.b)({type:String,json:{write:!0}})],_.prototype,"valueExpressionTitle",void 0);var T,L=_=a=Object(p.a)([Object(m.a)("esri.renderers.support.AttributeColorInfo")],_),P=T=function(e){Object(u.a)(r,e);var t=Object(b.a)(r);function r(){var e;return Object(s.a)(this,r),(e=t.apply(this,arguments)).unit=null,e}return Object(c.a)(r,[{key:"clone",value:function(){return new T({unit:this.unit})}}]),r}(x.a);Object(p.a)([Object(O.b)({type:String,json:{write:!0}})],P.prototype,"unit",void 0);var F,V=P=T=Object(p.a)([Object(m.a)("esri.renderers.support.DotDensityLegendOptions")],P),E=r(166),D=r(98),C=F=function(e){Object(u.a)(r,e);var t=Object(b.a)(r);function r(e){var a;return Object(s.a)(this,r),(a=t.call(this,e)).attributes=null,a.backgroundColor=new d.a([0,0,0,0]),a.blendDots=!0,a.dotBlendingEnabled=!0,a.dotShape="square",a.dotSize=1,a.legendOptions=null,a.outline=new D.a,a.dotValue=null,a.referenceDotValue=null,a.referenceScale=null,a.seed=1,a.type="dot-density",a}return Object(c.a)(r,[{key:"calculateDotValue",value:function(e){if(null==this.referenceScale)return this.dotValue;var t=e/this.referenceScale*this.dotValue;return t<1?1:t}},{key:"getSymbol",value:function(){return new E.a({outline:this.outline})}},{key:"getSymbolAsync",value:function(){var e=Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.getSymbol());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getSymbols",value:function(){return[this.getSymbol()]}},{key:"getAttributeHash",value:function(){return this.attributes&&this.attributes.reduce((function(e,t){return e+t.getAttributeHash()}),"")}},{key:"getMeshHash",value:function(){return JSON.stringify(this.outline)}},{key:"clone",value:function(){return new F({attributes:Object(f.a)(this.attributes),backgroundColor:Object(f.a)(this.backgroundColor),dotBlendingEnabled:Object(f.a)(this.dotBlendingEnabled),dotShape:Object(f.a)(this.dotShape),dotSize:Object(f.a)(this.dotSize),dotValue:Object(f.a)(this.dotValue),legendOptions:Object(f.a)(this.legendOptions),outline:Object(f.a)(this.outline),referenceScale:Object(f.a)(this.referenceScale),visualVariables:Object(f.a)(this.visualVariables),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})}},{key:"getControllerHash",value:function(){return"".concat(this.attributes.map((function(e){return e.field||e.valueExpression||""})),"-").concat(this.outline&&JSON.stringify(this.outline.toJSON())||"")}},{key:"collectRequiredFields",value:function(){var e=Object(l.a)(o.a.mark((function e(t,r){var a,n,l;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.collectVVRequiredFields(t,r);case 2:a=Object(i.a)(this.attributes),e.prev=3,a.s();case 5:if((n=a.n()).done){e.next=14;break}if(l=n.value,e.t0=l.valueExpression,!e.t0){e.next=11;break}return e.next=11,Object(g.a)(t,r,l.valueExpression);case 11:l.field&&t.add(l.field);case 12:e.next=5;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(3),a.e(e.t1);case 19:return e.prev=19,a.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,this,[[3,16,19,22]])})));return function(t,r){return e.apply(this,arguments)}}()}]),r}(Object(S.a)(w.a));Object(p.a)([Object(O.b)({type:[L],json:{write:!0}})],C.prototype,"attributes",void 0),Object(p.a)([Object(O.b)({type:d.a,json:{write:!0}})],C.prototype,"backgroundColor",void 0),Object(p.a)([Object(O.b)({type:Boolean}),Object(y.a)("dotBlendingEnabled")],C.prototype,"blendDots",void 0),Object(p.a)([Object(O.b)({type:Boolean,json:{write:!0}})],C.prototype,"dotBlendingEnabled",void 0),Object(p.a)([Object(O.b)({type:String,json:{write:!1}})],C.prototype,"dotShape",void 0),Object(p.a)([Object(O.b)({type:Number,json:{write:!1}})],C.prototype,"dotSize",void 0),Object(p.a)([Object(O.b)({type:V,json:{write:!0}})],C.prototype,"legendOptions",void 0),Object(p.a)([Object(O.b)({type:D.a,json:{default:null,write:!0}})],C.prototype,"outline",void 0),Object(p.a)([Object(O.b)({type:Number,json:{write:!0}})],C.prototype,"dotValue",void 0),Object(p.a)([Object(O.b)({type:Number}),Object(y.a)("dotValue")],C.prototype,"referenceDotValue",void 0),Object(p.a)([Object(O.b)({type:Number,json:{write:!0}})],C.prototype,"referenceScale",void 0),Object(p.a)([Object(O.b)({type:Number,json:{write:!0}})],C.prototype,"seed",void 0),Object(p.a)([Object(j.a)({dotDensity:"dot-density"})],C.prototype,"type",void 0);var N=C=F=Object(p.a)([Object(m.a)("esri.renderers.DotDensityRenderer")],C)},689:function(e,t,r){"use strict";r.d(t,"a",(function(){return x}));var a,i=r(7),n=r.n(i),o=r(12),l=r(2),s=r(4),c=r(5),u=r(6),b=r(0),p=r(46),d=r(18),f=r(1),y=(r(14),r(19),r(15),r(31)),v=r(10),h=r(209),j=r(663),O=r(26),m=a=function(e){Object(c.a)(r,e);var t=Object(u.a)(r);function r(e){var a;return Object(l.a)(this,r),(a=t.call(this,e)).color=null,a.ratio=null,a}return Object(s.a)(r,[{key:"clone",value:function(){return new a({color:this.color,ratio:this.ratio})}}]),r}(O.a);Object(b.a)([Object(f.b)({type:p.a,json:{write:!0}})],m.prototype,"color",void 0),Object(b.a)([Object(f.b)({type:Number,json:{write:!0}})],m.prototype,"ratio",void 0);var g,w=m=a=Object(b.a)([Object(v.a)("esri.renderers.support.HeatmapColorStop")],m),S=g=function(e){Object(c.a)(r,e);var t=Object(u.a)(r);function r(e){var a;return Object(l.a)(this,r),(a=t.call(this,e)).blurRadius=10,a.colorStops=[new w({ratio:0,color:new p.a("rgba(255, 140, 0, 0)")}),new w({ratio:.75,color:new p.a("rgba(255, 140, 0, 1)")}),new w({ratio:.9,color:new p.a("rgba(255, 0,   0, 1)")})],a.field=null,a.fieldOffset=0,a.maxPixelIntensity=100,a.minPixelIntensity=0,a.type="heatmap",a}return Object(s.a)(r,[{key:"collectRequiredFields",value:function(){var e=Object(o.a)(n.a.mark((function e(t,r){var a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(a=this.field)&&"string"==typeof a&&Object(h.b)(t,r,a);case 2:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getAttributeHash",value:function(){return null}},{key:"getMeshHash",value:function(){return"".concat(JSON.stringify(this.colorStops),".").concat(this.blurRadius,".").concat(this.field)}},{key:"clone",value:function(){return new g({blurRadius:this.blurRadius,colorStops:Object(d.a)(this.colorStops),field:this.field,maxPixelIntensity:this.maxPixelIntensity,minPixelIntensity:this.minPixelIntensity})}}]),r}(j.a);Object(b.a)([Object(f.b)({type:Number,json:{write:!0}})],S.prototype,"blurRadius",void 0),Object(b.a)([Object(f.b)({type:[w],json:{write:!0}})],S.prototype,"colorStops",void 0),Object(b.a)([Object(f.b)({type:String,json:{write:!0}})],S.prototype,"field",void 0),Object(b.a)([Object(f.b)({type:Number,json:{write:{overridePolicy:function(e,t,r){return{enabled:null==r}}}}})],S.prototype,"fieldOffset",void 0),Object(b.a)([Object(f.b)({type:Number,json:{write:!0}})],S.prototype,"maxPixelIntensity",void 0),Object(b.a)([Object(f.b)({type:Number,json:{write:!0}})],S.prototype,"minPixelIntensity",void 0),Object(b.a)([Object(y.a)({heatmap:"heatmap"})],S.prototype,"type",void 0);var x=S=g=Object(b.a)([Object(v.a)("esri.renderers.HeatmapRenderer")],S)},690:function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var a=new(r(42).a)({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml"})},691:function(e,t,r){"use strict";r.d(t,"a",(function(){return u})),r.d(t,"b",(function(){return b}));var a=r(700),i=r(686),n=r(688),o=r(689),l=r(663),s=r(687),c=r(701),u={key:"type",base:l.a,typeMap:{heatmap:o.a,simple:s.a,"unique-value":c.a,"class-breaks":a.a,"dot-density":n.a,dictionary:i.default},errorContext:"renderer"},b={key:"type",base:l.a,typeMap:{simple:s.a,"unique-value":c.a,"class-breaks":a.a},errorContext:"renderer"}},693:function(e,t,r){"use strict";r.d(t,"a",(function(){return y})),r.d(t,"b",(function(){return p})),r.d(t,"c",(function(){return d})),r.d(t,"d",(function(){return f})),r.d(t,"e",(function(){return m})),r.d(t,"f",(function(){return b}));var a=r(109),i="__begin__",n="__end__",o=new RegExp(i,"ig"),l=new RegExp(n,"ig"),s=new RegExp("^"+i,"i"),c=new RegExp(n+"$","i"),u='"';function b(e){return e.replace(new RegExp("\\{","g"),"[").replace(new RegExp("\\}","g"),"]")}function p(e){var t={expression:"",type:"none"};return e.labelExpressionInfo?e.labelExpressionInfo.value?(t.expression=e.labelExpressionInfo.value,t.type="conventional"):e.labelExpressionInfo.expression&&(t.expression=e.labelExpressionInfo.expression,t.type="arcade"):null!=e.labelExpression&&(t.expression=function(e){return e.replace(new RegExp("\\[","g"),"{").replace(new RegExp("\\]","g"),"}")}(e.labelExpression),t.type="conventional"),t}function d(e){var t=p(e);if(!t)return null;switch(t.type){case"conventional":return y(t.expression);case"arcade":return t.expression}return null}function f(e){var t=p(e);if(!t)return null;switch(t.type){case"conventional":return function(e){var t=e.match(v);return t&&t[1].trim()||null}(t.expression);case"arcade":return m(t.expression)}return null}function y(e){var t;return e?(t=Object(a.c)(e,(function(e){return i+'$feature["'+e+'"]'+n})),t=s.test(t)?t.replace(s,""):u+t,t=(t=c.test(t)?t.replace(c,""):t+u).replace(o,'" + ').replace(l,' + "')):t='""',t}var v=/^\s*\{([^}]+)\}\s*$/i;var h=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])([\w\s]+)(\2)\]));?\s*$/i,j=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])([\w\s]+)(\2)\]));?\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(\1|\3)(\5)\s*\));?\s*$/i,O=/^\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])([\w\s]+)(\1)\s*\));?\s*$/i;function m(e){if(!e)return null;var t=h.exec(e)||j.exec(e);return t?t[1]||t[3]:(t=O.exec(e))?t[2]:null}},694:function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));r(19);function a(e){}},697:function(e,t,r){"use strict";r.d(t,"a",(function(){return _}));var a=r(7),i=r.n(a),n=r(12),o=r(2),l=r(4),s=r(8),c=r(5),u=r(6),b=r(0),p=r(15),d=r(30),f=r(1),y=(r(19),r(14),r(10)),v=r(21),h=r(52),j=r(215),O=new h.a,m=new WeakMap;function g(e){w(e)&&O.push(e)}function w(e){return e&&"object"==typeof e&&"refreshInterval"in e&&"refresh"in e}function S(e,t){return Number.isFinite(e)&&Number.isFinite(t)?t<=0?e:S(t,e%t):0}var x=0,k=0;function I(){var e,t=Date.now(),r=Object(v.a)(O);try{for(r.s();!(e=r.n()).done;){var a,i=e.value;if(i.refreshInterval)t-(null!=(a=m.get(i))?a:0)+5>=6e4*i.refreshInterval&&(m.set(i,t),i.refresh(t))}}catch(n){r.e(n)}finally{r.f()}}Object(j.a)((function(){var e,t=Date.now(),r=0,a=Object(v.a)(O);try{for(a.s();!(e=a.n()).done;){var i=e.value;r=S(Math.round(6e4*i.refreshInterval),r),i.refreshInterval?m.get(i)||m.set(i,t):m.delete(i)}}catch(n){a.e(n)}finally{a.f()}if(r!==k){if(k=r,clearInterval(x),0===k)return void(x=0);x=setInterval(I,k)}}));var _=function(e){var t=function(e){Object(c.a)(r,e);var t=Object(u.a)(r);function r(){var e;Object(o.a)(this,r);for(var a=arguments.length,i=new Array(a),n=0;n<a;n++)i[n]=arguments[n];return(e=t.call.apply(t,[this].concat(i))).refreshInterval=0,e.refreshTimestamp=0,e._debounceHasDataChanged=Object(d.i)((function(){return e.hasDataChanged()})),e.when().then((function(){g(Object(s.a)(e))}),(function(){})),e}return Object(l.a)(r,[{key:"destroy",value:function(){var e;w(e=this)&&O.includes(e)&&O.remove(e)}},{key:"refreshParameters",get:function(){return{_ts:this.refreshTimestamp||null}}},{key:"refresh",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now();Object(d.l)(this._debounceHasDataChanged()).then((function(r){r&&(e._set("refreshTimestamp",t),e.emit("refresh"))}),(function(t){p.a.getLogger(e.declaredClass).error(t)}))}},{key:"hasDataChanged",value:function(){var e=Object(n.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),r}(e);return Object(b.a)([Object(f.b)({type:Number,cast:function(e){return e>=.1?e:e<=0?0:.1},json:{write:!0,origins:{"web-document":{write:!0}}}})],t.prototype,"refreshInterval",void 0),Object(b.a)([Object(f.b)({readOnly:!0})],t.prototype,"refreshTimestamp",void 0),Object(b.a)([Object(f.b)()],t.prototype,"refreshParameters",null),t=Object(b.a)([Object(y.a)("esri.layers.mixins.RefreshableLayer")],t),t}},703:function(e,t,r){"use strict";r.d(t,"a",(function(){return i})),r.d(t,"b",(function(){return o})),r.d(t,"c",(function(){return n})),r.d(t,"d",(function(){return l})),r.d(t,"e",(function(){return s})),r.d(t,"f",(function(){return u})),r.d(t,"g",(function(){return c}));var a=[252,146,31,255],i={type:"esriSMS",style:"esriSMSCircle",size:6,color:a,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},n={type:"esriSLS",style:"esriSLSSolid",width:.75,color:a},o={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}},l={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0},s={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5},c={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5},u={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null}},704:function(e,t,r){"use strict";function a(e){return e&&"esri.renderers.visualVariables.SizeVariable"===e.declaredClass}function i(e){return null!=e&&!isNaN(e)&&isFinite(e)}function n(e){return e.valueExpression?"expression":e.field&&"string"==typeof e.field?"field":"unknown"}function o(e,t){var r=t||n(e),a=e.valueUnit||"unknown";return"unknown"===r?"constant":e.stops?"stops":null!=e.minSize&&null!=e.maxSize&&null!=e.minDataValue&&null!=e.maxDataValue?"clamped-linear":"unknown"===a?null!=e.minSize&&null!=e.minDataValue?e.minSize&&e.minDataValue?"proportional":"additive":"identity":"real-world-size"}r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return o})),r.d(t,"c",(function(){return a})),r.d(t,"d",(function(){return i}))},710:function(e,t,r){"use strict";r.d(t,"a",(function(){return d}));var a=r(2),i=r(4),n=r(5),o=r(6),l=r(0),s=r(15),c=r(11),u=r(1),b=(r(19),r(14),r(10)),p=r(676),d=function(e){var t=function(e){Object(n.a)(r,e);var t=Object(o.a)(r);function r(){return Object(a.a)(this,r),t.apply(this,arguments)}return Object(i.a)(r,[{key:"title",get:function(){if(this._get("title")&&"defaults"!==this.originOf("title"))return this._get("title");if(this.url){var e=Object(p.e)(this.url);if(Object(c.j)(e)&&e.title)return e.title}return this._get("title")||""},set:function(e){this._set("title",e)}},{key:"url",set:function(e){this._set("url",Object(p.g)(e,s.a.getLogger(this.declaredClass)))}}]),r}(e);return Object(l.a)([Object(u.b)()],t.prototype,"title",null),Object(l.a)([Object(u.b)({type:String})],t.prototype,"url",null),t=Object(l.a)([Object(b.a)("esri.layers.mixins.ArcGISService")],t)}},711:function(e,t,r){"use strict";r.d(t,"a",(function(){return f}));var a,i=r(2),n=r(4),o=r(5),l=r(6),s=r(0),c=r(26),u=r(1),b=(r(19),r(14)),p=(r(15),r(31)),d=r(10),f=a=function(e){Object(o.a)(r,e);var t=Object(l.a)(r);function r(e){var a;return Object(i.a)(this,r),(a=t.call(this,e)).type="map-layer",a}return Object(n.a)(r,[{key:"clone",value:function(){var e=this.mapLayerId,t=this.gdbVersion;return new a({mapLayerId:e,gdbVersion:t})}}]),r}(c.a);Object(s.a)([Object(p.a)({mapLayer:"map-layer"})],f.prototype,"type",void 0),Object(s.a)([Object(u.b)({type:b.a,json:{write:!0}})],f.prototype,"mapLayerId",void 0),Object(s.a)([Object(u.b)({type:String,json:{write:!0}})],f.prototype,"gdbVersion",void 0),f=a=Object(s.a)([Object(d.a)("esri.layers.support.source.MapLayerSource")],f)},712:function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));var a=r(2),i=r(4),n=r(708),o=function(){function e(t,r){Object(a.a)(this,e),this._storage=new n.b,this._storage.maxSize=t,r&&this._storage.registerRemoveFunc("",r)}return Object(i.a)(e,[{key:"put",value:function(e,t,r){this._storage.put(e,t,r,1)}},{key:"pop",value:function(e){return this._storage.pop(e)}},{key:"get",value:function(e){return this._storage.get(e)}},{key:"clear",value:function(){this._storage.clearAll()}},{key:"destroy",value:function(){this._storage.destroy()}},{key:"maxSize",get:function(){return this._storage.maxSize},set:function(e){this._storage.maxSize=e}}]),e}()},713:function(e,t,r){"use strict";r.d(t,"a",(function(){return v}));var a=r(2),i=r(4),n=r(5),o=r(6),l=r(0),s=r(42),c=r(26),u=r(18),b=r(1),p=(r(14),r(19),r(15),r(10)),d=r(43),f=new s.a({esriFeatureEditToolAutoCompletePolygon:"auto-complete-polygon",esriFeatureEditToolCircle:"circle",esriFeatureEditToolEllipse:"ellipse",esriFeatureEditToolFreehand:"freehand",esriFeatureEditToolLine:"line",esriFeatureEditToolNone:"none",esriFeatureEditToolPoint:"point",esriFeatureEditToolPolygon:"polygon",esriFeatureEditToolRectangle:"rectangle",esriFeatureEditToolArrow:"arrow",esriFeatureEditToolTriangle:"triangle",esriFeatureEditToolLeftArrow:"left-arrow",esriFeatureEditToolRightArrow:"right-arrow",esriFeatureEditToolUpArrow:"up-arrow",esriFeatureEditToolDownArrow:"down-arrow"}),y=function(e){Object(n.a)(r,e);var t=Object(o.a)(r);function r(e){var i;return Object(a.a)(this,r),(i=t.call(this,e)).name=null,i.description=null,i.drawingTool=null,i.prototype=null,i.thumbnail=null,i}return Object(i.a)(r,[{key:"writeDrawingTool",value:function(e,t){t.drawingTool=f.toJSON(e)}},{key:"writePrototype",value:function(e,t){t.prototype=Object(u.c)(Object(u.a)(e),!0)}},{key:"writeThumbnail",value:function(e,t){t.thumbnail=Object(u.c)(Object(u.a)(e))}}]),r}(c.a);Object(l.a)([Object(b.b)({json:{write:!0}})],y.prototype,"name",void 0),Object(l.a)([Object(b.b)({json:{write:!0}})],y.prototype,"description",void 0),Object(l.a)([Object(b.b)({json:{read:f.read,write:f.write}})],y.prototype,"drawingTool",void 0),Object(l.a)([Object(d.a)("drawingTool")],y.prototype,"writeDrawingTool",null),Object(l.a)([Object(b.b)({json:{write:!0}})],y.prototype,"prototype",void 0),Object(l.a)([Object(d.a)("prototype")],y.prototype,"writePrototype",null),Object(l.a)([Object(b.b)({json:{write:!0}})],y.prototype,"thumbnail",void 0),Object(l.a)([Object(d.a)("thumbnail")],y.prototype,"writeThumbnail",null);var v=y=Object(l.a)([Object(p.a)("esri.layers.support.FeatureTemplate")],y)},714:function(e,t,r){"use strict";r.d(t,"a",(function(){return h}));var a,i=r(2),n=r(4),o=r(5),l=r(6),s=r(0),c=r(42),u=r(26),b=r(18),p=r(1),d=(r(14),r(19),r(15),r(10)),f=r(43),y=new c.a({count:"count",sum:"sum",min:"min",max:"max",avg:"avg",stddev:"stddev",var:"var",exceedslimit:"exceedslimit",percentile_cont:"percentile-continuous",percentile_disc:"percentile-discrete"}),v=a=function(e){Object(o.a)(r,e);var t=Object(l.a)(r);function r(e){var a;return Object(i.a)(this,r),(a=t.call(this,e)).maxPointCount=void 0,a.maxRecordCount=void 0,a.maxVertexCount=void 0,a.onStatisticField=null,a.outStatisticFieldName=null,a.statisticType=null,a.statisticParameters=null,a}return Object(n.a)(r,[{key:"writeStatisticParameters",value:function(e,t){"percentile-continuous"!==this.statisticType&&"percentile-discrete"!==this.statisticType||(t.statisticParameters=Object(b.a)(e))}},{key:"clone",value:function(){return new a({maxPointCount:this.maxPointCount,maxRecordCount:this.maxRecordCount,maxVertexCount:this.maxVertexCount,onStatisticField:this.onStatisticField,outStatisticFieldName:this.outStatisticFieldName,statisticType:this.statisticType,statisticParameters:Object(b.a)(this.statisticParameters)})}}]),r}(u.a);Object(s.a)([Object(p.b)({type:Number,json:{write:!0}})],v.prototype,"maxPointCount",void 0),Object(s.a)([Object(p.b)({type:Number,json:{write:!0}})],v.prototype,"maxRecordCount",void 0),Object(s.a)([Object(p.b)({type:Number,json:{write:!0}})],v.prototype,"maxVertexCount",void 0),Object(s.a)([Object(p.b)({type:String,json:{write:!0}})],v.prototype,"onStatisticField",void 0),Object(s.a)([Object(p.b)({type:String,json:{write:!0}})],v.prototype,"outStatisticFieldName",void 0),Object(s.a)([Object(p.b)({type:String,json:{read:{source:"statisticType",reader:y.read},write:{target:"statisticType",writer:y.write}}})],v.prototype,"statisticType",void 0),Object(s.a)([Object(p.b)({type:Object})],v.prototype,"statisticParameters",void 0),Object(s.a)([Object(f.a)("statisticParameters")],v.prototype,"writeStatisticParameters",null);var h=v=a=Object(s.a)([Object(d.a)("esri.rest.support.StatisticDefinition")],v)},715:function(e,t,r){"use strict";r.d(t,"a",(function(){return c})),r.d(t,"b",(function(){return b})),r.d(t,"c",(function(){return s}));r(19);var a=r(29),i=r(66),n=r(165),o=r(212),l=r(691);function s(e,t,r,n){var o=function(e,t){return e?function(e,t){if(!t||"web-scene"!==t.origin)return!0;switch(e.type){case"simple":case"unique-value":case"class-breaks":return!0;default:return!1}}(e,t)?e.write({},t):(t.messages&&t.messages.push(new a.a("renderer:unsupported","Renderer of type '".concat(e.declaredClass,"' are not supported in scenes."),{renderer:e,context:t})),null):null}(e,n);o&&Object(i.c)(r,o,t)}function c(e,t){return b(e,null,t)}var u=Object(o.b)({types:l.a});function b(e,t,r){return e?e&&(e.styleName||e.styleUrl)&&"uniqueValue"!==e.type?(r&&r.messages&&r.messages.push(new n.a("renderer:unsupported","Only UniqueValueRenderer can be referenced from a web style, but found '"+e.type+"'",{definition:e,context:r})),null):u(e,t,r):null}},717:function(e,t,r){"use strict";r.d(t,"a",(function(){return h}));var a,i=r(2),n=r(4),o=r(5),l=r(6),s=r(0),c=(r(114),r(42)),u=r(26),b=r(18),p=r(1),d=(r(14),r(19),r(15),r(10)),f=r(58),y=new c.a({upperLeft:"upper-left",lowerLeft:"lower-left"}),v=a=function(e){Object(o.a)(r,e);var t=Object(l.a)(r);function r(e){var a;return Object(i.a)(this,r),(a=t.call(this,e)).extent=null,a.mode="view",a.originPosition="upper-left",a.tolerance=1,a}return Object(n.a)(r,[{key:"clone",value:function(){return new a(Object(b.a)({extent:this.extent,mode:this.mode,originPosition:this.originPosition,tolerance:this.tolerance}))}}]),r}(u.a);Object(s.a)([Object(p.b)({type:f.a,json:{write:{overridePolicy:function(){return{enabled:"view"===this.mode}}}}})],v.prototype,"extent",void 0),Object(s.a)([Object(p.b)({type:["view","edit"],json:{write:!0}})],v.prototype,"mode",void 0),Object(s.a)([Object(p.b)({type:String,json:{read:y.read,write:y.write}})],v.prototype,"originPosition",void 0),Object(s.a)([Object(p.b)({type:Number,json:{write:{overridePolicy:function(){return{enabled:"view"===this.mode}}}}})],v.prototype,"tolerance",void 0);var h=v=a=Object(s.a)([Object(d.a)("esri.rest.support.QuantizationParameters")],v)},721:function(e,t,r){"use strict";r.d(t,"a",(function(){return c}));var a=r(2),i=r(5),n=r(6),o=r(0),l=r(1),s=(r(19),r(14),r(15),r(10)),c=function(e){var t=function(e){Object(i.a)(r,e);var t=Object(n.a)(r);function r(){var e;return Object(a.a)(this,r),(e=t.apply(this,arguments)).customParameters=null,e}return r}(e);return Object(o.a)([Object(l.b)({type:Object,json:{write:{overridePolicy:function(e){return{enabled:!!(e&&Object.keys(e).length>0)}}}}})],t.prototype,"customParameters",void 0),t=Object(o.a)([Object(s.a)("esri.layers.mixins.CustomParametersMixin")],t)}},724:function(e,t,r){"use strict";r.d(t,"a",(function(){return u}));var a=r(2),i=r(4),n=r(5),o=r(6),l=r(0),s=r(1),c=(r(19),r(14),r(15),r(10));var u=function(e){var t=function(e){Object(n.a)(r,e);var t=Object(o.a)(r);function r(){return Object(a.a)(this,r),t.apply(this,arguments)}return Object(i.a)(r,[{key:"apiKey",get:function(){var e;return this._isOverridden("apiKey")?this._get("apiKey"):function(e){return"portalItem"in e}(this)?null==(e=this.portalItem)?void 0:e.apiKey:null},set:function(e){null!=e?this._override("apiKey",e):(this._clearOverride("apiKey"),this.clear("apiKey","user"))}}]),r}(e);return Object(l.a)([Object(s.b)({type:String})],t.prototype,"apiKey",null),t=Object(l.a)([Object(c.a)("esri.layers.mixins.APIKeyMixin")],t)}},725:function(e,t,r){"use strict";r.d(t,"a",(function(){return s})),r.d(t,"b",(function(){return c})),r.d(t,"c",(function(){return b})),r.d(t,"d",(function(){return u}));r(19),r(11);var a=r(166),i=r(98),n=r(143),o=r(136),l=r(703),s=(n.a.fromJSON(l.a),i.a.fromJSON(l.c),a.a.fromJSON(l.b),o.a.fromJSON(l.d));var c=n.a.fromJSON(l.e),u=i.a.fromJSON(l.g),b=a.a.fromJSON(l.f)},726:function(e,t,r){"use strict";r.d(t,"a",(function(){return f})),r.d(t,"b",(function(){return d}));var a=r(2),i=r(4),n=r(5),o=r(6),l=r(0),s=r(60),c=r(183),u=r(1),b=r(10),p=r(763),d=function(e){var t=function(e){Object(n.a)(r,e);var t=Object(o.a)(r);function r(){return Object(a.a)(this,r),t.apply(this,arguments)}return Object(i.a)(r,[{key:"destroy",value:function(){this.destroyed||(this.handles.destroy(),this.updatingHandles.destroy())}},{key:"handles",get:function(){return this._get("handles")||new c.a}},{key:"updatingHandles",get:function(){return this._get("updatingHandles")||new p.a}}]),r}(e);return Object(l.a)([Object(u.b)({readOnly:!0})],t.prototype,"handles",null),Object(l.a)([Object(u.b)({readOnly:!0})],t.prototype,"updatingHandles",null),t=Object(l.a)([Object(b.a)("esri.core.HandleOwner")],t),t},f=function(e){Object(n.a)(r,e);var t=Object(o.a)(r);function r(){return Object(a.a)(this,r),t.apply(this,arguments)}return r}(d(s.a));f=Object(l.a)([Object(b.a)("esri.core.HandleOwner")],f)},733:function(e,t,r){"use strict";r.d(t,"a",(function(){return O}));var a=r(2),i=r(4),n=r(5),o=r(6),l=r(0),s=r(26),c=r(18),u=r(1),b=(r(14),r(19),r(15),r(57)),p=r(10),d=r(43),f=r(664),y=(r(660),r(661)),v=r(662),h=r(713),j=function(e){Object(n.a)(r,e);var t=Object(o.a)(r);function r(e){var i;return Object(a.a)(this,r),(i=t.call(this,e)).id=null,i.name=null,i.domains=null,i.templates=null,i}return Object(i.a)(r,[{key:"readDomains",value:function(e){var t={};for(var r in e)if(e.hasOwnProperty(r)){var a=e[r];switch(a.type){case"range":t[r]=v.a.fromJSON(a);break;case"codedValue":t[r]=f.a.fromJSON(a);break;case"inherited":t[r]=y.a.fromJSON(a)}}return t}},{key:"writeDomains",value:function(e,t){var r={};for(var a in e)e.hasOwnProperty(a)&&(r[a]=e[a]&&e[a].toJSON());Object(c.c)(r),t.domains=r}},{key:"readTemplates",value:function(e){return e&&e.map((function(e){return new h.a(e)}))}},{key:"writeTemplates",value:function(e,t){t.templates=e&&e.map((function(e){return e.toJSON()}))}}]),r}(s.a);Object(l.a)([Object(u.b)({json:{write:!0}})],j.prototype,"id",void 0),Object(l.a)([Object(u.b)({json:{write:!0}})],j.prototype,"name",void 0),Object(l.a)([Object(u.b)({json:{write:!0}})],j.prototype,"domains",void 0),Object(l.a)([Object(b.a)("domains")],j.prototype,"readDomains",null),Object(l.a)([Object(d.a)("domains")],j.prototype,"writeDomains",null),Object(l.a)([Object(u.b)({json:{write:!0}})],j.prototype,"templates",void 0),Object(l.a)([Object(b.a)("templates")],j.prototype,"readTemplates",null),Object(l.a)([Object(d.a)("templates")],j.prototype,"writeTemplates",null);var O=j=Object(l.a)([Object(p.a)("esri.layers.support.FeatureType")],j)},743:function(e,t,r){"use strict";r.d(t,"a",(function(){return _}));var a,i=r(13),n=r(2),o=r(4),l=r(5),s=r(6),c=r(0),u=r(42),b=r(26),p=r(11),d=r(135),f=r(1),y=(r(19),r(14)),v=(r(15),r(57)),h=r(10),j=r(43),O=r(48),m=r(45),g=r(333),w=r(53),S=r(71),x=r(768),k=new u.a({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc",LERC2D:"lerc2d",RAW:"raw",pbf:"pbf"}),I=a=function(e){Object(l.a)(r,e);var t=Object(s.a)(r);function r(e){var a;return Object(n.a)(this,r),(a=t.call(this,e)).dpi=96,a.format=null,a.origin=null,a.minScale=0,a.maxScale=0,a.size=null,a.spatialReference=null,a}return Object(o.a)(r,[{key:"isWrappable",get:function(){var e=this.spatialReference,t=this.origin;if(e&&t){var r=Object(w.e)(e);return e.isWrappable&&Math.abs(r.origin[0]-t.x)<=r.dx}return!1}},{key:"readOrigin",value:function(e,t){return O.a.fromJSON(Object(i.a)({spatialReference:t.spatialReference},e))}},{key:"lods",set:function(e){var t=this,r=0,a=0,i=[];this._levelToLOD={},e&&(r=-1/0,a=1/0,e.forEach((function(e){i.push(e.scale),r=e.scale>r?e.scale:r,a=e.scale<a?e.scale:a,t._levelToLOD[e.level]=e}))),this._set("scales",i),this._set("minScale",r),this._set("maxScale",a),this._set("lods",e),this._initializeUpsampleLevels()}},{key:"readSize",value:function(e,t){return[t.cols,t.rows]}},{key:"writeSize",value:function(e,t){t.cols=e[0],t.rows=e[1]}},{key:"zoomToScale",value:function(e){var t=this.scales;if(e<=0)return t[0];if(e>=t.length-1)return t[t.length-1];var r=Math.floor(e),a=r+1;return t[r]/Math.pow(t[r]/t[a],e-r)}},{key:"scaleToZoom",value:function(e){for(var t=this.scales,r=t.length-1,a=0;a<r;a++){var i=t[a],n=t[a+1];if(i<=e)return a;if(n===e)return a+1;if(i>e&&n<e)return a+Math.log(i/e)/Math.log(i/n)}return a}},{key:"snapScale",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.95,r=this.scaleToZoom(e);return r%Math.floor(r)>=t?this.zoomToScale(Math.ceil(r)):this.zoomToScale(Math.floor(r))}},{key:"tileAt",value:function(e,t,r,a){var i,n,o=this.lodAt(e);if(!o)return null;if("number"==typeof t)i=t,n=r;else if(Object(w.d)(t.spatialReference,this.spatialReference))i=t.x,n=t.y,a=r;else{var l=Object(S.d)(t,this.spatialReference);if(Object(p.i)(l))return null;i=l.x,n=l.y,a=r}var s=o.resolution*this.size[0],c=o.resolution*this.size[1];return a||(a={id:null,level:0,row:0,col:0,extent:Object(g.e)()}),a.level=e,a.row=Math.floor((this.origin.y-n)/c+.001),a.col=Math.floor((i-this.origin.x)/s+.001),this.updateTileInfo(a),a}},{key:"updateTileInfo",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=this.lodAt(e.level);if(!r&&1===t){var a=this.lods[this.lods.length-1];a.level<e.level&&(r=a)}if(r){var i=e.level-r.level,n=r.resolution*this.size[0]/Math.pow(2,i),o=r.resolution*this.size[1]/Math.pow(2,i);e.id="".concat(e.level,"/").concat(e.row,"/").concat(e.col),e.extent||(e.extent=Object(g.e)()),e.extent[0]=this.origin.x+e.col*n,e.extent[1]=this.origin.y-(e.row+1)*o,e.extent[2]=e.extent[0]+n,e.extent[3]=e.extent[1]+o}}},{key:"upsampleTile",value:function(e){var t=this._upsampleLevels[e.level];return!(!t||-1===t.parentLevel)&&(e.level=t.parentLevel,e.row=Math.floor(e.row/t.factor+.001),e.col=Math.floor(e.col/t.factor+.001),this.updateTileInfo(e),!0)}},{key:"getTileBounds",value:function(e,t){var r=this.lodAt(t.level).resolution,a=r*this.size[0],i=r*this.size[1];return e[0]=this.origin.x+t.col*a,e[1]=this.origin.y-(t.row+1)*i,e[2]=e[0]+a,e[3]=e[1]+i,e}},{key:"lodAt",value:function(e){return this._levelToLOD&&this._levelToLOD[e]||null}},{key:"clone",value:function(){return a.fromJSON(this.write({}))}},{key:"_initializeUpsampleLevels",value:function(){var e=this.lods;this._upsampleLevels=[];for(var t=null,r=0;r<e.length;r++){var a=e[r];this._upsampleLevels[a.level]={parentLevel:t?t.level:-1,factor:t?t.resolution/a.resolution:0},t=a}}}],[{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.resolutionFactor,r=void 0===t?1:t,i=e.scales,n=e.size,o=void 0===n?256:n,l=e.spatialReference,s=void 0===l?m.a.WebMercator:l,c=e.numLODs,u=void 0===c?24:c;if(!Object(w.l)(s)){var b=[];if(i)for(var p=0;p<i.length;p++){var f=i[p];b.push({level:p,scale:f,resolution:f})}else for(var y=5e-4,v=u-1;v>=0;v--)b.unshift({level:v,scale:y,resolution:y}),y*=2;return new a({dpi:96,lods:b,origin:new O.a(0,0,s),size:[o,o],spatialReference:s})}var h=Object(w.e)(s),j=e.origin?new O.a({x:e.origin.x,y:e.origin.y,spatialReference:s}):new O.a(h?{x:h.origin[0],y:h.origin[1],spatialReference:s}:{x:0,y:0,spatialReference:s}),g=96,S=1/(39.37*Object(d.d)(s)*g),x=[];if(i)for(var k=0;k<i.length;k++){var I=i[k],_=I*S;x.push({level:k,scale:I,resolution:_})}else{var T=Object(w.h)(s)?512/o*591657527.5917094:256/o*591657527.591555,L=Math.ceil(u/r);x.push({level:0,scale:T,resolution:T*S});for(var P=1;P<L;P++){var F=T/Math.pow(2,r),V=F*S;x.push({level:P,scale:F,resolution:V}),T=F}}return new a({dpi:g,lods:x,origin:j,size:[o,o],spatialReference:s})}}]),r}(b.a);Object(c.a)([Object(f.b)({type:Number,json:{write:!0}})],I.prototype,"compressionQuality",void 0),Object(c.a)([Object(f.b)({type:Number,json:{write:!0}})],I.prototype,"dpi",void 0),Object(c.a)([Object(f.b)({type:String,json:{read:k.read,write:k.write,origins:{"web-scene":{read:!1,write:!1}}}})],I.prototype,"format",void 0),Object(c.a)([Object(f.b)({readOnly:!0})],I.prototype,"isWrappable",null),Object(c.a)([Object(f.b)({type:O.a,json:{write:!0}})],I.prototype,"origin",void 0),Object(c.a)([Object(v.a)("origin")],I.prototype,"readOrigin",null),Object(c.a)([Object(f.b)({type:[x.a],value:null,json:{write:!0}})],I.prototype,"lods",null),Object(c.a)([Object(f.b)({readOnly:!0})],I.prototype,"minScale",void 0),Object(c.a)([Object(f.b)({readOnly:!0})],I.prototype,"maxScale",void 0),Object(c.a)([Object(f.b)({readOnly:!0})],I.prototype,"scales",void 0),Object(c.a)([Object(f.b)({cast:function(e){return Array.isArray(e)?e:"number"==typeof e?[e,e]:[256,256]}})],I.prototype,"size",void 0),Object(c.a)([Object(v.a)("size",["rows","cols"])],I.prototype,"readSize",null),Object(c.a)([Object(j.a)("size",{cols:{type:y.a},rows:{type:y.a}})],I.prototype,"writeSize",null),Object(c.a)([Object(f.b)({type:m.a,json:{write:!0}})],I.prototype,"spatialReference",void 0);var _=I=a=Object(c.a)([Object(h.a)("esri.layers.support.TileInfo")],I)},745:function(e,t,r){"use strict";r.d(t,"a",(function(){return f}));var a,i=r(2),n=r(4),o=r(5),l=r(6),s=r(0),c=r(52),u=r(26),b=r(1),p=(r(19),r(14),r(15),r(10)),d=a=function(e){Object(o.a)(r,e);var t=Object(l.a)(r);function r(e){var a;return Object(i.a)(this,r),(a=t.call(this,e)).floorField=null,a.viewAllMode=!1,a.viewAllLevelIds=new c.a,a}return Object(n.a)(r,[{key:"clone",value:function(){return new a({floorField:this.floorField,viewAllMode:this.viewAllMode,viewAllLevelIds:this.viewAllLevelIds})}}]),r}(u.a);Object(s.a)([Object(b.b)({type:String,json:{write:!0}})],d.prototype,"floorField",void 0),Object(s.a)([Object(b.b)({json:{read:!1,write:!1}})],d.prototype,"viewAllMode",void 0),Object(s.a)([Object(b.b)({json:{read:!1,write:!1}})],d.prototype,"viewAllLevelIds",void 0);var f=d=a=Object(s.a)([Object(p.a)("esri.layers.support.LayerFloorInfo")],d)},751:function(e,t,r){"use strict";r.d(t,"a",(function(){return x})),r.d(t,"b",(function(){return v})),r.d(t,"c",(function(){return h})),r.d(t,"d",(function(){return j})),r.d(t,"e",(function(){return O})),r.d(t,"f",(function(){return w})),r.d(t,"g",(function(){return y}));var a=r(21),i=r(22),n=r(46),o=r(210),l=r(694),s=r(15),c=r(11),u=r(683),b=r(704),p=s.a.getLogger("esri.renderers.visualVariables.support.visualVariableUtils"),d=new o.a,f=Math.PI,y=/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i;function v(e,t,r){var a="visualVariables"in e&&e.visualVariables?e.visualVariables.filter((function(e){return"color"===e.type}))[0]:e;if(a)if("esri.renderers.visualVariables.ColorVariable"===a.declaredClass){var i="number"==typeof t,o=i?null:t,l=o&&o.attributes,s=i?t:null,u=a.field,b=a.cache,d=b.ipData,f=b.hasExpression,y=a.cache.compiledFunc;if(!u&&!f){var v=a.stops;return v&&v[0]&&v[0].color}if("number"!=typeof s)if(f){if(!Object(c.j)(r)||!Object(c.j)(r.arcade))return void p.error("Use of arcade expressions requires an arcade context");var h={viewingMode:r.viewingMode,scale:r.scale,spatialReference:r.spatialReference},j=r.arcade.arcadeUtils,O=j.getViewInfo(h),m=j.createExecContext(o,O);if(!y){var g=j.createSyntaxTree(a.valueExpression);y=j.createFunction(g),a.cache.compiledFunc=y}s=j.executeFunction(y,m)}else l&&(s=l[u]);var w=a.normalizationField,x=l?parseFloat(l[w]):void 0;if(null!=s&&(!w||i||!isNaN(x)&&0!==x)){isNaN(x)||i||(s/=x);var k=S(s,d);if(k){var I=k[0],_=k[1],T=I===_?a.stops[I].color:n.a.blendColors(a.stops[I].color,a.stops[_].color,k[2],Object(c.j)(r)?r.color:void 0);return new n.a(T)}}}else p.warn("The visualVariable should be an instance of esri.renderers.visualVariables.ColorVariable")}function h(e,t,r){var a="visualVariables"in e&&e.visualVariables?e.visualVariables.filter((function(e){return"opacity"===e.type}))[0]:e;if(a)if("esri.renderers.visualVariables.OpacityVariable"===a.declaredClass){var i="number"==typeof t,n=i?null:t,o=n&&n.attributes,l=i?t:null,s=a.field,u=a.cache,b=u.ipData,d=u.hasExpression,f=a.cache.compiledFunc;if(!s&&!d){var y=a.stops;return y&&y[0]&&y[0].opacity}if("number"!=typeof l)if(d){if(Object(c.i)(r)||Object(c.i)(r.arcade))return void p.error("Use of arcade expressions requires an arcade context");var v={viewingMode:r.viewingMode,scale:r.scale,spatialReference:r.spatialReference},h=r.arcade.arcadeUtils,j=h.getViewInfo(v),O=h.createExecContext(n,j);if(!f){var m=h.createSyntaxTree(a.valueExpression);f=h.createFunction(m),a.cache.compiledFunc=f}l=h.executeFunction(f,O)}else o&&(l=o[s]);var g=a.normalizationField,w=o?parseFloat(o[g]):void 0;if(null!=l&&(!g||i||!isNaN(w)&&0!==w)){isNaN(w)||i||(l/=w);var x=S(l,b);if(x){var k=x[0],I=x[1];if(k===I)return a.stops[k].opacity;var _=a.stops[k].opacity;return _+(a.stops[I].opacity-_)*x[2]}}}else p.warn("The visualVariable should be an instance of esri.renderers.visualVariables.OpacityVariable")}function j(e,t,r){var a="visualVariables"in e&&e.visualVariables?e.visualVariables.filter((function(e){return"rotation"===e.type}))[0]:e;if(a){if("esri.renderers.visualVariables.RotationVariable"===a.declaredClass){var i=a.axis||"heading",n="heading"===i&&"arithmetic"===a.rotationType?90:0,o="heading"===i&&"arithmetic"===a.rotationType?-1:1,l="number"==typeof t?null:t,s=l&&l.attributes,u=a.field,b=a.cache.hasExpression,d=a.cache.compiledFunc,f=0;if(!u&&!b)return f;if(b){if(Object(c.i)(r)||Object(c.i)(r.arcade))return void p.error("Use of arcade expressions requires an arcade context");var y={viewingMode:r.viewingMode,scale:r.scale,spatialReference:r.spatialReference},v=r.arcade.arcadeUtils,h=v.getViewInfo(y),j=v.createExecContext(l,h);if(!d){var O=v.createSyntaxTree(a.valueExpression);d=v.createFunction(O),a.cache.compiledFunc=d}f=v.executeFunction(d,j)}else s&&(f=s[u]||0);return f="number"!=typeof f||isNaN(f)?null:n+o*f}p.warn("The visualVariable should be an instance of esri.renderers.visualVariables.RotationVariable")}}function O(e,t,r){var a="visualVariables"in e&&e.visualVariables?e.visualVariables.filter((function(e){return"size"===e.type}))[0]:e;if(a){if("esri.renderers.visualVariables.SizeVariable"===a.declaredClass){var n=function(e,t,r,a,n){switch(t.transformationType){case"additive":return function(e,t,r,a){return e+(m(t.minSize,r,a)||t.minDataValue)}(e,t,r,a);case"constant":return function(e,t,r){var a=e.stops,i=a&&a.length&&a[0].size;return null==i&&(i=e.minSize),m(i,t,r)}(t,r,a);case"clamped-linear":return function(e,t,r,a){var i=(e-t.minDataValue)/(t.maxDataValue-t.minDataValue),n=m(t.minSize,r,a),o=m(t.maxSize,r,a),l=Object(c.j)(a)?a.shape:void 0;if(e<=t.minDataValue)return n;if(e>=t.maxDataValue)return o;if("area"===t.scaleBy&&l){var s="circle"===l,u=s?f*Math.pow(n/2,2):n*n,b=u+i*((s?f*Math.pow(o/2,2):o*o)-u);return s?2*Math.sqrt(b/f):Math.sqrt(b)}return n+i*(o-n)}(e,t,r,a);case"proportional":return function(e,t,r,a){var i=Object(c.j)(a)?a.shape:void 0,n=e/t.minDataValue,o=m(t.minSize,r,a),l=m(t.maxSize,r,a);return g("circle"===i?2*Math.sqrt(n*Math.pow(o/2,2)):"square"===i||"diamond"===i||"image"===i?Math.sqrt(n*Math.pow(o,2)):n*o,o,l)}(e,t,r,a);case"stops":return function(e,t,r,a,n){var o=S(e,n),l=Object(i.a)(o,3),s=l[0],c=l[1],u=l[2];if(s===c)return m(t.stops[s].size,r,a);var b=m(t.stops[s].size,r,a);return b+(m(t.stops[c].size,r,a)-b)*u}(e,t,r,a,n);case"real-world-size":return function(e,t,r,a){var i=(Object(c.j)(a)&&a.resolution?a.resolution:1)*u.a[t.valueUnit],n=m(t.minSize,r,a),o=m(t.maxSize,r,a),l=t.valueRepresentation;return g("area"===l?2*Math.sqrt(e/f)/i:"radius"===l||"distance"===l?2*e/i:e/i,n,o)}(e,t,r,a);case"identity":return e;case"unknown":return null}}(function(e,t,r){var a="number"==typeof t,i=a?null:t,n=i&&i.attributes,o=a?t:null,l=e.cache.isScaleDriven,s=e.cache.compiledFunc;if(l){var u=Object(c.j)(r)?r.scale:void 0,d=Object(c.j)(r)?r.view:void 0;o=null==u||"3d"===d?function(e){var t=null,r=null,a=e.stops;return a?(t=a[0].value,r=a[a.length-1].value):(t=e.minDataValue||0,r=e.maxDataValue||0),(t+r)/2}(e):u}else if(!a)switch(e.inputValueType){case"expression":if(Object(c.i)(r)||Object(c.i)(r.arcade))return void p.error("Use of arcade expressions requires an arcade context");var f={viewingMode:r.viewingMode,scale:r.scale,spatialReference:r.spatialReference},y=r.arcade.arcadeUtils,v=y.getViewInfo(f),h=y.createExecContext(i,v);if(!s){var j=y.createSyntaxTree(e.valueExpression);s=y.createFunction(j),e.cache.compiledFunc=s}o=y.executeFunction(s,h);break;case"field":n&&(o=n[e.field]);break;case"unknown":o=null}if(!Object(b.d)(o))return null;if(a||!e.normalizationField)return o;var O=n?parseFloat(n[e.normalizationField]):null;return Object(b.d)(O)&&0!==O?o/O:null}(a,t,r),a,t,r,a.cache.ipData);return null==n||isNaN(n)?0:n}p.warn("The visualVariable should be an instance of esri.renderers.visualVariables.SizeVariable")}}function m(e,t,r){return null==e?null:Object(b.c)(e)?O(e,t,r):Object(b.d)(e)?e:null}function g(e,t,r){return Object(b.d)(r)&&e>r?r:Object(b.d)(t)&&e<t?t:e}function w(e,t,r){if(!(e.cache.isScaleDriven&&"3d"===r||t))return null;var a={scale:t,view:r},i=m(e.minSize,d,a),n=m(e.maxSize,d,a);if(null!=i||null!=n){if(i>n){var o=n;n=i,i=o}return{minSize:i,maxSize:n}}}function S(e,t){if(t){var r=0,a=t.length-1;return t.some((function(t,i){return e<t?(a=i,!0):(r=i,!1)})),[r,a,(e-t[r])/(t[a]-t[r])]}}function x(e,t,r){var i,n=["proportional","proportional","proportional"],o=Object(a.a)(e);try{for(o.s();!(i=o.n()).done;){var s=i.value,c=s.useSymbolValue?"symbol-value":O(s,t,r);switch(s.axis){case"width":n[0]=c;break;case"depth":n[1]=c;break;case"height":n[2]=c;break;case"width-and-depth":n[0]=c,n[1]=c;break;case"all":case void 0:case null:n[0]=c,n[1]=c,n[2]=c;break;default:Object(l.a)(s.axis)}}}catch(u){o.e(u)}finally{o.f()}return n}},763:function(e,t,r){"use strict";r.d(t,"a",(function(){return h}));var a=r(2),i=r(4),n=r(5),o=r(6),l=r(0),s=r(60),c=r(183),u=r(11),b=r(241),p=r(99),d=r(100),f=r(215),y=r(1),v=r(10),h=function(e){Object(n.a)(r,e);var t=Object(o.a)(r);function r(){var e;return Object(a.a)(this,r),(e=t.apply(this,arguments)).updating=!1,e.handleId=0,e.handles=new c.a,e.scheduleHandleId=0,e.pendingPromises=new Set,e}return Object(i.a)(r,[{key:"destroy",value:function(){this.removeAll(),this.handles.destroy()}},{key:"add",value:function(e,t,r){var a=this,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,n=0!=(1&i),o=++this.handleId;n||this.installSyncUpdatingWatch(e,t,o);var l=0!=(2&i)?Object(p.a)(e,t,r,n):e.watch(t,r,n);return this.handles.add(l,o),{remove:function(){return a.handles.remove(o)}}}},{key:"addOnCollectionPropertyChange",value:function(e,t,r){var a=this,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,n=0!=(2&i),o=++this.handleId;return this.handles.add([Object(p.b)(e,t,"after-changes",this.createSyncUpdatingCallback()),Object(p.b)(e,t,"change",r,n?function(e){r({added:e.items,removed:[],moved:[],target:e})}:void 0)],o),{remove:function(){a.handles.remove(o)}}}},{key:"addOnCollectionChange",value:function(e,t){var r=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=0!=(2&a),n=++this.handleId;return this.handles.add([e.on("after-changes",this.createSyncUpdatingCallback()),e.on("change",t)],n),i&&t({added:e.items,removed:[],moved:[],target:e}),{remove:function(){r.handles.remove(n)}}}},{key:"addPromise",value:function(e){var t=this;if(Object(u.i)(e))return e;var r=++this.handleId;this.handles.add({remove:function(){t.pendingPromises.delete(e)&&(0!==t.pendingPromises.size||t.handles.has(j)||t._set("updating",!1))}},r),this.pendingPromises.add(e),this._set("updating",!0);var a=function(){return t.handles.remove(r)};return e.then(a,a),e}},{key:"removeAll",value:function(){this.pendingPromises.clear(),this.handles.removeAll(),this._set("updating",!1)}},{key:"installSyncUpdatingWatch",value:function(e,t,r){var a=this.createSyncUpdatingCallback(),i=Object(f.b)((function(){return Object(d.c)(e,t)}),a);return this.handles.add(i,r),i}},{key:"createSyncUpdatingCallback",value:function(){var e=this;return function(){e.handles.remove(j),++e.scheduleHandleId;var t=e.scheduleHandleId;e._get("updating")||e._set("updating",!0),e.handles.add(Object(b.a)((function(){t===e.scheduleHandleId&&(e._set("updating",e.pendingPromises.size>0),e.handles.remove(j))})),j)}}}]),r}(s.a);Object(l.a)([Object(y.b)({readOnly:!0})],h.prototype,"updating",void 0),h=Object(l.a)([Object(v.a)("esri.views.support.WatchUpdatingTracking")],h);var j=-42},768:function(e,t,r){"use strict";r.d(t,"a",(function(){return f}));var a,i=r(2),n=r(4),o=r(5),l=r(6),s=r(0),c=r(26),u=r(1),b=(r(19),r(14)),p=(r(15),r(10)),d=a=function(e){Object(o.a)(r,e);var t=Object(l.a)(r);function r(e){var a;return Object(i.a)(this,r),(a=t.call(this,e)).cols=null,a.level=0,a.levelValue=null,a.resolution=0,a.rows=null,a.scale=0,a}return Object(n.a)(r,[{key:"clone",value:function(){return new a({cols:this.cols,level:this.level,levelValue:this.levelValue,resolution:this.resolution,rows:this.rows,scale:this.scale})}}]),r}(c.a);Object(s.a)([Object(u.b)({type:Number,json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],d.prototype,"cols",void 0),Object(s.a)([Object(u.b)({type:b.a,json:{write:!0}})],d.prototype,"level",void 0),Object(s.a)([Object(u.b)({type:String,json:{write:!0}})],d.prototype,"levelValue",void 0),Object(s.a)([Object(u.b)({type:Number,json:{write:!0}})],d.prototype,"resolution",void 0),Object(s.a)([Object(u.b)({type:Number,json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],d.prototype,"rows",void 0),Object(s.a)([Object(u.b)({type:Number,json:{write:!0}})],d.prototype,"scale",void 0);var f=d=a=Object(s.a)([Object(p.a)("esri.layers.support.LOD")],d)},808:function(e,t,r){"use strict";r.d(t,"a",(function(){return v}));var a=r(21),i=r(2),n=r(4),o=r(5),l=r(6),s=r(0),c=r(52),u=r(726),b=r(11),p=r(1),d=(r(19),r(14),r(15),r(10)),f=r(215),y=function(e){Object(o.a)(r,e);var t=Object(l.a)(r);function r(e){var a;return Object(i.a)(this,r),(a=t.call(this,e)).getCollections=null,a}return Object(n.a)(r,[{key:"initialize",value:function(){var e=this;this.handles.add(Object(f.a)((function(){return e.refresh()})))}},{key:"destroy",value:function(){this.getCollections=null}},{key:"refresh",value:function(){var e=Object(b.j)(this.getCollections)?this.getCollections():null;if(Object(b.i)(e))this.removeAll();else{var t,r=0,i=Object(a.a)(e);try{for(i.s();!(t=i.n()).done;){var n=t.value;Object(b.j)(n)&&(r=this._processCollection(r,n))}}catch(o){i.e(o)}finally{i.f()}this.splice(r,this.length)}}},{key:"_createNewInstance",value:function(e){return new c.a(e)}},{key:"_processCollection",value:function(e,t){if(!t)return e;var r,i=this.itemFilterFunction?this.itemFilterFunction:function(e){return!!e},n=Object(a.a)(t);try{for(n.s();!(r=n.n()).done;){var o=r.value;if(o){if(i(o)){var l=this.indexOf(o,e);l>=0?l!==e&&this.reorder(o,e):this.add(o,e),++e}if(this.getChildrenFunction){var s=this.getChildrenFunction(o);if(Array.isArray(s)){var c,u=Object(a.a)(s);try{for(u.s();!(c=u.n()).done;){var b=c.value;e=this._processCollection(e,b)}}catch(p){u.e(p)}finally{u.f()}}else e=this._processCollection(e,s)}}}}catch(p){n.e(p)}finally{n.f()}return e}}]),r}(Object(u.b)(c.a));Object(s.a)([Object(p.b)()],y.prototype,"getCollections",void 0),Object(s.a)([Object(p.b)()],y.prototype,"getChildrenFunction",void 0),Object(s.a)([Object(p.b)()],y.prototype,"itemFilterFunction",void 0);var v=y=Object(s.a)([Object(d.a)("esri.core.CollectionFlattener")],y)},824:function(e,t,r){"use strict";r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return l})),r.d(t,"c",(function(){return i}));var a=r(21);function i(e,t,r){return t.flatten((function(e){return e.sublayers})).length!==e.length||(!!e.some((function(e){return e.originIdOf("minScale")>r||e.originIdOf("maxScale")>r||e.originIdOf("renderer")>r||e.originIdOf("labelingInfo")>r||e.originIdOf("opacity")>r||e.originIdOf("labelsVisible")>r||e.originIdOf("source")>r}))||!o(e,t))}function n(e,t,r){return!!e.some((function(e){var t=e.source;return!(!t||"map-layer"===t.type&&t.mapLayerId===e.id&&(!t.gdbVersion||t.gdbVersion===r.gdbVersion))||e.originIdOf("renderer")>2||e.originIdOf("labelingInfo")>2||e.originIdOf("opacity")>2||e.originIdOf("labelsVisible")>2}))||!o(e,t)}function o(e,t){if(!e||!e.length)return!0;var r=t.slice().reverse().flatten((function(e){var t=e.sublayers;return t&&t.toArray().reverse()})).map((function(e){return e.id})).toArray();if(e.length>r.length)return!1;var i,n=0,o=r.length,l=Object(a.a)(e);try{for(l.s();!(i=l.n()).done;){for(var s=i.value.id;n<o&&r[n]!==s;)n++;if(n>=o)return!1}}catch(c){l.e(c)}finally{l.f()}return!0}function l(e){return!!e&&e.some((function(e){return null!=e.minScale||e.layerDefinition&&null!=e.layerDefinition.minScale}))}},832:function(e,t,r){"use strict";function a(e){var t,r=e.layer;return"floorInfo"in r&&null!=(t=r.floorInfo)&&t.floorField&&"floors"in e.view?o(e.view.floors,r.floorInfo.floorField):null}function i(e,t){var r;return"floorInfo"in t&&null!=(r=t.floorInfo)&&r.floorField?o(e,t.floorInfo.floorField):null}function n(e,t){var r=t.definitionExpression;return e?r?"(".concat(r,") AND (").concat(e,")"):e:r}function o(e,t){if(null==e||!e.length)return null;var r=e.filter((function(e){return""!==e})).map((function(e){return"'".concat(e,"'")}));return r.push("''"),"".concat(t," IN (").concat(r.join(","),") OR ").concat(t," IS NULL")}r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return a})),r.d(t,"c",(function(){return i}))},838:function(e,t,r){"use strict";r.d(t,"a",(function(){return l}));var a=r(22),i=r(2),n=r(4),o=r(29),l=function(){function e(t,r){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";Object(i.a)(this,e),this.major=t,this.minor=r,this._context=a}return Object(n.a)(e,[{key:"lessThan",value:function(e,t){return this.major<e||e===this.major&&this.minor<t}},{key:"since",value:function(e,t){return!this.lessThan(e,t)}},{key:"validate",value:function(e){if(this.major!==e.major){var t=this._context&&this._context+":",r=this._context&&this._context+" ";throw new o.a(t+"unsupported-version","Required major ".concat(r,"version is '").concat(this.major,"', but got '${version.major}.${version.minor}'"),{version:e})}}},{key:"clone",value:function(){return new e(this.major,this.minor,this._context)}}],[{key:"parse",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=t.split("."),n=Object(a.a)(i,2),l=n[0],s=n[1],c=/^\s*\d+\s*$/;if(!l||!l.match||!l.match(c))throw new o.a((r&&r+":")+"invalid-version","Expected major version to be a number, but got '${version}'",{version:t});if(!s||!s.match||!s.match(c))throw new o.a((r&&r+":")+"invalid-version","Expected minor version to be a number, but got '${version}'",{version:t});var u=parseInt(l,10),b=parseInt(s,10);return new e(u,b,r)}}]),e}()},839:function(e,t,r){"use strict";r.d(t,"a",(function(){return ae}));var a,i=r(22),n=r(21),o=r(7),l=r.n(o),s=r(13),c=r(12),u=r(2),b=r(4),p=r(5),d=r(6),f=r(0),y=(r(114),r(214)),v=(r(700),r(686),r(688),r(689),r(663),r(687),r(701),r(715),r(691)),h=r(82),j=r(332),O=r(52),m=r(29),g=r(726),w=r(239),S=r(18),x=r(142),k=r(15),I=r(11),_=r(677),T=r(27),L=r(1),P=r(69),F=r(97),V=(r(19),r(57)),E=r(10),D=r(43),C=r(14),N=r(164),R=r(733),M=r(666),A=r(672),z=r(675),q=r(745),U=r(673),J=r(711),B=r(670),H=r(755),G=r(832),W=r(58);function $(e){return e&&"esriSMS"===e.type}function K(e,t,r){var a,i=this.originIdOf(t)>=Object(N.d)(r.origin);return{ignoreOrigin:!0,allowNull:i,enabled:!!r&&"map-image"===(null==(a=r.layer)?void 0:a.type)&&(r.writeSublayerStructure||i)}}function Q(e,t,r){var a;return{enabled:!!r&&"tile"===(null==(a=r.layer)?void 0:a.type)&&this._isOverridden(t)}}function X(e,t,r){return{ignoreOrigin:!0,enabled:r&&r.writeSublayerStructure||!1}}function Z(e,t,r){return{ignoreOrigin:!0,enabled:!!r&&(r.writeSublayerStructure||this.originIdOf(t)>=Object(N.d)(r.origin))}}var Y=k.a.getLogger("esri.layers.support.Sublayer"),ee=0,te=new Set;te.add("layer"),te.add("parent"),te.add("loaded"),te.add("loadStatus"),te.add("loadError"),te.add("loadWarnings");var re=a=function(e){Object(p.a)(o,e);var t=Object(d.a)(o);function o(e){var r;return Object(u.a)(this,o),(r=t.call(this,e)).capabilities=void 0,r.fields=null,r.fullExtent=null,r.globalIdField=null,r.legendEnabled=!0,r.objectIdField=null,r.popupEnabled=!0,r.popupTemplate=null,r.sourceJSON=null,r.title=null,r.typeIdField=null,r.types=null,r}return Object(b.a)(o,[{key:"load",value:function(){var e=Object(c.a)(l.a.mark((function e(t){var r=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(this.addResolvingPromise(Object(c.a)(l.a.mark((function e(){var a,i,n,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.layer||r.url){e.next=2;break}throw new m.a("sublayer:missing-layer","Sublayer can't be loaded without being part of a layer",{sublayer:r});case 2:if(i=null,r.layer&&!(r.originIdOf("url")>2)&&"data-layer"!==(null==(a=r.source)?void 0:a.type)){e.next=9;break}return e.next=6,Object(h.default)(r.url,Object(s.a)({responseType:"json",query:{f:"json"}},t));case 6:i=e.sent.data,e.next=14;break;case 9:return o=r.id,"map-layer"===(null==(n=r.source)?void 0:n.type)&&(o=r.source.mapLayerId),e.next=13,r.layer.fetchSublayerInfo(o,t);case 13:i=e.sent;case 14:i&&(r.sourceJSON=i,r.read({layerDefinition:i},{origin:"service"}));case 15:case"end":return e.stop()}}),e)})))()),this));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"readCapabilities",value:function(e,t){var r=(e=(t=t.layerDefinition||t).capabilities||e)?e.toLowerCase().split(",").map((function(e){return e.trim()})):[];return{exportMap:{supportsModification:!!t.canModifyLayer},operations:{supportsQuery:-1!==r.indexOf("query")}}}},{key:"definitionExpression",set:function(e){this._setAndNotifyLayer("definitionExpression",e)}},{key:"fieldsIndex",get:function(){return new A.a(this.fields||[])}},{key:"floorInfo",set:function(e){this._setAndNotifyLayer("floorInfo",e)}},{key:"readGlobalIdFieldFromService",value:function(e,t){if((t=t.layerDefinition||t).globalIdField)return t.globalIdField;if(t.fields){var r,a=Object(n.a)(t.fields);try{for(a.s();!(r=a.n()).done;){var i=r.value;if("esriFieldTypeGlobalID"===i.type)return i.name}}catch(o){a.e(o)}finally{a.f()}}}},{key:"id",get:function(){var e=this._get("id");return null==e?ee++:e},set:function(e){this._get("id")!==e&&(!1!==this.get("layer.capabilities.exportMap.supportsDynamicLayers")?this._set("id",e):this._logLockedError("id","capability not available 'layer.capabilities.exportMap.supportsDynamicLayers'"))}},{key:"labelingInfo",set:function(e){this._setAndNotifyLayer("labelingInfo",e)}},{key:"writeLabelingInfo",value:function(e,t,r,a){e&&e.length&&(t.layerDefinition={drawingInfo:{labelingInfo:e.map((function(e){return e.write({},a)}))}})}},{key:"labelsVisible",set:function(e){this._setAndNotifyLayer("labelsVisible",e)}},{key:"layer",set:function(e){this._set("layer",e),this.sublayers&&this.sublayers.forEach((function(t){return t.layer=e}))}},{key:"listMode",set:function(e){this._set("listMode",e)}},{key:"minScale",set:function(e){this._setAndNotifyLayer("minScale",e)}},{key:"readMinScale",value:function(e,t){return t.minScale||t.layerDefinition&&t.layerDefinition.minScale||0}},{key:"maxScale",set:function(e){this._setAndNotifyLayer("maxScale",e)}},{key:"readMaxScale",value:function(e,t){return t.maxScale||t.layerDefinition&&t.layerDefinition.maxScale||0}},{key:"readObjectIdFieldFromService",value:function(e,t){if((t=t.layerDefinition||t).objectIdField)return t.objectIdField;if(t.fields){var r,a=Object(n.a)(t.fields);try{for(a.s();!(r=a.n()).done;){var i=r.value;if("esriFieldTypeOID"===i.type)return i.name}}catch(o){a.e(o)}finally{a.f()}}}},{key:"opacity",set:function(e){this._setAndNotifyLayer("opacity",e)}},{key:"readOpacity",value:function(e,t){var r=t.layerDefinition;return 1-.01*(null!=r.transparency?r.transparency:r.drawingInfo.transparency)}},{key:"writeOpacity",value:function(e,t,r,a){t.layerDefinition={drawingInfo:{transparency:100-100*e}}}},{key:"writeParent",value:function(e,t){this.parent&&this.parent!==this.layer?t.parentLayerId=Object(C.e)(this.parent.id):t.parentLayerId=-1}},{key:"defaultPopupTemplate",get:function(){return this.createPopupTemplate()}},{key:"renderer",set:function(e){if(e){var t,r=Object(n.a)(e.getSymbols());try{for(r.s();!(t=r.n()).done;){var a=t.value;if(Object(j.c)(a)){Y.warn("Sublayer renderer should use 2D symbols");break}}}catch(i){r.e(i)}finally{r.f()}}this._setAndNotifyLayer("renderer",e)}},{key:"source",get:function(){return this._get("source")||new J.a({mapLayerId:this.id})},set:function(e){this._setAndNotifyLayer("source",e)}},{key:"sublayers",set:function(e){this._handleSublayersChange(e,this._get("sublayers")),this._set("sublayers",e)}},{key:"castSublayers",value:function(e){return Object(C.m)(O.a.ofType(a),e)}},{key:"writeSublayers",value:function(e,t,r){this.get("sublayers.length")&&(t[r]=this.sublayers.map((function(e){return e.id})).toArray().reverse())}},{key:"readTypeIdField",value:function(e,t){var r=(t=t.layerDefinition||t).typeIdField;if(r&&t.fields){r=r.toLowerCase();var a=t.fields.find((function(e){return e.name.toLowerCase()===r}));a&&(r=a.name)}return null}},{key:"url",get:function(){var e,t,r=null!=(e=null==(t=this.layer)?void 0:t.parsedUrl)?e:this._lastParsedUrl,a=this.source;if(!r)return null;if(this._lastParsedUrl=r,"map-layer"===(null==a?void 0:a.type))return"".concat(r.path,"/").concat(a.mapLayerId);var i={layer:JSON.stringify({source:this.source})};return"".concat(r.path,"/dynamicLayer?").concat(Object(T.D)(i))},set:function(e){e?this._override("url",e):this._clearOverride("url")}},{key:"visible",set:function(e){this._setAndNotifyLayer("visible",e)}},{key:"writeVisible",value:function(e,t,r,a){t[r]=this.getAtOrigin("defaultVisibility","service")||e}},{key:"clone",value:function(){var e=Object(P.a)(this).store,t=new a;return Object(P.a)(t).store=e.clone(te),this.commitProperty("url"),t._lastParsedUrl=this._lastParsedUrl,t}},{key:"createPopupTemplate",value:function(e){return Object(H.a)(this,e)}},{key:"createQuery",value:function(){return new B.a({returnGeometry:!0,where:this.definitionExpression||"1=1"})}},{key:"createFeatureLayer",value:function(){var e=Object(c.a)(l.a.mark((function e(){var t,a,i,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.hasOwnProperty("sublayers")){e.next=2;break}return e.abrupt("return",null);case 2:return i=null==(t=this.layer)?void 0:t.parsedUrl,e.next=6,Promise.all([r.e(7),r.e(62),r.e(98)]).then(r.bind(null,735));case 6:return e.t0=e.sent.default,e.t1={url:i.path},n=new e.t0(e.t1),e.abrupt("return",(i&&this.source&&("map-layer"===this.source.type?n.layerId=this.source.mapLayerId:n.dynamicDataSource=this.source),null!=this.layer.refreshInterval&&(n.refreshInterval=this.layer.refreshInterval),this.definitionExpression&&(n.definitionExpression=this.definitionExpression),this.floorInfo&&(n.floorInfo=Object(S.a)(this.floorInfo)),this.originIdOf("labelingInfo")>2&&(n.labelingInfo=Object(S.a)(this.labelingInfo)),this.originIdOf("labelsVisible")>0&&(n.labelsVisible=this.labelsVisible),this.originIdOf("legendEnabled")>0&&(n.legendEnabled=this.legendEnabled),this.originIdOf("visible")>0&&(n.visible=this.visible),this.originIdOf("minScale")>0&&(n.minScale=this.minScale),this.originIdOf("maxScale")>0&&(n.maxScale=this.maxScale),this.originIdOf("opacity")>0&&(n.opacity=this.opacity),this.originIdOf("popupTemplate")>0&&(n.popupTemplate=Object(S.a)(this.popupTemplate)),this.originIdOf("renderer")>2&&(n.renderer=Object(S.a)(this.renderer)),"data-layer"===(null==(a=this.source)?void 0:a.type)&&(n.dynamicDataSource=this.source.clone()),this.originIdOf("title")>0&&(n.title=this.title),"map-image"===this.layer.type&&this.layer.originIdOf("customParameters")>0&&(n.customParameters=this.layer.customParameters),"tile"===this.layer.type&&this.layer.originIdOf("customParameters")>0&&(n.customParameters=this.layer.customParameters),n));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getField",value:function(e){return this.fieldsIndex.get(e)}},{key:"getFeatureType",value:function(e){var t=this.typeIdField,r=this.types;if(!t||!e)return null;var a=e.attributes?e.attributes[t]:void 0;if(null==a)return null;var i=null;return r.some((function(e){var t=e.id;return null!=t&&(t.toString()===a.toString()&&(i=e),!!i)})),i}},{key:"getFieldDomain",value:function(e,t){var r=t&&t.feature,a=this.getFeatureType(r);if(a){var i=a.domains&&a.domains[e];if(i&&"inherited"!==i.type)return i}return this._getLayerDomain(e)}},{key:"queryFeatures",value:function(){var e=Object(c.a)(l.a.mark((function e(){var t,a,o,c,u,b,p,d,f,y,v,h,j,O,g=arguments;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=g.length>0&&void 0!==g[0]?g[0]:this.createQuery(),a=g.length>1?g[1]:void 0,e.next=4,this.load();case 4:if(this.get("capabilities.operations.supportsQuery")){e.next=6;break}throw new m.a("Sublayer.queryFeatures","this layer doesn't support queries.");case 6:return e.next=8,Promise.all([Promise.all([r.e(24),r.e(78)]).then(r.bind(null,722)),r.e(115).then(r.bind(null,668))]);case 8:return p=e.sent,d=Object(i.a)(p,2),f=d[0].executeQuery,y=d[1].default,e.next=14,f(this.url,B.a.from(t),null!=(o=null==(c=this.layer)?void 0:c.spatialReference)?o:null,Object(s.a)(Object(s.a)({},a),{},{query:Object(s.a)(Object(s.a)({},null==(u=this.layer)?void 0:u.customParameters),{},{token:null==(b=this.layer)?void 0:b.apiKey})}));case 14:if(v=e.sent,null!=(h=y.fromJSON(v.data))&&h.features){j=Object(n.a)(h.features);try{for(j.s();!(O=j.n()).done;)O.value.sourceLayer=this}catch(l){j.e(l)}finally{j.f()}}return e.abrupt("return",h);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toExportImageJSON",value:function(e){var t,r=this,a={id:this.id,source:(null==(t=this.source)?void 0:t.toJSON())||{mapLayerId:this.id,type:"mapLayer"}};if(this.definitionExpression){var i=Object(I.j)(e)?Object(G.a)(e,this):this.definitionExpression;a.definitionExpression=i}else Object(I.j)(e)&&(a.definitionExpression=e);var n=["renderer","labelingInfo","opacity","labelsVisible"].reduce((function(e,t){return e[t]=r.originIdOf(t),e}),{}),o=Object.keys(n).some((function(e){return n[e]>2}));if(o){var l=a.drawingInfo={};n.renderer>2&&(l.renderer=this.renderer?this.renderer.toJSON():null),n.labelsVisible>2&&(l.showLabels=this.labelsVisible),this.labelsVisible&&n.labelingInfo>2&&(l.labelingInfo=this.labelingInfo?this.labelingInfo.map((function(e){return e.write({},{origin:"service",layer:r.layer})})):null,l.showLabels=!0),n.opacity>2&&(l.transparency=100-100*this.opacity),this._assignDefaultSymbolColors(l.renderer)}return a}},{key:"_assignDefaultSymbolColors",value:function(e){this._forEachSimpleMarkerSymbols(e,(function(e){e.color||"esriSMSX"!==e.style&&"esriSMSCross"!==e.style||(e.outline&&e.outline.color?e.color=e.outline.color:e.color=[0,0,0,0])}))}},{key:"_forEachSimpleMarkerSymbols",value:function(e,t){if(e){var r,a="uniqueValueInfos"in e?e.uniqueValueInfos:"classBreakInfos"in e?e.classBreakInfos:[],i=Object(n.a)(a);try{for(i.s();!(r=i.n()).done;){var o=r.value;$(o.symbol)&&t(o.symbol)}}catch(l){i.e(l)}finally{i.f()}"symbol"in e&&$(e.symbol)&&t(e.symbol),"defaultSymbol"in e&&$(e.defaultSymbol)&&t(e.defaultSymbol)}}},{key:"_setAndNotifyLayer",value:function(e,t){var r,a,i=this.layer,n=this._get(e);switch(e){case"definitionExpression":case"floorInfo":r="supportsSublayerDefinitionExpression";case"minScale":case"maxScale":case"visible":r="supportsSublayerVisibility";break;case"labelingInfo":case"labelsVisible":case"opacity":case"renderer":case"source":r="supportsDynamicLayers",a="supportsModification"}var o=Object(P.a)(this).getDefaultOrigin();if("service"!==o){if(r&&!1===this.get("layer.capabilities.exportMap.".concat(r)))return void this._logLockedError(e,"capability not available 'layer.capabilities.exportMap.".concat(r,"'"));if(a&&!1===this.get("capabilities.exportMap.".concat(a)))return void this._logLockedError(e,"capability not available 'capabilities.exportMap.".concat(a,"'"))}"source"!==e||"not-loaded"===this.loadStatus?(this._set(e,t),"service"!==o&&n!==t&&i&&i.emit&&i.emit("sublayer-update",{propertyName:e,target:this})):this._logLockedError(e,"'source' can't be changed after calling sublayer.load()")}},{key:"_handleSublayersChange",value:function(e,t){var r=this;t&&(t.forEach((function(e){e.parent=null,e.layer=null})),this.handles.removeAll()),e&&(e.forEach((function(e){e.parent=r,e.layer=r.layer})),this.handles.add([e.on("after-add",(function(e){var t=e.item;t.parent=r,t.layer=r.layer})),e.on("after-remove",(function(e){var t=e.item;t.parent=null,t.layer=null})),e.on("before-changes",(function(e){var t=r.get("layer.capabilities.exportMap.supportsSublayersChanges");null==t||t||(Y.error(new m.a("sublayer:sublayers-non-modifiable","Sublayer can't be added, moved, or removed from the layer's sublayers",{sublayer:r,layer:r.layer})),e.preventDefault())}))]))}},{key:"_logLockedError",value:function(e,t){Y.error(new m.a("sublayer:locked","Property '".concat(e,"' can't be changed on Sublayer from the layer '").concat(this.layer.id,"'"),{reason:t,sublayer:this,layer:this.layer}))}},{key:"_getLayerDomain",value:function(e){var t=this.fieldsIndex.get(e);return t?t.domain:null}}]),o}(Object(g.b)(Object(_.a)(Object(w.a)(x.a))));re.test={isMapImageLayerOverridePolicy:function(e){return e===X||e===K},isTileImageLayerOverridePolicy:function(e){return e===Q}},Object(f.a)([Object(L.b)({readOnly:!0})],re.prototype,"capabilities",void 0),Object(f.a)([Object(V.a)("service","capabilities",["layerDefinition.canModifyLayer","layerDefinition.capabilities"])],re.prototype,"readCapabilities",null),Object(f.a)([Object(L.b)({type:String,value:null,json:{name:"layerDefinition.definitionExpression",write:{overridePolicy:K}}})],re.prototype,"definitionExpression",null),Object(f.a)([Object(L.b)({type:[M.a],json:{origins:{service:{read:{source:"layerDefinition.fields"}}}}})],re.prototype,"fields",void 0),Object(f.a)([Object(L.b)({readOnly:!0})],re.prototype,"fieldsIndex",null),Object(f.a)([Object(L.b)({type:q.a,value:null,json:{name:"layerDefinition.floorInfo",read:{source:"layerDefinition.floorInfo"},write:{target:"layerDefinition.floorInfo",overridePolicy:K},origins:{"web-scene":{read:!1,write:!1}}}})],re.prototype,"floorInfo",null),Object(f.a)([Object(L.b)({type:W.a,json:{read:{source:"layerDefinition.extent"}}})],re.prototype,"fullExtent",void 0),Object(f.a)([Object(L.b)({type:String})],re.prototype,"globalIdField",void 0),Object(f.a)([Object(V.a)("service","globalIdField",["layerDefinition.globalIdField","layerDefinition.fields"])],re.prototype,"readGlobalIdFieldFromService",null),Object(f.a)([Object(L.b)({type:C.a,json:{write:{ignoreOrigin:!0}}})],re.prototype,"id",null),Object(f.a)([Object(L.b)({value:null,type:[z.a],json:{read:{source:"layerDefinition.drawingInfo.labelingInfo"},write:{target:"layerDefinition.drawingInfo.labelingInfo",overridePolicy:X}}})],re.prototype,"labelingInfo",null),Object(f.a)([Object(D.a)("labelingInfo")],re.prototype,"writeLabelingInfo",null),Object(f.a)([Object(L.b)({type:Boolean,value:!0,json:{read:{source:"layerDefinition.drawingInfo.showLabels"},write:{target:"layerDefinition.drawingInfo.showLabels",overridePolicy:X}}})],re.prototype,"labelsVisible",null),Object(f.a)([Object(L.b)({value:null})],re.prototype,"layer",null),Object(f.a)([Object(L.b)({type:Boolean,value:!0,json:{origins:{service:{read:{enabled:!1}}},read:{source:"showLegend"},write:{target:"showLegend",overridePolicy:Z}}})],re.prototype,"legendEnabled",void 0),Object(f.a)([Object(L.b)({type:["show","hide","hide-children"],value:"show",json:{read:!1,write:!1,origins:{"web-scene":{read:!0,write:!0}}}})],re.prototype,"listMode",null),Object(f.a)([Object(L.b)({type:Number,value:0,json:{write:{overridePolicy:X}}})],re.prototype,"minScale",null),Object(f.a)([Object(V.a)("minScale",["minScale","layerDefinition.minScale"])],re.prototype,"readMinScale",null),Object(f.a)([Object(L.b)({type:Number,value:0,json:{write:{overridePolicy:X}}})],re.prototype,"maxScale",null),Object(f.a)([Object(V.a)("maxScale",["maxScale","layerDefinition.maxScale"])],re.prototype,"readMaxScale",null),Object(f.a)([Object(L.b)({type:String})],re.prototype,"objectIdField",void 0),Object(f.a)([Object(V.a)("service","objectIdField",["layerDefinition.objectIdField","layerDefinition.fields"])],re.prototype,"readObjectIdFieldFromService",null),Object(f.a)([Object(L.b)({type:Number,value:1,json:{write:{target:"layerDefinition.drawingInfo.transparency",overridePolicy:X}}})],re.prototype,"opacity",null),Object(f.a)([Object(V.a)("opacity",["layerDefinition.drawingInfo.transparency","layerDefinition.transparency"])],re.prototype,"readOpacity",null),Object(f.a)([Object(D.a)("opacity")],re.prototype,"writeOpacity",null),Object(f.a)([Object(L.b)({json:{type:C.a,write:{target:"parentLayerId",allowNull:!0,overridePolicy:X}}})],re.prototype,"parent",void 0),Object(f.a)([Object(D.a)("parent")],re.prototype,"writeParent",null),Object(f.a)([Object(L.b)({type:Boolean,value:!0,json:{read:{source:"disablePopup",reader:function(e,t){return!t.disablePopup}},write:{target:"disablePopup",overridePolicy:Z,writer:function(e,t,r){t[r]=!e}}}})],re.prototype,"popupEnabled",void 0),Object(f.a)([Object(L.b)({type:y.a,json:{read:{source:"popupInfo"},write:{target:"popupInfo",overridePolicy:Z}}})],re.prototype,"popupTemplate",void 0),Object(f.a)([Object(L.b)({readOnly:!0})],re.prototype,"defaultPopupTemplate",null),Object(f.a)([Object(L.b)({types:v.a,value:null,json:{name:"layerDefinition.drawingInfo.renderer",write:{overridePolicy:X},origins:{"web-scene":{types:v.b,name:"layerDefinition.drawingInfo.renderer",write:{overridePolicy:X}}}}})],re.prototype,"renderer",null),Object(f.a)([Object(L.b)({types:{key:"type",base:null,typeMap:{"data-layer":U.a,"map-layer":J.a}},cast:function(e){if(e){if("mapLayerId"in e)return Object(C.d)(J.a,e);if("dataSource"in e)return Object(C.d)(U.a,e)}return e},json:{name:"layerDefinition.source",write:{overridePolicy:X}}})],re.prototype,"source",null),Object(f.a)([Object(L.b)()],re.prototype,"sourceJSON",void 0),Object(f.a)([Object(L.b)({value:null,json:{type:[C.a],write:{target:"subLayerIds",allowNull:!0,overridePolicy:X}}})],re.prototype,"sublayers",null),Object(f.a)([Object(F.a)("sublayers")],re.prototype,"castSublayers",null),Object(f.a)([Object(D.a)("sublayers")],re.prototype,"writeSublayers",null),Object(f.a)([Object(L.b)({type:String,json:{read:{source:"name"},write:{target:"name",allowNull:!0,overridePolicy:Z}}})],re.prototype,"title",void 0),Object(f.a)([Object(L.b)({type:String})],re.prototype,"typeIdField",void 0),Object(f.a)([Object(V.a)("typeIdField",["layerDefinition.typeIdField"])],re.prototype,"readTypeIdField",null),Object(f.a)([Object(L.b)({type:[R.a],json:{origins:{service:{read:{source:"layerDefinition.types"}}}}})],re.prototype,"types",void 0),Object(f.a)([Object(L.b)({type:String,json:{read:{source:"layerUrl"},write:{target:"layerUrl",overridePolicy:Q}}})],re.prototype,"url",null),Object(f.a)([Object(L.b)({type:Boolean,value:!0,json:{read:{source:"defaultVisibility"},write:{target:"defaultVisibility",overridePolicy:X}}})],re.prototype,"visible",null),Object(f.a)([Object(D.a)("visible")],re.prototype,"writeVisible",null);var ae=re=a=Object(f.a)([Object(E.a)("esri.layers.support.Sublayer")],re)},840:function(e,t,r){"use strict";r.d(t,"a",(function(){return V}));var a,i=r(7),n=r.n(i),o=r(12),l=r(13),s=r(2),c=r(4),u=r(5),b=r(6),p=r(0),d=r(82),f=r(60),y=r(29),v=r(183),h=r(15),j=r(712),O=r(297),m=r(30),g=r(241),w=r(27),S=r(99),x=r(1),k=(r(19),r(97)),I=r(10),_=r(137),T=r(18),L=function(){function e(){Object(s.a)(this,e),this.location={left:0,top:0,width:0,height:0},this._allAvailability="unknown",this.byteSize=40}return Object(c.a)(e,[{key:"getAvailability",value:function(e,t){if("unknown"!==this._allAvailability)return this._allAvailability;var r=(e-this.location.top)*this.location.width+(t-this.location.left),a=r%8,i=r>>3,n=this._tileAvailabilityBitSet;return i<0||i>n.length?"unknown":n[i]&1<<a?"available":"unavailable"}},{key:"_updateFromData",value:function(e){for(var t=this.location.width,r=this.location.height,a=!0,i=!0,n=Math.ceil(t*r/8),o=new Uint8Array(n),l=0,s=0;s<e.length;s++){var c=s%8;e[s]?(i=!1,o[l]|=1<<c):a=!1,7===c&&++l}i?this._allAvailability="unavailable":a?this._allAvailability="available":(this._allAvailability="unknown",this._tileAvailabilityBitSet=o,this.byteSize+=o.length)}}],[{key:"fromDefinition",value:function(t,r){var a=t.service.request||d.default,i=t.row,n=t.col,o=t.width,s=t.height,c={query:{f:"json"}};return r=r?Object(l.a)(Object(l.a)({},c),r):c,a(function(e){var t;if("vector-tile"===e.service.type)t="".concat(e.service.url,"/tilemap/").concat(e.level,"/").concat(e.row,"/").concat(e.col,"/").concat(e.width,"/").concat(e.height);else{var r=e.service.tileServers;t="".concat(r&&r.length?r[e.row%r.length]:e.service.url,"/tilemap/").concat(e.level,"/").concat(e.row,"/").concat(e.col,"/").concat(e.width,"/").concat(e.height)}var a=e.service.query;return a&&(t="".concat(t,"?").concat(a)),t}(t),r).then((function(e){return e.data})).catch((function(e){if(e&&e.details&&422===e.details.httpStatus)return{location:{top:i,left:n,width:o,height:s},valid:!0,data:Object(_.b)(o*s,0)};throw e})).then((function(t){if(t.location&&(t.location.top!==i||t.location.left!==n||t.location.width!==o||t.location.height!==s))throw new y.a("tilemap:location-mismatch","Tilemap response for different location than requested",{response:t,definition:{top:i,left:n,width:o,height:s}});return e.fromJSON(t)}))}},{key:"fromJSON",value:function(t){e.validateJSON(t);var r=new e;return r.location=Object.freeze(Object(T.a)(t.location)),r._updateFromData(t.data),Object.freeze(r)}},{key:"validateJSON",value:function(e){if(!e||!e.location)throw new y.a("tilemap:missing-location","Location missing from tilemap response");if(!1===e.valid)throw new y.a("tilemap:invalid","Tilemap response was marked as invalid");if(!e.data)throw new y.a("tilemap:missing-data","Data missing from tilemap response");if(!Array.isArray(e.data))throw new y.a("tilemap:data-mismatch","Data must be an array of numbers");if(e.data.length!==e.location.width*e.location.height)throw new y.a("tilemap:data-mismatch","Number of data items does not match width/height of tilemap")}}]),e}();function P(e){return"".concat(e.level,"/").concat(e.row,"/").concat(e.col,"/").concat(e.width,"/").concat(e.height)}var F=h.a.getLogger("esri.layers.support.TilemapCache"),V=a=function(e){Object(u.a)(r,e);var t=Object(b.a)(r);function r(e){var a;return Object(s.a)(this,r),(a=t.call(this,e))._handles=new v.a,a._pendingTilemapRequests={},a._availableLevels={},a.levels=5,a.cacheByteSize=2097152,a.request=d.default,a._prefetchingEnabled=!0,a}return Object(c.a)(r,[{key:"initialize",value:function(){var e=this;this._tilemapCache=new j.a(this.cacheByteSize),this._handles.add([this.watch(["layer.parsedUrl","layer.tileServers?"],(function(){return e._initializeTilemapDefinition()})),Object(S.a)(this,"layer.tileInfo.lods",(function(t){return e._initializeAvailableLevels(t)}),!0)]),this._initializeTilemapDefinition()}},{key:"destroy",value:function(){this._handles&&(this._handles.destroy(),this._handles=null)}},{key:"castLevels",value:function(e){return e<=2?(F.error("Minimum levels for Tilemap is 3, but got ",e),3):e}},{key:"size",get:function(){return 1<<this.levels}},{key:"fetchTilemap",value:function(e,t,r,a){var i=this;if(!this._availableLevels[e])return Promise.reject(new y.a("tilemap-cache:level-unavailable","Level ".concat(e," is unavailable in the service")));var n=this._tmpTilemapDefinition,o=this._tilemapFromCache(e,t,r,n);if(o)return Promise.resolve(o);var s=a&&a.signal;return a=Object(l.a)(Object(l.a)({},a),{},{signal:null}),new Promise((function(e,t){Object(m.q)(s,(function(){return t(Object(m.e)())}));var r=P(n),o=i._pendingTilemapRequests[r];if(!o){o=L.fromDefinition(n,a).then((function(e){return i._tilemapCache.put(r,e,e.byteSize),e}));var l=function(){return delete i._pendingTilemapRequests[r]};i._pendingTilemapRequests[r]=o,o.then(l,l)}o.then(e,t)}))}},{key:"getAvailability",value:function(e,t,r){if(!this._availableLevels[e])return"unavailable";var a=this._tilemapFromCache(e,t,r,this._tmpTilemapDefinition);return a?a.getAvailability(t,r):"unknown"}},{key:"getAvailabilityUpsample",value:function(e,t,r,a){a.level=e,a.row=t,a.col=r;var i=this.layer.tileInfo;for(i.updateTileInfo(a);;){var n=this.getAvailability(a.level,a.row,a.col);if("unavailable"!==n)return n;if(!i.upsampleTile(a))return"unavailable"}}},{key:"fetchAvailability",value:function(e,t,r,a){return this._availableLevels[e]?this.fetchTilemap(e,t,r,a).catch((function(e){return e})).then((function(a){if(a instanceof L){var i=a.getAvailability(t,r);return"unavailable"===i?Promise.reject(new y.a("tile-map:tile-unavailable","Tile is not available",{level:e,row:t,col:r})):i}if(Object(m.m)(a))throw a;return"unknown"})):Promise.reject(new y.a("tilemap-cache:level-unavailable","Level ".concat(e," is unavailable in the service")))}},{key:"fetchAvailabilityUpsample",value:function(e,t,r,a,i){var n=this;a.level=e,a.row=t,a.col=r;var o=this.layer.tileInfo;o.updateTileInfo(a);var l=this.fetchAvailability(e,t,r,i).catch((function(e){if(Object(m.m)(e))throw e;if(o.upsampleTile(a))return n.fetchAvailabilityUpsample(a.level,a.row,a.col,a);throw e}));return this._fetchAvailabilityUpsamplePrefetch(a.id,e,t,r,i,l),l}},{key:"_fetchAvailabilityUpsamplePrefetch",value:function(){var e=Object(o.a)(n.a.mark((function e(t,r,i,o,s,c){var u,b,p,d,f,y,v,h,j,O=this;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._prefetchingEnabled){e.next=2;break}return e.abrupt("return");case 2:if(u="prefetch-".concat(t),!this._handles.has(u)){e.next=5;break}return e.abrupt("return");case 5:return b=Object(m.d)(),c.then((function(){return b.abort()}),(function(){return b.abort()})),p=!1,d={remove:function(){p||(p=!0,b.abort())}},this._handles.add(d,u),e.next=12,Object(g.b)(10,b.signal).catch((function(){}));case 12:if(p||(p=!0,this._handles.remove(u)),!Object(m.n)(b)){e.next=15;break}return e.abrupt("return");case 15:for(f={id:t,level:r,row:i,col:o},y=Object(l.a)(Object(l.a)({},s),{},{signal:b.signal}),v=this.layer.tileInfo,h=function(e){var t=O.fetchAvailability(f.level,f.row,f.col,y);a._prefetches.push(t);var r=function(){a._prefetches.removeUnordered(t)};t.then(r,r)},j=0;a._prefetches.length<a._maxPrefetch&&v.upsampleTile(f);++j)h();case 18:case"end":return e.stop()}}),e,this)})));return function(t,r,a,i,n,o){return e.apply(this,arguments)}}()},{key:"_initializeTilemapDefinition",value:function(){if(this.layer.parsedUrl){var e=this.layer.parsedUrl,t=e.query;this._tilemapCache.clear(),this._tmpTilemapDefinition={service:{url:e.path,query:t?Object(w.D)(t):null,tileServers:this.layer.tileServers,request:this.request,type:this.layer.type},width:this.size,height:this.size,level:0,row:0,col:0}}}},{key:"_tilemapFromCache",value:function(e,t,r,a){a.level=e,a.row=t-t%this.size,a.col=r-r%this.size;var i=P(a);return this._tilemapCache.get(i)}},{key:"_initializeAvailableLevels",value:function(e){var t=this;this._availableLevels={},e&&e.forEach((function(e){return t._availableLevels[e.level]=!0}))}},{key:"test",get:function(){var e=this;return{get prefetchingEnabled(){return e._prefetchingEnabled},set prefetchingEnabled(t){e._prefetchingEnabled=t},hasTilemap:function(t,r,a){return!!e._tilemapFromCache(t,r,a,e._tmpTilemapDefinition)}}}}]),r}(f.a);V._maxPrefetch=4,V._prefetches=new O.a({initialSize:a._maxPrefetch}),Object(p.a)([Object(x.b)({constructOnly:!0,type:Number})],V.prototype,"levels",void 0),Object(p.a)([Object(k.a)("levels")],V.prototype,"castLevels",null),Object(p.a)([Object(x.b)({readOnly:!0,type:Number})],V.prototype,"size",null),Object(p.a)([Object(x.b)({constructOnly:!0,type:Number})],V.prototype,"cacheByteSize",void 0),Object(p.a)([Object(x.b)({constructOnly:!0})],V.prototype,"layer",void 0),Object(p.a)([Object(x.b)({constructOnly:!0})],V.prototype,"request",void 0),V=a=Object(p.a)([Object(I.a)("esri.layers.support.TilemapCache")],V)},856:function(e,t,r){"use strict";r.d(t,"a",(function(){return o})),r.d(t,"b",(function(){return n}));var a=r(13),i=r(743),n={type:i.a,json:{origins:{service:{read:{source:["tileInfo","minScale","maxScale","minLOD","maxLOD"],reader:o}}}}};function o(e,t,r,n){if(!e)return null;var o=t.minScale,l=t.maxScale,s=t.minLOD,c=t.maxLOD;if(null!=s&&null!=c)return n&&n.ignoreMinMaxLOD?i.a.fromJSON(e):i.a.fromJSON(Object(a.a)(Object(a.a)({},e),{},{lods:e.lods.filter((function(e){var t=e.level;return null!=t&&t>=s&&t<=c}))}));if(0!==o&&0!==l){var u=function(e){return Math.round(1e4*e)/1e4},b=o?u(o):1/0,p=l?u(l):-1/0;return i.a.fromJSON(Object(a.a)(Object(a.a)({},e),{},{lods:e.lods.filter((function(e){var t=u(e.scale);return t<=b&&t>=p}))}))}return i.a.fromJSON(e)}},898:function(e,t,r){"use strict";r.d(t,"a",(function(){return S}));var a=r(21),i=r(13),n=r(7),o=r.n(n),l=r(12),s=r(2),c=r(4),u=r(5),b=r(6),p=r(0),d=r(82),f=r(30),y=r(27),v=r(838),h=r(1),j=(r(19),r(14),r(15),r(57)),O=r(10),m=r(58),g=r(45),w=r(671),S=function(e){var t=function(e){Object(u.a)(r,e);var t=Object(b.a)(r);function r(){var e;return Object(s.a)(this,r),(e=t.apply(this,arguments)).capabilities=void 0,e.copyright=null,e.fullExtent=null,e.legendEnabled=!0,e.spatialReference=null,e.version=null,e}return Object(c.a)(r,[{key:"readCapabilities",value:function(e,t){var r=t.capabilities&&t.capabilities.split(",").map((function(e){return e.toLowerCase().trim()}));if(!r)return{operations:{supportsQuery:!1,supportsExportMap:!1,supportsExportTiles:!1,supportsTileMap:!1},exportMap:null,exportTiles:null};var a=this.type,i=-1!==r.indexOf("query"),n=-1!==r.indexOf("map"),o=!!t.exportTilesAllowed,l=-1!==r.indexOf("tilemap"),s="tile"!==a&&!!t.supportsDynamicLayers,c="tile"!==a&&(!t.tileInfo||s),u="tile"!==a&&(!t.tileInfo||s),b="tile"!==a,p=!!t.cimVersion&&v.a.parse(t.cimVersion).since(1,4);return{operations:{supportsQuery:i,supportsExportMap:n,supportsExportTiles:o,supportsTileMap:l},exportMap:n?{supportsArcadeExpressionForLabeling:p,supportsSublayersChanges:b,supportsDynamicLayers:s,supportsSublayerVisibility:c,supportsSublayerDefinitionExpression:u}:null,exportTiles:o?{maxExportTilesCount:+t.maxExportTilesCount}:null}}},{key:"readVersion",value:function(e,t){var r=t.currentVersion;return r||(r=t.hasOwnProperty("capabilities")||t.hasOwnProperty("tables")?10:t.hasOwnProperty("supportedImageFormatTypes")?9.31:9.3),r}},{key:"fetchSublayerInfo",value:function(){var e=Object(l.a)(o.a.mark((function e(t,r){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetchAllLayersAndTables(r);case 2:return e.abrupt("return",this._allLayersAndTablesMap.get(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"fetchAllLayersAndTables",value:function(){var e=Object(l.a)(o.a.mark((function e(t){var r,n=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.load(t);case 2:return this._allLayersAndTablesPromise||(this._allLayersAndTablesPromise=Object(d.default)(Object(y.J)(this.url).path+"/layers",{responseType:"json",query:Object(i.a)(Object(i.a)({f:"json"},this.customParameters),{},{token:this.apiKey})}).then((function(e){n._allLayersAndTablesMap=new Map;var t,r=Object(a.a)(e.data.layers);try{for(r.s();!(t=r.n()).done;){var i=t.value;n._allLayersAndTablesMap.set(i.id,i)}}catch(o){r.e(o)}finally{r.f()}return{result:e.data}}),(function(e){return{error:e}}))),e.next=5,this._allLayersAndTablesPromise;case 5:if(r=e.sent,Object(f.v)(t),!("result"in r)){e.next=8;break}return e.abrupt("return",r.result);case 8:throw r.error;case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(e);return Object(p.a)([Object(h.b)({readOnly:!0})],t.prototype,"capabilities",void 0),Object(p.a)([Object(j.a)("service","capabilities",["capabilities","exportTilesAllowed","maxExportTilesCount","supportsDynamicLayers","tileInfo"])],t.prototype,"readCapabilities",null),Object(p.a)([Object(h.b)({json:{read:{source:"copyrightText"}}})],t.prototype,"copyright",void 0),Object(p.a)([Object(h.b)({type:m.a})],t.prototype,"fullExtent",void 0),Object(p.a)([Object(h.b)(w.c)],t.prototype,"id",void 0),Object(p.a)([Object(h.b)({type:Boolean,json:{origins:{service:{read:{enabled:!1}}},read:{source:"showLegend"},write:{target:"showLegend"}}})],t.prototype,"legendEnabled",void 0),Object(p.a)([Object(h.b)(w.j)],t.prototype,"popupEnabled",void 0),Object(p.a)([Object(h.b)({type:g.a})],t.prototype,"spatialReference",void 0),Object(p.a)([Object(h.b)()],t.prototype,"version",void 0),Object(p.a)([Object(j.a)("version",["currentVersion","capabilities","tables","supportedImageFormatTypes"])],t.prototype,"readVersion",null),t=Object(p.a)([Object(O.a)("esri.layers.mixins.ArcGISMapService")],t)}},899:function(e,t,r){"use strict";r.d(t,"a",(function(){return x}));var a=r(21),i=r(2),n=r(4),o=r(77),l=r(65),s=r(5),c=r(6),u=r(0),b=r(52),p=r(808),d=r(29),f=r(15),y=r(1),v=(r(19),r(69)),h=(r(14),r(10)),j=r(164),O=r(839),m=r(824),g=f.a.getLogger("esri.layers.TileLayer");var w=b.a.ofType(O.a);function S(e,t){e&&e.forEach((function(e){t(e),e.sublayers&&e.sublayers.length&&S(e.sublayers,t)}))}var x=function(e){var t=function(e){Object(s.a)(r,e);var t=Object(c.a)(r);function r(){var e;Object(i.a)(this,r);for(var a=arguments.length,n=new Array(a),o=0;o<a;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).allSublayers=new p.a({getCollections:function(){return[e.sublayers]},getChildrenFunction:function(e){return e.sublayers}}),e.sublayersSourceJSON={2:{},3:{},4:{},5:{}},e.handles.add(e.watch("sublayers",(function(t,r){return e._handleSublayersChange(t,r)}),!0)),e}return Object(n.a)(r,[{key:"readSublayers",value:function(e,t){if(t&&e){var r=this.sublayersSourceJSON,a=Object(j.d)(t.origin);if(!(a<2)&&(r[a]={context:t,visibleLayers:e.visibleLayers||r[a].visibleLayers,layers:e.layers||r[a].layers},!(a>2))){this._set("serviceSublayers",this.createSublayersForOrigin("service").sublayers);var i=this.createSublayersForOrigin("web-document"),n=i.sublayers,o=i.origin,l=Object(v.a)(this);l.setDefaultOrigin(o),this._set("sublayers",new w(n)),l.setDefaultOrigin("user")}}}},{key:"findSublayerById",value:function(e){return this.allSublayers.find((function(t){return t.id===e}))}},{key:"createServiceSublayers",value:function(){return this.createSublayersForOrigin("service").sublayers}},{key:"createSublayersForOrigin",value:function(e){var t,r=Object(j.d)("web-document"===e?"web-map":e),i=2,n=this.sublayersSourceJSON[2].layers,o=this.sublayersSourceJSON[2].context,l=null,s=[3,4,5].filter((function(e){return e<=r})),c=Object(a.a)(s);try{for(c.s();!(t=c.n()).done;){var u=t.value,b=this.sublayersSourceJSON[u];Object(m.b)(b.layers)&&(i=u,n=b.layers,o=b.context,b.visibleLayers&&(l={visibleLayers:b.visibleLayers,context:b.context}))}}catch(C){c.e(C)}finally{c.f()}var p,d=[3,4,5].filter((function(e){return e>i&&e<=r})),f=null,y=Object(a.a)(d);try{for(y.s();!(p=y.n()).done;){var v=p.value,h=this.sublayersSourceJSON[v],g=h.layers,x=h.visibleLayers,k=h.context;g&&(f={layers:g,context:k}),x&&(l={visibleLayers:x,context:k})}}catch(C){y.e(C)}finally{y.f()}var I=function(e,t){var r=[],a={};return e?(e.forEach((function(e){var i=new O.a;if(i.read(e,t),a[i.id]=i,null!=e.parentLayerId&&-1!==e.parentLayerId){var n=a[e.parentLayerId];n.sublayers||(n.sublayers=[]),n.sublayers.unshift(i)}else r.unshift(i)})),r):r}(n,o),_=new Map,T=new Set;if(f){var L,P=Object(a.a)(f.layers);try{for(P.s();!(L=P.n()).done;){var F=L.value;_.set(F.id,F)}}catch(C){P.e(C)}finally{P.f()}}if(l){var V,E=Object(a.a)(l.visibleLayers);try{for(E.s();!(V=E.n()).done;){var D=V.value;T.add(D)}}catch(C){E.e(C)}finally{E.f()}}return S(I,(function(e){f&&e.read(_.get(e.id),f.context),l&&e.read({defaultVisibility:T.has(e.id)},l.context)})),{origin:Object(j.b)(i),sublayers:new w({items:I})}}},{key:"read",value:function(e,t){Object(o.a)(Object(l.a)(r.prototype),"read",this).call(this,e,t),this.readSublayers(e,t)}},{key:"_handleSublayersChange",value:function(e,t){var r=this;t&&(t.forEach((function(e){e.parent=null,e.layer=null})),this.handles.remove("sublayers-owner")),e&&(e.forEach((function(e){e.parent=r,e.layer=r})),this.handles.add([e.on("after-add",(function(e){var t=e.item;t.parent=r,t.layer=r})),e.on("after-remove",(function(e){var t=e.item;t.parent=null,t.layer=null}))],"sublayers-owner"),"tile"===this.type&&this.handles.add(e.on("before-changes",(function(e){g.error(new d.a("tilelayer:sublayers-non-modifiable","ISublayer can't be added, moved, or removed from the layer's sublayers",{layer:r})),e.preventDefault()})),"sublayers-owner"))}}]),r}(e);return Object(u.a)([Object(y.b)({readOnly:!0})],t.prototype,"allSublayers",void 0),Object(u.a)([Object(y.b)({readOnly:!0,type:b.a.ofType(O.a)})],t.prototype,"serviceSublayers",void 0),Object(u.a)([Object(y.b)({value:null,type:w,json:{read:!1,write:{allowNull:!0,ignoreOrigin:!0}}})],t.prototype,"sublayers",void 0),Object(u.a)([Object(y.b)({readOnly:!0})],t.prototype,"sublayersSourceJSON",void 0),t=Object(u.a)([Object(h.a)("esri.layers.mixins.SublayersOwner")],t),t}},917:function(e,t,r){"use strict";r.d(t,"a",(function(){return f}));var a=r(2),i=r(4),n=r(5),o=r(6),l=r(0),s=(r(114),r(1)),c=(r(19),r(14),r(15),r(57)),u=r(10),b=r(856),p=r(840),d=r(45),f=function(e){var t=function(e){Object(n.a)(r,e);var t=Object(o.a)(r);function r(){var e;return Object(a.a)(this,r),(e=t.apply(this,arguments)).copyright=null,e.minScale=0,e.maxScale=0,e.spatialReference=null,e.tileInfo=null,e.tilemapCache=null,e}return Object(i.a)(r,[{key:"readMinScale",value:function(e,t){return null!=t.minLOD&&null!=t.maxLOD?e:0}},{key:"readMaxScale",value:function(e,t){return null!=t.minLOD&&null!=t.maxLOD?e:0}},{key:"supportsBlankTile",get:function(){return this.version>=10.2}},{key:"readTilemapCache",value:function(e,t){return t.capabilities&&t.capabilities.indexOf("Tilemap")>-1?new p.a({layer:this}):null}}]),r}(e);return Object(l.a)([Object(s.b)({json:{read:{source:"copyrightText"}}})],t.prototype,"copyright",void 0),Object(l.a)([Object(s.b)()],t.prototype,"minScale",void 0),Object(l.a)([Object(c.a)("service","minScale")],t.prototype,"readMinScale",null),Object(l.a)([Object(s.b)()],t.prototype,"maxScale",void 0),Object(l.a)([Object(c.a)("service","maxScale")],t.prototype,"readMaxScale",null),Object(l.a)([Object(s.b)({type:d.a})],t.prototype,"spatialReference",void 0),Object(l.a)([Object(s.b)({readOnly:!0})],t.prototype,"supportsBlankTile",null),Object(l.a)([Object(s.b)(b.b)],t.prototype,"tileInfo",void 0),Object(l.a)([Object(s.b)()],t.prototype,"tilemapCache",void 0),Object(l.a)([Object(c.a)("service","tilemapCache",["capabilities"])],t.prototype,"readTilemapCache",null),Object(l.a)([Object(s.b)()],t.prototype,"version",void 0),t=Object(l.a)([Object(u.a)("esri.layers.mixins.ArcGISCachedService")],t)}}}]);
//# sourceMappingURL=49.481939b9.chunk.js.map