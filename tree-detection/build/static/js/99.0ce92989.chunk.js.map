{"version":3,"sources":["../node_modules/@arcgis/core/smartMapping/statistics/support/utils.js","../node_modules/@arcgis/core/smartMapping/statistics/support/statsWorker.js"],"names":["o","e","n","normalizationField","normalizationType","t","minValue","maxValue","l","sqlExpression","supportsSQLExpression","i","returnDistinct","Set","values","filter","length","count","supportsNullCount","nullcount","r","useSampleStdDev","Number","POSITIVE_INFINITY","NEGATIVE_INFINITY","u","s","a","c","f","d","p","isFinite","Math","min","max","sqrt","m","avg","stddev","sum","variance","forEach","ceil","log","LOG10E","attribute","featuresJSON","fieldType","field","valueExpression","normalizationTotal","viewInfoParams","v","arcadeUtils","createFunction","getViewInfo","viewingMode","scale","spatialReference","attributes","createExecContext","executeFunction","parseFloat","push"],"mappings":"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","file":"static/js/99.0ce92989.chunk.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport e from\"../../../core/Error.js\";import{isSome as n}from\"../../../core/maybe.js\";import{isNumericField as t,numericTypes as l}from\"../../../layers/support/fieldUtils.js\";function o(e){const n=null!=e.normalizationField||null!=e.normalizationType,t=null!=e.minValue||null!=e.maxValue,l=!!e.sqlExpression&&e.supportsSQLExpression;return!n&&!t&&!l}function i(e){const n=e.returnDistinct?[...new Set(e.values)]:e.values,t=n.filter((e=>null!=e)).length,l={count:t};return e.supportsNullCount&&(l.nullcount=n.length-t),l}function r(e){const{values:n,useSampleStdDev:t,supportsNullCount:l}=e;let o=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY,r=null,u=null,s=null,a=null,c=0;const f=null==e.minValue?-1/0:e.minValue,d=null==e.maxValue?1/0:e.maxValue;for(const p of n)Number.isFinite(p)?p>=f&&p<=d&&(r+=p,o=Math.min(o,p),i=Math.max(i,p),c++):\"string\"==typeof p&&c++;if(c&&null!=r){u=r/c;let e=0;for(const t of n)Number.isFinite(t)&&t>=f&&t<=d&&(e+=(t-u)**2);a=t?c>1?e/(c-1):0:c>0?e/c:0,s=Math.sqrt(a)}else o=null,i=null;const m={avg:u,count:c,max:i,min:o,stddev:s,sum:r,variance:a};return l&&(m.nullcount=n.length-c),m}function u(e,n){return n?([\"avg\",\"stddev\",\"variance\"].forEach((n=>{null!=e[n]&&(e[n]=Math.ceil(e[n]))})),e):e}function s(e,n,t,l){let o=null;switch(n){case\"log\":0!==e&&(o=Math.log(e)*Math.LOG10E);break;case\"percent-of-total\":Number.isFinite(l)&&0!==l&&(o=e/l*100);break;case\"field\":Number.isFinite(t)&&0!==t&&(o=e/t);break;case\"natural-log\":e>0&&(o=Math.log(e));break;case\"square-root\":e>0&&(o=e**.5)}return o}function a(e){const n=e.field,t=e.normalizationType,l=e.normalizationField;let o;return\"log\"===t?o=\"(NOT \"+n+\" = 0)\":\"field\"===t?o=\"(NOT \"+l+\" = 0)\":\"natural-log\"!==t&&\"square-root\"!==t||(o=`(${n} > 0)`),o}function c(n,t){return new e(n,t)}function f(e,n,t){const l=null!=n?e+\" >= \"+n:\"\",o=null!=t?e+\" <= \"+t:\"\";let i=\"\";return i=l&&o?p(l,o):l||o,i?\"(\"+i+\")\":\"\"}function d(e,n,t,l){let o=null;return n?n.name!==e.objectIdField&&-1!==l.indexOf(n.type)||(o=c(t,\"'field' should be one of these types: \"+l.join(\",\"))):o=c(t,\"'field' is not defined in the layer schema\"),o}function m(e,n,o){let i;return n?n.name!==e.objectIdField&&t(n)||(i=c(o,\"'field' should be one of these numeric types: \"+l.join(\",\"))):i=c(o,\"'field' is not defined in the layer schema\"),i}function p(e,t){let l=n(e)?e:\"\";return n(t)&&t&&(l=l?\"(\"+l+\") AND (\"+t+\")\":t),l}function h(e,n,t){const l=g({layer:e,fields:n});if(l.length)return c(t,\"Unknown fields: \"+l.join(\", \")+\". You can only use fields defined in the layer schema\");const o=b({layer:e,fields:n});return o.length?c(t,\"Unsupported fields: \"+o.join(\", \")+\". You can only use fields that can be fetched i.e. AdapterFieldUsageInfo.supportsStatistics must be true\"):void 0}function g(e){const n=e.layer;return e.fields.filter((e=>!n.getField(e)))}function b(e){const n=e.layer;return e.fields.filter((e=>{const t=n.getFieldUsageInfo(e);return!t||!t.supportsStatistics}))}export{r as calculateStatistics,i as calculateStringStatistics,c as createError,s as getNormalizedValue,f as getRangeExpr,a as getSQLFilterForNormalization,o as isNullCountSupported,p as mergeWhereClauses,u as processStatsResult,h as verifyBasicFieldValidity,d as verifyFieldType,m as verifyNumericField};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{isFinite as e}from\"../../../core/mathUtils.js\";import a from\"../../../geometry/SpatialReference.js\";import{isNullCountSupported as i,calculateStringStatistics as t,calculateStatistics as n,processStatsResult as o,getNormalizedValue as l}from\"./utils.js\";import{loadArcade as r}from\"../../../support/arcadeOnDemand.js\";let s=null;async function u(e){const{attribute:a,featuresJSON:l}=e,{normalizationType:r,normalizationField:s,minValue:u,maxValue:c,fieldType:p}=a,f=await m({field:a.field,valueExpression:a.valueExpression,normalizationType:r,normalizationField:s,normalizationTotal:a.normalizationTotal,viewInfoParams:a.viewInfoParams},l),d=i({normalizationType:r,normalizationField:s,minValue:u,maxValue:c}),v=\"string\"===p?t({values:f,supportsNullCount:d}):n({values:f,minValue:u,maxValue:c,useSampleStdDev:!r,supportsNullCount:d});return o(v,\"date\"===p)}async function m(i,t){if(!t)return[];const n=i.field,o=i.valueExpression,u=i.normalizationType,m=i.normalizationField,c=i.normalizationTotal,p=[],f=i.viewInfoParams;let d=null,v=null;if(o){if(!s){const{arcadeUtils:e}=await r();s=e}d=s.createFunction(o),v=f&&s.getViewInfo({viewingMode:f.viewingMode,scale:f.scale,spatialReference:new a(f.spatialReference)})}return t.forEach((a=>{const i=a.attributes;let t;if(o){const e=s.createExecContext(a,v);t=s.executeFunction(d,e)}else i&&(t=i[n]);if(u&&e(t)){const e=i&&parseFloat(i[m]);t=l(t,u,e,c)}p.push(t)})),p}export{m as getDataValues,u as summaryStatistics};\n"],"sourceRoot":""}