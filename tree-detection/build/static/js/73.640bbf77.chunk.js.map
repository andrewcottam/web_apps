{"version":3,"sources":["../node_modules/@arcgis/core/layers/graphics/sources/FeatureLayerSource.js","../node_modules/@arcgis/core/layers/graphics/data/QueryEngineCapabilities.js","../node_modules/@arcgis/core/layers/graphics/sources/support/clientSideDefaults.js","../node_modules/@arcgis/core/rest/query/executeForCount.js","../node_modules/@arcgis/core/rest/query/executeForIds.js","../node_modules/@arcgis/core/rest/query/executeQueryJSON.js","../node_modules/@arcgis/core/rest/query/support/AttachmentInfo.js","../node_modules/@arcgis/core/layers/support/exifUtils.js","../node_modules/@arcgis/core/rest/query/operations/queryAttachments.js","../node_modules/@arcgis/core/rest/query/executeAttachmentQuery.js","../node_modules/@arcgis/core/rest/query/executeForExtent.js","../node_modules/@arcgis/core/rest/query/operations/pbfJSONFeatureSet.js","../node_modules/@arcgis/core/rest/query/executeQueryPBF.js","../node_modules/@arcgis/core/rest/query/operations/queryRelatedRecords.js","../node_modules/@arcgis/core/rest/query/executeRelationshipQuery.js","../node_modules/@arcgis/core/rest/query/operations/queryTopFeatures.js","../node_modules/@arcgis/core/rest/query/executeTopFeaturesQuery.js","../node_modules/@arcgis/core/rest/query/executeForTopIds.js","../node_modules/@arcgis/core/rest/query/executeForTopExtents.js","../node_modules/@arcgis/core/rest/query/executeForTopCount.js","../node_modules/@arcgis/core/tasks/QueryTask.js"],"names":["I","o","originalAndCurrentFeatures","none","_","e","a","t","h","data","Promise","r","s","FileReader","readAsDataURL","onload","result","onerror","O","Set","S","arguments","type","refresh","c","load","sourceJSON","editingInfo","lastEditDate","hasUpdates","updates","_fetchService","extent","u","signal","this","addResolvingPromise","layer","resolve","capabilities","query","supportsFormatPBF","parsedUrl","dynamicDataSource","infoFor3D","gdbVersion","spatialReference","n","fieldsIndex","i","l","b","url","path","format","sourceSpatialReference","attributes","objectIdField","_getLayerRequestOptions","_getFormDataForAttachment","body","_createFeatureEditResult","addAttachmentResult","_createAttachmentErrorResult","attachmentId","updateAttachmentResult","addFeatures","map","_serializeFeature","updateFeatures","_getFeatureIds","deleteFeatures","globalIdUsed","F","deleteAttachments","addAttachments","_serializeAttachment","push","updateAttachments","length","adds","deletes","d","rollbackOnFailure","rollbackOnFailureEnabled","useGlobalIds","returnEditMoment","usePreviousEditMoment","sessionId","returnServiceEditsOption","edits","JSON","stringify","id","layerId","attachments","toJSON","returnServiceEditsInSourceSR","join","method","p","_createEditsResult","attachmentIds","deleteAttachmentResults","then","returnUpdates","fullExtent","timeExtent","m","fromJSON","start","end","get","objectIds","all","parentObjectId","attachmentInfos","R","queryTask","executeAttachmentQuery","execute","_createRequestQueryOptions","executeJSON","executeForIds","executeForCount","executeForExtent","executeRelationshipQuery","executeRelationshipQueryForCount","executeTopFeaturesQuery","executeForTopIds","executeForTopExtents","executeForTopCount","customParameters","token","apiKey","datesInUnknownTimezone","timeReferenceUnknownClient","returnAdvancedSymbols","_patchServiceJSON","has","geometryType","drawingInfo","renderer","defaultSymbol","g","geometry","feature","attachment","globalId","name","contentType","uploadId","parentGlobalId","globalIdField","mediaType","File","_canUseGlobalIds","_getGlobalIdsFromFeatureIdentifier","_getObjectIdsFromFeatureIdentifier","_getIdsFromFeatures","objectId","Array","isArray","editedFeatures","addResults","updateResults","deleteResults","editMoment","addFeatureResults","updateFeatureResults","deleteFeatureResults","addAttachmentResults","updateAttachmentResults","editedFeatureResults","q","_createEditedFeature","original","current","f","success","error","code","description","details","messages","message","httpStatus","messageCode","FormData","elements","set","append","source","responseType","prototype","constructOnly","readOnly","E","y","supportsStatistics","supportsPercentileStatistics","supportsCentroid","supportsCacheHint","supportsDistance","supportsDistinct","supportsExtent","supportsGeometryProperties","supportsHavingClause","supportsOrderBy","supportsPagination","supportsQuantization","supportsQuantizationEditMode","supportsQueryGeometry","supportsResultType","supportsSqlExpression","supportsMaxRecordCountFactor","supportsStandardizedQueriesOnly","supportsTopFeaturesQuery","supportsQueryByOthers","supportsHistoricMoment","supportsDisjointSpatialRelationship","maxRecordCountFactor","maxRecordCount","standardMaxRecordCount","tileMaxRecordCount","symbol","indexOf","Function","isVersioned","supportsAttachment","supportsM","supportsZ","metadata","supportsAdvancedFieldProperties","operations","supportsCalculate","supportsTruncate","supportsValidateSql","supportsAdd","supportsDelete","supportsEditing","supportsChangeTracking","supportsQuery","supportsQueryAttachments","supportsResizeAttachments","supportsSync","supportsUpdate","supportsExceedsLimitStatistics","queryRelated","supportsCount","editing","supportsGeometryUpdate","supportsGlobalId","supportsReturnServiceEditsInSourceSpatialReference","supportsRollbackOnFailure","supportsUpdateWithoutM","supportsUploadWithItemId","supportsDeleteByAnonymous","supportsDeleteByOthers","supportsUpdateByAnonymous","supportsUpdateByOthers","from","count","rotation","mirrored","exifInfo","keywords","size","exifName","tagName","find","tags","value","String","json","read","attachmentTypes","globalIds","attachmentGroups","originPosition","translate","scale","options","geometryTypes","previousCoordinate","transform","applyTransform","lengths","currentLengthIndex","toAddInCurrentPath","vertexDimension","coordinateBuffer","coordinateBufferPtr","AttributesConstructor","fields","features","hasZ","deriveApplyTransform","hasM","addCoordinate","addCoordinatePoint","createGeometry","createPointGeometry","addCoordinatePolygon","createPolygonGeometry","addCoordinatePolyline","createPolylineGeometry","addCoordinateMultipoint","createMultipointGeometry","queryGeometry","queryGeometryType","clone","x","z","dehydratedAddPointsCoordinate","paths","rings","points","transformPathLikeValue","quantizationParameters","orderByFields","outFields","returnCountOnly","outSpatialReference","outSR","wkid","relatedRecordGroups","objectIdFieldName","relatedRecords","hasOwnProperty","Object","keys","forEach","inSR","topFilter","groupByFields","returnExtentOnly","returnIdsOnly","returnGeometry","time","isEmpty","Error","featureSetFromJSON","requestOptions","_normalizeQuery","outStatistics","_normalizeFields","_queryIs3DObjectFormat","meshFeatureSetFromJSON","j","D","formatOf3DObjects","queryFormats","includes","transformFieldRoles","originX","originY","originZ","translationX","translationY","translationZ","scaleX","scaleY","scaleZ","rotationX","rotationY","rotationZ","rotationDeg","assign","multipatchOption","Q"],"mappings":"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","file":"static/js/73.640bbf77.chunk.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import\"../../../geometry.js\";import t from\"../../../Graphic.js\";import r from\"../../../request.js\";import s from\"../../../TimeExtent.js\";import a from\"../../../core/Error.js\";import i from\"../../../core/has.js\";import{JSONMap as o}from\"../../../core/jsonMap.js\";import n from\"../../../core/Loadable.js\";import{isSome as u,isNone as l}from\"../../../core/maybe.js\";import{setDeepValue as d}from\"../../../core/object.js\";import{debounce as c}from\"../../../core/promiseUtils.js\";import{dataComponents as h}from\"../../../core/urlUtils.js\";import{property as p}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/Logger.js\";import{subclass as y}from\"../../../core/accessorSupport/decorators/subclass.js\";import m from\"../../../geometry/Extent.js\";import{fromJSON as f}from\"../../../geometry/support/jsonUtils.js\";import{createDrawingInfo as g}from\"./support/clientSideDefaults.js\";import{processAttachmentQueryResult as R}from\"../../../rest/query/operations/queryAttachments.js\";import{unapplyEditsZUnitScaling as F}from\"../../../rest/query/operations/zscale.js\";import b from\"../../../tasks/QueryTask.js\";import q from\"../../../geometry/SpatialReference.js\";const I=new o({originalAndCurrentFeatures:\"original-and-current-features\",none:\"none\"});async function _(e){if(\"string\"==typeof e){const t=h(e);return t||{data:e}}return new Promise(((t,r)=>{const s=new FileReader;s.readAsDataURL(e),s.onload=()=>t(h(s.result)),s.onerror=e=>r(e)}))}const O=new Set([\"Feature Layer\",\"Table\"]);let S=class extends n{constructor(){super(...arguments),this.type=\"feature-layer\",this.refresh=c((async()=>{var e,t;await this.load();const r=null==(e=this.sourceJSON.editingInfo)?void 0:e.lastEditDate;if(null==r)return{hasUpdates:!0,updates:{}};try{await this._fetchService(null)}catch{return{hasUpdates:!0,updates:{}}}const s=r!==(null==(t=this.sourceJSON.editingInfo)?void 0:t.lastEditDate);return{hasUpdates:s,updates:s?{editingInfo:this.sourceJSON.editingInfo,extent:this.sourceJSON.extent}:null}}))}load(e){const t=u(e)?e.signal:null;return this.addResolvingPromise(this._fetchService(this.layer.sourceJSON,t)),Promise.resolve(this)}get queryTask(){const{capabilities:{query:{supportsFormatPBF:e}},parsedUrl:t,dynamicDataSource:r,infoFor3D:s,gdbVersion:a,spatialReference:o,fieldsIndex:n}=this.layer,u=i(\"featurelayer-pbf\")&&e&&l(s)?\"pbf\":\"json\";return new b({url:t.path,format:u,fieldsIndex:n,infoFor3D:s,dynamicDataSource:r,gdbVersion:a,sourceSpatialReference:o})}async addAttachment(e,t){await this.load();const s=e.attributes[this.layer.objectIdField],a=this.layer.parsedUrl.path+\"/\"+s+\"/addAttachment\",i=this._getLayerRequestOptions(),o=this._getFormDataForAttachment(t,i.query);try{const e=await r(a,{body:o});return this._createFeatureEditResult(e.data.addAttachmentResult)}catch(n){throw this._createAttachmentErrorResult(s,n)}}async updateAttachment(e,t,s){await this.load();const a=e.attributes[this.layer.objectIdField],i=this.layer.parsedUrl.path+\"/\"+a+\"/updateAttachment\",o=this._getLayerRequestOptions({query:{attachmentId:t}}),n=this._getFormDataForAttachment(s,o.query);try{const e=await r(i,{body:n});return this._createFeatureEditResult(e.data.updateAttachmentResult)}catch(u){throw this._createAttachmentErrorResult(a,u)}}async applyEdits(e,t){await this.load();const s=e.addFeatures.map(this._serializeFeature,this),a=e.updateFeatures.map(this._serializeFeature,this),i=this._getFeatureIds(e.deleteFeatures,null==t?void 0:t.globalIdUsed);F(s,a,this.layer.spatialReference);const o=[],n=[],u=[...e.deleteAttachments];for(const r of e.addAttachments)o.push(await this._serializeAttachment(r));for(const r of e.updateAttachments)n.push(await this._serializeAttachment(r));const l=o.length||n.length||u.length?{adds:o,updates:n,deletes:u}:null,d={gdbVersion:(null==t?void 0:t.gdbVersion)||this.layer.gdbVersion,rollbackOnFailure:null==t?void 0:t.rollbackOnFailureEnabled,useGlobalIds:null==t?void 0:t.globalIdUsed,returnEditMoment:null==t?void 0:t.returnEditMoment,usePreviousEditMoment:null==t?void 0:t.usePreviousEditMoment,sessionId:null==t?void 0:t.sessionId};null!=t&&t.returnServiceEditsOption?(d.edits=JSON.stringify([{id:this.layer.layerId,adds:s,updates:a,deletes:i,attachments:l}]),d.returnServiceEditsOption=I.toJSON(null==t?void 0:t.returnServiceEditsOption),d.returnServiceEditsInSourceSR=null==t?void 0:t.returnServiceEditsInSourceSR):(d.adds=s.length?JSON.stringify(s):null,d.updates=a.length?JSON.stringify(a):null,d.deletes=i.length?null!=t&&t.globalIdUsed?JSON.stringify(i):i.join(\",\"):null,d.attachments=l&&JSON.stringify(l));const c=this._getLayerRequestOptions({method:\"post\",query:d}),h=null!=t&&t.returnServiceEditsOption?this.layer.url:this.layer.parsedUrl.path,p=await r(h+\"/applyEdits\",c);return this._createEditsResult(p)}async deleteAttachments(e,t){await this.load();const s=e.attributes[this.layer.objectIdField],a=this.layer.parsedUrl.path+\"/\"+s+\"/deleteAttachments\";try{return(await r(a,this._getLayerRequestOptions({query:{attachmentIds:t.join(\",\")},method:\"post\"}))).data.deleteAttachmentResults.map(this._createFeatureEditResult)}catch(i){throw this._createAttachmentErrorResult(s,i)}}fetchRecomputedExtents(e={}){const t=e.signal;return this.load({signal:t}).then((async()=>{const t=this._getLayerRequestOptions({...e,query:{returnUpdates:!0}}),{layerId:a,url:i}=this.layer,{data:o}=await r(`${i}/${a}`,t),{id:n,extent:u,fullExtent:l,timeExtent:d}=o,c=u||l;return{id:n,fullExtent:c&&m.fromJSON(c),timeExtent:d&&s.fromJSON({start:d[0],end:d[1]})}}))}async queryAttachments(e,t={}){const{parsedUrl:s}=this.layer,a=s.path;await this.load();const i=this._getLayerRequestOptions(t);if(!this.layer.get(\"capabilities.operations.supportsQueryAttachments\")){const{objectIds:t}=e,s=[];for(const e of t){const t=a+\"/\"+e+\"/attachments\";s.push(r(t,i))}return Promise.all(s).then((e=>t.map(((t,r)=>({parentObjectId:t,attachmentInfos:e[r].data.attachmentInfos}))))).then((e=>R(e,a)))}return this.queryTask.executeAttachmentQuery(e,i)}async queryFeatures(e,t){return await this.load(),this.queryTask.execute(e,{...t,query:this._createRequestQueryOptions(t)})}async queryFeaturesJSON(e,t){return await this.load(),this.queryTask.executeJSON(e,{...t,query:this._createRequestQueryOptions(t)})}async queryObjectIds(e,t){return await this.load(),this.queryTask.executeForIds(e,{...t,query:this._createRequestQueryOptions(t)})}async queryFeatureCount(e,t){return await this.load(),this.queryTask.executeForCount(e,{...t,query:this._createRequestQueryOptions(t)})}async queryExtent(e,t){return await this.load(),this.queryTask.executeForExtent(e,{...t,query:this._createRequestQueryOptions(t)})}async queryRelatedFeatures(e,t){return await this.load(),this.queryTask.executeRelationshipQuery(e,{...t,query:this._createRequestQueryOptions(t)})}async queryRelatedFeaturesCount(e,t){return await this.load(),this.queryTask.executeRelationshipQueryForCount(e,{...t,query:this._createRequestQueryOptions(t)})}async queryTopFeatures(e,t){return await this.load(),this.queryTask.executeTopFeaturesQuery(e,{...t,query:this._createRequestQueryOptions(t)})}async queryTopObjectIds(e,t){return await this.load(),this.queryTask.executeForTopIds(e,{...t,query:this._createRequestQueryOptions(t)})}async queryTopExtents(e,t){return await this.load(),this.queryTask.executeForTopExtents(e,{...t,query:this._createRequestQueryOptions(t)})}async queryTopCount(e,t){return await this.load(),this.queryTask.executeForTopCount(e,{...t,query:this._createRequestQueryOptions(t)})}_createRequestQueryOptions(e){const t={...this.layer.customParameters,token:this.layer.apiKey,...null==e?void 0:e.query};return this.layer.datesInUnknownTimezone&&(t.timeReferenceUnknownClient=!0),t}async _fetchService(e,t){if(!e){const{data:s}=await r(this.layer.parsedUrl.path,this._getLayerRequestOptions({query:i(\"featurelayer-advanced-symbols\")?{returnAdvancedSymbols:!0}:{},signal:t}));e=s}this.sourceJSON=this._patchServiceJSON(e);const s=e.type;if(!O.has(s))throw new a(\"feature-layer-source:unsupported-type\",`Source type \"${s}\" is not supported`)}_patchServiceJSON(e){var t;if(\"Table\"!==e.type&&e.geometryType&&(null==e||null==(t=e.drawingInfo)||!t.renderer)&&!e.defaultSymbol){const t=g(e.geometryType).renderer;d(\"drawingInfo.renderer\",t,e)}return\"esriGeometryMultiPatch\"===e.geometryType&&e.infoFor3D&&(e.geometryType=\"mesh\"),e}_serializeFeature(e){const{geometry:t,attributes:r}=e;return l(t)?{attributes:r}:\"mesh\"===t.type||\"extent\"===t.type?null:{geometry:t.toJSON(),attributes:r}}async _serializeAttachment(e){const{feature:t,attachment:r}=e,{globalId:s,name:a,contentType:i,data:o,uploadId:n}=r,u={globalId:s,parentGlobalId:null,contentType:null,name:null,uploadId:null,data:null};if(t&&(u.parentGlobalId=\"attributes\"in t?t.attributes&&t.attributes[this.layer.globalIdField]:t.globalId),n)u.uploadId=n;else if(o){const e=await _(o);u.contentType=e.mediaType,u.data=e.data,o instanceof File&&(u.name=o.name)}return a&&(u.name=a),i&&(u.contentType=i),u}_getFeatureIds(e,t){const r=e[0];return r?this._canUseGlobalIds(t,e)?this._getGlobalIdsFromFeatureIdentifier(e):\"objectId\"in r?this._getObjectIdsFromFeatureIdentifier(e):this._getIdsFromFeatures(e):[]}_getIdsFromFeatures(e){const t=this.layer.objectIdField;return e.map((e=>e.attributes&&e.attributes[t]))}_canUseGlobalIds(e,t){return e&&\"globalId\"in t[0]}_getObjectIdsFromFeatureIdentifier(e){return e.map((e=>e.objectId))}_getGlobalIdsFromFeatureIdentifier(e){return e.map((e=>e.globalId))}_createEditsResult(e){var t;const r=e.data,{layerId:s}=this.layer,a=[];let i=null;if(Array.isArray(r))for(const u of r)a.push({id:u.id,editedFeatures:u.editedFeatures}),u.id===s&&(i={addResults:u.addResults,updateResults:u.updateResults,deleteResults:u.deleteResults,attachments:u.attachments,editMoment:u.editMoment});else i=r;const o=null==(t=i)?void 0:t.attachments,n={addFeatureResults:i.addResults?i.addResults.map(this._createFeatureEditResult,this):[],updateFeatureResults:i.updateResults?i.updateResults.map(this._createFeatureEditResult,this):[],deleteFeatureResults:i.deleteResults?i.deleteResults.map(this._createFeatureEditResult,this):[],addAttachmentResults:o&&o.addResults?o.addResults.map(this._createFeatureEditResult,this):[],updateAttachmentResults:o&&o.updateResults?o.updateResults.map(this._createFeatureEditResult,this):[],deleteAttachmentResults:o&&o.deleteResults?o.deleteResults.map(this._createFeatureEditResult,this):[]};if(i.editMoment&&(n.editMoment=i.editMoment),a.length>0){n.editedFeatureResults=[];for(const e of a){const{adds:t,updates:r,deletes:s,spatialReference:a}=e.editedFeatures,i=a?new q(a):null;n.editedFeatureResults.push({layerId:e.id,editedFeatures:{adds:(null==t?void 0:t.map((e=>this._createEditedFeature(e,i))))||[],updates:(null==r?void 0:r.map((e=>({original:this._createEditedFeature(e[0],i),current:this._createEditedFeature(e[1],i)}))))||[],deletes:(null==s?void 0:s.map((e=>this._createEditedFeature(e,i))))||[],spatialReference:i}})}}return n}_createEditedFeature(e,r){return new t({attributes:e.attributes,geometry:f({...e.geometry,spatialReference:r})})}_createFeatureEditResult(e){const t=!0===e.success?null:e.error||{code:void 0,description:void 0};return{objectId:e.objectId,globalId:e.globalId,error:t?new a(\"feature-layer-source:edit-failure\",t.description,{code:t.code}):null}}_createAttachmentErrorResult(e,t){const r=t.details.messages&&t.details.messages[0]||t.message,s=t.details.httpStatus||t.details.messageCode;return{objectId:e,globalId:null,error:new a(\"feature-layer-source:attachment-failure\",r,{code:s})}}_getFormDataForAttachment(e,t){const r=e instanceof FormData?e:e&&e.elements?new FormData(e):null;if(r)for(const s in t){const e=t[s];null!=e&&(r.set?r.set(s,e):r.append(s,e))}return r}_getLayerRequestOptions(e={}){const{parsedUrl:t,gdbVersion:r,dynamicDataSource:s}=this.layer;return{...e,query:{gdbVersion:r,layer:s?JSON.stringify({source:s}):void 0,...t.query,f:\"json\",...this._createRequestQueryOptions(e)},responseType:\"json\"}}};e([p()],S.prototype,\"type\",void 0),e([p({constructOnly:!0})],S.prototype,\"layer\",void 0),e([p({readOnly:!0})],S.prototype,\"queryTask\",null),S=e([y(\"esri.layers.graphics.sources.FeatureLayerSource\")],S);var E=S;export{E as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nconst t={supportsStatistics:!0,supportsPercentileStatistics:!0,supportsCentroid:!0,supportsCacheHint:!1,supportsDistance:!0,supportsDistinct:!0,supportsExtent:!0,supportsGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQuantization:!0,supportsQuantizationEditMode:!1,supportsQueryGeometry:!0,supportsResultType:!1,supportsSqlExpression:!0,supportsMaxRecordCountFactor:!1,supportsStandardizedQueriesOnly:!0,supportsTopFeaturesQuery:!1,supportsQueryByOthers:!0,supportsHistoricMoment:!1,supportsFormatPBF:!1,supportsDisjointSpatialRelationship:!0,maxRecordCountFactor:void 0,maxRecordCount:void 0,standardMaxRecordCount:void 0,tileMaxRecordCount:void 0};export{t as queryCapabilities};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport t from\"../../../../core/has.js\";import{clone as s}from\"../../../../core/lang.js\";import{queryCapabilities as e}from\"../../data/QueryEngineCapabilities.js\";import{defaultPointSymbolJSON as r,defaultPolylineSymbolJSON as p,defaultPolygonSymbolJSON as o}from\"../../../../symbols/support/defaultsJSON.js\";function u(t){return{renderer:{type:\"simple\",symbol:\"esriGeometryPoint\"===t||\"esriGeometryMultipoint\"===t?r:\"esriGeometryPolyline\"===t?p:o}}}function n(s,e){if(t(\"csp-restrictions\"))return()=>({[e]:null,...s});try{let t=`this.${e} = null;`;for(const e in s){t+=`this${e.indexOf(\".\")?`[\"${e}\"]`:`.${e}`} = ${JSON.stringify(s[e])};`}const r=new Function(t);return()=>new r}catch(r){return()=>({[e]:null,...s})}}function i(t={}){return[{name:\"New Feature\",description:\"\",prototype:{attributes:s(t)}}]}function a(t,s){return{attachment:null,data:{isVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:t},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:s,supportsDelete:s,supportsEditing:s,supportsChangeTracking:!1,supportsQuery:!0,supportsQueryAttachments:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:s,supportsExceedsLimitStatistics:!0},query:e,queryRelated:{supportsCount:!0,supportsOrderBy:!0,supportsPagination:!0},editing:{supportsGeometryUpdate:s,supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,supportsRollbackOnFailure:!1,supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1,supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1}}}export{a as createCapabilities,n as createDefaultAttributesFunction,i as createDefaultTemplate,u as createDrawingInfo};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{parseUrl as o}from\"../utils.js\";import{executeQueryForCount as r}from\"./operations/query.js\";import t from\"../support/Query.js\";async function n(n,s,m){const p=o(n);return r(p,t.from(s),{...m}).then((o=>o.data.count))}export{n as executeForCount};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{parseUrl as o}from\"../utils.js\";import{executeQueryForIds as r}from\"./operations/query.js\";import t from\"../support/Query.js\";async function s(s,e,m){const n=o(s);return r(n,t.from(e),{...m}).then((o=>o.data.objectIds))}export{s as executeForIds};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{parseUrl as r}from\"../utils.js\";import{executeQuery as t}from\"./operations/query.js\";import o from\"../support/FeatureSet.js\";import e from\"../support/Query.js\";async function s(r,t,e){const s=await a(r,t,e);return o.fromJSON(s)}async function a(o,s,a){const n=r(o),i={...a},p=e.from(s),{data:u}=await t(n,p,p.sourceSpatialReference,i);return u}export{s as executeQueryJSON,a as executeRawQueryJSON};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as o}from\"../../../chunks/tslib.es6.js\";import{JSONSupport as t}from\"../../../core/JSONSupport.js\";import{property as r}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import{Integer as e}from\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/Logger.js\";import{subclass as i}from\"../../../core/accessorSupport/decorators/subclass.js\";import{getExifValue as n}from\"../../../layers/support/exifUtils.js\";var s;const p={1:{id:1,rotation:0,mirrored:!1},2:{id:2,rotation:0,mirrored:!0},3:{id:3,rotation:180,mirrored:!1},4:{id:4,rotation:180,mirrored:!0},5:{id:5,rotation:-90,mirrored:!0},6:{id:6,rotation:90,mirrored:!1},7:{id:7,rotation:90,mirrored:!0},8:{id:8,rotation:-90,mirrored:!1}};let a=s=class extends t{constructor(o){super(o),this.contentType=null,this.exifInfo=null,this.id=null,this.globalId=null,this.keywords=null,this.name=null,this.parentGlobalId=null,this.parentObjectId=null,this.size=null,this.url=null}get orientationInfo(){const{exifInfo:o}=this,t=n({exifName:\"Exif IFD0\",tagName:\"Orientation\",exifInfo:o});return p[t]||null}clone(){return new s({contentType:this.contentType,exifInfo:this.exifInfo,id:this.id,globalId:this.globalId,keywords:this.keywords,name:this.name,parentGlobalId:this.parentGlobalId,parentObjectId:this.parentObjectId,size:this.size,url:this.url})}};o([r({type:String})],a.prototype,\"contentType\",void 0),o([r()],a.prototype,\"exifInfo\",void 0),o([r({readOnly:!0})],a.prototype,\"orientationInfo\",null),o([r({type:e})],a.prototype,\"id\",void 0),o([r({type:String})],a.prototype,\"globalId\",void 0),o([r({type:String})],a.prototype,\"keywords\",void 0),o([r({type:String})],a.prototype,\"name\",void 0),o([r({json:{read:!1}})],a.prototype,\"parentGlobalId\",void 0),o([r({json:{read:!1}})],a.prototype,\"parentObjectId\",void 0),o([r({type:e})],a.prototype,\"size\",void 0),o([r({json:{read:!1}})],a.prototype,\"url\",void 0),a=s=o([i(\"esri.layers.support.AttachmentInfo\")],a);var d=a;export{d as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nfunction n(n){const{exifInfo:e,exifName:a,tagName:u}=n;if(!e||!a||!u)return null;const f=e.find((n=>n.name===a));return f?t({tagName:u,tags:f.tags}):null}function t(n){const{tagName:t,tags:e}=n;if(!e||!t)return null;const a=e.find((n=>n.name===t));return a&&a.value||null}export{n as getExifValue};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{addTokenParameter as t}from\"../../../kernel.js\";import o from\"../../../request.js\";import{addProxy as e}from\"../../../core/urlUtils.js\";import r from\"../support/AttachmentInfo.js\";import{mapParameters as s}from\"../../../tasks/operations/urlUtils.js\";function n(t){const o=t.toJSON();return o.attachmentTypes&&(o.attachmentTypes=o.attachmentTypes.join(\",\")),o.keywords&&(o.keywords=o.keywords.join(\",\")),o.globalIds&&(o.globalIds=o.globalIds.join(\",\")),o.objectIds&&(o.objectIds=o.objectIds.join(\",\")),o.size&&(o.size=o.size.join(\",\")),o}function a(o,s){const n={};for(const a of o){const{parentObjectId:o,parentGlobalId:c,attachmentInfos:i}=a;for(const a of i){const{id:i}=a,m=e(t(`${s}/${o}/attachments/${i}`)),p=r.fromJSON(a);p.set({url:m,parentObjectId:o,parentGlobalId:c}),n[o]?n[o].push(p):n[o]=[p]}}return n}function c(t,e,r){let a={query:s({...t.query,f:\"json\",...n(e)})};return r&&(a={...r,...a,query:{...r.query,...a.query}}),o(t.path+\"/queryAttachments\",a)}export{c as executeAttachmentQuery,a as processAttachmentQueryResult};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{parseUrl as t}from\"../utils.js\";import{executeAttachmentQuery as r,processAttachmentQueryResult as e}from\"./operations/queryAttachments.js\";import o from\"../support/AttachmentQuery.js\";async function a(a,m,n){const s=t(a);return r(s,o.from(m),{...n}).then((t=>e(t.data.attachmentGroups,s.path)))}export{a as executeAttachmentQuery};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport\"../../geometry.js\";import{parseUrl as t}from\"../utils.js\";import{executeQueryForExtent as o}from\"./operations/query.js\";import r from\"../support/Query.js\";import e from\"../../geometry/Extent.js\";async function m(m,n,s){const p=t(m);return o(p,r.from(n),{...s}).then((t=>({count:t.data.count,extent:e.fromJSON(t.data.extent)})))}export{m as executeForExtent};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{neverReached as e}from\"../../../core/compilerUtils.js\";import{unquantizeOptimizedGeometry as t,convertToGeometry as r}from\"../../../layers/graphics/featureConversionUtils.js\";import{getGeometryZScaler as s}from\"./zscale.js\";function o(e,t){return t}function i(e,t,r,s){switch(r){case 0:return u(e,t+s,0);case 1:return\"lowerLeft\"===e.originPosition?u(e,t+s,1):d(e,t+s,1)}}function n(e,t,r,s){return 2===r?u(e,t,2):i(e,t,r,s)}function a(e,t,r,s){return 2===r?u(e,t,3):i(e,t,r,s)}function h(e,t,r,s){return 3===r?u(e,t,3):n(e,t,r,s)}function u({translate:e,scale:t},r,s){return e[s]+r*t[s]}function d({translate:e,scale:t},r,s){return e[s]-r*t[s]}class l{constructor(e){this.options=e,this.geometryTypes=[\"esriGeometryPoint\",\"esriGeometryMultipoint\",\"esriGeometryPolyline\",\"esriGeometryPolygon\"],this.previousCoordinate=[0,0],this.transform=null,this.applyTransform=o,this.lengths=[],this.currentLengthIndex=0,this.toAddInCurrentPath=0,this.vertexDimension=0,this.coordinateBuffer=null,this.coordinateBufferPtr=0,this.AttributesConstructor=function(){}}createFeatureResult(){return{fields:[],features:[]}}finishFeatureResult(e){if(this.options.applyTransform&&(e.transform=null),this.AttributesConstructor=function(){},this.coordinateBuffer=null,this.lengths.length=0,!e.hasZ)return;const t=s(e.geometryType,this.options.sourceSpatialReference,e.spatialReference);if(t)for(const r of e.features)t(r.geometry)}createSpatialReference(){return{}}addField(e,t){e.fields.push(t);const r=e.fields.map((e=>e.name));this.AttributesConstructor=function(){for(const e of r)this[e]=null}}addFeature(e,t){e.features.push(t)}prepareFeatures(t){switch(this.transform=t.transform,this.options.applyTransform&&t.transform&&(this.applyTransform=this.deriveApplyTransform(t)),this.vertexDimension=2,t.hasZ&&this.vertexDimension++,t.hasM&&this.vertexDimension++,t.geometryType){case\"esriGeometryPoint\":this.addCoordinate=(e,t,r)=>this.addCoordinatePoint(e,t,r),this.createGeometry=e=>this.createPointGeometry(e);break;case\"esriGeometryPolygon\":this.addCoordinate=(e,t,r)=>this.addCoordinatePolygon(e,t,r),this.createGeometry=e=>this.createPolygonGeometry(e);break;case\"esriGeometryPolyline\":this.addCoordinate=(e,t,r)=>this.addCoordinatePolyline(e,t,r),this.createGeometry=e=>this.createPolylineGeometry(e);break;case\"esriGeometryMultipoint\":this.addCoordinate=(e,t,r)=>this.addCoordinateMultipoint(e,t,r),this.createGeometry=e=>this.createMultipointGeometry(e);break;default:e(t.geometryType)}}createFeature(){return this.lengths.length=0,this.currentLengthIndex=0,this.previousCoordinate[0]=0,this.previousCoordinate[1]=0,this.coordinateBuffer=null,this.coordinateBufferPtr=0,{attributes:new this.AttributesConstructor}}allocateCoordinates(){}addLength(e,t,r){0===this.lengths.length&&(this.toAddInCurrentPath=t),this.lengths.push(t)}addQueryGeometry(e,s){const{queryGeometry:o,queryGeometryType:i}=s,n=t(o.clone(),o,!1,!1,this.transform),a=r(n,i,!1,!1);e.queryGeometryType=i,e.queryGeometry={...a}}createPointGeometry(e){const t={x:0,y:0,spatialReference:e.spatialReference};return e.hasZ&&(t.z=0),e.hasM&&(t.m=0),t}addCoordinatePoint(e,t,r){switch(t=this.applyTransform(this.transform,t,r,0),r){case 0:e.x=t;break;case 1:e.y=t;break;case 2:\"z\"in e?e.z=t:e.m=t;break;case 3:e.m=t}}transformPathLikeValue(e,t){let r=0;return t<=1&&(r=this.previousCoordinate[t],this.previousCoordinate[t]+=e),this.applyTransform(this.transform,e,t,r)}addCoordinatePolyline(e,t,r){this.dehydratedAddPointsCoordinate(e.paths,t,r)}addCoordinatePolygon(e,t,r){this.dehydratedAddPointsCoordinate(e.rings,t,r)}addCoordinateMultipoint(e,t,r){0===r&&e.points.push([]);const s=this.transformPathLikeValue(t,r);e.points[e.points.length-1].push(s)}createPolygonGeometry(e){return{rings:[[]],spatialReference:e.spatialReference,hasZ:!!e.hasZ,hasM:!!e.hasM}}createPolylineGeometry(e){return{paths:[[]],spatialReference:e.spatialReference,hasZ:!!e.hasZ,hasM:!!e.hasM}}createMultipointGeometry(e){return{points:[],spatialReference:e.spatialReference,hasZ:!!e.hasZ,hasM:!!e.hasM}}dehydratedAddPointsCoordinate(e,t,r){0===r&&0==this.toAddInCurrentPath--&&(e.push([]),this.toAddInCurrentPath=this.lengths[++this.currentLengthIndex]-1,this.previousCoordinate[0]=0,this.previousCoordinate[1]=0);const s=this.transformPathLikeValue(t,r),o=e[e.length-1];0===r&&(this.coordinateBufferPtr=0,this.coordinateBuffer=new Array(this.vertexDimension),o.push(this.coordinateBuffer)),this.coordinateBuffer[this.coordinateBufferPtr++]=s}deriveApplyTransform(e){const{hasZ:t,hasM:r}=e;return t&&r?h:t?n:r?a:i}}export{l as JSONFeatureSetParserContext};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{parseUrl as r}from\"../utils.js\";import{JSONFeatureSetParserContext as e}from\"./operations/pbfJSONFeatureSet.js\";import{executeQueryPBF as t}from\"./operations/query.js\";import o from\"../support/FeatureSet.js\";import a from\"../support/Query.js\";async function s(r,e,t){const a=await n(r,e,t);return o.fromJSON(a)}async function n(o,s,n){const p=r(o),i={...n},u=a.from(s),m=!u.quantizationParameters,{data:f}=await t(p,u,new e({sourceSpatialReference:u.sourceSpatialReference,applyTransform:m}),i);return f}export{s as executeQueryPBF,n as executeRawQueryPBF};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport e from\"../../../request.js\";import{mapParameters as t}from\"../../../tasks/operations/urlUtils.js\";function o(e,t){const o=e.toJSON();return o.objectIds&&(o.objectIds=o.objectIds.join(\",\")),o.orderByFields&&(o.orderByFields=o.orderByFields.join(\",\")),!o.outFields||null!=t&&t.returnCountOnly?delete o.outFields:-1!==o.outFields.indexOf(\"*\")?o.outFields=\"*\":o.outFields=o.outFields.join(\",\"),o.outSpatialReference&&(o.outSR=o.outSR.wkid||JSON.stringify(o.outSR.toJSON()),delete o.outSpatialReference),o.dynamicDataSource&&(o.layer=JSON.stringify({source:o.dynamicDataSource}),delete o.dynamicDataSource),o}async function r(e,t,o){const r=await s(e,t,o),n=r.data,a=n.geometryType,d=n.spatialReference,i={};for(const s of n.relatedRecordGroups){const e={fields:void 0,objectIdFieldName:void 0,geometryType:a,spatialReference:d,hasZ:!!n.hasZ,hasM:!!n.hasM,features:s.relatedRecords};if(null!=s.objectId)i[s.objectId]=e;else for(const t in s)s.hasOwnProperty(t)&&\"relatedRecords\"!==t&&(i[s[t]]=e)}return{...r,data:i}}async function n(e,t,o){const r=await s(e,t,o,{returnCountOnly:!0}),n=r.data,a={};for(const s of n.relatedRecordGroups)null!=s.objectId&&(a[s.objectId]=s.count);return{...r,data:a}}async function s(r,n,s={},a){const d=t({...r.query,f:\"json\",...a,...o(n,a)});return e(r.path+\"/queryRelatedRecords\",{...s,query:{...s.query,...d}})}export{r as executeRelationshipQuery,n as executeRelationshipQueryForCount,o as toQueryStringParameters};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{parseUrl as t}from\"../utils.js\";import{executeRelationshipQuery as r,executeRelationshipQueryForCount as e}from\"./operations/queryRelatedRecords.js\";import o from\"../support/FeatureSet.js\";import s from\"../support/RelationshipQuery.js\";async function n(e,n,u){n=s.from(n);const a=t(e);return r(a,n,u).then((t=>{const r=t.data,e={};return Object.keys(r).forEach((t=>e[t]=o.fromJSON(r[t]))),e}))}async function u(r,o,n){o=s.from(o);const u=t(r);return e(u,o,{...n}).then((t=>t.data))}export{n as executeRelationshipQuery,u as executeRelationshipQueryForCount};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport t from\"../../../request.js\";import{isSome as e}from\"../../../core/maybe.js\";import{join as r,urlToObject as n}from\"../../../core/urlUtils.js\";import{getJsonType as o}from\"../../../geometry/support/jsonUtils.js\";import{normalizeCentralMeridian as i}from\"../../../geometry/support/normalizeUtils.js\";import{applyFeatureSetZUnitScaling as s}from\"./queryZScale.js\";import{mapParameters as l}from\"../../../tasks/operations/urlUtils.js\";const u=\"Layer does not support extent calculation.\";function y(t,r){var n,i;const s=t.geometry,l=t.toJSON(),u=l;if(e(s)&&(u.geometry=JSON.stringify(s),u.geometryType=o(s),u.inSR=s.spatialReference.wkid||JSON.stringify(s.spatialReference)),null!=(n=l.topFilter)&&n.groupByFields&&(u.topFilter.groupByFields=l.topFilter.groupByFields.join(\",\")),null!=(i=l.topFilter)&&i.orderByFields&&(u.topFilter.orderByFields=l.topFilter.orderByFields.join(\",\")),l.topFilter&&(u.topFilter=JSON.stringify(u.topFilter)),l.objectIds&&(u.objectIds=l.objectIds.join(\",\")),l.orderByFields&&(u.orderByFields=l.orderByFields.join(\",\")),l.outFields&&!(null!=r&&r.returnCountOnly||null!=r&&r.returnExtentOnly||null!=r&&r.returnIdsOnly)?-1!==l.outFields.indexOf(\"*\")?u.outFields=\"*\":u.outFields=l.outFields.join(\",\"):delete u.outFields,l.outSR?u.outSR=l.outSR.wkid||JSON.stringify(l.outSR):s&&l.returnGeometry&&(u.outSR=u.inSR),l.returnGeometry&&delete l.returnGeometry,l.timeExtent){const t=l.timeExtent,{start:e,end:r}=t;null==e&&null==r||(u.time=e===r?e:`${null==e?\"null\":e},${null==r?\"null\":r}`),delete l.timeExtent}return u}async function m(t,e,r,n){const o=await c(t,e,\"json\",n);return s(e,r,o.data),o}async function d(t,r,n){return e(r.timeExtent)&&r.timeExtent.isEmpty?Promise.resolve({data:{objectIds:[]}}):c(t,r,\"json\",n,{returnIdsOnly:!0})}async function p(t,r,n){return e(r.timeExtent)&&r.timeExtent.isEmpty?Promise.resolve({data:{count:0,extent:null}}):c(t,r,\"json\",n,{returnExtentOnly:!0,returnCountOnly:!0}).then((t=>{const e=t.data;if(e.hasOwnProperty(\"extent\"))return t;if(e.features)throw new Error(u);if(e.hasOwnProperty(\"count\"))throw new Error(u);return t}))}function a(t,r,n){return e(r.timeExtent)&&r.timeExtent.isEmpty?Promise.resolve({data:{count:0}}):c(t,r,\"json\",n,{returnIdsOnly:!0,returnCountOnly:!0})}function c(o,s,u,m={},d={}){const p=\"string\"==typeof o?n(o):o,a=s.geometry?[s.geometry]:[];return m.responseType=\"pbf\"===u?\"array-buffer\":\"json\",i(a,null,m).then((n=>{const o=n&&n[0];e(o)&&((s=s.clone()).geometry=o);const i=l({...p.query,f:u,...d,...y(s,d)});return t(r(p.path,\"queryTopFeatures\"),{...m,query:{...i,...m.query}})}))}export{a as executeQueryForTopCount,p as executeQueryForTopExtents,d as executeQueryForTopIds,m as executeTopFeaturesQuery,y as queryToQueryStringParameters};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{parseUrl as r}from\"../utils.js\";import{executeTopFeaturesQuery as o}from\"./operations/queryTopFeatures.js\";import t from\"../support/FeatureSet.js\";import e from\"../support/TopFeaturesQuery.js\";async function s(s,p,u,a){const m=r(s),i={...a},{data:f}=await o(m,e.from(p),u,i);return t.fromJSON(f)}export{s as executeTopFeaturesQuery};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{parseUrl as o}from\"../utils.js\";import{executeQueryForTopIds as r}from\"./operations/queryTopFeatures.js\";import t from\"../support/TopFeaturesQuery.js\";async function s(s,e,p){const a=o(s);return(await r(a,t.from(e),{...p})).data.objectIds}export{s as executeForTopIds};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport\"../../geometry.js\";import{parseUrl as t}from\"../utils.js\";import{executeQueryForTopExtents as o}from\"./operations/queryTopFeatures.js\";import r from\"../support/TopFeaturesQuery.js\";import e from\"../../geometry/Extent.js\";async function m(m,s,n){const p=t(m),a=await o(p,r.from(s),{...n});return{count:a.data.count,extent:e.fromJSON(a.data.extent)}}export{m as executeForTopExtents};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{parseUrl as o}from\"../utils.js\";import{executeQueryForTopCount as r}from\"./operations/queryTopFeatures.js\";import t from\"../support/TopFeaturesQuery.js\";async function s(s,e,p){const u=o(s);return(await r(u,t.from(e),{...p})).data.count}export{s as executeForTopCount};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../chunks/tslib.es6.js\";import t from\"../core/Error.js\";import r from\"../core/has.js\";import{isSome as o,isNone as s}from\"../core/maybe.js\";import{whenOrAbort as i}from\"../core/promiseUtils.js\";import{property as u}from\"../core/accessorSupport/decorators/property.js\";import\"../core/accessorSupport/ensureType.js\";import\"../core/Logger.js\";import{subclass as n}from\"../core/accessorSupport/decorators/subclass.js\";import{DataLayerSource as a}from\"../layers/support/source/DataLayerSource.js\";import{executeAttachmentQuery as c}from\"../rest/query/executeAttachmentQuery.js\";import{executeForCount as p}from\"../rest/query/executeForCount.js\";import{executeForExtent as m}from\"../rest/query/executeForExtent.js\";import{executeForIds as f}from\"../rest/query/executeForIds.js\";import{executeRawQueryJSON as l}from\"../rest/query/executeQueryJSON.js\";import{executeRawQueryPBF as h}from\"../rest/query/executeQueryPBF.js\";import{executeRelationshipQuery as d,executeRelationshipQueryForCount as y}from\"../rest/query/executeRelationshipQuery.js\";import{executeTopFeaturesQuery as F}from\"../rest/query/executeTopFeaturesQuery.js\";import{executeForTopIds as S}from\"../rest/query/executeForTopIds.js\";import{executeForTopExtents as j}from\"../rest/query/executeForTopExtents.js\";import{executeForTopCount as D}from\"../rest/query/executeForTopCount.js\";import x from\"../rest/support/FeatureSet.js\";import O from\"../rest/support/Query.js\";import b from\"../rest/support/RelationshipQuery.js\";import q from\"./Task.js\";let g=class extends q{constructor(e){super(e),this.dynamicDataSource=null,this.fieldsIndex=null,this.format=\"json\",this.gdbVersion=null,this.infoFor3D=null,this.sourceSpatialReference=null}execute(e,t){return this.executeJSON(e,t).then((r=>this.featureSetFromJSON(e,r,t)))}async executeJSON(e,t){var o;const s={...this.requestOptions,...t},i=this._normalizeQuery(e),u=null!=(null==(o=e.outStatistics)?void 0:o[0]),n=r(\"featurelayer-pbf-statistics\"),a=!u||n;let c;if(\"pbf\"===this.format&&a)try{c=await h(this.url,i,s)}catch(p){if(\"query:parsing-pbf\"!==p.name)throw p;this.format=\"json\"}return\"json\"!==this.format&&a||(c=await l(this.url,i,s)),this._normalizeFields(c.fields),c}async featureSetFromJSON(e,t,r){if(!(this._queryIs3DObjectFormat(e)&&o(this.infoFor3D)&&t.features&&t.features.length))return x.fromJSON(t);const{meshFeatureSetFromJSON:s}=await i(import(\"../rest/support/meshFeatureSet.js\"),r);return s(e,this.infoFor3D,t)}executeForCount(e,t){const r={...this.requestOptions,...t},o=this._normalizeQuery(e);return p(this.url,o,r)}executeForExtent(e,t){const r={...this.requestOptions,...t},o=this._normalizeQuery(e);return m(this.url,o,r)}executeForIds(e,t){const r={...this.requestOptions,...t},o=this._normalizeQuery(e);return f(this.url,o,r)}executeRelationshipQuery(e,t){e=b.from(e);const r={...this.requestOptions,...t};return(this.gdbVersion||this.dynamicDataSource)&&((e=e.clone()).gdbVersion=e.gdbVersion||this.gdbVersion,e.dynamicDataSource=e.dynamicDataSource||this.dynamicDataSource),d(this.url,e,r)}executeRelationshipQueryForCount(e,t){e=b.from(e);const r={...this.requestOptions,...t};return(this.gdbVersion||this.dynamicDataSource)&&((e=e.clone()).gdbVersion=e.gdbVersion||this.gdbVersion,e.dynamicDataSource=e.dynamicDataSource||this.dynamicDataSource),y(this.url,e,r)}executeAttachmentQuery(e,t){const r={...this.requestOptions,...t};return c(this.url,e,r)}executeTopFeaturesQuery(e,t){const r={...this.requestOptions,...t};return F(this.parsedUrl,e,this.sourceSpatialReference,r)}executeForTopIds(e,t){const r={...this.requestOptions,...t};return S(this.parsedUrl,e,r)}executeForTopExtents(e,t){const r={...this.requestOptions,...t};return j(this.parsedUrl,e,r)}executeForTopCount(e,t){const r={...this.requestOptions,...t};return D(this.parsedUrl,e,r)}_normalizeQuery(e){let r=O.from(e);if(r.sourceSpatialReference=r.sourceSpatialReference||this.sourceSpatialReference,(this.gdbVersion||this.dynamicDataSource)&&(r=r===e?r.clone():r,r.gdbVersion=e.gdbVersion||this.gdbVersion,r.dynamicDataSource=e.dynamicDataSource?a.from(e.dynamicDataSource):this.dynamicDataSource),o(this.infoFor3D)&&this._queryIs3DObjectFormat(e)){r=r===e?r.clone():r,r.formatOf3DObjects=null;for(const e of this.infoFor3D.queryFormats){if(\"3D_glb\"===e.id){r.formatOf3DObjects=e.id;break}\"3D_gltf\"!==e.id||r.formatOf3DObjects||(r.formatOf3DObjects=e.id)}if(!r.formatOf3DObjects)throw new t(\"query:unsupported-3d-query-formats\",\"Could not find any supported 3D object query format. Only supported formats are 3D_glb and 3D_gltf\");if(s(r.outFields)||!r.outFields.includes(\"*\")){r=r===e?r.clone():r,s(r.outFields)&&(r.outFields=[]);const{originX:t,originY:o,originZ:i,translationX:u,translationY:n,translationZ:a,scaleX:c,scaleY:p,scaleZ:m,rotationX:f,rotationY:l,rotationZ:h,rotationDeg:d}=this.infoFor3D.transformFieldRoles;r.outFields.push(t,o,i,u,n,a,c,p,m,f,l,h,d)}}return r}_normalizeFields(e){if(o(this.fieldsIndex)&&o(e))for(const t of e){const e=this.fieldsIndex.get(t.name);e&&Object.assign(t,e.toJSON())}}_queryIs3DObjectFormat(e){return o(this.infoFor3D)&&e.returnGeometry&&\"xyFootprint\"!==e.multipatchOption&&!e.outStatistics}};e([u({type:a})],g.prototype,\"dynamicDataSource\",void 0),e([u()],g.prototype,\"fieldsIndex\",void 0),e([u()],g.prototype,\"format\",void 0),e([u()],g.prototype,\"gdbVersion\",void 0),e([u()],g.prototype,\"infoFor3D\",void 0),e([u()],g.prototype,\"sourceSpatialReference\",void 0),g=e([n(\"esri.tasks.QueryTask\")],g);var Q=g;export{Q as default};\n"],"sourceRoot":""}