(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[40,7,10,16,22,45,55,62,98,115],{1067:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return oe}));var n=r(7),a=r.n(n),i=r(12),o=r(21),s=r(13),c=r(2),u=r(4),l=r(77),p=r(65),b=r(5),d=r(6),y=r(0),f=r(214),h=(r(700),r(686),r(688),r(689),r(663),r(687),r(701),r(715),r(691)),j=r(82),v=r(29),O=r(15),m=r(11),g=r(677),w=r(30),S=r(27),x=r(99),k=r(1),I=(r(19),r(69)),F=(r(14),r(57)),T=r(10),E=r(682),_=r(724),R=r(710),P=r(709),M=r(699),C=r(716),N=r(879),L=r(992),D=r(671),A=r(705),V=r(739),q=r(993),U=r(728),B=r(672),J=r(209),z=r(900),G=r(675),Q=r(740),H=r(745),W=function(e){Object(b.a)(r,e);var t=Object(d.a)(r);function r(){var e;return Object(c.a)(this,r),(e=t.apply(this,arguments)).name=null,e.field=null,e.currentRangeExtent=null,e.fullRangeExtent=null,e.type="rangeInfo",e}return r}(r(26).a);Object(y.a)([Object(k.b)({type:String,json:{read:!0,write:!0}})],W.prototype,"name",void 0),Object(y.a)([Object(k.b)({type:String,json:{read:!0,write:!0}})],W.prototype,"field",void 0),Object(y.a)([Object(k.b)({type:[Number],json:{read:!0,write:!0}})],W.prototype,"currentRangeExtent",void 0),Object(y.a)([Object(k.b)({type:[Number],json:{read:!0,write:!0}})],W.prototype,"fullRangeExtent",void 0),Object(y.a)([Object(k.b)({type:["rangeInfo"],readOnly:!0,json:{read:!1,write:!0}})],W.prototype,"type",void 0);var K=W=Object(y.a)([Object(T.a)("esri.layers.support.RangeInfo")],W),Z=r(744),$=r(670),X=r(755),Y=r(299),ee=["3DObject","Point"],te=O.a.getLogger("esri.layers.SceneLayer"),re=Object(U.a)(),ne=function(e){Object(b.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(c.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).featureReduction=null,e.rangeInfos=null,e.operationalLayerType="ArcGISSceneServiceLayer",e.type="scene",e.fields=null,e.floorInfo=null,e.outFields=null,e.nodePages=null,e.materialDefinitions=null,e.textureSetDefinitions=null,e.geometryDefinitions=null,e.serviceUpdateTimeStamp=null,e.definitionExpression=null,e.path=null,e.labelsVisible=!0,e.labelingInfo=null,e.legendEnabled=!0,e.cachedDrawingInfo={color:!1},e.popupEnabled=!0,e.popupTemplate=null,e.objectIdField=null,e.globalIdField=null,e._fieldUsageInfo={},e.screenSizePerspectiveEnabled=!0,e}return Object(u.a)(n,[{key:"normalizeCtorArgs",value:function(e,t){return"string"==typeof e?Object(s.a)({url:e},t):e}},{key:"getField",value:function(e){return this.fieldsIndex.get(e)}},{key:"getFieldDomain",value:function(e,t){var r,n,a,i,o=null==(r=this.getFeatureType(null==t?void 0:t.feature))||null==(n=r.domains)?void 0:n[e];return o&&"inherited"!==o.type?o:null!=(a=null==(i=this.getField(e))?void 0:i.domain)?a:null}},{key:"getFeatureType",value:function(e){return e&&Object(m.j)(this.associatedLayer)?this.associatedLayer.getFeatureType(e):null}},{key:"types",get:function(){return Object(m.j)(this.associatedLayer)?this.associatedLayer.types:[]}},{key:"typeIdField",get:function(){return Object(m.j)(this.associatedLayer)?this.associatedLayer.typeIdField:null}},{key:"formTemplate",get:function(){return Object(m.j)(this.associatedLayer)?this.associatedLayer.formTemplate:null}},{key:"fieldsIndex",get:function(){return new B.a(this.fields)}},{key:"readNodePages",value:function(e,t,r){return"Point"===t.layerType&&(e=t.pointNodePages),null==e||"object"!=typeof e?null:z.c.fromJSON(e,r)}},{key:"elevationInfo",set:function(e){this._set("elevationInfo",e),this.loaded&&this._validateElevationInfo()}},{key:"geometryType",get:function(){return ie[this.profile]||"mesh"}},{key:"renderer",set:function(e){Object(J.e)(e,this.fieldsIndex),this._set("renderer",e)}},{key:"readCachedDrawingInfo",value:function(e){return null!=e&&"object"==typeof e||(e={}),null==e.color&&(e.color=!1),e}},{key:"capabilities",get:function(){var e=Object(m.j)(this.associatedLayer)&&this.associatedLayer.capabilities?this.associatedLayer.capabilities:L.a,t=e.query,r=e.editing,n=r.supportsGlobalId,a=r.supportsRollbackOnFailure,i=r.supportsUploadWithItemId,o=r.supportsReturnServiceEditsInSourceSpatialReference,s=e.data,c=s.supportsZ,u=s.supportsM,l=s.isVersioned,p=s.supportsAttachment,b=e.operations,d=b.supportsEditing,y=b.supportsUpdate,f=b.supportsQuery,h=b.supportsQueryAttachments,j=e.operations.supportsChangeTracking;return{query:t,editing:{supportsGlobalId:n,supportsReturnServiceEditsInSourceSpatialReference:o,supportsRollbackOnFailure:a,supportsGeometryUpdate:!1,supportsUploadWithItemId:i},data:{supportsAttachment:p,supportsZ:c,supportsM:u,isVersioned:l},operations:{supportsQuery:f,supportsQueryAttachments:h,supportsEditing:d&&j,supportsAdd:!1,supportsDelete:!1,supportsUpdate:y&&j}}}},{key:"editingEnabled",get:function(){return this._isOverridden("editingEnabled")?this._get("editingEnabled"):this.userHasEditingPrivileges},set:function(e){null!=e?this._override("editingEnabled",e):this._clearOverride("editingEnabled")}},{key:"defaultPopupTemplate",get:function(){return Object(m.j)(this.associatedLayer)||this.attributeStorageInfo?this.createPopupTemplate():null}},{key:"readObjectIdField",value:function(e,t){return!e&&t.fields&&t.fields.some((function(t){return"esriFieldTypeOID"===t.type&&(e=t.name),!!e})),e||void 0}},{key:"readGlobalIdField",value:function(e,t){return!e&&t.fields&&t.fields.some((function(t){return"esriFieldTypeGlobalID"===t.type&&(e=t.name),!!e})),e||void 0}},{key:"displayField",get:function(){return Object(m.j)(this.associatedLayer)?this.associatedLayer.displayField:null}},{key:"readProfile",value:function(e,t){var r=t.store.profile;return null!=r&&ae[r]?ae[r]:(te.error("Unknown or missing profile",{profile:r,layer:this}),"mesh-pyramids")}},{key:"load",value:function(e){var t=this,r=Object(m.j)(e)?e.signal:null,n=this.loadFromPortal({supportedTypes:["Scene Service"]},e).catch(w.u).then((function(){return t._fetchService(r)})).then((function(){return Promise.all([t._fetchIndexAndUpdateExtent(t.nodePages,r),t._setAssociatedFeatureLayer(r)])})).then((function(){return t._validateElevationInfo()})).then((function(){return t._applyAssociatedLayerOverrides()})).then((function(){return t._populateFieldUsageInfo()})).then((function(){return Object(Z.a)(t,{origin:"service"},r)})).then((function(){return Object(J.e)(t.renderer,t.fieldsIndex)})).then((function(){return t.finishLoadEditablePortalLayer(e)}));return this.addResolvingPromise(n),Promise.resolve(this)}},{key:"createQuery",value:function(){var e=new $.a;return"mesh"!==this.geometryType&&(e.returnGeometry=!0,e.returnZ=!0),e.where=this.definitionExpression||"1=1",e.sqlFormat="standard",e}},{key:"queryExtent",value:function(e,t){var r=this;return this._getAssociatedLayerForQuery().then((function(n){return n.queryExtent(e||r.createQuery(),t)}))}},{key:"queryFeatureCount",value:function(e,t){var r=this;return this._getAssociatedLayerForQuery().then((function(n){return n.queryFeatureCount(e||r.createQuery(),t)}))}},{key:"queryFeatures",value:function(e,t){var r=this;return this._getAssociatedLayerForQuery().then((function(n){return n.queryFeatures(e||r.createQuery(),t)})).then((function(e){if(null!=e&&e.features){var t,n=Object(o.a)(e.features);try{for(n.s();!(t=n.n()).done;){var a=t.value;a.layer=r,a.sourceLayer=r}}catch(i){n.e(i)}finally{n.f()}}return e}))}},{key:"queryObjectIds",value:function(e,t){var r=this;return this._getAssociatedLayerForQuery().then((function(n){return n.queryObjectIds(e||r.createQuery(),t)}))}},{key:"queryAttachments",value:function(e,t){return this._getAssociatedLayerForQuery().then((function(r){return r.queryAttachments(e,t)}))}},{key:"getFieldUsageInfo",value:function(e){var t={supportsLabelingInfo:!1,supportsRenderer:!1,supportsPopupTemplate:!1,supportsLayerQuery:!1};return this.loaded?this._fieldUsageInfo[e]||t:(te.error("#getFieldUsageInfo()","Unavailable until layer is loaded"),t)}},{key:"createPopupTemplate",value:function(e){return Object(X.a)(this,e)}},{key:"_getAssociatedLayerForQuery",value:function(){var e=this.associatedLayer;return Object(m.j)(e)&&e.loaded?Promise.resolve(e):this._loadAssociatedLayerForQuery()}},{key:"_loadAssociatedLayerForQuery",value:function(){var e=Object(i.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.load();case 2:if(!Object(m.i)(this.associatedLayer)){e.next=4;break}throw new v.a("scenelayer:query-not-available","SceneLayer queries are not available without an associated feature layer",{layer:this});case 4:return e.prev=4,e.next=7,this.associatedLayer.load();case 7:e.next=12;break;case 9:throw e.prev=9,e.t0=e.catch(4),new v.a("scenelayer:query-not-available","SceneLayer associated feature layer could not be loaded",{layer:this,error:e.t0});case 12:return e.abrupt("return",this.associatedLayer);case 13:case"end":return e.stop()}}),e,this,[[4,9]])})));return function(){return e.apply(this,arguments)}}()},{key:"hasCachedStatistics",value:function(e){return null!=this.statisticsInfo&&this.statisticsInfo.some((function(t){return t.name===e}))}},{key:"queryCachedStatistics",value:function(){var e=Object(i.a)(a.a.mark((function e(t,r){var n,i,s,c,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.load(r);case 2:if(this.statisticsInfo){e.next=4;break}throw new v.a("scenelayer:no-cached-statistics","Cached statistics are not available for this layer");case 4:if(n=this.fieldsIndex.get(t)){e.next=7;break}throw new v.a("scenelayer:field-unexisting","Field '".concat(t,"' does not exist on the layer"));case 7:i=Object(o.a)(this.statisticsInfo),e.prev=8,i.s();case 10:if((s=i.n()).done){e.next=17;break}if((c=s.value).name!==n.name){e.next=15;break}return u=Object(S.y)(this.parsedUrl.path,c.href),e.abrupt("return",Object(j.default)(u,{query:{f:"json",token:this.apiKey},responseType:"json",signal:r?r.signal:null}).then((function(e){return e.data})));case 15:e.next=10;break;case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(8),i.e(e.t0);case 22:return e.prev=22,i.f(),e.finish(22);case 25:throw new v.a("scenelayer:no-cached-statistics","Cached statistics for this attribute are not available");case 26:case"end":return e.stop()}}),e,this,[[8,19,22,25]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"saveAs",value:function(){var e=Object(i.a)(a.a.mark((function e(t,r){var n=this;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._debouncedSaveOperations(1,Object(s.a)(Object(s.a)({},r),{},{getTypeKeywords:function(){return n._getTypeKeywords()},portalItemLayerType:"scene"}),t));case 1:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"save",value:function(){var e=Object(i.a)(a.a.mark((function e(){var t,r=this;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={getTypeKeywords:function(){return r._getTypeKeywords()},portalItemLayerType:"scene"},e.abrupt("return",this._debouncedSaveOperations(0,t));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"applyEdits",value:function(){var e=Object(i.a)(a.a.mark((function e(t,n){var i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.e(28).then(r.bind(null,1091));case 2:return i=e.sent,e.next=5,this.load();case 5:if(!Object(m.i)(this.associatedLayer)){e.next=7;break}throw new v.a("".concat(this.type,"-layer:not-editable"),"Service is not editable");case 7:return e.next=9,this.associatedLayer.load();case 9:return e.abrupt("return",i.applyEdits(this,this.associatedLayer.source,t,n));case 10:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"on",value:function(e,t){return Object(l.a)(Object(p.a)(n.prototype),"on",this).call(this,e,t)}},{key:"validateLayer",value:function(e){if(e.layerType&&-1===ee.indexOf(e.layerType))throw new v.a("scenelayer:layer-type-not-supported","SceneLayer does not support this layer type",{layerType:e.layerType});if(isNaN(this.version.major)||isNaN(this.version.minor))throw new v.a("layer:service-version-not-supported","Service version is not supported.",{serviceVersion:this.version.versionString,supportedVersions:"1.x"});if(this.version.major>1)throw new v.a("layer:service-version-too-new","Service version is too new.",{serviceVersion:this.version.versionString,supportedVersions:"1.x"});!function(e,t){var r=!1,n=!1;if(null==e)r=!0,n=!0;else{var a=t&&t.isGeographic;switch(e){case"east-north-up":case"earth-centered":r=!0,n=a;break;case"vertex-reference-frame":r=!0,n=!a;break;default:r=!1}}if(!r)throw new v.a("scenelayer:unsupported-normal-reference-frame","Normal reference frame is invalid.");if(!n)throw new v.a("scenelayer:incompatible-normal-reference-frame","Normal reference frame is incompatible with layer spatial reference.")}(this.normalReferenceFrame,this.spatialReference)}},{key:"_getTypeKeywords",value:function(){var e=[];if("points"===this.profile)e.push("Point");else{if("mesh-pyramids"!==this.profile)throw new v.a("scenelayer:unknown-profile","SceneLayer:save() encountered an unknown SceneLayer profile: "+this.profile);e.push("3DObject")}return e}},{key:"_populateFieldUsageInfo",value:function(){var e=this;if(this._fieldUsageInfo={},this.fields){var t,r=Object(o.a)(this.fields);try{var n=function(){var r=t.value,n=!(!e.attributeStorageInfo||!e.attributeStorageInfo.some((function(e){return e.name===r.name}))),a=!!(Object(m.j)(e.associatedLayer)&&e.associatedLayer.fields&&e.associatedLayer.fields.some((function(e){return e&&r.name===e.name}))),i={supportsLabelingInfo:n,supportsRenderer:n,supportsPopupTemplate:n||a,supportsLayerQuery:a};e._fieldUsageInfo[r.name]=i};for(r.s();!(t=r.n()).done;)n()}catch(a){r.e(a)}finally{r.f()}}}},{key:"_applyAssociatedLayerOverrides",value:function(){this._applyAssociatedLayerFieldsOverrides(),this._applyAssociatedLayerPopupOverrides()}},{key:"_applyAssociatedLayerFieldsOverrides",value:function(){if(!Object(m.i)(this.associatedLayer)&&this.associatedLayer.fields){var e,t=null,r=Object(o.a)(this.associatedLayer.fields);try{for(r.s();!(e=r.n()).done;){var n=e.value,a=this.getField(n.name);a?(!a.domain&&n.domain&&(a.domain=n.domain.clone()),a.editable=n.editable,a.nullable=n.nullable,a.length=n.length):(t||(t=this.fields?this.fields.slice():[]),t.push(n.clone()))}}catch(i){r.e(i)}finally{r.f()}t&&this._set("fields",t)}}},{key:"_applyAssociatedLayerPopupOverrides",value:function(){if(!Object(m.i)(this.associatedLayer))for(var e=["popupTemplate","popupEnabled"],t=Object(I.a)(this),r=0;r<e.length;r++){var n=e[r],a=this.originIdOf(n),i=this.associatedLayer.originIdOf(n);a<i&&(2===i||3===i)&&t.setAtOrigin(n,this.associatedLayer[n],i)}}},{key:"_setAssociatedFeatureLayer",value:function(){var e=Object(i.a)(a.a.mark((function e(t){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(-1!==["mesh-pyramids","points"].indexOf(this.profile)){e.next=2;break}return e.abrupt("return");case 2:return r=new q.a(this.parsedUrl,this.portalItem,this.apiKey,t),e.prev=3,e.next=6,r.fetch();case 6:this.associatedLayer=e.sent,e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),Object(w.m)(e.t0)||this._logWarningOnPopupEnabled();case 12:case"end":return e.stop()}}),e,this,[[3,9]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_logWarningOnPopupEnabled",value:function(){var e=this;Object(x.h)(this,["popupTemplate","popupEnabled"],(function(){return e.popupEnabled&&null!=e.popupTemplate})).then((function(){return function(){var t="this SceneLayer: ".concat(e.title);null==e.attributeStorageInfo?te.warn("Associated FeatureLayer could not be loaded and no binary attributes found. Popups will not work on ".concat(t)):te.info("Associated FeatureLayer could not be loaded. Falling back to binary attributes for Popups on ".concat(t))}}))}},{key:"_validateElevationInfo",value:function(){var e=this.elevationInfo;e&&("mesh-pyramids"===this.profile&&"absolute-height"!==e.mode&&te.warn(".elevationInfo=","Mesh scene layers only support absolute-height elevation mode"),e.featureExpressionInfo&&"0"!==e.featureExpressionInfo.expression&&te.warn(".elevationInfo=","Scene layers do not support featureExpressionInfo"))}}]),n}(Object(N.a)(Object(R.a)(Object(P.a)(Object(M.a)(Object(C.a)(Object(g.a)(Object(_.a)(E.a))))))));Object(y.a)([Object(k.b)({types:{key:"type",base:A.a,typeMap:{selection:V.a}},json:{origins:{"web-scene":{name:"layerDefinition.featureReduction",write:!0},"portal-item":{name:"layerDefinition.featureReduction",write:!0}}}})],ne.prototype,"featureReduction",void 0),Object(y.a)([Object(k.b)({type:[K],json:{read:!1,origins:{"web-scene":{name:"layerDefinition.rangeInfos",write:!0},"portal-item":{name:"layerDefinition.rangeInfos",write:!0}}}})],ne.prototype,"rangeInfos",void 0),Object(y.a)([Object(k.b)({json:{read:!1}})],ne.prototype,"associatedLayer",void 0),Object(y.a)([Object(k.b)({type:["show","hide"]})],ne.prototype,"listMode",void 0),Object(y.a)([Object(k.b)({type:["ArcGISSceneServiceLayer"]})],ne.prototype,"operationalLayerType",void 0),Object(y.a)([Object(k.b)({json:{read:!1},readOnly:!0})],ne.prototype,"type",void 0),Object(y.a)([Object(k.b)(Object(s.a)(Object(s.a)({},re.fields),{},{readOnly:!0,json:{read:!1,origins:{service:{read:!0}}}}))],ne.prototype,"fields",void 0),Object(y.a)([Object(k.b)()],ne.prototype,"types",null),Object(y.a)([Object(k.b)()],ne.prototype,"typeIdField",null),Object(y.a)([Object(k.b)()],ne.prototype,"formTemplate",null),Object(y.a)([Object(k.b)({readOnly:!0})],ne.prototype,"fieldsIndex",null),Object(y.a)([Object(k.b)({type:H.a,json:{read:{source:"layerDefinition.floorInfo"},write:{target:"layerDefinition.floorInfo"}}})],ne.prototype,"floorInfo",void 0),Object(y.a)([Object(k.b)(re.outFields)],ne.prototype,"outFields",void 0),Object(y.a)([Object(k.b)({type:z.c,readOnly:!0,json:{read:!1}})],ne.prototype,"nodePages",void 0),Object(y.a)([Object(F.a)("service","nodePages",["nodePages","pointNodePages"])],ne.prototype,"readNodePages",null),Object(y.a)([Object(k.b)({type:[z.b],readOnly:!0})],ne.prototype,"materialDefinitions",void 0),Object(y.a)([Object(k.b)({type:[z.d],readOnly:!0})],ne.prototype,"textureSetDefinitions",void 0),Object(y.a)([Object(k.b)({type:[z.a],readOnly:!0})],ne.prototype,"geometryDefinitions",void 0),Object(y.a)([Object(k.b)({readOnly:!0})],ne.prototype,"serviceUpdateTimeStamp",void 0),Object(y.a)([Object(k.b)({readOnly:!0})],ne.prototype,"attributeStorageInfo",void 0),Object(y.a)([Object(k.b)({readOnly:!0})],ne.prototype,"statisticsInfo",void 0),Object(y.a)([Object(k.b)({type:String,json:{origins:{service:{read:!1,write:!1}},name:"layerDefinition.definitionExpression",write:{enabled:!0,allowNull:!0}}})],ne.prototype,"definitionExpression",void 0),Object(y.a)([Object(k.b)({type:String,json:{origins:{"web-scene":{read:!0,write:!0}},read:!1}})],ne.prototype,"path",void 0),Object(y.a)([Object(k.b)(D.b)],ne.prototype,"elevationInfo",null),Object(y.a)([Object(k.b)({type:String})],ne.prototype,"geometryType",null),Object(y.a)([Object(k.b)(D.d)],ne.prototype,"labelsVisible",void 0),Object(y.a)([Object(k.b)({type:[G.a],json:{origins:{service:{name:"drawingInfo.labelingInfo",read:{reader:Q.a},write:!1}},name:"layerDefinition.drawingInfo.labelingInfo",read:{reader:Q.a},write:!0}})],ne.prototype,"labelingInfo",void 0),Object(y.a)([Object(k.b)(D.e)],ne.prototype,"legendEnabled",void 0),Object(y.a)([Object(k.b)({type:Number,json:{origins:{"web-document":{default:1,write:{enabled:!0,target:{opacity:{type:Number},"layerDefinition.drawingInfo.transparency":{type:Number}}},read:{source:["opacity","layerDefinition.drawingInfo.transparency"],reader:function(e,t){var r,n;if("number"==typeof e&&e>=0&&e<=1)return e;var a=null==(r=t.layerDefinition)||null==(n=r.drawingInfo)?void 0:n.transparency;return void 0!==a?Object(Y.b)(a):void 0}}},"portal-item":{write:!0},service:{read:!1}}}})],ne.prototype,"opacity",void 0),Object(y.a)([Object(k.b)({types:h.b,json:{origins:{service:{read:{source:"drawingInfo.renderer"}}},name:"layerDefinition.drawingInfo.renderer",write:!0},value:null})],ne.prototype,"renderer",null),Object(y.a)([Object(k.b)({json:{read:!1}})],ne.prototype,"cachedDrawingInfo",void 0),Object(y.a)([Object(F.a)("service","cachedDrawingInfo")],ne.prototype,"readCachedDrawingInfo",null),Object(y.a)([Object(k.b)({readOnly:!0,json:{read:!1}})],ne.prototype,"capabilities",null),Object(y.a)([Object(k.b)({type:Boolean,json:{read:!1}})],ne.prototype,"editingEnabled",null),Object(y.a)([Object(k.b)(D.j)],ne.prototype,"popupEnabled",void 0),Object(y.a)([Object(k.b)({type:f.a,json:{name:"popupInfo",write:!0}})],ne.prototype,"popupTemplate",void 0),Object(y.a)([Object(k.b)({readOnly:!0,json:{read:!1}})],ne.prototype,"defaultPopupTemplate",null),Object(y.a)([Object(k.b)({type:String,json:{read:!1}})],ne.prototype,"objectIdField",void 0),Object(y.a)([Object(F.a)("service","objectIdField",["objectIdField","fields"])],ne.prototype,"readObjectIdField",null),Object(y.a)([Object(k.b)({type:String,json:{read:!1}})],ne.prototype,"globalIdField",void 0),Object(y.a)([Object(F.a)("service","globalIdField",["globalIdField","fields"])],ne.prototype,"readGlobalIdField",null),Object(y.a)([Object(k.b)({readOnly:!0,type:String,json:{read:!1}})],ne.prototype,"displayField",null),Object(y.a)([Object(k.b)({type:String,json:{read:!1}})],ne.prototype,"profile",void 0),Object(y.a)([Object(F.a)("service","profile",["store.profile"])],ne.prototype,"readProfile",null),Object(y.a)([Object(k.b)({readOnly:!0,type:String,json:{origins:{service:{read:{source:"store.normalReferenceFrame"}}},read:!1}})],ne.prototype,"normalReferenceFrame",void 0),Object(y.a)([Object(k.b)(D.m)],ne.prototype,"screenSizePerspectiveEnabled",void 0),ne=Object(y.a)([Object(T.a)("esri.layers.SceneLayer")],ne);var ae={"mesh-pyramids":"mesh-pyramids",meshpyramids:"mesh-pyramids","features-meshes":"mesh-pyramids",points:"points","features-points":"points",lines:"lines","features-lines":"lines",polygons:"polygons","features-polygons":"polygons"},ie={"mesh-pyramids":"mesh",points:"point",lines:"polyline",polygons:"polygon"},oe=ne},660:function(e,t,r){"use strict";r.d(t,"a",(function(){return y}));var n=r(2),a=r(5),i=r(6),o=r(0),s=r(42),c=r(26),u=r(1),l=(r(19),r(14),r(15),r(31)),p=r(10),b=new s.a({inherited:"inherited",codedValue:"coded-value",range:"range"}),d=function(e){Object(a.a)(r,e);var t=Object(i.a)(r);function r(e){var a;return Object(n.a)(this,r),(a=t.call(this,e)).name=null,a.type=null,a}return r}(c.a);Object(o.a)([Object(u.b)({type:String,json:{write:!0}})],d.prototype,"name",void 0),Object(o.a)([Object(l.a)(b)],d.prototype,"type",void 0);var y=d=Object(o.a)([Object(p.a)("esri.layers.support.Domain")],d)},661:function(e,t,r){"use strict";r.d(t,"a",(function(){return d}));var n,a=r(2),i=r(4),o=r(5),s=r(6),c=r(0),u=(r(1),r(19),r(14),r(15),r(31)),l=r(10),p=r(660),b=n=function(e){Object(o.a)(r,e);var t=Object(s.a)(r);function r(e){var n;return Object(a.a)(this,r),(n=t.call(this,e)).type="inherited",n}return Object(i.a)(r,[{key:"clone",value:function(){return new n}}]),r}(p.a);Object(c.a)([Object(u.a)({inherited:"inherited"})],b.prototype,"type",void 0);var d=b=n=Object(c.a)([Object(l.a)("esri.layers.support.InheritedDomain")],b)},662:function(e,t,r){"use strict";r.d(t,"a",(function(){return y}));var n,a=r(2),i=r(4),o=r(5),s=r(6),c=r(0),u=r(1),l=(r(19),r(14),r(15),r(31)),p=r(10),b=r(660),d=n=function(e){Object(o.a)(r,e);var t=Object(s.a)(r);function r(e){var n;return Object(a.a)(this,r),(n=t.call(this,e)).maxValue=null,n.minValue=null,n.type="range",n}return Object(i.a)(r,[{key:"clone",value:function(){return new n({maxValue:this.maxValue,minValue:this.minValue,name:this.name})}}]),r}(b.a);Object(c.a)([Object(u.b)({type:Number,json:{type:[Number],read:{source:"range",reader:function(e,t){return t.range&&t.range[1]}},write:{enabled:!1,overridePolicy:function(){return{enabled:null!=this.maxValue&&null==this.minValue}},target:"range",writer:function(e,t,r){t[r]=[this.minValue||0,e]}}}})],d.prototype,"maxValue",void 0),Object(c.a)([Object(u.b)({type:Number,json:{type:[Number],read:{source:"range",reader:function(e,t){return t.range&&t.range[0]}},write:{target:"range",writer:function(e,t,r){t[r]=[e,this.maxValue||0]}}}})],d.prototype,"minValue",void 0),Object(c.a)([Object(l.a)({range:"range"})],d.prototype,"type",void 0);var y=d=n=Object(c.a)([Object(p.a)("esri.layers.support.RangeDomain")],d)},664:function(e,t,r){"use strict";r.d(t,"a",(function(){return O}));var n,a=r(2),i=r(4),o=r(5),s=r(6),c=r(0),u=r(18),l=r(1),p=(r(14),r(19),r(15),r(31)),b=r(10),d=r(26),y=n=function(e){Object(o.a)(r,e);var t=Object(s.a)(r);function r(e){var n;return Object(a.a)(this,r),(n=t.call(this,e)).name=null,n.code=null,n}return Object(i.a)(r,[{key:"clone",value:function(){return new n({name:this.name,code:this.code})}}]),r}(d.a);Object(c.a)([Object(l.b)({type:String,json:{write:!0}})],y.prototype,"name",void 0),Object(c.a)([Object(l.b)({type:[String,Number],json:{write:!0}})],y.prototype,"code",void 0);var f,h=y=n=Object(c.a)([Object(b.a)("esri.layers.support.CodedValue")],y),j=r(660),v=f=function(e){Object(o.a)(r,e);var t=Object(s.a)(r);function r(e){var n;return Object(a.a)(this,r),(n=t.call(this,e)).codedValues=null,n.type="coded-value",n}return Object(i.a)(r,[{key:"getName",value:function(e){var t=null;if(this.codedValues){var r=String(e);this.codedValues.some((function(e){return String(e.code)===r&&(t=e.name),!!t}))}return t}},{key:"clone",value:function(){return new f({codedValues:Object(u.a)(this.codedValues),name:this.name})}}]),r}(j.a);Object(c.a)([Object(l.b)({type:[h],json:{write:!0}})],v.prototype,"codedValues",void 0),Object(c.a)([Object(p.a)({codedValue:"coded-value"})],v.prototype,"type",void 0);var O=v=f=Object(c.a)([Object(b.a)("esri.layers.support.CodedValueDomain")],v)},666:function(e,t,r){"use strict";r.d(t,"a",(function(){return m}));var n,a=r(2),i=r(4),o=r(5),s=r(6),c=r(0),u=r(42),l=r(26),p=r(1),b=(r(19),r(14)),d=(r(15),r(31)),y=r(57),f=r(10),h=r(679),j=r(690),v=new u.a({binary:"binary",coordinate:"coordinate",countOrAmount:"count-or-amount",dateAndTime:"date-and-time",description:"description",locationOrPlaceName:"location-or-place-name",measurement:"measurement",nameOrTitle:"name-or-title",none:"none",orderedOrRanked:"ordered-or-ranked",percentageOrRatio:"percentage-or-ratio",typeOrCategory:"type-or-category",uniqueIdentifier:"unique-identifier"}),O=n=function(e){Object(o.a)(r,e);var t=Object(s.a)(r);function r(e){var n;return Object(a.a)(this,r),(n=t.call(this,e)).alias=null,n.defaultValue=void 0,n.description=null,n.domain=null,n.editable=!0,n.length=-1,n.name=null,n.nullable=!0,n.type=null,n.valueType=null,n}return Object(i.a)(r,[{key:"readDescription",value:function(e,t){var r,n=t.description;try{r=JSON.parse(n)}catch(a){}return r?r.value:null}},{key:"readValueType",value:function(e,t){var r,n=t.description;try{r=JSON.parse(n)}catch(a){}return r?v.fromJSON(r.fieldValueType):null}},{key:"clone",value:function(){return new n({alias:this.alias,defaultValue:this.defaultValue,description:this.description,domain:this.domain&&this.domain.clone()||null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type,valueType:this.valueType})}}]),r}(l.a);Object(c.a)([Object(p.b)({type:String,json:{write:!0}})],O.prototype,"alias",void 0),Object(c.a)([Object(p.b)({type:[String,Number],json:{write:{allowNull:!0}}})],O.prototype,"defaultValue",void 0),Object(c.a)([Object(p.b)()],O.prototype,"description",void 0),Object(c.a)([Object(y.a)("description")],O.prototype,"readDescription",null),Object(c.a)([Object(p.b)({types:h.b,json:{read:{reader:h.a},write:!0}})],O.prototype,"domain",void 0),Object(c.a)([Object(p.b)({type:Boolean,json:{write:!0}})],O.prototype,"editable",void 0),Object(c.a)([Object(p.b)({type:b.a,json:{write:!0}})],O.prototype,"length",void 0),Object(c.a)([Object(p.b)({type:String,json:{write:!0}})],O.prototype,"name",void 0),Object(c.a)([Object(p.b)({type:Boolean,json:{write:!0}})],O.prototype,"nullable",void 0),Object(c.a)([Object(d.a)(j.a)],O.prototype,"type",void 0),Object(c.a)([Object(p.b)()],O.prototype,"valueType",void 0),Object(c.a)([Object(y.a)("valueType",["description"])],O.prototype,"readValueType",null);var m=O=n=Object(c.a)([Object(f.a)("esri.layers.support.Field")],O)},667:function(e,t,r){"use strict";r.d(t,"a",(function(){return g}));var n=r(21),a=r(2),i=r(4),o=r(83),s=r(29),c=r(122),u=r(11),l=r(30),p=r(674),b=r(296),d={statsWorker:function(){return r.e(99).then(r.bind(null,787))},geometryEngineWorker:function(){return Promise.all([r.e(9),r.e(82)]).then(r.bind(null,788))},CSVSourceWorker:function(){return Promise.all([r.e(4),r.e(5),r.e(6),r.e(8),r.e(59)]).then(r.bind(null,803))},EdgeProcessingWorker:function(){return Promise.all([r.e(12),r.e(81)]).then(r.bind(null,797))},ElevationSamplerWorker:function(){return Promise.all([r.e(4),r.e(8),r.e(12),r.e(20),r.e(111)]).then(r.bind(null,789))},FeatureServiceSnappingSourceWorker:function(){return Promise.all([r.e(4),r.e(5),r.e(6),r.e(8),r.e(51)]).then(r.bind(null,798))},GeoJSONSourceWorker:function(){return Promise.all([r.e(4),r.e(5),r.e(6),r.e(8),r.e(58)]).then(r.bind(null,790))},LercWorker:function(){return r.e(89).then(r.bind(null,791))},MemorySourceWorker:function(){return Promise.all([r.e(4),r.e(5),r.e(6),r.e(8),r.e(57)]).then(r.bind(null,792))},PBFDecoderWorker:function(){return Promise.all([r.e(6),r.e(65)]).then(r.bind(null,800))},Pipeline:function(){return Promise.all([r.e(2),r.e(4),r.e(5),r.e(6),r.e(39)]).then(r.bind(null,795))},PointCloudWorker:function(){return Promise.all([r.e(4),r.e(27),r.e(75)]).then(r.bind(null,799))},RasterWorker:function(){return r.e(63).then(r.bind(null,793))},SceneLayerWorker:function(){return r.e(121).then(r.bind(null,804))},WFSSourceWorker:function(){return Promise.all([r.e(4),r.e(5),r.e(6),r.e(8),r.e(56)]).then(r.bind(null,794))},WorkerTileHandler:function(){return Promise.all([r.e(26),r.e(23),r.e(93)]).then(r.bind(null,796))}},y=p.a.CLOSE,f=p.a.ABORT,h=p.a.INVOKE,j=p.a.RESPONSE,v=p.a.OPEN_PORT,O=p.a.ON,m=function(){function e(t){Object(a.a)(this,e),this._timer=null,this._cancelledJobIds=new Set,this._invokeMessages=[],this._invoke=t,this._timer=null,this._process=this._process.bind(this)}return Object(i.a)(e,[{key:"push",value:function(e){e.type===p.a.ABORT?this._cancelledJobIds.add(e.jobId):(this._invokeMessages.push(e),null===this._timer&&(this._timer=setTimeout(this._process,0)))}},{key:"clear",value:function(){this._invokeMessages.length=0,this._cancelledJobIds.clear(),this._timer=null}},{key:"_process",value:function(){this._timer=null;var e,t=Object(n.a)(this._invokeMessages);try{for(t.s();!(e=t.n()).done;){var r=e.value;this._cancelledJobIds.has(r.jobId)||this._invoke(r)}}catch(a){t.e(a)}finally{t.f()}this._cancelledJobIds.clear(),this._invokeMessages.length=0}}]),e}(),g=function(){function e(t,r){var n=this;Object(a.a)(this,e),this._port=t,this._outJobs=new Map,this._inJobs=new Map,this._invokeQueue=new m((function(e){return n._onInvokeMessage(e)})),this._client=r.client,this._onMessage=this._onMessage.bind(this),this._channel=r.channel,this._schedule=r.schedule,this._port.addEventListener("message",this._onMessage),this._port.start()}return Object(i.a)(e,[{key:"close",value:function(){this._post({type:y}),this._close()}},{key:"isBusy",value:function(){return this._outJobs.size>0}},{key:"invoke",value:function(e,t,r){var n=this,a=r&&r.signal,i=r&&r.transferList;if(!this._port)return Promise.reject(new s.a("worker:port-closed","Cannot call invoke('".concat(e,"'), port is closed"),{methodName:e,data:t}));var o=Object(p.b)();return new Promise((function(r,s){var c=Object(l.r)(a,(function(){var e,t=n._outJobs.get(o);t&&(n._outJobs.delete(o),null==(e=t.abortHandle)||e.remove(),n._post({type:f,jobId:o}),s(Object(l.e)()))})),u={resolve:r,reject:s,abortHandle:c,debugInfo:e};n._outJobs.set(o,u),n._post({type:h,jobId:o,methodName:e,abortable:null!=a},t,i)}))}},{key:"on",value:function(e,t){var r=new MessageChannel;function n(e){t(e.data)}return this._port.postMessage({type:p.a.ON,eventType:e,port:r.port2},[r.port2]),r.port1.addEventListener("message",n),r.port1.start(),{remove:function(){r.port1.postMessage({type:p.a.CLOSE}),r.port1.close(),r.port1.removeEventListener("message",n)}}}},{key:"openPort",value:function(){var e=new MessageChannel;return this._post({type:v,port:e.port2}),e.port1}},{key:"_close",value:function(){this._channel&&(this._channel=null),this._port.removeEventListener("message",this._onMessage),this._port.close(),this._outJobs.forEach((function(e){var t;null==(t=e.abortHandle)||t.remove(),e.reject(Object(l.e)("Worker closing, aborting job calling '".concat(e.debugInfo,"'")))})),this._inJobs.clear(),this._outJobs.clear(),this._invokeQueue.clear(),this._port=this._client=this._schedule=null}},{key:"_onMessage",value:function(e){var t=this;Object(u.j)(this._schedule)?this._schedule((function(){return t._processMessage(e)})):this._processMessage(e)}},{key:"_processMessage",value:function(e){var t=Object(p.d)(e);if(t)switch(t.type){case j:this._onResponseMessage(t);break;case h:this._invokeQueue.push(t);break;case f:this._onAbortMessage(t);break;case y:this._onCloseMessage();break;case v:this._onOpenPortMessage(t);break;case O:this._onOnMessage(t)}}},{key:"_onAbortMessage",value:function(e){var t=this._inJobs,r=e.jobId,n=t.get(r);this._invokeQueue.push(e),n&&(n.controller&&n.controller.abort(),t.delete(r))}},{key:"_onCloseMessage",value:function(){var t=this._client;this._close(),t&&"destroy"in t&&e.clients.get(this)===t&&t.destroy(),e.clients.delete(this),t&&t.remoteClient&&(t.remoteClient=null)}},{key:"_onInvokeMessage",value:function(e){var t,r=this,n=e.methodName,a=e.jobId,i=e.data,o=e.abortable?Object(l.d)():null,s=this._inJobs,c=this._client,u=c[n];try{if(!u&&n&&-1!==n.indexOf("."))for(var b=n.split("."),d=0;d<b.length-1;d++)u=(c=c[b[d]])[b[d+1]];if("function"!=typeof u)throw new TypeError("".concat(n," is not a function"));t=u.call(c,i,{client:this,signal:o?o.signal:null})}catch(y){return void this._post({type:j,jobId:a,error:Object(p.e)(y)})}Object(l.p)(t)?(s.set(a,{controller:o,promise:t}),t.then((function(e){s.has(a)&&(s.delete(a),r._post({type:j,jobId:a},e))}),(function(e){s.has(a)&&(s.delete(a),Object(l.m)(e)||r._post({type:j,jobId:a,error:Object(p.e)(e||{message:"Error encountered at method ".concat(n)})}))}))):this._post({type:j,jobId:a},t)}},{key:"_onOpenPortMessage",value:function(t){new e(t.port,{client:this._client})}},{key:"_onOnMessage",value:function(e){var t=e.port,r=this._client.on(e.eventType,(function(e){t.postMessage(e)})),n=Object(c.c)(e.port,"message",(function(e){Object(p.d)(e).type===p.a.CLOSE&&(n.remove(),r.remove(),t.close())}))}},{key:"_onResponseMessage",value:function(e){var t,r=e.jobId,n=e.error,a=e.data,i=this._outJobs;if(i.has(r)){var o=i.get(r);i.delete(r),null==(t=o.abortHandle)||t.remove(),n?o.reject(s.a.fromJSON(JSON.parse(n))):o.resolve(a)}}},{key:"_post",value:function(e,t,r){return Object(p.c)(this._port,e,t,r)}}],[{key:"connect",value:function(t){var r,n=new MessageChannel;r="function"==typeof t?new t:"default"in t&&"function"==typeof t.default?new t.default:t;var a=new e(n.port1,{channel:n,client:r});return"object"==typeof r&&"remoteClient"in r&&(r.remoteClient=a),e.clients.set(a,r),n.port2}},{key:"loadWorker",value:function(e){var t=d[e];return t?t():Promise.resolve(null)}}]),e}();g.kernelInfo={revision:b.b,version:o.d,buildDate:b.a},g.clients=new Map},668:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return x}));var n=r(22),a=r(21),i=r(2),o=r(4),s=r(5),c=r(6),u=r(0),l=r(114),p=r(210),b=r(42),d=r(26),y=r(11),f=r(1),h=(r(19),r(14),r(15),r(57)),j=r(10),v=r(43),O=r(45),m=r(62),g=r(666),w=new b.a({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh","":null}),S=function(e){Object(s.a)(r,e);var t=Object(c.a)(r);function r(e){var n;return Object(i.a)(this,r),(n=t.call(this,e)).displayFieldName=null,n.exceededTransferLimit=!1,n.features=[],n.fields=null,n.geometryType=null,n.hasM=!1,n.hasZ=!1,n.queryGeometry=null,n.spatialReference=null,n}return Object(o.a)(r,[{key:"readFeatures",value:function(e,t){for(var r=O.a.fromJSON(t.spatialReference),n=[],a=0;a<e.length;a++){var i=e[a],o=p.a.fromJSON(i),s=i.geometry&&i.geometry.spatialReference;Object(y.j)(o.geometry)&&!s&&(o.geometry.spatialReference=r),n.push(o)}return n}},{key:"writeGeometryType",value:function(e,t,r,n){if(e)w.write(e,t,r,n);else{var i=this.features;if(i){var o,s=Object(a.a)(i);try{for(s.s();!(o=s.n()).done;){var c=o.value;if(c&&Object(y.j)(c.geometry))return void w.write(c.geometry.type,t,r,n)}}catch(u){s.e(u)}finally{s.f()}}}}},{key:"readQueryGeometry",value:function(e,t){if(!e)return null;var r=!!e.spatialReference,n=Object(m.a)(e);return!r&&t.spatialReference&&(n.spatialReference=O.a.fromJSON(t.spatialReference)),n}},{key:"writeSpatialReference",value:function(e,t){if(e)t.spatialReference=e.toJSON();else{var r=this.features;if(r){var n,i=Object(a.a)(r);try{for(i.s();!(n=i.n()).done;){var o=n.value;if(o&&Object(y.j)(o.geometry)&&o.geometry.spatialReference)return void(t.spatialReference=o.geometry.spatialReference.toJSON())}}catch(s){i.e(s)}finally{i.f()}}}}},{key:"toJSON",value:function(e){var t=this.write(null);if(t.features&&Array.isArray(e)&&e.length>0)for(var r=0;r<t.features.length;r++){var n=t.features[r];if(n.geometry){var a=e&&e[r];n.geometry=a&&a.toJSON()||n.geometry}}return t}},{key:"quantize",value:function(e){for(var t=Object(n.a)(e.scale,2),r=t[0],a=t[1],i=Object(n.a)(e.translate,2),o=i[0],s=i[1],c=this.features,u=this._getQuantizationFunction(this.geometryType,(function(e){return Math.round((e-o)/r)}),(function(e){return Math.round((s-e)/a)})),l=0,p=c.length;l<p;l++)u(Object(y.q)(c[l].geometry))||(c.splice(l,1),l--,p--);return this.transform=e,this}},{key:"unquantize",value:function(){var e=this.geometryType,t=this.features,r=this.transform;if(!r)return this;var i,o=Object(n.a)(r.translate,2),s=o[0],c=o[1],u=Object(n.a)(r.scale,2),l=u[0],p=u[1],b=this._getHydrationFunction(e,(function(e){return e*l+s}),(function(e){return c-e*p})),d=Object(a.a)(t);try{for(d.s();!(i=d.n()).done;){var f=i.value.geometry;Object(y.j)(f)&&b(f)}}catch(h){d.e(h)}finally{d.f()}return this.transform=null,this}},{key:"_quantizePoints",value:function(e,t,r){for(var n,a,i=[],o=0,s=e.length;o<s;o++){var c=e[o];if(o>0){var u=t(c[0]),l=r(c[1]);u===n&&l===a||(i.push([u-n,l-a]),n=u,a=l)}else n=t(c[0]),a=r(c[1]),i.push([n,a])}return i.length>0?i:null}},{key:"_getQuantizationFunction",value:function(e,t,r){var n=this;return"point"===e?function(e){return e.x=t(e.x),e.y=r(e.y),e}:"polyline"===e||"polygon"===e?function(e){for(var a=Object(m.g)(e)?e.rings:e.paths,i=[],o=0,s=a.length;o<s;o++){var c=a[o],u=n._quantizePoints(c,t,r);u&&i.push(u)}return i.length>0?(Object(m.g)(e)?e.rings=i:e.paths=i,e):null}:"multipoint"===e?function(e){var a=n._quantizePoints(e.points,t,r);return a.length>0?(e.points=a,e):null}:"extent"===e?function(e){return e}:null}},{key:"_getHydrationFunction",value:function(e,t,r){return"point"===e?function(e){e.x=t(e.x),e.y=r(e.y)}:"polyline"===e||"polygon"===e?function(e){for(var n,a,i=Object(m.g)(e)?e.rings:e.paths,o=0,s=i.length;o<s;o++)for(var c=i[o],u=0,l=c.length;u<l;u++){var p=c[u];u>0?(n+=p[0],a+=p[1]):(n=p[0],a=p[1]),p[0]=t(n),p[1]=r(a)}}:"extent"===e?function(e){e.xmin=t(e.xmin),e.ymin=r(e.ymin),e.xmax=t(e.xmax),e.ymax=r(e.ymax)}:"multipoint"===e?function(e){for(var n,a,i=e.points,o=0,s=i.length;o<s;o++){var c=i[o];o>0?(n+=c[0],a+=c[1]):(n=c[0],a=c[1]),c[0]=t(n),c[1]=r(a)}}:void 0}}]),r}(d.a);Object(u.a)([Object(f.b)({type:String,json:{write:!0}})],S.prototype,"displayFieldName",void 0),Object(u.a)([Object(f.b)({type:Boolean,json:{write:{overridePolicy:function(e){return{enabled:e}}}}})],S.prototype,"exceededTransferLimit",void 0),Object(u.a)([Object(f.b)({type:[p.a],json:{write:!0}})],S.prototype,"features",void 0),Object(u.a)([Object(h.a)("features")],S.prototype,"readFeatures",null),Object(u.a)([Object(f.b)({type:[g.a],json:{write:!0}})],S.prototype,"fields",void 0),Object(u.a)([Object(f.b)({type:["point","multipoint","polyline","polygon","extent","mesh"],json:{read:{reader:w.read}}})],S.prototype,"geometryType",void 0),Object(u.a)([Object(v.a)("geometryType")],S.prototype,"writeGeometryType",null),Object(u.a)([Object(f.b)({type:Boolean,json:{write:{overridePolicy:function(e){return{enabled:e}}}}})],S.prototype,"hasM",void 0),Object(u.a)([Object(f.b)({type:Boolean,json:{write:{overridePolicy:function(e){return{enabled:e}}}}})],S.prototype,"hasZ",void 0),Object(u.a)([Object(f.b)({types:l.a,json:{write:!0}})],S.prototype,"queryGeometry",void 0),Object(u.a)([Object(h.a)("queryGeometry")],S.prototype,"readQueryGeometry",null),Object(u.a)([Object(f.b)({type:O.a,json:{write:!0}})],S.prototype,"spatialReference",void 0),Object(u.a)([Object(v.a)("spatialReference")],S.prototype,"writeSpatialReference",null),Object(u.a)([Object(f.b)({json:{write:!0}})],S.prototype,"transform",void 0),(S=Object(u.a)([Object(j.a)("esri.rest.support.FeatureSet")],S)).prototype.toJSON.isDefaultToJSON=!0,S||(S={});var x=S},669:function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var n=r(42),a=Object(n.b)()({esriTimeUnitsMilliseconds:"milliseconds",esriTimeUnitsSeconds:"seconds",esriTimeUnitsMinutes:"minutes",esriTimeUnitsHours:"hours",esriTimeUnitsDays:"days",esriTimeUnitsWeeks:"weeks",esriTimeUnitsMonths:"months",esriTimeUnitsYears:"years",esriTimeUnitsDecades:"decades",esriTimeUnitsCenturies:"centuries",esriTimeUnitsUnknown:void 0})},670:function(e,t,r){"use strict";r.d(t,"a",(function(){return _}));var n,a=r(2),i=r(4),o=r(5),s=r(6),c=r(0),u=r(114),l=r(665),p=r(42),b=r(26),d=r(18),y=r(11),f=r(1),h=r(97),j=(r(19),r(15),r(31)),v=r(10),O=r(43),m=r(14),g=r(62),w=r(673),S=r(717),x=r(714),k=r(45),I=r(48),F=new p.a({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),T=new p.a({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"}),E=n=function(e){Object(o.a)(r,e);var t=Object(s.a)(r);function r(e){var n;return Object(a.a)(this,r),(n=t.call(this,e)).aggregateIds=null,n.cacheHint=void 0,n.datumTransformation=null,n.distance=void 0,n.dynamicDataSource=void 0,n.formatOf3DObjects=null,n.gdbVersion=null,n.geometry=null,n.geometryPrecision=void 0,n.groupByFieldsForStatistics=null,n.having=null,n.historicMoment=null,n.maxAllowableOffset=void 0,n.maxRecordCountFactor=1,n.multipatchOption=null,n.num=void 0,n.objectIds=null,n.orderByFields=null,n.outFields=null,n.outSpatialReference=null,n.outStatistics=null,n.parameterValues=null,n.pixelSize=null,n.quantizationParameters=null,n.rangeValues=null,n.relationParameter=null,n.resultType=null,n.returnCentroid=!1,n.returnDistinctValues=!1,n.returnExceededLimitFeatures=!0,n.returnGeometry=!1,n.returnQueryGeometry=!1,n.returnM=void 0,n.returnZ=void 0,n.sourceSpatialReference=null,n.spatialRelationship="intersects",n.start=void 0,n.sqlFormat=null,n.text=null,n.timeExtent=null,n.timeReferenceUnknownClient=!1,n.units=null,n.where=null,n}return Object(i.a)(r,[{key:"castDatumTransformation",value:function(e){return"number"==typeof e||"object"==typeof e?e:null}},{key:"writeHistoricMoment",value:function(e,t){t.historicMoment=e&&e.getTime()}},{key:"writeParameterValues",value:function(e,t){if(e){var r={};for(var n in e){var a=e[n];Array.isArray(a)?r[n]=a.map((function(e){return e instanceof Date?e.getTime():e})):a instanceof Date?r[n]=a.getTime():r[n]=a}t.parameterValues=r}}},{key:"writeStart",value:function(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10,t.where="1=1"}},{key:"writeWhere",value:function(e,t){t.where=e||"1=1"}},{key:"clone",value:function(){return new n(Object(d.a)({aggregateIds:this.aggregateIds,cacheHint:this.cacheHint,datumTransformation:this.datumTransformation,distance:this.distance,gdbVersion:this.gdbVersion,geometry:this.geometry,geometryPrecision:this.geometryPrecision,groupByFieldsForStatistics:this.groupByFieldsForStatistics,having:this.having,historicMoment:Object(y.j)(this.historicMoment)?new Date(this.historicMoment.getTime()):null,maxAllowableOffset:this.maxAllowableOffset,maxRecordCountFactor:this.maxRecordCountFactor,multipatchOption:this.multipatchOption,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,outStatistics:this.outStatistics,parameterValues:this.parameterValues,pixelSize:this.pixelSize,quantizationParameters:this.quantizationParameters,rangeValues:this.rangeValues,relationParameter:this.relationParameter,resultType:this.resultType,returnDistinctValues:this.returnDistinctValues,returnGeometry:this.returnGeometry,returnCentroid:this.returnCentroid,returnExceededLimitFeatures:this.returnExceededLimitFeatures,returnQueryGeometry:this.returnQueryGeometry,returnM:this.returnM,returnZ:this.returnZ,dynamicDataSource:this.dynamicDataSource,sourceSpatialReference:this.sourceSpatialReference,spatialRelationship:this.spatialRelationship,start:this.start,sqlFormat:this.sqlFormat,text:this.text,timeExtent:this.timeExtent,timeReferenceUnknownClient:this.timeReferenceUnknownClient,units:this.units,where:this.where}))}}],[{key:"from",value:function(e){return Object(m.d)(n,e)}}]),r}(b.a);E.MAX_MAX_RECORD_COUNT_FACTOR=5,Object(c.a)([Object(f.b)({json:{write:!0}})],E.prototype,"aggregateIds",void 0),Object(c.a)([Object(f.b)({type:Boolean,json:{write:!0}})],E.prototype,"cacheHint",void 0),Object(c.a)([Object(f.b)({json:{write:!0}})],E.prototype,"datumTransformation",void 0),Object(c.a)([Object(h.a)("datumTransformation")],E.prototype,"castDatumTransformation",null),Object(c.a)([Object(f.b)({type:Number,json:{write:{overridePolicy:function(e){return{enabled:e>0}}}}})],E.prototype,"distance",void 0),Object(c.a)([Object(f.b)({type:w.a,json:{write:!0}})],E.prototype,"dynamicDataSource",void 0),Object(c.a)([Object(f.b)({type:String,json:{write:!0}})],E.prototype,"formatOf3DObjects",void 0),Object(c.a)([Object(f.b)({type:String,json:{write:!0}})],E.prototype,"gdbVersion",void 0),Object(c.a)([Object(f.b)({types:u.a,json:{read:g.a,write:!0}})],E.prototype,"geometry",void 0),Object(c.a)([Object(f.b)({type:Number,json:{write:!0}})],E.prototype,"geometryPrecision",void 0),Object(c.a)([Object(f.b)({type:[String],json:{write:!0}})],E.prototype,"groupByFieldsForStatistics",void 0),Object(c.a)([Object(f.b)({type:String,json:{write:!0}})],E.prototype,"having",void 0),Object(c.a)([Object(f.b)({type:Date})],E.prototype,"historicMoment",void 0),Object(c.a)([Object(O.a)("historicMoment")],E.prototype,"writeHistoricMoment",null),Object(c.a)([Object(f.b)({type:Number,json:{write:!0}})],E.prototype,"maxAllowableOffset",void 0),Object(c.a)([Object(f.b)({type:Number,cast:function(e){return e<1?1:e>n.MAX_MAX_RECORD_COUNT_FACTOR?n.MAX_MAX_RECORD_COUNT_FACTOR:e},json:{write:{overridePolicy:function(e){return{enabled:e>1}}}}})],E.prototype,"maxRecordCountFactor",void 0),Object(c.a)([Object(f.b)({type:["xyFootprint"],json:{write:!0}})],E.prototype,"multipatchOption",void 0),Object(c.a)([Object(f.b)({type:Number,json:{read:{source:"resultRecordCount"}}})],E.prototype,"num",void 0),Object(c.a)([Object(f.b)({json:{write:!0}})],E.prototype,"objectIds",void 0),Object(c.a)([Object(f.b)({type:[String],json:{write:!0}})],E.prototype,"orderByFields",void 0),Object(c.a)([Object(f.b)({type:[String],json:{write:!0}})],E.prototype,"outFields",void 0),Object(c.a)([Object(f.b)({type:k.a,json:{name:"outSR",write:!0}})],E.prototype,"outSpatialReference",void 0),Object(c.a)([Object(f.b)({type:[x.a],json:{write:{enabled:!0,overridePolicy:function(){return{enabled:Object(y.j)(this.outStatistics)&&this.outStatistics.length>0}}}}})],E.prototype,"outStatistics",void 0),Object(c.a)([Object(f.b)({json:{write:!0}})],E.prototype,"parameterValues",void 0),Object(c.a)([Object(O.a)("parameterValues")],E.prototype,"writeParameterValues",null),Object(c.a)([Object(f.b)({type:I.a,json:{write:!0}})],E.prototype,"pixelSize",void 0),Object(c.a)([Object(f.b)({type:S.a,json:{write:!0}})],E.prototype,"quantizationParameters",void 0),Object(c.a)([Object(f.b)({type:[Object],json:{write:!0}})],E.prototype,"rangeValues",void 0),Object(c.a)([Object(f.b)({type:String,json:{read:{source:"relationParam"},write:{target:"relationParam",overridePolicy:function(){return{enabled:"relation"===this.spatialRelationship}}}}})],E.prototype,"relationParameter",void 0),Object(c.a)([Object(f.b)({type:String,json:{write:!0}})],E.prototype,"resultType",void 0),Object(c.a)([Object(f.b)({type:Boolean,json:{default:!1,write:!0}})],E.prototype,"returnCentroid",void 0),Object(c.a)([Object(f.b)({type:Boolean,json:{default:!1,write:!0}})],E.prototype,"returnDistinctValues",void 0),Object(c.a)([Object(f.b)({type:Boolean,json:{default:!0,write:!0}})],E.prototype,"returnExceededLimitFeatures",void 0),Object(c.a)([Object(f.b)({type:Boolean,json:{write:!0}})],E.prototype,"returnGeometry",void 0),Object(c.a)([Object(f.b)({type:Boolean,json:{default:!1,write:!0}})],E.prototype,"returnQueryGeometry",void 0),Object(c.a)([Object(f.b)({type:Boolean,json:{default:!1,write:!0}})],E.prototype,"returnM",void 0),Object(c.a)([Object(f.b)({type:Boolean,json:{write:{overridePolicy:function(e){return{enabled:e}}}}})],E.prototype,"returnZ",void 0),Object(c.a)([Object(f.b)({type:k.a,json:{write:!0}})],E.prototype,"sourceSpatialReference",void 0),Object(c.a)([Object(j.a)(F,{ignoreUnknown:!1,name:"spatialRel"})],E.prototype,"spatialRelationship",void 0),Object(c.a)([Object(f.b)({type:Number,json:{read:{source:"resultOffset"}}})],E.prototype,"start",void 0),Object(c.a)([Object(O.a)("start"),Object(O.a)("num")],E.prototype,"writeStart",null),Object(c.a)([Object(f.b)({type:String,json:{write:!0}})],E.prototype,"sqlFormat",void 0),Object(c.a)([Object(f.b)({type:String,json:{write:!0}})],E.prototype,"text",void 0),Object(c.a)([Object(f.b)({type:l.a,json:{write:!0}})],E.prototype,"timeExtent",void 0),Object(c.a)([Object(f.b)({type:Boolean,json:{default:!1,write:!0}})],E.prototype,"timeReferenceUnknownClient",void 0),Object(c.a)([Object(j.a)(T,{ignoreUnknown:!1}),Object(f.b)({json:{write:{overridePolicy:function(e){return{enabled:e&&this.distance>0}}}}})],E.prototype,"units",void 0),Object(c.a)([Object(f.b)({type:String,json:{write:{overridePolicy:function(e){return{enabled:null!=e||this.start>0}}}}})],E.prototype,"where",void 0),Object(c.a)([Object(O.a)("where")],E.prototype,"writeWhere",null);var _=E=n=Object(c.a)([Object(v.a)("esri.rest.support.Query")],E)},672:function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));var n=r(21),a=r(2),i=r(4);function o(e){return"date"===e.type||"esriFieldTypeDate"===e.type}var s=function(){function e(t){if(Object(a.a)(this,e),this.fields=t,this._fieldsMap=new Map,this._dateFieldsSet=new Set,this.dateFields=[],t){var r,i=[],s=Object(n.a)(t);try{for(s.s();!(r=s.n()).done;){var u=r.value,l=u&&u.name;if(l){var p=c(l);this._fieldsMap.set(l,u),this._fieldsMap.set(p,u),i.push(p),o(u)&&(this.dateFields.push(u),this._dateFieldsSet.add(u))}}}catch(b){s.e(b)}finally{s.f()}i.sort(),this.uid=i.join(",")}}return Object(i.a)(e,[{key:"destroy",value:function(){this._fieldsMap.clear()}},{key:"has",value:function(e){return null!=this.get(e)}},{key:"get",value:function(e){return null!=e?this._fieldsMap.get(e)||this._fieldsMap.get(c(e)):void 0}},{key:"isDateField",value:function(e){return this._dateFieldsSet.has(this.get(e))}},{key:"normalizeFieldName",value:function(e){var t=this.get(e);if(t)return t.name}}]),e}();function c(e){return e.toLowerCase().trim()}},673:function(e,t,r){"use strict";r.d(t,"a",(function(){return L}));var n,a,i=r(2),o=r(4),s=r(5),c=r(6),u=r(0),l=r(42),p=r(26),b=r(1),d=(r(19),r(97)),y=(r(15),r(31)),f=r(57),h=r(10),j=r(14),v=r(212),O=r(666),m=r(711),g=(r(114),r(45)),w=r(236),S=n=function(e){Object(s.a)(r,e);var t=Object(c.a)(r);function r(e){var n;return Object(i.a)(this,r),(n=t.call(this,e)).type="query-table",n}return Object(o.a)(r,[{key:"clone",value:function(){var e,t=this.workspaceId,r=this.query,a=this.oidFields,i=this.spatialReference,o=this.geometryType,s={workspaceId:t,query:r,oidFields:a,spatialReference:null!=(e=null==i?void 0:i.clone())?e:void 0,geometryType:o};return new n(s)}}]),r}(p.a);Object(u.a)([Object(y.a)({queryTable:"query-table"})],S.prototype,"type",void 0),Object(u.a)([Object(b.b)({type:String,json:{write:!0}})],S.prototype,"workspaceId",void 0),Object(u.a)([Object(b.b)({type:String,json:{write:!0}})],S.prototype,"query",void 0),Object(u.a)([Object(b.b)({type:String,json:{write:!0}})],S.prototype,"oidFields",void 0),Object(u.a)([Object(b.b)({type:g.a,json:{write:!0}})],S.prototype,"spatialReference",void 0),Object(u.a)([Object(y.a)(w.a)],S.prototype,"geometryType",void 0),S=n=Object(u.a)([Object(h.a)("esri.layers.support.source.QueryTableDataSource")],S);var x,k=a=function(e){Object(s.a)(r,e);var t=Object(c.a)(r);function r(e){var n;return Object(i.a)(this,r),(n=t.call(this,e)).type="raster",n}return Object(o.a)(r,[{key:"clone",value:function(){var e=this.workspaceId,t=this.dataSourceName;return new a({workspaceId:e,dataSourceName:t})}}]),r}(p.a);Object(u.a)([Object(y.a)({raster:"raster"})],k.prototype,"type",void 0),Object(u.a)([Object(b.b)({type:String,json:{write:!0}})],k.prototype,"dataSourceName",void 0),Object(u.a)([Object(b.b)({type:String,json:{write:!0}})],k.prototype,"workspaceId",void 0),k=a=Object(u.a)([Object(h.a)("esri.layers.support.source.RasterDataSource")],k);var I,F,T=x=function(e){Object(s.a)(r,e);var t=Object(c.a)(r);function r(e){var n;return Object(i.a)(this,r),(n=t.call(this,e)).type="table",n}return Object(o.a)(r,[{key:"clone",value:function(){var e=this.workspaceId,t=this.gdbVersion,r=this.dataSourceName;return new x({workspaceId:e,gdbVersion:t,dataSourceName:r})}}]),r}(p.a);Object(u.a)([Object(y.a)({table:"table"})],T.prototype,"type",void 0),Object(u.a)([Object(b.b)({type:String,json:{write:!0}})],T.prototype,"workspaceId",void 0),Object(u.a)([Object(b.b)({type:String,json:{write:!0}})],T.prototype,"gdbVersion",void 0),Object(u.a)([Object(b.b)({type:String,json:{write:!0}})],T.prototype,"dataSourceName",void 0),T=x=Object(u.a)([Object(h.a)("esri.layers.support.source.TableDataSource")],T);var E=Object(l.b)()({esriLeftInnerJoin:"left-inner-join",esriLeftOuterJoin:"left-outer-join"}),_=I=function(e){Object(s.a)(r,e);var t=Object(c.a)(r);function r(e){var n;return Object(i.a)(this,r),(n=t.call(this,e)).type="join-table",n}return Object(o.a)(r,[{key:"readLeftTableSource",value:function(e,t,r){return P()(e,t,r)}},{key:"castLeftTableSource",value:function(e){return Object(j.k)(C(),e)}},{key:"readRightTableSource",value:function(e,t,r){return P()(e,t,r)}},{key:"castRightTableSource",value:function(e){return Object(j.k)(C(),e)}},{key:"clone",value:function(){var e,t,r=this.leftTableKey,n=this.rightTableKey,a=this.leftTableSource,i=this.rightTableSource,o=this.joinType,s={leftTableKey:r,rightTableKey:n,leftTableSource:null!=(e=null==a?void 0:a.clone())?e:void 0,rightTableSource:null!=(t=null==i?void 0:i.clone())?t:void 0,joinType:o};return new I(s)}}]),r}(p.a);Object(u.a)([Object(y.a)({joinTable:"join-table"})],_.prototype,"type",void 0),Object(u.a)([Object(b.b)({type:String,json:{write:!0}})],_.prototype,"leftTableKey",void 0),Object(u.a)([Object(b.b)({type:String,json:{write:!0}})],_.prototype,"rightTableKey",void 0),Object(u.a)([Object(b.b)({json:{write:!0}})],_.prototype,"leftTableSource",void 0),Object(u.a)([Object(f.a)("leftTableSource")],_.prototype,"readLeftTableSource",null),Object(u.a)([Object(d.a)("leftTableSource")],_.prototype,"castLeftTableSource",null),Object(u.a)([Object(b.b)({json:{write:!0}})],_.prototype,"rightTableSource",void 0),Object(u.a)([Object(f.a)("rightTableSource")],_.prototype,"readRightTableSource",null),Object(u.a)([Object(d.a)("rightTableSource")],_.prototype,"castRightTableSource",null),Object(u.a)([Object(y.a)(E)],_.prototype,"joinType",void 0),_=I=Object(u.a)([Object(h.a)("esri.layers.support.source.JoinTableDataSource")],_);var R=null;function P(){return R||(R=Object(v.b)({types:C()})),R}var M=null;function C(){return M||(M={key:"type",base:null,typeMap:{"data-layer":L,"map-layer":m.a}}),M}var N={key:"type",base:null,typeMap:{"join-table":_,"query-table":S,raster:k,table:T}},L=F=function(e){Object(s.a)(r,e);var t=Object(c.a)(r);function r(e){var n;return Object(i.a)(this,r),(n=t.call(this,e)).type="data-layer",n}return Object(o.a)(r,[{key:"clone",value:function(){var e=this.fields,t=this.dataSource;return new F({fields:e,dataSource:t})}}]),r}(p.a);Object(u.a)([Object(y.a)({dataLayer:"data-layer"})],L.prototype,"type",void 0),Object(u.a)([Object(b.b)({type:[O.a],json:{write:!0}})],L.prototype,"fields",void 0),Object(u.a)([Object(b.b)({types:N,json:{write:!0}})],L.prototype,"dataSource",void 0),(L=F=Object(u.a)([Object(h.a)("esri.layers.support.source.DataLayerSource")],L)).from=Object(j.m)(L)},674:function(e,t,r){"use strict";r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return s})),r.d(t,"c",(function(){return u})),r.d(t,"d",(function(){return l})),r.d(t,"e",(function(){return c}));var n,a,i=r(19);(a=n||(n={}))[a.HANDSHAKE=0]="HANDSHAKE",a[a.OPEN=1]="OPEN",a[a.OPENED=2]="OPENED",a[a.RESPONSE=3]="RESPONSE",a[a.INVOKE=4]="INVOKE",a[a.ABORT=5]="ABORT",a[a.CLOSE=6]="CLOSE",a[a.OPEN_PORT=7]="OPEN_PORT",a[a.ON=8]="ON";var o=0;function s(){return o++}function c(e){return e?"string"==typeof e?JSON.stringify({name:"message",message:e}):e.toJSON?JSON.stringify(e):JSON.stringify({name:e.name,message:e.message,details:e.details||{stack:e.stack}}):null}function u(e,t,r,a){var i;t.type!==n.OPEN_PORT?t.type===n.INVOKE||t.type===n.RESPONSE?(!function(e){return e&&"object"==typeof e&&("result"in e||"transferList"in e)}(r)?(i=p(a),t.data=r):(i=p(r.transferList),t.data=r.result),i?e.postMessage(t,i):e.postMessage(t)):e.postMessage(t):e.postMessage(t,[t.port])}function l(e){if(!e)return null;var t=e.data;return t?"string"==typeof t?JSON.parse(t):t:null}function p(e){if(!e||!e.length)return null;if(Object(i.a)("esri-workers-arraybuffer-transfer"))return e;var t=e.filter((function(e){return!function(e){return e instanceof ArrayBuffer||e&&e.constructor&&"ArrayBuffer"===e.constructor.name}(e)}));return t.length?t:null}},675:function(e,t,r){"use strict";r.d(t,"a",(function(){return T}));var n,a=r(2),i=r(4),o=r(5),s=r(6),c=r(0),u=r(332),l=r(42),p=r(26),b=r(18),d=r(1),y=(r(14),r(19),r(15),r(57)),f=r(10),h=r(43),j=r(693),v=n=function(e){Object(o.a)(r,e);var t=Object(s.a)(r);function r(){var e;return Object(a.a)(this,r),(e=t.apply(this,arguments)).expression=null,e.title=null,e.value=null,e}return Object(i.a)(r,[{key:"readExpression",value:function(e,t){return t.value?Object(j.a)(t.value):e}},{key:"writeExpression",value:function(e,t,r){null!=this.value&&(e=Object(j.a)(this.value)),t[r]=e}},{key:"clone",value:function(){return new n({expression:this.expression,title:this.title,value:this.value})}}]),r}(p.a);Object(c.a)([Object(d.b)({type:String,json:{write:{allowNull:!0}}})],v.prototype,"expression",void 0),Object(c.a)([Object(y.a)("expression",["expression","value"])],v.prototype,"readExpression",null),Object(c.a)([Object(h.a)("expression")],v.prototype,"writeExpression",null),Object(c.a)([Object(d.b)({type:String,json:{write:!0,origins:{"web-scene":{write:!1}}}})],v.prototype,"title",void 0),Object(c.a)([Object(d.b)({json:{read:!1,write:!1}})],v.prototype,"value",void 0);var O,m=v=n=Object(c.a)([Object(f.a)("esri.layers.support.LabelExpressionInfo")],v),g=r(725),w=r(753),S=new l.a({esriServerPointLabelPlacementAboveCenter:"above-center",esriServerPointLabelPlacementAboveLeft:"above-left",esriServerPointLabelPlacementAboveRight:"above-right",esriServerPointLabelPlacementBelowCenter:"below-center",esriServerPointLabelPlacementBelowLeft:"below-left",esriServerPointLabelPlacementBelowRight:"below-right",esriServerPointLabelPlacementCenterCenter:"center-center",esriServerPointLabelPlacementCenterLeft:"center-left",esriServerPointLabelPlacementCenterRight:"center-right",esriServerLinePlacementAboveAfter:"above-after",esriServerLinePlacementAboveAlong:"above-along",esriServerLinePlacementAboveBefore:"above-before",esriServerLinePlacementAboveStart:"above-start",esriServerLinePlacementAboveEnd:"above-end",esriServerLinePlacementBelowAfter:"below-after",esriServerLinePlacementBelowAlong:"below-along",esriServerLinePlacementBelowBefore:"below-before",esriServerLinePlacementBelowStart:"below-start",esriServerLinePlacementBelowEnd:"below-end",esriServerLinePlacementCenterAfter:"center-after",esriServerLinePlacementCenterAlong:"center-along",esriServerLinePlacementCenterBefore:"center-before",esriServerLinePlacementCenterStart:"center-start",esriServerLinePlacementCenterEnd:"center-end",esriServerPolygonPlacementAlwaysHorizontal:"always-horizontal"},{ignoreUnknown:!0});function x(e){return!e||"service"!==e.origin&&!k(e.layer)}function k(e){return"map-image"===(null==e?void 0:e.type)}function I(e){var t,r;return!!k(e)&&!(null==(t=e.capabilities)||null==(r=t.exportMap)||!r.supportsArcadeExpressionForLabeling)}var F=O=function(e){Object(o.a)(r,e);var t=Object(s.a)(r);function r(e){var n;return Object(a.a)(this,r),(n=t.call(this,e)).type="label",n.name=null,n.deconflictionStrategy="static",n.labelExpression=null,n.labelExpressionInfo=null,n.labelPlacement=null,n.maxScale=0,n.minScale=0,n.symbol=g.a,n.useCodedValues=void 0,n.where=null,n}return Object(i.a)(r,[{key:"readLabelExpression",value:function(e,t){var r=t.labelExpressionInfo;if(!r||!r.value&&!r.expression)return e}},{key:"writeLabelExpression",value:function(e,t,r){if(this.labelExpressionInfo)if(null!=this.labelExpressionInfo.value)e=Object(j.f)(this.labelExpressionInfo.value);else if(null!=this.labelExpressionInfo.expression){var n=Object(j.e)(this.labelExpressionInfo.expression);n&&(e="["+n+"]")}null!=e&&(t[r]=e)}},{key:"writeLabelExpressionInfo",value:function(e,t,r,n){if(null==e&&null!=this.labelExpression&&x(n))e=new m({expression:this.getLabelExpressionArcade()});else if(!e)return;var a=e.toJSON(n);a.expression&&(t[r]=a)}},{key:"writeMaxScale",value:function(e,t){(e||this.minScale)&&(t.maxScale=e)}},{key:"writeMinScale",value:function(e,t){(e||this.maxScale)&&(t.minScale=e)}},{key:"getLabelExpression",value:function(){return Object(j.b)(this)}},{key:"getLabelExpressionArcade",value:function(){return Object(j.c)(this)}},{key:"getLabelExpressionSingleField",value:function(){return Object(j.d)(this)}},{key:"hash",value:function(){return JSON.stringify(this)}},{key:"clone",value:function(){return new O({deconflictionStrategy:this.deconflictionStrategy,labelExpression:this.labelExpression,labelExpressionInfo:Object(b.a)(this.labelExpressionInfo),labelPlacement:this.labelPlacement,maxScale:this.maxScale,minScale:this.minScale,name:this.name,symbol:Object(b.a)(this.symbol),where:this.where,useCodedValues:this.useCodedValues})}}],[{key:"evaluateWhere",value:function(e,t){var r=function(e,t,r){switch(t){case"=":return e==r;case"<>":return e!=r;case">":return e>r;case">=":return e>=r;case"<":return e<r;case"<=":return e<=r}return!1};try{if(null==e)return!0;var n=e.split(" ");if(3===n.length)return r(t[n[0]],n[1],n[2]);if(7===n.length){var a=r(t[n[0]],n[1],n[2]),i=n[3],o=r(t[n[4]],n[5],n[6]);switch(i){case"AND":return a&&o;case"OR":return a||o}}return!1}catch(s){console.log("Error.: can't parse = "+e)}}}]),r}(p.a);Object(c.a)([Object(d.b)({type:String,json:{write:!0}})],F.prototype,"name",void 0),Object(c.a)([Object(d.b)({type:String,json:{write:!0,default:"static",origins:{"web-scene":{write:!1}}}})],F.prototype,"deconflictionStrategy",void 0),Object(c.a)([Object(d.b)({type:String,json:{write:{overridePolicy:function(e,t,r){return this.labelExpressionInfo&&"service"===(null==r?void 0:r.origin)&&I(r.layer)?{enabled:!1}:{allowNull:!0}}}}})],F.prototype,"labelExpression",void 0),Object(c.a)([Object(y.a)("labelExpression")],F.prototype,"readLabelExpression",null),Object(c.a)([Object(h.a)("labelExpression")],F.prototype,"writeLabelExpression",null),Object(c.a)([Object(d.b)({type:m,json:{write:{overridePolicy:function(e,t,r){return function(e){return x(e)||I(e.layer)}(r)?{allowNull:!0}:{enabled:!1}}}}})],F.prototype,"labelExpressionInfo",void 0),Object(c.a)([Object(h.a)("labelExpressionInfo")],F.prototype,"writeLabelExpressionInfo",null),Object(c.a)([Object(d.b)({type:S.apiValues,json:{type:S.jsonValues,read:S.read,write:S.write}})],F.prototype,"labelPlacement",void 0),Object(c.a)([Object(d.b)({type:Number})],F.prototype,"maxScale",void 0),Object(c.a)([Object(h.a)("maxScale")],F.prototype,"writeMaxScale",null),Object(c.a)([Object(d.b)({type:Number})],F.prototype,"minScale",void 0),Object(c.a)([Object(h.a)("minScale")],F.prototype,"writeMinScale",null),Object(c.a)([Object(d.b)({types:u.g,json:{origins:{"web-scene":{types:u.h,write:w.b,default:null}},write:w.b,default:null}})],F.prototype,"symbol",void 0),Object(c.a)([Object(d.b)({type:Boolean,json:{write:!0}})],F.prototype,"useCodedValues",void 0),Object(c.a)([Object(d.b)({type:String,json:{write:!0}})],F.prototype,"where",void 0);var T=F=O=Object(c.a)([Object(f.a)("esri.layers.support.LabelClass")],F)},676:function(e,t,r){"use strict";r.d(t,"a",(function(){return f})),r.d(t,"b",(function(){return b})),r.d(t,"c",(function(){return j})),r.d(t,"d",(function(){return g})),r.d(t,"e",(function(){return d})),r.d(t,"f",(function(){return y})),r.d(t,"g",(function(){return v})),r.d(t,"h",(function(){return O})),r.d(t,"i",(function(){return h})),r.d(t,"j",(function(){return m}));var n=r(22),a=r(11),i=r(27),o=r(87),s={mapserver:"MapServer",imageserver:"ImageServer",featureserver:"FeatureServer",sceneserver:"SceneServer",streamserver:"StreamServer",vectortileserver:"VectorTileServer"},c=Object.values(s),u=new RegExp("^((?:https?:)?\\/\\/\\S+?\\/rest\\/services\\/(.+?)\\/(".concat(c.join("|"),"))(?:\\/(?:layers\\/)?(\\d+))?"),"i"),l=new RegExp("^((?:https?:)?\\/\\/\\S+?\\/([^\\/\\n]+)\\/(".concat(c.join("|"),"))(?:\\/(?:layers\\/)?(\\d+))?"),"i"),p=/(.*?)\/(?:layers\/)?(\d+)\/?$/i;function b(e){return!!u.test(e)}function d(e){var t=Object(i.J)(e),r=t.path.match(u)||t.path.match(l);if(!r)return null;var a=Object(n.a)(r,5),o=a[1],c=a[2],p=a[3],b=a[4],d=c.indexOf("/");return{title:f(-1!==d?c.slice(d+1):c),serverType:s[p.toLowerCase()],sublayer:null!=b&&""!==b?parseInt(b,10):null,url:{path:o}}}function y(e){var t=Object(i.J)(e).path.match(p);return t?{serviceUrl:t[1],sublayerId:Number(t[2])}:null}function f(e){return(e=e.replace(/\s*[/_]+\s*/g," "))[0].toUpperCase()+e.slice(1)}function h(e,t){var r=[];if(e){var n=d(e);Object(a.j)(n)&&n.title&&r.push(n.title)}if(t){var i=f(t);r.push(i)}if(2===r.length){if(-1!==r[0].toLowerCase().indexOf(r[1].toLowerCase()))return r[0];if(-1!==r[1].toLowerCase().indexOf(r[0].toLowerCase()))return r[1]}return r.join(" - ")}function j(e){if(!e)return!1;var t=-1!==(e=e.toLowerCase()).indexOf(".arcgis.com/"),r=-1!==e.indexOf("//services")||-1!==e.indexOf("//tiles")||-1!==e.indexOf("//features");return t&&r}function v(e,t){return e?Object(i.H)(Object(i.G)(e,t)):e}function O(e){var t=e.url;if(!t)return{url:t};t=Object(i.G)(t,e.logger);var r,n=Object(i.J)(t),o=d(n.path);if(Object(a.j)(o))null!=o.sublayer&&null==e.layer.layerId&&(r=o.sublayer),t=o.url.path;else if(e.nonStandardUrlAllowed){var s=y(n.path);Object(a.j)(s)&&(t=s.serviceUrl,r=s.sublayerId)}return{url:Object(i.H)(t),layerId:r}}function m(e,t,r,n,a){Object(o.f)(t,n,"url",a),n.url&&null!=e.layerId&&(n.url=Object(i.y)(n.url,r,e.layerId.toString()))}function g(e){if(!e)return!1;var t=e.toLowerCase(),r=-1!==t.indexOf("/services/"),n=-1!==t.indexOf("/mapserver/wmsserver"),a=-1!==t.indexOf("/imageserver/wmsserver"),i=-1!==t.indexOf("/wmsserver");return r&&(n||a||i)}},678:function(e,t,r){"use strict";r.d(t,"a",(function(){return f}));var n,a=r(2),i=r(4),o=r(5),s=r(6),c=r(0),u=r(26),l=r(692),p=r(1),b=(r(19),r(14),r(15),r(10)),d=r(669),y=n=function(e){Object(o.a)(r,e);var t=Object(s.a)(r);function r(e){var n;return Object(a.a)(this,r),(n=t.call(this,e)).value=0,n.unit="milliseconds",n}return Object(i.a)(r,[{key:"toMilliseconds",value:function(){return Object(l.a)(this.value,this.unit,"milliseconds")}},{key:"clone",value:function(){return new n({value:this.value,unit:this.unit})}}]),r}(u.a);Object(c.a)([Object(p.b)({type:Number,json:{write:!0},nonNullable:!0})],y.prototype,"value",void 0),Object(c.a)([Object(p.b)({type:d.a.apiValues,json:{type:d.a.jsonValues,read:d.a.read,write:d.a.write},nonNullable:!0})],y.prototype,"unit",void 0);var f=y=n=Object(c.a)([Object(b.a)("esri.TimeInterval")],y)},679:function(e,t,r){"use strict";r.d(t,"a",(function(){return c})),r.d(t,"b",(function(){return s}));r(19);var n=r(664),a=r(660),i=r(661),o=r(662),s={key:"type",base:a.a,typeMap:{range:o.a,"coded-value":n.a,inherited:i.a}};function c(e){if(!e||!e.type)return null;switch(e.type){case"range":return o.a.fromJSON(e);case"codedValue":return n.a.fromJSON(e);case"inherited":return i.a.fromJSON(e)}return null}},683:function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var n=r(135),a=r(70),i={inches:Object(n.b)(1,"meters","inches"),feet:Object(n.b)(1,"meters","feet"),"us-feet":Object(n.b)(1,"meters","us-feet"),yards:Object(n.b)(1,"meters","yards"),miles:Object(n.b)(1,"meters","miles"),"nautical-miles":Object(n.b)(1,"meters","nautical-miles"),millimeters:Object(n.b)(1,"meters","millimeters"),centimeters:Object(n.b)(1,"meters","centimeters"),decimeters:Object(n.b)(1,"meters","decimeters"),meters:Object(n.b)(1,"meters","meters"),kilometers:Object(n.b)(1,"meters","kilometers"),"decimal-degrees":1/Object(n.i)(1,"meters",a.a.radius)}},685:function(e,t,r){"use strict";r.d(t,"a",(function(){return p}));var n=r(21),a=r(2),i=r(4),o=r(185),s=r(15),c=r(30),u=r(667),l=s.a.getLogger("esri.core.workers.Connection"),p=function(){function e(){Object(a.a)(this,e),this._clients=new Array,this._clientPromises=new Array,this._clientIdx=0}return Object(i.a)(e,[{key:"destroy",value:function(){this.close()}},{key:"closed",get:function(){return!this._clients||!this._clients.length}},{key:"open",value:function(e,t){var r=this;return new Promise((function(n,a){var i=!0,o=function(e){Object(c.v)(t.signal),i&&(i=!1,e())};r._clients.length=e.length,r._clientPromises.length=e.length;for(var s=function(i){var s=e[i];Object(c.p)(s)?r._clientPromises[i]=s.then((function(e){return r._clients[i]=new u.a(e,t),o(n),r._clients[i]}),(function(){return o(a),null})):(r._clients[i]=new u.a(s,t),r._clientPromises[i]=Promise.resolve(r._clients[i]),o(n))},l=0;l<e.length;++l)s(l)}))}},{key:"broadcast",value:function(e,t,r){for(var n=new Array(this._clientPromises.length),a=0;a<this._clientPromises.length;++a){var i=this._clientPromises[a];n[a]=i.then((function(n){return n.invoke(e,t,r)}))}return n}},{key:"close",value:function(){var e,t=Object(n.a)(this._clientPromises);try{for(t.s();!(e=t.n()).done;){e.value.then((function(e){return e.close()}))}}catch(r){t.e(r)}finally{t.f()}this._clients.length=0,this._clientPromises.length=0}},{key:"getAvailableClient",value:function(){for(var e,t=0;t<this._clients.length;++t){var r=this._clients[t];if(r){if(!r.isBusy())return Promise.resolve(r)}else(e=e||[]).push(this._clientPromises[t])}return e?Promise.race(e):(this._clientIdx=(this._clientIdx+1)%this._clients.length,Promise.resolve(this._clients[this._clientIdx]))}},{key:"invoke",value:function(e,t,r){var n=null;return Array.isArray(r)?(l.warn("invoke()","The transferList parameter is deprecated, use the options object instead"),n={transferList:r}):n=r,this.closed?Promise.reject(new Error("Connection closed")):this.getAvailableClient().then((function(r){return r.invoke(e,t,n)}))}},{key:"on",value:function(e,t){var r=this;return Promise.all(this._clientPromises).then((function(){return Object(o.a)(r._clients.map((function(r){return r.on(e,t)})))}))}},{key:"openPorts",value:function(){var e=this;return new Promise((function(t){for(var r=new Array(e._clientPromises.length),n=r.length,a=function(a){e._clientPromises[a].then((function(e){r[a]=e.openPort(),0==--n&&t(r)}))},i=0;i<e._clientPromises.length;++i)a(i)}))}},{key:"test",get:function(){return{numClients:this._clients.length}}}]),e}()},686:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return A}));var n,a=r(23),i=r(13),o=r(22),s=r(7),c=r.n(s),u=r(21),l=r(12),p=r(2),b=r(4),d=r(77),y=r(65),f=r(5),h=r(6),j=r(0),v=r(46),O=r(82),m=r(29),g=r(18),w=r(15),S=r(712),x=r(11),k=r(30),I=r(109),F=r(1),T=(r(14),r(19),r(10)),E=r(43),_=r(209),R=r(663),P=r(684),M=r(237),C=r(186),N=w.a.getLogger("esri.renderers.DictionaryRenderer"),L={type:"CIMSimpleLineCallout",lineSymbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",width:.5,color:[0,0,0,255]}]}},D=n=function(e){Object(f.a)(r,e);var t=Object(h.a)(r);function r(e){var n;return Object(p.a)(this,r),(n=t.call(this,e))._ongoingRequests=new Map,n._symbolCache=new S.a(100),n.config=null,n.fieldMap=null,n.scaleExpression=null,n.scaleExpressionTitle=null,n.url=null,n.type="dictionary",n}return Object(b.a)(r,[{key:"writeData",value:function(e,t){e&&(t.scalingExpressionInfo={expression:e,returnType:"number"})}},{key:"writeVisualVariables",value:function(e,t,n,a){null!=a&&a.origin||Object(d.a)(Object(y.a)(r.prototype),"writeVisualVariables",this).call(this,e,t,n,a)}},{key:"clone",value:function(){return new n({config:Object(g.a)(this.config),scaleExpression:this.scaleExpression,scaleExpressionTitle:this.scaleExpressionTitle,fieldMap:Object(g.a)(this.fieldMap),url:Object(g.a)(this.url),visualVariables:Object(g.a)(this.visualVariables)})}},{key:"getSymbolAsync",value:function(){var e=Object(l.a)(c.a.mark((function e(t,r){var n,a,i,o,s,l,p,b,d,y,f,h,j,O,m,g,w,S,F,T,E,_,R,P,M,C,N=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._dictionaryPromise||(this._dictionaryPromise=this.fetchResources(r)),e.prev=1,e.next=4,this._dictionaryPromise;case 4:n=e.sent,e.next=11;break;case 7:if(e.prev=7,e.t0=e.catch(1),!Object(k.m)(e.t0)){e.next=11;break}return e.abrupt("return",(this._dictionaryPromise=null,null));case 11:if(a={},this.fieldMap){i=Object(u.a)(this._symbolFields);try{for(i.s();!(o=i.n()).done;)s=o.value,(l=this.fieldMap[s])&&null!==t.attributes[l]&&void 0!==t.attributes[l]?(p=""+t.attributes[l],a[s]=p):a[s]=""}catch(c){i.e(c)}finally{i.f()}}if((b=n(a,r))&&"string"==typeof b){e.next=16;break}return e.abrupt("return",null);case 16:if(d=Object(I.b)(b).toString(),!(y=this._symbolCache.get(d))){e.next=19;break}return e.abrupt("return",(y.catch((function(){N._symbolCache.pop(d)})),y));case 19:f=b.split(";"),h=[],j=[],O=Object(u.a)(f);try{for(O.s();!(m=O.n()).done;)if((g=m.value)&&0!==g.length)if(-1===g.indexOf("po:"))if(-1!==g.indexOf("|")){w=Object(u.a)(g.split("|"));try{for(w.s();!(S=w.n()).done;)F=S.value,this._itemNames.has(F)&&h.push(F)}catch(c){w.e(c)}finally{w.f()}}else this._itemNames.has(g)&&h.push(g);else 3===(T=g.substr(3).split("|")).length&&(E=T[0],_=T[1],R=T[2],"DashTemplate"===_?R=R.split(" ").map((function(e){return Number(e)})):"Color"===_?(P=new v.a(R).toRgba(),R=[P[0],P[1],P[2],255*P[3]]):R=Number(R),j.push({primitiveName:E,propertyName:_,value:R}))}catch(c){O.e(c)}finally{O.f()}return M=!Object(x.j)(t.geometry)||!t.geometry.hasZ&&"point"===t.geometry.type,C=this._cimPartsToCIMSymbol(h,j,M,r),e.abrupt("return",(this._symbolCache.put(d,C,1),C));case 24:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"collectRequiredFields",value:function(){var e=Object(l.a)(c.a.mark((function e(t,r){var n,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.collectVVRequiredFields(t,r);case 2:if(e.t0=this.scaleExpression,!e.t0){e.next=6;break}return e.next=6,Object(_.a)(t,r,this.scaleExpression);case 6:for(n in this.fieldMap)a=this.fieldMap[n],r.has(a)&&t.add(a);case 7:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"arcadeRequired",get:function(){return!0}},{key:"fetchResources",value:function(){var e=Object(l.a)(c.a.mark((function e(t){var r,n,a,s,l,p,b,d,y,f,h,j,v,g,w,S,k,I=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._dictionaryPromise){e.next=2;break}return e.abrupt("return",this._dictionaryPromise);case 2:if(this.url){e.next=4;break}return e.abrupt("return",void N.error("no valid URL!"));case 4:return r=Object(x.j)(t)?t.abortOptions:null,n=Object(O.default)(this.url+"/resources/styles/dictionary-info.json",Object(i.a)({responseType:"json",query:{f:"json"}},r)),e.next=8,Promise.all([n,Object(M.e)()]);case 8:if(a=e.sent,s=Object(o.a)(a,1),l=s[0].data){e.next=13;break}throw this._dictionaryPromise=null,new m.a("esri.renderers.DictionaryRenderer","Bad dictionary data!");case 13:if(p=l.expression,b=l.authoringInfo,this._refSymbolUrlTemplate=this.url+"/"+l.cimRefTemplateUrl,this._itemNames=new Set(l.itemsNames),this._symbolFields=b.symbol,d={},this.config)for(f in y=this.config)d[f]=y[f];if(b.configuration){h=Object(u.a)(b.configuration);try{for(h.s();!(j=h.n()).done;)v=j.value,d.hasOwnProperty(v.name)||(d[v.name]=v.value)}catch(c){h.e(c)}finally{h.f()}}if(g=[],Object(x.j)(t)&&t.fields&&this.fieldMap){w=Object(u.a)(this._symbolFields);try{for(k=function(){var e=S.value,r=I.fieldMap[e],n=t.fields.filter((function(e){return e.name===r}));n.length>0&&g.push(Object(i.a)(Object(i.a)({},n[0]),{},{name:e}))},w.s();!(S=w.n()).done;)k()}catch(c){w.e(c)}finally{w.f()}}return e.abrupt("return",(this._dictionaryPromise=Object(M.b)(p,Object(x.j)(t)?t.spatialReference:null,g,d).then((function(e){var t={scale:0};return function(r,n){var a=e.repurposeFeature({geometry:null,attributes:r});return t.scale=Object(x.j)(n)?n.scale:void 0,e.evaluate({$feature:a,$view:t})}})).catch((function(e){return N.error("Creating dictinoary expression failed:",e),null})),this._dictionaryPromise));case 21:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getSymbol",value:function(){return null}},{key:"getSymbols",value:function(){return[]}},{key:"getAttributeHash",value:function(){return this.visualVariables&&this.visualVariables.reduce((function(e,t){return e+t.getAttributeHash()}),"")}},{key:"getMeshHash",value:function(){return"".concat(this.url,"-").concat(JSON.stringify(this.fieldMap))}},{key:"getSymbolFields",value:function(){return this._symbolFields}},{key:"_getSymbolPart",value:function(){var e=Object(l.a)(c.a.mark((function e(t,r){var n,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._ongoingRequests.has(t)){e.next=2;break}return e.abrupt("return",this._ongoingRequests.get(t).then((function(e){return e.data})));case 2:return n=this._refSymbolUrlTemplate.replace(/\{itemName\}/gi,t),a=Object(O.default)(n,Object(i.a)({responseType:"json",query:{f:"json"}},r)),this._ongoingRequests.set(t,a),e.prev=4,e.next=7,a;case 7:return e.abrupt("return",e.sent.data);case 10:return e.prev=10,e.t0=e.catch(4),e.abrupt("return",(this._ongoingRequests.delete(t),Promise.reject(e.t0)));case 13:case"end":return e.stop()}}),e,this,[[4,10]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"_combineSymbolParts",value:function(e,t,r){if(!e||0===e.length)return null;var n=Object(i.a)({},e[0]);if(e.length>1){n.symbolLayers=[];var o,s=Object(u.a)(e);try{for(s.s();!(o=s.n()).done;){var c,l=o.value;(c=n.symbolLayers).unshift.apply(c,Object(a.a)(l.symbolLayers))}}catch(p){s.e(p)}finally{s.f()}}return r&&(n.callout=L),{type:"CIMSymbolReference",symbol:n,primitiveOverrides:t}}},{key:"_cimPartsToCIMSymbol",value:function(){var e=Object(l.a)(c.a.mark((function e(t,r,n,a){var i,o,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(i=new Array(t.length),o=0;o<t.length;o++)i[o]=this._getSymbolPart(t[o],a);return e.next=4,Promise.all(i);case 4:return s=e.sent,e.abrupt("return",new C.a({data:this._combineSymbolParts(s,r,n)}));case 6:case"end":return e.stop()}}),e,this)})));return function(t,r,n,a){return e.apply(this,arguments)}}()}]),r}(Object(P.a)(R.a));Object(j.a)([Object(F.b)({type:Object,json:{read:{source:"configuration"},write:{target:"configuration"}}})],D.prototype,"config",void 0),Object(j.a)([Object(F.b)({type:Object,json:{write:!0}})],D.prototype,"fieldMap",void 0),Object(j.a)([Object(F.b)({type:String,json:{read:{source:"scalingExpressionInfo.expression"},write:!0}})],D.prototype,"scaleExpression",void 0),Object(j.a)([Object(E.a)("scaleExpression")],D.prototype,"writeData",null),Object(j.a)([Object(F.b)({type:String,json:{read:{source:"scalingExpressionInfo.title"},write:{target:"scalingExpressionInfo.title",overridePolicy:function(e){return{enabled:!!e&&!!this.scaleExpression}}}}})],D.prototype,"scaleExpressionTitle",void 0),Object(j.a)([Object(F.b)({type:String,json:{write:!0}})],D.prototype,"url",void 0),Object(j.a)([Object(E.a)("visualVariables")],D.prototype,"writeVisualVariables",null);var A=D=n=Object(j.a)([Object(T.a)("esri.renderers.DictionaryRenderer")],D)},687:function(e,t,r){"use strict";r.d(t,"a",(function(){return m}));var n,a=r(7),i=r.n(a),o=r(12),s=r(2),c=r(4),u=r(5),l=r(6),p=r(0),b=r(18),d=r(1),y=(r(14),r(19),r(15),r(31)),f=r(10),h=r(663),j=r(684),v=r(765),O=n=function(e){Object(u.a)(r,e);var t=Object(l.a)(r);function r(e){var n;return Object(s.a)(this,r),(n=t.call(this,e)).description=null,n.label=null,n.symbol=null,n.type="simple",n}return Object(c.a)(r,[{key:"collectRequiredFields",value:function(){var e=Object(o.a)(i.a.mark((function e(t,r){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this.collectSymbolFields(t,r),this.collectVVRequiredFields(t,r)]);case 2:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"collectSymbolFields",value:function(){var e=Object(o.a)(i.a.mark((function e(t,r){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(this.getSymbols().map((function(e){return e.collectRequiredFields(t,r)})));case 2:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getSymbol",value:function(e,t){return this.symbol}},{key:"getSymbolAsync",value:function(){var e=Object(o.a)(i.a.mark((function e(t,r){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.symbol);case 1:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getSymbols",value:function(){return this.symbol?[this.symbol]:[]}},{key:"getAttributeHash",value:function(){return this.visualVariables&&this.visualVariables.reduce((function(e,t){return e+t.getAttributeHash()}),"")}},{key:"getMeshHash",value:function(){return this.getSymbols().reduce((function(e,t){return e+JSON.stringify(t)}),"")}},{key:"arcadeRequired",get:function(){return this.arcadeRequiredForVisualVariables}},{key:"clone",value:function(){return new n({description:this.description,label:this.label,symbol:this.symbol&&this.symbol.clone(),visualVariables:Object(b.a)(this.visualVariables),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})}}]),r}(Object(j.a)(h.a));Object(p.a)([Object(d.b)({type:String,json:{write:!0}})],O.prototype,"description",void 0),Object(p.a)([Object(d.b)({type:String,json:{write:!0}})],O.prototype,"label",void 0),Object(p.a)([Object(d.b)(v.b)],O.prototype,"symbol",void 0),Object(p.a)([Object(y.a)({simple:"simple"})],O.prototype,"type",void 0);var m=O=n=Object(p.a)([Object(f.a)("esri.renderers.SimpleRenderer")],O)},688:function(e,t,r){"use strict";r.d(t,"a",(function(){return L}));var n,a=r(21),i=r(7),o=r.n(i),s=r(12),c=r(2),u=r(4),l=r(5),p=r(6),b=r(0),d=r(46),y=r(18),f=r(61),h=r(14),j=(r(19),r(15)),v=r(31),O=r(1),m=r(10),g=r(209),w=r(663),S=r(684),x=r(26),k=r(97),I=j.a.getLogger("esri.renderers.support.AttributeColorInfo"),F=n=function(e){Object(l.a)(r,e);var t=Object(p.a)(r);function r(e){var n;return Object(c.a)(this,r),(n=t.call(this,e)).color=null,n.field=null,n.label=null,n.valueExpression=null,n.valueExpressionTitle=null,n}return Object(u.a)(r,[{key:"castField",value:function(e){return null==e?e:"function"==typeof e?(I.error(".field: field must be a string value"),null):Object(h.l)(e)}},{key:"getAttributeHash",value:function(){return"".concat(this.field,"-").concat(this.valueExpression)}},{key:"clone",value:function(){return new n({color:this.color&&this.color.clone(),field:this.field,label:this.label,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})}}]),r}(x.a);Object(b.a)([Object(O.b)({type:d.a,json:{type:[Number],write:!0}})],F.prototype,"color",void 0),Object(b.a)([Object(O.b)({type:String,json:{write:!0}})],F.prototype,"field",void 0),Object(b.a)([Object(k.a)("field")],F.prototype,"castField",null),Object(b.a)([Object(O.b)({type:String,json:{write:!0}})],F.prototype,"label",void 0),Object(b.a)([Object(O.b)({type:String,json:{write:!0}})],F.prototype,"valueExpression",void 0),Object(b.a)([Object(O.b)({type:String,json:{write:!0}})],F.prototype,"valueExpressionTitle",void 0);var T,E=F=n=Object(b.a)([Object(m.a)("esri.renderers.support.AttributeColorInfo")],F),_=T=function(e){Object(l.a)(r,e);var t=Object(p.a)(r);function r(){var e;return Object(c.a)(this,r),(e=t.apply(this,arguments)).unit=null,e}return Object(u.a)(r,[{key:"clone",value:function(){return new T({unit:this.unit})}}]),r}(x.a);Object(b.a)([Object(O.b)({type:String,json:{write:!0}})],_.prototype,"unit",void 0);var R,P=_=T=Object(b.a)([Object(m.a)("esri.renderers.support.DotDensityLegendOptions")],_),M=r(166),C=r(98),N=R=function(e){Object(l.a)(r,e);var t=Object(p.a)(r);function r(e){var n;return Object(c.a)(this,r),(n=t.call(this,e)).attributes=null,n.backgroundColor=new d.a([0,0,0,0]),n.blendDots=!0,n.dotBlendingEnabled=!0,n.dotShape="square",n.dotSize=1,n.legendOptions=null,n.outline=new C.a,n.dotValue=null,n.referenceDotValue=null,n.referenceScale=null,n.seed=1,n.type="dot-density",n}return Object(u.a)(r,[{key:"calculateDotValue",value:function(e){if(null==this.referenceScale)return this.dotValue;var t=e/this.referenceScale*this.dotValue;return t<1?1:t}},{key:"getSymbol",value:function(){return new M.a({outline:this.outline})}},{key:"getSymbolAsync",value:function(){var e=Object(s.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.getSymbol());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getSymbols",value:function(){return[this.getSymbol()]}},{key:"getAttributeHash",value:function(){return this.attributes&&this.attributes.reduce((function(e,t){return e+t.getAttributeHash()}),"")}},{key:"getMeshHash",value:function(){return JSON.stringify(this.outline)}},{key:"clone",value:function(){return new R({attributes:Object(y.a)(this.attributes),backgroundColor:Object(y.a)(this.backgroundColor),dotBlendingEnabled:Object(y.a)(this.dotBlendingEnabled),dotShape:Object(y.a)(this.dotShape),dotSize:Object(y.a)(this.dotSize),dotValue:Object(y.a)(this.dotValue),legendOptions:Object(y.a)(this.legendOptions),outline:Object(y.a)(this.outline),referenceScale:Object(y.a)(this.referenceScale),visualVariables:Object(y.a)(this.visualVariables),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})}},{key:"getControllerHash",value:function(){return"".concat(this.attributes.map((function(e){return e.field||e.valueExpression||""})),"-").concat(this.outline&&JSON.stringify(this.outline.toJSON())||"")}},{key:"collectRequiredFields",value:function(){var e=Object(s.a)(o.a.mark((function e(t,r){var n,i,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.collectVVRequiredFields(t,r);case 2:n=Object(a.a)(this.attributes),e.prev=3,n.s();case 5:if((i=n.n()).done){e.next=14;break}if(s=i.value,e.t0=s.valueExpression,!e.t0){e.next=11;break}return e.next=11,Object(g.a)(t,r,s.valueExpression);case 11:s.field&&t.add(s.field);case 12:e.next=5;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(3),n.e(e.t1);case 19:return e.prev=19,n.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,this,[[3,16,19,22]])})));return function(t,r){return e.apply(this,arguments)}}()}]),r}(Object(S.a)(w.a));Object(b.a)([Object(O.b)({type:[E],json:{write:!0}})],N.prototype,"attributes",void 0),Object(b.a)([Object(O.b)({type:d.a,json:{write:!0}})],N.prototype,"backgroundColor",void 0),Object(b.a)([Object(O.b)({type:Boolean}),Object(f.a)("dotBlendingEnabled")],N.prototype,"blendDots",void 0),Object(b.a)([Object(O.b)({type:Boolean,json:{write:!0}})],N.prototype,"dotBlendingEnabled",void 0),Object(b.a)([Object(O.b)({type:String,json:{write:!1}})],N.prototype,"dotShape",void 0),Object(b.a)([Object(O.b)({type:Number,json:{write:!1}})],N.prototype,"dotSize",void 0),Object(b.a)([Object(O.b)({type:P,json:{write:!0}})],N.prototype,"legendOptions",void 0),Object(b.a)([Object(O.b)({type:C.a,json:{default:null,write:!0}})],N.prototype,"outline",void 0),Object(b.a)([Object(O.b)({type:Number,json:{write:!0}})],N.prototype,"dotValue",void 0),Object(b.a)([Object(O.b)({type:Number}),Object(f.a)("dotValue")],N.prototype,"referenceDotValue",void 0),Object(b.a)([Object(O.b)({type:Number,json:{write:!0}})],N.prototype,"referenceScale",void 0),Object(b.a)([Object(O.b)({type:Number,json:{write:!0}})],N.prototype,"seed",void 0),Object(b.a)([Object(v.a)({dotDensity:"dot-density"})],N.prototype,"type",void 0);var L=N=R=Object(b.a)([Object(m.a)("esri.renderers.DotDensityRenderer")],N)},689:function(e,t,r){"use strict";r.d(t,"a",(function(){return x}));var n,a=r(7),i=r.n(a),o=r(12),s=r(2),c=r(4),u=r(5),l=r(6),p=r(0),b=r(46),d=r(18),y=r(1),f=(r(14),r(19),r(15),r(31)),h=r(10),j=r(209),v=r(663),O=r(26),m=n=function(e){Object(u.a)(r,e);var t=Object(l.a)(r);function r(e){var n;return Object(s.a)(this,r),(n=t.call(this,e)).color=null,n.ratio=null,n}return Object(c.a)(r,[{key:"clone",value:function(){return new n({color:this.color,ratio:this.ratio})}}]),r}(O.a);Object(p.a)([Object(y.b)({type:b.a,json:{write:!0}})],m.prototype,"color",void 0),Object(p.a)([Object(y.b)({type:Number,json:{write:!0}})],m.prototype,"ratio",void 0);var g,w=m=n=Object(p.a)([Object(h.a)("esri.renderers.support.HeatmapColorStop")],m),S=g=function(e){Object(u.a)(r,e);var t=Object(l.a)(r);function r(e){var n;return Object(s.a)(this,r),(n=t.call(this,e)).blurRadius=10,n.colorStops=[new w({ratio:0,color:new b.a("rgba(255, 140, 0, 0)")}),new w({ratio:.75,color:new b.a("rgba(255, 140, 0, 1)")}),new w({ratio:.9,color:new b.a("rgba(255, 0,   0, 1)")})],n.field=null,n.fieldOffset=0,n.maxPixelIntensity=100,n.minPixelIntensity=0,n.type="heatmap",n}return Object(c.a)(r,[{key:"collectRequiredFields",value:function(){var e=Object(o.a)(i.a.mark((function e(t,r){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(n=this.field)&&"string"==typeof n&&Object(j.b)(t,r,n);case 2:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getAttributeHash",value:function(){return null}},{key:"getMeshHash",value:function(){return"".concat(JSON.stringify(this.colorStops),".").concat(this.blurRadius,".").concat(this.field)}},{key:"clone",value:function(){return new g({blurRadius:this.blurRadius,colorStops:Object(d.a)(this.colorStops),field:this.field,maxPixelIntensity:this.maxPixelIntensity,minPixelIntensity:this.minPixelIntensity})}}]),r}(v.a);Object(p.a)([Object(y.b)({type:Number,json:{write:!0}})],S.prototype,"blurRadius",void 0),Object(p.a)([Object(y.b)({type:[w],json:{write:!0}})],S.prototype,"colorStops",void 0),Object(p.a)([Object(y.b)({type:String,json:{write:!0}})],S.prototype,"field",void 0),Object(p.a)([Object(y.b)({type:Number,json:{write:{overridePolicy:function(e,t,r){return{enabled:null==r}}}}})],S.prototype,"fieldOffset",void 0),Object(p.a)([Object(y.b)({type:Number,json:{write:!0}})],S.prototype,"maxPixelIntensity",void 0),Object(p.a)([Object(y.b)({type:Number,json:{write:!0}})],S.prototype,"minPixelIntensity",void 0),Object(p.a)([Object(f.a)({heatmap:"heatmap"})],S.prototype,"type",void 0);var x=S=g=Object(p.a)([Object(h.a)("esri.renderers.HeatmapRenderer")],S)},690:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var n=new(r(42).a)({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml"})},691:function(e,t,r){"use strict";r.d(t,"a",(function(){return l})),r.d(t,"b",(function(){return p}));var n=r(700),a=r(686),i=r(688),o=r(689),s=r(663),c=r(687),u=r(701),l={key:"type",base:s.a,typeMap:{heatmap:o.a,simple:c.a,"unique-value":u.a,"class-breaks":n.a,"dot-density":i.a,dictionary:a.default},errorContext:"renderer"},p={key:"type",base:s.a,typeMap:{simple:c.a,"unique-value":u.a,"class-breaks":n.a},errorContext:"renderer"}},693:function(e,t,r){"use strict";r.d(t,"a",(function(){return f})),r.d(t,"b",(function(){return b})),r.d(t,"c",(function(){return d})),r.d(t,"d",(function(){return y})),r.d(t,"e",(function(){return m})),r.d(t,"f",(function(){return p}));var n=r(109),a="__begin__",i="__end__",o=new RegExp(a,"ig"),s=new RegExp(i,"ig"),c=new RegExp("^"+a,"i"),u=new RegExp(i+"$","i"),l='"';function p(e){return e.replace(new RegExp("\\{","g"),"[").replace(new RegExp("\\}","g"),"]")}function b(e){var t={expression:"",type:"none"};return e.labelExpressionInfo?e.labelExpressionInfo.value?(t.expression=e.labelExpressionInfo.value,t.type="conventional"):e.labelExpressionInfo.expression&&(t.expression=e.labelExpressionInfo.expression,t.type="arcade"):null!=e.labelExpression&&(t.expression=function(e){return e.replace(new RegExp("\\[","g"),"{").replace(new RegExp("\\]","g"),"}")}(e.labelExpression),t.type="conventional"),t}function d(e){var t=b(e);if(!t)return null;switch(t.type){case"conventional":return f(t.expression);case"arcade":return t.expression}return null}function y(e){var t=b(e);if(!t)return null;switch(t.type){case"conventional":return function(e){var t=e.match(h);return t&&t[1].trim()||null}(t.expression);case"arcade":return m(t.expression)}return null}function f(e){var t;return e?(t=Object(n.c)(e,(function(e){return a+'$feature["'+e+'"]'+i})),t=c.test(t)?t.replace(c,""):l+t,t=(t=u.test(t)?t.replace(u,""):t+l).replace(o,'" + ').replace(s,' + "')):t='""',t}var h=/^\s*\{([^}]+)\}\s*$/i;var j=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])([\w\s]+)(\2)\]));?\s*$/i,v=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])([\w\s]+)(\2)\]));?\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(\1|\3)(\5)\s*\));?\s*$/i,O=/^\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])([\w\s]+)(\1)\s*\));?\s*$/i;function m(e){if(!e)return null;var t=j.exec(e)||v.exec(e);return t?t[1]||t[3]:(t=O.exec(e))?t[2]:null}},694:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));r(19);function n(e){}},697:function(e,t,r){"use strict";r.d(t,"a",(function(){return F}));var n=r(7),a=r.n(n),i=r(12),o=r(2),s=r(4),c=r(8),u=r(5),l=r(6),p=r(0),b=r(15),d=r(30),y=r(1),f=(r(19),r(14),r(10)),h=r(21),j=r(52),v=r(215),O=new j.a,m=new WeakMap;function g(e){w(e)&&O.push(e)}function w(e){return e&&"object"==typeof e&&"refreshInterval"in e&&"refresh"in e}function S(e,t){return Number.isFinite(e)&&Number.isFinite(t)?t<=0?e:S(t,e%t):0}var x=0,k=0;function I(){var e,t=Date.now(),r=Object(h.a)(O);try{for(r.s();!(e=r.n()).done;){var n,a=e.value;if(a.refreshInterval)t-(null!=(n=m.get(a))?n:0)+5>=6e4*a.refreshInterval&&(m.set(a,t),a.refresh(t))}}catch(i){r.e(i)}finally{r.f()}}Object(v.a)((function(){var e,t=Date.now(),r=0,n=Object(h.a)(O);try{for(n.s();!(e=n.n()).done;){var a=e.value;r=S(Math.round(6e4*a.refreshInterval),r),a.refreshInterval?m.get(a)||m.set(a,t):m.delete(a)}}catch(i){n.e(i)}finally{n.f()}if(r!==k){if(k=r,clearInterval(x),0===k)return void(x=0);x=setInterval(I,k)}}));var F=function(e){var t=function(e){Object(u.a)(r,e);var t=Object(l.a)(r);function r(){var e;Object(o.a)(this,r);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).refreshInterval=0,e.refreshTimestamp=0,e._debounceHasDataChanged=Object(d.i)((function(){return e.hasDataChanged()})),e.when().then((function(){g(Object(c.a)(e))}),(function(){})),e}return Object(s.a)(r,[{key:"destroy",value:function(){var e;w(e=this)&&O.includes(e)&&O.remove(e)}},{key:"refreshParameters",get:function(){return{_ts:this.refreshTimestamp||null}}},{key:"refresh",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now();Object(d.l)(this._debounceHasDataChanged()).then((function(r){r&&(e._set("refreshTimestamp",t),e.emit("refresh"))}),(function(t){b.a.getLogger(e.declaredClass).error(t)}))}},{key:"hasDataChanged",value:function(){var e=Object(i.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),r}(e);return Object(p.a)([Object(y.b)({type:Number,cast:function(e){return e>=.1?e:e<=0?0:.1},json:{write:!0,origins:{"web-document":{write:!0}}}})],t.prototype,"refreshInterval",void 0),Object(p.a)([Object(y.b)({readOnly:!0})],t.prototype,"refreshTimestamp",void 0),Object(p.a)([Object(y.b)()],t.prototype,"refreshParameters",null),t=Object(p.a)([Object(f.a)("esri.layers.mixins.RefreshableLayer")],t),t}},698:function(e,t,r){"use strict";r.d(t,"a",(function(){return S}));var n,a=r(2),i=r(4),o=r(5),s=r(6),c=r(0),u=r(665),l=r(678),p=r(26),b=r(18),d=r(11),y=r(1),f=(r(14),r(19),r(15),r(57)),h=r(10),j=r(43),v=n=function(e){Object(o.a)(r,e);var t=Object(s.a)(r);function r(e){var n;return Object(a.a)(this,r),(n=t.call(this,e)).respectsDaylightSaving=!1,n.timezone=null,n}return Object(i.a)(r,[{key:"readRespectsDaylightSaving",value:function(e,t){return void 0!==t.respectsDaylightSaving?t.respectsDaylightSaving:void 0!==t.respectDaylightSaving&&t.respectDaylightSaving}},{key:"clone",value:function(){var e=this.respectsDaylightSaving,t=this.timezone;return new n({respectsDaylightSaving:e,timezone:t})}}]),r}(p.a);Object(c.a)([Object(y.b)({type:Boolean,json:{write:!0}})],v.prototype,"respectsDaylightSaving",void 0),Object(c.a)([Object(f.a)("respectsDaylightSaving",["respectsDaylightSaving","respectDaylightSaving"])],v.prototype,"readRespectsDaylightSaving",null),Object(c.a)([Object(y.b)({type:String,json:{read:{source:"timeZone"},write:{target:"timeZone"}}})],v.prototype,"timezone",void 0);var O,m=v=n=Object(c.a)([Object(h.a)("esri.layers.support.TimeReference")],v),g=r(669),w=O=function(e){Object(o.a)(r,e);var t=Object(s.a)(r);function r(e){var n;return Object(a.a)(this,r),(n=t.call(this,e)).cumulative=!1,n.endField=null,n.fullTimeExtent=null,n.hasLiveData=!1,n.interval=null,n.startField=null,n.timeReference=null,n.trackIdField=null,n.useTime=!0,n}return Object(i.a)(r,[{key:"readFullTimeExtent",value:function(e,t){if(!t.timeExtent||!Array.isArray(t.timeExtent)||2!==t.timeExtent.length)return null;var r=new Date(t.timeExtent[0]),n=new Date(t.timeExtent[1]);return new u.a({start:r,end:n})}},{key:"writeFullTimeExtent",value:function(e,t){e&&Object(d.j)(e.start)&&Object(d.j)(e.end)?t.timeExtent=[e.start.getTime(),e.end.getTime()]:t.timeExtent=null}},{key:"readInterval",value:function(e,t){return t.timeInterval&&t.timeIntervalUnits?new l.a({value:t.timeInterval,unit:g.a.fromJSON(t.timeIntervalUnits)}):t.defaultTimeInterval&&t.defaultTimeIntervalUnits?new l.a({value:t.defaultTimeInterval,unit:g.a.fromJSON(t.defaultTimeIntervalUnits)}):null}},{key:"writeInterval",value:function(e,t){if(e){var r=e.toJSON();t.timeInterval=r.value,t.timeIntervalUnits=r.unit}else t.timeInterval=null,t.timeIntervalUnits=null}},{key:"clone",value:function(){var e=this.cumulative,t=this.endField,r=this.hasLiveData,n=this.interval,a=this.startField,i=this.timeReference,o=this.fullTimeExtent,s=this.trackIdField,c=this.useTime;return new O({cumulative:e,endField:t,hasLiveData:r,interval:n,startField:a,timeReference:Object(b.a)(i),fullTimeExtent:Object(b.a)(o),trackIdField:s,useTime:c})}}]),r}(p.a);Object(c.a)([Object(y.b)({type:Boolean,json:{read:{source:"exportOptions.timeDataCumulative"},write:{target:"exportOptions.timeDataCumulative"}}})],w.prototype,"cumulative",void 0),Object(c.a)([Object(y.b)({type:String,json:{read:{source:"endTimeField"},write:{target:"endTimeField",allowNull:!0}}})],w.prototype,"endField",void 0),Object(c.a)([Object(y.b)({type:u.a,json:{write:{enabled:!0,allowNull:!0}}})],w.prototype,"fullTimeExtent",void 0),Object(c.a)([Object(f.a)("fullTimeExtent",["timeExtent"])],w.prototype,"readFullTimeExtent",null),Object(c.a)([Object(j.a)("fullTimeExtent")],w.prototype,"writeFullTimeExtent",null),Object(c.a)([Object(y.b)({type:Boolean,json:{write:!0}})],w.prototype,"hasLiveData",void 0),Object(c.a)([Object(y.b)({type:l.a,json:{write:{enabled:!0,allowNull:!0}}})],w.prototype,"interval",void 0),Object(c.a)([Object(f.a)("interval",["timeInterval","timeIntervalUnits","defaultTimeInterval","defaultTimeIntervalUnits"])],w.prototype,"readInterval",null),Object(c.a)([Object(j.a)("interval")],w.prototype,"writeInterval",null),Object(c.a)([Object(y.b)({type:String,json:{read:{source:"startTimeField"},write:{target:"startTimeField",allowNull:!0}}})],w.prototype,"startField",void 0),Object(c.a)([Object(y.b)({type:m,json:{write:{enabled:!0,allowNull:!0}}})],w.prototype,"timeReference",void 0),Object(c.a)([Object(y.b)({type:String,json:{write:{enabled:!0,allowNull:!0}}})],w.prototype,"trackIdField",void 0),Object(c.a)([Object(y.b)({type:Boolean,json:{read:{source:"exportOptions.useTime"},write:{target:"exportOptions.useTime"}}})],w.prototype,"useTime",void 0);var S=w=O=Object(c.a)([Object(h.a)("esri.layers.support.TimeInfo")],w)},702:function(e,t,r){"use strict";r.d(t,"a",(function(){return s})),r.d(t,"b",(function(){return u}));var n=r(21),a=r(11),i=r(135),o=r(53);function s(e,t,r){if(Object(a.i)(t)||Object(a.i)(r)||r.vcsWkid||Object(o.d)(t,r))return null;var s=Object(i.e)(t)/Object(i.e)(r);if(1===s)return null;switch(e){case"point":case"esriGeometryPoint":return function(e){return function(e,t){e&&null!=e.z&&(e.z*=t)}(e,s)};case"polyline":case"esriGeometryPolyline":return function(e){return function(e,t){if(e){var r,a=Object(n.a)(e.paths);try{for(a.s();!(r=a.n()).done;){var i,o=r.value,s=Object(n.a)(o);try{for(s.s();!(i=s.n()).done;){var c=i.value;c.length>2&&(c[2]*=t)}}catch(u){s.e(u)}finally{s.f()}}}catch(u){a.e(u)}finally{a.f()}}}(e,s)};case"polygon":case"esriGeometryPolygon":return function(e){return function(e,t){if(e){var r,a=Object(n.a)(e.rings);try{for(a.s();!(r=a.n()).done;){var i,o=r.value,s=Object(n.a)(o);try{for(s.s();!(i=s.n()).done;){var c=i.value;c.length>2&&(c[2]*=t)}}catch(u){s.e(u)}finally{s.f()}}}catch(u){a.e(u)}finally{a.f()}}}(e,s)};case"multipoint":case"esriGeometryMultipoint":return function(e){return function(e,t){if(e){var r,a=Object(n.a)(e.points);try{for(a.s();!(r=a.n()).done;){var i=r.value;i.length>2&&(i[2]*=t)}}catch(o){a.e(o)}finally{a.f()}}}(e,s)};default:return null}}function c(e,t,r){if(null==e.hasM||e.hasZ){var a,i=Object(n.a)(t);try{for(i.s();!(a=i.n()).done;){var o,s=a.value,c=Object(n.a)(s);try{for(c.s();!(o=c.n()).done;){var u=o.value;u.length>2&&(u[2]*=r)}}catch(l){c.e(l)}finally{c.f()}}}catch(l){i.e(l)}finally{i.f()}}}function u(e,t,r){if((e||t)&&r){var n=Object(i.e)(r);l(e,r,n),l(t,r,n)}}function l(e,t,r){if(e){var a,i=Object(n.a)(e);try{for(i.s();!(a=i.n()).done;){p(a.value.geometry,t,r)}}catch(o){i.e(o)}finally{i.f()}}}function p(e,t,r){if(!Object(a.i)(e)&&e.spatialReference&&!Object(o.d)(e.spatialReference,t)){var s=Object(i.e)(e.spatialReference)/r;if(1!==s)if("x"in e)null!=e.z&&(e.z*=s);else if("rings"in e)c(e,e.rings,s);else if("paths"in e)c(e,e.paths,s);else if("points"in e&&(null==e.hasM||e.hasZ)){var u,l=Object(n.a)(e.points);try{for(l.s();!(u=l.n()).done;){var p=u.value;p.length>2&&(p[2]*=s)}}catch(b){l.e(b)}finally{l.f()}}}}},703:function(e,t,r){"use strict";r.d(t,"a",(function(){return a})),r.d(t,"b",(function(){return o})),r.d(t,"c",(function(){return i})),r.d(t,"d",(function(){return s})),r.d(t,"e",(function(){return c})),r.d(t,"f",(function(){return l})),r.d(t,"g",(function(){return u}));var n=[252,146,31,255],a={type:"esriSMS",style:"esriSMSCircle",size:6,color:n,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},i={type:"esriSLS",style:"esriSLSSolid",width:.75,color:n},o={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}},s={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0},c={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5},u={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5},l={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null}},704:function(e,t,r){"use strict";function n(e){return e&&"esri.renderers.visualVariables.SizeVariable"===e.declaredClass}function a(e){return null!=e&&!isNaN(e)&&isFinite(e)}function i(e){return e.valueExpression?"expression":e.field&&"string"==typeof e.field?"field":"unknown"}function o(e,t){var r=t||i(e),n=e.valueUnit||"unknown";return"unknown"===r?"constant":e.stops?"stops":null!=e.minSize&&null!=e.maxSize&&null!=e.minDataValue&&null!=e.maxDataValue?"clamped-linear":"unknown"===n?null!=e.minSize&&null!=e.minDataValue?e.minSize&&e.minDataValue?"proportional":"additive":"identity":"real-world-size"}r.d(t,"a",(function(){return i})),r.d(t,"b",(function(){return o})),r.d(t,"c",(function(){return n})),r.d(t,"d",(function(){return a}))},705:function(e,t,r){"use strict";r.d(t,"a",(function(){return p}));var n=r(2),a=r(5),i=r(6),o=r(0),s=r(26),c=r(1),u=(r(19),r(14),r(15),r(10)),l=function(e){Object(a.a)(r,e);var t=Object(i.a)(r);function r(){var e;return Object(n.a)(this,r),(e=t.apply(this,arguments)).type=null,e}return r}(s.a);Object(o.a)([Object(c.b)({type:["selection","cluster"],readOnly:!0,json:{read:!1,write:!0}})],l.prototype,"type",void 0);var p=l=Object(o.a)([Object(u.a)("esri.layers.support.FeatureReduction")],l)},710:function(e,t,r){"use strict";r.d(t,"a",(function(){return d}));var n=r(2),a=r(4),i=r(5),o=r(6),s=r(0),c=r(15),u=r(11),l=r(1),p=(r(19),r(14),r(10)),b=r(676),d=function(e){var t=function(e){Object(i.a)(r,e);var t=Object(o.a)(r);function r(){return Object(n.a)(this,r),t.apply(this,arguments)}return Object(a.a)(r,[{key:"title",get:function(){if(this._get("title")&&"defaults"!==this.originOf("title"))return this._get("title");if(this.url){var e=Object(b.e)(this.url);if(Object(u.j)(e)&&e.title)return e.title}return this._get("title")||""},set:function(e){this._set("title",e)}},{key:"url",set:function(e){this._set("url",Object(b.g)(e,c.a.getLogger(this.declaredClass)))}}]),r}(e);return Object(s.a)([Object(l.b)()],t.prototype,"title",null),Object(s.a)([Object(l.b)({type:String})],t.prototype,"url",null),t=Object(s.a)([Object(p.a)("esri.layers.mixins.ArcGISService")],t)}},711:function(e,t,r){"use strict";r.d(t,"a",(function(){return y}));var n,a=r(2),i=r(4),o=r(5),s=r(6),c=r(0),u=r(26),l=r(1),p=(r(19),r(14)),b=(r(15),r(31)),d=r(10),y=n=function(e){Object(o.a)(r,e);var t=Object(s.a)(r);function r(e){var n;return Object(a.a)(this,r),(n=t.call(this,e)).type="map-layer",n}return Object(i.a)(r,[{key:"clone",value:function(){var e=this.mapLayerId,t=this.gdbVersion;return new n({mapLayerId:e,gdbVersion:t})}}]),r}(u.a);Object(c.a)([Object(b.a)({mapLayer:"map-layer"})],y.prototype,"type",void 0),Object(c.a)([Object(l.b)({type:p.a,json:{write:!0}})],y.prototype,"mapLayerId",void 0),Object(c.a)([Object(l.b)({type:String,json:{write:!0}})],y.prototype,"gdbVersion",void 0),y=n=Object(c.a)([Object(d.a)("esri.layers.support.source.MapLayerSource")],y)},712:function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));var n=r(2),a=r(4),i=r(708),o=function(){function e(t,r){Object(n.a)(this,e),this._storage=new i.b,this._storage.maxSize=t,r&&this._storage.registerRemoveFunc("",r)}return Object(a.a)(e,[{key:"put",value:function(e,t,r){this._storage.put(e,t,r,1)}},{key:"pop",value:function(e){return this._storage.pop(e)}},{key:"get",value:function(e){return this._storage.get(e)}},{key:"clear",value:function(){this._storage.clearAll()}},{key:"destroy",value:function(){this._storage.destroy()}},{key:"maxSize",get:function(){return this._storage.maxSize},set:function(e){this._storage.maxSize=e}}]),e}()},713:function(e,t,r){"use strict";r.d(t,"a",(function(){return h}));var n=r(2),a=r(4),i=r(5),o=r(6),s=r(0),c=r(42),u=r(26),l=r(18),p=r(1),b=(r(14),r(19),r(15),r(10)),d=r(43),y=new c.a({esriFeatureEditToolAutoCompletePolygon:"auto-complete-polygon",esriFeatureEditToolCircle:"circle",esriFeatureEditToolEllipse:"ellipse",esriFeatureEditToolFreehand:"freehand",esriFeatureEditToolLine:"line",esriFeatureEditToolNone:"none",esriFeatureEditToolPoint:"point",esriFeatureEditToolPolygon:"polygon",esriFeatureEditToolRectangle:"rectangle",esriFeatureEditToolArrow:"arrow",esriFeatureEditToolTriangle:"triangle",esriFeatureEditToolLeftArrow:"left-arrow",esriFeatureEditToolRightArrow:"right-arrow",esriFeatureEditToolUpArrow:"up-arrow",esriFeatureEditToolDownArrow:"down-arrow"}),f=function(e){Object(i.a)(r,e);var t=Object(o.a)(r);function r(e){var a;return Object(n.a)(this,r),(a=t.call(this,e)).name=null,a.description=null,a.drawingTool=null,a.prototype=null,a.thumbnail=null,a}return Object(a.a)(r,[{key:"writeDrawingTool",value:function(e,t){t.drawingTool=y.toJSON(e)}},{key:"writePrototype",value:function(e,t){t.prototype=Object(l.c)(Object(l.a)(e),!0)}},{key:"writeThumbnail",value:function(e,t){t.thumbnail=Object(l.c)(Object(l.a)(e))}}]),r}(u.a);Object(s.a)([Object(p.b)({json:{write:!0}})],f.prototype,"name",void 0),Object(s.a)([Object(p.b)({json:{write:!0}})],f.prototype,"description",void 0),Object(s.a)([Object(p.b)({json:{read:y.read,write:y.write}})],f.prototype,"drawingTool",void 0),Object(s.a)([Object(d.a)("drawingTool")],f.prototype,"writeDrawingTool",null),Object(s.a)([Object(p.b)({json:{write:!0}})],f.prototype,"prototype",void 0),Object(s.a)([Object(d.a)("prototype")],f.prototype,"writePrototype",null),Object(s.a)([Object(p.b)({json:{write:!0}})],f.prototype,"thumbnail",void 0),Object(s.a)([Object(d.a)("thumbnail")],f.prototype,"writeThumbnail",null);var h=f=Object(s.a)([Object(b.a)("esri.layers.support.FeatureTemplate")],f)},714:function(e,t,r){"use strict";r.d(t,"a",(function(){return j}));var n,a=r(2),i=r(4),o=r(5),s=r(6),c=r(0),u=r(42),l=r(26),p=r(18),b=r(1),d=(r(14),r(19),r(15),r(10)),y=r(43),f=new u.a({count:"count",sum:"sum",min:"min",max:"max",avg:"avg",stddev:"stddev",var:"var",exceedslimit:"exceedslimit",percentile_cont:"percentile-continuous",percentile_disc:"percentile-discrete"}),h=n=function(e){Object(o.a)(r,e);var t=Object(s.a)(r);function r(e){var n;return Object(a.a)(this,r),(n=t.call(this,e)).maxPointCount=void 0,n.maxRecordCount=void 0,n.maxVertexCount=void 0,n.onStatisticField=null,n.outStatisticFieldName=null,n.statisticType=null,n.statisticParameters=null,n}return Object(i.a)(r,[{key:"writeStatisticParameters",value:function(e,t){"percentile-continuous"!==this.statisticType&&"percentile-discrete"!==this.statisticType||(t.statisticParameters=Object(p.a)(e))}},{key:"clone",value:function(){return new n({maxPointCount:this.maxPointCount,maxRecordCount:this.maxRecordCount,maxVertexCount:this.maxVertexCount,onStatisticField:this.onStatisticField,outStatisticFieldName:this.outStatisticFieldName,statisticType:this.statisticType,statisticParameters:Object(p.a)(this.statisticParameters)})}}]),r}(l.a);Object(c.a)([Object(b.b)({type:Number,json:{write:!0}})],h.prototype,"maxPointCount",void 0),Object(c.a)([Object(b.b)({type:Number,json:{write:!0}})],h.prototype,"maxRecordCount",void 0),Object(c.a)([Object(b.b)({type:Number,json:{write:!0}})],h.prototype,"maxVertexCount",void 0),Object(c.a)([Object(b.b)({type:String,json:{write:!0}})],h.prototype,"onStatisticField",void 0),Object(c.a)([Object(b.b)({type:String,json:{write:!0}})],h.prototype,"outStatisticFieldName",void 0),Object(c.a)([Object(b.b)({type:String,json:{read:{source:"statisticType",reader:f.read},write:{target:"statisticType",writer:f.write}}})],h.prototype,"statisticType",void 0),Object(c.a)([Object(b.b)({type:Object})],h.prototype,"statisticParameters",void 0),Object(c.a)([Object(y.a)("statisticParameters")],h.prototype,"writeStatisticParameters",null);var j=h=n=Object(c.a)([Object(d.a)("esri.rest.support.StatisticDefinition")],h)},715:function(e,t,r){"use strict";r.d(t,"a",(function(){return u})),r.d(t,"b",(function(){return p})),r.d(t,"c",(function(){return c}));r(19);var n=r(29),a=r(66),i=r(165),o=r(212),s=r(691);function c(e,t,r,i){var o=function(e,t){return e?function(e,t){if(!t||"web-scene"!==t.origin)return!0;switch(e.type){case"simple":case"unique-value":case"class-breaks":return!0;default:return!1}}(e,t)?e.write({},t):(t.messages&&t.messages.push(new n.a("renderer:unsupported","Renderer of type '".concat(e.declaredClass,"' are not supported in scenes."),{renderer:e,context:t})),null):null}(e,i);o&&Object(a.c)(r,o,t)}function u(e,t){return p(e,null,t)}var l=Object(o.b)({types:s.a});function p(e,t,r){return e?e&&(e.styleName||e.styleUrl)&&"uniqueValue"!==e.type?(r&&r.messages&&r.messages.push(new i.a("renderer:unsupported","Only UniqueValueRenderer can be referenced from a web style, but found '"+e.type+"'",{definition:e,context:r})),null):l(e,t,r):null}},717:function(e,t,r){"use strict";r.d(t,"a",(function(){return j}));var n,a=r(2),i=r(4),o=r(5),s=r(6),c=r(0),u=(r(114),r(42)),l=r(26),p=r(18),b=r(1),d=(r(14),r(19),r(15),r(10)),y=r(58),f=new u.a({upperLeft:"upper-left",lowerLeft:"lower-left"}),h=n=function(e){Object(o.a)(r,e);var t=Object(s.a)(r);function r(e){var n;return Object(a.a)(this,r),(n=t.call(this,e)).extent=null,n.mode="view",n.originPosition="upper-left",n.tolerance=1,n}return Object(i.a)(r,[{key:"clone",value:function(){return new n(Object(p.a)({extent:this.extent,mode:this.mode,originPosition:this.originPosition,tolerance:this.tolerance}))}}]),r}(l.a);Object(c.a)([Object(b.b)({type:y.a,json:{write:{overridePolicy:function(){return{enabled:"view"===this.mode}}}}})],h.prototype,"extent",void 0),Object(c.a)([Object(b.b)({type:["view","edit"],json:{write:!0}})],h.prototype,"mode",void 0),Object(c.a)([Object(b.b)({type:String,json:{read:f.read,write:f.write}})],h.prototype,"originPosition",void 0),Object(c.a)([Object(b.b)({type:Number,json:{write:{overridePolicy:function(){return{enabled:"view"===this.mode}}}}})],h.prototype,"tolerance",void 0);var j=h=n=Object(c.a)([Object(d.a)("esri.rest.support.QuantizationParameters")],h)},719:function(e,t,r){"use strict";r.d(t,"a",(function(){return h}));var n=r(2),a=r(4),i=r(5),o=r(6),s=r(0),c=r(665),u=r(678),l=r(1),p=(r(19),r(14),r(15),r(57)),b=r(10),d=r(698),y=r(209),f=r(669);var h=function(e){var t=function(e){Object(i.a)(r,e);var t=Object(o.a)(r);function r(){var e;return Object(n.a)(this,r),(e=t.apply(this,arguments)).timeExtent=null,e.timeOffset=null,e.useViewTime=!0,e}return Object(a.a)(r,[{key:"readOffset",value:function(e,t){var r=t.timeInfo.exportOptions;if(!r)return null;var n=r.timeOffset,a=f.a.fromJSON(r.timeOffsetUnits);return n&&a?new u.a({value:n,unit:a}):null}},{key:"timeInfo",set:function(e){Object(y.f)(e,this.fieldsIndex),this._set("timeInfo",e)}}]),r}(e);return Object(s.a)([Object(l.b)({type:c.a,json:{write:!1}})],t.prototype,"timeExtent",void 0),Object(s.a)([Object(l.b)({type:u.a})],t.prototype,"timeOffset",void 0),Object(s.a)([Object(p.a)("service","timeOffset",["timeInfo.exportOptions"])],t.prototype,"readOffset",null),Object(s.a)([Object(l.b)({value:null,type:d.a,json:{write:!0,origins:{"web-document":{read:!1,write:!1}}}})],t.prototype,"timeInfo",null),Object(s.a)([Object(l.b)({type:Boolean,json:{read:{source:"timeAnimation"},write:{target:"timeAnimation"},origins:{"web-scene":{read:!1,write:!1}}}})],t.prototype,"useViewTime",void 0),t=Object(s.a)([Object(b.a)("esri.layers.mixins.TemporalLayer")],t),t}},720:function(e,t,r){"use strict";r.d(t,"a",(function(){return I}));var n,a=r(2),i=r(4),o=r(5),s=r(6),c=r(0),u=r(114),l=r(665),p=r(42),b=r(26),d=r(18),y=r(1),f=r(14),h=(r(19),r(15),r(10)),j=r(43),v=r(62),O=n=function(e){Object(o.a)(r,e);var t=Object(s.a)(r);function r(e){var n;return Object(a.a)(this,r),(n=t.call(this,e)).groupByFields=void 0,n.topCount=void 0,n.orderByFields=void 0,n}return Object(i.a)(r,[{key:"clone",value:function(){return new n({groupByFields:this.groupByFields,topCount:this.topCount,orderByFields:this.orderByFields})}}]),r}(b.a);Object(c.a)([Object(y.b)({type:[String],json:{write:!0}})],O.prototype,"groupByFields",void 0),Object(c.a)([Object(y.b)({type:Number,json:{write:!0}})],O.prototype,"topCount",void 0),Object(c.a)([Object(y.b)({type:[String],json:{write:!0}})],O.prototype,"orderByFields",void 0);var m,g=O=n=Object(c.a)([Object(h.a)("esri.rest.support.TopFilter")],O),w=r(45),S=new p.a({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),x=new p.a({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"}),k=m=function(e){Object(o.a)(r,e);var t=Object(s.a)(r);function r(e){var n;return Object(a.a)(this,r),(n=t.call(this,e)).cacheHint=void 0,n.distance=void 0,n.geometry=null,n.geometryPrecision=void 0,n.maxAllowableOffset=void 0,n.num=void 0,n.objectIds=null,n.orderByFields=null,n.outFields=null,n.outSpatialReference=null,n.resultType=null,n.returnGeometry=!1,n.returnM=void 0,n.returnZ=void 0,n.start=void 0,n.spatialRelationship="intersects",n.timeExtent=null,n.topFilter=void 0,n.units=null,n.where="1=1",n}return Object(i.a)(r,[{key:"writeStart",value:function(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10}},{key:"clone",value:function(){return new m(Object(d.a)({cacheHint:this.cacheHint,distance:this.distance,geometry:this.geometry,geometryPrecision:this.geometryPrecision,maxAllowableOffset:this.maxAllowableOffset,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,resultType:this.resultType,returnGeometry:this.returnGeometry,returnZ:this.returnZ,returnM:this.returnM,start:this.start,spatialRelationship:this.spatialRelationship,timeExtent:this.timeExtent,topFilter:this.topFilter,units:this.units,where:this.where}))}}]),r}(b.a);Object(c.a)([Object(y.b)({type:Boolean,json:{write:!0}})],k.prototype,"cacheHint",void 0),Object(c.a)([Object(y.b)({type:Number,json:{write:{overridePolicy:function(e){return{enabled:e>0}}}}})],k.prototype,"distance",void 0),Object(c.a)([Object(y.b)({types:u.a,json:{read:v.a,write:!0}})],k.prototype,"geometry",void 0),Object(c.a)([Object(y.b)({type:Number,json:{write:!0}})],k.prototype,"geometryPrecision",void 0),Object(c.a)([Object(y.b)({type:Number,json:{write:!0}})],k.prototype,"maxAllowableOffset",void 0),Object(c.a)([Object(y.b)({type:Number,json:{read:{source:"resultRecordCount"}}})],k.prototype,"num",void 0),Object(c.a)([Object(y.b)({json:{write:!0}})],k.prototype,"objectIds",void 0),Object(c.a)([Object(y.b)({type:[String],json:{write:!0}})],k.prototype,"orderByFields",void 0),Object(c.a)([Object(y.b)({type:[String],json:{write:!0}})],k.prototype,"outFields",void 0),Object(c.a)([Object(y.b)({type:w.a,json:{read:{source:"outSR"},write:{target:"outSR"}}})],k.prototype,"outSpatialReference",void 0),Object(c.a)([Object(y.b)({type:String,json:{write:!0}})],k.prototype,"resultType",void 0),Object(c.a)([Object(y.b)({json:{write:!0}})],k.prototype,"returnGeometry",void 0),Object(c.a)([Object(y.b)({type:Boolean,json:{write:{overridePolicy:function(e){return{enabled:e}}}}})],k.prototype,"returnM",void 0),Object(c.a)([Object(y.b)({type:Boolean,json:{write:{overridePolicy:function(e){return{enabled:e}}}}})],k.prototype,"returnZ",void 0),Object(c.a)([Object(y.b)({type:Number,json:{read:{source:"resultOffset"}}})],k.prototype,"start",void 0),Object(c.a)([Object(j.a)("start"),Object(j.a)("num")],k.prototype,"writeStart",null),Object(c.a)([Object(y.b)({type:String,json:{read:{source:"spatialRel",reader:S.read},write:{target:"spatialRel",writer:S.write}}})],k.prototype,"spatialRelationship",void 0),Object(c.a)([Object(y.b)({type:l.a,json:{write:!0}})],k.prototype,"timeExtent",void 0),Object(c.a)([Object(y.b)({type:g,json:{write:!0}})],k.prototype,"topFilter",void 0),Object(c.a)([Object(y.b)({type:String,json:{read:x.read,write:{writer:x.write,overridePolicy:function(e){return{enabled:e&&this.distance>0}}}}})],k.prototype,"units",void 0),Object(c.a)([Object(y.b)({type:String,json:{write:!0}})],k.prototype,"where",void 0),(k=m=Object(c.a)([Object(h.a)("esri.rest.support.TopFeaturesQuery")],k)).from=Object(f.m)(k);var I=k},721:function(e,t,r){"use strict";r.d(t,"a",(function(){return u}));var n=r(2),a=r(5),i=r(6),o=r(0),s=r(1),c=(r(19),r(14),r(15),r(10)),u=function(e){var t=function(e){Object(a.a)(r,e);var t=Object(i.a)(r);function r(){var e;return Object(n.a)(this,r),(e=t.apply(this,arguments)).customParameters=null,e}return r}(e);return Object(o.a)([Object(s.b)({type:Object,json:{write:{overridePolicy:function(e){return{enabled:!!(e&&Object.keys(e).length>0)}}}}})],t.prototype,"customParameters",void 0),t=Object(o.a)([Object(c.a)("esri.layers.mixins.CustomParametersMixin")],t)}},723:function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var n=r(21),a=r(702);function i(e,t,r){if(r&&r.features&&r.hasZ){var i=Object(a.a)(r.geometryType,t,e.outSpatialReference);if(i){var o,s=Object(n.a)(r.features);try{for(s.s();!(o=s.n()).done;){i(o.value.geometry)}}catch(c){s.e(c)}finally{s.f()}}}}},724:function(e,t,r){"use strict";r.d(t,"a",(function(){return l}));var n=r(2),a=r(4),i=r(5),o=r(6),s=r(0),c=r(1),u=(r(19),r(14),r(15),r(10));var l=function(e){var t=function(e){Object(i.a)(r,e);var t=Object(o.a)(r);function r(){return Object(n.a)(this,r),t.apply(this,arguments)}return Object(a.a)(r,[{key:"apiKey",get:function(){var e;return this._isOverridden("apiKey")?this._get("apiKey"):function(e){return"portalItem"in e}(this)?null==(e=this.portalItem)?void 0:e.apiKey:null},set:function(e){null!=e?this._override("apiKey",e):(this._clearOverride("apiKey"),this.clear("apiKey","user"))}}]),r}(e);return Object(s.a)([Object(c.b)({type:String})],t.prototype,"apiKey",null),t=Object(s.a)([Object(u.a)("esri.layers.mixins.APIKeyMixin")],t)}},725:function(e,t,r){"use strict";r.d(t,"a",(function(){return c})),r.d(t,"b",(function(){return u})),r.d(t,"c",(function(){return p})),r.d(t,"d",(function(){return l}));r(19),r(11);var n=r(166),a=r(98),i=r(143),o=r(136),s=r(703),c=(i.a.fromJSON(s.a),a.a.fromJSON(s.c),n.a.fromJSON(s.b),o.a.fromJSON(s.d));var u=i.a.fromJSON(s.e),l=a.a.fromJSON(s.g),p=n.a.fromJSON(s.f)},727:function(e,t,r){"use strict";r.d(t,"a",(function(){return te}));var n=r(13),a=r(7),i=r.n(a),o=r(12),s=r(29),c=r(19),u=r(30),l=r(685),p=r(667),b=r(2),d=r(4),y=r(83),f=r(15),h=r(674),j=r(54),v=r(68),O=(r(243),r(27)),m=r(21),g={};function w(e){var t,r={async:e.async,isDebug:e.isDebug,locale:e.locale,baseUrl:e.baseUrl,has:Object(n.a)({},e.has),map:Object(n.a)({},e.map),packages:e.packages&&e.packages.concat()||[],paths:Object(n.a)({},e.paths)};return e.hasOwnProperty("async")||(r.async=!0),e.hasOwnProperty("isDebug")||(r.isDebug=!1),e.baseUrl||(r.baseUrl=g.baseUrl),null==(t=g.packages)||t.forEach((function(e){!function(e,t){var r,n=Object(m.a)(e);try{for(n.s();!(r=n.n()).done;)if(r.value.name===t.name)return}catch(a){n.e(a)}finally{n.f()}e.push(t)}(r.packages,e)})),r}var S,x,k=r(37),I=function e(){var t=this;Object(b.a)(this,e);var r=document.createDocumentFragment();["addEventListener","dispatchEvent","removeEventListener"].forEach((function(e){t[e]=function(){return r[e].apply(r,arguments)}}))},F=k.a.MutationObserver||k.a.WebKitMutationObserver,T=function(){var e;if(k.a.process&&k.a.process.nextTick)e=function(e){k.a.process.nextTick(e)};else if(k.a.Promise)e=function(e){k.a.Promise.resolve().then(e)};else if(F){var t=[],r=document.createElement("div");new F((function(){for(;t.length>0;)t.shift()()})).observe(r,{attributes:!0}),e=function(e){t.push(e),r.setAttribute("queueStatus","1")}}return e}(),E=function(){var e=k.a.MessageEvent;try{new e("message",{data:null})}catch(t){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.data,n=t.bubbles,a=void 0!==n&&n,i=t.cancelable,o=void 0!==i&&i,s=document.createEvent("Event");return s.initEvent(e,a,o),s.data=r,s}}return function(t,r){return new e(t,r)}}(),_=function(){function e(){Object(b.a)(this,e),this._dispatcher=new I,this._workerPostMessage({type:h.a.HANDSHAKE})}return Object(d.a)(e,[{key:"terminate",value:function(){}},{key:"onmessage",get:function(){return this._onmessageHandler},set:function(e){this._onmessageHandler&&this.removeEventListener("message",this._onmessageHandler),this._onmessageHandler=e,e&&this.addEventListener("message",e)}},{key:"onmessageerror",get:function(){return this._onmessageerrorHandler},set:function(e){this._onmessageerrorHandler&&this.removeEventListener("messageerror",this._onmessageerrorHandler),this._onmessageerrorHandler=e,e&&this.addEventListener("messageerror",e)}},{key:"onerror",get:function(){return this._onerrorHandler},set:function(e){this._onerrorHandler&&this.removeEventListener("error",this._onerrorHandler),this._onerrorHandler=e,e&&this.addEventListener("error",e)}},{key:"postMessage",value:function(e){var t=this;T((function(){t._workerMessageHandler(E("message",{data:e}))}))}},{key:"dispatchEvent",value:function(e){return this._dispatcher.dispatchEvent(e)}},{key:"addEventListener",value:function(e,t,r){this._dispatcher.addEventListener(e,t,r)}},{key:"removeEventListener",value:function(e,t,r){this._dispatcher.removeEventListener(e,t,r)}},{key:"_workerPostMessage",value:function(e){var t=this;T((function(){t.dispatchEvent(E("message",{data:e}))}))}},{key:"_workerMessageHandler",value:function(){var e=Object(o.a)(i.a.mark((function e(t){var r,n,a,o,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=Object(h.d)(t))||r.type!==h.a.OPEN){e.next=13;break}return n=r.modulePath,a=r.jobId,e.next=5,p.a.loadWorker(n);case 5:if(o=e.sent,e.t0=o,e.t0){e.next=11;break}return e.next=10,import(n);case 10:o=e.sent;case 11:s=p.a.connect(o),this._workerPostMessage({type:h.a.OPENED,jobId:a,data:s});case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),R=r(75),P=r(296),M=f.a.getLogger("esri.core.workers"),C=h.a.HANDSHAKE,N='let globalId=0;const outgoing=new Map,configuration=JSON.parse("{CONFIGURATION}");self.esriConfig=configuration.esriConfig;const workerPath=self.esriConfig.workers.workerPath,HANDSHAKE=0,OPEN=1,OPENED=2,RESPONSE=3,INVOKE=4,ABORT=5;function createAbortError(){const e=new Error("Aborted");return e.name="AbortError",e}function receiveMessage(e){return e&&e.data?"string"==typeof e.data?JSON.parse(e.data):e.data:null}function invokeStaticMessage(e,o,r){const t=r&&r.signal,n=globalId++;return new Promise(((r,i)=>{if(t){if(t.aborted)return i(createAbortError());t.addEventListener("abort",(()=>{outgoing.get(n)&&(outgoing.delete(n),self.postMessage({type:5,jobId:n}),i(createAbortError()))}))}outgoing.set(n,{resolve:r,reject:i}),self.postMessage({type:4,jobId:n,methodName:e,abortable:null!=t,data:o})}))}let workerRevisionChecked=!1;function checkWorkerRevision(e){if(!workerRevisionChecked&&e.kernelInfo){workerRevisionChecked=!0;const{revision:o,buildDate:r,version:t}=configuration.kernelInfo,{revision:n,buildDate:i,version:s}=e.kernelInfo;o!==n&&console.warn(`[esri.core.workers] Version mismatch detected between ArcGIS API for JavaScript and assets:\nAPI version: ${t} [Date: ${r}, Revision: ${o.slice(0,8)}]\nAssets version: ${s} [Date: ${i}, Revision: ${n.slice(0,8)}]`)}}function messageHandler(e){const o=receiveMessage(e);if(!o)return;const r=o.jobId;switch(o.type){case 1:let e;function t(o){const t=e.connect(o);self.postMessage({type:2,jobId:r,data:t},[t])}"function"==typeof define&&define.amd?require([workerPath],(r=>{e=r.default||r,checkWorkerRevision(e),e.loadWorker(o.modulePath).then((e=>e||new Promise((e=>{require([o.modulePath],e)})))).then(t)})):"System"in self&&"function"==typeof System.import?System.import(workerPath).then((r=>(e=r.default,checkWorkerRevision(e),e.loadWorker(o.modulePath)))).then((e=>e||System.import(o.modulePath))).then(t):(self.RemoteClient||importScripts(workerPath),e=self.RemoteClient.default||self.RemoteClient,checkWorkerRevision(e),e.loadWorker(o.modulePath).then(t));break;case 3:if(outgoing.has(r)){const e=outgoing.get(r);outgoing.delete(r),o.error?e.reject(JSON.parse(o.error)):e.resolve(o.data)}}}self.dojoConfig=configuration.loaderConfig,esriConfig.workers.loaderUrl&&(self.importScripts(esriConfig.workers.loaderUrl),"function"==typeof require&&"function"==typeof require.config&&require.config(configuration.loaderConfig)),self.addEventListener("message",messageHandler),self.postMessage({type:0});',L="Failed to create Worker. Fallback to execute module in main thread";function D(){return A.apply(this,arguments)}function A(){return(A=Object(o.a)(i.a.mark((function e(){var t,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Object(c.a)("esri-workers")){e.next=2;break}return e.abrupt("return",V(new _));case 2:if(!S&&!x)try{t=N.replace('"{CONFIGURATION}"',"'".concat(U(),"'")),S=URL.createObjectURL(new Blob([t],{type:"text/javascript"}))}catch(n){x=n||{}}if(S)try{r=new Worker(S,{name:"esri-worker-"+B++})}catch(n){M.warn(L,x),r=new _}else M.warn(L,x),r=new _;return e.abrupt("return",V(r));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function V(e){return q.apply(this,arguments)}function q(){return(q=Object(o.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){function r(a){var i=Object(h.d)(a);i&&i.type===C&&(t.removeEventListener("message",r),t.removeEventListener("error",n),e(t))}function n(e){e.preventDefault(),t.removeEventListener("message",r),t.removeEventListener("error",n),M.warn("Failed to create Worker. Fallback to execute module in main thread",e),(t=new _).addEventListener("message",r),t.addEventListener("error",n)}t.addEventListener("message",r),t.addEventListener("error",n)})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function U(){var e;if(null!=v.a.default){var t=Object(n.a)({},v.a);delete t.default,e=JSON.parse(JSON.stringify(t))}else e=JSON.parse(JSON.stringify(v.a));e.assetsPath=Object(O.z)(e.assetsPath),e.request.interceptors=[],e.log.interceptors=[],e.locale=Object(R.b)(),e.has={"csp-restrictions":Object(c.a)("csp-restrictions"),"esri-2d-debug":!1,"esri-2d-update-debug":Object(c.a)("esri-2d-update-debug"),"esri-2d-query-centroid-enabled":Object(c.a)("esri-2d-query-centroid-enabled"),"featurelayer-pbf":Object(c.a)("featurelayer-pbf"),"featurelayer-simplify-thresholds":Object(c.a)("featurelayer-simplify-thresholds"),"featurelayer-simplify-payload-size-factors":Object(c.a)("featurelayer-simplify-payload-size-factors"),"esri-atomics":Object(c.a)("esri-atomics"),"esri-shared-array-buffer":Object(c.a)("esri-shared-array-buffer"),"esri-tiles-debug":Object(c.a)("esri-tiles-debug"),"esri-workers-arraybuffer-transfer":Object(c.a)("esri-workers-arraybuffer-transfer"),"host-webworker":1},e.workers.loaderUrl&&(e.workers.loaderUrl=Object(O.z)(e.workers.loaderUrl)),e.workers.workerPath?e.workers.workerPath=Object(O.z)(e.workers.workerPath):e.workers.workerPath=Object(O.z)(Object(j.a)("esri/core/workers/RemoteClient.js"));var r=v.a.workers.loaderConfig,a=w({baseUrl:null==r?void 0:r.baseUrl,locale:Object(R.b)(),has:Object(n.a)({"csp-restrictions":Object(c.a)("csp-restrictions"),"dojo-test-sniff":0,"host-webworker":1},null==r?void 0:r.has),map:Object(n.a)({},null==r?void 0:r.map),paths:Object(n.a)({},null==r?void 0:r.paths),packages:(null==r?void 0:r.packages)||[]}),i={version:y.d,buildDate:P.a,revision:P.b};return JSON.stringify({esriConfig:e,loaderConfig:a,kernelInfo:i})}var B=0,J=f.a.getLogger("esri.core.workers"),z=h.a.ABORT,G=h.a.INVOKE,Q=h.a.OPEN,H=h.a.OPENED,W=h.a.RESPONSE,K=function(){function e(t,r){Object(b.a)(this,e),this._outJobs=new Map,this._inJobs=new Map,this.worker=t,this.id=r,t.addEventListener("message",this._onMessage.bind(this)),t.addEventListener("error",(function(e){e.preventDefault(),J.error(e)}))}return Object(d.a)(e,[{key:"terminate",value:function(){this.worker.terminate()}},{key:"open",value:function(){var e=Object(o.a)(i.a.mark((function e(t){var r,n,a,o=this,s=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>1&&void 0!==s[1]?s[1]:{},n=r.signal,a=Object(h.b)(),e.abrupt("return",new Promise((function(e,r){var i={resolve:e,reject:r,abortHandle:Object(u.r)(n,(function(){o._outJobs.delete(a),o._post({type:z,jobId:a})}))};o._outJobs.set(a,i),o._post({type:Q,jobId:a,modulePath:t})})));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"_onMessage",value:function(e){var t=Object(h.d)(e);if(t)switch(t.type){case H:this._onOpenedMessage(t);break;case W:this._onResponseMessage(t);break;case z:this._onAbortMessage(t);break;case G:this._onInvokeMessage(t)}}},{key:"_onAbortMessage",value:function(e){var t=this._inJobs,r=e.jobId,n=t.get(r);n&&(n.controller&&n.controller.abort(),t.delete(r))}},{key:"_onInvokeMessage",value:function(e){var t,r=this,n=e.methodName,a=e.jobId,i=e.data,o=e.abortable?Object(u.d)():null,s=this._inJobs,c=y.e[n];try{if("function"!=typeof c)throw new TypeError("".concat(n," is not a function"));t=c.call(null,i,{signal:o?o.signal:null})}catch(l){return void this._post({type:W,jobId:a,error:Object(h.e)(l)})}Object(u.p)(t)?(s.set(a,{controller:o,promise:t}),t.then((function(e){s.has(a)&&(s.delete(a),r._post({type:W,jobId:a},e))}),(function(e){s.has(a)&&(s.delete(a),e||(e={message:"Error encountered at method"+n}),Object(u.m)(e)||r._post({type:W,jobId:a,error:Object(h.e)(e||{message:"Error encountered at method ".concat(n)})}))}))):this._post({type:W,jobId:a},t)}},{key:"_onOpenedMessage",value:function(e){var t,r=e.jobId,n=e.data,a=this._outJobs.get(r);a&&(this._outJobs.delete(r),null==(t=a.abortHandle)||t.remove(),a.resolve(n))}},{key:"_onResponseMessage",value:function(e){var t,r=e.jobId,n=e.error,a=e.data,i=this._outJobs.get(r);i&&(this._outJobs.delete(r),null==(t=i.abortHandle)||t.remove(),n?i.reject(s.a.fromJSON(JSON.parse(n))):i.resolve(a))}},{key:"_post",value:function(e,t,r){return Object(h.c)(this.worker,e,t,r)}}],[{key:"create",value:function(){var t=Object(o.a)(i.a.mark((function t(r){var n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,D();case 2:return n=t.sent,t.abrupt("return",new e(n,r));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}]),e}(),Z=Object(c.a)("esri-workers-debug")?1:Object(c.a)("host-browser")?navigator.hardwareConcurrency-1:0;Z||(Z=Object(c.a)("safari")&&Object(c.a)("mac")||Object(c.a)("trident")?7:2);var $=0,X=[];function Y(e,t){return ee.apply(this,arguments)}function ee(){return(ee=Object(o.a)(i.a.mark((function e(t,r){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new l.a,e.next=3,n.open(t,r);case 3:return e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function te(e){return re.apply(this,arguments)}function re(){return re=Object(o.a)(i.a.mark((function e(t){var r,a,o,l,b,d,y,f,h,j=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=j.length>1&&void 0!==j[1]?j[1]:{},"string"==typeof t){e.next=3;break}throw new s.a("workers:undefined-module","modulePath is missing");case 3:if(a=r.strategy||"distributed",Object(c.a)("host-webworker")&&!Object(c.a)("esri-workers")&&(a="local"),"local"!==a){e.next=16;break}return e.next=7,p.a.loadWorker(t);case 7:if(o=e.sent,e.t0=o,e.t0){e.next=13;break}return e.next=12,import(t);case 12:o=e.sent;case 13:return Object(u.v)(r.signal),l=r.client||o,e.abrupt("return",Y([p.a.connect(o)],Object(n.a)(Object(n.a)({},r),{},{client:l})));case 16:return e.next=18,ae();case 18:if(Object(u.v)(r.signal),"dedicated"!==a){e.next=28;break}return b=$++%Z,e.t1=Y,e.next=24,X[b].open(t,r);case 24:return e.t2=e.sent,e.t3=[e.t2],e.t4=r,e.abrupt("return",(0,e.t1)(e.t3,e.t4));case 28:if(!(r.maxNumWorkers&&r.maxNumWorkers>0)){e.next=34;break}if(!((d=Math.min(r.maxNumWorkers,Z))<Z)){e.next=34;break}for(y=new Array(d),f=0;f<d;++f)h=$++%Z,y[f]=X[h].open(t,r);return e.abrupt("return",Y(y,r));case 34:return e.abrupt("return",Y(X.map((function(e){return e.open(t,r)})),r));case 35:case"end":return e.stop()}}),e)}))),re.apply(this,arguments)}var ne=null;function ae(){return ie.apply(this,arguments)}function ie(){return(ie=Object(o.a)(i.a.mark((function e(){var t,r,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!ne){e.next=2;break}return e.abrupt("return",ne);case 2:for(Object(u.d)(),t=[],r=function(e){var r=K.create(e).then((function(t){return X[e]=t,t}));t.push(r)},n=0;n<Z;n++)r(n);return e.abrupt("return",ne=Promise.all(t));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},728:function(e,t,r){"use strict";r.d(t,"a",(function(){return u}));var n=r(21),a=r(15),i=r(666),o=r(672),s=r(209),c=a.a.getLogger("esri.layers.support.fieldProperties");function u(){return{fields:{type:[i.a],value:null},fieldsIndex:{readOnly:!0,get:function(){return new o.a(this.fields||[])}},outFields:{type:[String],json:{read:!1},set:function(e){this._userOutFields=e,this.notifyChange("outFields")},get:function(){var e=this._userOutFields;if(!e||!e.length)return null;if(e.includes("*"))return["*"];if(!this.fields)return e;var t,r=Object(n.a)(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;this.fieldsIndex.has(a)||c.error("field-attributes-layer:invalid-field","Invalid field ".concat(a," found in outFields"),{layer:this,outFields:e})}}catch(i){r.e(i)}finally{r.f()}return Object(s.d)(this.fieldsIndex,e)}}}}},729:function(e,t,r){"use strict";r.d(t,"a",(function(){return v}));var n,a=r(2),i=r(4),o=r(5),s=r(6),c=r(0),u=(r(114),r(26)),l=r(18),p=r(1),b=r(14),d=(r(19),r(15),r(10)),y=r(43),f=r(673),h=r(45),j=n=function(e){Object(o.a)(r,e);var t=Object(s.a)(r);function r(e){var n;return Object(a.a)(this,r),(n=t.call(this,e)).dynamicDataSource=void 0,n.gdbVersion=null,n.geometryPrecision=void 0,n.historicMoment=null,n.maxAllowableOffset=void 0,n.objectIds=null,n.orderByFields=null,n.outFields=null,n.outSpatialReference=null,n.relationshipId=void 0,n.start=void 0,n.num=void 0,n.returnGeometry=!1,n.returnM=void 0,n.returnZ=void 0,n.where=null,n}return Object(i.a)(r,[{key:"_writeHistoricMoment",value:function(e,t){t.historicMoment=e&&e.getTime()}},{key:"writeStart",value:function(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10,t.where="1=1"}},{key:"clone",value:function(){return new n(Object(l.a)({dynamicDataSource:this.dynamicDataSource,gdbVersion:this.gdbVersion,geometryPrecision:this.geometryPrecision,historicMoment:this.historicMoment&&new Date(this.historicMoment.getTime()),maxAllowableOffset:this.maxAllowableOffset,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,relationshipId:this.relationshipId,start:this.start,num:this.num,returnGeometry:this.returnGeometry,where:this.where,returnZ:this.returnZ,returnM:this.returnM}))}}]),r}(u.a);Object(c.a)([Object(p.b)({type:f.a,json:{write:!0}})],j.prototype,"dynamicDataSource",void 0),Object(c.a)([Object(p.b)({type:String,json:{write:!0}})],j.prototype,"gdbVersion",void 0),Object(c.a)([Object(p.b)({type:Number,json:{write:!0}})],j.prototype,"geometryPrecision",void 0),Object(c.a)([Object(p.b)({type:Date})],j.prototype,"historicMoment",void 0),Object(c.a)([Object(y.a)("historicMoment")],j.prototype,"_writeHistoricMoment",null),Object(c.a)([Object(p.b)({type:Number,json:{write:!0}})],j.prototype,"maxAllowableOffset",void 0),Object(c.a)([Object(p.b)({type:[Number],json:{write:!0}})],j.prototype,"objectIds",void 0),Object(c.a)([Object(p.b)({type:[String],json:{write:!0}})],j.prototype,"orderByFields",void 0),Object(c.a)([Object(p.b)({type:[String],json:{write:!0}})],j.prototype,"outFields",void 0),Object(c.a)([Object(p.b)({type:h.a,json:{read:{source:"outSR"},write:{target:"outSR"}}})],j.prototype,"outSpatialReference",void 0),Object(c.a)([Object(p.b)({json:{write:!0}})],j.prototype,"relationshipId",void 0),Object(c.a)([Object(p.b)({type:Number,json:{read:{source:"resultOffset"}}})],j.prototype,"start",void 0),Object(c.a)([Object(y.a)("start"),Object(y.a)("num")],j.prototype,"writeStart",null),Object(c.a)([Object(p.b)({type:Number,json:{read:{source:"resultRecordCount"}}})],j.prototype,"num",void 0),Object(c.a)([Object(p.b)({json:{write:!0}})],j.prototype,"returnGeometry",void 0),Object(c.a)([Object(p.b)({type:Boolean,json:{write:{overridePolicy:function(e){return{enabled:e}}}}})],j.prototype,"returnM",void 0),Object(c.a)([Object(p.b)({type:Boolean,json:{write:{overridePolicy:function(e){return{enabled:e}}}}})],j.prototype,"returnZ",void 0),Object(c.a)([Object(p.b)({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],j.prototype,"where",void 0),(j=n=Object(c.a)([Object(d.a)("esri.rest.support.RelationshipQuery")],j)).from=Object(b.m)(j);var v=j},733:function(e,t,r){"use strict";r.d(t,"a",(function(){return O}));var n=r(2),a=r(4),i=r(5),o=r(6),s=r(0),c=r(26),u=r(18),l=r(1),p=(r(14),r(19),r(15),r(57)),b=r(10),d=r(43),y=r(664),f=(r(660),r(661)),h=r(662),j=r(713),v=function(e){Object(i.a)(r,e);var t=Object(o.a)(r);function r(e){var a;return Object(n.a)(this,r),(a=t.call(this,e)).id=null,a.name=null,a.domains=null,a.templates=null,a}return Object(a.a)(r,[{key:"readDomains",value:function(e){var t={};for(var r in e)if(e.hasOwnProperty(r)){var n=e[r];switch(n.type){case"range":t[r]=h.a.fromJSON(n);break;case"codedValue":t[r]=y.a.fromJSON(n);break;case"inherited":t[r]=f.a.fromJSON(n)}}return t}},{key:"writeDomains",value:function(e,t){var r={};for(var n in e)e.hasOwnProperty(n)&&(r[n]=e[n]&&e[n].toJSON());Object(u.c)(r),t.domains=r}},{key:"readTemplates",value:function(e){return e&&e.map((function(e){return new j.a(e)}))}},{key:"writeTemplates",value:function(e,t){t.templates=e&&e.map((function(e){return e.toJSON()}))}}]),r}(c.a);Object(s.a)([Object(l.b)({json:{write:!0}})],v.prototype,"id",void 0),Object(s.a)([Object(l.b)({json:{write:!0}})],v.prototype,"name",void 0),Object(s.a)([Object(l.b)({json:{write:!0}})],v.prototype,"domains",void 0),Object(s.a)([Object(p.a)("domains")],v.prototype,"readDomains",null),Object(s.a)([Object(d.a)("domains")],v.prototype,"writeDomains",null),Object(s.a)([Object(l.b)({json:{write:!0}})],v.prototype,"templates",void 0),Object(s.a)([Object(p.a)("templates")],v.prototype,"readTemplates",null),Object(s.a)([Object(d.a)("templates")],v.prototype,"writeTemplates",null);var O=v=Object(s.a)([Object(b.a)("esri.layers.support.FeatureType")],v)},735:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return ir}));var n=r(21),a=r(7),i=r.n(a),o=r(12),s=r(13),c=r(2),u=r(4),l=r(77),p=r(65),b=r(5),d=r(6),y=r(0),f=r(214),h=(r(700),r(686),r(688),r(689),r(663),r(687)),j=r(701),v=r(715),O=r(691),m=r(82),g=r(332),w=r(52),S=r(29),x=r(183),k=r(19),I=r(42),F=r(15),T=r(11),E=r(677),_=r(66),R=r(30);function P(e,t){return M.apply(this,arguments)}function M(){return(M=Object(o.a)(i.a.mark((function e(t,n){var a,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.e(5).then(r.bind(null,736));case 2:return a=e.sent,o=a.WhereClause,e.abrupt("return",o.create(t,n));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var C,N=r(27),L=r(1),D=r(97),A=r(57),V=r(10),q=r(43),U=r(212),B=r(26),J=r(18),z=r(14),G=C=function(e){Object(b.a)(r,e);var t=Object(d.a)(r);function r(e){var n;return Object(c.a)(this,r),(n=t.call(this,e)).expression=null,n.name=null,n.returnType="boolean",n.title=null,n}return Object(u.a)(r,[{key:"clone",value:function(){return new C({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}}]),r}(B.a);Object(y.a)([Object(L.b)({type:String,json:{write:!0}})],G.prototype,"expression",void 0),Object(y.a)([Object(L.b)({type:String,json:{write:!0}})],G.prototype,"name",void 0),Object(y.a)([Object(L.b)({type:["boolean"],json:{write:!0}})],G.prototype,"returnType",void 0),Object(y.a)([Object(L.b)({type:String,json:{write:!0}})],G.prototype,"title",void 0);var Q=G=C=Object(y.a)([Object(V.a)("esri.form.ExpressionInfo")],G),H=function(e){Object(b.a)(r,e);var t=Object(d.a)(r);function r(e){var n;return Object(c.a)(this,r),(n=t.call(this,e)).description=null,n.label=null,n.type=null,n.visibilityExpression=null,n}return r}(B.a);Object(y.a)([Object(L.b)({type:String,json:{write:!0}})],H.prototype,"description",void 0),Object(y.a)([Object(L.b)({type:String,json:{write:!0}})],H.prototype,"label",void 0),Object(y.a)([Object(L.b)()],H.prototype,"type",void 0),Object(y.a)([Object(L.b)({type:String,json:{write:!0}})],H.prototype,"visibilityExpression",void 0);var W,K=H=Object(y.a)([Object(V.a)("esri.form.elements.Element")],H),Z=W=function(e){Object(b.a)(r,e);var t=Object(d.a)(r);function r(e){var n;return Object(c.a)(this,r),(n=t.call(this,e)).type=null,n}return Object(u.a)(r,[{key:"clone",value:function(){return new W({type:this.type})}}]),r}(B.a);Object(y.a)([Object(L.b)({type:["attachment","audio","document","image","signature","video"],json:{write:!0}})],Z.prototype,"type",void 0);var $,X=Z=W=Object(y.a)([Object(V.a)("esri.form.elements.inputs.AttachmentInput")],Z),Y=$=function(e){Object(b.a)(r,e);var t=Object(d.a)(r);function r(e){var n;return Object(c.a)(this,r),(n=t.call(this,e)).attachmentKeyword=null,n.editable=!0,n.input=null,n.type="attachment",n}return Object(u.a)(r,[{key:"clone",value:function(){return new $({attachmentKeyword:this.attachmentKeyword,description:this.description,editable:this.editable,input:this.input,label:this.label,visibilityExpression:this.visibilityExpression})}}]),r}(K);Object(y.a)([Object(L.b)({type:String,json:{write:!0}})],Y.prototype,"attachmentKeyword",void 0),Object(y.a)([Object(L.b)({type:Boolean,json:{write:!0}})],Y.prototype,"editable",void 0),Object(y.a)([Object(L.b)({type:X,json:{read:{source:"inputType"},write:{target:"inputType"}}})],Y.prototype,"input",void 0),Object(y.a)([Object(L.b)({type:["attachment"],json:{read:!1,write:!0}})],Y.prototype,"type",void 0);var ee=Y=$=Object(y.a)([Object(V.a)("esri.form.elements.AttachmentElement")],Y),te=function(e){Object(b.a)(r,e);var t=Object(d.a)(r);function r(e){var n;return Object(c.a)(this,r),(n=t.call(this,e)).type=null,n}return r}(B.a);Object(y.a)([Object(L.b)()],te.prototype,"type",void 0);var re=te=Object(y.a)([Object(V.a)("esri.form.elements.inputs.Input")],te),ne=function(e){Object(b.a)(r,e);var t=Object(d.a)(r);function r(e){var n;return Object(c.a)(this,r),(n=t.call(this,e)).maxLength=null,n.minLength=0,n}return r}(re);Object(y.a)([Object(L.b)({type:Number,json:{write:!0}})],ne.prototype,"maxLength",void 0),Object(y.a)([Object(L.b)({type:Number,json:{write:!0}})],ne.prototype,"minLength",void 0);var ae,ie=ne=Object(y.a)([Object(V.a)("esri.form.elements.inputs.TextInput")],ne),oe=ae=function(e){Object(b.a)(r,e);var t=Object(d.a)(r);function r(e){var n;return Object(c.a)(this,r),(n=t.call(this,e)).type="barcode-scanner",n}return Object(u.a)(r,[{key:"clone",value:function(){return new ae({maxLength:this.maxLength,minLength:this.minLength})}}]),r}(ie);Object(y.a)([Object(L.b)({type:["barcode-scanner"],json:{read:!1,write:!0}})],oe.prototype,"type",void 0);var se,ce=oe=ae=Object(y.a)([Object(V.a)("esri.form.elements.inputs.BarcodeScannerInput")],oe),ue=se=function(e){Object(b.a)(r,e);var t=Object(d.a)(r);function r(e){var n;return Object(c.a)(this,r),(n=t.call(this,e)).noValueOptionLabel=null,n.showNoValueOption=!1,n.type="combo-box",n}return Object(u.a)(r,[{key:"clone",value:function(){return new se({showNoValueOption:this.showNoValueOption,noValueOptionLabel:this.noValueOptionLabel})}}]),r}(re);Object(y.a)([Object(L.b)({type:String,json:{write:!0}})],ue.prototype,"noValueOptionLabel",void 0),Object(y.a)([Object(L.b)({type:Boolean,json:{write:!0}})],ue.prototype,"showNoValueOption",void 0),Object(y.a)([Object(L.b)({type:["combo-box"],json:{read:!1,write:!0}})],ue.prototype,"type",void 0);var le,pe=ue=se=Object(y.a)([Object(V.a)("esri.form.elements.inputs.ComboBoxInput")],ue);function be(e){return null!=e?new Date(e):null}function de(e){return e?e.getTime():null}var ye=le=function(e){Object(b.a)(r,e);var t=Object(d.a)(r);function r(e){var n;return Object(c.a)(this,r),(n=t.call(this,e)).includeTime=!1,n.max=null,n.min=null,n.type="datetime-picker",n}return Object(u.a)(r,[{key:"readMax",value:function(e,t){return be(t.max)}},{key:"writeMax",value:function(e,t){t.max=de(e)}},{key:"readMin",value:function(e,t){return be(t.min)}},{key:"writeMin",value:function(e,t){t.min=de(e)}},{key:"clone",value:function(){return new le({includeTime:this.includeTime,max:this.max,min:this.min,type:this.type})}}]),r}(re);Object(y.a)([Object(L.b)({type:Boolean,json:{write:!0}})],ye.prototype,"includeTime",void 0),Object(y.a)([Object(L.b)({type:Date,json:{type:Number,write:!0}})],ye.prototype,"max",void 0),Object(y.a)([Object(A.a)("max")],ye.prototype,"readMax",null),Object(y.a)([Object(q.a)("max")],ye.prototype,"writeMax",null),Object(y.a)([Object(L.b)({type:Date,json:{type:Number,write:!0}})],ye.prototype,"min",void 0),Object(y.a)([Object(A.a)("min")],ye.prototype,"readMin",null),Object(y.a)([Object(q.a)("min")],ye.prototype,"writeMin",null),Object(y.a)([Object(L.b)({type:["datetime-picker"],json:{read:!1,write:!0}})],ye.prototype,"type",void 0);var fe,he=ye=le=Object(y.a)([Object(V.a)("esri.form.elements.inputs.DateTimePickerInput")],ye),je=fe=function(e){Object(b.a)(r,e);var t=Object(d.a)(r);function r(e){var n;return Object(c.a)(this,r),(n=t.call(this,e)).noValueOptionLabel=null,n.showNoValueOption=!1,n.type="radio-buttons",n}return Object(u.a)(r,[{key:"clone",value:function(){return new fe({noValueOptionLabel:this.noValueOptionLabel,showNoValueOption:this.showNoValueOption})}}]),r}(re);Object(y.a)([Object(L.b)({type:String,json:{write:!0}})],je.prototype,"noValueOptionLabel",void 0),Object(y.a)([Object(L.b)({type:Boolean,json:{write:!0}})],je.prototype,"showNoValueOption",void 0),Object(y.a)([Object(L.b)({type:["radio-buttons"],json:{read:!1,write:!0}})],je.prototype,"type",void 0);var ve,Oe=je=fe=Object(y.a)([Object(V.a)("esri.form.elements.inputs.RadioButtonsInput")],je),me=ve=function(e){Object(b.a)(r,e);var t=Object(d.a)(r);function r(e){var n;return Object(c.a)(this,r),(n=t.call(this,e)).offValue=null,n.onValue=null,n.type="switch",n}return Object(u.a)(r,[{key:"clone",value:function(){return new ve({offValue:this.offValue,onValue:this.onValue})}}]),r}(re);Object(y.a)([Object(L.b)({type:[String,Number],json:{write:!0}})],me.prototype,"offValue",void 0),Object(y.a)([Object(L.b)({type:[String,Number],json:{write:!0}})],me.prototype,"onValue",void 0),Object(y.a)([Object(L.b)({type:["switch"],json:{read:!1,write:!0}})],me.prototype,"type",void 0);var ge,we=me=ve=Object(y.a)([Object(V.a)("esri.form.elements.inputs.SwitchInput")],me),Se=ge=function(e){Object(b.a)(r,e);var t=Object(d.a)(r);function r(e){var n;return Object(c.a)(this,r),(n=t.call(this,e)).type="text-area",n}return Object(u.a)(r,[{key:"clone",value:function(){return new ge({maxLength:this.maxLength,minLength:this.minLength})}}]),r}(ie);Object(y.a)([Object(L.b)({type:["text-area"],json:{read:!1,write:!0}})],Se.prototype,"type",void 0);var xe,ke=Se=ge=Object(y.a)([Object(V.a)("esri.form.elements.inputs.TextAreaInput")],Se),Ie=xe=function(e){Object(b.a)(r,e);var t=Object(d.a)(r);function r(e){var n;return Object(c.a)(this,r),(n=t.call(this,e)).type="text-box",n}return Object(u.a)(r,[{key:"clone",value:function(){return new xe({maxLength:this.maxLength,minLength:this.minLength})}}]),r}(ie);Object(y.a)([Object(L.b)({type:["text-box"],json:{read:!1,write:!0}})],Ie.prototype,"type",void 0);var Fe,Te={base:re,key:"type",typeMap:{"barcode-scanner":ce,"combo-box":pe,"datetime-picker":he,"radio-buttons":Oe,switch:we,"text-area":ke,"text-box":Ie=xe=Object(y.a)([Object(V.a)("esri.form.elements.inputs.TextBoxInput")],Ie)}},Ee=r(679),_e=Fe=function(e){Object(b.a)(r,e);var t=Object(d.a)(r);function r(e){var n;return Object(c.a)(this,r),(n=t.call(this,e)).domain=null,n.editable=!0,n.fieldName=null,n.hint=null,n.input=null,n.requiredExpression=null,n.type="field",n}return Object(u.a)(r,[{key:"clone",value:function(){return new Fe({description:this.description,domain:this.domain,editable:this.editable,fieldName:this.fieldName,hint:this.hint,input:this.input,label:this.label,requiredExpression:this.requiredExpression,visibilityExpression:this.visibilityExpression})}}]),r}(K);Object(y.a)([Object(L.b)({types:Ee.b,json:{read:{reader:Ee.a},write:!0}})],_e.prototype,"domain",void 0),Object(y.a)([Object(L.b)({type:Boolean,json:{write:!0}})],_e.prototype,"editable",void 0),Object(y.a)([Object(L.b)({type:String,json:{write:!0}})],_e.prototype,"fieldName",void 0),Object(y.a)([Object(L.b)({type:String,json:{write:!0}})],_e.prototype,"hint",void 0),Object(y.a)([Object(L.b)({types:Te,json:{read:{source:"inputType"},write:{target:"inputType"}}})],_e.prototype,"input",void 0),Object(y.a)([Object(L.b)({type:String,json:{write:!0}})],_e.prototype,"requiredExpression",void 0),Object(y.a)([Object(L.b)({type:String,json:{read:!1,write:!0}})],_e.prototype,"type",void 0);var Re,Pe=_e=Fe=Object(y.a)([Object(V.a)("esri.form.elements.FieldElement")],_e),Me=r(339),Ce=Re=function(e){Object(b.a)(r,e);var t=Object(d.a)(r);function r(e){var n;return Object(c.a)(this,r),(n=t.call(this,e)).displayCount=null,n.displayType="list",n.editable=!0,n.orderByFields=null,n.relationshipId=null,n.type="relationship",n}return Object(u.a)(r,[{key:"clone",value:function(){return new Re({description:this.description,displayCount:this.displayCount,displayType:this.displayType,editable:this.editable,label:this.label,orderByFields:Object(J.a)(this.orderByFields),relationshipId:this.relationshipId,visibilityExpression:this.visibilityExpression})}}]),r}(K);Object(y.a)([Object(L.b)({type:Number,json:{write:!0}})],Ce.prototype,"displayCount",void 0),Object(y.a)([Object(L.b)({type:["list"],json:{write:!0}})],Ce.prototype,"displayType",void 0),Object(y.a)([Object(L.b)({type:Boolean,json:{write:!0}})],Ce.prototype,"editable",void 0),Object(y.a)([Object(L.b)({type:[Me.a],json:{write:!0}})],Ce.prototype,"orderByFields",void 0),Object(y.a)([Object(L.b)({type:Number,json:{write:!0}})],Ce.prototype,"relationshipId",void 0),Object(y.a)([Object(L.b)({type:["relationship"],json:{read:!1,write:!0}})],Ce.prototype,"type",void 0);var Ne,Le=Ce=Re=Object(y.a)([Object(V.a)("esri.form.elements.RelationshipElement")],Ce);function De(e){return{typesWithGroup:{base:K,key:"type",typeMap:{attachment:ee,field:Pe,group:e,relationship:Le}},typesWithoutGroup:{base:K,key:"type",typeMap:{attachment:ee,field:Pe,relationship:Le}}}}function Ae(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!e)return null;var n=r?t.typesWithGroup.typeMap:t.typesWithoutGroup.typeMap;return e.filter((function(e){return n[e.type]})).map((function(e){return n[e.type].fromJSON(e)}))}function Ve(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!e)return null;var n=r?t.typesWithGroup.typeMap:t.typesWithoutGroup.typeMap;return e.filter((function(e){return n[e.type]})).map((function(e){return e.toJSON()}))}function qe(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return e?e.map((function(e){return Object(z.k)(r?t.typesWithGroup:t.typesWithoutGroup,e)})):null}var Ue=Ne=function(e){Object(b.a)(r,e);var t=Object(d.a)(r);function r(e){var n;return Object(c.a)(this,r),(n=t.call(this,e)).elements=null,n.initialState="expanded",n.type="group",n}return Object(u.a)(r,[{key:"castElements",value:function(e){return qe(e,Je,!1)}},{key:"readElements",value:function(e,t){return Ae(t.formElements,Je,!1)}},{key:"writeElements",value:function(e,t){t.formElements=Ve(e,Je,!1)}},{key:"clone",value:function(){return new Ne({description:this.description,elements:Object(J.a)(this.elements),initialState:this.initialState,label:this.label,visibilityExpression:this.visibilityExpression})}}]),r}(K);Object(y.a)([Object(L.b)({json:{write:!0}})],Ue.prototype,"elements",void 0),Object(y.a)([Object(D.a)("elements")],Ue.prototype,"castElements",null),Object(y.a)([Object(A.a)("elements",["formElements"])],Ue.prototype,"readElements",null),Object(y.a)([Object(q.a)("elements")],Ue.prototype,"writeElements",null),Object(y.a)([Object(L.b)({type:["collapsed","expanded"],json:{write:!0}})],Ue.prototype,"initialState",void 0),Object(y.a)([Object(L.b)({type:String,json:{read:!1,write:!0}})],Ue.prototype,"type",void 0);var Be,Je=De(Ue=Ne=Object(y.a)([Object(V.a)("esri.form.elements.GroupElement")],Ue)),ze=De(Ue),Ge=Be=function(e){Object(b.a)(r,e);var t=Object(d.a)(r);function r(e){var n;return Object(c.a)(this,r),(n=t.call(this,e)).description=null,n.elements=null,n.expressionInfos=null,n.title=null,n}return Object(u.a)(r,[{key:"castElements",value:function(e){return qe(e,ze)}},{key:"readElements",value:function(e,t){return Ae(t.formElements,ze)}},{key:"writeElements",value:function(e,t){t.formElements=Ve(e,ze)}},{key:"clone",value:function(){return new Be({description:this.description,expressionInfos:Object(J.a)(this.expressionInfos),elements:Object(J.a)(this.elements),title:this.title})}}]),r}(B.a);Object(y.a)([Object(L.b)({type:String,json:{write:!0}})],Ge.prototype,"description",void 0),Object(y.a)([Object(L.b)({json:{write:!0}})],Ge.prototype,"elements",void 0),Object(y.a)([Object(D.a)("elements")],Ge.prototype,"castElements",null),Object(y.a)([Object(A.a)("elements",["formElements"])],Ge.prototype,"readElements",null),Object(y.a)([Object(q.a)("elements")],Ge.prototype,"writeElements",null),Object(y.a)([Object(L.b)({type:[Q],json:{write:!0}})],Ge.prototype,"expressionInfos",void 0),Object(y.a)([Object(L.b)({type:String,json:{write:!0}})],Ge.prototype,"title",void 0);var Qe=Ge=Be=Object(y.a)([Object(V.a)("esri.form.FormTemplate")],Ge),He=r(58),We=r(742),Ke=r(45),Ze=r(682),$e=(r(114),r(210)),Xe=r(142),Ye=r(242),et=r(727);var tt,rt=r(723),nt=r(702),at=r(668),it=r(108),ot=r(236),st=0,ct=F.a.getLogger("esri.layers.graphics.sources.MemorySource"),ut=function(e){Object(b.a)(r,e);var t=Object(d.a)(r);function r(e){var n;return Object(c.a)(this,r),(n=t.call(this,e))._idToClientGraphic=null,n.type="memory",n}return Object(u.a)(r,[{key:"load",value:function(e){var t=Object(T.j)(e)?e.signal:null;return this.addResolvingPromise(this._startWorker(t)),Promise.resolve(this)}},{key:"destroy",value:function(){var e;null==(e=this._connection)||e.close(),this._connection=null}},{key:"workerGeometryType",get:function(){var e,t=null==(e=this.layer)?void 0:e.geometryType;return t?this._geometryTypeRequiresClientGraphicMapping(t)?"polygon":t:null}},{key:"applyEdits",value:function(e){var t=this;return this.load().then((function(){return t._applyEdits(e)}))}},{key:"openPorts",value:function(){var e=this;return this.load().then((function(){return e._connection.openPorts()}))}},{key:"queryFeatures",value:function(){var e=Object(o.a)(i.a.mark((function e(t){var r,a,o,s,c,u,l,p,b,d=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:{},e.next=3,this.load(r);case 3:return e.next=5,this._connection.invoke("queryFeatures",t?t.toJSON():null,r);case 5:if(a=e.sent,Object(rt.a)(t,this.layer.spatialReference,a),o=at.default.fromJSON(a),this._requiresClientGraphicMapping()){e.next=10;break}return e.abrupt("return",o);case 10:s=this.layer.objectIdField,c=Object(n.a)(o.features);try{for(c.s();!(u=c.n()).done;)l=u.value,p=l.attributes[s],(b=this._idToClientGraphic.get(p))&&(l.geometry=b.geometry)}catch(i){c.e(i)}finally{c.f()}return e.abrupt("return",(o.geometryType=this.layer.geometryType,o));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queryFeaturesJSON",value:function(){var e=Object(o.a)(i.a.mark((function e(t){var r,n,a=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=a.length>1&&void 0!==a[1]?a[1]:{},!this._requiresClientGraphicMapping()){e.next=3;break}throw new S.a("query-features-json:unsupported","Cannot query in JSON format for client only geometry types (mesh and extent)");case 3:return e.next=5,this.load(r);case 5:return e.next=7,this._connection.invoke("queryFeatures",t?t.toJSON():null,r);case 7:return n=e.sent,e.abrupt("return",(Object(rt.a)(t,this.layer.spatialReference,n),n));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queryFeatureCount",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.load(r).then((function(){return t._connection.invoke("queryFeatureCount",e?e.toJSON():null,r)}))}},{key:"queryObjectIds",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.load(r).then((function(){return t._connection.invoke("queryObjectIds",e?e.toJSON():null,r)}))}},{key:"queryExtent",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.load(r).then((function(){return t._connection.invoke("queryExtent",e?e.toJSON():null,r)})).then((function(e){return{count:e.count,extent:He.a.fromJSON(e.extent)}}))}},{key:"querySnapping",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.load(r).then((function(){return t._connection.invoke("querySnapping",e,r)}))}},{key:"_applyEdits",value:function(){var e=Object(o.a)(i.a.mark((function e(t){var r,a,o,s,c,u,l,p,b,d,y,f,h,j,v,O,m;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._connection){e.next=2;break}throw new S.a("feature-layer-source:edit-failure","Memory source not loaded");case 2:return r=this.layer.objectIdField,a=null,o=[],s=[],e.next=7,Promise.all([this._prepareClientMapping(t.addFeatures,null),this._prepareClientMapping(t.updateFeatures,null)]);case 7:if(c=function(e){return"objectId"in e&&null!=e.objectId?e.objectId:"attributes"in e&&null!=e.attributes[r]?e.attributes[r]:null},t.addFeatures&&(a=this._prepareAddFeatures(t.addFeatures)),t.deleteFeatures){u=Object(n.a)(t.deleteFeatures);try{for(u.s();!(l=u.n()).done;)p=l.value,null!=(b=c(p))&&o.push(b)}catch(i){u.e(i)}finally{u.f()}}if(d=t.updateFeatures&&this._idToClientGraphic?new Map:null,t.updateFeatures){y=Object(n.a)(t.updateFeatures);try{for(y.s();!(f=y.n()).done;)h=f.value,s.push(this._serializeFeature(h)),d&&null!=(j=c(h))&&d.set(j,h)}catch(i){y.e(i)}finally{y.f()}}return Object(nt.b)(a?a.features:null,s,this.layer.spatialReference),e.next=14,this._connection.invoke("applyEdits",{adds:a?a.features:[],updates:s,deletes:o});case 14:return v=e.sent,O=v.fullExtent,m=v.featureEditResults,e.abrupt("return",(this.fullExtent=O,a&&a.finish(m.uidToObjectId),this._updateClientGraphicIds(d,m),this._createEditsResult(m)));case 18:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_prepareClientMapping",value:function(){var e=Object(o.a)(i.a.mark((function e(t,r){var a,o,s,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("mesh"===this.layerOrSourceGeometryType&&!Object(T.i)(t)){e.next=2;break}return e.abrupt("return");case 2:a=[],o=Object(n.a)(t);try{for(o.s();!(s=o.n()).done;)c=s.value.geometry,!Object(T.j)(c)||"mesh"!==c.type||c.hasExtent||c.loaded||a.push(c.load({signal:r}))}catch(i){o.e(i)}finally{o.f()}if(e.t0=a.length,!e.t0){e.next=9;break}return e.next=9,Promise.all(a);case 9:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"_updateClientGraphicIds",value:function(e,t){if(this._idToClientGraphic){if(e){var r,a=Object(n.a)(t.updateResults);try{for(a.s();!(r=a.n()).done;){var i=r.value;if(i.success){var o=e.get(i.objectId);null!=o&&this._addIdToClientGraphic(o)}}}catch(l){a.e(l)}finally{a.f()}}var s,c=Object(n.a)(t.deleteResults);try{for(c.s();!(s=c.n()).done;){var u=s.value;u.success&&this._idToClientGraphic.delete(u.objectId)}}catch(l){c.e(l)}finally{c.f()}}}},{key:"_createEditsResult",value:function(e){return{addFeatureResults:e.addResults?e.addResults.map(this._createFeatureEditResult,this):[],updateFeatureResults:e.updateResults?e.updateResults.map(this._createFeatureEditResult,this):[],deleteFeatureResults:e.deleteResults?e.deleteResults.map(this._createFeatureEditResult,this):[],addAttachmentResults:[],updateAttachmentResults:[],deleteAttachmentResults:[]}}},{key:"_createFeatureEditResult",value:function(e){var t=!0===e.success?null:e.error||{code:void 0,description:void 0};return{objectId:e.objectId,globalId:e.globalId,error:t?new S.a("feature-layer-source:edit-failure",t.description,{code:t.code}):null}}},{key:"_prepareAddFeatures",value:function(e){for(var t=new Map,r=new Array(e.length),n=null,a=0;a<e.length;a++){var i=e[a],o=this._serializeFeature(i);!n&&Object(T.j)(i.geometry)&&(n=i.geometry.type),r[a]=o,t.set("".concat(o.uid),i)}var s=this;return{features:r,inferredGeometryType:n,finish:function(e){var r=s.sourceJSON.objectIdField;for(var n in e){var a=e[n],i=t.get(n);i&&(i.attributes||(i.attributes={}),-1===a?delete i.attributes[r]:i.attributes[r]=a,s._addIdToClientGraphic(i))}}}}},{key:"_addIdToClientGraphic",value:function(e){if(this._idToClientGraphic){var t=this.sourceJSON.objectIdField,r=e.attributes&&e.attributes[t];null!=r&&this._idToClientGraphic.set(r,e)}}},{key:"layerOrSourceGeometryType",get:function(){var e,t,r;return null!=(e=null==(t=this.layer)?void 0:t.geometryType)?e:null==(r=this.sourceJSON)?void 0:r.geometryType}},{key:"_requiresClientGraphicMapping",value:function(){return this._geometryTypeRequiresClientGraphicMapping(this.layerOrSourceGeometryType)}},{key:"_geometryRequiresClientGraphicMapping",value:function(e){return this._geometryTypeRequiresClientGraphicMapping(e.type)}},{key:"_geometryTypeRequiresClientGraphicMapping",value:function(e){return"mesh"===e||"multipatch"===e||"extent"===e}},{key:"_serializeFeature",value:function(e){var t=e.attributes,r=this._geometryForSerialization(e),n=(st++).toString();return r?{uid:n,geometry:r.toJSON(),attributes:t}:{uid:n,attributes:t}}},{key:"_geometryForSerialization",value:function(e){var t=e.geometry;return Object(T.i)(t)?null:this._geometryRequiresClientGraphicMapping(t)?t.extent?it.a.fromExtent(t.extent):null:t}},{key:"_startWorker",value:function(){var e=Object(o.a)(i.a.mark((function e(t){var r,a,o,s,c,u,l,p,b,d,y,f,h,j,v;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(et.a)("MemorySourceWorker",{strategy:Object(k.a)("feature-layers-workers")?"dedicated":"local",signal:t});case 2:return this._connection=e.sent,r=this.layer,a=r.fields,o=r.spatialReference,s=r.objectIdField,c=r.hasM,u=r.hasZ,l=r.timeInfo,p="defaults"===this.layer.originOf("spatialReference"),e.next=6,this._prepareClientMapping(this.items,t);case 6:return b=this._prepareAddFeatures(this.items),this.on("before-changes",(function(e){ct.error("Source modifications will not propagate after layer has been loaded. Please use .applyEdits() instead"),e.preventDefault()})),d={features:b.features,fields:a&&a.map((function(e){return e.toJSON()})),geometryType:ot.c.toJSON(this.workerGeometryType),hasM:"mesh"!==this.layerOrSourceGeometryType&&c,hasZ:"mesh"===this.layerOrSourceGeometryType||u,objectIdField:s,spatialReference:p?null:o&&o.toJSON(),timeInfo:l?l.toJSON():null},e.next=11,this._connection.invoke("load",d,{signal:t});case 11:y=e.sent,f=Object(n.a)(y.warnings);try{for(f.s();!(h=f.n()).done;)j=h.value,ct.warn(j.message,{layer:this.layer,warning:j})}catch(i){f.e(i)}finally{f.f()}y.featureErrors.length&&ct.warn("Encountered ".concat(y.featureErrors.length," validation errors while loading features"),y.featureErrors),v=y.layerDefinition,this._geometryTypeRequiresClientGraphicMapping(b.inferredGeometryType)&&(v.geometryType=ot.c.toJSON(b.inferredGeometryType)),this.sourceJSON=v,this._requiresClientGraphicMapping()&&(this._idToClientGraphic=new Map),b.finish(y.assignedObjectIds);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(Xe.a.LoadableMixin(Object(Ye.b)(w.a)));Object(y.a)([(tt={Type:$e.a,ensureType:Object(z.m)($e.a)},function(e,t){e[t]=tt})],ut.prototype,"itemType",void 0),Object(y.a)([Object(L.b)()],ut.prototype,"type",void 0),Object(y.a)([Object(L.b)({constructOnly:!0})],ut.prototype,"layer",void 0),Object(y.a)([Object(L.b)({readOnly:!0})],ut.prototype,"workerGeometryType",null),Object(y.a)([Object(L.b)()],ut.prototype,"sourceJSON",void 0);var lt,pt=ut=Object(y.a)([Object(V.a)("esri.layers.graphics.sources.MemorySource")],ut),bt=r(724),dt=r(710),yt=r(730),ft=r(721),ht=r(709),jt=r(756),vt=r(699),Ot=r(697),mt=r(716),gt=r(719),wt=r(676),St=r(671),xt=lt=function(e){Object(b.a)(r,e);var t=Object(d.a)(r);function r(e){return Object(c.a)(this,r),t.call(this,e)}return Object(u.a)(r,[{key:"clone",value:function(){var e=this.name,t=this.fields,r=this.isAscending,n=this.isUnique,a=this.description;return new lt({name:e,fields:t,isAscending:r,isUnique:n,description:a})}}]),r}(B.a);Object(y.a)([Object(L.b)({constructOnly:!0})],xt.prototype,"name",void 0),Object(y.a)([Object(L.b)({constructOnly:!0})],xt.prototype,"fields",void 0),Object(y.a)([Object(L.b)({constructOnly:!0})],xt.prototype,"isAscending",void 0),Object(y.a)([Object(L.b)({constructOnly:!0})],xt.prototype,"isUnique",void 0),Object(y.a)([Object(L.b)({constructOnly:!0})],xt.prototype,"description",void 0);xt=lt=Object(y.a)([Object(V.a)("esri.layers.support.FeatureIndex")],xt);var kt=r(746),It=r(713),Ft=r(733),Tt=r(728),Et=r(209),_t=r(135),Rt=function(e){Object(b.a)(r,e);var t=Object(d.a)(r);function r(e){var n;return Object(c.a)(this,r),(n=t.call(this,e)).shapeAreaField=null,n.shapeLengthField=null,n.units=null,n}return r}(B.a);Object(y.a)([Object(L.b)({type:String,json:{read:{source:"shapeAreaFieldName"}}})],Rt.prototype,"shapeAreaField",void 0),Object(y.a)([Object(L.b)({type:String,json:{read:{source:"shapeLengthFieldName"}}})],Rt.prototype,"shapeLengthField",void 0),Object(y.a)([Object(L.b)({type:String,json:{read:function(e){return _t.a.read(e)||_t.j.read(e)}}})],Rt.prototype,"units",void 0);var Pt=Rt=Object(y.a)([Object(V.a)("esri.layers.support.GeometryFieldsInfo")],Rt),Mt=r(675),Ct=r(740),Nt=r(745),Lt=new I.a({esriRelCardinalityOneToOne:"one-to-one",esriRelCardinalityOneToMany:"one-to-many",esriRelCardinalityManyToMany:"many-to-many"}),Dt=new I.a({esriRelRoleOrigin:"origin",esriRelRoleDestination:"destination"}),At=function(e){Object(b.a)(r,e);var t=Object(d.a)(r);function r(e){var n;return Object(c.a)(this,r),(n=t.call(this,e)).cardinality=null,n.composite=null,n.id=null,n.keyField=null,n.keyFieldInRelationshipTable=null,n.name=null,n.relatedTableId=null,n.relationshipTableId=null,n.role=null,n}return r}(B.a);Object(y.a)([Object(L.b)({json:{read:Lt.read,write:Lt.write}})],At.prototype,"cardinality",void 0),Object(y.a)([Object(L.b)({json:{read:!0,write:!0}})],At.prototype,"composite",void 0),Object(y.a)([Object(L.b)({json:{read:!0,write:!0}})],At.prototype,"id",void 0),Object(y.a)([Object(L.b)({json:{read:!0,write:!0}})],At.prototype,"keyField",void 0),Object(y.a)([Object(L.b)({json:{read:!0,write:!0}})],At.prototype,"keyFieldInRelationshipTable",void 0),Object(y.a)([Object(L.b)({json:{read:!0,write:!0}})],At.prototype,"name",void 0),Object(y.a)([Object(L.b)({json:{read:!0,write:!0}})],At.prototype,"relatedTableId",void 0),Object(y.a)([Object(L.b)({json:{read:!0,write:!0}})],At.prototype,"relationshipTableId",void 0),Object(y.a)([Object(L.b)({json:{read:Dt.read,write:Dt.write}})],At.prototype,"role",void 0);var Vt=At=Object(y.a)([Object(V.a)("esri.layers.support.Relationship")],At),qt=r(698),Ut=r(673),Bt=r(744),Jt=r(747),zt=r(670),Gt=r(729),Qt=r(720),Ht=r(755),Wt=new I.a({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch"}),Kt={name:"supportsName",size:"supportsSize",contentType:"supportsContentType",keywords:"supportsKeywords",exifInfo:"supportsExifInfo"},Zt="FeatureLayer",$t=F.a.getLogger("esri.layers.FeatureLayer");function Xt(e){return e&&e instanceof w.a}function Yt(e,t,r){return!!(e&&e.hasOwnProperty(t)?e[t]:r)}function er(e,t,r){return e&&e.hasOwnProperty(t)?e[t]:r}var tr=Object(Tt.a)();function rr(e,t,r){var n=!(null==r||!r.writeLayerSchema);return{enabled:n,ignoreOrigin:n}}var nr=function(e){Object(b.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(c.a)(this,a);for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return(e=t.call.apply(t,[this].concat(n)))._handles=new x.a,e.capabilities=null,e.charts=null,e.copyright=null,e.datesInUnknownTimezone=!1,e.displayField=null,e.definitionExpression=null,e.dynamicDataSource=null,e.editFieldsInfo=null,e.editingInfo=null,e.elevationInfo=null,e.featureReduction=null,e.fields=null,e.fieldsIndex=null,e.floorInfo=null,e.formTemplate=null,e.fullExtent=null,e.gdbVersion=null,e.geometryFieldsInfo=null,e.geometryType=null,e.hasM=void 0,e.hasZ=void 0,e.heightModelInfo=null,e.historicMoment=null,e.infoFor3D=null,e.isTable=!1,e.labelsVisible=!0,e.labelingInfo=null,e.layerId=void 0,e.legendEnabled=!0,e.minScale=0,e.maxScale=0,e.globalIdField=null,e.objectIdField=null,e.outFields=null,e.path=null,e.popupEnabled=!0,e.popupTemplate=null,e.relationships=null,e.sourceJSON=null,e.returnM=void 0,e.returnZ=void 0,e.screenSizePerspectiveEnabled=!0,e.serviceDefinitionExpression=null,e.spatialReference=Ke.a.WGS84,e.subtypeCode=null,e.templates=null,e.timeInfo=null,e.title=null,e.sublayerTitleMode="item-title",e.trackIdField=null,e.type="feature",e.typeIdField=null,e.types=null,e.indexes=new(w.a.ofType(xt)),e.userIsAdmin=!1,e.version=void 0,e.visible=!0,e}return Object(u.a)(a,[{key:"destroy",value:function(){var e;null==(e=this.source)||e.destroy(),this._handles=Object(T.d)(this._handles)}},{key:"normalizeCtorArgs",value:function(e,t){return"string"==typeof e?Object(s.a)({url:e},t):e}},{key:"load",value:function(e){var t=this,r=Object(T.j)(e)?e.signal:null;if(!(this.portalItem&&this.portalItem.loaded&&this.source)){var n=this.loadFromPortal({supportedTypes:["Feature Service","Feature Collection"]},e).catch(R.u).then(Object(o.a)(i.a.mark((function e(){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.url||null!=t.layerId||!/FeatureServer|MapServer\/*$/i.test(t.url)){e.next=5;break}return e.next=3,t._fetchFirstLayerId(r);case 3:null!=(n=e.sent)&&(t.layerId=n);case 5:if(t.url||t._hasMemorySource()){e.next=7;break}throw new S.a("feature-layer:missing-url-or-source","Feature layer must be created with either a url or a source");case 7:return e.t0=t,e.next=10,t.createGraphicsSource(r);case 10:return e.t1=e.sent,e.abrupt("return",e.t0._initLayerProperties.call(e.t0,e.t1));case 12:case"end":return e.stop()}}),e)})))).then((function(){return t.finishLoadEditablePortalLayer(e)}));return this.addResolvingPromise(n),Promise.resolve(this)}this.addResolvingPromise(this.createGraphicsSource(r).then((function(e){return t._initLayerProperties(e)})))}},{key:"readCapabilities",value:function(e,t){return t=t.layerDefinition||t,{attachment:this._readAttachmentCapabilities(t.attachmentProperties),data:this._readDataCapabilities(t),metadata:this._readMetadataCapabilities(t),operations:this._readOperationsCapabilities(t.capabilities||e,t),query:this._readQueryCapabilities(t),queryRelated:this._readQueryRelatedCapabilities(t),editing:this._readEditingCapabilities(t)}}},{key:"createQueryVersion",get:function(){return this.commitProperty("definitionExpression"),this.commitProperty("dynamicDataSource"),this.commitProperty("timeExtent"),this.commitProperty("timeOffset"),this.commitProperty("geometryType"),this.commitProperty("gdbVersion"),this.commitProperty("historicMoment"),this.commitProperty("returnZ"),this.commitProperty("capabilities"),this.commitProperty("returnM"),(this._get("createQueryVersion")||0)+1}},{key:"editingEnabled",get:function(){return!(this.loaded&&!this.capabilities.operations.supportsEditing)&&(this._isOverridden("editingEnabled")?this._get("editingEnabled"):this._hasMemorySource()||this.userHasEditingPrivileges)},set:function(e){null!=e?this._override("editingEnabled",e):this._clearOverride("editingEnabled")}},{key:"readEditingEnabled",value:function(e,t){return this._readEditingEnabled(t,!1)}},{key:"readEditingEnabledFromWebMap",value:function(e,t,r){return this._readEditingEnabled(t,!0,r)}},{key:"writeEditingEnabled",value:function(e,t){this._writeEditingEnabled(e,t,!1)}},{key:"writeEditingEnabledToWebMap",value:function(e,t,r,n){this._writeEditingEnabled(e,t,!0,n)}},{key:"readEditingInfo",value:function(e,t){var r=t.editingInfo;return r?{lastEditDate:null!=r.lastEditDate?new Date(r.lastEditDate):null}:null}},{key:"readFeatureReduction",value:function(e,t){return Object(kt.b)(e,t)}},{key:"writeWebSceneFeatureReduction",value:function(e,t,r,n){Object(kt.d)(e,t,"layerDefinition.featureReduction",n)}},{key:"readIsTable",value:function(e,t){return"Table"===(t=t&&t.layerDefinition||t).type||!t.geometryType}},{key:"writeIsTable",value:function(e,t,r,n){null!=n&&n.writeLayerSchema&&Object(_.c)(r,e?"Table":"Feature Layer",t)}},{key:"readMinScale",value:function(e,t){return t.effectiveMinScale||e||0}},{key:"readMaxScale",value:function(e,t){return t.effectiveMaxScale||e||0}},{key:"readGlobalIdFieldFromService",value:function(e,t){if((t=t.layerDefinition||t).globalIdField)return t.globalIdField;if(t.fields){var r,a=Object(n.a)(t.fields);try{for(a.s();!(r=a.n()).done;){var i=r.value;if("esriFieldTypeGlobalID"===i.type)return i.name}}catch(o){a.e(o)}finally{a.f()}}}},{key:"readObjectIdFieldFromService",value:function(e,t){if((t=t.layerDefinition||t).objectIdField)return t.objectIdField;if(t.fields){var r,a=Object(n.a)(t.fields);try{for(a.s();!(r=a.n()).done;){var i=r.value;if("esriFieldTypeOID"===i.type)return i.name}}catch(o){a.e(o)}finally{a.f()}}}},{key:"parsedUrl",get:function(){var e=this.url?Object(N.J)(this.url):null;return null!=e&&(null!=this.dynamicDataSource?e.path=Object(N.y)(e.path,"dynamicLayer"):null!=this.layerId&&(e.path=Object(N.y)(e.path,this.layerId.toString()))),e}},{key:"defaultPopupTemplate",get:function(){return this.createPopupTemplate()}},{key:"renderer",set:function(e){Object(Et.e)(e,this.fieldsIndex),this._set("renderer",e)}},{key:"readRenderer",value:function(e,t,r){var n=(t=t.layerDefinition||t).drawingInfo&&t.drawingInfo.renderer||void 0;if(n){var a=Object(v.b)(n,t,r)||void 0;return a||$t.error("Failed to create renderer",{rendererDefinition:t.drawingInfo.renderer,layer:this,context:r}),a}if(t.defaultSymbol)return t.types&&t.types.length?new j.a({defaultSymbol:ar(t.defaultSymbol,t,r),field:t.typeIdField,uniqueValueInfos:t.types.map((function(e){return{id:e.id,symbol:ar(e.symbol,e,r)}}))}):new h.a({symbol:ar(t.defaultSymbol,t,r)})}},{key:"source",set:function(e){var t=this._get("source");t!==e&&(Xt(t)&&this._resetMemorySource(t),Xt(e)&&this._initMemorySource(e),this._set("source",e))}},{key:"castSource",value:function(e){return e?Array.isArray(e)||e instanceof w.a?new pt({layer:this,items:e}):e:null}},{key:"readSource",value:function(e,t){var r=at.default.fromJSON(t.featureSet);return new pt({layer:this,items:r&&r.features||[]})}},{key:"readServiceDefinitionExpression",value:function(e,t){return t.definitionQuery||t.definitionExpression}},{key:"readTemplates",value:function(e,t){var r=t.editFieldsInfo,n=r&&r.creatorField,a=r&&r.editorField;return e=e&&e.map((function(e){return It.a.fromJSON(e)})),this._fixTemplates(e,n),this._fixTemplates(e,a),e}},{key:"readTitle",value:function(e,t){var r=t.layerDefinition&&t.layerDefinition.name||t.name,n=t.title||t.layerDefinition&&t.layerDefinition.title;if(r){var a=this.portalItem&&this.portalItem.title;if("item-title"===this.sublayerTitleMode)return this.url?Object(wt.i)(this.url,r):r;var i=r;if(!i&&this.url){var o=Object(wt.e)(this.url);Object(T.j)(o)&&(i=o.title)}if(!i)return;return"item-title-and-service-name"===this.sublayerTitleMode&&a&&a!==i&&(i=a+" - "+i),Object(wt.a)(i)}if("item-title"===this.sublayerTitleMode&&n)return n}},{key:"readTitleFromWebMap",value:function(e,t){return t.title||t.layerDefinition&&t.layerDefinition.name}},{key:"readTypeIdField",value:function(e,t){var r=(t=t.layerDefinition||t).typeIdField;if(r&&t.fields){r=r.toLowerCase();var n=t.fields.find((function(e){return e.name.toLowerCase()===r}));n&&(r=n.name)}return r}},{key:"readTypes",value:function(e,t){var r=this;e=(t=t.layerDefinition||t).types;var n=t.editFieldsInfo,a=n&&n.creatorField,i=n&&n.editorField;return e&&e.map((function(e){return e=Ft.a.fromJSON(e),r._fixTemplates(e.templates,a),r._fixTemplates(e.templates,i),e}))}},{key:"url",set:function(e){var t=Object(wt.h)({layer:this,url:e,nonStandardUrlAllowed:!0,logger:$t});this._set("url",t.url),null!=t.layerId&&this._set("layerId",t.layerId)}},{key:"writeUrl",value:function(e,t,r,n){Object(wt.j)(this,e,null,t,n)}},{key:"readVersion",value:function(e,t){return t.currentVersion?t.currentVersion:t.hasOwnProperty("capabilities")||t.hasOwnProperty("drawingInfo")||t.hasOwnProperty("hasAttachments")||t.hasOwnProperty("htmlPopupType")||t.hasOwnProperty("relationships")||t.hasOwnProperty("timeInfo")||t.hasOwnProperty("typeIdField")||t.hasOwnProperty("types")?10:9.3}},{key:"readVisible",value:function(e,t){return t.layerDefinition&&null!=t.layerDefinition.defaultVisibility?!!t.layerDefinition.defaultVisibility:null!=t.visibility?!!t.visibility:void 0}},{key:"addAttachment",value:function(e,t){var r=this;return this.load().then((function(){return r._checkAttachmentSupport(e)})).then((function(){if(!("addAttachment"in r.source))throw new S.a(Zt,"Layer source does not support addAttachment capability");return r.source.addAttachment(e,t)}))}},{key:"updateAttachment",value:function(e,t,r){var n=this;return this.load().then((function(){return n._checkAttachmentSupport(e)})).then((function(){if(!("updateAttachment"in n.source))throw new S.a(Zt,"Layer source does not support updateAttachment capability");return n.source.updateAttachment(e,t,r)}))}},{key:"applyEdits",value:function(){var e=Object(o.a)(i.a.mark((function e(t,n){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.e(28).then(r.bind(null,1091));case 2:return a=e.sent,e.next=5,this.load();case 5:return e.abrupt("return",a.applyEdits(this,this.source,t,n));case 6:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"on",value:function(e,t){return Object(l.a)(Object(p.a)(a.prototype),"on",this).call(this,e,t)}},{key:"createPopupTemplate",value:function(e){return Object(Ht.a)(this,e)}},{key:"createGraphicsSource",value:function(){var e=Object(o.a)(i.a.mark((function e(t){var n,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._hasMemorySource()){e.next=2;break}return e.abrupt("return",this.source.load({signal:t}));case 2:return e.next=4,Object(R.y)(Promise.all([r.e(6),r.e(24),r.e(73)]).then(r.bind(null,1092)),t);case 4:return n=e.sent,a=n.default,e.abrupt("return",new a({layer:this}).load({signal:t}));case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createQuery",value:function(){var e=new zt.a,t=this.get("capabilities.data");e.dynamicDataSource=this.dynamicDataSource,e.gdbVersion=this.gdbVersion,e.historicMoment=this.historicMoment,e.returnGeometry=!0,t&&(t.supportsZ&&null!=this.returnZ&&(e.returnZ=this.returnZ),t.supportsM&&null!=this.returnM&&(e.returnM=this.returnM)),e.outFields=["*"],e.where=this.definitionExpression||"1=1";var r=this.timeOffset,n=this.timeExtent;return e.timeExtent=null!=r&&null!=n?n.offset(-r.value,r.unit):n||null,e.multipatchOption="multipatch"===this.geometryType?"xyFootprint":null,e}},{key:"deleteAttachments",value:function(e,t){var r=this;return this.load().then((function(){return r._checkAttachmentSupport(e)})).then((function(){if(!("deleteAttachments"in r.source))throw new S.a(Zt,"Layer source does not support deleteAttachments capability");return r.source.deleteAttachments(e,t)}))}},{key:"fetchRecomputedExtents",value:function(e){var t=this;return this.load({signal:null==e?void 0:e.signal}).then((function(){if(t.source.fetchRecomputedExtents)return t.source.fetchRecomputedExtents(e);throw new S.a(Zt,"Layer source does not support fetchUpdates capability")}))}},{key:"getFeatureType",value:function(e){var t=this.typeIdField,r=this.types;if(!t||!e)return null;var n=e.attributes?e.attributes[t]:void 0;if(null==n)return null;var a=null;return r.some((function(e){var t=e.id;return null!=t&&(t.toString()===n.toString()&&(a=e),!!a)})),a}},{key:"getFieldDomain",value:function(e,t){var r=t&&t.feature,n=this.getFeatureType(r);if(n){var a=n.domains&&n.domains[e];if(a&&"inherited"!==a.type)return a}return this._getLayerDomain(e)}},{key:"getField",value:function(e){return this.fieldsIndex.get(e)}},{key:"queryAttachments",value:function(e,t){var r=this;return e=Jt.a.from(e),this.load().then((function(){if(!r.get("capabilities.data.supportsAttachment"))throw new S.a(Zt,"this layer doesn't support attachments");var t=e,n=t.attachmentTypes,a=t.objectIds,i=t.globalIds,o=t.num,s=t.size,c=t.start,u=t.where;if(!r.get("capabilities.operations.supportsQueryAttachments")){var l=a&&a.length>1,p=n&&n.length,b=i&&i.length,d=s&&s.length;if(l||p||b||d||o||c||u)throw new S.a(Zt,"when 'supportsQueryAttachments' is false, only objectIds of length 1 are supported",e)}if(!(a&&a.length||u))throw new S.a(Zt,"'objectIds' or 'where' are required to perform attachment query",e);if(!("queryAttachments"in r.source))throw new S.a(Zt,"Layer source does not support queryAttachments capability",e);return r.source.queryAttachments(e)}))}},{key:"queryFeatures",value:function(e,t){var r=this;return this.load().then((function(){return r.source.queryFeatures(zt.a.from(e)||r.createQuery(),t)})).then((function(e){if(null!=e&&e.features){var t,a=Object(n.a)(e.features);try{for(a.s();!(t=a.n()).done;){var i=t.value;i.layer=i.sourceLayer=r}}catch(o){a.e(o)}finally{a.f()}}return e}))}},{key:"queryObjectIds",value:function(e,t){var r=this;return this.load().then((function(){if(r.source.queryObjectIds)return r.source.queryObjectIds(zt.a.from(e)||r.createQuery(),t);throw new S.a(Zt,"Layer source does not support queryObjectIds capability")}))}},{key:"queryFeatureCount",value:function(e,t){var r=this;return this.load().then((function(){if(r.source.queryFeatureCount)return r.source.queryFeatureCount(zt.a.from(e)||r.createQuery(),t);throw new S.a(Zt,"Layer source does not support queryFeatureCount capability")}))}},{key:"queryExtent",value:function(e,t){var r=this;return this.load().then((function(){if(r.source.queryExtent)return r.source.queryExtent(zt.a.from(e)||r.createQuery(),t);throw new S.a(Zt,"Layer source does not support queryExtent capability")}))}},{key:"queryRelatedFeatures",value:function(e,t){var r=this;return this.load().then((function(){if("queryRelatedFeatures"in r.source)return r.source.queryRelatedFeatures(Gt.a.from(e),t);throw new S.a(Zt,"Layer source does not support queryRelatedFeatures capability")}))}},{key:"queryRelatedFeaturesCount",value:function(e,t){var r=this;return this.load().then((function(){if("queryRelatedFeaturesCount"in r.source)return r.source.queryRelatedFeaturesCount(Gt.a.from(e),t);throw new S.a(Zt,"Layer source does not support queryRelatedFeaturesCount capability")}))}},{key:"queryTopFeatures",value:function(e,t){var r=this;return this.load().then((function(){if("queryTopFeatures"in r.source&&r.get("capabilities.query.supportsTopFeaturesQuery"))return r.source.queryTopFeatures(Qt.a.from(e),t).then((function(e){if(null!=e&&e.features){var t,a=Object(n.a)(e.features);try{for(a.s();!(t=a.n()).done;){var i=t.value;i.layer=i.sourceLayer=r}}catch(o){a.e(o)}finally{a.f()}}return e}));throw new S.a(Zt,"Layer source does not support queryTopFeatures capability")}))}},{key:"queryTopObjectIds",value:function(e,t){var r=this;return this.load().then((function(){if("queryTopObjectIds"in r.source&&r.get("capabilities.query.supportsTopFeaturesQuery"))return r.source.queryTopObjectIds(Qt.a.from(e),t);throw new S.a(Zt,"Layer source does not support queryTopObjectIds capability")}))}},{key:"queryTopFeaturesExtent",value:function(e,t){var r=this;return this.load().then((function(){if("queryTopExtents"in r.source&&r.get("capabilities.query.supportsTopFeaturesQuery"))return r.source.queryTopExtents(Qt.a.from(e),t);throw new S.a(Zt,"Layer source does not support queryTopExtents capability")}))}},{key:"queryTopFeatureCount",value:function(e,t){var r=this;return this.load().then((function(){if("queryTopCount"in r.source&&r.get("capabilities.query.supportsTopFeaturesQuery"))return r.source.queryTopCount(Qt.a.from(e),t);throw new S.a(Zt,"Layer source does not support queryFeatureCount capability")}))}},{key:"read",value:function(e,t){var r=e.featureCollection;if(r){var n=r.layers;n&&1===n.length&&(Object(l.a)(Object(p.a)(a.prototype),"read",this).call(this,n[0],t),null!=r.showLegend&&Object(l.a)(Object(p.a)(a.prototype),"read",this).call(this,{showLegend:r.showLegend},t))}Object(l.a)(Object(p.a)(a.prototype),"read",this).call(this,e,t),t&&"service"===t.origin&&this.revert(["objectIdField","fields","timeInfo","spatialReference"],"service")}},{key:"write",value:function(e,t){var r,n,i=(t=Object(s.a)(Object(s.a)({},t),{},{writeLayerSchema:null!=(r=null==(n=t)?void 0:n.writeLayerSchema)?r:this._hasMemorySource()})).origin,o=t.layerContainerType,c=t.messages;if(this.isTable){if("web-scene"===i||"web-map"===i&&"tables"!==o)return c&&c.push(new S.a("layer:unsupported","Layer (".concat(this.title,", ").concat(this.id,") of type '").concat(this.declaredClass,"' using a Table source cannot be written to web scenes and web maps"),{layer:this})),null;if(this._hasMemorySource())return c&&c.push(new S.a("layer:unsupported","Layer (".concat(this.title,", ").concat(this.id,") of type '").concat(this.declaredClass,"' using an in-memory Table source cannot be written to web scenes and web maps"),{layer:this})),null}else if(this.loaded&&"web-map"===i&&"tables"===o)return c&&c.push(new S.a("layer:unsupported","Layer (".concat(this.title,", ").concat(this.id,") of type '").concat(this.declaredClass,"' using a non-table source cannot be written to tables in web maps"),{layer:this})),null;return Object(l.a)(Object(p.a)(a.prototype),"write",this).call(this,e,t)}},{key:"_readEditingEnabled",value:function(e,t,r){var n,a=null==(n=e.layerDefinition)?void 0:n.capabilities;return a?this._hasEditingCapability(a):(a=e.capabilities,t&&"web-map"===(null==r?void 0:r.origin)&&!this._hasMemorySource()&&a?this._hasEditingCapability(a):void 0)}},{key:"_hasEditingCapability",value:function(e){return e.toLowerCase().split(",").map((function(e){return e.trim()})).includes("editing")}},{key:"_writeEditingEnabled",value:function(e,t,r,n){if(!e){var a,i,o=null!=(a=this.capabilities)&&null!=(i=a.operations)&&i.supportsSync?"Query,Sync":"Query";Object(_.c)("layerDefinition.capabilities",o,t),!r||null!=n&&n.writeLayerSchema||(t.capabilities=o)}}},{key:"_checkAttachmentSupport",value:function(e){var t=e.attributes,r=this.objectIdField;return this.get("capabilities.data.supportsAttachment")?e?t?t[r]?void 0:Promise.reject(new S.a(Zt,"feature is missing the identifying attribute ".concat(r))):Promise.reject(new S.a(Zt,"'attributes' are required on a feature to query attachments")):Promise.reject(new S.a(Zt,"A feature is required to add/delete/update attachments")):Promise.reject(new S.a(Zt,"this layer doesn't support attachments"))}},{key:"_getLayerDomain",value:function(e){var t=this.fieldsIndex.get(e);return t?t.domain:null}},{key:"_fetchFirstLayerId",value:function(e){return Object(m.default)(this.url,{query:Object(s.a)(Object(s.a)({f:"json"},this.customParameters),{},{token:this.apiKey}),responseType:"json",signal:e}).then((function(e){var t=e.data;if(t)return Array.isArray(t.layers)&&t.layers.length>0?t.layers[0].id:Array.isArray(t.tables)&&t.tables.length>0?t.tables[0].id:void 0}))}},{key:"_initLayerProperties",value:function(){var e=Object(o.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(this._set("source",t),t.sourceJSON&&(this.sourceJSON=t.sourceJSON,this.read(t.sourceJSON,{origin:"service",url:this.parsedUrl})),this._verifySource(),this._verifyFields(),Object(Et.e)(this.renderer,this.fieldsIndex),Object(Et.f)(this.timeInfo,this.fieldsIndex),Object(Bt.a)(this,{origin:"service"})));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"hasDataChanged",value:function(){var e=Object(o.a)(i.a.mark((function e(){var t,r,n,a,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==(t=this.source)||!t.refresh){e.next=13;break}return e.prev=1,e.next=4,null==(r=this.source)?void 0:r.refresh();case 4:if(n=e.sent,a=n.hasUpdates,o=n.updates,Object(T.j)(o)&&(this.sourceJSON=Object(s.a)(Object(s.a)({},this.sourceJSON),o),this.read(o,{origin:"service",url:this.parsedUrl})),!a){e.next=9;break}return e.abrupt("return",!0);case 9:e.next=13;break;case 11:e.prev=11,e.t0=e.catch(1);case 13:if(!this.definitionExpression){e.next=22;break}return e.prev=14,e.next=17,P(this.definitionExpression,this.fieldsIndex);case 17:return e.abrupt("return",e.sent.hasDateFunctions);case 20:e.prev=20,e.t1=e.catch(14);case 22:return e.abrupt("return",!1);case 23:case"end":return e.stop()}}),e,this,[[1,11],[14,20]])})));return function(){return e.apply(this,arguments)}}()},{key:"_verifyFields",value:function(){var e=this.parsedUrl&&this.parsedUrl.path||"undefined";this.objectIdField||console.log("FeatureLayer: 'objectIdField' property is not defined (url: "+e+")"),this.isTable||this._hasMemorySource()||-1!==e.search(/\/FeatureServer\//i)||this.fields&&this.fields.some((function(e){return"geometry"===e.type}))||console.log("FeatureLayer: unable to find field of type 'geometry' in the layer 'fields' list. If you are using a map service layer, features will not have geometry (url: "+e+")")}},{key:"_fixTemplates",value:function(e,t){e&&e.forEach((function(e){var r=e.prototype&&e.prototype.attributes;r&&t&&delete r[t]}))}},{key:"_verifySource",value:function(){if(this._hasMemorySource()){if(this.url)throw new S.a("feature-layer:mixed-source-and-url","FeatureLayer cannot be created with both an in-memory source and a url")}else if(!this.url)throw new S.a("feature-layer:source-or-url-required","FeatureLayer requires either a url, a valid portal item or a source")}},{key:"_initMemorySource",value:function(e){var t=this;e.forEach((function(e){e.layer=t,e.sourceLayer=t})),this._handles.add([e.on("after-add",(function(e){e.item.layer=t,e.item.sourceLayer=t})),e.on("after-remove",(function(e){e.item.layer=null,e.item.sourceLayer=null}))],"fl-source")}},{key:"_resetMemorySource",value:function(e){e.forEach((function(e){e.layer=null,e.sourceLayer=null})),this._handles.remove("fl-source")}},{key:"_hasMemorySource",value:function(){return!(this.url||!this.source)}},{key:"_readAttachmentCapabilities",value:function(e){var t={supportsName:!1,supportsSize:!1,supportsContentType:!1,supportsKeywords:!1,supportsExifInfo:!1};return e&&Array.isArray(e)&&e.forEach((function(e){var r=Kt[e.name];r&&(t[r]=!!e.isEnabled)})),t}},{key:"_readDataCapabilities",value:function(e){return{isVersioned:Yt(e,"isDataVersioned",!1),supportsAttachment:Yt(e,"hasAttachments",!1),supportsM:Yt(e,"hasM",!1),supportsZ:Yt(e,"hasZ",!1)}}},{key:"_readMetadataCapabilities",value:function(e){return{supportsAdvancedFieldProperties:Yt(e,"supportsFieldDescriptionProperty",!1)}}},{key:"_readOperationsCapabilities",value:function(e,t){var r=e?e.toLowerCase().split(",").map((function(e){return e.trim()})):[],n=r.includes("editing")&&!t.datesInUnknownTimezone,a=n&&r.includes("create"),i=n&&r.includes("delete"),o=n&&r.includes("update"),s=r.includes("changetracking");return n&&!(a||i||o)&&(a=i=o=!0),{supportsCalculate:Yt(t,"supportsCalculate",!1),supportsTruncate:Yt(t,"supportsTruncate",!1),supportsValidateSql:Yt(t,"supportsValidateSql",!1),supportsAdd:a,supportsDelete:i,supportsEditing:n,supportsChangeTracking:s,supportsQuery:r.includes("query"),supportsQueryAttachments:Yt(t.advancedQueryCapabilities,"supportsQueryAttachments",!1),supportsResizeAttachments:Yt(t,"supportsAttachmentsResizing",!1),supportsSync:r.includes("sync"),supportsUpdate:o,supportsExceedsLimitStatistics:Yt(t,"supportsExceedsLimitStatistics",!1)}}},{key:"_readQueryCapabilities",value:function(e){var t,r=e.advancedQueryCapabilities,n=e.ownershipBasedAccessControlForFeatures,a=e.archivingInfo,i=null==(t=this.url)?void 0:t.includes("MapServer"),o=!Object(k.a)("mapserver-pbf-enabled")&&i&&this.version<10.81,s=(e.supportedQueryFormats||"").split(",").reduce((function(e,t){var r=t.toLowerCase().trim();return r&&e.add(r),e}),new Set);return{supportsStatistics:Yt(r,"supportsStatistics",e.supportsStatistics),supportsPercentileStatistics:Yt(r,"supportsPercentileStatistics",!1),supportsCentroid:Yt(r,"supportsReturningGeometryCentroid",!1),supportsDistance:Yt(r,"supportsQueryWithDistance",!1),supportsDistinct:Yt(r,"supportsDistinct",e.supportsAdvancedQueries),supportsExtent:Yt(r,"supportsReturningQueryExtent",!1),supportsGeometryProperties:Yt(r,"supportsReturningGeometryProperties",!1),supportsHavingClause:Yt(r,"supportsHavingClause",!1),supportsOrderBy:Yt(r,"supportsOrderBy",e.supportsAdvancedQueries),supportsPagination:Yt(r,"supportsPagination",!1),supportsQuantization:Yt(e,"supportsCoordinatesQuantization",!1),supportsQuantizationEditMode:Yt(e,"supportsQuantizationEditMode",!1),supportsQueryGeometry:Yt(e,"supportsReturningQueryGeometry",!1),supportsResultType:Yt(r,"supportsQueryWithResultType",!1),supportsMaxRecordCountFactor:Yt(r,"supportsMaxRecordCountFactor",!1),supportsSqlExpression:Yt(r,"supportsSqlExpression",!1),supportsStandardizedQueriesOnly:Yt(e,"useStandardizedQueries",!1),supportsTopFeaturesQuery:Yt(r,"supportsTopFeaturesQuery",!1),supportsQueryByOthers:Yt(n,"allowOthersToQuery",!0),supportsHistoricMoment:Yt(a,"supportsQueryWithHistoricMoment",!1),supportsFormatPBF:!o&&s.has("pbf"),supportsDisjointSpatialRelationship:Yt(r,"supportsDisjointSpatialRel",!1),supportsCacheHint:Yt(r,"supportsQueryWithCacheHint",!1),maxRecordCountFactor:er(e,"maxRecordCountFactor",void 0),maxRecordCount:er(e,"maxRecordCount",void 0),standardMaxRecordCount:er(e,"standardMaxRecordCount",void 0),tileMaxRecordCount:er(e,"tileMaxRecordCount",void 0)}}},{key:"_readQueryRelatedCapabilities",value:function(e){var t=e.advancedQueryCapabilities,r=Yt(t,"supportsAdvancedQueryRelated",!1);return{supportsPagination:Yt(t,"supportsQueryRelatedPagination",!1),supportsCount:r,supportsOrderBy:r}}},{key:"_readEditingCapabilities",value:function(e){var t=e.ownershipBasedAccessControlForFeatures;return{supportsGeometryUpdate:Yt(e,"allowGeometryUpdates",!0),supportsGlobalId:Yt(e,"supportsApplyEditsWithGlobalIds",!1),supportsReturnServiceEditsInSourceSpatialReference:Yt(e,"supportsReturnServiceEditsInSourceSR",!1),supportsRollbackOnFailure:Yt(e,"supportsRollbackOnFailureParameter",!1),supportsUpdateWithoutM:Yt(e,"allowUpdateWithoutMValues",!1),supportsUploadWithItemId:Yt(e,"supportsAttachmentsByUploadId",!1),supportsDeleteByAnonymous:Yt(t,"allowAnonymousToDelete",!0),supportsDeleteByOthers:Yt(t,"allowOthersToDelete",!0),supportsUpdateByAnonymous:Yt(t,"allowAnonymousToUpdate",!0),supportsUpdateByOthers:Yt(t,"allowOthersToUpdate",!0)}}}]),a}(Object(yt.a)(Object(jt.a)(Object(gt.a)(Object(mt.a)(Object(Ot.a)(Object(dt.a)(Object(ht.a)(Object(vt.a)(Object(E.a)(Object(ft.a)(Object(bt.a)(Ze.a))))))))))));Object(y.a)([Object(L.b)({readOnly:!0,json:{read:!1}})],nr.prototype,"capabilities",void 0),Object(y.a)([Object(A.a)("service","capabilities",["advancedQueryCapabilities","allowGeometryUpdates","allowUpdateWithoutMValues","archivingInfo","capabilities","datesInUnknownTimezone","hasAttachments","hasM","hasZ","maxRecordCount","maxRecordCountFactor","ownershipBasedAccessControlForFeatures","standardMaxRecordCount","supportedQueryFormats","supportsAdvancedQueries","supportsApplyEditsWithGlobalIds","supportsAttachmentsByUploadId","supportsAttachmentsResizing","supportsCalculate","supportsCoordinatesQuantization","supportsExceedsLimitStatistics","supportsFieldDescriptionProperty","supportsQuantizationEditMode","supportsRollbackOnFailureParameter","supportsStatistics","supportsTruncate","supportsValidateSql","tileMaxRecordCount","useStandardizedQueries"])],nr.prototype,"readCapabilities",null),Object(y.a)([Object(L.b)({json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],nr.prototype,"charts",void 0),Object(y.a)([Object(L.b)({readOnly:!0})],nr.prototype,"createQueryVersion",null),Object(y.a)([Object(L.b)({type:String,json:{read:{source:"layerDefinition.copyrightText"},origins:{service:{read:{source:"copyrightText"}}}}})],nr.prototype,"copyright",void 0),Object(y.a)([Object(L.b)({type:Boolean})],nr.prototype,"datesInUnknownTimezone",void 0),Object(y.a)([Object(L.b)({type:String,json:{read:{source:"layerDefinition.displayField"},origins:{service:{read:{source:"displayField"}}}}})],nr.prototype,"displayField",void 0),Object(y.a)([Object(L.b)({type:String,json:{origins:{service:{read:!1,write:!1}},name:"layerDefinition.definitionExpression",write:{enabled:!0,allowNull:!0}}})],nr.prototype,"definitionExpression",void 0),Object(y.a)([Object(L.b)({types:g.e,readOnly:!0})],nr.prototype,"defaultSymbol",void 0),Object(y.a)([Object(L.b)({type:Ut.a})],nr.prototype,"dynamicDataSource",void 0),Object(y.a)([Object(L.b)({readOnly:!0})],nr.prototype,"editFieldsInfo",void 0),Object(y.a)([Object(L.b)({type:Boolean})],nr.prototype,"editingEnabled",null),Object(y.a)([Object(A.a)(["portal-item","web-scene"],"editingEnabled",["layerDefinition.capabilities"])],nr.prototype,"readEditingEnabled",null),Object(y.a)([Object(A.a)("web-map","editingEnabled",["capabilities","layerDefinition.capabilities"])],nr.prototype,"readEditingEnabledFromWebMap",null),Object(y.a)([Object(q.a)(["portal-item","web-scene"],"editingEnabled",{"layerDefinition.capabilities":{type:String}})],nr.prototype,"writeEditingEnabled",null),Object(y.a)([Object(q.a)("web-map","editingEnabled",{capabilities:{type:String},"layerDefinition.capabilities":{type:String}})],nr.prototype,"writeEditingEnabledToWebMap",null),Object(y.a)([Object(L.b)({readOnly:!0})],nr.prototype,"editingInfo",void 0),Object(y.a)([Object(A.a)("editingInfo")],nr.prototype,"readEditingInfo",null),Object(y.a)([Object(L.b)(St.b)],nr.prototype,"elevationInfo",void 0),Object(y.a)([Object(L.b)(kt.a)],nr.prototype,"featureReduction",void 0),Object(y.a)([Object(A.a)("featureReduction",["layerDefinition.featureReduction"])],nr.prototype,"readFeatureReduction",null),Object(y.a)([Object(q.a)("web-scene","featureReduction",{"layerDefinition.featureReduction":{types:kt.c}})],nr.prototype,"writeWebSceneFeatureReduction",null),Object(y.a)([Object(L.b)(Object(s.a)(Object(s.a)({},tr.fields),{},{json:{read:{source:"layerDefinition.fields"},origins:{service:{read:!0},"web-map":{write:{target:"layerDefinition.fields",overridePolicy:rr}}}}}))],nr.prototype,"fields",void 0),Object(y.a)([Object(L.b)(tr.fieldsIndex)],nr.prototype,"fieldsIndex",void 0),Object(y.a)([Object(L.b)({type:Nt.a,json:{read:{source:"layerDefinition.floorInfo"},write:{target:"layerDefinition.floorInfo"}}})],nr.prototype,"floorInfo",void 0),Object(y.a)([Object(L.b)({type:Qe,json:{name:"formInfo",write:!0,origins:{"web-scene":{read:!1,write:!1}}}})],nr.prototype,"formTemplate",void 0),Object(y.a)([Object(L.b)({type:He.a,json:{origins:{service:{read:{source:"extent"}}},read:{source:"layerDefinition.extent"}}})],nr.prototype,"fullExtent",void 0),Object(y.a)([Object(L.b)()],nr.prototype,"gdbVersion",void 0),Object(y.a)([Object(L.b)({readOnly:!0,type:Pt,json:{read:{source:"geometryProperties"}}})],nr.prototype,"geometryFieldsInfo",void 0),Object(y.a)([Object(L.b)({type:["point","polygon","polyline","multipoint","multipatch","mesh"],json:{origins:{service:{read:Wt.read},"web-map":{write:{target:"layerDefinition.geometryType",overridePolicy:rr,writer:function(e,t,r){var n=e?Wt.toJSON(e):null;n&&Object(_.c)(r,n,t)}}}},read:{source:"layerDefinition.geometryType",reader:Wt.read}}})],nr.prototype,"geometryType",void 0),Object(y.a)([Object(L.b)({type:Boolean,json:{origins:{service:{read:!0}},read:{source:"layerDefinition.hasM"}}})],nr.prototype,"hasM",void 0),Object(y.a)([Object(L.b)({type:Boolean,json:{origins:{service:{read:!0}},read:{source:"layerDefinition.hasZ"}}})],nr.prototype,"hasZ",void 0),Object(y.a)([Object(L.b)({readOnly:!0,type:We.a})],nr.prototype,"heightModelInfo",void 0),Object(y.a)([Object(L.b)({type:Date})],nr.prototype,"historicMoment",void 0),Object(y.a)([Object(L.b)(St.c)],nr.prototype,"id",void 0),Object(y.a)([Object(L.b)({readOnly:!0,json:{origins:{service:{read:!0}},read:!1}})],nr.prototype,"infoFor3D",void 0),Object(y.a)([Object(L.b)({readOnly:!0,json:{origins:{"web-map":{write:{target:"layerDefinition.type"}}}}})],nr.prototype,"isTable",void 0),Object(y.a)([Object(A.a)("service","isTable",["type","geometryType"]),Object(A.a)("isTable",["layerDefinition.type","layerDefinition.geometryType"])],nr.prototype,"readIsTable",null),Object(y.a)([Object(q.a)("web-map","isTable")],nr.prototype,"writeIsTable",null),Object(y.a)([Object(L.b)(St.d)],nr.prototype,"labelsVisible",void 0),Object(y.a)([Object(L.b)({type:[Mt.a],json:{origins:{service:{read:{source:"drawingInfo.labelingInfo",reader:Ct.a},write:{target:"drawingInfo.labelingInfo",enabled:!1}}},read:{source:"layerDefinition.drawingInfo.labelingInfo",reader:Ct.a},write:{target:"layerDefinition.drawingInfo.labelingInfo"}}})],nr.prototype,"labelingInfo",void 0),Object(y.a)([Object(L.b)(St.i)],nr.prototype,"opacity",void 0),Object(y.a)([Object(L.b)({type:Number,json:{origins:{service:{read:{source:"id"}}},read:!1}})],nr.prototype,"layerId",void 0),Object(y.a)([Object(L.b)(St.e)],nr.prototype,"legendEnabled",void 0),Object(y.a)([Object(L.b)({type:["show","hide"]})],nr.prototype,"listMode",void 0),Object(y.a)([Object(L.b)(St.g)],nr.prototype,"minScale",void 0),Object(y.a)([Object(A.a)("service","minScale",["minScale","effectiveMinScale"])],nr.prototype,"readMinScale",null),Object(y.a)([Object(L.b)(St.f)],nr.prototype,"maxScale",void 0),Object(y.a)([Object(A.a)("service","maxScale",["maxScale","effectiveMaxScale"])],nr.prototype,"readMaxScale",null),Object(y.a)([Object(L.b)({type:String})],nr.prototype,"globalIdField",void 0),Object(y.a)([Object(A.a)("globalIdField",["layerDefinition.globalIdField","layerDefinition.fields"]),Object(A.a)("service","globalIdField",["globalIdField","fields"])],nr.prototype,"readGlobalIdFieldFromService",null),Object(y.a)([Object(L.b)({type:String,json:{origins:{"web-map":{write:{target:"layerDefinition.objectIdField",overridePolicy:rr}}}}})],nr.prototype,"objectIdField",void 0),Object(y.a)([Object(A.a)("objectIdField",["layerDefinition.objectIdField","layerDefinition.fields"]),Object(A.a)("service","objectIdField",["objectIdField","fields"])],nr.prototype,"readObjectIdFieldFromService",null),Object(y.a)([Object(L.b)({value:"ArcGISFeatureLayer",type:["ArcGISFeatureLayer"]})],nr.prototype,"operationalLayerType",void 0),Object(y.a)([Object(L.b)(tr.outFields)],nr.prototype,"outFields",void 0),Object(y.a)([Object(L.b)({readOnly:!0})],nr.prototype,"parsedUrl",null),Object(y.a)([Object(L.b)({type:String,json:{origins:{"web-scene":{read:!0,write:!0}},read:!1}})],nr.prototype,"path",void 0),Object(y.a)([Object(L.b)(St.j)],nr.prototype,"popupEnabled",void 0),Object(y.a)([Object(L.b)({type:f.a,json:{read:{source:"popupInfo"},write:{target:"popupInfo"}}})],nr.prototype,"popupTemplate",void 0),Object(y.a)([Object(L.b)({readOnly:!0})],nr.prototype,"defaultPopupTemplate",null),Object(y.a)([Object(L.b)({type:[Vt],readOnly:!0})],nr.prototype,"relationships",void 0),Object(y.a)([Object(L.b)({types:O.a,json:{origins:{service:{write:{target:"drawingInfo.renderer",enabled:!1}},"web-scene":{types:O.b,write:{target:"layerDefinition.drawingInfo.renderer",writer:v.c}}},write:{target:"layerDefinition.drawingInfo.renderer",overridePolicy:function(e,t,r){return{ignoreOrigin:null==r?void 0:r.writeLayerSchema}},writer:v.c}}})],nr.prototype,"renderer",null),Object(y.a)([Object(A.a)("service","renderer",["drawingInfo.renderer","defaultSymbol"]),Object(A.a)("renderer",["layerDefinition.drawingInfo.renderer","layerDefinition.defaultSymbol"])],nr.prototype,"readRenderer",null),Object(y.a)([Object(L.b)()],nr.prototype,"sourceJSON",void 0),Object(y.a)([Object(L.b)({type:Boolean})],nr.prototype,"returnM",void 0),Object(y.a)([Object(L.b)({type:Boolean})],nr.prototype,"returnZ",void 0),Object(y.a)([Object(L.b)(St.m)],nr.prototype,"screenSizePerspectiveEnabled",void 0),Object(y.a)([Object(L.b)()],nr.prototype,"source",null),Object(y.a)([Object(D.a)("source")],nr.prototype,"castSource",null),Object(y.a)([Object(A.a)("portal-item","source",["featureSet"]),Object(A.a)("web-map","source",["featureSet"])],nr.prototype,"readSource",null),Object(y.a)([Object(L.b)({readOnly:!0})],nr.prototype,"serviceDefinitionExpression",void 0),Object(y.a)([Object(A.a)("service","serviceDefinitionExpression",["definitionQuery","definitionExpression"])],nr.prototype,"readServiceDefinitionExpression",null),Object(y.a)([Object(L.b)({type:Ke.a,json:{origins:{service:{read:{source:"extent.spatialReference"}}},read:{source:"layerDefinition.extent.spatialReference"}}})],nr.prototype,"spatialReference",void 0),Object(y.a)([Object(L.b)({type:Number})],nr.prototype,"subtypeCode",void 0),Object(y.a)([Object(L.b)({type:[It.a]})],nr.prototype,"templates",void 0),Object(y.a)([Object(A.a)("templates",["editFieldsInfo","creatorField","editorField","templates"])],nr.prototype,"readTemplates",null),Object(y.a)([Object(L.b)({type:qt.a})],nr.prototype,"timeInfo",void 0),Object(y.a)([Object(L.b)()],nr.prototype,"title",void 0),Object(y.a)([Object(A.a)("service","title",["name"]),Object(A.a)("portal-item","title",["layerDefinition.title","layerDefinition.name","title"])],nr.prototype,"readTitle",null),Object(y.a)([Object(A.a)("web-map","title",["layerDefinition.name","title"])],nr.prototype,"readTitleFromWebMap",null),Object(y.a)([Object(L.b)({type:String})],nr.prototype,"sublayerTitleMode",void 0),Object(y.a)([Object(L.b)({type:String,json:{read:{source:"timeInfo.trackIdField"}}})],nr.prototype,"trackIdField",void 0),Object(y.a)([Object(L.b)({json:{read:!1}})],nr.prototype,"type",void 0),Object(y.a)([Object(L.b)({type:String})],nr.prototype,"typeIdField",void 0),Object(y.a)([Object(A.a)("service","typeIdField"),Object(A.a)("typeIdField",["layerDefinition.typeIdField"])],nr.prototype,"readTypeIdField",null),Object(y.a)([Object(L.b)({type:[Ft.a]})],nr.prototype,"types",void 0),Object(y.a)([Object(A.a)("service","types",["types"]),Object(A.a)("types",["layerDefinition.types"])],nr.prototype,"readTypes",null),Object(y.a)([Object(L.b)({readOnly:!0,json:{write:!1}})],nr.prototype,"serverGens",void 0),Object(y.a)([Object(L.b)({type:w.a.ofType(xt),readOnly:!0})],nr.prototype,"indexes",void 0),Object(y.a)([Object(L.b)(St.n)],nr.prototype,"url",null),Object(y.a)([Object(q.a)("url")],nr.prototype,"writeUrl",null),Object(y.a)([Object(L.b)({readOnly:!0})],nr.prototype,"userIsAdmin",void 0),Object(y.a)([Object(L.b)({json:{origins:{service:{read:!0}},read:!1}})],nr.prototype,"version",void 0),Object(y.a)([Object(A.a)("service","version",["currentVersion","capabilities","drawingInfo","hasAttachments","htmlPopupType","relationships","timeInfo","typeIdField","types"])],nr.prototype,"readVersion",null),Object(y.a)([Object(L.b)({type:Boolean,json:{origins:{"portal-item":{write:{target:"layerDefinition.defaultVisibility"}}}}})],nr.prototype,"visible",void 0),Object(y.a)([Object(A.a)("portal-item","visible",["visibility","layerDefinition.defaultVisibility"])],nr.prototype,"readVisible",null),nr=Object(y.a)([Object(V.a)("esri.layers.FeatureLayer")],nr);var ar=Object(U.b)({types:g.i}),ir=nr},739:function(e,t,r){"use strict";r.d(t,"a",(function(){return d}));var n,a=r(2),i=r(4),o=r(5),s=r(6),c=r(0),u=r(1),l=(r(19),r(14),r(15),r(10)),p=r(705),b=n=function(e){Object(o.a)(r,e);var t=Object(s.a)(r);function r(e){var n;return Object(a.a)(this,r),(n=t.call(this,e)).type="selection",n}return Object(i.a)(r,[{key:"clone",value:function(){return new n}}]),r}(p.a);Object(c.a)([Object(u.b)({type:["selection"]})],b.prototype,"type",void 0);var d=b=n=Object(c.a)([Object(l.a)("esri.layers.support.FeatureReductionSelection")],b)},740:function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var n=r(675),a=/\[([^\[\]]+)\]/gi;function i(e,t,r){var i=this;return e?e.map((function(e){var o=new n.a;if(o.read(e,r),o.labelExpression){var s=t.fields||t.layerDefinition&&t.layerDefinition.fields||i.fields;o.labelExpression=o.labelExpression.replace(a,(function(e,t){return"[".concat(function(e,t){if(!t)return e;for(var r=e.toLowerCase(),n=0;n<t.length;n++){var a=t[n].name;if(a.toLowerCase()===r)return a}return e}(t,s),"]")}))}return o})):null}},742:function(e,t,r){"use strict";r.d(t,"a",(function(){return I}));var n,a=r(13),i=r(2),o=r(4),s=r(77),c=r(65),u=r(5),l=r(6),p=r(0),b=r(137),d=r(42),y=r(26),f=r(135),h=r(165),j=r(1),v=(r(19),r(14),r(15),r(57)),O=r(10),m=r(43),g=Object(d.b)()({orthometric:"gravity-related-height",gravity_related_height:"gravity-related-height",ellipsoidal:"ellipsoidal"}),w=g.jsonValues.slice();Object(b.g)(w,"orthometric");var S=Object(d.b)()({meter:"meters",foot:"feet","us-foot":"us-feet","clarke-foot":"clarke-feet","clarke-yard":"clarke-yards","clarke-link":"clarke-links","sears-yard":"sears-yards","sears-foot":"sears-feet","sears-chain":"sears-chains","benoit-1895-b-chain":"benoit-1895-b-chains","indian-yard":"indian-yards","indian-1937-yard":"indian-1937-yards","gold-coast-foot":"gold-coast-feet","sears-1922-truncated-chain":"sears-1922-truncated-chains","50-kilometers":"50-kilometers","150-kilometers":"150-kilometers"}),x=n=function(e){Object(u.a)(r,e);var t=Object(l.a)(r);function r(e){var n;return Object(i.a)(this,r),(n=t.call(this,e)).heightModel="gravity-related-height",n.heightUnit="meters",n.vertCRS=null,n}return Object(o.a)(r,[{key:"writeHeightModel",value:function(e,t,r){return g.write(e,t,r)}},{key:"readHeightModel",value:function(e,t,r){return g.read(e)||(r&&r.messages&&r.messages.push(function(e,t){return new h.a("height-model:unsupported","Height model of value '".concat(e,"' is not supported"),t)}(e,{context:r})),null)}},{key:"readHeightUnit",value:function(e,t,r){return S.read(e)||(r&&r.messages&&r.messages.push(k(e,{context:r})),null)}},{key:"readHeightUnitService",value:function(e,t,r){return Object(f.k)(e)||S.read(e)||(r&&r.messages&&r.messages.push(k(e,{context:r})),null)}},{key:"readVertCRS",value:function(e,t){return t.vertCRS||t.ellipsoid||t.geoid}},{key:"clone",value:function(){return new n({heightModel:this.heightModel,heightUnit:this.heightUnit,vertCRS:this.vertCRS})}},{key:"equals",value:function(e){return!!e&&(this===e||this.heightModel===e.heightModel&&this.heightUnit===e.heightUnit&&this.vertCRS===e.vertCRS)}},{key:"write",value:function(e,t){return t=Object(a.a)({origin:"web-scene"},t),Object(s.a)(Object(c.a)(r.prototype),"write",this).call(this,e,t)}}],[{key:"deriveUnitFromSR",value:function(e,t){var r=Object(f.g)(t);return new n({heightModel:e.heightModel,heightUnit:r,vertCRS:e.vertCRS})}},{key:"fromJSON",value:function(e){if(!e)return null;var t=new n;return t.read(e,{origin:"web-scene"}),t}}]),r}(y.a);function k(e,t){return new h.a("height-unit:unsupported","Height unit of value '".concat(e,"' is not supported"),t)}Object(p.a)([Object(j.b)({type:g.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:w,default:"ellipsoidal"}}}})],x.prototype,"heightModel",void 0),Object(p.a)([Object(m.a)("web-scene","heightModel")],x.prototype,"writeHeightModel",null),Object(p.a)([Object(v.a)(["web-scene","service"],"heightModel")],x.prototype,"readHeightModel",null),Object(p.a)([Object(j.b)({type:S.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:S.jsonValues,write:S.write}}}})],x.prototype,"heightUnit",void 0),Object(p.a)([Object(v.a)("web-scene","heightUnit")],x.prototype,"readHeightUnit",null),Object(p.a)([Object(v.a)("service","heightUnit")],x.prototype,"readHeightUnitService",null),Object(p.a)([Object(j.b)({type:String,constructOnly:!0,json:{origins:{"web-scene":{write:!0}}}})],x.prototype,"vertCRS",void 0),Object(p.a)([Object(v.a)("service","vertCRS",["vertCRS","ellipsoid","geoid"])],x.prototype,"readVertCRS",null);var I=x=n=Object(p.a)([Object(O.a)("esri.geometry.HeightModelInfo")],x)},744:function(e,t,r){"use strict";r.d(t,"a",(function(){return u}));var n=r(7),a=r.n(n),i=r(12),o=r(295),s=r(30),c=r(165);function u(e,t,r){return l.apply(this,arguments)}function l(){return l=Object(i.a)(a.a.mark((function e(t,r,n){var i,u,l;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=t&&t.getAtOrigin&&t.getAtOrigin("renderer",r.origin))||"unique-value"!==i.type||!i.styleOrigin){e.next=6;break}return e.next=4,Object(o.c)(i.populateFromStyle());case 4:u=e.sent,Object(s.v)(n),!1===u.ok&&(l=u.error,r&&r.messages&&r.messages.push(new c.a("renderer:style-reference","Failed to create unique value renderer from style reference: ".concat(l.message),{error:l,context:r})),t.clear("renderer",r.origin));case 6:case"end":return e.stop()}}),e)}))),l.apply(this,arguments)}},745:function(e,t,r){"use strict";r.d(t,"a",(function(){return y}));var n,a=r(2),i=r(4),o=r(5),s=r(6),c=r(0),u=r(52),l=r(26),p=r(1),b=(r(19),r(14),r(15),r(10)),d=n=function(e){Object(o.a)(r,e);var t=Object(s.a)(r);function r(e){var n;return Object(a.a)(this,r),(n=t.call(this,e)).floorField=null,n.viewAllMode=!1,n.viewAllLevelIds=new u.a,n}return Object(i.a)(r,[{key:"clone",value:function(){return new n({floorField:this.floorField,viewAllMode:this.viewAllMode,viewAllLevelIds:this.viewAllLevelIds})}}]),r}(l.a);Object(c.a)([Object(p.b)({type:String,json:{write:!0}})],d.prototype,"floorField",void 0),Object(c.a)([Object(p.b)({json:{read:!1,write:!1}})],d.prototype,"viewAllMode",void 0),Object(c.a)([Object(p.b)({json:{read:!1,write:!1}})],d.prototype,"viewAllLevelIds",void 0);var y=d=n=Object(c.a)([Object(b.a)("esri.layers.support.LayerFloorInfo")],d)},746:function(e,t,r){"use strict";r.d(t,"a",(function(){return M})),r.d(t,"b",(function(){return R})),r.d(t,"c",(function(){return _})),r.d(t,"d",(function(){return P}));var n,a=r(29),i=r(66),o=r(705),s=r(2),c=r(4),u=r(5),l=r(6),p=r(0),b=r(214),d=r(332),y=r(26),f=r(18),h=r(44),j=r(1),v=(r(14),r(19),r(15),r(10)),O=n=function(e){Object(u.a)(r,e);var t=Object(l.a)(r);function r(){var e;return Object(s.a)(this,r),(e=t.apply(this,arguments)).statisticType=null,e.onStatisticField=null,e.onStatisticValueExpression=null,e}return Object(c.a)(r,[{key:"clone",value:function(){return new n({statisticType:this.statisticType,onStatisticField:this.onStatisticField,onStatisticValueExpression:this.onStatisticValueExpression})}}]),r}(y.a);Object(p.a)([Object(j.b)({type:String,json:{write:!0}})],O.prototype,"statisticType",void 0),Object(p.a)([Object(j.b)({type:String,json:{write:!0}})],O.prototype,"onStatisticField",void 0),Object(p.a)([Object(j.b)({type:String,json:{write:!0}})],O.prototype,"onStatisticValueExpression",void 0);var m,g=O=n=Object(p.a)([Object(v.a)("esri.layers.support.OutStatistic")],O),w=m=function(e){Object(u.a)(r,e);var t=Object(l.a)(r);function r(){var e;return Object(s.a)(this,r),(e=t.apply(this,arguments)).name=null,e}return Object(c.a)(r,[{key:"clone",value:function(){return new m({name:this.name,outStatistic:this.outStatistic.clone()})}}]),r}(y.a);Object(p.a)([Object(j.b)({type:String,json:{write:!0}})],w.prototype,"name",void 0),Object(p.a)([Object(j.b)({type:g,json:{write:!0}})],w.prototype,"outStatistic",void 0);var S,x=w=m=Object(p.a)([Object(v.a)("esri.layers.support.AggregateField")],w),k=r(671),I=r(675),F=S=function(e){Object(u.a)(r,e);var t=Object(l.a)(r);function r(e){var n;return Object(s.a)(this,r),(n=t.call(this,e)).type="cluster",n.clusterRadius=Object(h.d)("80px"),n.clusterMinSize=Object(h.d)("12px"),n.clusterMaxSize=Object(h.d)("50px"),n.popupEnabled=!0,n.popupTemplate=null,n.symbol=null,n.labelingInfo=null,n.labelsVisible=!0,n.fields=null,n}return Object(c.a)(r,[{key:"clone",value:function(){return new S({clusterRadius:this.clusterRadius,clusterMinSize:this.clusterMinSize,clusterMaxSize:this.clusterMaxSize,labelingInfo:Object(f.a)(this.labelingInfo),labelsVisible:this.labelsVisible,fields:Object(f.a)(this.fields),popupEnabled:this.popupEnabled,popupTemplate:Object(f.a)(this.popupTemplate)})}}]),r}(y.a);Object(p.a)([Object(j.b)({type:["cluster"],readOnly:!0,json:{write:!0}})],F.prototype,"type",void 0),Object(p.a)([Object(j.b)({type:Number,cast:function(e){return"auto"===e?e:Object(h.d)(e)},json:{write:!0}})],F.prototype,"clusterRadius",void 0),Object(p.a)([Object(j.b)({type:Number,cast:h.d,json:{write:!0}})],F.prototype,"clusterMinSize",void 0),Object(p.a)([Object(j.b)({type:Number,cast:h.d,json:{write:!0}})],F.prototype,"clusterMaxSize",void 0),Object(p.a)([Object(j.b)(k.j)],F.prototype,"popupEnabled",void 0),Object(p.a)([Object(j.b)({type:b.a,json:{read:{source:"popupInfo"},write:{target:"popupInfo"}}})],F.prototype,"popupTemplate",void 0),Object(p.a)([Object(j.b)({types:d.f})],F.prototype,"symbol",void 0),Object(p.a)([Object(j.b)({type:[I.a],json:{read:{source:"drawingInfo.labelingInfo"},write:{target:"drawingInfo.labelingInfo"}}})],F.prototype,"labelingInfo",void 0),Object(p.a)([Object(j.b)(k.d)],F.prototype,"labelsVisible",void 0),Object(p.a)([Object(j.b)({type:[x],json:{write:!0}})],F.prototype,"fields",void 0);var T=F=S=Object(p.a)([Object(v.a)("esri.layers.support.FeatureReductionCluster")],F),E=r(739),_={key:"type",base:o.a,typeMap:{selection:E.a}};function R(e,t){var r=(t=t.layerDefinition||t).featureReduction;if(r)switch(r.type){case"selection":return E.a.fromJSON(r);case"cluster":return T.fromJSON(r)}return null}function P(e,t,r,n){var o=function(e,t,r){return e?"selection"!==e.type?(r.messages&&r.messages.push(new a.a("featureReduction:unsupported","FeatureReduction of type '".concat(e.declaredClass,"' are not supported in scenes."),{featureReduction:e,context:r})),null):e.write(t,r):null}(e,{},n);o&&Object(i.c)(r,o,t)}var M={types:{key:"type",base:o.a,typeMap:{selection:E.a,cluster:T}},json:{write:{target:"layerDefinition.featureReduction",allowNull:!0}}}},747:function(e,t,r){"use strict";r.d(t,"a",(function(){return h}));var n,a=r(2),i=r(4),o=r(5),s=r(6),c=r(0),u=r(26),l=r(18),p=r(1),b=r(14),d=(r(19),r(15),r(10)),y=r(43),f=n=function(e){Object(o.a)(r,e);var t=Object(s.a)(r);function r(e){var n;return Object(a.a)(this,r),(n=t.call(this,e)).attachmentTypes=null,n.attachmentsWhere=null,n.keywords=null,n.globalIds=null,n.name=null,n.num=null,n.objectIds=null,n.returnMetadata=!1,n.size=null,n.start=null,n.where=null,n}return Object(i.a)(r,[{key:"writeStart",value:function(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10}},{key:"clone",value:function(){return new n(Object(l.a)({attachmentTypes:this.attachmentTypes,attachmentsWhere:this.attachmentsWhere,keywords:this.keywords,where:this.where,globalIds:this.globalIds,name:this.name,num:this.num,objectIds:this.objectIds,returnMetadata:this.returnMetadata,size:this.size,start:this.start}))}}]),r}(u.a);Object(c.a)([Object(p.b)({type:[String],json:{write:!0}})],f.prototype,"attachmentTypes",void 0),Object(c.a)([Object(p.b)({type:String,json:{read:{source:"attachmentsDefinitionExpression"},write:{target:"attachmentsDefinitionExpression"}}})],f.prototype,"attachmentsWhere",void 0),Object(c.a)([Object(p.b)({type:[String],json:{write:!0}})],f.prototype,"keywords",void 0),Object(c.a)([Object(p.b)({type:[Number],json:{write:!0}})],f.prototype,"globalIds",void 0),Object(c.a)([Object(p.b)({json:{write:!0}})],f.prototype,"name",void 0),Object(c.a)([Object(p.b)({type:Number,json:{read:{source:"resultRecordCount"}}})],f.prototype,"num",void 0),Object(c.a)([Object(p.b)({type:[Number],json:{write:!0}})],f.prototype,"objectIds",void 0),Object(c.a)([Object(p.b)({type:Boolean,json:{default:!1,write:!0}})],f.prototype,"returnMetadata",void 0),Object(c.a)([Object(p.b)({type:[Number],json:{write:!0}})],f.prototype,"size",void 0),Object(c.a)([Object(p.b)({type:Number,json:{read:{source:"resultOffset"}}})],f.prototype,"start",void 0),Object(c.a)([Object(y.a)("start"),Object(y.a)("num")],f.prototype,"writeStart",null),Object(c.a)([Object(p.b)({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],f.prototype,"where",void 0),(f=n=Object(c.a)([Object(d.a)("esri.rest.support.AttachmentQuery")],f)).from=Object(b.m)(f);var h=f},751:function(e,t,r){"use strict";r.d(t,"a",(function(){return x})),r.d(t,"b",(function(){return h})),r.d(t,"c",(function(){return j})),r.d(t,"d",(function(){return v})),r.d(t,"e",(function(){return O})),r.d(t,"f",(function(){return w})),r.d(t,"g",(function(){return f}));var n=r(21),a=r(22),i=r(46),o=r(210),s=r(694),c=r(15),u=r(11),l=r(683),p=r(704),b=c.a.getLogger("esri.renderers.visualVariables.support.visualVariableUtils"),d=new o.a,y=Math.PI,f=/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i;function h(e,t,r){var n="visualVariables"in e&&e.visualVariables?e.visualVariables.filter((function(e){return"color"===e.type}))[0]:e;if(n)if("esri.renderers.visualVariables.ColorVariable"===n.declaredClass){var a="number"==typeof t,o=a?null:t,s=o&&o.attributes,c=a?t:null,l=n.field,p=n.cache,d=p.ipData,y=p.hasExpression,f=n.cache.compiledFunc;if(!l&&!y){var h=n.stops;return h&&h[0]&&h[0].color}if("number"!=typeof c)if(y){if(!Object(u.j)(r)||!Object(u.j)(r.arcade))return void b.error("Use of arcade expressions requires an arcade context");var j={viewingMode:r.viewingMode,scale:r.scale,spatialReference:r.spatialReference},v=r.arcade.arcadeUtils,O=v.getViewInfo(j),m=v.createExecContext(o,O);if(!f){var g=v.createSyntaxTree(n.valueExpression);f=v.createFunction(g),n.cache.compiledFunc=f}c=v.executeFunction(f,m)}else s&&(c=s[l]);var w=n.normalizationField,x=s?parseFloat(s[w]):void 0;if(null!=c&&(!w||a||!isNaN(x)&&0!==x)){isNaN(x)||a||(c/=x);var k=S(c,d);if(k){var I=k[0],F=k[1],T=I===F?n.stops[I].color:i.a.blendColors(n.stops[I].color,n.stops[F].color,k[2],Object(u.j)(r)?r.color:void 0);return new i.a(T)}}}else b.warn("The visualVariable should be an instance of esri.renderers.visualVariables.ColorVariable")}function j(e,t,r){var n="visualVariables"in e&&e.visualVariables?e.visualVariables.filter((function(e){return"opacity"===e.type}))[0]:e;if(n)if("esri.renderers.visualVariables.OpacityVariable"===n.declaredClass){var a="number"==typeof t,i=a?null:t,o=i&&i.attributes,s=a?t:null,c=n.field,l=n.cache,p=l.ipData,d=l.hasExpression,y=n.cache.compiledFunc;if(!c&&!d){var f=n.stops;return f&&f[0]&&f[0].opacity}if("number"!=typeof s)if(d){if(Object(u.i)(r)||Object(u.i)(r.arcade))return void b.error("Use of arcade expressions requires an arcade context");var h={viewingMode:r.viewingMode,scale:r.scale,spatialReference:r.spatialReference},j=r.arcade.arcadeUtils,v=j.getViewInfo(h),O=j.createExecContext(i,v);if(!y){var m=j.createSyntaxTree(n.valueExpression);y=j.createFunction(m),n.cache.compiledFunc=y}s=j.executeFunction(y,O)}else o&&(s=o[c]);var g=n.normalizationField,w=o?parseFloat(o[g]):void 0;if(null!=s&&(!g||a||!isNaN(w)&&0!==w)){isNaN(w)||a||(s/=w);var x=S(s,p);if(x){var k=x[0],I=x[1];if(k===I)return n.stops[k].opacity;var F=n.stops[k].opacity;return F+(n.stops[I].opacity-F)*x[2]}}}else b.warn("The visualVariable should be an instance of esri.renderers.visualVariables.OpacityVariable")}function v(e,t,r){var n="visualVariables"in e&&e.visualVariables?e.visualVariables.filter((function(e){return"rotation"===e.type}))[0]:e;if(n){if("esri.renderers.visualVariables.RotationVariable"===n.declaredClass){var a=n.axis||"heading",i="heading"===a&&"arithmetic"===n.rotationType?90:0,o="heading"===a&&"arithmetic"===n.rotationType?-1:1,s="number"==typeof t?null:t,c=s&&s.attributes,l=n.field,p=n.cache.hasExpression,d=n.cache.compiledFunc,y=0;if(!l&&!p)return y;if(p){if(Object(u.i)(r)||Object(u.i)(r.arcade))return void b.error("Use of arcade expressions requires an arcade context");var f={viewingMode:r.viewingMode,scale:r.scale,spatialReference:r.spatialReference},h=r.arcade.arcadeUtils,j=h.getViewInfo(f),v=h.createExecContext(s,j);if(!d){var O=h.createSyntaxTree(n.valueExpression);d=h.createFunction(O),n.cache.compiledFunc=d}y=h.executeFunction(d,v)}else c&&(y=c[l]||0);return y="number"!=typeof y||isNaN(y)?null:i+o*y}b.warn("The visualVariable should be an instance of esri.renderers.visualVariables.RotationVariable")}}function O(e,t,r){var n="visualVariables"in e&&e.visualVariables?e.visualVariables.filter((function(e){return"size"===e.type}))[0]:e;if(n){if("esri.renderers.visualVariables.SizeVariable"===n.declaredClass){var i=function(e,t,r,n,i){switch(t.transformationType){case"additive":return function(e,t,r,n){return e+(m(t.minSize,r,n)||t.minDataValue)}(e,t,r,n);case"constant":return function(e,t,r){var n=e.stops,a=n&&n.length&&n[0].size;return null==a&&(a=e.minSize),m(a,t,r)}(t,r,n);case"clamped-linear":return function(e,t,r,n){var a=(e-t.minDataValue)/(t.maxDataValue-t.minDataValue),i=m(t.minSize,r,n),o=m(t.maxSize,r,n),s=Object(u.j)(n)?n.shape:void 0;if(e<=t.minDataValue)return i;if(e>=t.maxDataValue)return o;if("area"===t.scaleBy&&s){var c="circle"===s,l=c?y*Math.pow(i/2,2):i*i,p=l+a*((c?y*Math.pow(o/2,2):o*o)-l);return c?2*Math.sqrt(p/y):Math.sqrt(p)}return i+a*(o-i)}(e,t,r,n);case"proportional":return function(e,t,r,n){var a=Object(u.j)(n)?n.shape:void 0,i=e/t.minDataValue,o=m(t.minSize,r,n),s=m(t.maxSize,r,n);return g("circle"===a?2*Math.sqrt(i*Math.pow(o/2,2)):"square"===a||"diamond"===a||"image"===a?Math.sqrt(i*Math.pow(o,2)):i*o,o,s)}(e,t,r,n);case"stops":return function(e,t,r,n,i){var o=S(e,i),s=Object(a.a)(o,3),c=s[0],u=s[1],l=s[2];if(c===u)return m(t.stops[c].size,r,n);var p=m(t.stops[c].size,r,n);return p+(m(t.stops[u].size,r,n)-p)*l}(e,t,r,n,i);case"real-world-size":return function(e,t,r,n){var a=(Object(u.j)(n)&&n.resolution?n.resolution:1)*l.a[t.valueUnit],i=m(t.minSize,r,n),o=m(t.maxSize,r,n),s=t.valueRepresentation;return g("area"===s?2*Math.sqrt(e/y)/a:"radius"===s||"distance"===s?2*e/a:e/a,i,o)}(e,t,r,n);case"identity":return e;case"unknown":return null}}(function(e,t,r){var n="number"==typeof t,a=n?null:t,i=a&&a.attributes,o=n?t:null,s=e.cache.isScaleDriven,c=e.cache.compiledFunc;if(s){var l=Object(u.j)(r)?r.scale:void 0,d=Object(u.j)(r)?r.view:void 0;o=null==l||"3d"===d?function(e){var t=null,r=null,n=e.stops;return n?(t=n[0].value,r=n[n.length-1].value):(t=e.minDataValue||0,r=e.maxDataValue||0),(t+r)/2}(e):l}else if(!n)switch(e.inputValueType){case"expression":if(Object(u.i)(r)||Object(u.i)(r.arcade))return void b.error("Use of arcade expressions requires an arcade context");var y={viewingMode:r.viewingMode,scale:r.scale,spatialReference:r.spatialReference},f=r.arcade.arcadeUtils,h=f.getViewInfo(y),j=f.createExecContext(a,h);if(!c){var v=f.createSyntaxTree(e.valueExpression);c=f.createFunction(v),e.cache.compiledFunc=c}o=f.executeFunction(c,j);break;case"field":i&&(o=i[e.field]);break;case"unknown":o=null}if(!Object(p.d)(o))return null;if(n||!e.normalizationField)return o;var O=i?parseFloat(i[e.normalizationField]):null;return Object(p.d)(O)&&0!==O?o/O:null}(n,t,r),n,t,r,n.cache.ipData);return null==i||isNaN(i)?0:i}b.warn("The visualVariable should be an instance of esri.renderers.visualVariables.SizeVariable")}}function m(e,t,r){return null==e?null:Object(p.c)(e)?O(e,t,r):Object(p.d)(e)?e:null}function g(e,t,r){return Object(p.d)(r)&&e>r?r:Object(p.d)(t)&&e<t?t:e}function w(e,t,r){if(!(e.cache.isScaleDriven&&"3d"===r||t))return null;var n={scale:t,view:r},a=m(e.minSize,d,n),i=m(e.maxSize,d,n);if(null!=a||null!=i){if(a>i){var o=i;i=a,a=o}return{minSize:a,maxSize:i}}}function S(e,t){if(t){var r=0,n=t.length-1;return t.some((function(t,a){return e<t?(n=a,!0):(r=a,!1)})),[r,n,(e-t[r])/(t[n]-t[r])]}}function x(e,t,r){var a,i=["proportional","proportional","proportional"],o=Object(n.a)(e);try{for(o.s();!(a=o.n()).done;){var c=a.value,u=c.useSymbolValue?"symbol-value":O(c,t,r);switch(c.axis){case"width":i[0]=u;break;case"depth":i[1]=u;break;case"height":i[2]=u;break;case"width-and-depth":i[0]=u,i[1]=u;break;case"all":case void 0:case null:i[0]=u,i[1]=u,i[2]=u;break;default:Object(s.a)(c.axis)}}}catch(l){o.e(l)}finally{o.f()}return i}},756:function(e,t,r){"use strict";r.d(t,"a",(function(){return O}));var n,a=r(2),i=r(5),o=r(6),s=r(0),c=r(66),u=r(1),l=(r(19),r(14),r(15),r(10)),p=r(4),b=r(42),d=r(26),y=new b.a({asc:"ascending",desc:"descending"}),f=n=function(e){Object(i.a)(r,e);var t=Object(o.a)(r);function r(){var e;return Object(a.a)(this,r),(e=t.apply(this,arguments)).field=null,e.valueExpression=null,e.order="ascending",e}return Object(p.a)(r,[{key:"clone",value:function(){return new n({field:this.field,valueExpression:this.valueExpression,order:this.order})}}]),r}(d.a);Object(s.a)([Object(u.b)({type:String,json:{write:!0}})],f.prototype,"field",void 0),Object(s.a)([Object(u.b)({type:String,json:{write:!0}})],f.prototype,"valueExpression",void 0),Object(s.a)([Object(u.b)({type:y.apiValues,json:{read:y.read,write:y.write}})],f.prototype,"order",void 0);var h=f=n=Object(s.a)([Object(l.a)("esri.layers.support.OrderByInfo")],f);function j(e,t,r){if(!e)return null;var n=e.find((function(e){return!!e.field}));if(!n)return null;var a=new h;return a.read(n,r),[a]}function v(e,t,r,n){var a=e.find((function(e){return!!e.field}));a&&Object(c.c)(r,[a.toJSON()],t)}var O=function(e){var t=function(e){Object(i.a)(r,e);var t=Object(o.a)(r);function r(){var e;return Object(a.a)(this,r),(e=t.apply(this,arguments)).orderBy=null,e}return r}(e);return Object(s.a)([Object(u.b)({type:[h],json:{origins:{"web-scene":{write:!1,read:!1}},read:{source:"layerDefinition.orderBy",reader:j},write:{target:"layerDefinition.orderBy",writer:v}}})],t.prototype,"orderBy",void 0),t=Object(s.a)([Object(l.a)("esri.layers.mixins.OrderedLayer")],t)}},858:function(e,t,r){"use strict";r.r(t),r.d(t,"addOrUpdateResource",(function(){return d})),r.d(t,"contentToBlob",(function(){return g})),r.d(t,"fetchResources",(function(){return p})),r.d(t,"getSiblingOfSameType",(function(){return S})),r.d(t,"getSiblingOfSameTypeI",(function(){return x})),r.d(t,"removeAllResources",(function(){return j})),r.d(t,"removeResource",(function(){return f})),r.d(t,"splitPrefixFileNameAndExtension",(function(){return m}));var n=r(7),a=r.n(n),i=r(22),o=r(12),s=r(82),c=r(29),u=r(11),l=r(27);function p(e){return b.apply(this,arguments)}function b(){return b=Object(o.a)(a.a.mark((function e(t){var r,n,i,o,s,c,p,b,d,y,f,h,j=arguments;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=j.length>1&&void 0!==j[1]?j[1]:{},n=j.length>2?j[2]:void 0,e.next=4,t.load(n);case 4:return i=Object(l.y)(t.itemUrl,"resources"),o=r.start,s=void 0===o?1:o,c=r.num,p=void 0===c?10:c,b=r.sortOrder,d=void 0===b?"asc":b,y=r.sortField,f={query:{start:s,num:p,sortOrder:d,sortField:void 0===y?"created":y,token:t.apiKey},signal:Object(u.h)(n,"signal")},e.next=16,t.portal._request(i,f);case 16:return h=e.sent,e.abrupt("return",{total:h.total,nextStart:h.nextStart,resources:h.resources.map((function(e){var r=e.created,n=e.size,a=e.resource;return{created:new Date(r),size:n,resource:t.resourceFromPath(a)}}))});case 18:case"end":return e.stop()}}),e)}))),b.apply(this,arguments)}function d(e,t,r,n){return y.apply(this,arguments)}function y(){return y=Object(o.a)(a.a.mark((function e(t,r,n,o){var s,p,b,d,y,f,h,j;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.hasPath()){e.next=2;break}throw new c.a("portal-item-resource-".concat(r,":invalid-path"),"Resource does not have a valid path");case 2:return s=t.portalItem,e.next=5,s.load(o);case 5:return p=Object(l.y)(s.userItemUrl,"add"===r?"addResources":"updateResources"),b=O(t.path),d=Object(i.a)(b,2),y=d[0],f=d[1],e.next=12,g(n);case 12:return h=e.sent,j=new FormData,y&&"."!==y&&j.append("resourcesPrefix",y),j.append("fileName",f),j.append("file",h,f),j.append("f","json"),Object(u.j)(o)&&o.access&&j.append("access",o.access),e.next=21,s.portal._request(p,{method:"post",body:j,signal:Object(u.h)(o,"signal")});case 21:return e.abrupt("return",t);case 22:case"end":return e.stop()}}),e)}))),y.apply(this,arguments)}function f(e,t,r){return h.apply(this,arguments)}function h(){return(h=Object(o.a)(a.a.mark((function e(t,r,n){var i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.hasPath()){e.next=2;break}throw new c.a("portal-item-resources-remove:invalid-path","Resource does not have a valid path");case 2:return e.next=4,t.load(n);case 4:return i=Object(l.y)(t.userItemUrl,"removeResources"),e.next=7,t.portal._request(i,{method:"post",query:{resource:r.path},signal:Object(u.h)(n,"signal")});case 7:r.portalItem=null;case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function j(e,t){return v.apply(this,arguments)}function v(){return(v=Object(o.a)(a.a.mark((function e(t,r){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.load(r);case 2:return n=Object(l.y)(t.userItemUrl,"removeResources"),e.abrupt("return",t.portal._request(n,{method:"post",query:{deleteAll:!0},signal:Object(u.h)(r,"signal")}));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(e){var t=e.lastIndexOf("/");return-1===t?[".",e]:[e.slice(0,t),e.slice(t+1)]}function m(e){var t=function(e){var t=Object(l.n)(e);return Object(u.i)(t)?[e,""]:[e.slice(0,e.length-t.length-1),".".concat(t)]}(e),r=Object(i.a)(t,2),n=r[0],a=r[1],o=O(n),s=Object(i.a)(o,2);return[s[0],s[1],a]}function g(e){return w.apply(this,arguments)}function w(){return(w=Object(o.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t instanceof Blob)){e.next=2;break}return e.abrupt("return",t);case 2:return e.next=4,Object(s.default)(t.url,{responseType:"blob"});case 4:return e.abrupt("return",e.sent.data);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(e,t){if(!e.hasPath())return null;var r=m(e.path),n=Object(i.a)(r,3),a=n[0],o=n[2];return e.portalItem.resourceFromPath(Object(l.y)(a,t+o))}function x(e,t){if(!e.hasPath())return null;var r=m(e.path),n=Object(i.a)(r,3),a=n[0],o=n[2];return e.portalItem.resourceFromPath(Object(l.y)(a,t+o))}},868:function(e,t,r){"use strict";r.d(t,"a",(function(){return u}));var n=r(7),a=r.n(n),i=r(12),o=r(82),s=r(29),c=r(11);function u(e,t,r,n,a,i){return l.apply(this,arguments)}function l(){return l=Object(i.a)(a.a.mark((function e(t,r,n,i,u,l){var p,b,d,y,f;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(p=null,!Object(c.j)(n)){e.next=17;break}return b="".concat(t,"/nodepages/"),d=b+Math.floor(n.rootIndex/n.nodesPerPage),e.prev=3,e.next=6,Object(o.default)(d,{query:{f:"json",token:i},responseType:"json",signal:l});case 6:return e.t0=e.sent.data,e.t1=n.rootIndex,e.t2=n.nodesPerPage,e.t3=n.lodSelectionMetricType,e.t4=b,e.abrupt("return",{type:"page",rootPage:e.t0,rootIndex:e.t1,pageSize:e.t2,lodMetric:e.t3,urlPrefix:e.t4});case 14:e.prev=14,e.t5=e.catch(3),Object(c.j)(u)&&u.warn("#fetchIndexInfo()","Failed to load root node page. Falling back to node documents.",d,e.t5),p=e.t5;case 17:if(r){e.next=19;break}return e.abrupt("return",null);case 19:return y="".concat(t,"/nodes/"),f=y+(r&&r.split("/").pop()),e.prev=20,e.next=23,Object(o.default)(f,{query:{f:"json",token:i},responseType:"json",signal:l});case 23:return e.t6=e.sent.data,e.t7=y,e.abrupt("return",{type:"node",rootNode:e.t6,urlPrefix:e.t7});case 28:throw e.prev=28,e.t8=e.catch(20),new s.a("sceneservice:root-node-missing","Root node missing.",{pageError:p,nodeError:e.t8,url:f});case 31:case"end":return e.stop()}}),e,null,[[3,14],[20,28]])}))),l.apply(this,arguments)}},869:function(e,t,r){"use strict";function n(e){return e&&"getAtOrigin"in e&&"originOf"in e}r.d(t,"a",(function(){return n}))},879:function(e,t,r){"use strict";r.d(t,"a",(function(){return J}));var n=r(21),a=r(13),i=r(7),o=r.n(i),s=r(12),c=r(2),u=r(4),l=r(5),p=r(6),b=r(0),d=r(82),y=r(29),f=(r(19),r(15)),h=r(11),j=r(30),v=r(27),O=r(1),m=(r(14),r(57)),g=r(10),w=r(43),S=r(869);function x(e){e&&e.writtenProperties&&e.writtenProperties.forEach((function(e){var t=e.target;e.newOrigin&&e.oldOrigin!==e.newOrigin&&Object(S.a)(t)&&t.updateOrigin(e.propName,e.newOrigin)}))}var k=r(58),I=r(742),F=r(45),T=r(676),E=r(671),_=r(868),R=r(85),P=r(334),M=r(295),C=r(343),N=r(858);function L(e,t,r){return D.apply(this,arguments)}function D(){return(D=Object(s.a)(o.a.mark((function e(t,r,a){var i,s,c,u,l,p,b,d,f,h,v,O,m,g,w,S,x;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r&&r.resources){e.next=2;break}return e.abrupt("return");case 2:i=r.portalItem===t.portalItem?new Set(t.paths):new Set,t.paths.length=0,t.portalItem=r.portalItem,s=new Set(r.resources.toKeep.map((function(e){return e.resource.path}))),c=new Set,u=[],s.forEach((function(e){i.delete(e),t.paths.push(e)})),l=Object(n.a)(r.resources.toUpdate);try{for(l.s();!(p=l.n()).done;)b=p.value,i.delete(b.resource.path),s.has(b.resource.path)||c.has(b.resource.path)?(d=b.resource,f=b.content,h=b.finish,v=b.error,O=Object(N.getSiblingOfSameTypeI)(d,Object(C.a)()),t.paths.push(O.path),u.push(A({resource:O,content:f,finish:h,error:v},a))):(t.paths.push(b.resource.path),u.push(q(b,a)),c.add(b.resource.path))}catch(o){l.e(o)}finally{l.f()}m=Object(n.a)(r.resources.toAdd);try{for(m.s();!(g=m.n()).done;)w=g.value,u.push(A(w,a)),t.paths.push(w.resource.path)}catch(o){m.e(o)}finally{m.f()}if(i.forEach((function(e){var t=r.portalItem.resourceFromPath(e);u.push(t.portalItem.removeResource(t).catch((function(){})))})),0!==u.length){e.next=12;break}return e.abrupt("return");case 12:return e.next=14,Object(j.j)(u);case 14:if(S=e.sent,Object(j.v)(a),x=S.filter((function(e){return"error"in e})).map((function(e){return e.error})),!(x.length>0)){e.next=19;break}throw new y.a("save:resources","Failed to save one or more resources",{errors:x});case 19:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A(e,t){return V.apply(this,arguments)}function V(){return(V=Object(s.a)(o.a.mark((function e(t,r){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(M.c)(t.resource.portalItem.addResource(t.resource,t.content,r));case 2:if(!0===(n=e.sent).ok){e.next=5;break}throw t.error&&t.error(n.error),n.error;case 5:t.finish&&t.finish(t.resource);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function q(e,t){return U.apply(this,arguments)}function U(){return(U=Object(s.a)(o.a.mark((function e(t,r){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(M.c)(t.resource.update(t.content,r));case 2:if(!0===(n=e.sent).ok){e.next=5;break}throw t.error(n.error),n.error;case 5:t.finish(t.resource);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var B=f.a.getLogger("esri.layers.mixins.SceneService"),J=function(e){var t=function(e){Object(l.a)(i,e);var t=Object(p.a)(i);function i(){var e;return Object(c.a)(this,i),(e=t.apply(this,arguments)).spatialReference=null,e.fullExtent=null,e.heightModelInfo=null,e.minScale=0,e.maxScale=0,e.version={major:Number.NaN,minor:Number.NaN,versionString:""},e.copyright=null,e.sublayerTitleMode="item-title",e.title=null,e.layerId=null,e.indexInfo=null,e._debouncedSaveOperations=Object(j.i)(function(){var t=Object(s.a)(o.a.mark((function t(r,n,a){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.t0=r,t.next=0===t.t0?3:1===t.t0?4:5;break;case 3:return t.abrupt("return",e._save(n));case 4:return t.abrupt("return",e._saveAs(a,n));case 5:case"end":return t.stop()}}),t)})));return function(e,r,n){return t.apply(this,arguments)}}()),e}return Object(u.a)(i,[{key:"readSpatialReference",value:function(e,t){return this._readSpatialReference(t)}},{key:"_readSpatialReference",value:function(e){if(null!=e.spatialReference)return F.a.fromJSON(e.spatialReference);var t=e.store,r=t.indexCRS||t.geographicCRS,n=r&&parseInt(r.substring(r.lastIndexOf("/")+1,r.length),10);return null!=n?new F.a(n):null}},{key:"readFullExtent",value:function(e,t,r){if(null!=e&&"object"==typeof e){var n=null==e.spatialReference?Object(a.a)(Object(a.a)({},e),{},{spatialReference:this._readSpatialReference(t)}):e;return k.a.fromJSON(n,r)}var i=t.store,o=this._readSpatialReference(t);return null==o||null==i||null==i.extent||!Array.isArray(i.extent)||i.extent.some((function(e){return e<z}))?null:new k.a({xmin:i.extent[0],ymin:i.extent[1],xmax:i.extent[2],ymax:i.extent[3],spatialReference:o})}},{key:"readVersion",value:function(e,t){var r=t.store,n=null!=r.version?r.version.toString():"",a={major:Number.NaN,minor:Number.NaN,versionString:n},i=n.split(".");return i.length>=2&&(a.major=parseInt(i[0],10),a.minor=parseInt(i[1],10)),a}},{key:"readTitlePortalItem",value:function(e){return"item-title"!==this.sublayerTitleMode?void 0:e}},{key:"readTitleService",value:function(e,t){var r=this.portalItem&&this.portalItem.title;if("item-title"===this.sublayerTitleMode)return Object(T.i)(this.url,t.name);var n=t.name;if(!n&&this.url){var a=Object(T.e)(this.url);Object(h.j)(a)&&(n=a.title)}return"item-title-and-service-name"===this.sublayerTitleMode&&r&&(n=r+" - "+n),Object(T.a)(n)}},{key:"url",set:function(e){var t=Object(T.h)({layer:this,url:e,nonStandardUrlAllowed:!1,logger:B});this._set("url",t.url),null!=t.layerId&&this._set("layerId",t.layerId)}},{key:"writeUrl",value:function(e,t,r,n){Object(T.j)(this,e,"layers",t,n)}},{key:"parsedUrl",get:function(){var e=this._get("url");if(!e)return null;var t=Object(v.J)(e);return null!=this.layerId&&(t.path="".concat(t.path,"/layers/").concat(this.layerId)),t}},{key:"_fetchIndexAndUpdateExtent",value:function(){var e=Object(s.a)(o.a.mark((function e(t,r){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.indexInfo=Object(_.a)(this.parsedUrl.path,this.rootNode,t,this.apiKey,B,r),e.t0=null==this.fullExtent||this.fullExtent.hasZ,e.t0){e.next=8;break}return e.t1=this,e.next=6,this.indexInfo;case 6:e.t2=e.sent,e.t1._updateExtent.call(e.t1,e.t2);case 8:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"_updateExtent",value:function(e){if("page"===(null==e?void 0:e.type)){var t,r,n=e.rootIndex%e.pageSize,a=null==(t=e.rootPage)||null==(r=t.nodes)?void 0:r[n];if(null==a||null==a.obb||null==a.obb.center||null==a.obb.halfSize)throw new y.a("sceneservice:invalid-node-page","Invalid node page.");if(a.obb.center[0]<z||null==this.fullExtent||this.fullExtent.hasZ)return;var i=a.obb.halfSize,o=a.obb.center[2],s=Math.sqrt(i[0]*i[0]+i[1]*i[1]+i[2]*i[2]);this.fullExtent.zmin=o-s,this.fullExtent.zmax=o+s}else if("node"===(null==e?void 0:e.type)){var c,u=null==(c=e.rootNode)?void 0:c.mbs;if(!Array.isArray(u)||4!==u.length||u[0]<z)return;var l=u[2],p=u[3];this.fullExtent.zmin=l-p,this.fullExtent.zmax=l+p}}},{key:"_fetchService",value:function(){var e=Object(s.a)(o.a.mark((function e(t){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=this.url){e.next=2;break}throw new y.a("sceneservice:url-not-set","Scene service can not be loaded without valid portal item or url");case 2:if(null!=this.layerId||!/SceneServer\/*$/i.test(this.url)){e.next=7;break}return e.next=5,this._fetchFirstLayerId(t);case 5:null!=(r=e.sent)&&(this.layerId=r);case 7:return e.abrupt("return",this._fetchServiceLayer(t));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_fetchFirstLayerId",value:function(){var e=Object(s.a)(o.a.mark((function e(t){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(d.default)(this.url,{query:{f:"json",token:this.apiKey},responseType:"json",signal:t});case 2:if(!((r=e.sent).data&&Array.isArray(r.data.layers)&&r.data.layers.length>0)){e.next=5;break}return e.abrupt("return",r.data.layers[0].id);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_fetchServiceLayer",value:function(){var e=Object(s.a)(o.a.mark((function e(t){var r,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(d.default)(this.parsedUrl.path,{query:{f:"json",token:this.apiKey},responseType:"json",signal:t});case 2:(r=e.sent).ssl&&(this.url=this.url.replace(/^http:/i,"https:")),n=r.data,this.read(n,{origin:"service",url:this.parsedUrl}),this.validateLayer(n);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_ensureLoadBeforeSave",value:function(){var e=Object(s.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.load();case 2:if(e.t0="beforeSave"in this&&"function"==typeof this.beforeSave,!e.t0){e.next=6;break}return e.next=6,this.beforeSave();case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"validateLayer",value:function(e){}},{key:"_updateTypeKeywords",value:function(e,t,r){e.typeKeywords||(e.typeKeywords=[]);var a,i=t.getTypeKeywords(),o=Object(n.a)(i);try{for(o.s();!(a=o.n()).done;){var s=a.value;e.typeKeywords.push(s)}}catch(c){o.e(c)}finally{o.f()}e.typeKeywords&&(e.typeKeywords=e.typeKeywords.filter((function(e,t,r){return r.indexOf(e)===t})),1===r&&(e.typeKeywords=e.typeKeywords.filter((function(e){return"Hosted Service"!==e}))))}},{key:"_saveAs",value:function(){var e=Object(s.a)(o.a.mark((function e(t,r){var n,i,s,c,u;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=Object(a.a)(Object(a.a)({},H),r),i=P.default.from(t),e.t0=i,e.t0){e.next=7;break}return B.error("_saveAs(): requires a portal item parameter"),e.next=7,Promise.reject(new y.a("sceneservice:portal-item-required","_saveAs() requires a portal item to save to"));case 7:return i.id&&((i=i.clone()).id=null),s=i.portal||R.a.getDefault(),e.next=11,this._ensureLoadBeforeSave();case 11:return i.type=Q,i.portal=s,c={origin:"portal-item",url:null,messages:[],portal:s,portalItem:i,writtenProperties:[],blockedRelativeUrls:[],resources:{toAdd:[],toUpdate:[],toKeep:[],pendingOperations:[]}},u={layers:[this.write(null,c)]},e.next=16,Promise.all(c.resources.pendingOperations);case 16:return e.next=18,this._validateAgainstJSONSchema(u,c,n);case 18:return i.url=this.url,i.title||(i.title=this.title),this._updateTypeKeywords(i,n,1),e.next=23,s._signIn();case 23:return e.next=25,s.user.addItem({item:i,folder:n&&n.folder,data:u});case 25:return e.next=27,L(this.resourceReferences,c,null);case 27:return this.portalItem=i,x(c),c.portalItem=i,e.abrupt("return",i);case 31:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"_save",value:function(){var e=Object(s.a)(o.a.mark((function e(t){var r,n,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Object(a.a)(Object(a.a)({},H),t),e.t0=this.portalItem,e.t0){e.next=6;break}return B.error("_save(): requires the .portalItem property to be set"),e.next=6,Promise.reject(new y.a("sceneservice:portal-item-not-set","Portal item to save to has not been set on this SceneService"));case 6:if(e.t1=this.portalItem.type!==Q,!e.t1){e.next=11;break}return B.error("_save(): Non-matching portal item type. Got "+this.portalItem.type+", expected "+Q),e.next=11,Promise.reject(new y.a("sceneservice:portal-item-wrong-type",'Portal item needs to have type "'.concat(Q,'"')));case 11:return e.next=13,this._ensureLoadBeforeSave();case 13:return n={origin:"portal-item",url:this.portalItem.itemUrl&&Object(v.J)(this.portalItem.itemUrl),messages:[],portal:this.portalItem.portal||R.a.getDefault(),portalItem:this.portalItem,writtenProperties:[],blockedRelativeUrls:[],resources:{toAdd:[],toUpdate:[],toKeep:[],pendingOperations:[]}},i={layers:[this.write(null,n)]},e.next=16,Promise.all(n.resources.pendingOperations);case 16:return e.next=18,this._validateAgainstJSONSchema(i,n,r);case 18:return this.portalItem.url=this.url,this.portalItem.title||(this.portalItem.title=this.title),this._updateTypeKeywords(this.portalItem,r,0),e.next=23,this.portalItem.update({data:i});case 23:return e.next=25,L(this.resourceReferences,n,null);case 25:return x(n),e.abrupt("return",this.portalItem);case 27:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_validateAgainstJSONSchema",value:function(){var e=Object(s.a)(o.a.mark((function e(t,n,a){var i,s,c,u;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=n.messages.filter((function(e){return"error"===e.type})).map((function(e){return new y.a(e.name,e.message,e.details)})),a&&a.validationOptions.ignoreUnsupported&&(i=i.filter((function(e){return"layer:unsupported"!==e.name&&"symbol:unsupported"!==e.name&&"symbol-layer:unsupported"!==e.name&&"property:unsupported"!==e.name&&"url:unsupported"!==e.name&&"scenemodification:unsupported"!==e.name}))),!a.validationOptions.enabled&&!G){e.next=10;break}return e.next=4,r.e(90).then(r.bind(null,1106));case 4:if(!((s=e.sent.validate(t,a.portalItemLayerType)).length>0)){e.next=10;break}if(c="Layer item did not validate:\n".concat(s.join("\n")),B.error("_validateAgainstJSONSchema(): ".concat(c)),"throw"!==a.validationOptions.failPolicy){e.next=10;break}throw u=s.map((function(e){return new y.a("sceneservice:schema-validation",e)})).concat(i),new y.a("sceneservice-validate:error","Failed to save layer item due to schema validation, see `details.errors`.",{combined:u});case 10:if(!(i.length>0)){e.next=12;break}throw new y.a("sceneservice:save","Failed to save SceneService due to unsupported or invalid content. See 'details.errors' for more detailed information",{errors:i});case 12:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}()}]),i}(e);return Object(b.a)([Object(O.b)(E.c)],t.prototype,"id",void 0),Object(b.a)([Object(O.b)({type:F.a})],t.prototype,"spatialReference",void 0),Object(b.a)([Object(m.a)("spatialReference",["spatialReference","store.indexCRS","store.geographicCRS"])],t.prototype,"readSpatialReference",null),Object(b.a)([Object(O.b)({type:k.a})],t.prototype,"fullExtent",void 0),Object(b.a)([Object(m.a)("fullExtent",["fullExtent","store.extent","spatialReference","store.indexCRS","store.geographicCRS"])],t.prototype,"readFullExtent",null),Object(b.a)([Object(O.b)({readOnly:!0,type:I.a})],t.prototype,"heightModelInfo",void 0),Object(b.a)([Object(O.b)({type:Number,json:{name:"layerDefinition.minScale",write:!0,origins:{service:{read:{source:"minScale"},write:!1}}}})],t.prototype,"minScale",void 0),Object(b.a)([Object(O.b)({type:Number,json:{name:"layerDefinition.maxScale",write:!0,origins:{service:{read:{source:"maxScale"},write:!1}}}})],t.prototype,"maxScale",void 0),Object(b.a)([Object(O.b)({readOnly:!0})],t.prototype,"version",void 0),Object(b.a)([Object(m.a)("version",["store.version"])],t.prototype,"readVersion",null),Object(b.a)([Object(O.b)({type:String,json:{read:{source:"copyrightText"}}})],t.prototype,"copyright",void 0),Object(b.a)([Object(O.b)({type:String,json:{read:!1}})],t.prototype,"sublayerTitleMode",void 0),Object(b.a)([Object(O.b)({type:String})],t.prototype,"title",void 0),Object(b.a)([Object(m.a)("portal-item","title")],t.prototype,"readTitlePortalItem",null),Object(b.a)([Object(m.a)("service","title",["name"])],t.prototype,"readTitleService",null),Object(b.a)([Object(O.b)({type:Number,json:{origins:{service:{read:{source:"id"}},"portal-item":{write:{target:"id",isRequired:!0,ignoreOrigin:!0},read:!1}}}})],t.prototype,"layerId",void 0),Object(b.a)([Object(O.b)(E.n)],t.prototype,"url",null),Object(b.a)([Object(w.a)("url")],t.prototype,"writeUrl",null),Object(b.a)([Object(O.b)()],t.prototype,"parsedUrl",null),Object(b.a)([Object(O.b)({readOnly:!0})],t.prototype,"store",void 0),Object(b.a)([Object(O.b)({type:String,readOnly:!0,json:{read:{source:"store.rootNode"}}})],t.prototype,"rootNode",void 0),t=Object(b.a)([Object(g.a)("esri.layers.mixins.SceneService")],t),t},z=-1e38,G=!1,Q="Scene Service",H={getTypeKeywords:function(){return[]},portalItemLayerType:"unknown",validationOptions:{enabled:!0,ignoreUnsupported:!1,failPolicy:"throw"}}},900:function(e,t,r){"use strict";r.d(t,"a",(function(){return m})),r.d(t,"b",(function(){return y})),r.d(t,"c",(function(){return p})),r.d(t,"d",(function(){return h}));var n=r(2),a=r(5),i=r(6),o=r(0),s=r(26),c=r(1),u=(r(19),r(14),r(15),r(31)),l=r(10),p=function(e){Object(a.a)(r,e);var t=Object(i.a)(r);function r(){var e;return Object(n.a)(this,r),(e=t.apply(this,arguments)).nodesPerPage=null,e.rootIndex=0,e.lodSelectionMetricType=null,e}return r}(s.a);Object(o.a)([Object(c.b)({type:Number})],p.prototype,"nodesPerPage",void 0),Object(o.a)([Object(c.b)({type:Number})],p.prototype,"rootIndex",void 0),Object(o.a)([Object(c.b)({type:String})],p.prototype,"lodSelectionMetricType",void 0),p=Object(o.a)([Object(l.a)("esri.layer.support.I3SNodePageDefinition")],p);var b=function(e){Object(a.a)(r,e);var t=Object(i.a)(r);function r(){var e;return Object(n.a)(this,r),(e=t.apply(this,arguments)).factor=1,e}return r}(s.a);Object(o.a)([Object(c.b)({type:Number,json:{read:{source:"textureSetDefinitionId"}}})],b.prototype,"id",void 0),Object(o.a)([Object(c.b)({type:Number})],b.prototype,"factor",void 0),b=Object(o.a)([Object(l.a)("esri.layer.support.I3SMaterialTexture")],b);var d=function(e){Object(a.a)(r,e);var t=Object(i.a)(r);function r(){var e;return Object(n.a)(this,r),(e=t.apply(this,arguments)).baseColorFactor=[1,1,1,1],e.baseColorTexture=null,e.metallicRoughnessTexture=null,e.metallicFactor=1,e.roughnessFactor=1,e}return r}(s.a);Object(o.a)([Object(c.b)({type:[Number]})],d.prototype,"baseColorFactor",void 0),Object(o.a)([Object(c.b)({type:b})],d.prototype,"baseColorTexture",void 0),Object(o.a)([Object(c.b)({type:b})],d.prototype,"metallicRoughnessTexture",void 0),Object(o.a)([Object(c.b)({type:Number})],d.prototype,"metallicFactor",void 0),Object(o.a)([Object(c.b)({type:Number})],d.prototype,"roughnessFactor",void 0),d=Object(o.a)([Object(l.a)("esri.layer.support.I3SMaterialPBRMetallicRoughness")],d);var y=function(e){Object(a.a)(r,e);var t=Object(i.a)(r);function r(){var e;return Object(n.a)(this,r),(e=t.apply(this,arguments)).alphaMode="opaque",e.alphaCutoff=.25,e.doubleSided=!1,e.cullFace="none",e.normalTexture=null,e.occlusionTexture=null,e.emissiveTexture=null,e.emissiveFactor=null,e.pbrMetallicRoughness=null,e}return r}(s.a);Object(o.a)([Object(u.a)({opaque:"opaque",mask:"mask",blend:"blend"})],y.prototype,"alphaMode",void 0),Object(o.a)([Object(c.b)({type:Number})],y.prototype,"alphaCutoff",void 0),Object(o.a)([Object(c.b)({type:Boolean})],y.prototype,"doubleSided",void 0),Object(o.a)([Object(u.a)({none:"none",back:"back",front:"front"})],y.prototype,"cullFace",void 0),Object(o.a)([Object(c.b)({type:b})],y.prototype,"normalTexture",void 0),Object(o.a)([Object(c.b)({type:b})],y.prototype,"occlusionTexture",void 0),Object(o.a)([Object(c.b)({type:b})],y.prototype,"emissiveTexture",void 0),Object(o.a)([Object(c.b)({type:[Number]})],y.prototype,"emissiveFactor",void 0),Object(o.a)([Object(c.b)({type:d})],y.prototype,"pbrMetallicRoughness",void 0),y=Object(o.a)([Object(l.a)("esri.layer.support.I3SMaterialDefinition")],y);var f=function(e){Object(a.a)(r,e);var t=Object(i.a)(r);function r(){return Object(n.a)(this,r),t.apply(this,arguments)}return r}(s.a);Object(o.a)([Object(c.b)({type:String,json:{read:{source:["name","index"],reader:function(e,t){return null!=e?e:"".concat(t.index)}}}})],f.prototype,"name",void 0),Object(o.a)([Object(u.a)({jpg:"jpg",png:"png",dds:"dds","ktx-etc2":"ktx-etc2",ktx2:"ktx2",basis:"basis"})],f.prototype,"format",void 0),f=Object(o.a)([Object(l.a)("esri.layer.support.I3STextureFormat")],f);var h=function(e){Object(a.a)(r,e);var t=Object(i.a)(r);function r(){var e;return Object(n.a)(this,r),(e=t.apply(this,arguments)).atlas=!1,e}return r}(s.a);Object(o.a)([Object(c.b)({type:[f]})],h.prototype,"formats",void 0),Object(o.a)([Object(c.b)({type:Boolean})],h.prototype,"atlas",void 0),h=Object(o.a)([Object(l.a)("esri.layer.support.I3STextureSetDefinition")],h);var j=function(e){Object(a.a)(r,e);var t=Object(i.a)(r);function r(){return Object(n.a)(this,r),t.apply(this,arguments)}return r}(s.a);Object(o.a)([Object(u.a)({Float32:"Float32",UInt64:"UInt64",UInt32:"UInt32",UInt16:"UInt16",UInt8:"UInt8"})],j.prototype,"type",void 0),Object(o.a)([Object(c.b)({type:Number})],j.prototype,"component",void 0),j=Object(o.a)([Object(l.a)("esri.layer.support.I3SGeometryAttribute")],j);var v=function(e){Object(a.a)(r,e);var t=Object(i.a)(r);function r(){return Object(n.a)(this,r),t.apply(this,arguments)}return r}(s.a);Object(o.a)([Object(u.a)({draco:"draco"})],v.prototype,"encoding",void 0),Object(o.a)([Object(c.b)({type:[String]})],v.prototype,"attributes",void 0),v=Object(o.a)([Object(l.a)("esri.layer.support.I3SGeometryCompressedAttributes")],v);var O=function(e){Object(a.a)(r,e);var t=Object(i.a)(r);function r(){var e;return Object(n.a)(this,r),(e=t.apply(this,arguments)).offset=0,e}return r}(s.a);Object(o.a)([Object(c.b)({type:Number})],O.prototype,"offset",void 0),Object(o.a)([Object(c.b)({type:j})],O.prototype,"position",void 0),Object(o.a)([Object(c.b)({type:j})],O.prototype,"normal",void 0),Object(o.a)([Object(c.b)({type:j})],O.prototype,"uv0",void 0),Object(o.a)([Object(c.b)({type:j})],O.prototype,"color",void 0),Object(o.a)([Object(c.b)({type:j})],O.prototype,"uvRegion",void 0),Object(o.a)([Object(c.b)({type:j})],O.prototype,"featureId",void 0),Object(o.a)([Object(c.b)({type:j})],O.prototype,"faceRange",void 0),Object(o.a)([Object(c.b)({type:v})],O.prototype,"compressedAttributes",void 0),O=Object(o.a)([Object(l.a)("esri.layer.support.I3SGeometryBuffer")],O);var m=function(e){Object(a.a)(r,e);var t=Object(i.a)(r);function r(){return Object(n.a)(this,r),t.apply(this,arguments)}return r}(s.a);Object(o.a)([Object(u.a)({triangle:"triangle"})],m.prototype,"topology",void 0),Object(o.a)([Object(c.b)()],m.prototype,"geometryBuffers",void 0),m=Object(o.a)([Object(l.a)("esri.layer.support.I3SGeometryDefinition")],m)},992:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var n={attachment:{supportsContentType:!1,supportsExifInfo:!1,supportsKeywords:!1,supportsName:!1,supportsSize:!1},data:{isVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:!1},editing:{supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsGeometryUpdate:!1,supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,supportsRollbackOnFailure:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1,supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:!1,supportsDelete:!1,supportsEditing:!1,supportsChangeTracking:!1,supportsQuery:!1,supportsQueryAttachments:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:!1,supportsExceedsLimitStatistics:!1},queryRelated:{supportsCount:!1,supportsOrderBy:!1,supportsPagination:!1},query:{maxRecordCount:0,maxRecordCountFactor:0,standardMaxRecordCount:0,supportsCacheHint:!1,supportsCentroid:!1,supportsDisjointSpatialRelationship:!1,supportsDistance:!1,supportsDistinct:!1,supportsExtent:!1,supportsFormatPBF:!1,supportsGeometryProperties:!1,supportsHavingClause:!1,supportsHistoricMoment:!1,supportsMaxRecordCountFactor:!1,supportsOrderBy:!1,supportsPagination:!1,supportsPercentileStatistics:!1,supportsQuantization:!1,supportsQuantizationEditMode:!1,supportsQueryByOthers:!1,supportsQueryGeometry:!1,supportsResultType:!1,supportsSqlExpression:!1,supportsStandardizedQueriesOnly:!1,supportsTopFeaturesQuery:!1,supportsStatistics:!1,tileMaxRecordCount:0}}},993:function(e,t,r){"use strict";r.d(t,"a",(function(){return h}));var n=r(22),a=r(7),i=r.n(a),o=r(12),s=r(2),c=r(4),u=r(83),l=r(82),p=r(11),b=r(30),d=r(735),y=r(85),f=r(334),h=function(){function e(t,r,n,a){Object(s.a)(this,e),this.parsedUrl=t,this.portalItem=r,this.apiKey=n,this.signal=a,this.rootDocument=null;var i=this.parsedUrl.path.match(/^(.*)\/SceneServer\/layers\/([\d]*)\/?$/i);i&&(this.urlParts={root:i[1],layerId:parseInt(i[2],10)})}return Object(c.a)(e,[{key:"fetch",value:function(){var e=Object(o.a)(i.a.mark((function e(){var t,r,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.urlParts){e.next=2;break}return e.abrupt("return",null);case 2:if(null==(t=this.portalItem)){e.next=6;break}e.t0=t,e.next=9;break;case 6:return e.next=8,this.portalItemFromServiceItemId();case 8:e.t0=e.sent;case 9:if(r=e.t0,!Object(p.i)(r)){e.next=12;break}return e.abrupt("return",this.loadFromUrl());case 12:return e.next=14,this.findAndLoadRelatedPortalItem(r);case 14:return n=e.sent,e.abrupt("return",Object(p.i)(n)?null:this.loadFeatureLayerFromPortalItem(n));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchPortalItem",value:function(){var e=Object(o.a)(i.a.mark((function e(){var t,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.urlParts){e.next=2;break}return e.abrupt("return",null);case 2:if(null==(t=this.portalItem)){e.next=6;break}e.t0=t,e.next=9;break;case 6:return e.next=8,this.portalItemFromServiceItemId();case 8:e.t0=e.sent;case 9:return r=e.t0,e.abrupt("return",Object(p.i)(r)?null:this.findAndLoadRelatedPortalItem(r));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchRootDocument",value:function(){var e=Object(o.a)(i.a.mark((function e(){var t,r,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Object(p.j)(this.rootDocument)){e.next=2;break}return e.abrupt("return",this.rootDocument);case 2:if(!Object(p.i)(this.urlParts)){e.next=4;break}return e.abrupt("return",(this.rootDocument={},{}));case 4:return t={query:{f:"json",token:this.apiKey},responseType:"json",signal:this.signal},r="".concat(this.urlParts.root,"/SceneServer"),e.prev=5,e.next=8,Object(l.default)(r,t);case 8:n=e.sent,this.rootDocument=n.data,e.next=15;break;case 12:e.prev=12,e.t0=e.catch(5),this.rootDocument={};case 15:return e.abrupt("return",this.rootDocument);case 16:case"end":return e.stop()}}),e,this,[[5,12]])})));return function(){return e.apply(this,arguments)}}()},{key:"fetchServiceOwningPortalUrl",value:function(){var e=Object(o.a)(i.a.mark((function e(){var t,r,n,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==(r=null==(t=u.b)?void 0:t.findServerInfo(this.parsedUrl.path))||!r.owningSystemUrl){e.next=3;break}return e.abrupt("return",r.owningSystemUrl);case 3:return n=this.parsedUrl.path.replace(/(.*\/rest)\/.*/i,"$1")+"/info",e.prev=4,e.next=7,Object(l.default)(n,{query:{f:"json"},responseType:"json",signal:this.signal});case 7:if(!(a=e.sent.data.owningSystemUrl)){e.next=10;break}return e.abrupt("return",a);case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(4),Object(b.u)(e.t0);case 15:return e.abrupt("return",null);case 16:case"end":return e.stop()}}),e,this,[[4,12]])})));return function(){return e.apply(this,arguments)}}()},{key:"findAndLoadRelatedPortalItem",value:function(){var e=Object(o.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.fetchRelatedItems({relationshipType:"Service2Service",direction:"reverse"},{signal:this.signal});case 3:if(e.t0=e.sent.find((function(e){return"Feature Service"===e.type})),e.t0){e.next=6;break}e.t0=null;case 6:return e.abrupt("return",e.t0);case 9:return e.prev=9,e.t1=e.catch(0),e.abrupt("return",(Object(b.u)(e.t1),null));case 12:case"end":return e.stop()}}),e,this,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()},{key:"loadFeatureLayerFromPortalItem",value:function(){var e=Object(o.a)(i.a.mark((function e(t){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.load({signal:this.signal});case 2:return e.next=4,this.findMatchingAssociatedSublayerUrl(t.url);case 4:return r=e.sent,e.abrupt("return",new d.default({url:r,portalItem:t}).load({signal:this.signal}));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"loadFromUrl",value:function(){var e=Object(o.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.findMatchingAssociatedSublayerUrl("".concat(this.urlParts.root,"/FeatureServer"));case 2:return t=e.sent,e.abrupt("return",new d.default({url:t}).load({signal:this.signal}));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"findMatchingAssociatedSublayerUrl",value:function(){var e=Object(o.a)(i.a.mark((function e(t){var r,a,o,s,c,u,p,b,d,y,f,h;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.replace(/^(.*FeatureServer)(\/[\d]*\/?)?$/i,"$1"),a={query:{f:"json"},responseType:"json",authMode:"no-prompt",signal:this.signal},o=this.urlParts.layerId,s=this.fetchRootDocument(),c=Object(l.default)(r,a),e.next=7,Promise.all([c,s]);case 7:if(u=e.sent,p=Object(n.a)(u,2),b=p[0],d=p[1],y=d&&d.layers,f=b.data&&b.data.layers,Array.isArray(f)){e.next=15;break}throw new Error("expected layers array");case 15:if(!Array.isArray(y)){e.next=25;break}h=0;case 17:if(!(h<Math.min(y.length,f.length))){e.next=23;break}if(y[h].id!==o){e.next=20;break}return e.abrupt("return","".concat(r,"/").concat(f[h].id));case 20:h++,e.next=17;break;case 23:e.next=27;break;case 25:if(!(o<f.length)){e.next=27;break}return e.abrupt("return","".concat(r,"/").concat(f[o].id));case 27:throw new Error("could not find matching associated sublayer");case 28:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"portalItemFromServiceItemId",value:function(){var e=Object(o.a)(i.a.mark((function e(){var t,r,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetchRootDocument();case 2:if(t=e.sent.serviceItemId){e.next=5;break}return e.abrupt("return",null);case 5:return r=new f.default({id:t,apiKey:this.apiKey}),e.next=8,this.fetchServiceOwningPortalUrl();case 8:return n=e.sent,Object(p.j)(n)&&(r.portal=new y.a({url:n})),e.prev=10,e.abrupt("return",r.load({signal:this.signal}));case 14:return e.prev=14,e.t0=e.catch(10),e.abrupt("return",(Object(b.u)(e.t0),null));case 17:case"end":return e.stop()}}),e,this,[[10,14]])})));return function(){return e.apply(this,arguments)}}()}]),e}()}}]);
//# sourceMappingURL=40.bc9c1935.chunk.js.map