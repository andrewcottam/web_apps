(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[61,92,105],{1058:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return Fe}));var n=r(7),a=r.n(n),i=r(12),s=r(9),o=r(13),u=r(21),l=r(2),c=r(4),b=r(8),f=r(5),p=r(6),d=r(0),h=r(68),y=r(210),v=r(214),m=r(82),O=r(52),j=r(808),g=r(726),w=r(42),x=r(18),M=r(11),S=r(677),k=r(30),I=r(27),E=r(1),T=r(14),N=(r(19),r(15),r(57)),F=r(10),U=r(43),_=r(335),D=r(58),A=r(45),R=r(346),L=r(53),P=r(682),C=r(730),q=r(709),H=r(699),V=r(697),W=r(716),B=r(719),J=r(676),Y=r(671),G=r(60),X={visible:"visibleSublayers"},z=function(e){Object(f.a)(r,e);var t=Object(p.a)(r);function r(e){var n;return Object(l.a)(this,r),(n=t.call(this,e)).scale=0,n}return Object(c.a)(r,[{key:"layer",set:function(e){var t=this;this._get("layer")!==e&&(this._set("layer",e),this.handles.remove("layer"),e&&this.handles.add([e.sublayers.on("change",(function(){return t.notifyChange("visibleSublayers")})),e.on("wms-sublayer-update",(function(e){return t.notifyChange(X[e.propertyName])}))],"layer"))}},{key:"layers",get:function(){return this.visibleSublayers.filter((function(e){return e.name})).map((function(e){return e.name})).join(",")}},{key:"version",get:function(){this.commitProperty("layers");var e=this.layer;return e&&e.commitProperty("imageTransparency"),(this._get("version")||0)+1}},{key:"visibleSublayers",get:function(){var e=this.layer,t=this.scale,r=null==e?void 0:e.sublayers,n=[];return null==r||r.forEach((function e(r){var a=r.minScale,i=r.maxScale,s=r.sublayers;r.visible&&(0===t||(0===a||t<=a)&&(0===i||t>=i))&&(s?s.forEach(e):n.unshift(r))})),n}},{key:"toJSON",value:function(){var e=this.layer,t=this.layers;return{format:e.imageFormat,request:"GetMap",service:"WMS",styles:"",transparent:e.imageTransparency,version:e.version,layers:t}}}]),r}(Object(g.b)(G.a));Object(d.a)([Object(E.b)()],z.prototype,"layer",null),Object(d.a)([Object(E.b)({readOnly:!0})],z.prototype,"layers",null),Object(d.a)([Object(E.b)({type:Number})],z.prototype,"scale",void 0),Object(d.a)([Object(E.b)({readOnly:!0})],z.prototype,"version",null),Object(d.a)([Object(E.b)({readOnly:!0})],z.prototype,"visibleSublayers",null),z=Object(d.a)([Object(F.a)("esri.layers.support.ExportWMSImageParameters")],z);var Q,Z=r(183),$=r(97),K=0,ee=Q=function(e){Object(f.a)(r,e);var t=Object(p.a)(r);function r(e){var n;return Object(l.a)(this,r),(n=t.call(this,e))._sublayersHandles=new Z.a,n.dimensions=null,n.fullExtents=null,n.featureInfoFormat=null,n.featureInfoUrl=null,n.legendUrl=null,n.legendEnabled=!0,n.maxScale=0,n.minScale=0,n.popupEnabled=!1,n.queryable=!1,n.spatialReferences=null,n}return Object(c.a)(r,[{key:"description",get:function(){return this._get("description")},set:function(e){this._set("description",e)}},{key:"fullExtent",get:function(){return this._get("fullExtent")},set:function(e){this._set("fullExtent",e)}},{key:"readExtent",value:function(e,t){return(e=t.extent)?D.a.fromJSON(e):null}},{key:"id",get:function(){var e=this._get("id");return null==e?K++:e},set:function(e){this._set("id",e)}},{key:"readLegendUrl",value:function(e,t){return t?t.legendUrl||t.legendURL:null}},{key:"layer",set:function(e){this._set("layer",e),this.sublayers&&this.sublayers.forEach((function(t){return t.layer=e}))}},{key:"name",get:function(){return this._get("name")},set:function(e){this._set("name",e)}},{key:"sublayers",set:function(e){var t=this,r=this._get("sublayers");r&&(r.forEach((function(e){e.layer=null})),this._sublayersHandles.removeAll(),this._sublayersHandles=null),e&&(e.forEach((function(e){e.parent=t,e.layer=t.layer})),this._sublayersHandles.add([e.on("after-add",(function(e){var r=e.item;r.parent=t,r.layer=t.layer})),e.on("after-remove",(function(e){var t=e.item;t.parent=null,t.layer=null}))])),this._set("sublayers",e)}},{key:"castSublayers",value:function(e){return Object(T.m)(O.a.ofType(Q),e)}},{key:"title",get:function(){return this._get("title")},set:function(e){this._set("title",e)}},{key:"visible",get:function(){return this._get("visible")},set:function(e){this._setAndNotifyLayer("visible",e)}},{key:"clone",value:function(){var e=new Q;return this.hasOwnProperty("description")&&(e.description=this.description),this.hasOwnProperty("fullExtent")&&(e.fullExtent=this.fullExtent.clone()),this.hasOwnProperty("fullExtents")&&(e.fullExtents=this.fullExtents.map((function(e){return e.clone()}))),this.hasOwnProperty("featureInfoFormat")&&(e.featureInfoFormat=this.featureInfoFormat),this.hasOwnProperty("featureInfoUrl")&&(e.featureInfoUrl=this.featureInfoUrl),this.hasOwnProperty("legendUrl")&&(e.legendUrl=this.legendUrl),this.hasOwnProperty("legendEnabled")&&(e.legendEnabled=this.legendEnabled),this.hasOwnProperty("layer")&&(e.layer=this.layer),this.hasOwnProperty("name")&&(e.name=this.name),this.hasOwnProperty("parent")&&(e.parent=this.parent),this.hasOwnProperty("queryable")&&(e.queryable=this.queryable),this.hasOwnProperty("sublayers")&&(e.sublayers=this.sublayers&&this.sublayers.map((function(e){return e.clone()}))),this.hasOwnProperty("spatialReferences")&&(e.spatialReferences=this.spatialReferences.map((function(e){return e}))),this.hasOwnProperty("visible")&&(e.visible=this.visible),this.hasOwnProperty("title")&&(e.title=this.title),e}},{key:"_setAndNotifyLayer",value:function(e,t){var r=this.layer;this._get(e)!==t&&(this._set(e,t),r&&r.emit("wms-sublayer-update",{propertyName:e,id:this.id}))}}]),r}(S.b);Object(d.a)([Object(E.b)()],ee.prototype,"description",null),Object(d.a)([Object(E.b)({readOnly:!0})],ee.prototype,"dimensions",void 0),Object(d.a)([Object(E.b)({value:null})],ee.prototype,"fullExtent",null),Object(d.a)([Object(N.a)("fullExtent",["extent"])],ee.prototype,"readExtent",null),Object(d.a)([Object(E.b)()],ee.prototype,"fullExtents",void 0),Object(d.a)([Object(E.b)()],ee.prototype,"featureInfoFormat",void 0),Object(d.a)([Object(E.b)()],ee.prototype,"featureInfoUrl",void 0),Object(d.a)([Object(E.b)({type:Number,json:{write:{enabled:!1,overridePolicy:function(){return{ignoreOrigin:!0,enabled:!0}}}}})],ee.prototype,"id",null),Object(d.a)([Object(E.b)({type:String,json:{origins:{"web-document":{read:{source:["legendUrl","legendURL"]},write:{target:"legendUrl",ignoreOrigin:!0}}},read:{source:"legendURL"},write:{ignoreOrigin:!0}}})],ee.prototype,"legendUrl",void 0),Object(d.a)([Object(N.a)(["web-document"],"legendUrl")],ee.prototype,"readLegendUrl",null),Object(d.a)([Object(E.b)({value:!0,type:Boolean,json:{read:{source:"showLegend"},write:{target:"showLegend"},origins:{"web-map":{read:!1,write:!1},"web-scene":{read:!1,write:!1}}}})],ee.prototype,"legendEnabled",void 0),Object(d.a)([Object(E.b)({value:null})],ee.prototype,"layer",null),Object(d.a)([Object(E.b)()],ee.prototype,"maxScale",void 0),Object(d.a)([Object(E.b)()],ee.prototype,"minScale",void 0),Object(d.a)([Object(E.b)({type:String,value:null,json:{read:{source:"name"},write:{ignoreOrigin:!0}}})],ee.prototype,"name",null),Object(d.a)([Object(E.b)()],ee.prototype,"parent",void 0),Object(d.a)([Object(E.b)({type:Boolean,json:{read:{source:"showPopup"},write:{ignoreOrigin:!0,target:"showPopup"}}})],ee.prototype,"popupEnabled",void 0),Object(d.a)([Object(E.b)({type:Boolean,json:{write:{ignoreOrigin:!0}}})],ee.prototype,"queryable",void 0),Object(d.a)([Object(E.b)()],ee.prototype,"sublayers",null),Object(d.a)([Object($.a)("sublayers")],ee.prototype,"castSublayers",null),Object(d.a)([Object(E.b)({type:[Number],json:{read:{source:"spatialReferences"}}})],ee.prototype,"spatialReferences",void 0),Object(d.a)([Object(E.b)({type:String,value:null,json:{write:{ignoreOrigin:!0}}})],ee.prototype,"title",null),Object(d.a)([Object(E.b)({type:Boolean,value:!0,json:{read:{source:"defaultVisibility"}}})],ee.prototype,"visible",null);var te=ee=Q=Object(d.a)([Object(F.a)("esri.layers.support.WMSSublayer")],ee),re=r(22),ne=r(29),ae=[[4001,4999],[2044,2045],[2081,2083],[2085,2086],[2093,2093],[2096,2098],[2105,2132],[2169,2170],[2176,2180],[2193,2193],[2200,2200],[2206,2212],[2319,2319],[2320,2462],[2523,2549],[2551,2735],[2738,2758],[2935,2941],[2953,2953],[3006,3030],[3034,3035],[3058,3059],[3068,3068],[3114,3118],[3126,3138],[3300,3301],[3328,3335],[3346,3346],[3350,3352],[3366,3366],[3416,3416],[20004,20032],[20064,20092],[21413,21423],[21473,21483],[21896,21899],[22171,22177],[22181,22187],[22191,22197],[25884,25884],[27205,27232],[27391,27398],[27492,27492],[28402,28432],[28462,28492],[30161,30179],[30800,30800],[31251,31259],[31275,31279],[31281,31290],[31466,31700]],ie={84:4326,83:4269,27:4267};function se(e){if(!e)return null;var t={idCounter:-1};"string"==typeof e&&(e=(new DOMParser).parseFromString(e,"text/xml"));var r=e.documentElement;if("ServiceExceptionReport"===r.nodeName){var n=Array.prototype.slice.call(r.childNodes).map((function(e){return e.textContent})).join("\r\n");throw new ne.a("wmslayer:wms-capabilities-xml-is-not-valid","The server returned errors when the WMS capabilities were requested.",n)}var a=ce("Capability",r),i=ce("Service",r),s=ce("Request",a);if(!a||!i||!s)return null;var o=ce("Layer",a);if(!o)return null;var u,l,c,b,f="WMS_Capabilities"===r.nodeName||"WMT_MS_Capabilities"===r.nodeName?r.getAttribute("version"):"1.3.0",p=fe("Title",i,"")||fe("Name",i,""),d=fe("AccessConstraints",i,""),h=fe("Abstract",i,""),y=parseInt(fe("MaxWidth",i,"5000"),10),v=parseInt(fe("MaxHeight",i,"5000"),10),m=he(s,"GetMap"),O=de(s,"GetMap"),j=ve(o,f,t),g=0;if(Array.prototype.slice.call(a.childNodes).forEach((function(e){"Layer"===e.nodeName&&(0===g?u=e:1===g?(j.name&&(j.name="",j.sublayers.push(ve(u,f,t))),j.sublayers.push(ve(e,f,t))):j.sublayers.push(ve(e,f,t)),g++)})),!j)return null;var w=j.fullExtents;if((l=j.sublayers)||(l=[]),0===l.length&&l.push(j),!(c=j.extent)){var x=new D.a(l[0].extent);j.extent=x.toJSON(),c=j.extent}if(!(b=j.spatialReferences).length&&l.length>0){var M=function e(t){var r=[];return t.sublayers.forEach((function(t){!r.length&&t.spatialReferences.length&&(r=t.spatialReferences||e(t))})),r};l.forEach((function(e){b.length||(b=e.spatialReferences||M(e))}))}var S,k=de(s,"GetFeatureInfo");if(k){var I=he(s,"GetFeatureInfo");I.indexOf("text/html")>-1?S="text/html":I.indexOf("text/plain")>-1&&(S="text/plain")}if(!S){!function e(t){t&&(t.queryable=!1,t.sublayers&&t.sublayers.forEach((function(t){e(t)})))}(j)}var E=ue(l),T=j.minScale||0,N=j.maxScale||0,F=j.dimensions,U=E.reduce((function(e,t){return e.concat(t.dimensions)}),[]),_=F.concat(U).filter(Oe),A=null;if(_.length>0){var R=Number.POSITIVE_INFINITY,L=Number.NEGATIVE_INFINITY;_.forEach((function(e){var t,r=e.extent;t=r,Array.isArray(t)&&t.length>0&&t[0]instanceof Date?r.forEach((function(e){R=Math.min(R,e.getTime()),L=Math.max(L,e.getTime())})):r.forEach((function(e){R=Math.min(R,e.min.getTime()),L=Math.max(L,e.max.getTime())}))})),A={startTimeField:null,endTimeField:null,trackIdField:null,timeExtent:[R,L]}}return{copyright:d,description:h,dimensions:F,extent:c,fullExtents:w,featureInfoFormat:S,featureInfoUrl:k,mapUrl:O,maxWidth:y,maxHeight:v,maxScale:N,minScale:T,layers:E,spatialReferences:b,supportedImageFormatTypes:m,timeInfo:A,title:p,version:f}}function oe(e){return ae.some((function(t){var r=Object(re.a)(t,2),n=r[0],a=r[1];return e>=n&&e<=a}))}function ue(e){var t=[];return e.forEach((function(e){t.push(e),e.sublayers&&e.sublayers.length&&(t=t.concat(ue(e.sublayers)),delete e.sublayers)})),t}function le(e,t,r){var n;return null!=(n=t.getAttribute(e))?n:r}function ce(e,t){for(var r=0;r<t.childNodes.length;r++){var n=t.childNodes[r];if(me(n)&&n.nodeName===e)return n}return null}function be(e,t){for(var r=[],n=0;n<t.childNodes.length;n++){var a=t.childNodes[n];me(a)&&a.nodeName===e&&r.push(a)}return r}function fe(e,t,r){var n=ce(e,t);return n?n.textContent:r}function pe(e,t,r){if(!e)return null;var n,a,i,s,o=parseFloat(e.getAttribute("minx")),u=parseFloat(e.getAttribute("miny")),l=parseFloat(e.getAttribute("maxx")),c=parseFloat(e.getAttribute("maxy"));r?(n=isNaN(u)?-Number.MAX_VALUE:u,a=isNaN(o)?-Number.MAX_VALUE:o,i=isNaN(c)?Number.MAX_VALUE:c,s=isNaN(l)?Number.MAX_VALUE:l):(n=isNaN(o)?-Number.MAX_VALUE:o,a=isNaN(u)?-Number.MAX_VALUE:u,i=isNaN(l)?Number.MAX_VALUE:l,s=isNaN(c)?Number.MAX_VALUE:c);var b=new A.a({wkid:t});return new D.a({xmin:n,ymin:a,xmax:i,ymax:s,spatialReference:b})}function de(e,t){var r=ce(t,e);if(r){var n=ce("DCPType",r);if(n){var a=ce("HTTP",n);if(a){var i=ce("Get",a);if(i){var s=function(e,t,r,n){var a=ce(e,r);return a?le(t,a,n):n}("OnlineResource","xlink:href",i,null);if(s)return s.indexOf("&")===s.length-1&&(s=s.substring(0,s.length-1)),function(e,t){var r=[],n=Object(I.J)(e);for(var a in n.query)n.query.hasOwnProperty(a)&&-1===t.indexOf(a.toLowerCase())&&r.push(a+"="+n.query[a]);return n.path+(r.length?"?"+r.join("&"):"")}(s,["service","request"])}}}}return null}function he(e,t){var r=be("Operation",e);if(0===r.length)return be("Format",ce(t,e)).map((function(e){return e.textContent}));var n=[];return r.forEach((function(e){e.getAttribute("name")===t&&be("Format",e).forEach((function(e){n.push(e.textContent)}))})),n}function ye(e,t,r){var n=ce(t,e);if(!n)return r;var a=n.textContent;if(null==a||""===a)return r;var i=Number(a);return isNaN(i)?r:i}function ve(e,t,r){var n;if(!e)return null;var a={id:r.idCounter++,fullExtents:[],parentLayerId:null,queryable:"1"===e.getAttribute("queryable"),spatialReferences:[],sublayers:null},i=ce("LatLonBoundingBox",e),s=ce("EX_GeographicBoundingBox",e),o=null;i&&(o=pe(i,4326)),s&&((o=new D.a(0,0,0,0,new A.a({wkid:4326}))).xmin=parseFloat(fe("westBoundLongitude",s,"0")),o.ymin=parseFloat(fe("southBoundLatitude",s,"0")),o.xmax=parseFloat(fe("eastBoundLongitude",s,"0")),o.ymax=parseFloat(fe("northBoundLatitude",s,"0"))),i||s||(o=new D.a(-180,-90,180,90,new A.a({wkid:4326}))),a.minScale=ye(e,"MaxScaleDenominator",0),a.maxScale=ye(e,"MinScaleDenominator",0);var u=["1.0.0","1.1.0","1.1.1"].indexOf(t)>-1?"SRS":"CRS";return Array.prototype.slice.call(e.childNodes).forEach((function(e){if("Name"===e.nodeName)a.name=e.textContent||"";else if("Title"===e.nodeName)a.title=e.textContent||"";else if("Abstract"===e.nodeName)a.description=e.textContent||"";else if("BoundingBox"===e.nodeName){var n=e.getAttribute(u);if(n&&0===n.indexOf("EPSG:")){var i=parseInt(n.substring(5),10);0===i||isNaN(i)||o||(o="1.3.0"===t?pe(e,i,oe(i)):pe(e,i))}var s=n&&n.indexOf(":");if(s&&s>-1){var l=parseInt(n.substring(s+1,n.length),10);0===l||isNaN(l)||(l=ie[l]?ie[l]:l);var c="1.3.0"===t?pe(e,l,oe(l)):pe(e,l);a.fullExtents.push(c)}}else if(e.nodeName===u)e.textContent.split(" ").forEach((function(e){0===(e=e.indexOf(":")>-1?parseInt(e.split(":")[1],10):parseInt(e,10))||isNaN(e)||(ie[e]&&(e=ie[e]),-1===a.spatialReferences.indexOf(e)&&a.spatialReferences.push(e))}));else if("Style"!==e.nodeName||a.legendURL){if("Layer"===e.nodeName){var b=ve(e,t,r);b&&(b.parentLayerId=a.id,a.sublayers||(a.sublayers=[]),a.sublayers.push(b))}}else{var f=ce("LegendURL",e);if(f){var p=ce("OnlineResource",f);p&&(a.legendURL=p.getAttribute("xlink:href"))}}})),a.extent=null==(n=o)?void 0:n.toJSON(),a.dimensions=be("Dimension",e).filter((function(e){return e.getAttribute("name")&&e.getAttribute("units")&&e.textContent})).map((function(e){var t=e.getAttribute("name"),r=e.getAttribute("units"),n=e.textContent,a=e.getAttribute("unitSymbol"),i=e.getAttribute("default"),s="0"!==le("default",e,"0"),o="0"!==le("nearestValue",e,"0"),u="0"!==le("current",e,"0");return/^time$/i.test(t)&&/^ISO8601$/i.test(r)?{name:"time",units:"ISO8601",extent:we(n),default:we(i),multipleValues:s,nearestValue:o,current:u}:/^elevation$/i.test(t)?{name:"elevation",units:r,extent:je(n),unitSymbol:a,default:je(i),multipleValues:s,nearestValue:o}:{name:t,units:r,extent:ge(n),unitSymbol:a,default:ge(i),multipleValues:s,nearestValue:o}})),a}function me(e){return e.nodeType===Node.ELEMENT_NODE}function Oe(e){return"time"===e.name}function je(e){if(!e)return null;var t=-1!==e.indexOf("/"),r=e.split(",");return t?r.map((function(e){var t=e.split("/");return t.length<2?null:{min:parseFloat(t[0]),max:parseFloat(t[1]),resolution:t.length>=3&&"0"!==t[2]?parseFloat(t[2]):void 0}})).filter((function(e){return e})):r.map((function(e){return parseFloat(e)}))}function ge(e){if(!e)return null;var t=-1!==e.indexOf("/"),r=e.split(",");return t?r.map((function(e){var t=e.split("/");return t.length<2?null:{min:t[0],max:t[1],resolution:t.length>=3&&"0"!==t[2]?t[2]:void 0}})).filter((function(e){return e})):r}function we(e){if(!e)return null;var t=-1!==e.indexOf("/"),r=e.split(",");return t?r.map((function(e){var t=e.split("/");return t.length<2?null:{min:new Date(t[0]),max:new Date(t[1]),resolution:t.length>=3&&"0"!==t[2]?xe(t[2]):void 0}})).filter((function(e){return e})):r.map((function(e){return new Date(e)}))}function xe(e){var t=e.match(/(?:p(\d+y|\d+(?:.|,)\d+y)?(\d+m|\d+(?:.|,)\d+m)?(\d+d|\d+(?:.|,)\d+d)?)?(?:t(\d+h|\d+(?:.|,)\d+h)?(\d+m|\d+(?:.|,)\d+m)?(\d+s|\d+(?:.|,)\d+s)?)?/i);return t?{years:Me(t[1]),months:Me(t[2]),days:Me(t[3]),hours:Me(t[4]),minutes:Me(t[5]),seconds:Me(t[6])}:null}function Me(e){if(!e)return 0;var t=e.match(/(?:\d+(?:.|,)\d+|\d+)/);if(!t)return 0;var r=t[0].replace(",",".");return Number(r)}function Se(e){return e.toISOString().replace(/\.[0-9]{3}/,"")}var ke=new Set([102100,3857,102113,900913]),Ie=new Set([3395,54004]);var Ee=new w.a({bmp:"image/bmp",gif:"image/gif",jpg:"image/jpeg",png:"image/png",svg:"image/svg+xml"},{ignoreUnknown:!1}),Te=function(e){Object(f.a)(r,e);var t=Object(p.a)(r);function r(){var e;Object(l.a)(this,r);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).allSublayers=new j.a({getCollections:function(){return[e.sublayers]},getChildrenFunction:function(e){return e.sublayers}}),e.customParameters=null,e.customLayerParameters=null,e.copyright=null,e.description=null,e.dimensions=null,e.fullExtent=null,e.fullExtents=null,e.featureInfoFormat=null,e.featureInfoUrl=null,e.imageFormat=null,e.imageMaxHeight=2048,e.imageMaxWidth=2048,e.imageTransparency=!0,e.legendEnabled=!0,e.mapUrl=null,e.isReference=null,e.operationalLayerType="WMS",e.spatialReference=null,e.spatialReferences=null,e.sublayers=null,e.type="wms",e.url=null,e.version=null,e.watch("sublayers",(function(t,r){if(r){var n,a=Object(u.a)(r);try{for(a.s();!(n=a.n()).done;){n.value.layer=null}}catch(l){a.e(l)}finally{a.f()}e.handles.remove("wms-sublayer")}if(t){var i,s=Object(u.a)(t);try{for(s.s();!(i=s.n()).done;){var o=i.value;o.parent=Object(b.a)(e),o.layer=Object(b.a)(e)}}catch(l){s.e(l)}finally{s.f()}e.handles.add([t.on("after-add",(function(t){var r=t.item;r.parent=Object(b.a)(e),r.layer=Object(b.a)(e)})),t.on("after-remove",(function(e){var t=e.item;t.parent=null,t.layer=null}))],"wms-sublayer")}}),!0),e}return Object(c.a)(r,[{key:"normalizeCtorArgs",value:function(e,t){return"string"==typeof e?Object(o.a)({url:e},t):e}},{key:"load",value:function(e){var t=this,r=Object(M.j)(e)?e.signal:null;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["WMS"]},e).catch(k.u).then((function(){return t._fetchService(r)}))),Promise.resolve(this)}},{key:"readFullExtentFromItemOrMap",value:function(e,t){var r=t.extent;return new D.a({xmin:r[0][0],ymin:r[0][1],xmax:r[1][0],ymax:r[1][1]})}},{key:"writeFullExtent",value:function(e,t){t.extent=[[e.xmin,e.ymin],[e.xmax,e.ymax]]}},{key:"readImageFormat",value:function(e,t){var r=t.supportedImageFormatTypes;return r&&r.indexOf("image/png")>-1?"image/png":r&&r[0]}},{key:"readSpatialReferenceFromItemOrDocument",value:function(e,t){return new A.a(t.spatialReferences[0])}},{key:"writeSpatialReferences",value:function(e,t){var r=this.spatialReference&&this.spatialReference.wkid;e&&r?(t.spatialReferences=e.filter((function(e){return e!==r})),t.spatialReferences.unshift(r)):t.spatialReferences=e}},{key:"readSublayersFromItemOrMap",value:function(e,t,r){return Ne(t.layers,r,t.visibleLayers)}},{key:"readSublayers",value:function(e,t,r){return Ne(t.layers,r)}},{key:"writeSublayers",value:function(e,t,r,n){t.layers=[];var a=new Map,i=e.flatten((function(e){var t=e.sublayers;return t&&t.toArray()})).toArray();i.forEach((function(e){"number"==typeof e.parent.id&&(a.has(e.parent.id)?a.get(e.parent.id).push(e.id):a.set(e.parent.id,[e.id]))})),i.forEach((function(e){var r=Object(o.a)({sublayer:e},n),i=e.write({parentLayerId:"number"==typeof e.parent.id?e.parent.id:-1},r);if(a.has(e.id)&&(i.sublayerIds=a.get(e.id)),!e.sublayers&&e.name){var s=e.write({},r);delete s.id,t.layers.push(s)}})),t.visibleLayers=i.filter((function(e){return e.visible&&!e.sublayers})).map((function(e){return e.name}))}},{key:"createExportImageParameters",value:function(e,t,r,n){var a=n&&n.pixelRatio||1,i=Object(R.b)({extent:e,width:t})*a,u=new z({layer:this,scale:i}),l=e.xmin,c=e.ymin,b=e.xmax,f=e.ymax,p=function(e,t){var r=e.wkid;return Object(M.i)(t)?r:(!t.includes(r)&&e.latestWkid&&(r=e.latestWkid),ke.has(r)?t.find((function(e){return ke.has(e)}))||t.find((function(e){return Ie.has(e)}))||102100:r)}(e.spatialReference,this.spatialReferences),d="1.3.0"===this.version&&oe(p)?"".concat(c,",").concat(l,",").concat(f,",").concat(b):"".concat(l,",").concat(c,",").concat(b,",").concat(f),h=u.toJSON();return Object(o.a)(Object(s.a)({bbox:d},"1.3.0"===this.version?"crs":"srs",isNaN(p)?void 0:"EPSG:"+p),h)}},{key:"fetchImage",value:function(){var e=Object(i.a)(a.a.mark((function e(t,r,n,i){var s,u,l,c,b,f,p,d,h;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l=this.mapUrl,(c=this.createExportImageParameters(t,r,n,i)).layers){e.next=4;break}return b=document.createElement("canvas"),e.abrupt("return",(b.width=r,b.height=n,b));case 4:return f=null==i||null==(s=i.timeExtent)?void 0:s.start,p=null==i||null==(u=i.timeExtent)?void 0:u.end,d=Object(M.j)(f)&&Object(M.j)(p)?f.getTime()===p.getTime()?Se(f):"".concat(Se(f),"/").concat(Se(p)):void 0,h={responseType:"image",query:this._mixCustomParameters(Object(o.a)(Object(o.a)({width:r,height:n},c),{},{time:d},this.refreshParameters)),signal:null==i?void 0:i.signal},e.abrupt("return",Object(m.default)(l,h).then((function(e){return e.data})));case 6:case"end":return e.stop()}}),e,this)})));return function(t,r,n,a){return e.apply(this,arguments)}}()},{key:"fetchFeatureInfo",value:function(e,t,r,n,a){var i=Object(R.b)({extent:e,width:t}),s=function(e){return e.length?e.filter((function(e){return e.popupEnabled&&e.name&&e.queryable})).map((function(e){return e.name})).join(","):""}(new z({layer:this,scale:i}).visibleSublayers);if(!this.featureInfoUrl||!s)return null;var u="1.3.0"===this.version?{I:n,J:a}:{x:n,y:a},l=Object(o.a)({query_layers:s,request:"GetFeatureInfo",info_format:this.featureInfoFormat,feature_count:25,width:t,height:r},u),c=Object(o.a)(Object(o.a)({},this.createExportImageParameters(e,t,r)),l),b=this._mixCustomParameters(c),f=Object(I.e)(this.featureInfoUrl,b),p=document.createElement("iframe");p.src=f,p.frameBorder="0",p.marginHeight="0",p.marginWidth="0",p.style.width="100%",p.setAttribute("sandbox","");var d=new v.a({title:this.title,content:p});return new y.a({sourceLayer:this,popupTemplate:d})}},{key:"findSublayerById",value:function(e){return this.allSublayers.find((function(t){return t.id===e}))}},{key:"findSublayerByName",value:function(e){return this.allSublayers.find((function(t){return t.name===e}))}},{key:"supportsSpatialReference",value:function(e){return Object(J.d)(this.url)||this.spatialReferences.some((function(t){var r=900913===t?A.a.WebMercator:new A.a({wkid:t});return Object(L.d)(r,e)}))}},{key:"_fetchService",value:function(){var e=Object(i.a)(a.a.mark((function e(t){var r,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.resourceInfo){e.next=6;break}return this.parsedUrl.query&&this.parsedUrl.query.service&&(this.parsedUrl.query.SERVICE=this.parsedUrl.query.service,delete this.parsedUrl.query.service),this.parsedUrl.query&&this.parsedUrl.query.request&&(this.parsedUrl.query.REQUEST=this.parsedUrl.query.request,delete this.parsedUrl.query.request),e.next=4,Object(m.default)(this.parsedUrl.path,{query:Object(o.a)(Object(o.a)({SERVICE:"WMS",REQUEST:"GetCapabilities"},this.parsedUrl.query),this.customParameters),responseType:"xml",signal:t});case 4:r=e.sent,this.resourceInfo=se(r.data);case 6:this.parsedUrl&&("https"!==(n=new I.a(this.parsedUrl.path)).scheme||n.port&&"443"!==n.port||-1!==h.a.request.httpsDomains.indexOf(n.host)||h.a.request.httpsDomains.push(n.host)),this.read(this.resourceInfo,{origin:"service"});case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_mixCustomParameters",value:function(e){if(!this.customLayerParameters&&!this.customParameters)return e;var t=Object(o.a)(Object(o.a)({},this.customParameters),this.customLayerParameters);for(var r in t)e[r.toLowerCase()]=t[r];return e}}]),r}(Object(g.b)(Object(C.a)(Object(B.a)(Object(V.a)(Object(W.a)(Object(q.a)(Object(H.a)(Object(S.a)(P.a)))))))));function Ne(e,t,r){var n=new Map;e.every((function(e){return null==e.id}))&&(e=Object(x.a)(e)).forEach((function(e,t){return e.id=t}));var a,i=Object(u.a)(e);try{for(i.s();!(a=i.n()).done;){var s=a.value,o=new te;o.read(s,t),-1===(null==r?void 0:r.indexOf(o.name))&&(o.visible=!1),n.set(o.id,o)}}catch(h){i.e(h)}finally{i.f()}var l,c=[],b=Object(u.a)(e);try{for(b.s();!(l=b.n()).done;){var f=l.value,p=n.get(f.id);if(null!=f.parentLayerId&&f.parentLayerId>=0){var d=n.get(f.parentLayerId);d.sublayers||(d.sublayers=new s),d.sublayers.unshift(p)}else c.unshift(p)}}catch(h){b.e(h)}finally{b.f()}return c}Object(d.a)([Object(E.b)({readOnly:!0})],Te.prototype,"allSublayers",void 0),Object(d.a)([Object(E.b)({json:{type:Object,write:!0}})],Te.prototype,"customParameters",void 0),Object(d.a)([Object(E.b)({json:{type:Object,write:!0}})],Te.prototype,"customLayerParameters",void 0),Object(d.a)([Object(E.b)({type:String,json:{write:!0}})],Te.prototype,"copyright",void 0),Object(d.a)([Object(E.b)()],Te.prototype,"description",void 0),Object(d.a)([Object(E.b)({readOnly:!0})],Te.prototype,"dimensions",void 0),Object(d.a)([Object(E.b)({json:{type:[[Number]],read:{source:"extent"},write:{target:"extent"},origins:{"web-document":{write:{ignoreOrigin:!0}},"portal-item":{write:{ignoreOrigin:!0}}}}})],Te.prototype,"fullExtent",void 0),Object(d.a)([Object(N.a)(["web-document","portal-item"],"fullExtent",["extent"])],Te.prototype,"readFullExtentFromItemOrMap",null),Object(d.a)([Object(U.a)(["web-document","portal-item"],"fullExtent",{extent:{type:[[Number]]}})],Te.prototype,"writeFullExtent",null),Object(d.a)([Object(E.b)()],Te.prototype,"fullExtents",void 0),Object(d.a)([Object(E.b)({type:String,json:{write:{ignoreOrigin:!0}}})],Te.prototype,"featureInfoFormat",void 0),Object(d.a)([Object(E.b)({type:String,json:{write:{ignoreOrigin:!0}}})],Te.prototype,"featureInfoUrl",void 0),Object(d.a)([Object(E.b)({type:String,json:{origins:{"web-document":{default:"image/png",type:Ee.jsonValues,read:{reader:Ee.read,source:"format"},write:{writer:Ee.write,target:"format"}}}}})],Te.prototype,"imageFormat",void 0),Object(d.a)([Object(N.a)("imageFormat",["supportedImageFormatTypes"])],Te.prototype,"readImageFormat",null),Object(d.a)([Object(E.b)({type:Number,json:{read:{source:"maxHeight"},write:{target:"maxHeight"}}})],Te.prototype,"imageMaxHeight",void 0),Object(d.a)([Object(E.b)({type:Number,json:{read:{source:"maxWidth"},write:{target:"maxWidth"}}})],Te.prototype,"imageMaxWidth",void 0),Object(d.a)([Object(E.b)()],Te.prototype,"imageTransparency",void 0),Object(d.a)([Object(E.b)(Y.e)],Te.prototype,"legendEnabled",void 0),Object(d.a)([Object(E.b)({type:["show","hide","hide-children"]})],Te.prototype,"listMode",void 0),Object(d.a)([Object(E.b)({type:String,json:{write:{ignoreOrigin:!0}}})],Te.prototype,"mapUrl",void 0),Object(d.a)([Object(E.b)({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:function(){return{enabled:!1}}}}})],Te.prototype,"isReference",void 0),Object(d.a)([Object(E.b)({type:["WMS"]})],Te.prototype,"operationalLayerType",void 0),Object(d.a)([Object(E.b)({type:A.a,json:{origins:{service:{read:{source:"extent.spatialReference"}}},write:!1}})],Te.prototype,"spatialReference",void 0),Object(d.a)([Object(N.a)(["web-document","portal-item"],"spatialReference",["spatialReferences"])],Te.prototype,"readSpatialReferenceFromItemOrDocument",null),Object(d.a)([Object(E.b)({type:[T.a],json:{read:!1,origins:{service:{read:!0},"web-document":{read:!1,write:{ignoreOrigin:!0}},"portal-item":{read:!1,write:{ignoreOrigin:!0}}}}})],Te.prototype,"spatialReferences",void 0),Object(d.a)([Object(U.a)(["web-document","portal-item"],"spatialReferences")],Te.prototype,"writeSpatialReferences",null),Object(d.a)([Object(E.b)({type:O.a.ofType(te),json:{write:{target:"layers",overridePolicy:function(e,t,r){if(function(e,t){return e.some((function(e){for(var r in e)if(Object(_.a)(e,r,null,t))return!0;return!1}))}(this.allSublayers,r))return{ignoreOrigin:!0}}}}})],Te.prototype,"sublayers",void 0),Object(d.a)([Object(N.a)(["web-document","portal-item"],"sublayers",["layers","visibleLayers"])],Te.prototype,"readSublayersFromItemOrMap",null),Object(d.a)([Object(N.a)("service","sublayers",["layers"])],Te.prototype,"readSublayers",null),Object(d.a)([Object(U.a)("sublayers",{layers:{type:[te]},visibleLayers:{type:[String]}})],Te.prototype,"writeSublayers",null),Object(d.a)([Object(E.b)({json:{read:!1},readOnly:!0,value:"wms"})],Te.prototype,"type",void 0),Object(d.a)([Object(E.b)(Y.n)],Te.prototype,"url",void 0),Object(d.a)([Object(E.b)({type:String,json:{write:{ignoreOrigin:!0}}})],Te.prototype,"version",void 0);var Fe=Te=Object(d.a)([Object(F.a)("esri.layers.WMSLayer")],Te)},665:function(e,t,r){"use strict";r.d(t,"a",(function(){return O}));var n,a=r(2),i=r(4),s=r(5),o=r(6),u=r(0),l=r(26),c=r(11),b=r(692),f=r(1),p=(r(19),r(14),r(15),r(57)),d=r(10),h=r(43),y=n=function(e){Object(s.a)(r,e);var t=Object(o.a)(r);function r(e){var n;return Object(a.a)(this,r),(n=t.call(this,e)).end=null,n.start=null,n}return Object(i.a)(r,[{key:"readEnd",value:function(e,t){return null!=t.end?new Date(t.end):null}},{key:"writeEnd",value:function(e,t){t.end=e?e.getTime():null}},{key:"isAllTime",get:function(){return this.equals(n.allTime)}},{key:"isEmpty",get:function(){return this.equals(n.empty)}},{key:"readStart",value:function(e,t){return null!=t.start?new Date(t.start):null}},{key:"writeStart",value:function(e,t){t.start=e?e.getTime():null}},{key:"clone",value:function(){return new n({end:this.end,start:this.start})}},{key:"equals",value:function(e){if(!e)return!1;var t=Object(c.j)(this.start)?this.start.getTime():this.start,r=Object(c.j)(this.end)?this.end.getTime():this.end,n=Object(c.j)(e.start)?e.start.getTime():e.start,a=Object(c.j)(e.end)?e.end.getTime():e.end;return t===n&&r===a}},{key:"expandTo",value:function(e){if(this.isEmpty||this.isAllTime)return this.clone();var t=Object(c.a)(this.start,(function(t){return Object(b.c)(t,e)})),r=Object(c.a)(this.end,(function(t){return Object(b.b)(Object(b.c)(t,e),1,e)}));return new n({start:t,end:r})}},{key:"intersection",value:function(e){if(!e)return this.clone();if(this.isEmpty||e.isEmpty)return n.empty;if(this.isAllTime)return e.clone();if(e.isAllTime)return this.clone();var t,r,a=Object(c.m)(this.start,-1/0,(function(e){return e.getTime()})),i=Object(c.m)(this.end,1/0,(function(e){return e.getTime()})),s=Object(c.m)(e.start,-1/0,(function(e){return e.getTime()})),o=Object(c.m)(e.end,1/0,(function(e){return e.getTime()}));if(s>=a&&s<=i?t=s:a>=s&&a<=o&&(t=a),i>=s&&i<=o?r=i:o>=a&&o<=i&&(r=o),!isNaN(t)&&!isNaN(r)){var u=new n;return u.start=t===-1/0?null:new Date(t),u.end=r===1/0?null:new Date(r),u}return n.empty}},{key:"offset",value:function(e,t){if(this.isEmpty||this.isAllTime)return this.clone();var r=new n,a=this.start,i=this.end;return Object(c.j)(a)&&(r.start=Object(b.b)(a,e,t)),Object(c.j)(i)&&(r.end=Object(b.b)(i,e,t)),r}},{key:"union",value:function(e){if(!e||e.isEmpty)return this.clone();if(this.isEmpty)return e.clone();if(this.isAllTime||e.isAllTime)return v.clone();var t=Object(c.j)(this.start)&&Object(c.j)(e.start)?new Date(Math.min(this.start.getTime(),e.start.getTime())):null,r=Object(c.j)(this.end)&&Object(c.j)(e.end)?new Date(Math.max(this.end.getTime(),e.end.getTime())):null;return new n({start:t,end:r})}}],[{key:"allTime",get:function(){return v}},{key:"empty",get:function(){return m}}]),r}(l.a);Object(u.a)([Object(f.b)({type:Date,json:{write:{allowNull:!0}}})],y.prototype,"end",void 0),Object(u.a)([Object(p.a)("end")],y.prototype,"readEnd",null),Object(u.a)([Object(h.a)("end")],y.prototype,"writeEnd",null),Object(u.a)([Object(f.b)({readOnly:!0,json:{read:!1}})],y.prototype,"isAllTime",null),Object(u.a)([Object(f.b)({readOnly:!0,json:{read:!1}})],y.prototype,"isEmpty",null),Object(u.a)([Object(f.b)({type:Date,json:{write:{allowNull:!0}}})],y.prototype,"start",void 0),Object(u.a)([Object(p.a)("start")],y.prototype,"readStart",null),Object(u.a)([Object(h.a)("start")],y.prototype,"writeStart",null);var v=new(y=n=Object(u.a)([Object(d.a)("esri.TimeExtent")],y)),m=new y({start:void 0,end:void 0}),O=y},669:function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var n=r(42),a=Object(n.b)()({esriTimeUnitsMilliseconds:"milliseconds",esriTimeUnitsSeconds:"seconds",esriTimeUnitsMinutes:"minutes",esriTimeUnitsHours:"hours",esriTimeUnitsDays:"days",esriTimeUnitsWeeks:"weeks",esriTimeUnitsMonths:"months",esriTimeUnitsYears:"years",esriTimeUnitsDecades:"decades",esriTimeUnitsCenturies:"centuries",esriTimeUnitsUnknown:void 0})},676:function(e,t,r){"use strict";r.d(t,"a",(function(){return h})),r.d(t,"b",(function(){return f})),r.d(t,"c",(function(){return v})),r.d(t,"d",(function(){return g})),r.d(t,"e",(function(){return p})),r.d(t,"f",(function(){return d})),r.d(t,"g",(function(){return m})),r.d(t,"h",(function(){return O})),r.d(t,"i",(function(){return y})),r.d(t,"j",(function(){return j}));var n=r(22),a=r(11),i=r(27),s=r(87),o={mapserver:"MapServer",imageserver:"ImageServer",featureserver:"FeatureServer",sceneserver:"SceneServer",streamserver:"StreamServer",vectortileserver:"VectorTileServer"},u=Object.values(o),l=new RegExp("^((?:https?:)?\\/\\/\\S+?\\/rest\\/services\\/(.+?)\\/(".concat(u.join("|"),"))(?:\\/(?:layers\\/)?(\\d+))?"),"i"),c=new RegExp("^((?:https?:)?\\/\\/\\S+?\\/([^\\/\\n]+)\\/(".concat(u.join("|"),"))(?:\\/(?:layers\\/)?(\\d+))?"),"i"),b=/(.*?)\/(?:layers\/)?(\d+)\/?$/i;function f(e){return!!l.test(e)}function p(e){var t=Object(i.J)(e),r=t.path.match(l)||t.path.match(c);if(!r)return null;var a=Object(n.a)(r,5),s=a[1],u=a[2],b=a[3],f=a[4],p=u.indexOf("/");return{title:h(-1!==p?u.slice(p+1):u),serverType:o[b.toLowerCase()],sublayer:null!=f&&""!==f?parseInt(f,10):null,url:{path:s}}}function d(e){var t=Object(i.J)(e).path.match(b);return t?{serviceUrl:t[1],sublayerId:Number(t[2])}:null}function h(e){return(e=e.replace(/\s*[/_]+\s*/g," "))[0].toUpperCase()+e.slice(1)}function y(e,t){var r=[];if(e){var n=p(e);Object(a.j)(n)&&n.title&&r.push(n.title)}if(t){var i=h(t);r.push(i)}if(2===r.length){if(-1!==r[0].toLowerCase().indexOf(r[1].toLowerCase()))return r[0];if(-1!==r[1].toLowerCase().indexOf(r[0].toLowerCase()))return r[1]}return r.join(" - ")}function v(e){if(!e)return!1;var t=-1!==(e=e.toLowerCase()).indexOf(".arcgis.com/"),r=-1!==e.indexOf("//services")||-1!==e.indexOf("//tiles")||-1!==e.indexOf("//features");return t&&r}function m(e,t){return e?Object(i.H)(Object(i.G)(e,t)):e}function O(e){var t=e.url;if(!t)return{url:t};t=Object(i.G)(t,e.logger);var r,n=Object(i.J)(t),s=p(n.path);if(Object(a.j)(s))null!=s.sublayer&&null==e.layer.layerId&&(r=s.sublayer),t=s.url.path;else if(e.nonStandardUrlAllowed){var o=d(n.path);Object(a.j)(o)&&(t=o.serviceUrl,r=o.sublayerId)}return{url:Object(i.H)(t),layerId:r}}function j(e,t,r,n,a){Object(s.f)(t,n,"url",a),n.url&&null!=e.layerId&&(n.url=Object(i.y)(n.url,r,e.layerId.toString()))}function g(e){if(!e)return!1;var t=e.toLowerCase(),r=-1!==t.indexOf("/services/"),n=-1!==t.indexOf("/mapserver/wmsserver"),a=-1!==t.indexOf("/imageserver/wmsserver"),i=-1!==t.indexOf("/wmsserver");return r&&(n||a||i)}},677:function(e,t,r){"use strict";r.d(t,"a",(function(){return M})),r.d(t,"b",(function(){return S}));var n=r(21),a=r(2),i=r(4),s=r(5),o=r(6),u=r(0),l=r(60),c=r(8),b=r(11),f=r(23),p=r(18),d=r(164),h=function(){function e(){Object(a.a)(this,e),this._propertyOriginMap=new Map,this._originStores=new Array(d.a),this._values=new Map}return Object(i.a)(e,[{key:"clone",value:function(t){var r=this,n=new e,a=this._originStores[0];a&&a.forEach((function(e,t){n.set(t,Object(p.a)(e),0)}));for(var i=function(e){var a=r._originStores[e];a&&a.forEach((function(r,a){t&&t.has(a)||n.set(a,Object(p.a)(r),e)}))},s=2;s<d.a;s++)i(s);return n}},{key:"get",value:function(e,t){var r=void 0===t?this._values:this._originStores[t];return r?r.get(e):void 0}},{key:"keys",value:function(e){var t=null==e?this._values:this._originStores[e];return t?Object(f.a)(t.keys()):[]}},{key:"set",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:6,n=this._originStores[r];if(n||(n=new Map,this._originStores[r]=n),n.set(e,t),!this._values.has(e)||Object(b.c)(this._propertyOriginMap.get(e))<=r){var a=this._values.get(e);return this._values.set(e,t),this._propertyOriginMap.set(e,r),a!==t}return!1}},{key:"delete",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6,r=this._originStores[t];if(r){var n=r.get(e);if(r.delete(e),this._values.has(e)&&this._propertyOriginMap.get(e)===t){this._values.delete(e);for(var a=t-1;a>=0;a--){var i=this._originStores[a];if(i&&i.has(e)){this._values.set(e,i.get(e)),this._propertyOriginMap.set(e,a);break}}}return n}}},{key:"has",value:function(e,t){var r=void 0===t?this._values:this._originStores[t];return!!r&&r.has(e)}},{key:"revert",value:function(e,t){for(;t>0&&!this.has(e,t);)--t;var r=this._originStores[t],n=r&&r.get(e),a=this._values.get(e);return this._values.set(e,n),this._propertyOriginMap.set(e,t),a!==n}},{key:"originOf",value:function(e){return this._propertyOriginMap.get(e)||0}},{key:"forEach",value:function(e){this._values.forEach(e)}}]),e}(),y=r(336),v=r(69),m=r(10),O=function(e){var t=function(e){Object(s.a)(r,e);var t=Object(o.a)(r);function r(){var e;Object(a.a)(this,r);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];e=t.call.apply(t,[this].concat(i));var o=Object(b.c)(Object(v.a)(Object(c.a)(e))),u=o.metadatas,l=o.store,f=new h;return o.store=f,l.keys().forEach((function(e){f.set(e,l.get(e),0)})),Object.keys(u).forEach((function(e){o.internalGet(e)&&f.set(e,o.internalGet(e),0)})),e}return Object(i.a)(r,[{key:"read",value:function(e,t){Object(y.a)(this,e,t)}},{key:"getAtOrigin",value:function(e,t){var r=j(this),n=Object(d.d)(t);if("string"==typeof e)return r.get(e,n);var a={};return e.forEach((function(e){a[e]=r.get(e,n)})),a}},{key:"originOf",value:function(e){return Object(d.b)(this.originIdOf(e))}},{key:"originIdOf",value:function(e){return j(this).originOf(e)}},{key:"revert",value:function(e,t){var r=j(this),n=Object(d.d)(t),a=Object(v.a)(this);("string"==typeof e?"*"===e?r.keys(n):[e]:e).forEach((function(e){a.invalidate(e),r.revert(e,n),a.commit(e)}))}}]),r}(e);return t=Object(u.a)([Object(m.a)("esri.core.ReadOnlyMultiOriginJSONSupport")],t),t};function j(e){return Object(v.a)(e).store}var g=function(e){Object(s.a)(r,e);var t=Object(o.a)(r);function r(){return Object(a.a)(this,r),t.apply(this,arguments)}return r}(O(l.a));g=Object(u.a)([Object(m.a)("esri.core.ReadOnlyMultiOriginJSONSupport")],g);var w=r(335);function x(e){return Object(v.a)(e).store}var M=function(e){var t=function(e){Object(s.a)(r,e);var t=Object(o.a)(r);function r(){Object(a.a)(this,r);for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return t.call.apply(t,[this].concat(n))}return r}(function(e){var t=function(e){Object(s.a)(r,e);var t=Object(o.a)(r);function r(){Object(a.a)(this,r);for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return t.call.apply(t,[this].concat(n))}return Object(i.a)(r,[{key:"clear",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"user";return x(this).delete(e,Object(d.d)(t))}},{key:"write",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return Object(w.b)(this,e=e||{},t),e}},{key:"setAtOrigin",value:function(e,t,r){Object(v.a)(this).setAtOrigin(e,t,Object(d.d)(r))}},{key:"removeOrigin",value:function(e){var t,r=x(this),a=Object(d.d)(e),i=r.keys(a),s=Object(n.a)(i);try{for(s.s();!(t=s.n()).done;){var o=t.value;r.originOf(o)===a&&r.set(o,r.get(o,a),6)}}catch(u){s.e(u)}finally{s.f()}}},{key:"updateOrigin",value:function(e,t){for(var r=x(this),n=Object(d.d)(t),a=this.get(e),i=n+1;i<d.a;++i)r.delete(e,i);r.set(e,a,n)}},{key:"toJSON",value:function(e){return this.write({},e)}}]),r}(e);return(t=Object(u.a)([Object(m.a)("esri.core.WriteableMultiOriginJSONSupport")],t)).prototype.toJSON.isDefaultToJSON=!0,t}(O(e)));return t=Object(u.a)([Object(m.a)("esri.core.MultiOriginJSONSupport")],t)},S=function(e){Object(s.a)(r,e);var t=Object(o.a)(r);function r(){return Object(a.a)(this,r),t.apply(this,arguments)}return r}(M(l.a));S=Object(u.a)([Object(m.a)("esri.core.MultiOriginJSONSupport")],S)},678:function(e,t,r){"use strict";r.d(t,"a",(function(){return h}));var n,a=r(2),i=r(4),s=r(5),o=r(6),u=r(0),l=r(26),c=r(692),b=r(1),f=(r(19),r(14),r(15),r(10)),p=r(669),d=n=function(e){Object(s.a)(r,e);var t=Object(o.a)(r);function r(e){var n;return Object(a.a)(this,r),(n=t.call(this,e)).value=0,n.unit="milliseconds",n}return Object(i.a)(r,[{key:"toMilliseconds",value:function(){return Object(c.a)(this.value,this.unit,"milliseconds")}},{key:"clone",value:function(){return new n({value:this.value,unit:this.unit})}}]),r}(l.a);Object(u.a)([Object(b.b)({type:Number,json:{write:!0},nonNullable:!0})],d.prototype,"value",void 0),Object(u.a)([Object(b.b)({type:p.a.apiValues,json:{type:p.a.jsonValues,read:p.a.read,write:p.a.write},nonNullable:!0})],d.prototype,"unit",void 0);var h=d=n=Object(u.a)([Object(f.a)("esri.TimeInterval")],d)},682:function(e,t,r){"use strict";r.d(t,"a",(function(){return I}));var n=r(7),a=r.n(n),i=r(12),s=r(2),o=r(4),u=r(5),l=r(6),c=r(0),b=r(68),f=(r(114),r(82)),p=r(29),d=r(184),h=r(239),y=r(142),v=r(15),m=r(30),O=r(27),j=r(1),g=(r(19),r(14),r(10)),w=r(58),x=r(45),M=0,S=v.a.getLogger("esri.layers.Layer"),k=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){var e;return Object(s.a)(this,n),(e=t.apply(this,arguments)).attributionDataUrl=null,e.fullExtent=new w.a(-180,-90,180,90,x.a.WGS84),e.id=Date.now().toString(16)+"-layer-"+M++,e.legendEnabled=!0,e.listMode="show",e.opacity=1,e.parent=null,e.popupEnabled=!0,e.attributionVisible=!0,e.spatialReference=x.a.WGS84,e.title=null,e.type=null,e.url=null,e.visible=!0,e}return Object(o.a)(n,[{key:"initialize",value:function(){var e=this;this.when().catch((function(t){var r,n;Object(m.m)(t)||v.a.getLogger(e.declaredClass).error("#load()","Failed to load layer (title: '".concat(null!=(r=e.title)?r:"no title","', id: '").concat(null!=(n=e.id)?n:"no id","')"),{error:t})}))}},{key:"destroy",value:function(){if(this.parent){var e=this,t=this.parent;"layers"in t&&t.layers.includes(e)?t.layers.remove(e):"tables"in t&&t.tables.includes(e)?t.tables.remove(e):"baseLayers"in t&&t.baseLayers.includes(e)?t.baseLayers.remove(e):"baseLayers"in t&&t.referenceLayers.includes(e)&&t.referenceLayers.remove(e)}}},{key:"hasAttributionData",get:function(){return null!=this.attributionDataUrl}},{key:"parsedUrl",get:function(){var e=this.url;return e?Object(O.J)(e):null}},{key:"fetchAttributionData",value:function(){var e=Object(i.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.attributionDataUrl,!this.hasAttributionData||!t){e.next=5;break}return e.next=4,Object(f.default)(t,{query:{f:"json"},responseType:"json"});case 4:return e.abrupt("return",e.sent.data);case 5:throw new p.a("layer:no-attribution-data","Layer does not have attribution data");case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}],[{key:"fromArcGISServerUrl",value:function(){var e=Object(i.a)(a.a.mark((function e(t){var n,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="string"==typeof t?{url:t}:t,e.next=3,r.e(85).then(r.bind(null,783));case 3:return i=e.sent,e.prev=4,e.next=7,i.fromUrl(n);case 7:return e.abrupt("return",e.sent);case 10:throw e.prev=10,e.t0=e.catch(4),S.error("#fromArcGISServerUrl({ url: '"+n.url+"'})","Failed to create layer from arcgis server url",e.t0),e.t0;case 13:case"end":return e.stop()}}),e,null,[[4,10]])})));return function(t){return e.apply(this,arguments)}}()},{key:"fromPortalItem",value:function(){var e=Object(i.a)(a.a.mark((function e(t){var n,i,s,o,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="portalItem"in t?t:{portalItem:t},e.next=3,Promise.all([r.e(17),r.e(97)]).then(r.bind(null,774));case 3:return i=e.sent,e.prev=4,e.next=7,i.fromItem(n);case 7:return e.abrupt("return",e.sent);case 10:throw e.prev=10,e.t0=e.catch(4),s=n&&n.portalItem,o=s&&s.id||"unset",u=s&&s.portal&&s.portal.url||b.a.portalUrl,S.error("#fromPortalItem()","Failed to create layer from portal item (portal: '"+u+"', id: '"+o+"')",e.t0),e.t0;case 14:case"end":return e.stop()}}),e,null,[[4,10]])})));return function(t){return e.apply(this,arguments)}}()}]),n}(d.a.EventedMixin(Object(h.a)(y.a)));Object(c.a)([Object(j.b)({type:String})],k.prototype,"attributionDataUrl",void 0),Object(c.a)([Object(j.b)({type:w.a})],k.prototype,"fullExtent",void 0),Object(c.a)([Object(j.b)({readOnly:!0})],k.prototype,"hasAttributionData",null),Object(c.a)([Object(j.b)({type:String})],k.prototype,"id",void 0),Object(c.a)([Object(j.b)({type:Boolean,nonNullable:!0})],k.prototype,"legendEnabled",void 0),Object(c.a)([Object(j.b)({type:["show","hide","hide-children"]})],k.prototype,"listMode",void 0),Object(c.a)([Object(j.b)({type:Number,range:{min:0,max:1},nonNullable:!0})],k.prototype,"opacity",void 0),Object(c.a)([Object(j.b)()],k.prototype,"parent",void 0),Object(c.a)([Object(j.b)({readOnly:!0})],k.prototype,"parsedUrl",null),Object(c.a)([Object(j.b)({type:Boolean})],k.prototype,"popupEnabled",void 0),Object(c.a)([Object(j.b)({type:Boolean})],k.prototype,"attributionVisible",void 0),Object(c.a)([Object(j.b)({type:x.a})],k.prototype,"spatialReference",void 0),Object(c.a)([Object(j.b)({type:String})],k.prototype,"title",void 0),Object(c.a)([Object(j.b)({type:String,readOnly:!0,json:{read:!1}})],k.prototype,"type",void 0),Object(c.a)([Object(j.b)()],k.prototype,"url",void 0),Object(c.a)([Object(j.b)({type:Boolean,nonNullable:!0})],k.prototype,"visible",void 0);var I=k=Object(c.a)([Object(g.a)("esri.layers.Layer")],k)},683:function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var n=r(135),a=r(70),i={inches:Object(n.b)(1,"meters","inches"),feet:Object(n.b)(1,"meters","feet"),"us-feet":Object(n.b)(1,"meters","us-feet"),yards:Object(n.b)(1,"meters","yards"),miles:Object(n.b)(1,"meters","miles"),"nautical-miles":Object(n.b)(1,"meters","nautical-miles"),millimeters:Object(n.b)(1,"meters","millimeters"),centimeters:Object(n.b)(1,"meters","centimeters"),decimeters:Object(n.b)(1,"meters","decimeters"),meters:Object(n.b)(1,"meters","meters"),kilometers:Object(n.b)(1,"meters","kilometers"),"decimal-degrees":1/Object(n.i)(1,"meters",a.a.radius)}},692:function(e,t,r){"use strict";r.d(t,"a",(function(){return o})),r.d(t,"b",(function(){return i})),r.d(t,"c",(function(){return s}));r(19);var n={milliseconds:1,seconds:1e3,minutes:6e4,hours:36e5,days:864e5,weeks:6048e5,months:26784e5,years:31536e6,decades:31536e7,centuries:31536e8},a={milliseconds:{getter:"getMilliseconds",setter:"setMilliseconds",multiplier:1},seconds:{getter:"getSeconds",setter:"setSeconds",multiplier:1},minutes:{getter:"getMinutes",setter:"setMinutes",multiplier:1},hours:{getter:"getHours",setter:"setHours",multiplier:1},days:{getter:"getDate",setter:"setDate",multiplier:1},weeks:{getter:"getDate",setter:"setDate",multiplier:7},months:{getter:"getMonth",setter:"setMonth",multiplier:1},years:{getter:"getFullYear",setter:"setFullYear",multiplier:1},decades:{getter:"getFullYear",setter:"setFullYear",multiplier:10},centuries:{getter:"getFullYear",setter:"setFullYear",multiplier:100}};function i(e,t,r){var n=new Date(e.getTime());if(t&&r){var i=a[r],s=i.getter,o=i.setter,u=i.multiplier;n[o](n[s]()+t*u)}return n}function s(e,t){switch(t){case"milliseconds":return new Date(e.getTime());case"seconds":return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds());case"minutes":return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes());case"hours":return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours());case"days":return new Date(e.getFullYear(),e.getMonth(),e.getDate());case"weeks":return new Date(e.getFullYear(),e.getMonth(),e.getDate()-e.getDay());case"months":return new Date(e.getFullYear(),e.getMonth(),1);case"years":return new Date(e.getFullYear(),0,1);case"decades":return new Date(e.getFullYear()-e.getFullYear()%10,0,1);case"centuries":return new Date(e.getFullYear()-e.getFullYear()%100,0,1);default:return new Date}}function o(e,t,r){return 0===e?0:e*n[t]/n[r]}},697:function(e,t,r){"use strict";r.d(t,"a",(function(){return I}));var n=r(7),a=r.n(n),i=r(12),s=r(2),o=r(4),u=r(8),l=r(5),c=r(6),b=r(0),f=r(15),p=r(30),d=r(1),h=(r(19),r(14),r(10)),y=r(21),v=r(52),m=r(215),O=new v.a,j=new WeakMap;function g(e){w(e)&&O.push(e)}function w(e){return e&&"object"==typeof e&&"refreshInterval"in e&&"refresh"in e}function x(e,t){return Number.isFinite(e)&&Number.isFinite(t)?t<=0?e:x(t,e%t):0}var M=0,S=0;function k(){var e,t=Date.now(),r=Object(y.a)(O);try{for(r.s();!(e=r.n()).done;){var n,a=e.value;if(a.refreshInterval)t-(null!=(n=j.get(a))?n:0)+5>=6e4*a.refreshInterval&&(j.set(a,t),a.refresh(t))}}catch(i){r.e(i)}finally{r.f()}}Object(m.a)((function(){var e,t=Date.now(),r=0,n=Object(y.a)(O);try{for(n.s();!(e=n.n()).done;){var a=e.value;r=x(Math.round(6e4*a.refreshInterval),r),a.refreshInterval?j.get(a)||j.set(a,t):j.delete(a)}}catch(i){n.e(i)}finally{n.f()}if(r!==S){if(S=r,clearInterval(M),0===S)return void(M=0);M=setInterval(k,S)}}));var I=function(e){var t=function(e){Object(l.a)(r,e);var t=Object(c.a)(r);function r(){var e;Object(s.a)(this,r);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).refreshInterval=0,e.refreshTimestamp=0,e._debounceHasDataChanged=Object(p.i)((function(){return e.hasDataChanged()})),e.when().then((function(){g(Object(u.a)(e))}),(function(){})),e}return Object(o.a)(r,[{key:"destroy",value:function(){var e;w(e=this)&&O.includes(e)&&O.remove(e)}},{key:"refreshParameters",get:function(){return{_ts:this.refreshTimestamp||null}}},{key:"refresh",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now();Object(p.l)(this._debounceHasDataChanged()).then((function(r){r&&(e._set("refreshTimestamp",t),e.emit("refresh"))}),(function(t){f.a.getLogger(e.declaredClass).error(t)}))}},{key:"hasDataChanged",value:function(){var e=Object(i.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),r}(e);return Object(b.a)([Object(d.b)({type:Number,cast:function(e){return e>=.1?e:e<=0?0:.1},json:{write:!0,origins:{"web-document":{write:!0}}}})],t.prototype,"refreshInterval",void 0),Object(b.a)([Object(d.b)({readOnly:!0})],t.prototype,"refreshTimestamp",void 0),Object(b.a)([Object(d.b)()],t.prototype,"refreshParameters",null),t=Object(b.a)([Object(h.a)("esri.layers.mixins.RefreshableLayer")],t),t}},698:function(e,t,r){"use strict";r.d(t,"a",(function(){return x}));var n,a=r(2),i=r(4),s=r(5),o=r(6),u=r(0),l=r(665),c=r(678),b=r(26),f=r(18),p=r(11),d=r(1),h=(r(14),r(19),r(15),r(57)),y=r(10),v=r(43),m=n=function(e){Object(s.a)(r,e);var t=Object(o.a)(r);function r(e){var n;return Object(a.a)(this,r),(n=t.call(this,e)).respectsDaylightSaving=!1,n.timezone=null,n}return Object(i.a)(r,[{key:"readRespectsDaylightSaving",value:function(e,t){return void 0!==t.respectsDaylightSaving?t.respectsDaylightSaving:void 0!==t.respectDaylightSaving&&t.respectDaylightSaving}},{key:"clone",value:function(){var e=this.respectsDaylightSaving,t=this.timezone;return new n({respectsDaylightSaving:e,timezone:t})}}]),r}(b.a);Object(u.a)([Object(d.b)({type:Boolean,json:{write:!0}})],m.prototype,"respectsDaylightSaving",void 0),Object(u.a)([Object(h.a)("respectsDaylightSaving",["respectsDaylightSaving","respectDaylightSaving"])],m.prototype,"readRespectsDaylightSaving",null),Object(u.a)([Object(d.b)({type:String,json:{read:{source:"timeZone"},write:{target:"timeZone"}}})],m.prototype,"timezone",void 0);var O,j=m=n=Object(u.a)([Object(y.a)("esri.layers.support.TimeReference")],m),g=r(669),w=O=function(e){Object(s.a)(r,e);var t=Object(o.a)(r);function r(e){var n;return Object(a.a)(this,r),(n=t.call(this,e)).cumulative=!1,n.endField=null,n.fullTimeExtent=null,n.hasLiveData=!1,n.interval=null,n.startField=null,n.timeReference=null,n.trackIdField=null,n.useTime=!0,n}return Object(i.a)(r,[{key:"readFullTimeExtent",value:function(e,t){if(!t.timeExtent||!Array.isArray(t.timeExtent)||2!==t.timeExtent.length)return null;var r=new Date(t.timeExtent[0]),n=new Date(t.timeExtent[1]);return new l.a({start:r,end:n})}},{key:"writeFullTimeExtent",value:function(e,t){e&&Object(p.j)(e.start)&&Object(p.j)(e.end)?t.timeExtent=[e.start.getTime(),e.end.getTime()]:t.timeExtent=null}},{key:"readInterval",value:function(e,t){return t.timeInterval&&t.timeIntervalUnits?new c.a({value:t.timeInterval,unit:g.a.fromJSON(t.timeIntervalUnits)}):t.defaultTimeInterval&&t.defaultTimeIntervalUnits?new c.a({value:t.defaultTimeInterval,unit:g.a.fromJSON(t.defaultTimeIntervalUnits)}):null}},{key:"writeInterval",value:function(e,t){if(e){var r=e.toJSON();t.timeInterval=r.value,t.timeIntervalUnits=r.unit}else t.timeInterval=null,t.timeIntervalUnits=null}},{key:"clone",value:function(){var e=this.cumulative,t=this.endField,r=this.hasLiveData,n=this.interval,a=this.startField,i=this.timeReference,s=this.fullTimeExtent,o=this.trackIdField,u=this.useTime;return new O({cumulative:e,endField:t,hasLiveData:r,interval:n,startField:a,timeReference:Object(f.a)(i),fullTimeExtent:Object(f.a)(s),trackIdField:o,useTime:u})}}]),r}(b.a);Object(u.a)([Object(d.b)({type:Boolean,json:{read:{source:"exportOptions.timeDataCumulative"},write:{target:"exportOptions.timeDataCumulative"}}})],w.prototype,"cumulative",void 0),Object(u.a)([Object(d.b)({type:String,json:{read:{source:"endTimeField"},write:{target:"endTimeField",allowNull:!0}}})],w.prototype,"endField",void 0),Object(u.a)([Object(d.b)({type:l.a,json:{write:{enabled:!0,allowNull:!0}}})],w.prototype,"fullTimeExtent",void 0),Object(u.a)([Object(h.a)("fullTimeExtent",["timeExtent"])],w.prototype,"readFullTimeExtent",null),Object(u.a)([Object(v.a)("fullTimeExtent")],w.prototype,"writeFullTimeExtent",null),Object(u.a)([Object(d.b)({type:Boolean,json:{write:!0}})],w.prototype,"hasLiveData",void 0),Object(u.a)([Object(d.b)({type:c.a,json:{write:{enabled:!0,allowNull:!0}}})],w.prototype,"interval",void 0),Object(u.a)([Object(h.a)("interval",["timeInterval","timeIntervalUnits","defaultTimeInterval","defaultTimeIntervalUnits"])],w.prototype,"readInterval",null),Object(u.a)([Object(v.a)("interval")],w.prototype,"writeInterval",null),Object(u.a)([Object(d.b)({type:String,json:{read:{source:"startTimeField"},write:{target:"startTimeField",allowNull:!0}}})],w.prototype,"startField",void 0),Object(u.a)([Object(d.b)({type:j,json:{write:{enabled:!0,allowNull:!0}}})],w.prototype,"timeReference",void 0),Object(u.a)([Object(d.b)({type:String,json:{write:{enabled:!0,allowNull:!0}}})],w.prototype,"trackIdField",void 0),Object(u.a)([Object(d.b)({type:Boolean,json:{read:{source:"exportOptions.useTime"},write:{target:"exportOptions.useTime"}}})],w.prototype,"useTime",void 0);var x=w=O=Object(u.a)([Object(y.a)("esri.layers.support.TimeInfo")],w)},699:function(e,t,r){"use strict";r.d(t,"a",(function(){return N}));var n=r(13),a=r(7),i=r.n(a),s=r(12),o=r(2),u=r(4),l=r(77),c=r(65),b=r(5),f=r(6),p=r(0),d=r(83),h=r(82),y=r(295),v=r(29),m=r(15),O=r(11),j=r(30),g=r(27),w=r(1),x=(r(19),r(14),r(57)),M=r(10),S=r(43),k=r(85),I=r(334),E=r(338),T=m.a.getLogger("esri.layers.mixins.PortalLayer"),N=function(e){var t=function(e){Object(b.a)(a,e);var t=Object(f.a)(a);function a(){var e;return Object(o.a)(this,a),(e=t.apply(this,arguments)).resourceReferences={portalItem:null,paths:[]},e.userHasEditingPrivileges=!0,e}return Object(u.a)(a,[{key:"destroy",value:function(){var e;null==(e=this.portalItem)||e.destroy(),this.portalItem=null}},{key:"portalItem",set:function(e){e!==this._get("portalItem")&&(this.removeOrigin("portal-item"),this._set("portalItem",e))}},{key:"readPortalItem",value:function(e,t,r){if(t.itemId)return new I.default({id:t.itemId,portal:r&&r.portal})}},{key:"writePortalItem",value:function(e,t){e&&e.id&&(t.itemId=e.id)}},{key:"loadFromPortal",value:function(){var e=Object(s.a)(i.a.mark((function e(t,n){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.portalItem||!this.portalItem.id){e.next=14;break}return e.prev=1,e.next=4,r.e(17).then(r.bind(null,781));case 4:return a=e.sent,Object(j.v)(n),e.next=8,a.load({instance:this,supportedTypes:t.supportedTypes,validateItem:t.validateItem,supportsData:t.supportsData},n);case 8:return e.abrupt("return",e.sent);case 11:throw e.prev=11,e.t0=e.catch(1),Object(j.m)(e.t0)||T.warn("Failed to load layer (".concat(this.title,", ").concat(this.id,") portal item (").concat(this.portalItem.id,")\n  ").concat(e.t0)),e.t0;case 14:case"end":return e.stop()}}),e,this,[[1,11]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"finishLoadEditablePortalLayer",value:function(){var e=Object(s.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=this,e.next=3,this.fetchUserHasEditingPrivileges(t).catch((function(e){return Object(j.u)(e),!0}));case 3:e.t1=e.sent,e.t0._set.call(e.t0,"userHasEditingPrivileges",e.t1);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchUserHasEditingPrivileges",value:function(){var e=Object(s.a)(i.a.mark((function e(t){var r,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.url?null==d.b?void 0:d.b.findCredential(this.url):null){e.next=3;break}return e.abrupt("return",!0);case 3:if(F.credential!==r){e.next=7;break}e.t0=F.user,e.next=10;break;case 7:return e.next=9,this.fetchEditingUser(t);case 9:e.t0=e.sent;case 10:return n=e.t0,e.abrupt("return",(F.credential=r,F.user=n,Object(O.i)(n)||null==n.privileges||n.privileges.includes("features:user:edit")));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchEditingUser",value:function(){var e=Object(s.a)(i.a.mark((function e(t){var r,n,a,s,o,u,l,c,b;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=null==(r=this.portalItem)||null==(n=r.portal)?void 0:n.user)){e.next=3;break}return e.abrupt("return",a);case 3:if(null!=(s=d.b.findServerInfo(this.url))&&s.owningSystemUrl){e.next=6;break}return e.abrupt("return",null);case 6:if(o="".concat(s.owningSystemUrl,"/sharing/rest"),!(u=k.a.getDefault())||!u.loaded||Object(g.C)(u.restUrl)!==Object(g.C)(o)){e.next=9;break}return e.abrupt("return",u.user);case 9:return l="".concat(o,"/community/self"),c=Object(O.j)(t)?t.signal:null,e.next=13,Object(y.c)(Object(h.default)(l,{authMode:"no-prompt",query:{f:"json"},signal:c}));case 13:return b=e.sent,e.abrupt("return",b.ok?E.default.fromJSON(b.value.data):null);case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"read",value:function(e,t){t&&(t.layer=this),Object(l.a)(Object(c.a)(a.prototype),"read",this).call(this,e,t)}},{key:"write",value:function(e,t){var r=t&&t.portal,i=this.portalItem&&this.portalItem.id&&(this.portalItem.portal||k.a.getDefault());return r&&i&&!Object(g.r)(i.restUrl,r.restUrl)?(t.messages&&t.messages.push(new v.a("layer:cross-portal","The layer '".concat(this.title," (").concat(this.id,")' cannot be persisted because it refers to an item on a different portal than the one being saved to. To save the scene, set the layer.portalItem to null or save the scene to the same portal as the item associated with the layer"),{layer:this})),null):Object(l.a)(Object(c.a)(a.prototype),"write",this).call(this,e,Object(n.a)(Object(n.a)({},t),{},{layer:this}))}}]),a}(e);return Object(p.a)([Object(w.b)({type:I.default})],t.prototype,"portalItem",null),Object(p.a)([Object(x.a)("web-document","portalItem",["itemId"])],t.prototype,"readPortalItem",null),Object(p.a)([Object(S.a)("web-document","portalItem",{itemId:{type:String}})],t.prototype,"writePortalItem",null),Object(p.a)([Object(w.b)()],t.prototype,"resourceReferences",void 0),Object(p.a)([Object(w.b)({readOnly:!0})],t.prototype,"userHasEditingPrivileges",void 0),t=Object(p.a)([Object(M.a)("esri.layers.mixins.PortalLayer")],t),t},F={credential:null,user:null}},719:function(e,t,r){"use strict";r.d(t,"a",(function(){return y}));var n=r(2),a=r(4),i=r(5),s=r(6),o=r(0),u=r(665),l=r(678),c=r(1),b=(r(19),r(14),r(15),r(57)),f=r(10),p=r(698),d=r(209),h=r(669);var y=function(e){var t=function(e){Object(i.a)(r,e);var t=Object(s.a)(r);function r(){var e;return Object(n.a)(this,r),(e=t.apply(this,arguments)).timeExtent=null,e.timeOffset=null,e.useViewTime=!0,e}return Object(a.a)(r,[{key:"readOffset",value:function(e,t){var r=t.timeInfo.exportOptions;if(!r)return null;var n=r.timeOffset,a=h.a.fromJSON(r.timeOffsetUnits);return n&&a?new l.a({value:n,unit:a}):null}},{key:"timeInfo",set:function(e){Object(d.f)(e,this.fieldsIndex),this._set("timeInfo",e)}}]),r}(e);return Object(o.a)([Object(c.b)({type:u.a,json:{write:!1}})],t.prototype,"timeExtent",void 0),Object(o.a)([Object(c.b)({type:l.a})],t.prototype,"timeOffset",void 0),Object(o.a)([Object(b.a)("service","timeOffset",["timeInfo.exportOptions"])],t.prototype,"readOffset",null),Object(o.a)([Object(c.b)({value:null,type:p.a,json:{write:!0,origins:{"web-document":{read:!1,write:!1}}}})],t.prototype,"timeInfo",null),Object(o.a)([Object(c.b)({type:Boolean,json:{read:{source:"timeAnimation"},write:{target:"timeAnimation"},origins:{"web-scene":{read:!1,write:!1}}}})],t.prototype,"useViewTime",void 0),t=Object(o.a)([Object(f.a)("esri.layers.mixins.TemporalLayer")],t),t}},726:function(e,t,r){"use strict";r.d(t,"a",(function(){return d})),r.d(t,"b",(function(){return p}));var n=r(2),a=r(4),i=r(5),s=r(6),o=r(0),u=r(60),l=r(183),c=r(1),b=r(10),f=r(763),p=function(e){var t=function(e){Object(i.a)(r,e);var t=Object(s.a)(r);function r(){return Object(n.a)(this,r),t.apply(this,arguments)}return Object(a.a)(r,[{key:"destroy",value:function(){this.destroyed||(this.handles.destroy(),this.updatingHandles.destroy())}},{key:"handles",get:function(){return this._get("handles")||new l.a}},{key:"updatingHandles",get:function(){return this._get("updatingHandles")||new f.a}}]),r}(e);return Object(o.a)([Object(c.b)({readOnly:!0})],t.prototype,"handles",null),Object(o.a)([Object(c.b)({readOnly:!0})],t.prototype,"updatingHandles",null),t=Object(o.a)([Object(b.a)("esri.core.HandleOwner")],t),t},d=function(e){Object(i.a)(r,e);var t=Object(s.a)(r);function r(){return Object(n.a)(this,r),t.apply(this,arguments)}return r}(p(u.a));d=Object(o.a)([Object(b.a)("esri.core.HandleOwner")],d)},738:function(e,t,r){"use strict";r.d(t,"a",(function(){return u})),r.d(t,"b",(function(){return l})),r.d(t,"c",(function(){return p})),r.d(t,"d",(function(){return i})),r.d(t,"e",(function(){return f})),r.d(t,"f",(function(){return O})),r.d(t,"g",(function(){return m})),r.d(t,"h",(function(){return o})),r.d(t,"i",(function(){return c})),r.d(t,"j",(function(){return d})),r.d(t,"k",(function(){return j})),r.d(t,"l",(function(){return s})),r.d(t,"m",(function(){return b}));var n=r(211),a=r(93);function i(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function s(e,t,r,n,a,i,s,o,u,l,c,b,f,p,d,h,y){return e[0]=t,e[1]=r,e[2]=n,e[3]=a,e[4]=i,e[5]=s,e[6]=o,e[7]=u,e[8]=l,e[9]=c,e[10]=b,e[11]=f,e[12]=p,e[13]=d,e[14]=h,e[15]=y,e}function o(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function u(e,t){if(e===t){var r=t[1],n=t[2],a=t[3],i=t[6],s=t[7],o=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=r,e[6]=t[9],e[7]=t[13],e[8]=n,e[9]=i,e[11]=t[14],e[12]=a,e[13]=s,e[14]=o}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}function l(e,t){var r=t[0],n=t[1],a=t[2],i=t[3],s=t[4],o=t[5],u=t[6],l=t[7],c=t[8],b=t[9],f=t[10],p=t[11],d=t[12],h=t[13],y=t[14],v=t[15],m=r*o-n*s,O=r*u-a*s,j=r*l-i*s,g=n*u-a*o,w=n*l-i*o,x=a*l-i*u,M=c*h-b*d,S=c*y-f*d,k=c*v-p*d,I=b*y-f*h,E=b*v-p*h,T=f*v-p*y,N=m*T-O*E+j*I+g*k-w*S+x*M;return N?(N=1/N,e[0]=(o*T-u*E+l*I)*N,e[1]=(a*E-n*T-i*I)*N,e[2]=(h*x-y*w+v*g)*N,e[3]=(f*w-b*x-p*g)*N,e[4]=(u*k-s*T-l*S)*N,e[5]=(r*T-a*k+i*S)*N,e[6]=(y*j-d*x-v*O)*N,e[7]=(c*x-f*j+p*O)*N,e[8]=(s*E-o*k+l*M)*N,e[9]=(n*k-r*E-i*M)*N,e[10]=(d*w-h*j+v*m)*N,e[11]=(b*j-c*w-p*m)*N,e[12]=(o*S-s*I-u*M)*N,e[13]=(r*I-n*S+a*M)*N,e[14]=(h*O-d*g-y*m)*N,e[15]=(c*g-b*O+f*m)*N,e):null}function c(e,t,r){var n=t[0],a=t[1],i=t[2],s=t[3],o=t[4],u=t[5],l=t[6],c=t[7],b=t[8],f=t[9],p=t[10],d=t[11],h=t[12],y=t[13],v=t[14],m=t[15],O=r[0],j=r[1],g=r[2],w=r[3];return e[0]=O*n+j*o+g*b+w*h,e[1]=O*a+j*u+g*f+w*y,e[2]=O*i+j*l+g*p+w*v,e[3]=O*s+j*c+g*d+w*m,O=r[4],j=r[5],g=r[6],w=r[7],e[4]=O*n+j*o+g*b+w*h,e[5]=O*a+j*u+g*f+w*y,e[6]=O*i+j*l+g*p+w*v,e[7]=O*s+j*c+g*d+w*m,O=r[8],j=r[9],g=r[10],w=r[11],e[8]=O*n+j*o+g*b+w*h,e[9]=O*a+j*u+g*f+w*y,e[10]=O*i+j*l+g*p+w*v,e[11]=O*s+j*c+g*d+w*m,O=r[12],j=r[13],g=r[14],w=r[15],e[12]=O*n+j*o+g*b+w*h,e[13]=O*a+j*u+g*f+w*y,e[14]=O*i+j*l+g*p+w*v,e[15]=O*s+j*c+g*d+w*m,e}function b(e,t,r){var n,a,i,s,o,u,l,c,b,f,p,d,h=r[0],y=r[1],v=r[2];return t===e?(e[12]=t[0]*h+t[4]*y+t[8]*v+t[12],e[13]=t[1]*h+t[5]*y+t[9]*v+t[13],e[14]=t[2]*h+t[6]*y+t[10]*v+t[14],e[15]=t[3]*h+t[7]*y+t[11]*v+t[15]):(n=t[0],a=t[1],i=t[2],s=t[3],o=t[4],u=t[5],l=t[6],c=t[7],b=t[8],f=t[9],p=t[10],d=t[11],e[0]=n,e[1]=a,e[2]=i,e[3]=s,e[4]=o,e[5]=u,e[6]=l,e[7]=c,e[8]=b,e[9]=f,e[10]=p,e[11]=d,e[12]=n*h+o*y+b*v+t[12],e[13]=a*h+u*y+f*v+t[13],e[14]=i*h+l*y+p*v+t[14],e[15]=s*h+c*y+d*v+t[15]),e}function f(e,t,r){var n=r[0],a=r[1],i=r[2];return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*a,e[5]=t[5]*a,e[6]=t[6]*a,e[7]=t[7]*a,e[8]=t[8]*i,e[9]=t[9]*i,e[10]=t[10]*i,e[11]=t[11]*i,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function p(e,t,r,n){var i,s,o,u,l,c,b,f,p,d,h,y,v,m,O,j,g,w,x,M,S,k,I,E,T=n[0],N=n[1],F=n[2],U=Math.sqrt(T*T+N*N+F*F);return U<a.a?null:(T*=U=1/U,N*=U,F*=U,i=Math.sin(r),o=1-(s=Math.cos(r)),u=t[0],l=t[1],c=t[2],b=t[3],f=t[4],p=t[5],d=t[6],h=t[7],y=t[8],v=t[9],m=t[10],O=t[11],j=T*T*o+s,g=N*T*o+F*i,w=F*T*o-N*i,x=T*N*o-F*i,M=N*N*o+s,S=F*N*o+T*i,k=T*F*o+N*i,I=N*F*o-T*i,E=F*F*o+s,e[0]=u*j+f*g+y*w,e[1]=l*j+p*g+v*w,e[2]=c*j+d*g+m*w,e[3]=b*j+h*g+O*w,e[4]=u*x+f*M+y*S,e[5]=l*x+p*M+v*S,e[6]=c*x+d*M+m*S,e[7]=b*x+h*M+O*S,e[8]=u*k+f*I+y*E,e[9]=l*k+p*I+v*E,e[10]=c*k+d*I+m*E,e[11]=b*k+h*I+O*E,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)}function d(e,t){var r=Math.sin(t),n=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=n,e[6]=r,e[7]=0,e[8]=0,e[9]=-r,e[10]=n,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function h(e,t,r){var n=t[0],a=t[1],i=t[2],s=t[3],o=n+n,u=a+a,l=i+i,c=n*o,b=n*u,f=n*l,p=a*u,d=a*l,h=i*l,y=s*o,v=s*u,m=s*l;return e[0]=1-(p+h),e[1]=b+m,e[2]=f-v,e[3]=0,e[4]=b-m,e[5]=1-(c+h),e[6]=d+y,e[7]=0,e[8]=f+v,e[9]=d-y,e[10]=1-(c+p),e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e}var y=Object(n.e)();function v(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e[4]=t[4]-r[4],e[5]=t[5]-r[5],e[6]=t[6]-r[6],e[7]=t[7]-r[7],e[8]=t[8]-r[8],e[9]=t[9]-r[9],e[10]=t[10]-r[10],e[11]=t[11]-r[11],e[12]=t[12]-r[12],e[13]=t[13]-r[13],e[14]=t[14]-r[14],e[15]=t[15]-r[15],e}function m(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]}function O(e,t){var r=e[0],n=e[1],i=e[2],s=e[3],o=e[4],u=e[5],l=e[6],c=e[7],b=e[8],f=e[9],p=e[10],d=e[11],h=e[12],y=e[13],v=e[14],m=e[15],O=t[0],j=t[1],g=t[2],w=t[3],x=t[4],M=t[5],S=t[6],k=t[7],I=t[8],E=t[9],T=t[10],N=t[11],F=t[12],U=t[13],_=t[14],D=t[15];return Math.abs(r-O)<=a.a*Math.max(1,Math.abs(r),Math.abs(O))&&Math.abs(n-j)<=a.a*Math.max(1,Math.abs(n),Math.abs(j))&&Math.abs(i-g)<=a.a*Math.max(1,Math.abs(i),Math.abs(g))&&Math.abs(s-w)<=a.a*Math.max(1,Math.abs(s),Math.abs(w))&&Math.abs(o-x)<=a.a*Math.max(1,Math.abs(o),Math.abs(x))&&Math.abs(u-M)<=a.a*Math.max(1,Math.abs(u),Math.abs(M))&&Math.abs(l-S)<=a.a*Math.max(1,Math.abs(l),Math.abs(S))&&Math.abs(c-k)<=a.a*Math.max(1,Math.abs(c),Math.abs(k))&&Math.abs(b-I)<=a.a*Math.max(1,Math.abs(b),Math.abs(I))&&Math.abs(f-E)<=a.a*Math.max(1,Math.abs(f),Math.abs(E))&&Math.abs(p-T)<=a.a*Math.max(1,Math.abs(p),Math.abs(T))&&Math.abs(d-N)<=a.a*Math.max(1,Math.abs(d),Math.abs(N))&&Math.abs(h-F)<=a.a*Math.max(1,Math.abs(h),Math.abs(F))&&Math.abs(y-U)<=a.a*Math.max(1,Math.abs(y),Math.abs(U))&&Math.abs(v-_)<=a.a*Math.max(1,Math.abs(v),Math.abs(_))&&Math.abs(m-D)<=a.a*Math.max(1,Math.abs(m),Math.abs(D))}function j(e){var t=a.a,r=e[0],n=e[1],i=e[2],s=e[4],o=e[5],u=e[6],l=e[8],c=e[9],b=e[10];return Math.abs(1-(r*r+s*s+l*l))<=t&&Math.abs(1-(n*n+o*o+c*c))<=t&&Math.abs(1-(i*i+u*u+b*b))<=t}var g=c,w=v;Object.freeze({__proto__:null,copy:i,set:s,identity:o,transpose:u,invert:l,adjoint:function(e,t){var r=t[0],n=t[1],a=t[2],i=t[3],s=t[4],o=t[5],u=t[6],l=t[7],c=t[8],b=t[9],f=t[10],p=t[11],d=t[12],h=t[13],y=t[14],v=t[15];return e[0]=o*(f*v-p*y)-b*(u*v-l*y)+h*(u*p-l*f),e[1]=-(n*(f*v-p*y)-b*(a*v-i*y)+h*(a*p-i*f)),e[2]=n*(u*v-l*y)-o*(a*v-i*y)+h*(a*l-i*u),e[3]=-(n*(u*p-l*f)-o*(a*p-i*f)+b*(a*l-i*u)),e[4]=-(s*(f*v-p*y)-c*(u*v-l*y)+d*(u*p-l*f)),e[5]=r*(f*v-p*y)-c*(a*v-i*y)+d*(a*p-i*f),e[6]=-(r*(u*v-l*y)-s*(a*v-i*y)+d*(a*l-i*u)),e[7]=r*(u*p-l*f)-s*(a*p-i*f)+c*(a*l-i*u),e[8]=s*(b*v-p*h)-c*(o*v-l*h)+d*(o*p-l*b),e[9]=-(r*(b*v-p*h)-c*(n*v-i*h)+d*(n*p-i*b)),e[10]=r*(o*v-l*h)-s*(n*v-i*h)+d*(n*l-i*o),e[11]=-(r*(o*p-l*b)-s*(n*p-i*b)+c*(n*l-i*o)),e[12]=-(s*(b*y-f*h)-c*(o*y-u*h)+d*(o*f-u*b)),e[13]=r*(b*y-f*h)-c*(n*y-a*h)+d*(n*f-a*b),e[14]=-(r*(o*y-u*h)-s*(n*y-a*h)+d*(n*u-a*o)),e[15]=r*(o*f-u*b)-s*(n*f-a*b)+c*(n*u-a*o),e},determinant:function(e){var t=e[0],r=e[1],n=e[2],a=e[3],i=e[4],s=e[5],o=e[6],u=e[7],l=e[8],c=e[9],b=e[10],f=e[11],p=e[12],d=e[13],h=e[14],y=e[15];return(t*s-r*i)*(b*y-f*h)-(t*o-n*i)*(c*y-f*d)+(t*u-a*i)*(c*h-b*d)+(r*o-n*s)*(l*y-f*p)-(r*u-a*s)*(l*h-b*p)+(n*u-a*o)*(l*d-c*p)},multiply:c,translate:b,scale:f,rotate:p,rotateX:function(e,t,r){var n=Math.sin(r),a=Math.cos(r),i=t[4],s=t[5],o=t[6],u=t[7],l=t[8],c=t[9],b=t[10],f=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=i*a+l*n,e[5]=s*a+c*n,e[6]=o*a+b*n,e[7]=u*a+f*n,e[8]=l*a-i*n,e[9]=c*a-s*n,e[10]=b*a-o*n,e[11]=f*a-u*n,e},rotateY:function(e,t,r){var n=Math.sin(r),a=Math.cos(r),i=t[0],s=t[1],o=t[2],u=t[3],l=t[8],c=t[9],b=t[10],f=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=i*a-l*n,e[1]=s*a-c*n,e[2]=o*a-b*n,e[3]=u*a-f*n,e[8]=i*n+l*a,e[9]=s*n+c*a,e[10]=o*n+b*a,e[11]=u*n+f*a,e},rotateZ:function(e,t,r){var n=Math.sin(r),a=Math.cos(r),i=t[0],s=t[1],o=t[2],u=t[3],l=t[4],c=t[5],b=t[6],f=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=i*a+l*n,e[1]=s*a+c*n,e[2]=o*a+b*n,e[3]=u*a+f*n,e[4]=l*a-i*n,e[5]=c*a-s*n,e[6]=b*a-o*n,e[7]=f*a-u*n,e},fromTranslation:function(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e},fromScaling:function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},fromRotation:function(e,t,r){var n,i,s,o=r[0],u=r[1],l=r[2],c=Math.sqrt(o*o+u*u+l*l);return c<a.a?null:(o*=c=1/c,u*=c,l*=c,n=Math.sin(t),s=1-(i=Math.cos(t)),e[0]=o*o*s+i,e[1]=u*o*s+l*n,e[2]=l*o*s-u*n,e[3]=0,e[4]=o*u*s-l*n,e[5]=u*u*s+i,e[6]=l*u*s+o*n,e[7]=0,e[8]=o*l*s+u*n,e[9]=u*l*s-o*n,e[10]=l*l*s+i,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)},fromXRotation:d,fromYRotation:function(e,t){var r=Math.sin(t),n=Math.cos(t);return e[0]=n,e[1]=0,e[2]=-r,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=r,e[9]=0,e[10]=n,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},fromZRotation:function(e,t){var r=Math.sin(t),n=Math.cos(t);return e[0]=n,e[1]=r,e[2]=0,e[3]=0,e[4]=-r,e[5]=n,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},fromRotationTranslation:h,fromQuat2:function(e,t){var r=y,n=-t[0],a=-t[1],i=-t[2],s=t[3],o=t[4],u=t[5],l=t[6],c=t[7],b=n*n+a*a+i*i+s*s;return b>0?(r[0]=2*(o*s+c*n+u*i-l*a)/b,r[1]=2*(u*s+c*a+l*n-o*i)/b,r[2]=2*(l*s+c*i+o*a-u*n)/b):(r[0]=2*(o*s+c*n+u*i-l*a),r[1]=2*(u*s+c*a+l*n-o*i),r[2]=2*(l*s+c*i+o*a-u*n)),h(e,t,r),e},getTranslation:function(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e},getScaling:function(e,t){var r=t[0],n=t[1],a=t[2],i=t[4],s=t[5],o=t[6],u=t[8],l=t[9],c=t[10];return e[0]=Math.sqrt(r*r+n*n+a*a),e[1]=Math.sqrt(i*i+s*s+o*o),e[2]=Math.sqrt(u*u+l*l+c*c),e},getRotation:function(e,t){var r=t[0]+t[5]+t[10],n=0;return r>0?(n=2*Math.sqrt(r+1),e[3]=.25*n,e[0]=(t[6]-t[9])/n,e[1]=(t[8]-t[2])/n,e[2]=(t[1]-t[4])/n):t[0]>t[5]&&t[0]>t[10]?(n=2*Math.sqrt(1+t[0]-t[5]-t[10]),e[3]=(t[6]-t[9])/n,e[0]=.25*n,e[1]=(t[1]+t[4])/n,e[2]=(t[8]+t[2])/n):t[5]>t[10]?(n=2*Math.sqrt(1+t[5]-t[0]-t[10]),e[3]=(t[8]-t[2])/n,e[0]=(t[1]+t[4])/n,e[1]=.25*n,e[2]=(t[6]+t[9])/n):(n=2*Math.sqrt(1+t[10]-t[0]-t[5]),e[3]=(t[1]-t[4])/n,e[0]=(t[8]+t[2])/n,e[1]=(t[6]+t[9])/n,e[2]=.25*n),e},fromRotationTranslationScale:function(e,t,r,n){var a=t[0],i=t[1],s=t[2],o=t[3],u=a+a,l=i+i,c=s+s,b=a*u,f=a*l,p=a*c,d=i*l,h=i*c,y=s*c,v=o*u,m=o*l,O=o*c,j=n[0],g=n[1],w=n[2];return e[0]=(1-(d+y))*j,e[1]=(f+O)*j,e[2]=(p-m)*j,e[3]=0,e[4]=(f-O)*g,e[5]=(1-(b+y))*g,e[6]=(h+v)*g,e[7]=0,e[8]=(p+m)*w,e[9]=(h-v)*w,e[10]=(1-(b+d))*w,e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e},fromRotationTranslationScaleOrigin:function(e,t,r,n,a){var i=t[0],s=t[1],o=t[2],u=t[3],l=i+i,c=s+s,b=o+o,f=i*l,p=i*c,d=i*b,h=s*c,y=s*b,v=o*b,m=u*l,O=u*c,j=u*b,g=n[0],w=n[1],x=n[2],M=a[0],S=a[1],k=a[2],I=(1-(h+v))*g,E=(p+j)*g,T=(d-O)*g,N=(p-j)*w,F=(1-(f+v))*w,U=(y+m)*w,_=(d+O)*x,D=(y-m)*x,A=(1-(f+h))*x;return e[0]=I,e[1]=E,e[2]=T,e[3]=0,e[4]=N,e[5]=F,e[6]=U,e[7]=0,e[8]=_,e[9]=D,e[10]=A,e[11]=0,e[12]=r[0]+M-(I*M+N*S+_*k),e[13]=r[1]+S-(E*M+F*S+D*k),e[14]=r[2]+k-(T*M+U*S+A*k),e[15]=1,e},fromQuat:function(e,t){var r=t[0],n=t[1],a=t[2],i=t[3],s=r+r,o=n+n,u=a+a,l=r*s,c=n*s,b=n*o,f=a*s,p=a*o,d=a*u,h=i*s,y=i*o,v=i*u;return e[0]=1-b-d,e[1]=c+v,e[2]=f-y,e[3]=0,e[4]=c-v,e[5]=1-l-d,e[6]=p+h,e[7]=0,e[8]=f+y,e[9]=p-h,e[10]=1-l-b,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},frustum:function(e,t,r,n,a,i,s){var o=1/(r-t),u=1/(a-n),l=1/(i-s);return e[0]=2*i*o,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*i*u,e[6]=0,e[7]=0,e[8]=(r+t)*o,e[9]=(a+n)*u,e[10]=(s+i)*l,e[11]=-1,e[12]=0,e[13]=0,e[14]=s*i*2*l,e[15]=0,e},perspective:function(e,t,r,n,a){var i,s=1/Math.tan(t/2);return e[0]=s/r,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=s,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=a&&a!==1/0?(i=1/(n-a),e[10]=(a+n)*i,e[14]=2*a*n*i):(e[10]=-1,e[14]=-2*n),e},perspectiveFromFieldOfView:function(e,t,r,n){var a=Math.tan(t.upDegrees*Math.PI/180),i=Math.tan(t.downDegrees*Math.PI/180),s=Math.tan(t.leftDegrees*Math.PI/180),o=Math.tan(t.rightDegrees*Math.PI/180),u=2/(s+o),l=2/(a+i);return e[0]=u,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=l,e[6]=0,e[7]=0,e[8]=-(s-o)*u*.5,e[9]=(a-i)*l*.5,e[10]=n/(r-n),e[11]=-1,e[12]=0,e[13]=0,e[14]=n*r/(r-n),e[15]=0,e},ortho:function(e,t,r,n,a,i,s){var o=1/(t-r),u=1/(n-a),l=1/(i-s);return e[0]=-2*o,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*u,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*l,e[11]=0,e[12]=(t+r)*o,e[13]=(a+n)*u,e[14]=(s+i)*l,e[15]=1,e},lookAt:function(e,t,r,n){var i,s,u,l,c,b,f,p,d,h,y=t[0],v=t[1],m=t[2],O=n[0],j=n[1],g=n[2],w=r[0],x=r[1],M=r[2];return Math.abs(y-w)<a.a&&Math.abs(v-x)<a.a&&Math.abs(m-M)<a.a?o(e):(f=y-w,p=v-x,d=m-M,i=j*(d*=h=1/Math.sqrt(f*f+p*p+d*d))-g*(p*=h),s=g*(f*=h)-O*d,u=O*p-j*f,(h=Math.sqrt(i*i+s*s+u*u))?(i*=h=1/h,s*=h,u*=h):(i=0,s=0,u=0),l=p*u-d*s,c=d*i-f*u,b=f*s-p*i,(h=Math.sqrt(l*l+c*c+b*b))?(l*=h=1/h,c*=h,b*=h):(l=0,c=0,b=0),e[0]=i,e[1]=l,e[2]=f,e[3]=0,e[4]=s,e[5]=c,e[6]=p,e[7]=0,e[8]=u,e[9]=b,e[10]=d,e[11]=0,e[12]=-(i*y+s*v+u*m),e[13]=-(l*y+c*v+b*m),e[14]=-(f*y+p*v+d*m),e[15]=1,e)},targetTo:function(e,t,r,n){var a=t[0],i=t[1],s=t[2],o=n[0],u=n[1],l=n[2],c=a-r[0],b=i-r[1],f=s-r[2],p=c*c+b*b+f*f;p>0&&(c*=p=1/Math.sqrt(p),b*=p,f*=p);var d=u*f-l*b,h=l*c-o*f,y=o*b-u*c;return(p=d*d+h*h+y*y)>0&&(d*=p=1/Math.sqrt(p),h*=p,y*=p),e[0]=d,e[1]=h,e[2]=y,e[3]=0,e[4]=b*y-f*h,e[5]=f*d-c*y,e[6]=c*h-b*d,e[7]=0,e[8]=c,e[9]=b,e[10]=f,e[11]=0,e[12]=a,e[13]=i,e[14]=s,e[15]=1,e},str:function(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"},frob:function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2)+Math.pow(e[4],2)+Math.pow(e[5],2)+Math.pow(e[6],2)+Math.pow(e[7],2)+Math.pow(e[8],2)+Math.pow(e[9],2)+Math.pow(e[10],2)+Math.pow(e[11],2)+Math.pow(e[12],2)+Math.pow(e[13],2)+Math.pow(e[14],2)+Math.pow(e[15],2))},add:function(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e[4]=t[4]+r[4],e[5]=t[5]+r[5],e[6]=t[6]+r[6],e[7]=t[7]+r[7],e[8]=t[8]+r[8],e[9]=t[9]+r[9],e[10]=t[10]+r[10],e[11]=t[11]+r[11],e[12]=t[12]+r[12],e[13]=t[13]+r[13],e[14]=t[14]+r[14],e[15]=t[15]+r[15],e},subtract:v,multiplyScalar:function(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*r,e[5]=t[5]*r,e[6]=t[6]*r,e[7]=t[7]*r,e[8]=t[8]*r,e[9]=t[9]*r,e[10]=t[10]*r,e[11]=t[11]*r,e[12]=t[12]*r,e[13]=t[13]*r,e[14]=t[14]*r,e[15]=t[15]*r,e},multiplyScalarAndAdd:function(e,t,r,n){return e[0]=t[0]+r[0]*n,e[1]=t[1]+r[1]*n,e[2]=t[2]+r[2]*n,e[3]=t[3]+r[3]*n,e[4]=t[4]+r[4]*n,e[5]=t[5]+r[5]*n,e[6]=t[6]+r[6]*n,e[7]=t[7]+r[7]*n,e[8]=t[8]+r[8]*n,e[9]=t[9]+r[9]*n,e[10]=t[10]+r[10]*n,e[11]=t[11]+r[11]*n,e[12]=t[12]+r[12]*n,e[13]=t[13]+r[13]*n,e[14]=t[14]+r[14]*n,e[15]=t[15]+r[15]*n,e},exactEquals:m,equals:O,isOrthoNormal:j,mul:g,sub:w})},754:function(e,t,r){"use strict";(function(e){r.d(t,"a",(function(){return i})),r.d(t,"b",(function(){return n})),r.d(t,"c",(function(){return a}));var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof e?e:"undefined"!=typeof self?self:{};function a(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function i(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}}).call(this,r(216))},763:function(e,t,r){"use strict";r.d(t,"a",(function(){return v}));var n=r(2),a=r(4),i=r(5),s=r(6),o=r(0),u=r(60),l=r(183),c=r(11),b=r(241),f=r(99),p=r(100),d=r(215),h=r(1),y=r(10),v=function(e){Object(i.a)(r,e);var t=Object(s.a)(r);function r(){var e;return Object(n.a)(this,r),(e=t.apply(this,arguments)).updating=!1,e.handleId=0,e.handles=new l.a,e.scheduleHandleId=0,e.pendingPromises=new Set,e}return Object(a.a)(r,[{key:"destroy",value:function(){this.removeAll(),this.handles.destroy()}},{key:"add",value:function(e,t,r){var n=this,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=0!=(1&a),s=++this.handleId;i||this.installSyncUpdatingWatch(e,t,s);var o=0!=(2&a)?Object(f.a)(e,t,r,i):e.watch(t,r,i);return this.handles.add(o,s),{remove:function(){return n.handles.remove(s)}}}},{key:"addOnCollectionPropertyChange",value:function(e,t,r){var n=this,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=0!=(2&a),s=++this.handleId;return this.handles.add([Object(f.b)(e,t,"after-changes",this.createSyncUpdatingCallback()),Object(f.b)(e,t,"change",r,i?function(e){r({added:e.items,removed:[],moved:[],target:e})}:void 0)],s),{remove:function(){n.handles.remove(s)}}}},{key:"addOnCollectionChange",value:function(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=0!=(2&n),i=++this.handleId;return this.handles.add([e.on("after-changes",this.createSyncUpdatingCallback()),e.on("change",t)],i),a&&t({added:e.items,removed:[],moved:[],target:e}),{remove:function(){r.handles.remove(i)}}}},{key:"addPromise",value:function(e){var t=this;if(Object(c.i)(e))return e;var r=++this.handleId;this.handles.add({remove:function(){t.pendingPromises.delete(e)&&(0!==t.pendingPromises.size||t.handles.has(m)||t._set("updating",!1))}},r),this.pendingPromises.add(e),this._set("updating",!0);var n=function(){return t.handles.remove(r)};return e.then(n,n),e}},{key:"removeAll",value:function(){this.pendingPromises.clear(),this.handles.removeAll(),this._set("updating",!1)}},{key:"installSyncUpdatingWatch",value:function(e,t,r){var n=this.createSyncUpdatingCallback(),a=Object(d.b)((function(){return Object(p.c)(e,t)}),n);return this.handles.add(a,r),a}},{key:"createSyncUpdatingCallback",value:function(){var e=this;return function(){e.handles.remove(m),++e.scheduleHandleId;var t=e.scheduleHandleId;e._get("updating")||e._set("updating",!0),e.handles.add(Object(b.a)((function(){t===e.scheduleHandleId&&(e._set("updating",e.pendingPromises.size>0),e.handles.remove(m))})),m)}}}]),r}(u.a);Object(o.a)([Object(h.b)({readOnly:!0})],v.prototype,"updating",void 0),v=Object(o.a)([Object(y.a)("esri.views.support.WatchUpdatingTracking")],v);var m=-42},808:function(e,t,r){"use strict";r.d(t,"a",(function(){return y}));var n=r(21),a=r(2),i=r(4),s=r(5),o=r(6),u=r(0),l=r(52),c=r(726),b=r(11),f=r(1),p=(r(19),r(14),r(15),r(10)),d=r(215),h=function(e){Object(s.a)(r,e);var t=Object(o.a)(r);function r(e){var n;return Object(a.a)(this,r),(n=t.call(this,e)).getCollections=null,n}return Object(i.a)(r,[{key:"initialize",value:function(){var e=this;this.handles.add(Object(d.a)((function(){return e.refresh()})))}},{key:"destroy",value:function(){this.getCollections=null}},{key:"refresh",value:function(){var e=Object(b.j)(this.getCollections)?this.getCollections():null;if(Object(b.i)(e))this.removeAll();else{var t,r=0,a=Object(n.a)(e);try{for(a.s();!(t=a.n()).done;){var i=t.value;Object(b.j)(i)&&(r=this._processCollection(r,i))}}catch(s){a.e(s)}finally{a.f()}this.splice(r,this.length)}}},{key:"_createNewInstance",value:function(e){return new l.a(e)}},{key:"_processCollection",value:function(e,t){if(!t)return e;var r,a=this.itemFilterFunction?this.itemFilterFunction:function(e){return!!e},i=Object(n.a)(t);try{for(i.s();!(r=i.n()).done;){var s=r.value;if(s){if(a(s)){var o=this.indexOf(s,e);o>=0?o!==e&&this.reorder(s,e):this.add(s,e),++e}if(this.getChildrenFunction){var u=this.getChildrenFunction(s);if(Array.isArray(u)){var l,c=Object(n.a)(u);try{for(c.s();!(l=c.n()).done;){var b=l.value;e=this._processCollection(e,b)}}catch(f){c.e(f)}finally{c.f()}}else e=this._processCollection(e,u)}}}}catch(f){i.e(f)}finally{i.f()}return e}}]),r}(Object(c.b)(l.a));Object(u.a)([Object(f.b)()],h.prototype,"getCollections",void 0),Object(u.a)([Object(f.b)()],h.prototype,"getChildrenFunction",void 0),Object(u.a)([Object(f.b)()],h.prototype,"itemFilterFunction",void 0);var y=h=Object(u.a)([Object(p.a)("esri.core.CollectionFlattener")],h)}}]);
//# sourceMappingURL=61.491826b3.chunk.js.map