{"version":3,"sources":["../node_modules/@arcgis/core/core/workers/RemoteClient.js","../node_modules/@arcgis/core/core/workers/utils.js","../node_modules/@arcgis/core/core/workers/Connection.js","../node_modules/@arcgis/core/core/workers/loaderConfig.js","../node_modules/@arcgis/core/core/workers/workerFactory.js","../node_modules/@arcgis/core/core/workers/WorkerFallback.js","../node_modules/@arcgis/core/core/workers/WorkerOwner.js","../node_modules/@arcgis/core/core/workers/workers.js"],"names":["g","statsWorker","geometryEngineWorker","CSVSourceWorker","EdgeProcessingWorker","ElevationSamplerWorker","FeatureServiceSnappingSourceWorker","GeoJSONSourceWorker","LercWorker","MemorySourceWorker","PBFDecoderWorker","Pipeline","PointCloudWorker","RasterWorker","SceneLayerWorker","WFSSourceWorker","WorkerTileHandler","b","p","CLOSE","k","ABORT","v","INVOKE","y","RESPONSE","j","OPEN_PORT","f","ON","M","e","this","_timer","_cancelledJobIds","Set","_invokeMessages","_invoke","_process","bind","type","add","jobId","push","setTimeout","length","clear","has","S","s","_port","_outJobs","Map","_inJobs","_invokeQueue","_onInvokeMessage","_client","client","_onMessage","_channel","channel","_schedule","schedule","addEventListener","start","_post","_close","size","t","o","n","signal","a","transferList","Promise","reject","methodName","data","l","c","r","get","delete","abortHandle","remove","i","resolve","debugInfo","set","abortable","MessageChannel","postMessage","eventType","port","port2","port1","close","removeEventListener","forEach","_processMessage","h","_onResponseMessage","_onAbortMessage","_onCloseMessage","_onOpenPortMessage","_onOnMessage","controller","abort","clients","destroy","remoteClient","_","indexOf","split","TypeError","call","d","error","u","promise","then","message","on","fromJSON","JSON","parse","default","kernelInfo","revision","version","buildDate","m","HANDSHAKE","OPEN","OPENED","stringify","name","toJSON","details","stack","result","filter","ArrayBuffer","constructor","getLogger","_clients","Array","_clientPromises","_clientIdx","invoke","isBusy","race","isArray","warn","closed","Error","getAvailableClient","all","map","openPort","numClients","async","isDebug","locale","baseUrl","packages","concat","paths","hasOwnProperty","document","createDocumentFragment","MutationObserver","WebKitMutationObserver","process","nextTick","createElement","shift","observe","attributes","setAttribute","MessageEvent","bubbles","cancelable","createEvent","initEvent","_dispatcher","_workerPostMessage","_onmessageHandler","_onmessageerrorHandler","_onerrorHandler","_workerMessageHandler","dispatchEvent","modulePath","loadWorker","import","connect","w","replace","URL","createObjectURL","Blob","Worker","P","preventDefault","assetsPath","request","interceptors","log","workers","loaderUrl","workerPath","loaderConfig","esriConfig","worker","id","terminate","_onOpenedMessage","navigator","hardwareConcurrency","open","strategy","maxNumWorkers","Math","min","create"],"mappings":"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","file":"static/js/7.af5039cf.chunk.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{version as e}from\"../../kernel.js\";import s from\"../Error.js\";import{on as t}from\"../events.js\";import{isSome as o}from\"../maybe.js\";import{onAbortOrThrow as r,createAbortError as i,createAbortController as n,isPromiseLike as a,isAbortError as l}from\"../promiseUtils.js\";import{newJobId as c,MessageType as p,receiveMessage as h,toInvokeError as u,postMessage as _}from\"./utils.js\";import{commitHash as d,buildDate as m}from\"../../support/revision.js\";const g={statsWorker:()=>import(\"../../smartMapping/statistics/support/statsWorker.js\"),geometryEngineWorker:()=>import(\"../../geometry/geometryEngineWorker.js\"),CSVSourceWorker:()=>import(\"../../layers/graphics/sources/support/CSVSourceWorker.js\"),EdgeProcessingWorker:()=>import(\"../../views/3d/webgl-engine/lib/edgeRendering/EdgeProcessingWorker.js\"),ElevationSamplerWorker:()=>import(\"../../geometry/support/meshUtils/ElevationSamplerWorker.js\"),FeatureServiceSnappingSourceWorker:()=>import(\"../../views/interactive/snapping/featureSources/featureServiceSource/FeatureServiceSnappingSourceWorker.js\"),GeoJSONSourceWorker:()=>import(\"../../layers/graphics/sources/geojson/GeoJSONSourceWorker.js\"),LercWorker:()=>import(\"../../layers/support/LercWorker.js\"),MemorySourceWorker:()=>import(\"../../layers/graphics/sources/support/MemorySourceWorker.js\"),PBFDecoderWorker:()=>import(\"../../views/3d/support/PBFDecoderWorker.js\"),Pipeline:()=>import(\"../../views/2d/layers/features/Pipeline.js\"),PointCloudWorker:()=>import(\"../../views/3d/layers/PointCloudWorker.js\"),RasterWorker:()=>import(\"../../layers/support/RasterWorker.js\"),SceneLayerWorker:()=>import(\"../../views/3d/layers/SceneLayerWorker.js\"),WFSSourceWorker:()=>import(\"../../layers/graphics/sources/WFSSourceWorker.js\"),WorkerTileHandler:()=>import(\"../../views/2d/engine/vectorTiles/WorkerTileHandler.js\")},{CLOSE:b,ABORT:k,INVOKE:v,RESPONSE:y,OPEN_PORT:j,ON:f}=p;class M{constructor(e){this._timer=null,this._cancelledJobIds=new Set,this._invokeMessages=[],this._invoke=e,this._timer=null,this._process=this._process.bind(this)}push(e){e.type===p.ABORT?this._cancelledJobIds.add(e.jobId):(this._invokeMessages.push(e),null===this._timer&&(this._timer=setTimeout(this._process,0)))}clear(){this._invokeMessages.length=0,this._cancelledJobIds.clear(),this._timer=null}_process(){this._timer=null;for(const e of this._invokeMessages)this._cancelledJobIds.has(e.jobId)||this._invoke(e);this._cancelledJobIds.clear(),this._invokeMessages.length=0}}class S{constructor(e,s){this._port=e,this._outJobs=new Map,this._inJobs=new Map,this._invokeQueue=new M((e=>this._onInvokeMessage(e))),this._client=s.client,this._onMessage=this._onMessage.bind(this),this._channel=s.channel,this._schedule=s.schedule,this._port.addEventListener(\"message\",this._onMessage),this._port.start()}static connect(e){const s=new MessageChannel;let t;t=\"function\"==typeof e?new e:\"default\"in e&&\"function\"==typeof e.default?new e.default:e;const o=new S(s.port1,{channel:s,client:t});return\"object\"==typeof t&&\"remoteClient\"in t&&(t.remoteClient=o),S.clients.set(o,t),s.port2}static loadWorker(e){const s=g[e];return s?s():Promise.resolve(null)}close(){this._post({type:b}),this._close()}isBusy(){return this._outJobs.size>0}invoke(e,t,o){const n=o&&o.signal,a=o&&o.transferList;if(!this._port)return Promise.reject(new s(\"worker:port-closed\",`Cannot call invoke('${e}'), port is closed`,{methodName:e,data:t}));const l=c();return new Promise(((s,o)=>{const c=r(n,(()=>{var e;const s=this._outJobs.get(l);s&&(this._outJobs.delete(l),null==(e=s.abortHandle)||e.remove(),this._post({type:k,jobId:l}),o(i()))})),p={resolve:s,reject:o,abortHandle:c,debugInfo:e};this._outJobs.set(l,p),this._post({type:v,jobId:l,methodName:e,abortable:null!=n},t,a)}))}on(e,s){const t=new MessageChannel;function o(e){s(e.data)}return this._port.postMessage({type:p.ON,eventType:e,port:t.port2},[t.port2]),t.port1.addEventListener(\"message\",o),t.port1.start(),{remove(){t.port1.postMessage({type:p.CLOSE}),t.port1.close(),t.port1.removeEventListener(\"message\",o)}}}openPort(){const e=new MessageChannel;return this._post({type:j,port:e.port2}),e.port1}_close(){this._channel&&(this._channel=null),this._port.removeEventListener(\"message\",this._onMessage),this._port.close(),this._outJobs.forEach((e=>{var s;null==(s=e.abortHandle)||s.remove(),e.reject(i(`Worker closing, aborting job calling '${e.debugInfo}'`))})),this._inJobs.clear(),this._outJobs.clear(),this._invokeQueue.clear(),this._port=this._client=this._schedule=null}_onMessage(e){o(this._schedule)?this._schedule((()=>this._processMessage(e))):this._processMessage(e)}_processMessage(e){const s=h(e);if(s)switch(s.type){case y:this._onResponseMessage(s);break;case v:this._invokeQueue.push(s);break;case k:this._onAbortMessage(s);break;case b:this._onCloseMessage();break;case j:this._onOpenPortMessage(s);break;case f:this._onOnMessage(s)}}_onAbortMessage(e){const s=this._inJobs,t=e.jobId,o=s.get(t);this._invokeQueue.push(e),o&&(o.controller&&o.controller.abort(),s.delete(t))}_onCloseMessage(){const e=this._client;this._close(),e&&\"destroy\"in e&&S.clients.get(this)===e&&e.destroy(),S.clients.delete(this),e&&e.remoteClient&&(e.remoteClient=null)}_onInvokeMessage(e){const{methodName:s,jobId:t,data:o,abortable:r}=e,i=r?n():null,c=this._inJobs;let p,h=this._client,_=h[s];try{if(!_&&s&&-1!==s.indexOf(\".\")){const e=s.split(\".\");for(let s=0;s<e.length-1;s++)h=h[e[s]],_=h[e[s+1]]}if(\"function\"!=typeof _)throw new TypeError(`${s} is not a function`);p=_.call(h,o,{client:this,signal:i?i.signal:null})}catch(d){return void this._post({type:y,jobId:t,error:u(d)})}a(p)?(c.set(t,{controller:i,promise:p}),p.then((e=>{c.has(t)&&(c.delete(t),this._post({type:y,jobId:t},e))}),(e=>{c.has(t)&&(c.delete(t),l(e)||this._post({type:y,jobId:t,error:u(e||{message:`Error encountered at method ${s}`})}))}))):this._post({type:y,jobId:t},p)}_onOpenPortMessage(e){new S(e.port,{client:this._client})}_onOnMessage(e){const{port:s}=e,o=this._client.on(e.eventType,(e=>{s.postMessage(e)})),r=t(e.port,\"message\",(e=>{h(e).type===p.CLOSE&&(r.remove(),o.remove(),s.close())}))}_onResponseMessage(e){var t;const{jobId:o,error:r,data:i}=e,n=this._outJobs;if(!n.has(o))return;const a=n.get(o);n.delete(o),null==(t=a.abortHandle)||t.remove(),r?a.reject(s.fromJSON(JSON.parse(r))):a.resolve(i)}_post(e,s,t){return _(this._port,e,s,t)}}S.kernelInfo={revision:d,version:e,buildDate:m},S.clients=new Map;export{S as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport t from\"../has.js\";var e;!function(t){t[t.HANDSHAKE=0]=\"HANDSHAKE\",t[t.OPEN=1]=\"OPEN\",t[t.OPENED=2]=\"OPENED\",t[t.RESPONSE=3]=\"RESPONSE\",t[t.INVOKE=4]=\"INVOKE\",t[t.ABORT=5]=\"ABORT\",t[t.CLOSE=6]=\"CLOSE\",t[t.OPEN_PORT=7]=\"OPEN_PORT\",t[t.ON=8]=\"ON\"}(e||(e={}));let r=0;function n(){return r++}function s(t){return t&&\"object\"==typeof t&&(\"result\"in t||\"transferList\"in t)}function a(t){return t?\"string\"==typeof t?JSON.stringify({name:\"message\",message:t}):t.toJSON?JSON.stringify(t):JSON.stringify({name:t.name,message:t.message,details:t.details||{stack:t.stack}}):null}function i(t,r,n,a){if(r.type===e.OPEN_PORT)return void t.postMessage(r,[r.port]);if(r.type!==e.INVOKE&&r.type!==e.RESPONSE)return void t.postMessage(r);let i;s(n)?(i=o(n.transferList),r.data=n.result):(i=o(a),r.data=n),i?t.postMessage(r,i):t.postMessage(r)}function f(t){if(!t)return null;const e=t.data;return e?\"string\"==typeof e?JSON.parse(e):e:null}function o(e){if(!e||!e.length)return null;if(t(\"esri-workers-arraybuffer-transfer\"))return e;const r=e.filter((t=>!u(t)));return r.length?r:null}function u(t){return t instanceof ArrayBuffer||t&&t.constructor&&\"ArrayBuffer\"===t.constructor.name}export{e as MessageType,s as isTranferableResult,n as newJobId,i as postMessage,f as receiveMessage,a as toInvokeError};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{handlesGroup as e}from\"../handleUtils.js\";import t from\"../Logger.js\";import{isPromiseLike as s,throwIfAborted as i}from\"../promiseUtils.js\";import n from\"./RemoteClient.js\";const r=t.getLogger(\"esri.core.workers.Connection\");class l{constructor(){this._clients=new Array,this._clientPromises=new Array,this._clientIdx=0}destroy(){this.close()}get closed(){return!this._clients||!this._clients.length}open(e,t){return new Promise(((r,l)=>{let o=!0;const h=e=>{i(t.signal),o&&(o=!1,e())};this._clients.length=e.length,this._clientPromises.length=e.length;for(let i=0;i<e.length;++i){const o=e[i];s(o)?this._clientPromises[i]=o.then((e=>(this._clients[i]=new n(e,t),h(r),this._clients[i])),(()=>(h(l),null))):(this._clients[i]=new n(o,t),this._clientPromises[i]=Promise.resolve(this._clients[i]),h(r))}}))}broadcast(e,t,s){const i=new Array(this._clientPromises.length);for(let n=0;n<this._clientPromises.length;++n){const r=this._clientPromises[n];i[n]=r.then((i=>i.invoke(e,t,s)))}return i}close(){for(const e of this._clientPromises)e.then((e=>e.close()));this._clients.length=0,this._clientPromises.length=0}getAvailableClient(){let e;for(let t=0;t<this._clients.length;++t){const s=this._clients[t];if(s){if(!s.isBusy())return Promise.resolve(s)}else e=e||[],e.push(this._clientPromises[t])}return e?Promise.race(e):(this._clientIdx=(this._clientIdx+1)%this._clients.length,Promise.resolve(this._clients[this._clientIdx]))}invoke(e,t,s){let i=null;if(Array.isArray(s)?(r.warn(\"invoke()\",\"The transferList parameter is deprecated, use the options object instead\"),i={transferList:s}):i=s,this.closed)return Promise.reject(new Error(\"Connection closed\"));return this.getAvailableClient().then((s=>s.invoke(e,t,i)))}on(t,s){return Promise.all(this._clientPromises).then((()=>e(this._clients.map((e=>e.on(t,s))))))}openPorts(){return new Promise((e=>{const t=new Array(this._clientPromises.length);let s=t.length;for(let i=0;i<this._clientPromises.length;++i){this._clientPromises[i].then((n=>{t[i]=n.openPort(),0==--s&&e(t)}))}}))}get test(){return{numClients:this._clients.length}}}export{l as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport\"../../assets.js\";import\"../has.js\";import\"../urlUtils.js\";let a=null;const s={};function e(a,s){for(const e of a)if(e.name===s.name)return;a.push(s)}function r(a){var r;const n={async:a.async,isDebug:a.isDebug,locale:a.locale,baseUrl:a.baseUrl,has:{...a.has},map:{...a.map},packages:a.packages&&a.packages.concat()||[],paths:{...a.paths}};return a.hasOwnProperty(\"async\")||(n.async=!0),a.hasOwnProperty(\"isDebug\")||(n.isDebug=!1),a.baseUrl||(n.baseUrl=s.baseUrl),null==(r=s.packages)||r.forEach((a=>{e(n.packages,a)})),n}export{a as DEFAULT_LOADER_URL,r as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{getAssetUrl as e}from\"../../assets.js\";import r from\"../../config.js\";import\"../../intl.js\";import{version as o}from\"../../kernel.js\";import t from\"../has.js\";import s from\"../Logger.js\";import{makeAbsolute as i}from\"../urlUtils.js\";import n from\"./loaderConfig.js\";import{receiveMessage as a,MessageType as l}from\"./utils.js\";import f from\"./WorkerFallback.js\";import{getLocale as c}from\"../../intl/locale.js\";import{buildDate as d,commitHash as u}from\"../../support/revision.js\";const m=s.getLogger(\"esri.core.workers\"),{HANDSHAKE:g}=l,p='let globalId=0;const outgoing=new Map,configuration=JSON.parse(\"{CONFIGURATION}\");self.esriConfig=configuration.esriConfig;const workerPath=self.esriConfig.workers.workerPath,HANDSHAKE=0,OPEN=1,OPENED=2,RESPONSE=3,INVOKE=4,ABORT=5;function createAbortError(){const e=new Error(\"Aborted\");return e.name=\"AbortError\",e}function receiveMessage(e){return e&&e.data?\"string\"==typeof e.data?JSON.parse(e.data):e.data:null}function invokeStaticMessage(e,o,r){const t=r&&r.signal,n=globalId++;return new Promise(((r,i)=>{if(t){if(t.aborted)return i(createAbortError());t.addEventListener(\"abort\",(()=>{outgoing.get(n)&&(outgoing.delete(n),self.postMessage({type:5,jobId:n}),i(createAbortError()))}))}outgoing.set(n,{resolve:r,reject:i}),self.postMessage({type:4,jobId:n,methodName:e,abortable:null!=t,data:o})}))}let workerRevisionChecked=!1;function checkWorkerRevision(e){if(!workerRevisionChecked&&e.kernelInfo){workerRevisionChecked=!0;const{revision:o,buildDate:r,version:t}=configuration.kernelInfo,{revision:n,buildDate:i,version:s}=e.kernelInfo;o!==n&&console.warn(`[esri.core.workers] Version mismatch detected between ArcGIS API for JavaScript and assets:\\nAPI version: ${t} [Date: ${r}, Revision: ${o.slice(0,8)}]\\nAssets version: ${s} [Date: ${i}, Revision: ${n.slice(0,8)}]`)}}function messageHandler(e){const o=receiveMessage(e);if(!o)return;const r=o.jobId;switch(o.type){case 1:let e;function t(o){const t=e.connect(o);self.postMessage({type:2,jobId:r,data:t},[t])}\"function\"==typeof define&&define.amd?require([workerPath],(r=>{e=r.default||r,checkWorkerRevision(e),e.loadWorker(o.modulePath).then((e=>e||new Promise((e=>{require([o.modulePath],e)})))).then(t)})):\"System\"in self&&\"function\"==typeof System.import?System.import(workerPath).then((r=>(e=r.default,checkWorkerRevision(e),e.loadWorker(o.modulePath)))).then((e=>e||System.import(o.modulePath))).then(t):(self.RemoteClient||importScripts(workerPath),e=self.RemoteClient.default||self.RemoteClient,checkWorkerRevision(e),e.loadWorker(o.modulePath).then(t));break;case 3:if(outgoing.has(r)){const e=outgoing.get(r);outgoing.delete(r),o.error?e.reject(JSON.parse(o.error)):e.resolve(o.data)}}}self.dojoConfig=configuration.loaderConfig,esriConfig.workers.loaderUrl&&(self.importScripts(esriConfig.workers.loaderUrl),\"function\"==typeof require&&\"function\"==typeof require.config&&require.config(configuration.loaderConfig)),self.addEventListener(\"message\",messageHandler),self.postMessage({type:0});';let k,h;const w=\"Failed to create Worker. Fallback to execute module in main thread\";async function v(){if(!t(\"esri-workers\"))return b(new f);if(!k&&!h)try{const e=p.replace('\"{CONFIGURATION}\"',`'${y()}'`);k=URL.createObjectURL(new Blob([e],{type:\"text/javascript\"}))}catch(r){h=r||{}}let e;if(k)try{e=new Worker(k,{name:\"esri-worker-\"+P++})}catch(r){m.warn(w,h),e=new f}else m.warn(w,h),e=new f;return b(e)}async function b(e){return new Promise((r=>{function o(s){const i=a(s);i&&i.type===g&&(e.removeEventListener(\"message\",o),e.removeEventListener(\"error\",t),r(e))}function t(r){r.preventDefault(),e.removeEventListener(\"message\",o),e.removeEventListener(\"error\",t),m.warn(\"Failed to create Worker. Fallback to execute module in main thread\",r),(e=new f).addEventListener(\"message\",o),e.addEventListener(\"error\",t)}e.addEventListener(\"message\",o),e.addEventListener(\"error\",t)}))}function y(){let s;if(null!=r.default){const e={...r};delete e.default,s=JSON.parse(JSON.stringify(e))}else s=JSON.parse(JSON.stringify(r));s.assetsPath=i(s.assetsPath),s.request.interceptors=[],s.log.interceptors=[],s.locale=c(),s.has={\"csp-restrictions\":t(\"csp-restrictions\"),\"esri-2d-debug\":!1,\"esri-2d-update-debug\":t(\"esri-2d-update-debug\"),\"esri-2d-query-centroid-enabled\":t(\"esri-2d-query-centroid-enabled\"),\"featurelayer-pbf\":t(\"featurelayer-pbf\"),\"featurelayer-simplify-thresholds\":t(\"featurelayer-simplify-thresholds\"),\"featurelayer-simplify-payload-size-factors\":t(\"featurelayer-simplify-payload-size-factors\"),\"esri-atomics\":t(\"esri-atomics\"),\"esri-shared-array-buffer\":t(\"esri-shared-array-buffer\"),\"esri-tiles-debug\":t(\"esri-tiles-debug\"),\"esri-workers-arraybuffer-transfer\":t(\"esri-workers-arraybuffer-transfer\"),\"host-webworker\":1},s.workers.loaderUrl&&(s.workers.loaderUrl=i(s.workers.loaderUrl)),s.workers.workerPath?s.workers.workerPath=i(s.workers.workerPath):s.workers.workerPath=i(e(\"esri/core/workers/RemoteClient.js\"));const a=r.workers.loaderConfig,l=n({baseUrl:null==a?void 0:a.baseUrl,locale:c(),has:{\"csp-restrictions\":t(\"csp-restrictions\"),\"dojo-test-sniff\":0,\"host-webworker\":1,...null==a?void 0:a.has},map:{...null==a?void 0:a.map},paths:{...null==a?void 0:a.paths},packages:(null==a?void 0:a.packages)||[]}),f={version:o,buildDate:d,revision:u};return JSON.stringify({esriConfig:s,loaderConfig:l,kernelInfo:f})}let P=0;export{v as createWorker};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport e from\"../global.js\";import t from\"./RemoteClient.js\";import{MessageType as s,receiveMessage as r}from\"./utils.js\";class n{constructor(){const e=document.createDocumentFragment();[\"addEventListener\",\"dispatchEvent\",\"removeEventListener\"].forEach((t=>{this[t]=(...s)=>e[t](...s)}))}}const o=e.MutationObserver||e.WebKitMutationObserver,a=function(){let t;if(e.process&&e.process.nextTick)t=t=>{e.process.nextTick(t)};else if(e.Promise)t=t=>{e.Promise.resolve().then(t)};else if(o){const e=[],s=document.createElement(\"div\");new o((()=>{for(;e.length>0;)e.shift()()})).observe(s,{attributes:!0}),t=t=>{e.push(t),s.setAttribute(\"queueStatus\",\"1\")}}return t}(),i=(()=>{const t=e.MessageEvent;try{new t(\"message\",{data:null})}catch{return(e,t={})=>{const{data:s,bubbles:r=!1,cancelable:n=!1}=t,o=document.createEvent(\"Event\");return o.initEvent(e,r,n),o.data=s,o}}return(e,s)=>new t(e,s)})();class d{constructor(){this._dispatcher=new n,this._workerPostMessage({type:s.HANDSHAKE})}terminate(){}get onmessage(){return this._onmessageHandler}set onmessage(e){this._onmessageHandler&&this.removeEventListener(\"message\",this._onmessageHandler),this._onmessageHandler=e,e&&this.addEventListener(\"message\",e)}get onmessageerror(){return this._onmessageerrorHandler}set onmessageerror(e){this._onmessageerrorHandler&&this.removeEventListener(\"messageerror\",this._onmessageerrorHandler),this._onmessageerrorHandler=e,e&&this.addEventListener(\"messageerror\",e)}get onerror(){return this._onerrorHandler}set onerror(e){this._onerrorHandler&&this.removeEventListener(\"error\",this._onerrorHandler),this._onerrorHandler=e,e&&this.addEventListener(\"error\",e)}postMessage(e){a((()=>{this._workerMessageHandler(i(\"message\",{data:e}))}))}dispatchEvent(e){return this._dispatcher.dispatchEvent(e)}addEventListener(e,t,s){this._dispatcher.addEventListener(e,t,s)}removeEventListener(e,t,s){this._dispatcher.removeEventListener(e,t,s)}_workerPostMessage(e){a((()=>{this.dispatchEvent(i(\"message\",{data:e}))}))}async _workerMessageHandler(e){const n=r(e);if(n&&n.type===s.OPEN){const{modulePath:e,jobId:r}=n;let o=await t.loadWorker(e);o||(o=await import(\n/* @vite-ignore */\n/* webpackIgnore: true */\ne));const a=t.connect(o);this._workerPostMessage({type:s.OPENED,jobId:r,data:a})}}}export{d as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{workerMessages as e}from\"../../kernel.js\";import t from\"../Error.js\";import o from\"../Logger.js\";import{onAbortOrThrow as s,createAbortController as r,isPromiseLike as n,isAbortError as a}from\"../promiseUtils.js\";import{newJobId as i,receiveMessage as l,toInvokeError as d,postMessage as h,MessageType as c}from\"./utils.js\";import{createWorker as p}from\"./workerFactory.js\";const b=o.getLogger(\"esri.core.workers\"),{ABORT:m,INVOKE:_,OPEN:u,OPENED:g,RESPONSE:j}=c;class f{constructor(e,t){this._outJobs=new Map,this._inJobs=new Map,this.worker=e,this.id=t,e.addEventListener(\"message\",this._onMessage.bind(this)),e.addEventListener(\"error\",(e=>{e.preventDefault(),b.error(e)}))}static async create(e){const t=await p();return new f(t,e)}terminate(){this.worker.terminate()}async open(e,t={}){const{signal:o}=t,r=i();return new Promise(((t,n)=>{const a={resolve:t,reject:n,abortHandle:s(o,(()=>{this._outJobs.delete(r),this._post({type:m,jobId:r})}))};this._outJobs.set(r,a),this._post({type:u,jobId:r,modulePath:e})}))}_onMessage(e){const t=l(e);if(t)switch(t.type){case g:this._onOpenedMessage(t);break;case j:this._onResponseMessage(t);break;case m:this._onAbortMessage(t);break;case _:this._onInvokeMessage(t)}}_onAbortMessage(e){const t=this._inJobs,o=e.jobId,s=t.get(o);s&&(s.controller&&s.controller.abort(),t.delete(o))}_onInvokeMessage(t){const{methodName:o,jobId:s,data:i,abortable:l}=t,h=l?r():null,c=this._inJobs,p=e[o];let b;try{if(\"function\"!=typeof p)throw new TypeError(`${o} is not a function`);b=p.call(null,i,{signal:h?h.signal:null})}catch(m){return void this._post({type:j,jobId:s,error:d(m)})}n(b)?(c.set(s,{controller:h,promise:b}),b.then((e=>{c.has(s)&&(c.delete(s),this._post({type:j,jobId:s},e))}),(e=>{c.has(s)&&(c.delete(s),e||(e={message:\"Error encountered at method\"+o}),a(e)||this._post({type:j,jobId:s,error:d(e||{message:`Error encountered at method ${o}`})}))}))):this._post({type:j,jobId:s},b)}_onOpenedMessage(e){var t;const{jobId:o,data:s}=e,r=this._outJobs.get(o);r&&(this._outJobs.delete(o),null==(t=r.abortHandle)||t.remove(),r.resolve(s))}_onResponseMessage(e){var o;const{jobId:s,error:r,data:n}=e,a=this._outJobs.get(s);a&&(this._outJobs.delete(s),null==(o=a.abortHandle)||o.remove(),r?a.reject(t.fromJSON(JSON.parse(r))):a.resolve(n))}_post(e,t,o){return h(this.worker,e,t,o)}}export{f as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport t from\"../Error.js\";import r from\"../has.js\";import{throwIfAborted as e,createAbortController as o}from\"../promiseUtils.js\";import n from\"./Connection.js\";export{default as Connection}from\"./Connection.js\";import i from\"./RemoteClient.js\";export{default as RemoteClient}from\"./RemoteClient.js\";import s from\"./WorkerOwner.js\";let a=r(\"esri-workers-debug\")?1:r(\"host-browser\")?navigator.hardwareConcurrency-1:0;a||(a=r(\"safari\")&&r(\"mac\")||r(\"trident\")?7:2);let l=0;const c=[];function m(){g()}function f(t,r){return u(t,{client:r})}async function u(t,r){const e=new n;return await e.open(t,r),e}async function p(o,n={}){if(\"string\"!=typeof o)throw new t(\"workers:undefined-module\",\"modulePath is missing\");let s=n.strategy||\"distributed\";if(r(\"host-webworker\")&&!r(\"esri-workers\")&&(s=\"local\"),\"local\"===s){let t=await i.loadWorker(o);t||(t=await import(\n/* @vite-ignore */\n/* webpackIgnore: true */\no)),e(n.signal);const r=n.client||t;return u([i.connect(t)],{...n,client:r})}if(await g(),e(n.signal),\"dedicated\"===s){const t=l++%a;return u([await c[t].open(o,n)],n)}if(n.maxNumWorkers&&n.maxNumWorkers>0){const t=Math.min(n.maxNumWorkers,a);if(t<a){const r=new Array(t);for(let e=0;e<t;++e){const t=l++%a;r[e]=c[t].open(o,n)}return u(r,n)}}return u(c.map((t=>t.open(o,n))),n)}function w(){h&&(d.abort(),h=null);for(let t=0;t<c.length;t++)c[t]&&c[t].terminate();c.length=0}let d,h=null;async function g(){if(h)return h;d=o();const t=[];for(let r=0;r<a;r++){const e=s.create(r).then((t=>(c[r]=t,t)));t.push(e)}return h=Promise.all(t),h}export{m as initialize,p as open,f as openWithPorts,w as terminate};\n"],"sourceRoot":""}