(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[53,16],{1012:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return G}));var n=r(7),i=r.n(n),a=r(12),o=r(13),s=r(2),l=r(4),c=r(5),u=r(6),b=r(0),p=r(82),y=r(665),d=r(29),f=r(726),j=r(344),v=r(11),O=r(677),h=r(30),m=r(1),g=(r(19),r(14)),w=(r(15),r(57)),S=r(10),x=r(43),k=r(164),I=r(58),T=r(346),E=r(682),P=r(724),L=r(898),F=r(710),_=r(730),D=r(721),C=r(709),N=r(699),R=r(697),M=r(716),V=r(899),A=r(719),U=r(671),J=r(60),q=r(824),B=r(832),H={visible:"visibleSublayers",definitionExpression:"layerDefs",labelingInfo:"hasDynamicLayers",labelsVisible:"hasDynamicLayers",opacity:"hasDynamicLayers",minScale:"visibleSublayers",maxScale:"visibleSublayers",renderer:"hasDynamicLayers",source:"hasDynamicLayers"},z=function(e){Object(c.a)(r,e);var t=Object(u.a)(r);function r(e){var n;return Object(s.a)(this,r),(n=t.call(this,e)).floors=null,n.scale=0,n}return Object(l.a)(r,[{key:"destroy",value:function(){this.layer=null}},{key:"dynamicLayers",get:function(){var e=this;if(!this.hasDynamicLayers)return null;var t=this.visibleSublayers.map((function(t){var r=Object(B.c)(e.floors,t);return t.toExportImageJSON(r)}));return t.length?JSON.stringify(t):null}},{key:"hasDynamicLayers",get:function(){return this.layer&&Object(q.a)(this.visibleSublayers,this.layer.serviceSublayers,this.layer)}},{key:"layer",set:function(e){var t=this;this._get("layer")!==e&&(this._set("layer",e),this.handles.remove("layer"),e&&this.handles.add([e.allSublayers.on("change",(function(){return t.notifyChange("visibleSublayers")})),e.on("sublayer-update",(function(e){return t.notifyChange(H[e.propertyName])}))],"layer"))}},{key:"layers",get:function(){var e=this.visibleSublayers;return e?e.length?"show:"+e.map((function(e){return e.id})).join(","):"show:-1":null}},{key:"layerDefs",get:function(){var e,t=this,r=!(null==(e=this.floors)||!e.length),n=this.visibleSublayers.filter((function(e){return null!=e.definitionExpression||r&&null!=e.floorInfo}));return n.length?JSON.stringify(n.reduce((function(e,r){var n=Object(B.c)(t.floors,r),i=Object(v.j)(n)?Object(B.a)(n,r):r.definitionExpression;return e[r.id]=i,e}),{})):null}},{key:"version",get:function(){this.commitProperty("layers"),this.commitProperty("layerDefs"),this.commitProperty("dynamicLayers"),this.commitProperty("timeExtent");var e=this.layer;return e&&(e.commitProperty("dpi"),e.commitProperty("imageFormat"),e.commitProperty("imageTransparency"),e.commitProperty("gdbVersion")),(this._get("version")||0)+1}},{key:"visibleSublayers",get:function(){var e=this,t=[];if(!this.layer)return t;var r=this.layer.sublayers;r&&r.forEach((function r(n){var i=e.scale,a=0===i,o=0===n.minScale||i<=n.minScale,s=0===n.maxScale||i>=n.maxScale;n.visible&&(a||o&&s)&&(n.sublayers?n.sublayers.forEach(r):t.unshift(n))}));var n=this._get("visibleSublayers");return!n||n.length!==t.length||n.some((function(e,r){return t[r]!==e}))?t:n}},{key:"toJSON",value:function(){var e=this.layer,t={dpi:e.dpi,format:e.imageFormat,transparent:e.imageTransparency,gdbVersion:e.gdbVersion||null};return this.hasDynamicLayers&&this.dynamicLayers?t.dynamicLayers=this.dynamicLayers:t=Object(o.a)(Object(o.a)({},t),{},{layers:this.layers,layerDefs:this.layerDefs}),t}}]),r}(Object(f.b)(J.a));Object(b.a)([Object(m.b)({readOnly:!0})],z.prototype,"dynamicLayers",null),Object(b.a)([Object(m.b)()],z.prototype,"floors",void 0),Object(b.a)([Object(m.b)({readOnly:!0})],z.prototype,"hasDynamicLayers",null),Object(b.a)([Object(m.b)()],z.prototype,"layer",null),Object(b.a)([Object(m.b)({readOnly:!0})],z.prototype,"layers",null),Object(b.a)([Object(m.b)({readOnly:!0})],z.prototype,"layerDefs",null),Object(b.a)([Object(m.b)({type:Number})],z.prototype,"scale",void 0),Object(b.a)([Object(m.b)(U.a)],z.prototype,"timeExtent",void 0),Object(b.a)([Object(m.b)({readOnly:!0})],z.prototype,"version",null),Object(b.a)([Object(m.b)({readOnly:!0})],z.prototype,"visibleSublayers",null),z=Object(b.a)([Object(S.a)("esri.layers.mixins.ExportImageParameters")],z);var K=r(839),$=function(e){Object(c.a)(r,e);var t=Object(u.a)(r);function r(){var e;Object(s.a)(this,r);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).datesInUnknownTimezone=!1,e.dpi=96,e.gdbVersion=null,e.imageFormat="png24",e.imageMaxHeight=2048,e.imageMaxWidth=2048,e.imageTransparency=!0,e.isReference=null,e.labelsVisible=!1,e.operationalLayerType="ArcGISMapServiceLayer",e.sourceJSON=null,e.sublayers=null,e.type="map-image",e.url=null,e}return Object(l.a)(r,[{key:"normalizeCtorArgs",value:function(e,t){return"string"==typeof e?Object(o.a)({url:e},t):e}},{key:"load",value:function(e){var t=this,r=Object(v.j)(e)?e.signal:null;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Map Service"]},e).catch(h.u).then((function(){return t._fetchService(r)}))),Promise.resolve(this)}},{key:"readImageFormat",value:function(e,t){var r=t.supportedImageFormatTypes;return r&&r.indexOf("PNG32")>-1?"png32":"png24"}},{key:"writeSublayers",value:function(e,t,r,n){if(this.loaded&&e){var i=e.slice().reverse().flatten((function(e){var t=e.sublayers;return t&&t.toArray().reverse()})).toArray(),a=!1;if(this.capabilities&&this.capabilities.operations.supportsExportMap&&this.capabilities.exportMap.supportsDynamicLayers){var s=Object(k.d)(n.origin);if(3===s){var l=this.createSublayersForOrigin("service").sublayers;a=Object(q.c)(i,l,2)}else if(s>3){var c=this.createSublayersForOrigin("portal-item");a=Object(q.c)(i,c.sublayers,Object(k.d)(c.origin))}}var u=[],b=Object(o.a)({writeSublayerStructure:a},n),p=a;i.forEach((function(e){var t=e.write({},b);u.push(t),p=p||"user"===e.originOf("visible")})),u.some((function(e){return Object.keys(e).length>1}))&&(t.layers=u),p&&(t.visibleLayers=i.filter((function(e){return e.visible})).map((function(e){return e.id})))}}},{key:"createExportImageParameters",value:function(e,t,r,n){var i=n&&n.pixelRatio||1;e&&this.version>=10&&(e=e.clone().shiftCentralMeridian());var a=new z({layer:this,floors:null==n?void 0:n.floors,scale:Object(T.b)({extent:e,width:t})*i}),s=a.toJSON();a.destroy();var l=!n||!n.rotation||this.version<10.3?{}:{rotation:-n.rotation},c=e&&e.spatialReference,u=c.wkid||JSON.stringify(c.toJSON());s.dpi*=i;var b={};if(null!=n&&n.timeExtent){var p=n.timeExtent.toJSON(),y=p.start,d=p.end;b.time=y&&d&&y===d?""+y:"".concat(null==y?"null":y,",").concat(null==d?"null":d)}else this.timeInfo&&!this.timeInfo.hasLiveData&&(b.time="null,null");return Object(o.a)(Object(o.a)(Object(o.a)({bbox:e&&e.xmin+","+e.ymin+","+e.xmax+","+e.ymax,bboxSR:u,imageSR:u,size:t+","+r},s),l),b)}},{key:"fetchImage",value:function(){var e=Object(a.a)(i.a.mark((function e(t,r,n,a){var s,l,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l={responseType:"image",signal:null!=(s=null==a?void 0:a.signal)?s:null,query:Object(o.a)(Object(o.a)(Object(o.a)(Object(o.a)(Object(o.a)({},this.parsedUrl.query),this.createExportImageParameters(t,r,n,a)),{},{f:"image"},this.refreshParameters),this.customParameters),{},{token:this.apiKey})},c=this.parsedUrl.path+"/export",null==l.query.dynamicLayers||this.capabilities.exportMap.supportsDynamicLayers){e.next=3;break}return e.abrupt("return",Promise.reject(new d.a("mapimagelayer:dynamiclayer-not-supported","service ".concat(this.url," doesn't support dynamic layers, which is required to be able to change the sublayer's order, rendering, labeling or source."),{query:l.query})));case 3:return e.abrupt("return",Object(p.default)(c,l).then((function(e){return e.data})).catch((function(e){if(Object(h.m)(e))throw e;throw new d.a("mapimagelayer:image-fetch-error","Unable to load image: ".concat(c),{error:e})})));case 4:case"end":return e.stop()}}),e,this)})));return function(t,r,n,i){return e.apply(this,arguments)}}()},{key:"fetchRecomputedExtents",value:function(){var e=Object(a.a)(i.a.mark((function e(){var t,r,n,a,s,l,c,u,b=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=b.length>0&&void 0!==b[0]?b[0]:{},r=Object(o.a)(Object(o.a)({},t),{},{query:Object(o.a)(Object(o.a)({returnUpdates:!0,f:"json"},this.customParameters),{},{token:this.apiKey})}),e.next=4,Object(p.default)(this.url,r);case 4:return n=e.sent,a=n.data,s=a.extent,l=a.fullExtent,c=a.timeExtent,u=s||l,e.abrupt("return",{fullExtent:u&&I.a.fromJSON(u),timeExtent:c&&y.a.fromJSON({start:c[0],end:c[1]})});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadAll",value:function(){var e=this;return Object(j.a)(this,(function(t){t(e.allSublayers)}))}},{key:"_fetchService",value:function(){var e=Object(a.a)(i.a.mark((function e(t){var r,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.sourceJSON){e.next=2;break}return e.abrupt("return",void this.read(this.sourceJSON,{origin:"service",url:this.parsedUrl}));case 2:return e.next=4,Object(p.default)(this.parsedUrl.path,{query:Object(o.a)(Object(o.a)(Object(o.a)({f:"json"},this.parsedUrl.query),this.customParameters),{},{token:this.apiKey}),signal:t});case 4:r=e.sent,n=r.data,r.ssl&&(this.url=this.url.replace(/^http:/i,"https:")),this.sourceJSON=n,this.read(n,{origin:"service",url:this.parsedUrl});case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(Object(_.a)(Object(A.a)(Object(M.a)(Object(V.a)(Object(L.a)(Object(F.a)(Object(C.a)(Object(N.a)(Object(O.a)(Object(R.a)(Object(P.a)(Object(D.a)(Object(f.b)(E.a))))))))))))));Object(b.a)([Object(m.b)({type:Boolean})],$.prototype,"datesInUnknownTimezone",void 0),Object(b.a)([Object(m.b)()],$.prototype,"dpi",void 0),Object(b.a)([Object(m.b)()],$.prototype,"gdbVersion",void 0),Object(b.a)([Object(m.b)()],$.prototype,"imageFormat",void 0),Object(b.a)([Object(w.a)("imageFormat",["supportedImageFormatTypes"])],$.prototype,"readImageFormat",null),Object(b.a)([Object(m.b)({json:{origins:{service:{read:{source:"maxImageHeight"}}}}})],$.prototype,"imageMaxHeight",void 0),Object(b.a)([Object(m.b)({json:{origins:{service:{read:{source:"maxImageWidth"}}}}})],$.prototype,"imageMaxWidth",void 0),Object(b.a)([Object(m.b)()],$.prototype,"imageTransparency",void 0),Object(b.a)([Object(m.b)({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:function(){return{enabled:!1}}}}})],$.prototype,"isReference",void 0),Object(b.a)([Object(m.b)({json:{read:!1,write:!1}})],$.prototype,"labelsVisible",void 0),Object(b.a)([Object(m.b)({type:["ArcGISMapServiceLayer"]})],$.prototype,"operationalLayerType",void 0),Object(b.a)([Object(m.b)({json:{read:!1,write:!1}})],$.prototype,"popupEnabled",void 0),Object(b.a)([Object(m.b)()],$.prototype,"sourceJSON",void 0),Object(b.a)([Object(m.b)({json:{write:{ignoreOrigin:!0}}})],$.prototype,"sublayers",void 0),Object(b.a)([Object(x.a)("sublayers",{layers:{type:[K.a]},visibleLayers:{type:[g.a]}})],$.prototype,"writeSublayers",null),Object(b.a)([Object(m.b)({type:["show","hide","hide-children"]})],$.prototype,"listMode",void 0),Object(b.a)([Object(m.b)({json:{read:!1},readOnly:!0,value:"map-image"})],$.prototype,"type",void 0),Object(b.a)([Object(m.b)(U.n)],$.prototype,"url",void 0);var G=$=Object(b.a)([Object(S.a)("esri.layers.MapImageLayer")],$)},669:function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var n=r(42),i=Object(n.b)()({esriTimeUnitsMilliseconds:"milliseconds",esriTimeUnitsSeconds:"seconds",esriTimeUnitsMinutes:"minutes",esriTimeUnitsHours:"hours",esriTimeUnitsDays:"days",esriTimeUnitsWeeks:"weeks",esriTimeUnitsMonths:"months",esriTimeUnitsYears:"years",esriTimeUnitsDecades:"decades",esriTimeUnitsCenturies:"centuries",esriTimeUnitsUnknown:void 0})},670:function(e,t,r){"use strict";r.d(t,"a",(function(){return L}));var n,i=r(2),a=r(4),o=r(5),s=r(6),l=r(0),c=r(114),u=r(665),b=r(42),p=r(26),y=r(18),d=r(11),f=r(1),j=r(97),v=(r(19),r(15),r(31)),O=r(10),h=r(43),m=r(14),g=r(62),w=r(673),S=r(717),x=r(714),k=r(45),I=r(48),T=new b.a({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),E=new b.a({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"}),P=n=function(e){Object(o.a)(r,e);var t=Object(s.a)(r);function r(e){var n;return Object(i.a)(this,r),(n=t.call(this,e)).aggregateIds=null,n.cacheHint=void 0,n.datumTransformation=null,n.distance=void 0,n.dynamicDataSource=void 0,n.formatOf3DObjects=null,n.gdbVersion=null,n.geometry=null,n.geometryPrecision=void 0,n.groupByFieldsForStatistics=null,n.having=null,n.historicMoment=null,n.maxAllowableOffset=void 0,n.maxRecordCountFactor=1,n.multipatchOption=null,n.num=void 0,n.objectIds=null,n.orderByFields=null,n.outFields=null,n.outSpatialReference=null,n.outStatistics=null,n.parameterValues=null,n.pixelSize=null,n.quantizationParameters=null,n.rangeValues=null,n.relationParameter=null,n.resultType=null,n.returnCentroid=!1,n.returnDistinctValues=!1,n.returnExceededLimitFeatures=!0,n.returnGeometry=!1,n.returnQueryGeometry=!1,n.returnM=void 0,n.returnZ=void 0,n.sourceSpatialReference=null,n.spatialRelationship="intersects",n.start=void 0,n.sqlFormat=null,n.text=null,n.timeExtent=null,n.timeReferenceUnknownClient=!1,n.units=null,n.where=null,n}return Object(a.a)(r,[{key:"castDatumTransformation",value:function(e){return"number"==typeof e||"object"==typeof e?e:null}},{key:"writeHistoricMoment",value:function(e,t){t.historicMoment=e&&e.getTime()}},{key:"writeParameterValues",value:function(e,t){if(e){var r={};for(var n in e){var i=e[n];Array.isArray(i)?r[n]=i.map((function(e){return e instanceof Date?e.getTime():e})):i instanceof Date?r[n]=i.getTime():r[n]=i}t.parameterValues=r}}},{key:"writeStart",value:function(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10,t.where="1=1"}},{key:"writeWhere",value:function(e,t){t.where=e||"1=1"}},{key:"clone",value:function(){return new n(Object(y.a)({aggregateIds:this.aggregateIds,cacheHint:this.cacheHint,datumTransformation:this.datumTransformation,distance:this.distance,gdbVersion:this.gdbVersion,geometry:this.geometry,geometryPrecision:this.geometryPrecision,groupByFieldsForStatistics:this.groupByFieldsForStatistics,having:this.having,historicMoment:Object(d.j)(this.historicMoment)?new Date(this.historicMoment.getTime()):null,maxAllowableOffset:this.maxAllowableOffset,maxRecordCountFactor:this.maxRecordCountFactor,multipatchOption:this.multipatchOption,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,outStatistics:this.outStatistics,parameterValues:this.parameterValues,pixelSize:this.pixelSize,quantizationParameters:this.quantizationParameters,rangeValues:this.rangeValues,relationParameter:this.relationParameter,resultType:this.resultType,returnDistinctValues:this.returnDistinctValues,returnGeometry:this.returnGeometry,returnCentroid:this.returnCentroid,returnExceededLimitFeatures:this.returnExceededLimitFeatures,returnQueryGeometry:this.returnQueryGeometry,returnM:this.returnM,returnZ:this.returnZ,dynamicDataSource:this.dynamicDataSource,sourceSpatialReference:this.sourceSpatialReference,spatialRelationship:this.spatialRelationship,start:this.start,sqlFormat:this.sqlFormat,text:this.text,timeExtent:this.timeExtent,timeReferenceUnknownClient:this.timeReferenceUnknownClient,units:this.units,where:this.where}))}}],[{key:"from",value:function(e){return Object(m.d)(n,e)}}]),r}(p.a);P.MAX_MAX_RECORD_COUNT_FACTOR=5,Object(l.a)([Object(f.b)({json:{write:!0}})],P.prototype,"aggregateIds",void 0),Object(l.a)([Object(f.b)({type:Boolean,json:{write:!0}})],P.prototype,"cacheHint",void 0),Object(l.a)([Object(f.b)({json:{write:!0}})],P.prototype,"datumTransformation",void 0),Object(l.a)([Object(j.a)("datumTransformation")],P.prototype,"castDatumTransformation",null),Object(l.a)([Object(f.b)({type:Number,json:{write:{overridePolicy:function(e){return{enabled:e>0}}}}})],P.prototype,"distance",void 0),Object(l.a)([Object(f.b)({type:w.a,json:{write:!0}})],P.prototype,"dynamicDataSource",void 0),Object(l.a)([Object(f.b)({type:String,json:{write:!0}})],P.prototype,"formatOf3DObjects",void 0),Object(l.a)([Object(f.b)({type:String,json:{write:!0}})],P.prototype,"gdbVersion",void 0),Object(l.a)([Object(f.b)({types:c.a,json:{read:g.a,write:!0}})],P.prototype,"geometry",void 0),Object(l.a)([Object(f.b)({type:Number,json:{write:!0}})],P.prototype,"geometryPrecision",void 0),Object(l.a)([Object(f.b)({type:[String],json:{write:!0}})],P.prototype,"groupByFieldsForStatistics",void 0),Object(l.a)([Object(f.b)({type:String,json:{write:!0}})],P.prototype,"having",void 0),Object(l.a)([Object(f.b)({type:Date})],P.prototype,"historicMoment",void 0),Object(l.a)([Object(h.a)("historicMoment")],P.prototype,"writeHistoricMoment",null),Object(l.a)([Object(f.b)({type:Number,json:{write:!0}})],P.prototype,"maxAllowableOffset",void 0),Object(l.a)([Object(f.b)({type:Number,cast:function(e){return e<1?1:e>n.MAX_MAX_RECORD_COUNT_FACTOR?n.MAX_MAX_RECORD_COUNT_FACTOR:e},json:{write:{overridePolicy:function(e){return{enabled:e>1}}}}})],P.prototype,"maxRecordCountFactor",void 0),Object(l.a)([Object(f.b)({type:["xyFootprint"],json:{write:!0}})],P.prototype,"multipatchOption",void 0),Object(l.a)([Object(f.b)({type:Number,json:{read:{source:"resultRecordCount"}}})],P.prototype,"num",void 0),Object(l.a)([Object(f.b)({json:{write:!0}})],P.prototype,"objectIds",void 0),Object(l.a)([Object(f.b)({type:[String],json:{write:!0}})],P.prototype,"orderByFields",void 0),Object(l.a)([Object(f.b)({type:[String],json:{write:!0}})],P.prototype,"outFields",void 0),Object(l.a)([Object(f.b)({type:k.a,json:{name:"outSR",write:!0}})],P.prototype,"outSpatialReference",void 0),Object(l.a)([Object(f.b)({type:[x.a],json:{write:{enabled:!0,overridePolicy:function(){return{enabled:Object(d.j)(this.outStatistics)&&this.outStatistics.length>0}}}}})],P.prototype,"outStatistics",void 0),Object(l.a)([Object(f.b)({json:{write:!0}})],P.prototype,"parameterValues",void 0),Object(l.a)([Object(h.a)("parameterValues")],P.prototype,"writeParameterValues",null),Object(l.a)([Object(f.b)({type:I.a,json:{write:!0}})],P.prototype,"pixelSize",void 0),Object(l.a)([Object(f.b)({type:S.a,json:{write:!0}})],P.prototype,"quantizationParameters",void 0),Object(l.a)([Object(f.b)({type:[Object],json:{write:!0}})],P.prototype,"rangeValues",void 0),Object(l.a)([Object(f.b)({type:String,json:{read:{source:"relationParam"},write:{target:"relationParam",overridePolicy:function(){return{enabled:"relation"===this.spatialRelationship}}}}})],P.prototype,"relationParameter",void 0),Object(l.a)([Object(f.b)({type:String,json:{write:!0}})],P.prototype,"resultType",void 0),Object(l.a)([Object(f.b)({type:Boolean,json:{default:!1,write:!0}})],P.prototype,"returnCentroid",void 0),Object(l.a)([Object(f.b)({type:Boolean,json:{default:!1,write:!0}})],P.prototype,"returnDistinctValues",void 0),Object(l.a)([Object(f.b)({type:Boolean,json:{default:!0,write:!0}})],P.prototype,"returnExceededLimitFeatures",void 0),Object(l.a)([Object(f.b)({type:Boolean,json:{write:!0}})],P.prototype,"returnGeometry",void 0),Object(l.a)([Object(f.b)({type:Boolean,json:{default:!1,write:!0}})],P.prototype,"returnQueryGeometry",void 0),Object(l.a)([Object(f.b)({type:Boolean,json:{default:!1,write:!0}})],P.prototype,"returnM",void 0),Object(l.a)([Object(f.b)({type:Boolean,json:{write:{overridePolicy:function(e){return{enabled:e}}}}})],P.prototype,"returnZ",void 0),Object(l.a)([Object(f.b)({type:k.a,json:{write:!0}})],P.prototype,"sourceSpatialReference",void 0),Object(l.a)([Object(v.a)(T,{ignoreUnknown:!1,name:"spatialRel"})],P.prototype,"spatialRelationship",void 0),Object(l.a)([Object(f.b)({type:Number,json:{read:{source:"resultOffset"}}})],P.prototype,"start",void 0),Object(l.a)([Object(h.a)("start"),Object(h.a)("num")],P.prototype,"writeStart",null),Object(l.a)([Object(f.b)({type:String,json:{write:!0}})],P.prototype,"sqlFormat",void 0),Object(l.a)([Object(f.b)({type:String,json:{write:!0}})],P.prototype,"text",void 0),Object(l.a)([Object(f.b)({type:u.a,json:{write:!0}})],P.prototype,"timeExtent",void 0),Object(l.a)([Object(f.b)({type:Boolean,json:{default:!1,write:!0}})],P.prototype,"timeReferenceUnknownClient",void 0),Object(l.a)([Object(v.a)(E,{ignoreUnknown:!1}),Object(f.b)({json:{write:{overridePolicy:function(e){return{enabled:e&&this.distance>0}}}}})],P.prototype,"units",void 0),Object(l.a)([Object(f.b)({type:String,json:{write:{overridePolicy:function(e){return{enabled:null!=e||this.start>0}}}}})],P.prototype,"where",void 0),Object(l.a)([Object(h.a)("where")],P.prototype,"writeWhere",null);var L=P=n=Object(l.a)([Object(O.a)("esri.rest.support.Query")],P)},672:function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));var n=r(21),i=r(2),a=r(4);function o(e){return"date"===e.type||"esriFieldTypeDate"===e.type}var s=function(){function e(t){if(Object(i.a)(this,e),this.fields=t,this._fieldsMap=new Map,this._dateFieldsSet=new Set,this.dateFields=[],t){var r,a=[],s=Object(n.a)(t);try{for(s.s();!(r=s.n()).done;){var c=r.value,u=c&&c.name;if(u){var b=l(u);this._fieldsMap.set(u,c),this._fieldsMap.set(b,c),a.push(b),o(c)&&(this.dateFields.push(c),this._dateFieldsSet.add(c))}}}catch(p){s.e(p)}finally{s.f()}a.sort(),this.uid=a.join(",")}}return Object(a.a)(e,[{key:"destroy",value:function(){this._fieldsMap.clear()}},{key:"has",value:function(e){return null!=this.get(e)}},{key:"get",value:function(e){return null!=e?this._fieldsMap.get(e)||this._fieldsMap.get(l(e)):void 0}},{key:"isDateField",value:function(e){return this._dateFieldsSet.has(this.get(e))}},{key:"normalizeFieldName",value:function(e){var t=this.get(e);if(t)return t.name}}]),e}();function l(e){return e.toLowerCase().trim()}},673:function(e,t,r){"use strict";r.d(t,"a",(function(){return R}));var n,i,a=r(2),o=r(4),s=r(5),l=r(6),c=r(0),u=r(42),b=r(26),p=r(1),y=(r(19),r(97)),d=(r(15),r(31)),f=r(57),j=r(10),v=r(14),O=r(212),h=r(666),m=r(711),g=(r(114),r(45)),w=r(236),S=n=function(e){Object(s.a)(r,e);var t=Object(l.a)(r);function r(e){var n;return Object(a.a)(this,r),(n=t.call(this,e)).type="query-table",n}return Object(o.a)(r,[{key:"clone",value:function(){var e,t=this.workspaceId,r=this.query,i=this.oidFields,a=this.spatialReference,o=this.geometryType,s={workspaceId:t,query:r,oidFields:i,spatialReference:null!=(e=null==a?void 0:a.clone())?e:void 0,geometryType:o};return new n(s)}}]),r}(b.a);Object(c.a)([Object(d.a)({queryTable:"query-table"})],S.prototype,"type",void 0),Object(c.a)([Object(p.b)({type:String,json:{write:!0}})],S.prototype,"workspaceId",void 0),Object(c.a)([Object(p.b)({type:String,json:{write:!0}})],S.prototype,"query",void 0),Object(c.a)([Object(p.b)({type:String,json:{write:!0}})],S.prototype,"oidFields",void 0),Object(c.a)([Object(p.b)({type:g.a,json:{write:!0}})],S.prototype,"spatialReference",void 0),Object(c.a)([Object(d.a)(w.a)],S.prototype,"geometryType",void 0),S=n=Object(c.a)([Object(j.a)("esri.layers.support.source.QueryTableDataSource")],S);var x,k=i=function(e){Object(s.a)(r,e);var t=Object(l.a)(r);function r(e){var n;return Object(a.a)(this,r),(n=t.call(this,e)).type="raster",n}return Object(o.a)(r,[{key:"clone",value:function(){var e=this.workspaceId,t=this.dataSourceName;return new i({workspaceId:e,dataSourceName:t})}}]),r}(b.a);Object(c.a)([Object(d.a)({raster:"raster"})],k.prototype,"type",void 0),Object(c.a)([Object(p.b)({type:String,json:{write:!0}})],k.prototype,"dataSourceName",void 0),Object(c.a)([Object(p.b)({type:String,json:{write:!0}})],k.prototype,"workspaceId",void 0),k=i=Object(c.a)([Object(j.a)("esri.layers.support.source.RasterDataSource")],k);var I,T,E=x=function(e){Object(s.a)(r,e);var t=Object(l.a)(r);function r(e){var n;return Object(a.a)(this,r),(n=t.call(this,e)).type="table",n}return Object(o.a)(r,[{key:"clone",value:function(){var e=this.workspaceId,t=this.gdbVersion,r=this.dataSourceName;return new x({workspaceId:e,gdbVersion:t,dataSourceName:r})}}]),r}(b.a);Object(c.a)([Object(d.a)({table:"table"})],E.prototype,"type",void 0),Object(c.a)([Object(p.b)({type:String,json:{write:!0}})],E.prototype,"workspaceId",void 0),Object(c.a)([Object(p.b)({type:String,json:{write:!0}})],E.prototype,"gdbVersion",void 0),Object(c.a)([Object(p.b)({type:String,json:{write:!0}})],E.prototype,"dataSourceName",void 0),E=x=Object(c.a)([Object(j.a)("esri.layers.support.source.TableDataSource")],E);var P=Object(u.b)()({esriLeftInnerJoin:"left-inner-join",esriLeftOuterJoin:"left-outer-join"}),L=I=function(e){Object(s.a)(r,e);var t=Object(l.a)(r);function r(e){var n;return Object(a.a)(this,r),(n=t.call(this,e)).type="join-table",n}return Object(o.a)(r,[{key:"readLeftTableSource",value:function(e,t,r){return _()(e,t,r)}},{key:"castLeftTableSource",value:function(e){return Object(v.k)(C(),e)}},{key:"readRightTableSource",value:function(e,t,r){return _()(e,t,r)}},{key:"castRightTableSource",value:function(e){return Object(v.k)(C(),e)}},{key:"clone",value:function(){var e,t,r=this.leftTableKey,n=this.rightTableKey,i=this.leftTableSource,a=this.rightTableSource,o=this.joinType,s={leftTableKey:r,rightTableKey:n,leftTableSource:null!=(e=null==i?void 0:i.clone())?e:void 0,rightTableSource:null!=(t=null==a?void 0:a.clone())?t:void 0,joinType:o};return new I(s)}}]),r}(b.a);Object(c.a)([Object(d.a)({joinTable:"join-table"})],L.prototype,"type",void 0),Object(c.a)([Object(p.b)({type:String,json:{write:!0}})],L.prototype,"leftTableKey",void 0),Object(c.a)([Object(p.b)({type:String,json:{write:!0}})],L.prototype,"rightTableKey",void 0),Object(c.a)([Object(p.b)({json:{write:!0}})],L.prototype,"leftTableSource",void 0),Object(c.a)([Object(f.a)("leftTableSource")],L.prototype,"readLeftTableSource",null),Object(c.a)([Object(y.a)("leftTableSource")],L.prototype,"castLeftTableSource",null),Object(c.a)([Object(p.b)({json:{write:!0}})],L.prototype,"rightTableSource",void 0),Object(c.a)([Object(f.a)("rightTableSource")],L.prototype,"readRightTableSource",null),Object(c.a)([Object(y.a)("rightTableSource")],L.prototype,"castRightTableSource",null),Object(c.a)([Object(d.a)(P)],L.prototype,"joinType",void 0),L=I=Object(c.a)([Object(j.a)("esri.layers.support.source.JoinTableDataSource")],L);var F=null;function _(){return F||(F=Object(O.b)({types:C()})),F}var D=null;function C(){return D||(D={key:"type",base:null,typeMap:{"data-layer":R,"map-layer":m.a}}),D}var N={key:"type",base:null,typeMap:{"join-table":L,"query-table":S,raster:k,table:E}},R=T=function(e){Object(s.a)(r,e);var t=Object(l.a)(r);function r(e){var n;return Object(a.a)(this,r),(n=t.call(this,e)).type="data-layer",n}return Object(o.a)(r,[{key:"clone",value:function(){var e=this.fields,t=this.dataSource;return new T({fields:e,dataSource:t})}}]),r}(b.a);Object(c.a)([Object(d.a)({dataLayer:"data-layer"})],R.prototype,"type",void 0),Object(c.a)([Object(p.b)({type:[h.a],json:{write:!0}})],R.prototype,"fields",void 0),Object(c.a)([Object(p.b)({types:N,json:{write:!0}})],R.prototype,"dataSource",void 0),(R=T=Object(c.a)([Object(j.a)("esri.layers.support.source.DataLayerSource")],R)).from=Object(v.m)(R)},675:function(e,t,r){"use strict";r.d(t,"a",(function(){return E}));var n,i=r(2),a=r(4),o=r(5),s=r(6),l=r(0),c=r(332),u=r(42),b=r(26),p=r(18),y=r(1),d=(r(14),r(19),r(15),r(57)),f=r(10),j=r(43),v=r(693),O=n=function(e){Object(o.a)(r,e);var t=Object(s.a)(r);function r(){var e;return Object(i.a)(this,r),(e=t.apply(this,arguments)).expression=null,e.title=null,e.value=null,e}return Object(a.a)(r,[{key:"readExpression",value:function(e,t){return t.value?Object(v.a)(t.value):e}},{key:"writeExpression",value:function(e,t,r){null!=this.value&&(e=Object(v.a)(this.value)),t[r]=e}},{key:"clone",value:function(){return new n({expression:this.expression,title:this.title,value:this.value})}}]),r}(b.a);Object(l.a)([Object(y.b)({type:String,json:{write:{allowNull:!0}}})],O.prototype,"expression",void 0),Object(l.a)([Object(d.a)("expression",["expression","value"])],O.prototype,"readExpression",null),Object(l.a)([Object(j.a)("expression")],O.prototype,"writeExpression",null),Object(l.a)([Object(y.b)({type:String,json:{write:!0,origins:{"web-scene":{write:!1}}}})],O.prototype,"title",void 0),Object(l.a)([Object(y.b)({json:{read:!1,write:!1}})],O.prototype,"value",void 0);var h,m=O=n=Object(l.a)([Object(f.a)("esri.layers.support.LabelExpressionInfo")],O),g=r(725),w=r(753),S=new u.a({esriServerPointLabelPlacementAboveCenter:"above-center",esriServerPointLabelPlacementAboveLeft:"above-left",esriServerPointLabelPlacementAboveRight:"above-right",esriServerPointLabelPlacementBelowCenter:"below-center",esriServerPointLabelPlacementBelowLeft:"below-left",esriServerPointLabelPlacementBelowRight:"below-right",esriServerPointLabelPlacementCenterCenter:"center-center",esriServerPointLabelPlacementCenterLeft:"center-left",esriServerPointLabelPlacementCenterRight:"center-right",esriServerLinePlacementAboveAfter:"above-after",esriServerLinePlacementAboveAlong:"above-along",esriServerLinePlacementAboveBefore:"above-before",esriServerLinePlacementAboveStart:"above-start",esriServerLinePlacementAboveEnd:"above-end",esriServerLinePlacementBelowAfter:"below-after",esriServerLinePlacementBelowAlong:"below-along",esriServerLinePlacementBelowBefore:"below-before",esriServerLinePlacementBelowStart:"below-start",esriServerLinePlacementBelowEnd:"below-end",esriServerLinePlacementCenterAfter:"center-after",esriServerLinePlacementCenterAlong:"center-along",esriServerLinePlacementCenterBefore:"center-before",esriServerLinePlacementCenterStart:"center-start",esriServerLinePlacementCenterEnd:"center-end",esriServerPolygonPlacementAlwaysHorizontal:"always-horizontal"},{ignoreUnknown:!0});function x(e){return!e||"service"!==e.origin&&!k(e.layer)}function k(e){return"map-image"===(null==e?void 0:e.type)}function I(e){var t,r;return!!k(e)&&!(null==(t=e.capabilities)||null==(r=t.exportMap)||!r.supportsArcadeExpressionForLabeling)}var T=h=function(e){Object(o.a)(r,e);var t=Object(s.a)(r);function r(e){var n;return Object(i.a)(this,r),(n=t.call(this,e)).type="label",n.name=null,n.deconflictionStrategy="static",n.labelExpression=null,n.labelExpressionInfo=null,n.labelPlacement=null,n.maxScale=0,n.minScale=0,n.symbol=g.a,n.useCodedValues=void 0,n.where=null,n}return Object(a.a)(r,[{key:"readLabelExpression",value:function(e,t){var r=t.labelExpressionInfo;if(!r||!r.value&&!r.expression)return e}},{key:"writeLabelExpression",value:function(e,t,r){if(this.labelExpressionInfo)if(null!=this.labelExpressionInfo.value)e=Object(v.f)(this.labelExpressionInfo.value);else if(null!=this.labelExpressionInfo.expression){var n=Object(v.e)(this.labelExpressionInfo.expression);n&&(e="["+n+"]")}null!=e&&(t[r]=e)}},{key:"writeLabelExpressionInfo",value:function(e,t,r,n){if(null==e&&null!=this.labelExpression&&x(n))e=new m({expression:this.getLabelExpressionArcade()});else if(!e)return;var i=e.toJSON(n);i.expression&&(t[r]=i)}},{key:"writeMaxScale",value:function(e,t){(e||this.minScale)&&(t.maxScale=e)}},{key:"writeMinScale",value:function(e,t){(e||this.maxScale)&&(t.minScale=e)}},{key:"getLabelExpression",value:function(){return Object(v.b)(this)}},{key:"getLabelExpressionArcade",value:function(){return Object(v.c)(this)}},{key:"getLabelExpressionSingleField",value:function(){return Object(v.d)(this)}},{key:"hash",value:function(){return JSON.stringify(this)}},{key:"clone",value:function(){return new h({deconflictionStrategy:this.deconflictionStrategy,labelExpression:this.labelExpression,labelExpressionInfo:Object(p.a)(this.labelExpressionInfo),labelPlacement:this.labelPlacement,maxScale:this.maxScale,minScale:this.minScale,name:this.name,symbol:Object(p.a)(this.symbol),where:this.where,useCodedValues:this.useCodedValues})}}],[{key:"evaluateWhere",value:function(e,t){var r=function(e,t,r){switch(t){case"=":return e==r;case"<>":return e!=r;case">":return e>r;case">=":return e>=r;case"<":return e<r;case"<=":return e<=r}return!1};try{if(null==e)return!0;var n=e.split(" ");if(3===n.length)return r(t[n[0]],n[1],n[2]);if(7===n.length){var i=r(t[n[0]],n[1],n[2]),a=n[3],o=r(t[n[4]],n[5],n[6]);switch(a){case"AND":return i&&o;case"OR":return i||o}}return!1}catch(s){console.log("Error.: can't parse = "+e)}}}]),r}(b.a);Object(l.a)([Object(y.b)({type:String,json:{write:!0}})],T.prototype,"name",void 0),Object(l.a)([Object(y.b)({type:String,json:{write:!0,default:"static",origins:{"web-scene":{write:!1}}}})],T.prototype,"deconflictionStrategy",void 0),Object(l.a)([Object(y.b)({type:String,json:{write:{overridePolicy:function(e,t,r){return this.labelExpressionInfo&&"service"===(null==r?void 0:r.origin)&&I(r.layer)?{enabled:!1}:{allowNull:!0}}}}})],T.prototype,"labelExpression",void 0),Object(l.a)([Object(d.a)("labelExpression")],T.prototype,"readLabelExpression",null),Object(l.a)([Object(j.a)("labelExpression")],T.prototype,"writeLabelExpression",null),Object(l.a)([Object(y.b)({type:m,json:{write:{overridePolicy:function(e,t,r){return function(e){return x(e)||I(e.layer)}(r)?{allowNull:!0}:{enabled:!1}}}}})],T.prototype,"labelExpressionInfo",void 0),Object(l.a)([Object(j.a)("labelExpressionInfo")],T.prototype,"writeLabelExpressionInfo",null),Object(l.a)([Object(y.b)({type:S.apiValues,json:{type:S.jsonValues,read:S.read,write:S.write}})],T.prototype,"labelPlacement",void 0),Object(l.a)([Object(y.b)({type:Number})],T.prototype,"maxScale",void 0),Object(l.a)([Object(j.a)("maxScale")],T.prototype,"writeMaxScale",null),Object(l.a)([Object(y.b)({type:Number})],T.prototype,"minScale",void 0),Object(l.a)([Object(j.a)("minScale")],T.prototype,"writeMinScale",null),Object(l.a)([Object(y.b)({types:c.g,json:{origins:{"web-scene":{types:c.h,write:w.b,default:null}},write:w.b,default:null}})],T.prototype,"symbol",void 0),Object(l.a)([Object(y.b)({type:Boolean,json:{write:!0}})],T.prototype,"useCodedValues",void 0),Object(l.a)([Object(y.b)({type:String,json:{write:!0}})],T.prototype,"where",void 0);var E=T=h=Object(l.a)([Object(f.a)("esri.layers.support.LabelClass")],T)},676:function(e,t,r){"use strict";r.d(t,"a",(function(){return f})),r.d(t,"b",(function(){return p})),r.d(t,"c",(function(){return v})),r.d(t,"d",(function(){return g})),r.d(t,"e",(function(){return y})),r.d(t,"f",(function(){return d})),r.d(t,"g",(function(){return O})),r.d(t,"h",(function(){return h})),r.d(t,"i",(function(){return j})),r.d(t,"j",(function(){return m}));var n=r(22),i=r(11),a=r(27),o=r(87),s={mapserver:"MapServer",imageserver:"ImageServer",featureserver:"FeatureServer",sceneserver:"SceneServer",streamserver:"StreamServer",vectortileserver:"VectorTileServer"},l=Object.values(s),c=new RegExp("^((?:https?:)?\\/\\/\\S+?\\/rest\\/services\\/(.+?)\\/(".concat(l.join("|"),"))(?:\\/(?:layers\\/)?(\\d+))?"),"i"),u=new RegExp("^((?:https?:)?\\/\\/\\S+?\\/([^\\/\\n]+)\\/(".concat(l.join("|"),"))(?:\\/(?:layers\\/)?(\\d+))?"),"i"),b=/(.*?)\/(?:layers\/)?(\d+)\/?$/i;function p(e){return!!c.test(e)}function y(e){var t=Object(a.J)(e),r=t.path.match(c)||t.path.match(u);if(!r)return null;var i=Object(n.a)(r,5),o=i[1],l=i[2],b=i[3],p=i[4],y=l.indexOf("/");return{title:f(-1!==y?l.slice(y+1):l),serverType:s[b.toLowerCase()],sublayer:null!=p&&""!==p?parseInt(p,10):null,url:{path:o}}}function d(e){var t=Object(a.J)(e).path.match(b);return t?{serviceUrl:t[1],sublayerId:Number(t[2])}:null}function f(e){return(e=e.replace(/\s*[/_]+\s*/g," "))[0].toUpperCase()+e.slice(1)}function j(e,t){var r=[];if(e){var n=y(e);Object(i.j)(n)&&n.title&&r.push(n.title)}if(t){var a=f(t);r.push(a)}if(2===r.length){if(-1!==r[0].toLowerCase().indexOf(r[1].toLowerCase()))return r[0];if(-1!==r[1].toLowerCase().indexOf(r[0].toLowerCase()))return r[1]}return r.join(" - ")}function v(e){if(!e)return!1;var t=-1!==(e=e.toLowerCase()).indexOf(".arcgis.com/"),r=-1!==e.indexOf("//services")||-1!==e.indexOf("//tiles")||-1!==e.indexOf("//features");return t&&r}function O(e,t){return e?Object(a.H)(Object(a.G)(e,t)):e}function h(e){var t=e.url;if(!t)return{url:t};t=Object(a.G)(t,e.logger);var r,n=Object(a.J)(t),o=y(n.path);if(Object(i.j)(o))null!=o.sublayer&&null==e.layer.layerId&&(r=o.sublayer),t=o.url.path;else if(e.nonStandardUrlAllowed){var s=d(n.path);Object(i.j)(s)&&(t=s.serviceUrl,r=s.sublayerId)}return{url:Object(a.H)(t),layerId:r}}function m(e,t,r,n,i){Object(o.f)(t,n,"url",i),n.url&&null!=e.layerId&&(n.url=Object(a.y)(n.url,r,e.layerId.toString()))}function g(e){if(!e)return!1;var t=e.toLowerCase(),r=-1!==t.indexOf("/services/"),n=-1!==t.indexOf("/mapserver/wmsserver"),i=-1!==t.indexOf("/imageserver/wmsserver"),a=-1!==t.indexOf("/wmsserver");return r&&(n||i||a)}},678:function(e,t,r){"use strict";r.d(t,"a",(function(){return f}));var n,i=r(2),a=r(4),o=r(5),s=r(6),l=r(0),c=r(26),u=r(692),b=r(1),p=(r(19),r(14),r(15),r(10)),y=r(669),d=n=function(e){Object(o.a)(r,e);var t=Object(s.a)(r);function r(e){var n;return Object(i.a)(this,r),(n=t.call(this,e)).value=0,n.unit="milliseconds",n}return Object(a.a)(r,[{key:"toMilliseconds",value:function(){return Object(u.a)(this.value,this.unit,"milliseconds")}},{key:"clone",value:function(){return new n({value:this.value,unit:this.unit})}}]),r}(c.a);Object(l.a)([Object(b.b)({type:Number,json:{write:!0},nonNullable:!0})],d.prototype,"value",void 0),Object(l.a)([Object(b.b)({type:y.a.apiValues,json:{type:y.a.jsonValues,read:y.a.read,write:y.a.write},nonNullable:!0})],d.prototype,"unit",void 0);var f=d=n=Object(l.a)([Object(p.a)("esri.TimeInterval")],d)},686:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return V}));var n,i=r(23),a=r(13),o=r(22),s=r(7),l=r.n(s),c=r(21),u=r(12),b=r(2),p=r(4),y=r(77),d=r(65),f=r(5),j=r(6),v=r(0),O=r(46),h=r(82),m=r(29),g=r(18),w=r(15),S=r(712),x=r(11),k=r(30),I=r(109),T=r(1),E=(r(14),r(19),r(10)),P=r(43),L=r(209),F=r(663),_=r(684),D=r(237),C=r(186),N=w.a.getLogger("esri.renderers.DictionaryRenderer"),R={type:"CIMSimpleLineCallout",lineSymbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",width:.5,color:[0,0,0,255]}]}},M=n=function(e){Object(f.a)(r,e);var t=Object(j.a)(r);function r(e){var n;return Object(b.a)(this,r),(n=t.call(this,e))._ongoingRequests=new Map,n._symbolCache=new S.a(100),n.config=null,n.fieldMap=null,n.scaleExpression=null,n.scaleExpressionTitle=null,n.url=null,n.type="dictionary",n}return Object(p.a)(r,[{key:"writeData",value:function(e,t){e&&(t.scalingExpressionInfo={expression:e,returnType:"number"})}},{key:"writeVisualVariables",value:function(e,t,n,i){null!=i&&i.origin||Object(y.a)(Object(d.a)(r.prototype),"writeVisualVariables",this).call(this,e,t,n,i)}},{key:"clone",value:function(){return new n({config:Object(g.a)(this.config),scaleExpression:this.scaleExpression,scaleExpressionTitle:this.scaleExpressionTitle,fieldMap:Object(g.a)(this.fieldMap),url:Object(g.a)(this.url),visualVariables:Object(g.a)(this.visualVariables)})}},{key:"getSymbolAsync",value:function(){var e=Object(u.a)(l.a.mark((function e(t,r){var n,i,a,o,s,u,b,p,y,d,f,j,v,h,m,g,w,S,T,E,P,L,F,_,D,C,N=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._dictionaryPromise||(this._dictionaryPromise=this.fetchResources(r)),e.prev=1,e.next=4,this._dictionaryPromise;case 4:n=e.sent,e.next=11;break;case 7:if(e.prev=7,e.t0=e.catch(1),!Object(k.m)(e.t0)){e.next=11;break}return e.abrupt("return",(this._dictionaryPromise=null,null));case 11:if(i={},this.fieldMap){a=Object(c.a)(this._symbolFields);try{for(a.s();!(o=a.n()).done;)s=o.value,(u=this.fieldMap[s])&&null!==t.attributes[u]&&void 0!==t.attributes[u]?(b=""+t.attributes[u],i[s]=b):i[s]=""}catch(l){a.e(l)}finally{a.f()}}if((p=n(i,r))&&"string"==typeof p){e.next=16;break}return e.abrupt("return",null);case 16:if(y=Object(I.b)(p).toString(),!(d=this._symbolCache.get(y))){e.next=19;break}return e.abrupt("return",(d.catch((function(){N._symbolCache.pop(y)})),d));case 19:f=p.split(";"),j=[],v=[],h=Object(c.a)(f);try{for(h.s();!(m=h.n()).done;)if((g=m.value)&&0!==g.length)if(-1===g.indexOf("po:"))if(-1!==g.indexOf("|")){w=Object(c.a)(g.split("|"));try{for(w.s();!(S=w.n()).done;)T=S.value,this._itemNames.has(T)&&j.push(T)}catch(l){w.e(l)}finally{w.f()}}else this._itemNames.has(g)&&j.push(g);else 3===(E=g.substr(3).split("|")).length&&(P=E[0],L=E[1],F=E[2],"DashTemplate"===L?F=F.split(" ").map((function(e){return Number(e)})):"Color"===L?(_=new O.a(F).toRgba(),F=[_[0],_[1],_[2],255*_[3]]):F=Number(F),v.push({primitiveName:P,propertyName:L,value:F}))}catch(l){h.e(l)}finally{h.f()}return D=!Object(x.j)(t.geometry)||!t.geometry.hasZ&&"point"===t.geometry.type,C=this._cimPartsToCIMSymbol(j,v,D,r),e.abrupt("return",(this._symbolCache.put(y,C,1),C));case 24:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"collectRequiredFields",value:function(){var e=Object(u.a)(l.a.mark((function e(t,r){var n,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.collectVVRequiredFields(t,r);case 2:if(e.t0=this.scaleExpression,!e.t0){e.next=6;break}return e.next=6,Object(L.a)(t,r,this.scaleExpression);case 6:for(n in this.fieldMap)i=this.fieldMap[n],r.has(i)&&t.add(i);case 7:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"arcadeRequired",get:function(){return!0}},{key:"fetchResources",value:function(){var e=Object(u.a)(l.a.mark((function e(t){var r,n,i,s,u,b,p,y,d,f,j,v,O,g,w,S,k,I=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._dictionaryPromise){e.next=2;break}return e.abrupt("return",this._dictionaryPromise);case 2:if(this.url){e.next=4;break}return e.abrupt("return",void N.error("no valid URL!"));case 4:return r=Object(x.j)(t)?t.abortOptions:null,n=Object(h.default)(this.url+"/resources/styles/dictionary-info.json",Object(a.a)({responseType:"json",query:{f:"json"}},r)),e.next=8,Promise.all([n,Object(D.e)()]);case 8:if(i=e.sent,s=Object(o.a)(i,1),u=s[0].data){e.next=13;break}throw this._dictionaryPromise=null,new m.a("esri.renderers.DictionaryRenderer","Bad dictionary data!");case 13:if(b=u.expression,p=u.authoringInfo,this._refSymbolUrlTemplate=this.url+"/"+u.cimRefTemplateUrl,this._itemNames=new Set(u.itemsNames),this._symbolFields=p.symbol,y={},this.config)for(f in d=this.config)y[f]=d[f];if(p.configuration){j=Object(c.a)(p.configuration);try{for(j.s();!(v=j.n()).done;)O=v.value,y.hasOwnProperty(O.name)||(y[O.name]=O.value)}catch(l){j.e(l)}finally{j.f()}}if(g=[],Object(x.j)(t)&&t.fields&&this.fieldMap){w=Object(c.a)(this._symbolFields);try{for(k=function(){var e=S.value,r=I.fieldMap[e],n=t.fields.filter((function(e){return e.name===r}));n.length>0&&g.push(Object(a.a)(Object(a.a)({},n[0]),{},{name:e}))},w.s();!(S=w.n()).done;)k()}catch(l){w.e(l)}finally{w.f()}}return e.abrupt("return",(this._dictionaryPromise=Object(D.b)(b,Object(x.j)(t)?t.spatialReference:null,g,y).then((function(e){var t={scale:0};return function(r,n){var i=e.repurposeFeature({geometry:null,attributes:r});return t.scale=Object(x.j)(n)?n.scale:void 0,e.evaluate({$feature:i,$view:t})}})).catch((function(e){return N.error("Creating dictinoary expression failed:",e),null})),this._dictionaryPromise));case 21:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getSymbol",value:function(){return null}},{key:"getSymbols",value:function(){return[]}},{key:"getAttributeHash",value:function(){return this.visualVariables&&this.visualVariables.reduce((function(e,t){return e+t.getAttributeHash()}),"")}},{key:"getMeshHash",value:function(){return"".concat(this.url,"-").concat(JSON.stringify(this.fieldMap))}},{key:"getSymbolFields",value:function(){return this._symbolFields}},{key:"_getSymbolPart",value:function(){var e=Object(u.a)(l.a.mark((function e(t,r){var n,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._ongoingRequests.has(t)){e.next=2;break}return e.abrupt("return",this._ongoingRequests.get(t).then((function(e){return e.data})));case 2:return n=this._refSymbolUrlTemplate.replace(/\{itemName\}/gi,t),i=Object(h.default)(n,Object(a.a)({responseType:"json",query:{f:"json"}},r)),this._ongoingRequests.set(t,i),e.prev=4,e.next=7,i;case 7:return e.abrupt("return",e.sent.data);case 10:return e.prev=10,e.t0=e.catch(4),e.abrupt("return",(this._ongoingRequests.delete(t),Promise.reject(e.t0)));case 13:case"end":return e.stop()}}),e,this,[[4,10]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"_combineSymbolParts",value:function(e,t,r){if(!e||0===e.length)return null;var n=Object(a.a)({},e[0]);if(e.length>1){n.symbolLayers=[];var o,s=Object(c.a)(e);try{for(s.s();!(o=s.n()).done;){var l,u=o.value;(l=n.symbolLayers).unshift.apply(l,Object(i.a)(u.symbolLayers))}}catch(b){s.e(b)}finally{s.f()}}return r&&(n.callout=R),{type:"CIMSymbolReference",symbol:n,primitiveOverrides:t}}},{key:"_cimPartsToCIMSymbol",value:function(){var e=Object(u.a)(l.a.mark((function e(t,r,n,i){var a,o,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(a=new Array(t.length),o=0;o<t.length;o++)a[o]=this._getSymbolPart(t[o],i);return e.next=4,Promise.all(a);case 4:return s=e.sent,e.abrupt("return",new C.a({data:this._combineSymbolParts(s,r,n)}));case 6:case"end":return e.stop()}}),e,this)})));return function(t,r,n,i){return e.apply(this,arguments)}}()}]),r}(Object(_.a)(F.a));Object(v.a)([Object(T.b)({type:Object,json:{read:{source:"configuration"},write:{target:"configuration"}}})],M.prototype,"config",void 0),Object(v.a)([Object(T.b)({type:Object,json:{write:!0}})],M.prototype,"fieldMap",void 0),Object(v.a)([Object(T.b)({type:String,json:{read:{source:"scalingExpressionInfo.expression"},write:!0}})],M.prototype,"scaleExpression",void 0),Object(v.a)([Object(P.a)("scaleExpression")],M.prototype,"writeData",null),Object(v.a)([Object(T.b)({type:String,json:{read:{source:"scalingExpressionInfo.title"},write:{target:"scalingExpressionInfo.title",overridePolicy:function(e){return{enabled:!!e&&!!this.scaleExpression}}}}})],M.prototype,"scaleExpressionTitle",void 0),Object(v.a)([Object(T.b)({type:String,json:{write:!0}})],M.prototype,"url",void 0),Object(v.a)([Object(P.a)("visualVariables")],M.prototype,"writeVisualVariables",null);var V=M=n=Object(v.a)([Object(E.a)("esri.renderers.DictionaryRenderer")],M)},687:function(e,t,r){"use strict";r.d(t,"a",(function(){return m}));var n,i=r(7),a=r.n(i),o=r(12),s=r(2),l=r(4),c=r(5),u=r(6),b=r(0),p=r(18),y=r(1),d=(r(14),r(19),r(15),r(31)),f=r(10),j=r(663),v=r(684),O=r(765),h=n=function(e){Object(c.a)(r,e);var t=Object(u.a)(r);function r(e){var n;return Object(s.a)(this,r),(n=t.call(this,e)).description=null,n.label=null,n.symbol=null,n.type="simple",n}return Object(l.a)(r,[{key:"collectRequiredFields",value:function(){var e=Object(o.a)(a.a.mark((function e(t,r){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this.collectSymbolFields(t,r),this.collectVVRequiredFields(t,r)]);case 2:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"collectSymbolFields",value:function(){var e=Object(o.a)(a.a.mark((function e(t,r){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(this.getSymbols().map((function(e){return e.collectRequiredFields(t,r)})));case 2:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getSymbol",value:function(e,t){return this.symbol}},{key:"getSymbolAsync",value:function(){var e=Object(o.a)(a.a.mark((function e(t,r){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.symbol);case 1:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getSymbols",value:function(){return this.symbol?[this.symbol]:[]}},{key:"getAttributeHash",value:function(){return this.visualVariables&&this.visualVariables.reduce((function(e,t){return e+t.getAttributeHash()}),"")}},{key:"getMeshHash",value:function(){return this.getSymbols().reduce((function(e,t){return e+JSON.stringify(t)}),"")}},{key:"arcadeRequired",get:function(){return this.arcadeRequiredForVisualVariables}},{key:"clone",value:function(){return new n({description:this.description,label:this.label,symbol:this.symbol&&this.symbol.clone(),visualVariables:Object(p.a)(this.visualVariables),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})}}]),r}(Object(v.a)(j.a));Object(b.a)([Object(y.b)({type:String,json:{write:!0}})],h.prototype,"description",void 0),Object(b.a)([Object(y.b)({type:String,json:{write:!0}})],h.prototype,"label",void 0),Object(b.a)([Object(y.b)(O.b)],h.prototype,"symbol",void 0),Object(b.a)([Object(d.a)({simple:"simple"})],h.prototype,"type",void 0);var m=h=n=Object(b.a)([Object(f.a)("esri.renderers.SimpleRenderer")],h)},688:function(e,t,r){"use strict";r.d(t,"a",(function(){return R}));var n,i=r(21),a=r(7),o=r.n(a),s=r(12),l=r(2),c=r(4),u=r(5),b=r(6),p=r(0),y=r(46),d=r(18),f=r(61),j=r(14),v=(r(19),r(15)),O=r(31),h=r(1),m=r(10),g=r(209),w=r(663),S=r(684),x=r(26),k=r(97),I=v.a.getLogger("esri.renderers.support.AttributeColorInfo"),T=n=function(e){Object(u.a)(r,e);var t=Object(b.a)(r);function r(e){var n;return Object(l.a)(this,r),(n=t.call(this,e)).color=null,n.field=null,n.label=null,n.valueExpression=null,n.valueExpressionTitle=null,n}return Object(c.a)(r,[{key:"castField",value:function(e){return null==e?e:"function"==typeof e?(I.error(".field: field must be a string value"),null):Object(j.l)(e)}},{key:"getAttributeHash",value:function(){return"".concat(this.field,"-").concat(this.valueExpression)}},{key:"clone",value:function(){return new n({color:this.color&&this.color.clone(),field:this.field,label:this.label,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})}}]),r}(x.a);Object(p.a)([Object(h.b)({type:y.a,json:{type:[Number],write:!0}})],T.prototype,"color",void 0),Object(p.a)([Object(h.b)({type:String,json:{write:!0}})],T.prototype,"field",void 0),Object(p.a)([Object(k.a)("field")],T.prototype,"castField",null),Object(p.a)([Object(h.b)({type:String,json:{write:!0}})],T.prototype,"label",void 0),Object(p.a)([Object(h.b)({type:String,json:{write:!0}})],T.prototype,"valueExpression",void 0),Object(p.a)([Object(h.b)({type:String,json:{write:!0}})],T.prototype,"valueExpressionTitle",void 0);var E,P=T=n=Object(p.a)([Object(m.a)("esri.renderers.support.AttributeColorInfo")],T),L=E=function(e){Object(u.a)(r,e);var t=Object(b.a)(r);function r(){var e;return Object(l.a)(this,r),(e=t.apply(this,arguments)).unit=null,e}return Object(c.a)(r,[{key:"clone",value:function(){return new E({unit:this.unit})}}]),r}(x.a);Object(p.a)([Object(h.b)({type:String,json:{write:!0}})],L.prototype,"unit",void 0);var F,_=L=E=Object(p.a)([Object(m.a)("esri.renderers.support.DotDensityLegendOptions")],L),D=r(166),C=r(98),N=F=function(e){Object(u.a)(r,e);var t=Object(b.a)(r);function r(e){var n;return Object(l.a)(this,r),(n=t.call(this,e)).attributes=null,n.backgroundColor=new y.a([0,0,0,0]),n.blendDots=!0,n.dotBlendingEnabled=!0,n.dotShape="square",n.dotSize=1,n.legendOptions=null,n.outline=new C.a,n.dotValue=null,n.referenceDotValue=null,n.referenceScale=null,n.seed=1,n.type="dot-density",n}return Object(c.a)(r,[{key:"calculateDotValue",value:function(e){if(null==this.referenceScale)return this.dotValue;var t=e/this.referenceScale*this.dotValue;return t<1?1:t}},{key:"getSymbol",value:function(){return new D.a({outline:this.outline})}},{key:"getSymbolAsync",value:function(){var e=Object(s.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.getSymbol());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getSymbols",value:function(){return[this.getSymbol()]}},{key:"getAttributeHash",value:function(){return this.attributes&&this.attributes.reduce((function(e,t){return e+t.getAttributeHash()}),"")}},{key:"getMeshHash",value:function(){return JSON.stringify(this.outline)}},{key:"clone",value:function(){return new F({attributes:Object(d.a)(this.attributes),backgroundColor:Object(d.a)(this.backgroundColor),dotBlendingEnabled:Object(d.a)(this.dotBlendingEnabled),dotShape:Object(d.a)(this.dotShape),dotSize:Object(d.a)(this.dotSize),dotValue:Object(d.a)(this.dotValue),legendOptions:Object(d.a)(this.legendOptions),outline:Object(d.a)(this.outline),referenceScale:Object(d.a)(this.referenceScale),visualVariables:Object(d.a)(this.visualVariables),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})}},{key:"getControllerHash",value:function(){return"".concat(this.attributes.map((function(e){return e.field||e.valueExpression||""})),"-").concat(this.outline&&JSON.stringify(this.outline.toJSON())||"")}},{key:"collectRequiredFields",value:function(){var e=Object(s.a)(o.a.mark((function e(t,r){var n,a,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.collectVVRequiredFields(t,r);case 2:n=Object(i.a)(this.attributes),e.prev=3,n.s();case 5:if((a=n.n()).done){e.next=14;break}if(s=a.value,e.t0=s.valueExpression,!e.t0){e.next=11;break}return e.next=11,Object(g.a)(t,r,s.valueExpression);case 11:s.field&&t.add(s.field);case 12:e.next=5;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(3),n.e(e.t1);case 19:return e.prev=19,n.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,this,[[3,16,19,22]])})));return function(t,r){return e.apply(this,arguments)}}()}]),r}(Object(S.a)(w.a));Object(p.a)([Object(h.b)({type:[P],json:{write:!0}})],N.prototype,"attributes",void 0),Object(p.a)([Object(h.b)({type:y.a,json:{write:!0}})],N.prototype,"backgroundColor",void 0),Object(p.a)([Object(h.b)({type:Boolean}),Object(f.a)("dotBlendingEnabled")],N.prototype,"blendDots",void 0),Object(p.a)([Object(h.b)({type:Boolean,json:{write:!0}})],N.prototype,"dotBlendingEnabled",void 0),Object(p.a)([Object(h.b)({type:String,json:{write:!1}})],N.prototype,"dotShape",void 0),Object(p.a)([Object(h.b)({type:Number,json:{write:!1}})],N.prototype,"dotSize",void 0),Object(p.a)([Object(h.b)({type:_,json:{write:!0}})],N.prototype,"legendOptions",void 0),Object(p.a)([Object(h.b)({type:C.a,json:{default:null,write:!0}})],N.prototype,"outline",void 0),Object(p.a)([Object(h.b)({type:Number,json:{write:!0}})],N.prototype,"dotValue",void 0),Object(p.a)([Object(h.b)({type:Number}),Object(f.a)("dotValue")],N.prototype,"referenceDotValue",void 0),Object(p.a)([Object(h.b)({type:Number,json:{write:!0}})],N.prototype,"referenceScale",void 0),Object(p.a)([Object(h.b)({type:Number,json:{write:!0}})],N.prototype,"seed",void 0),Object(p.a)([Object(O.a)({dotDensity:"dot-density"})],N.prototype,"type",void 0);var R=N=F=Object(p.a)([Object(m.a)("esri.renderers.DotDensityRenderer")],N)},689:function(e,t,r){"use strict";r.d(t,"a",(function(){return x}));var n,i=r(7),a=r.n(i),o=r(12),s=r(2),l=r(4),c=r(5),u=r(6),b=r(0),p=r(46),y=r(18),d=r(1),f=(r(14),r(19),r(15),r(31)),j=r(10),v=r(209),O=r(663),h=r(26),m=n=function(e){Object(c.a)(r,e);var t=Object(u.a)(r);function r(e){var n;return Object(s.a)(this,r),(n=t.call(this,e)).color=null,n.ratio=null,n}return Object(l.a)(r,[{key:"clone",value:function(){return new n({color:this.color,ratio:this.ratio})}}]),r}(h.a);Object(b.a)([Object(d.b)({type:p.a,json:{write:!0}})],m.prototype,"color",void 0),Object(b.a)([Object(d.b)({type:Number,json:{write:!0}})],m.prototype,"ratio",void 0);var g,w=m=n=Object(b.a)([Object(j.a)("esri.renderers.support.HeatmapColorStop")],m),S=g=function(e){Object(c.a)(r,e);var t=Object(u.a)(r);function r(e){var n;return Object(s.a)(this,r),(n=t.call(this,e)).blurRadius=10,n.colorStops=[new w({ratio:0,color:new p.a("rgba(255, 140, 0, 0)")}),new w({ratio:.75,color:new p.a("rgba(255, 140, 0, 1)")}),new w({ratio:.9,color:new p.a("rgba(255, 0,   0, 1)")})],n.field=null,n.fieldOffset=0,n.maxPixelIntensity=100,n.minPixelIntensity=0,n.type="heatmap",n}return Object(l.a)(r,[{key:"collectRequiredFields",value:function(){var e=Object(o.a)(a.a.mark((function e(t,r){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(n=this.field)&&"string"==typeof n&&Object(v.b)(t,r,n);case 2:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getAttributeHash",value:function(){return null}},{key:"getMeshHash",value:function(){return"".concat(JSON.stringify(this.colorStops),".").concat(this.blurRadius,".").concat(this.field)}},{key:"clone",value:function(){return new g({blurRadius:this.blurRadius,colorStops:Object(y.a)(this.colorStops),field:this.field,maxPixelIntensity:this.maxPixelIntensity,minPixelIntensity:this.minPixelIntensity})}}]),r}(O.a);Object(b.a)([Object(d.b)({type:Number,json:{write:!0}})],S.prototype,"blurRadius",void 0),Object(b.a)([Object(d.b)({type:[w],json:{write:!0}})],S.prototype,"colorStops",void 0),Object(b.a)([Object(d.b)({type:String,json:{write:!0}})],S.prototype,"field",void 0),Object(b.a)([Object(d.b)({type:Number,json:{write:{overridePolicy:function(e,t,r){return{enabled:null==r}}}}})],S.prototype,"fieldOffset",void 0),Object(b.a)([Object(d.b)({type:Number,json:{write:!0}})],S.prototype,"maxPixelIntensity",void 0),Object(b.a)([Object(d.b)({type:Number,json:{write:!0}})],S.prototype,"minPixelIntensity",void 0),Object(b.a)([Object(f.a)({heatmap:"heatmap"})],S.prototype,"type",void 0);var x=S=g=Object(b.a)([Object(j.a)("esri.renderers.HeatmapRenderer")],S)},691:function(e,t,r){"use strict";r.d(t,"a",(function(){return u})),r.d(t,"b",(function(){return b}));var n=r(700),i=r(686),a=r(688),o=r(689),s=r(663),l=r(687),c=r(701),u={key:"type",base:s.a,typeMap:{heatmap:o.a,simple:l.a,"unique-value":c.a,"class-breaks":n.a,"dot-density":a.a,dictionary:i.default},errorContext:"renderer"},b={key:"type",base:s.a,typeMap:{simple:l.a,"unique-value":c.a,"class-breaks":n.a},errorContext:"renderer"}},693:function(e,t,r){"use strict";r.d(t,"a",(function(){return f})),r.d(t,"b",(function(){return p})),r.d(t,"c",(function(){return y})),r.d(t,"d",(function(){return d})),r.d(t,"e",(function(){return m})),r.d(t,"f",(function(){return b}));var n=r(109),i="__begin__",a="__end__",o=new RegExp(i,"ig"),s=new RegExp(a,"ig"),l=new RegExp("^"+i,"i"),c=new RegExp(a+"$","i"),u='"';function b(e){return e.replace(new RegExp("\\{","g"),"[").replace(new RegExp("\\}","g"),"]")}function p(e){var t={expression:"",type:"none"};return e.labelExpressionInfo?e.labelExpressionInfo.value?(t.expression=e.labelExpressionInfo.value,t.type="conventional"):e.labelExpressionInfo.expression&&(t.expression=e.labelExpressionInfo.expression,t.type="arcade"):null!=e.labelExpression&&(t.expression=function(e){return e.replace(new RegExp("\\[","g"),"{").replace(new RegExp("\\]","g"),"}")}(e.labelExpression),t.type="conventional"),t}function y(e){var t=p(e);if(!t)return null;switch(t.type){case"conventional":return f(t.expression);case"arcade":return t.expression}return null}function d(e){var t=p(e);if(!t)return null;switch(t.type){case"conventional":return function(e){var t=e.match(j);return t&&t[1].trim()||null}(t.expression);case"arcade":return m(t.expression)}return null}function f(e){var t;return e?(t=Object(n.c)(e,(function(e){return i+'$feature["'+e+'"]'+a})),t=l.test(t)?t.replace(l,""):u+t,t=(t=c.test(t)?t.replace(c,""):t+u).replace(o,'" + ').replace(s,' + "')):t='""',t}var j=/^\s*\{([^}]+)\}\s*$/i;var v=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])([\w\s]+)(\2)\]));?\s*$/i,O=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])([\w\s]+)(\2)\]));?\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(\1|\3)(\5)\s*\));?\s*$/i,h=/^\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])([\w\s]+)(\1)\s*\));?\s*$/i;function m(e){if(!e)return null;var t=v.exec(e)||O.exec(e);return t?t[1]||t[3]:(t=h.exec(e))?t[2]:null}},697:function(e,t,r){"use strict";r.d(t,"a",(function(){return T}));var n=r(7),i=r.n(n),a=r(12),o=r(2),s=r(4),l=r(8),c=r(5),u=r(6),b=r(0),p=r(15),y=r(30),d=r(1),f=(r(19),r(14),r(10)),j=r(21),v=r(52),O=r(215),h=new v.a,m=new WeakMap;function g(e){w(e)&&h.push(e)}function w(e){return e&&"object"==typeof e&&"refreshInterval"in e&&"refresh"in e}function S(e,t){return Number.isFinite(e)&&Number.isFinite(t)?t<=0?e:S(t,e%t):0}var x=0,k=0;function I(){var e,t=Date.now(),r=Object(j.a)(h);try{for(r.s();!(e=r.n()).done;){var n,i=e.value;if(i.refreshInterval)t-(null!=(n=m.get(i))?n:0)+5>=6e4*i.refreshInterval&&(m.set(i,t),i.refresh(t))}}catch(a){r.e(a)}finally{r.f()}}Object(O.a)((function(){var e,t=Date.now(),r=0,n=Object(j.a)(h);try{for(n.s();!(e=n.n()).done;){var i=e.value;r=S(Math.round(6e4*i.refreshInterval),r),i.refreshInterval?m.get(i)||m.set(i,t):m.delete(i)}}catch(a){n.e(a)}finally{n.f()}if(r!==k){if(k=r,clearInterval(x),0===k)return void(x=0);x=setInterval(I,k)}}));var T=function(e){var t=function(e){Object(c.a)(r,e);var t=Object(u.a)(r);function r(){var e;Object(o.a)(this,r);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).refreshInterval=0,e.refreshTimestamp=0,e._debounceHasDataChanged=Object(y.i)((function(){return e.hasDataChanged()})),e.when().then((function(){g(Object(l.a)(e))}),(function(){})),e}return Object(s.a)(r,[{key:"destroy",value:function(){var e;w(e=this)&&h.includes(e)&&h.remove(e)}},{key:"refreshParameters",get:function(){return{_ts:this.refreshTimestamp||null}}},{key:"refresh",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now();Object(y.l)(this._debounceHasDataChanged()).then((function(r){r&&(e._set("refreshTimestamp",t),e.emit("refresh"))}),(function(t){p.a.getLogger(e.declaredClass).error(t)}))}},{key:"hasDataChanged",value:function(){var e=Object(a.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),r}(e);return Object(b.a)([Object(d.b)({type:Number,cast:function(e){return e>=.1?e:e<=0?0:.1},json:{write:!0,origins:{"web-document":{write:!0}}}})],t.prototype,"refreshInterval",void 0),Object(b.a)([Object(d.b)({readOnly:!0})],t.prototype,"refreshTimestamp",void 0),Object(b.a)([Object(d.b)()],t.prototype,"refreshParameters",null),t=Object(b.a)([Object(f.a)("esri.layers.mixins.RefreshableLayer")],t),t}},698:function(e,t,r){"use strict";r.d(t,"a",(function(){return S}));var n,i=r(2),a=r(4),o=r(5),s=r(6),l=r(0),c=r(665),u=r(678),b=r(26),p=r(18),y=r(11),d=r(1),f=(r(14),r(19),r(15),r(57)),j=r(10),v=r(43),O=n=function(e){Object(o.a)(r,e);var t=Object(s.a)(r);function r(e){var n;return Object(i.a)(this,r),(n=t.call(this,e)).respectsDaylightSaving=!1,n.timezone=null,n}return Object(a.a)(r,[{key:"readRespectsDaylightSaving",value:function(e,t){return void 0!==t.respectsDaylightSaving?t.respectsDaylightSaving:void 0!==t.respectDaylightSaving&&t.respectDaylightSaving}},{key:"clone",value:function(){var e=this.respectsDaylightSaving,t=this.timezone;return new n({respectsDaylightSaving:e,timezone:t})}}]),r}(b.a);Object(l.a)([Object(d.b)({type:Boolean,json:{write:!0}})],O.prototype,"respectsDaylightSaving",void 0),Object(l.a)([Object(f.a)("respectsDaylightSaving",["respectsDaylightSaving","respectDaylightSaving"])],O.prototype,"readRespectsDaylightSaving",null),Object(l.a)([Object(d.b)({type:String,json:{read:{source:"timeZone"},write:{target:"timeZone"}}})],O.prototype,"timezone",void 0);var h,m=O=n=Object(l.a)([Object(j.a)("esri.layers.support.TimeReference")],O),g=r(669),w=h=function(e){Object(o.a)(r,e);var t=Object(s.a)(r);function r(e){var n;return Object(i.a)(this,r),(n=t.call(this,e)).cumulative=!1,n.endField=null,n.fullTimeExtent=null,n.hasLiveData=!1,n.interval=null,n.startField=null,n.timeReference=null,n.trackIdField=null,n.useTime=!0,n}return Object(a.a)(r,[{key:"readFullTimeExtent",value:function(e,t){if(!t.timeExtent||!Array.isArray(t.timeExtent)||2!==t.timeExtent.length)return null;var r=new Date(t.timeExtent[0]),n=new Date(t.timeExtent[1]);return new c.a({start:r,end:n})}},{key:"writeFullTimeExtent",value:function(e,t){e&&Object(y.j)(e.start)&&Object(y.j)(e.end)?t.timeExtent=[e.start.getTime(),e.end.getTime()]:t.timeExtent=null}},{key:"readInterval",value:function(e,t){return t.timeInterval&&t.timeIntervalUnits?new u.a({value:t.timeInterval,unit:g.a.fromJSON(t.timeIntervalUnits)}):t.defaultTimeInterval&&t.defaultTimeIntervalUnits?new u.a({value:t.defaultTimeInterval,unit:g.a.fromJSON(t.defaultTimeIntervalUnits)}):null}},{key:"writeInterval",value:function(e,t){if(e){var r=e.toJSON();t.timeInterval=r.value,t.timeIntervalUnits=r.unit}else t.timeInterval=null,t.timeIntervalUnits=null}},{key:"clone",value:function(){var e=this.cumulative,t=this.endField,r=this.hasLiveData,n=this.interval,i=this.startField,a=this.timeReference,o=this.fullTimeExtent,s=this.trackIdField,l=this.useTime;return new h({cumulative:e,endField:t,hasLiveData:r,interval:n,startField:i,timeReference:Object(p.a)(a),fullTimeExtent:Object(p.a)(o),trackIdField:s,useTime:l})}}]),r}(b.a);Object(l.a)([Object(d.b)({type:Boolean,json:{read:{source:"exportOptions.timeDataCumulative"},write:{target:"exportOptions.timeDataCumulative"}}})],w.prototype,"cumulative",void 0),Object(l.a)([Object(d.b)({type:String,json:{read:{source:"endTimeField"},write:{target:"endTimeField",allowNull:!0}}})],w.prototype,"endField",void 0),Object(l.a)([Object(d.b)({type:c.a,json:{write:{enabled:!0,allowNull:!0}}})],w.prototype,"fullTimeExtent",void 0),Object(l.a)([Object(f.a)("fullTimeExtent",["timeExtent"])],w.prototype,"readFullTimeExtent",null),Object(l.a)([Object(v.a)("fullTimeExtent")],w.prototype,"writeFullTimeExtent",null),Object(l.a)([Object(d.b)({type:Boolean,json:{write:!0}})],w.prototype,"hasLiveData",void 0),Object(l.a)([Object(d.b)({type:u.a,json:{write:{enabled:!0,allowNull:!0}}})],w.prototype,"interval",void 0),Object(l.a)([Object(f.a)("interval",["timeInterval","timeIntervalUnits","defaultTimeInterval","defaultTimeIntervalUnits"])],w.prototype,"readInterval",null),Object(l.a)([Object(v.a)("interval")],w.prototype,"writeInterval",null),Object(l.a)([Object(d.b)({type:String,json:{read:{source:"startTimeField"},write:{target:"startTimeField",allowNull:!0}}})],w.prototype,"startField",void 0),Object(l.a)([Object(d.b)({type:m,json:{write:{enabled:!0,allowNull:!0}}})],w.prototype,"timeReference",void 0),Object(l.a)([Object(d.b)({type:String,json:{write:{enabled:!0,allowNull:!0}}})],w.prototype,"trackIdField",void 0),Object(l.a)([Object(d.b)({type:Boolean,json:{read:{source:"exportOptions.useTime"},write:{target:"exportOptions.useTime"}}})],w.prototype,"useTime",void 0);var S=w=h=Object(l.a)([Object(j.a)("esri.layers.support.TimeInfo")],w)},703:function(e,t,r){"use strict";r.d(t,"a",(function(){return i})),r.d(t,"b",(function(){return o})),r.d(t,"c",(function(){return a})),r.d(t,"d",(function(){return s})),r.d(t,"e",(function(){return l})),r.d(t,"f",(function(){return u})),r.d(t,"g",(function(){return c}));var n=[252,146,31,255],i={type:"esriSMS",style:"esriSMSCircle",size:6,color:n,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},a={type:"esriSLS",style:"esriSLSSolid",width:.75,color:n},o={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}},s={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0},l={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5},c={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5},u={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null}},710:function(e,t,r){"use strict";r.d(t,"a",(function(){return y}));var n=r(2),i=r(4),a=r(5),o=r(6),s=r(0),l=r(15),c=r(11),u=r(1),b=(r(19),r(14),r(10)),p=r(676),y=function(e){var t=function(e){Object(a.a)(r,e);var t=Object(o.a)(r);function r(){return Object(n.a)(this,r),t.apply(this,arguments)}return Object(i.a)(r,[{key:"title",get:function(){if(this._get("title")&&"defaults"!==this.originOf("title"))return this._get("title");if(this.url){var e=Object(p.e)(this.url);if(Object(c.j)(e)&&e.title)return e.title}return this._get("title")||""},set:function(e){this._set("title",e)}},{key:"url",set:function(e){this._set("url",Object(p.g)(e,l.a.getLogger(this.declaredClass)))}}]),r}(e);return Object(s.a)([Object(u.b)()],t.prototype,"title",null),Object(s.a)([Object(u.b)({type:String})],t.prototype,"url",null),t=Object(s.a)([Object(b.a)("esri.layers.mixins.ArcGISService")],t)}},711:function(e,t,r){"use strict";r.d(t,"a",(function(){return d}));var n,i=r(2),a=r(4),o=r(5),s=r(6),l=r(0),c=r(26),u=r(1),b=(r(19),r(14)),p=(r(15),r(31)),y=r(10),d=n=function(e){Object(o.a)(r,e);var t=Object(s.a)(r);function r(e){var n;return Object(i.a)(this,r),(n=t.call(this,e)).type="map-layer",n}return Object(a.a)(r,[{key:"clone",value:function(){var e=this.mapLayerId,t=this.gdbVersion;return new n({mapLayerId:e,gdbVersion:t})}}]),r}(c.a);Object(l.a)([Object(p.a)({mapLayer:"map-layer"})],d.prototype,"type",void 0),Object(l.a)([Object(u.b)({type:b.a,json:{write:!0}})],d.prototype,"mapLayerId",void 0),Object(l.a)([Object(u.b)({type:String,json:{write:!0}})],d.prototype,"gdbVersion",void 0),d=n=Object(l.a)([Object(y.a)("esri.layers.support.source.MapLayerSource")],d)},712:function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));var n=r(2),i=r(4),a=r(708),o=function(){function e(t,r){Object(n.a)(this,e),this._storage=new a.b,this._storage.maxSize=t,r&&this._storage.registerRemoveFunc("",r)}return Object(i.a)(e,[{key:"put",value:function(e,t,r){this._storage.put(e,t,r,1)}},{key:"pop",value:function(e){return this._storage.pop(e)}},{key:"get",value:function(e){return this._storage.get(e)}},{key:"clear",value:function(){this._storage.clearAll()}},{key:"destroy",value:function(){this._storage.destroy()}},{key:"maxSize",get:function(){return this._storage.maxSize},set:function(e){this._storage.maxSize=e}}]),e}()},713:function(e,t,r){"use strict";r.d(t,"a",(function(){return j}));var n=r(2),i=r(4),a=r(5),o=r(6),s=r(0),l=r(42),c=r(26),u=r(18),b=r(1),p=(r(14),r(19),r(15),r(10)),y=r(43),d=new l.a({esriFeatureEditToolAutoCompletePolygon:"auto-complete-polygon",esriFeatureEditToolCircle:"circle",esriFeatureEditToolEllipse:"ellipse",esriFeatureEditToolFreehand:"freehand",esriFeatureEditToolLine:"line",esriFeatureEditToolNone:"none",esriFeatureEditToolPoint:"point",esriFeatureEditToolPolygon:"polygon",esriFeatureEditToolRectangle:"rectangle",esriFeatureEditToolArrow:"arrow",esriFeatureEditToolTriangle:"triangle",esriFeatureEditToolLeftArrow:"left-arrow",esriFeatureEditToolRightArrow:"right-arrow",esriFeatureEditToolUpArrow:"up-arrow",esriFeatureEditToolDownArrow:"down-arrow"}),f=function(e){Object(a.a)(r,e);var t=Object(o.a)(r);function r(e){var i;return Object(n.a)(this,r),(i=t.call(this,e)).name=null,i.description=null,i.drawingTool=null,i.prototype=null,i.thumbnail=null,i}return Object(i.a)(r,[{key:"writeDrawingTool",value:function(e,t){t.drawingTool=d.toJSON(e)}},{key:"writePrototype",value:function(e,t){t.prototype=Object(u.c)(Object(u.a)(e),!0)}},{key:"writeThumbnail",value:function(e,t){t.thumbnail=Object(u.c)(Object(u.a)(e))}}]),r}(c.a);Object(s.a)([Object(b.b)({json:{write:!0}})],f.prototype,"name",void 0),Object(s.a)([Object(b.b)({json:{write:!0}})],f.prototype,"description",void 0),Object(s.a)([Object(b.b)({json:{read:d.read,write:d.write}})],f.prototype,"drawingTool",void 0),Object(s.a)([Object(y.a)("drawingTool")],f.prototype,"writeDrawingTool",null),Object(s.a)([Object(b.b)({json:{write:!0}})],f.prototype,"prototype",void 0),Object(s.a)([Object(y.a)("prototype")],f.prototype,"writePrototype",null),Object(s.a)([Object(b.b)({json:{write:!0}})],f.prototype,"thumbnail",void 0),Object(s.a)([Object(y.a)("thumbnail")],f.prototype,"writeThumbnail",null);var j=f=Object(s.a)([Object(p.a)("esri.layers.support.FeatureTemplate")],f)},714:function(e,t,r){"use strict";r.d(t,"a",(function(){return v}));var n,i=r(2),a=r(4),o=r(5),s=r(6),l=r(0),c=r(42),u=r(26),b=r(18),p=r(1),y=(r(14),r(19),r(15),r(10)),d=r(43),f=new c.a({count:"count",sum:"sum",min:"min",max:"max",avg:"avg",stddev:"stddev",var:"var",exceedslimit:"exceedslimit",percentile_cont:"percentile-continuous",percentile_disc:"percentile-discrete"}),j=n=function(e){Object(o.a)(r,e);var t=Object(s.a)(r);function r(e){var n;return Object(i.a)(this,r),(n=t.call(this,e)).maxPointCount=void 0,n.maxRecordCount=void 0,n.maxVertexCount=void 0,n.onStatisticField=null,n.outStatisticFieldName=null,n.statisticType=null,n.statisticParameters=null,n}return Object(a.a)(r,[{key:"writeStatisticParameters",value:function(e,t){"percentile-continuous"!==this.statisticType&&"percentile-discrete"!==this.statisticType||(t.statisticParameters=Object(b.a)(e))}},{key:"clone",value:function(){return new n({maxPointCount:this.maxPointCount,maxRecordCount:this.maxRecordCount,maxVertexCount:this.maxVertexCount,onStatisticField:this.onStatisticField,outStatisticFieldName:this.outStatisticFieldName,statisticType:this.statisticType,statisticParameters:Object(b.a)(this.statisticParameters)})}}]),r}(u.a);Object(l.a)([Object(p.b)({type:Number,json:{write:!0}})],j.prototype,"maxPointCount",void 0),Object(l.a)([Object(p.b)({type:Number,json:{write:!0}})],j.prototype,"maxRecordCount",void 0),Object(l.a)([Object(p.b)({type:Number,json:{write:!0}})],j.prototype,"maxVertexCount",void 0),Object(l.a)([Object(p.b)({type:String,json:{write:!0}})],j.prototype,"onStatisticField",void 0),Object(l.a)([Object(p.b)({type:String,json:{write:!0}})],j.prototype,"outStatisticFieldName",void 0),Object(l.a)([Object(p.b)({type:String,json:{read:{source:"statisticType",reader:f.read},write:{target:"statisticType",writer:f.write}}})],j.prototype,"statisticType",void 0),Object(l.a)([Object(p.b)({type:Object})],j.prototype,"statisticParameters",void 0),Object(l.a)([Object(d.a)("statisticParameters")],j.prototype,"writeStatisticParameters",null);var v=j=n=Object(l.a)([Object(y.a)("esri.rest.support.StatisticDefinition")],j)},715:function(e,t,r){"use strict";r.d(t,"a",(function(){return c})),r.d(t,"b",(function(){return b})),r.d(t,"c",(function(){return l}));r(19);var n=r(29),i=r(66),a=r(165),o=r(212),s=r(691);function l(e,t,r,a){var o=function(e,t){return e?function(e,t){if(!t||"web-scene"!==t.origin)return!0;switch(e.type){case"simple":case"unique-value":case"class-breaks":return!0;default:return!1}}(e,t)?e.write({},t):(t.messages&&t.messages.push(new n.a("renderer:unsupported","Renderer of type '".concat(e.declaredClass,"' are not supported in scenes."),{renderer:e,context:t})),null):null}(e,a);o&&Object(i.c)(r,o,t)}function c(e,t){return b(e,null,t)}var u=Object(o.b)({types:s.a});function b(e,t,r){return e?e&&(e.styleName||e.styleUrl)&&"uniqueValue"!==e.type?(r&&r.messages&&r.messages.push(new a.a("renderer:unsupported","Only UniqueValueRenderer can be referenced from a web style, but found '"+e.type+"'",{definition:e,context:r})),null):u(e,t,r):null}},717:function(e,t,r){"use strict";r.d(t,"a",(function(){return v}));var n,i=r(2),a=r(4),o=r(5),s=r(6),l=r(0),c=(r(114),r(42)),u=r(26),b=r(18),p=r(1),y=(r(14),r(19),r(15),r(10)),d=r(58),f=new c.a({upperLeft:"upper-left",lowerLeft:"lower-left"}),j=n=function(e){Object(o.a)(r,e);var t=Object(s.a)(r);function r(e){var n;return Object(i.a)(this,r),(n=t.call(this,e)).extent=null,n.mode="view",n.originPosition="upper-left",n.tolerance=1,n}return Object(a.a)(r,[{key:"clone",value:function(){return new n(Object(b.a)({extent:this.extent,mode:this.mode,originPosition:this.originPosition,tolerance:this.tolerance}))}}]),r}(u.a);Object(l.a)([Object(p.b)({type:d.a,json:{write:{overridePolicy:function(){return{enabled:"view"===this.mode}}}}})],j.prototype,"extent",void 0),Object(l.a)([Object(p.b)({type:["view","edit"],json:{write:!0}})],j.prototype,"mode",void 0),Object(l.a)([Object(p.b)({type:String,json:{read:f.read,write:f.write}})],j.prototype,"originPosition",void 0),Object(l.a)([Object(p.b)({type:Number,json:{write:{overridePolicy:function(){return{enabled:"view"===this.mode}}}}})],j.prototype,"tolerance",void 0);var v=j=n=Object(l.a)([Object(y.a)("esri.rest.support.QuantizationParameters")],j)},719:function(e,t,r){"use strict";r.d(t,"a",(function(){return j}));var n=r(2),i=r(4),a=r(5),o=r(6),s=r(0),l=r(665),c=r(678),u=r(1),b=(r(19),r(14),r(15),r(57)),p=r(10),y=r(698),d=r(209),f=r(669);var j=function(e){var t=function(e){Object(a.a)(r,e);var t=Object(o.a)(r);function r(){var e;return Object(n.a)(this,r),(e=t.apply(this,arguments)).timeExtent=null,e.timeOffset=null,e.useViewTime=!0,e}return Object(i.a)(r,[{key:"readOffset",value:function(e,t){var r=t.timeInfo.exportOptions;if(!r)return null;var n=r.timeOffset,i=f.a.fromJSON(r.timeOffsetUnits);return n&&i?new c.a({value:n,unit:i}):null}},{key:"timeInfo",set:function(e){Object(d.f)(e,this.fieldsIndex),this._set("timeInfo",e)}}]),r}(e);return Object(s.a)([Object(u.b)({type:l.a,json:{write:!1}})],t.prototype,"timeExtent",void 0),Object(s.a)([Object(u.b)({type:c.a})],t.prototype,"timeOffset",void 0),Object(s.a)([Object(b.a)("service","timeOffset",["timeInfo.exportOptions"])],t.prototype,"readOffset",null),Object(s.a)([Object(u.b)({value:null,type:y.a,json:{write:!0,origins:{"web-document":{read:!1,write:!1}}}})],t.prototype,"timeInfo",null),Object(s.a)([Object(u.b)({type:Boolean,json:{read:{source:"timeAnimation"},write:{target:"timeAnimation"},origins:{"web-scene":{read:!1,write:!1}}}})],t.prototype,"useViewTime",void 0),t=Object(s.a)([Object(p.a)("esri.layers.mixins.TemporalLayer")],t),t}},721:function(e,t,r){"use strict";r.d(t,"a",(function(){return c}));var n=r(2),i=r(5),a=r(6),o=r(0),s=r(1),l=(r(19),r(14),r(15),r(10)),c=function(e){var t=function(e){Object(i.a)(r,e);var t=Object(a.a)(r);function r(){var e;return Object(n.a)(this,r),(e=t.apply(this,arguments)).customParameters=null,e}return r}(e);return Object(o.a)([Object(s.b)({type:Object,json:{write:{overridePolicy:function(e){return{enabled:!!(e&&Object.keys(e).length>0)}}}}})],t.prototype,"customParameters",void 0),t=Object(o.a)([Object(l.a)("esri.layers.mixins.CustomParametersMixin")],t)}},724:function(e,t,r){"use strict";r.d(t,"a",(function(){return u}));var n=r(2),i=r(4),a=r(5),o=r(6),s=r(0),l=r(1),c=(r(19),r(14),r(15),r(10));var u=function(e){var t=function(e){Object(a.a)(r,e);var t=Object(o.a)(r);function r(){return Object(n.a)(this,r),t.apply(this,arguments)}return Object(i.a)(r,[{key:"apiKey",get:function(){var e;return this._isOverridden("apiKey")?this._get("apiKey"):function(e){return"portalItem"in e}(this)?null==(e=this.portalItem)?void 0:e.apiKey:null},set:function(e){null!=e?this._override("apiKey",e):(this._clearOverride("apiKey"),this.clear("apiKey","user"))}}]),r}(e);return Object(s.a)([Object(l.b)({type:String})],t.prototype,"apiKey",null),t=Object(s.a)([Object(c.a)("esri.layers.mixins.APIKeyMixin")],t)}},725:function(e,t,r){"use strict";r.d(t,"a",(function(){return l})),r.d(t,"b",(function(){return c})),r.d(t,"c",(function(){return b})),r.d(t,"d",(function(){return u}));r(19),r(11);var n=r(166),i=r(98),a=r(143),o=r(136),s=r(703),l=(a.a.fromJSON(s.a),i.a.fromJSON(s.c),n.a.fromJSON(s.b),o.a.fromJSON(s.d));var c=a.a.fromJSON(s.e),u=i.a.fromJSON(s.g),b=n.a.fromJSON(s.f)},726:function(e,t,r){"use strict";r.d(t,"a",(function(){return d})),r.d(t,"b",(function(){return y}));var n=r(2),i=r(4),a=r(5),o=r(6),s=r(0),l=r(60),c=r(183),u=r(1),b=r(10),p=r(763),y=function(e){var t=function(e){Object(a.a)(r,e);var t=Object(o.a)(r);function r(){return Object(n.a)(this,r),t.apply(this,arguments)}return Object(i.a)(r,[{key:"destroy",value:function(){this.destroyed||(this.handles.destroy(),this.updatingHandles.destroy())}},{key:"handles",get:function(){return this._get("handles")||new c.a}},{key:"updatingHandles",get:function(){return this._get("updatingHandles")||new p.a}}]),r}(e);return Object(s.a)([Object(u.b)({readOnly:!0})],t.prototype,"handles",null),Object(s.a)([Object(u.b)({readOnly:!0})],t.prototype,"updatingHandles",null),t=Object(s.a)([Object(b.a)("esri.core.HandleOwner")],t),t},d=function(e){Object(a.a)(r,e);var t=Object(o.a)(r);function r(){return Object(n.a)(this,r),t.apply(this,arguments)}return r}(y(l.a));d=Object(s.a)([Object(b.a)("esri.core.HandleOwner")],d)},733:function(e,t,r){"use strict";r.d(t,"a",(function(){return h}));var n=r(2),i=r(4),a=r(5),o=r(6),s=r(0),l=r(26),c=r(18),u=r(1),b=(r(14),r(19),r(15),r(57)),p=r(10),y=r(43),d=r(664),f=(r(660),r(661)),j=r(662),v=r(713),O=function(e){Object(a.a)(r,e);var t=Object(o.a)(r);function r(e){var i;return Object(n.a)(this,r),(i=t.call(this,e)).id=null,i.name=null,i.domains=null,i.templates=null,i}return Object(i.a)(r,[{key:"readDomains",value:function(e){var t={};for(var r in e)if(e.hasOwnProperty(r)){var n=e[r];switch(n.type){case"range":t[r]=j.a.fromJSON(n);break;case"codedValue":t[r]=d.a.fromJSON(n);break;case"inherited":t[r]=f.a.fromJSON(n)}}return t}},{key:"writeDomains",value:function(e,t){var r={};for(var n in e)e.hasOwnProperty(n)&&(r[n]=e[n]&&e[n].toJSON());Object(c.c)(r),t.domains=r}},{key:"readTemplates",value:function(e){return e&&e.map((function(e){return new v.a(e)}))}},{key:"writeTemplates",value:function(e,t){t.templates=e&&e.map((function(e){return e.toJSON()}))}}]),r}(l.a);Object(s.a)([Object(u.b)({json:{write:!0}})],O.prototype,"id",void 0),Object(s.a)([Object(u.b)({json:{write:!0}})],O.prototype,"name",void 0),Object(s.a)([Object(u.b)({json:{write:!0}})],O.prototype,"domains",void 0),Object(s.a)([Object(b.a)("domains")],O.prototype,"readDomains",null),Object(s.a)([Object(y.a)("domains")],O.prototype,"writeDomains",null),Object(s.a)([Object(u.b)({json:{write:!0}})],O.prototype,"templates",void 0),Object(s.a)([Object(b.a)("templates")],O.prototype,"readTemplates",null),Object(s.a)([Object(y.a)("templates")],O.prototype,"writeTemplates",null);var h=O=Object(s.a)([Object(p.a)("esri.layers.support.FeatureType")],O)},745:function(e,t,r){"use strict";r.d(t,"a",(function(){return d}));var n,i=r(2),a=r(4),o=r(5),s=r(6),l=r(0),c=r(52),u=r(26),b=r(1),p=(r(19),r(14),r(15),r(10)),y=n=function(e){Object(o.a)(r,e);var t=Object(s.a)(r);function r(e){var n;return Object(i.a)(this,r),(n=t.call(this,e)).floorField=null,n.viewAllMode=!1,n.viewAllLevelIds=new c.a,n}return Object(a.a)(r,[{key:"clone",value:function(){return new n({floorField:this.floorField,viewAllMode:this.viewAllMode,viewAllLevelIds:this.viewAllLevelIds})}}]),r}(u.a);Object(l.a)([Object(b.b)({type:String,json:{write:!0}})],y.prototype,"floorField",void 0),Object(l.a)([Object(b.b)({json:{read:!1,write:!1}})],y.prototype,"viewAllMode",void 0),Object(l.a)([Object(b.b)({json:{read:!1,write:!1}})],y.prototype,"viewAllLevelIds",void 0);var d=y=n=Object(l.a)([Object(p.a)("esri.layers.support.LayerFloorInfo")],y)},763:function(e,t,r){"use strict";r.d(t,"a",(function(){return v}));var n=r(2),i=r(4),a=r(5),o=r(6),s=r(0),l=r(60),c=r(183),u=r(11),b=r(241),p=r(99),y=r(100),d=r(215),f=r(1),j=r(10),v=function(e){Object(a.a)(r,e);var t=Object(o.a)(r);function r(){var e;return Object(n.a)(this,r),(e=t.apply(this,arguments)).updating=!1,e.handleId=0,e.handles=new c.a,e.scheduleHandleId=0,e.pendingPromises=new Set,e}return Object(i.a)(r,[{key:"destroy",value:function(){this.removeAll(),this.handles.destroy()}},{key:"add",value:function(e,t,r){var n=this,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=0!=(1&i),o=++this.handleId;a||this.installSyncUpdatingWatch(e,t,o);var s=0!=(2&i)?Object(p.a)(e,t,r,a):e.watch(t,r,a);return this.handles.add(s,o),{remove:function(){return n.handles.remove(o)}}}},{key:"addOnCollectionPropertyChange",value:function(e,t,r){var n=this,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=0!=(2&i),o=++this.handleId;return this.handles.add([Object(p.b)(e,t,"after-changes",this.createSyncUpdatingCallback()),Object(p.b)(e,t,"change",r,a?function(e){r({added:e.items,removed:[],moved:[],target:e})}:void 0)],o),{remove:function(){n.handles.remove(o)}}}},{key:"addOnCollectionChange",value:function(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=0!=(2&n),a=++this.handleId;return this.handles.add([e.on("after-changes",this.createSyncUpdatingCallback()),e.on("change",t)],a),i&&t({added:e.items,removed:[],moved:[],target:e}),{remove:function(){r.handles.remove(a)}}}},{key:"addPromise",value:function(e){var t=this;if(Object(u.i)(e))return e;var r=++this.handleId;this.handles.add({remove:function(){t.pendingPromises.delete(e)&&(0!==t.pendingPromises.size||t.handles.has(O)||t._set("updating",!1))}},r),this.pendingPromises.add(e),this._set("updating",!0);var n=function(){return t.handles.remove(r)};return e.then(n,n),e}},{key:"removeAll",value:function(){this.pendingPromises.clear(),this.handles.removeAll(),this._set("updating",!1)}},{key:"installSyncUpdatingWatch",value:function(e,t,r){var n=this.createSyncUpdatingCallback(),i=Object(d.b)((function(){return Object(y.c)(e,t)}),n);return this.handles.add(i,r),i}},{key:"createSyncUpdatingCallback",value:function(){var e=this;return function(){e.handles.remove(O),++e.scheduleHandleId;var t=e.scheduleHandleId;e._get("updating")||e._set("updating",!0),e.handles.add(Object(b.a)((function(){t===e.scheduleHandleId&&(e._set("updating",e.pendingPromises.size>0),e.handles.remove(O))})),O)}}}]),r}(l.a);Object(s.a)([Object(f.b)({readOnly:!0})],v.prototype,"updating",void 0),v=Object(s.a)([Object(j.a)("esri.views.support.WatchUpdatingTracking")],v);var O=-42},808:function(e,t,r){"use strict";r.d(t,"a",(function(){return j}));var n=r(21),i=r(2),a=r(4),o=r(5),s=r(6),l=r(0),c=r(52),u=r(726),b=r(11),p=r(1),y=(r(19),r(14),r(15),r(10)),d=r(215),f=function(e){Object(o.a)(r,e);var t=Object(s.a)(r);function r(e){var n;return Object(i.a)(this,r),(n=t.call(this,e)).getCollections=null,n}return Object(a.a)(r,[{key:"initialize",value:function(){var e=this;this.handles.add(Object(d.a)((function(){return e.refresh()})))}},{key:"destroy",value:function(){this.getCollections=null}},{key:"refresh",value:function(){var e=Object(b.j)(this.getCollections)?this.getCollections():null;if(Object(b.i)(e))this.removeAll();else{var t,r=0,i=Object(n.a)(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;Object(b.j)(a)&&(r=this._processCollection(r,a))}}catch(o){i.e(o)}finally{i.f()}this.splice(r,this.length)}}},{key:"_createNewInstance",value:function(e){return new c.a(e)}},{key:"_processCollection",value:function(e,t){if(!t)return e;var r,i=this.itemFilterFunction?this.itemFilterFunction:function(e){return!!e},a=Object(n.a)(t);try{for(a.s();!(r=a.n()).done;){var o=r.value;if(o){if(i(o)){var s=this.indexOf(o,e);s>=0?s!==e&&this.reorder(o,e):this.add(o,e),++e}if(this.getChildrenFunction){var l=this.getChildrenFunction(o);if(Array.isArray(l)){var c,u=Object(n.a)(l);try{for(u.s();!(c=u.n()).done;){var b=c.value;e=this._processCollection(e,b)}}catch(p){u.e(p)}finally{u.f()}}else e=this._processCollection(e,l)}}}}catch(p){a.e(p)}finally{a.f()}return e}}]),r}(Object(u.b)(c.a));Object(l.a)([Object(p.b)()],f.prototype,"getCollections",void 0),Object(l.a)([Object(p.b)()],f.prototype,"getChildrenFunction",void 0),Object(l.a)([Object(p.b)()],f.prototype,"itemFilterFunction",void 0);var j=f=Object(l.a)([Object(y.a)("esri.core.CollectionFlattener")],f)},824:function(e,t,r){"use strict";r.d(t,"a",(function(){return a})),r.d(t,"b",(function(){return s})),r.d(t,"c",(function(){return i}));var n=r(21);function i(e,t,r){return t.flatten((function(e){return e.sublayers})).length!==e.length||(!!e.some((function(e){return e.originIdOf("minScale")>r||e.originIdOf("maxScale")>r||e.originIdOf("renderer")>r||e.originIdOf("labelingInfo")>r||e.originIdOf("opacity")>r||e.originIdOf("labelsVisible")>r||e.originIdOf("source")>r}))||!o(e,t))}function a(e,t,r){return!!e.some((function(e){var t=e.source;return!(!t||"map-layer"===t.type&&t.mapLayerId===e.id&&(!t.gdbVersion||t.gdbVersion===r.gdbVersion))||e.originIdOf("renderer")>2||e.originIdOf("labelingInfo")>2||e.originIdOf("opacity")>2||e.originIdOf("labelsVisible")>2}))||!o(e,t)}function o(e,t){if(!e||!e.length)return!0;var r=t.slice().reverse().flatten((function(e){var t=e.sublayers;return t&&t.toArray().reverse()})).map((function(e){return e.id})).toArray();if(e.length>r.length)return!1;var i,a=0,o=r.length,s=Object(n.a)(e);try{for(s.s();!(i=s.n()).done;){for(var l=i.value.id;a<o&&r[a]!==l;)a++;if(a>=o)return!1}}catch(c){s.e(c)}finally{s.f()}return!0}function s(e){return!!e&&e.some((function(e){return null!=e.minScale||e.layerDefinition&&null!=e.layerDefinition.minScale}))}},838:function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));var n=r(22),i=r(2),a=r(4),o=r(29),s=function(){function e(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";Object(i.a)(this,e),this.major=t,this.minor=r,this._context=n}return Object(a.a)(e,[{key:"lessThan",value:function(e,t){return this.major<e||e===this.major&&this.minor<t}},{key:"since",value:function(e,t){return!this.lessThan(e,t)}},{key:"validate",value:function(e){if(this.major!==e.major){var t=this._context&&this._context+":",r=this._context&&this._context+" ";throw new o.a(t+"unsupported-version","Required major ".concat(r,"version is '").concat(this.major,"', but got '${version.major}.${version.minor}'"),{version:e})}}},{key:"clone",value:function(){return new e(this.major,this.minor,this._context)}}],[{key:"parse",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=t.split("."),a=Object(n.a)(i,2),s=a[0],l=a[1],c=/^\s*\d+\s*$/;if(!s||!s.match||!s.match(c))throw new o.a((r&&r+":")+"invalid-version","Expected major version to be a number, but got '${version}'",{version:t});if(!l||!l.match||!l.match(c))throw new o.a((r&&r+":")+"invalid-version","Expected minor version to be a number, but got '${version}'",{version:t});var u=parseInt(s,10),b=parseInt(l,10);return new e(u,b,r)}}]),e}()},839:function(e,t,r){"use strict";r.d(t,"a",(function(){return ne}));var n,i=r(22),a=r(21),o=r(7),s=r.n(o),l=r(13),c=r(12),u=r(2),b=r(4),p=r(5),y=r(6),d=r(0),f=(r(114),r(214)),j=(r(700),r(686),r(688),r(689),r(663),r(687),r(701),r(715),r(691)),v=r(82),O=r(332),h=r(52),m=r(29),g=r(726),w=r(239),S=r(18),x=r(142),k=r(15),I=r(11),T=r(677),E=r(27),P=r(1),L=r(69),F=r(97),_=(r(19),r(57)),D=r(10),C=r(43),N=r(14),R=r(164),M=r(733),V=r(666),A=r(672),U=r(675),J=r(745),q=r(673),B=r(711),H=r(670),z=r(755),K=r(832),$=r(58);function G(e){return e&&"esriSMS"===e.type}function Q(e,t,r){var n,i=this.originIdOf(t)>=Object(R.d)(r.origin);return{ignoreOrigin:!0,allowNull:i,enabled:!!r&&"map-image"===(null==(n=r.layer)?void 0:n.type)&&(r.writeSublayerStructure||i)}}function W(e,t,r){var n;return{enabled:!!r&&"tile"===(null==(n=r.layer)?void 0:n.type)&&this._isOverridden(t)}}function X(e,t,r){return{ignoreOrigin:!0,enabled:r&&r.writeSublayerStructure||!1}}function Z(e,t,r){return{ignoreOrigin:!0,enabled:!!r&&(r.writeSublayerStructure||this.originIdOf(t)>=Object(R.d)(r.origin))}}var Y=k.a.getLogger("esri.layers.support.Sublayer"),ee=0,te=new Set;te.add("layer"),te.add("parent"),te.add("loaded"),te.add("loadStatus"),te.add("loadError"),te.add("loadWarnings");var re=n=function(e){Object(p.a)(o,e);var t=Object(y.a)(o);function o(e){var r;return Object(u.a)(this,o),(r=t.call(this,e)).capabilities=void 0,r.fields=null,r.fullExtent=null,r.globalIdField=null,r.legendEnabled=!0,r.objectIdField=null,r.popupEnabled=!0,r.popupTemplate=null,r.sourceJSON=null,r.title=null,r.typeIdField=null,r.types=null,r}return Object(b.a)(o,[{key:"load",value:function(){var e=Object(c.a)(s.a.mark((function e(t){var r=this;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(this.addResolvingPromise(Object(c.a)(s.a.mark((function e(){var n,i,a,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.layer||r.url){e.next=2;break}throw new m.a("sublayer:missing-layer","Sublayer can't be loaded without being part of a layer",{sublayer:r});case 2:if(i=null,r.layer&&!(r.originIdOf("url")>2)&&"data-layer"!==(null==(n=r.source)?void 0:n.type)){e.next=9;break}return e.next=6,Object(v.default)(r.url,Object(l.a)({responseType:"json",query:{f:"json"}},t));case 6:i=e.sent.data,e.next=14;break;case 9:return o=r.id,"map-layer"===(null==(a=r.source)?void 0:a.type)&&(o=r.source.mapLayerId),e.next=13,r.layer.fetchSublayerInfo(o,t);case 13:i=e.sent;case 14:i&&(r.sourceJSON=i,r.read({layerDefinition:i},{origin:"service"}));case 15:case"end":return e.stop()}}),e)})))()),this));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"readCapabilities",value:function(e,t){var r=(e=(t=t.layerDefinition||t).capabilities||e)?e.toLowerCase().split(",").map((function(e){return e.trim()})):[];return{exportMap:{supportsModification:!!t.canModifyLayer},operations:{supportsQuery:-1!==r.indexOf("query")}}}},{key:"definitionExpression",set:function(e){this._setAndNotifyLayer("definitionExpression",e)}},{key:"fieldsIndex",get:function(){return new A.a(this.fields||[])}},{key:"floorInfo",set:function(e){this._setAndNotifyLayer("floorInfo",e)}},{key:"readGlobalIdFieldFromService",value:function(e,t){if((t=t.layerDefinition||t).globalIdField)return t.globalIdField;if(t.fields){var r,n=Object(a.a)(t.fields);try{for(n.s();!(r=n.n()).done;){var i=r.value;if("esriFieldTypeGlobalID"===i.type)return i.name}}catch(o){n.e(o)}finally{n.f()}}}},{key:"id",get:function(){var e=this._get("id");return null==e?ee++:e},set:function(e){this._get("id")!==e&&(!1!==this.get("layer.capabilities.exportMap.supportsDynamicLayers")?this._set("id",e):this._logLockedError("id","capability not available 'layer.capabilities.exportMap.supportsDynamicLayers'"))}},{key:"labelingInfo",set:function(e){this._setAndNotifyLayer("labelingInfo",e)}},{key:"writeLabelingInfo",value:function(e,t,r,n){e&&e.length&&(t.layerDefinition={drawingInfo:{labelingInfo:e.map((function(e){return e.write({},n)}))}})}},{key:"labelsVisible",set:function(e){this._setAndNotifyLayer("labelsVisible",e)}},{key:"layer",set:function(e){this._set("layer",e),this.sublayers&&this.sublayers.forEach((function(t){return t.layer=e}))}},{key:"listMode",set:function(e){this._set("listMode",e)}},{key:"minScale",set:function(e){this._setAndNotifyLayer("minScale",e)}},{key:"readMinScale",value:function(e,t){return t.minScale||t.layerDefinition&&t.layerDefinition.minScale||0}},{key:"maxScale",set:function(e){this._setAndNotifyLayer("maxScale",e)}},{key:"readMaxScale",value:function(e,t){return t.maxScale||t.layerDefinition&&t.layerDefinition.maxScale||0}},{key:"readObjectIdFieldFromService",value:function(e,t){if((t=t.layerDefinition||t).objectIdField)return t.objectIdField;if(t.fields){var r,n=Object(a.a)(t.fields);try{for(n.s();!(r=n.n()).done;){var i=r.value;if("esriFieldTypeOID"===i.type)return i.name}}catch(o){n.e(o)}finally{n.f()}}}},{key:"opacity",set:function(e){this._setAndNotifyLayer("opacity",e)}},{key:"readOpacity",value:function(e,t){var r=t.layerDefinition;return 1-.01*(null!=r.transparency?r.transparency:r.drawingInfo.transparency)}},{key:"writeOpacity",value:function(e,t,r,n){t.layerDefinition={drawingInfo:{transparency:100-100*e}}}},{key:"writeParent",value:function(e,t){this.parent&&this.parent!==this.layer?t.parentLayerId=Object(N.e)(this.parent.id):t.parentLayerId=-1}},{key:"defaultPopupTemplate",get:function(){return this.createPopupTemplate()}},{key:"renderer",set:function(e){if(e){var t,r=Object(a.a)(e.getSymbols());try{for(r.s();!(t=r.n()).done;){var n=t.value;if(Object(O.c)(n)){Y.warn("Sublayer renderer should use 2D symbols");break}}}catch(i){r.e(i)}finally{r.f()}}this._setAndNotifyLayer("renderer",e)}},{key:"source",get:function(){return this._get("source")||new B.a({mapLayerId:this.id})},set:function(e){this._setAndNotifyLayer("source",e)}},{key:"sublayers",set:function(e){this._handleSublayersChange(e,this._get("sublayers")),this._set("sublayers",e)}},{key:"castSublayers",value:function(e){return Object(N.m)(h.a.ofType(n),e)}},{key:"writeSublayers",value:function(e,t,r){this.get("sublayers.length")&&(t[r]=this.sublayers.map((function(e){return e.id})).toArray().reverse())}},{key:"readTypeIdField",value:function(e,t){var r=(t=t.layerDefinition||t).typeIdField;if(r&&t.fields){r=r.toLowerCase();var n=t.fields.find((function(e){return e.name.toLowerCase()===r}));n&&(r=n.name)}return null}},{key:"url",get:function(){var e,t,r=null!=(e=null==(t=this.layer)?void 0:t.parsedUrl)?e:this._lastParsedUrl,n=this.source;if(!r)return null;if(this._lastParsedUrl=r,"map-layer"===(null==n?void 0:n.type))return"".concat(r.path,"/").concat(n.mapLayerId);var i={layer:JSON.stringify({source:this.source})};return"".concat(r.path,"/dynamicLayer?").concat(Object(E.D)(i))},set:function(e){e?this._override("url",e):this._clearOverride("url")}},{key:"visible",set:function(e){this._setAndNotifyLayer("visible",e)}},{key:"writeVisible",value:function(e,t,r,n){t[r]=this.getAtOrigin("defaultVisibility","service")||e}},{key:"clone",value:function(){var e=Object(L.a)(this).store,t=new n;return Object(L.a)(t).store=e.clone(te),this.commitProperty("url"),t._lastParsedUrl=this._lastParsedUrl,t}},{key:"createPopupTemplate",value:function(e){return Object(z.a)(this,e)}},{key:"createQuery",value:function(){return new H.a({returnGeometry:!0,where:this.definitionExpression||"1=1"})}},{key:"createFeatureLayer",value:function(){var e=Object(c.a)(s.a.mark((function e(){var t,n,i,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.hasOwnProperty("sublayers")){e.next=2;break}return e.abrupt("return",null);case 2:return i=null==(t=this.layer)?void 0:t.parsedUrl,e.next=6,Promise.all([r.e(7),r.e(62),r.e(98)]).then(r.bind(null,735));case 6:return e.t0=e.sent.default,e.t1={url:i.path},a=new e.t0(e.t1),e.abrupt("return",(i&&this.source&&("map-layer"===this.source.type?a.layerId=this.source.mapLayerId:a.dynamicDataSource=this.source),null!=this.layer.refreshInterval&&(a.refreshInterval=this.layer.refreshInterval),this.definitionExpression&&(a.definitionExpression=this.definitionExpression),this.floorInfo&&(a.floorInfo=Object(S.a)(this.floorInfo)),this.originIdOf("labelingInfo")>2&&(a.labelingInfo=Object(S.a)(this.labelingInfo)),this.originIdOf("labelsVisible")>0&&(a.labelsVisible=this.labelsVisible),this.originIdOf("legendEnabled")>0&&(a.legendEnabled=this.legendEnabled),this.originIdOf("visible")>0&&(a.visible=this.visible),this.originIdOf("minScale")>0&&(a.minScale=this.minScale),this.originIdOf("maxScale")>0&&(a.maxScale=this.maxScale),this.originIdOf("opacity")>0&&(a.opacity=this.opacity),this.originIdOf("popupTemplate")>0&&(a.popupTemplate=Object(S.a)(this.popupTemplate)),this.originIdOf("renderer")>2&&(a.renderer=Object(S.a)(this.renderer)),"data-layer"===(null==(n=this.source)?void 0:n.type)&&(a.dynamicDataSource=this.source.clone()),this.originIdOf("title")>0&&(a.title=this.title),"map-image"===this.layer.type&&this.layer.originIdOf("customParameters")>0&&(a.customParameters=this.layer.customParameters),"tile"===this.layer.type&&this.layer.originIdOf("customParameters")>0&&(a.customParameters=this.layer.customParameters),a));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getField",value:function(e){return this.fieldsIndex.get(e)}},{key:"getFeatureType",value:function(e){var t=this.typeIdField,r=this.types;if(!t||!e)return null;var n=e.attributes?e.attributes[t]:void 0;if(null==n)return null;var i=null;return r.some((function(e){var t=e.id;return null!=t&&(t.toString()===n.toString()&&(i=e),!!i)})),i}},{key:"getFieldDomain",value:function(e,t){var r=t&&t.feature,n=this.getFeatureType(r);if(n){var i=n.domains&&n.domains[e];if(i&&"inherited"!==i.type)return i}return this._getLayerDomain(e)}},{key:"queryFeatures",value:function(){var e=Object(c.a)(s.a.mark((function e(){var t,n,o,c,u,b,p,y,d,f,j,v,O,h,g=arguments;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=g.length>0&&void 0!==g[0]?g[0]:this.createQuery(),n=g.length>1?g[1]:void 0,e.next=4,this.load();case 4:if(this.get("capabilities.operations.supportsQuery")){e.next=6;break}throw new m.a("Sublayer.queryFeatures","this layer doesn't support queries.");case 6:return e.next=8,Promise.all([Promise.all([r.e(24),r.e(78)]).then(r.bind(null,722)),r.e(115).then(r.bind(null,668))]);case 8:return p=e.sent,y=Object(i.a)(p,2),d=y[0].executeQuery,f=y[1].default,e.next=14,d(this.url,H.a.from(t),null!=(o=null==(c=this.layer)?void 0:c.spatialReference)?o:null,Object(l.a)(Object(l.a)({},n),{},{query:Object(l.a)(Object(l.a)({},null==(u=this.layer)?void 0:u.customParameters),{},{token:null==(b=this.layer)?void 0:b.apiKey})}));case 14:if(j=e.sent,null!=(v=f.fromJSON(j.data))&&v.features){O=Object(a.a)(v.features);try{for(O.s();!(h=O.n()).done;)h.value.sourceLayer=this}catch(s){O.e(s)}finally{O.f()}}return e.abrupt("return",v);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toExportImageJSON",value:function(e){var t,r=this,n={id:this.id,source:(null==(t=this.source)?void 0:t.toJSON())||{mapLayerId:this.id,type:"mapLayer"}};if(this.definitionExpression){var i=Object(I.j)(e)?Object(K.a)(e,this):this.definitionExpression;n.definitionExpression=i}else Object(I.j)(e)&&(n.definitionExpression=e);var a=["renderer","labelingInfo","opacity","labelsVisible"].reduce((function(e,t){return e[t]=r.originIdOf(t),e}),{}),o=Object.keys(a).some((function(e){return a[e]>2}));if(o){var s=n.drawingInfo={};a.renderer>2&&(s.renderer=this.renderer?this.renderer.toJSON():null),a.labelsVisible>2&&(s.showLabels=this.labelsVisible),this.labelsVisible&&a.labelingInfo>2&&(s.labelingInfo=this.labelingInfo?this.labelingInfo.map((function(e){return e.write({},{origin:"service",layer:r.layer})})):null,s.showLabels=!0),a.opacity>2&&(s.transparency=100-100*this.opacity),this._assignDefaultSymbolColors(s.renderer)}return n}},{key:"_assignDefaultSymbolColors",value:function(e){this._forEachSimpleMarkerSymbols(e,(function(e){e.color||"esriSMSX"!==e.style&&"esriSMSCross"!==e.style||(e.outline&&e.outline.color?e.color=e.outline.color:e.color=[0,0,0,0])}))}},{key:"_forEachSimpleMarkerSymbols",value:function(e,t){if(e){var r,n="uniqueValueInfos"in e?e.uniqueValueInfos:"classBreakInfos"in e?e.classBreakInfos:[],i=Object(a.a)(n);try{for(i.s();!(r=i.n()).done;){var o=r.value;G(o.symbol)&&t(o.symbol)}}catch(s){i.e(s)}finally{i.f()}"symbol"in e&&G(e.symbol)&&t(e.symbol),"defaultSymbol"in e&&G(e.defaultSymbol)&&t(e.defaultSymbol)}}},{key:"_setAndNotifyLayer",value:function(e,t){var r,n,i=this.layer,a=this._get(e);switch(e){case"definitionExpression":case"floorInfo":r="supportsSublayerDefinitionExpression";case"minScale":case"maxScale":case"visible":r="supportsSublayerVisibility";break;case"labelingInfo":case"labelsVisible":case"opacity":case"renderer":case"source":r="supportsDynamicLayers",n="supportsModification"}var o=Object(L.a)(this).getDefaultOrigin();if("service"!==o){if(r&&!1===this.get("layer.capabilities.exportMap.".concat(r)))return void this._logLockedError(e,"capability not available 'layer.capabilities.exportMap.".concat(r,"'"));if(n&&!1===this.get("capabilities.exportMap.".concat(n)))return void this._logLockedError(e,"capability not available 'capabilities.exportMap.".concat(n,"'"))}"source"!==e||"not-loaded"===this.loadStatus?(this._set(e,t),"service"!==o&&a!==t&&i&&i.emit&&i.emit("sublayer-update",{propertyName:e,target:this})):this._logLockedError(e,"'source' can't be changed after calling sublayer.load()")}},{key:"_handleSublayersChange",value:function(e,t){var r=this;t&&(t.forEach((function(e){e.parent=null,e.layer=null})),this.handles.removeAll()),e&&(e.forEach((function(e){e.parent=r,e.layer=r.layer})),this.handles.add([e.on("after-add",(function(e){var t=e.item;t.parent=r,t.layer=r.layer})),e.on("after-remove",(function(e){var t=e.item;t.parent=null,t.layer=null})),e.on("before-changes",(function(e){var t=r.get("layer.capabilities.exportMap.supportsSublayersChanges");null==t||t||(Y.error(new m.a("sublayer:sublayers-non-modifiable","Sublayer can't be added, moved, or removed from the layer's sublayers",{sublayer:r,layer:r.layer})),e.preventDefault())}))]))}},{key:"_logLockedError",value:function(e,t){Y.error(new m.a("sublayer:locked","Property '".concat(e,"' can't be changed on Sublayer from the layer '").concat(this.layer.id,"'"),{reason:t,sublayer:this,layer:this.layer}))}},{key:"_getLayerDomain",value:function(e){var t=this.fieldsIndex.get(e);return t?t.domain:null}}]),o}(Object(g.b)(Object(T.a)(Object(w.a)(x.a))));re.test={isMapImageLayerOverridePolicy:function(e){return e===X||e===Q},isTileImageLayerOverridePolicy:function(e){return e===W}},Object(d.a)([Object(P.b)({readOnly:!0})],re.prototype,"capabilities",void 0),Object(d.a)([Object(_.a)("service","capabilities",["layerDefinition.canModifyLayer","layerDefinition.capabilities"])],re.prototype,"readCapabilities",null),Object(d.a)([Object(P.b)({type:String,value:null,json:{name:"layerDefinition.definitionExpression",write:{overridePolicy:Q}}})],re.prototype,"definitionExpression",null),Object(d.a)([Object(P.b)({type:[V.a],json:{origins:{service:{read:{source:"layerDefinition.fields"}}}}})],re.prototype,"fields",void 0),Object(d.a)([Object(P.b)({readOnly:!0})],re.prototype,"fieldsIndex",null),Object(d.a)([Object(P.b)({type:J.a,value:null,json:{name:"layerDefinition.floorInfo",read:{source:"layerDefinition.floorInfo"},write:{target:"layerDefinition.floorInfo",overridePolicy:Q},origins:{"web-scene":{read:!1,write:!1}}}})],re.prototype,"floorInfo",null),Object(d.a)([Object(P.b)({type:$.a,json:{read:{source:"layerDefinition.extent"}}})],re.prototype,"fullExtent",void 0),Object(d.a)([Object(P.b)({type:String})],re.prototype,"globalIdField",void 0),Object(d.a)([Object(_.a)("service","globalIdField",["layerDefinition.globalIdField","layerDefinition.fields"])],re.prototype,"readGlobalIdFieldFromService",null),Object(d.a)([Object(P.b)({type:N.a,json:{write:{ignoreOrigin:!0}}})],re.prototype,"id",null),Object(d.a)([Object(P.b)({value:null,type:[U.a],json:{read:{source:"layerDefinition.drawingInfo.labelingInfo"},write:{target:"layerDefinition.drawingInfo.labelingInfo",overridePolicy:X}}})],re.prototype,"labelingInfo",null),Object(d.a)([Object(C.a)("labelingInfo")],re.prototype,"writeLabelingInfo",null),Object(d.a)([Object(P.b)({type:Boolean,value:!0,json:{read:{source:"layerDefinition.drawingInfo.showLabels"},write:{target:"layerDefinition.drawingInfo.showLabels",overridePolicy:X}}})],re.prototype,"labelsVisible",null),Object(d.a)([Object(P.b)({value:null})],re.prototype,"layer",null),Object(d.a)([Object(P.b)({type:Boolean,value:!0,json:{origins:{service:{read:{enabled:!1}}},read:{source:"showLegend"},write:{target:"showLegend",overridePolicy:Z}}})],re.prototype,"legendEnabled",void 0),Object(d.a)([Object(P.b)({type:["show","hide","hide-children"],value:"show",json:{read:!1,write:!1,origins:{"web-scene":{read:!0,write:!0}}}})],re.prototype,"listMode",null),Object(d.a)([Object(P.b)({type:Number,value:0,json:{write:{overridePolicy:X}}})],re.prototype,"minScale",null),Object(d.a)([Object(_.a)("minScale",["minScale","layerDefinition.minScale"])],re.prototype,"readMinScale",null),Object(d.a)([Object(P.b)({type:Number,value:0,json:{write:{overridePolicy:X}}})],re.prototype,"maxScale",null),Object(d.a)([Object(_.a)("maxScale",["maxScale","layerDefinition.maxScale"])],re.prototype,"readMaxScale",null),Object(d.a)([Object(P.b)({type:String})],re.prototype,"objectIdField",void 0),Object(d.a)([Object(_.a)("service","objectIdField",["layerDefinition.objectIdField","layerDefinition.fields"])],re.prototype,"readObjectIdFieldFromService",null),Object(d.a)([Object(P.b)({type:Number,value:1,json:{write:{target:"layerDefinition.drawingInfo.transparency",overridePolicy:X}}})],re.prototype,"opacity",null),Object(d.a)([Object(_.a)("opacity",["layerDefinition.drawingInfo.transparency","layerDefinition.transparency"])],re.prototype,"readOpacity",null),Object(d.a)([Object(C.a)("opacity")],re.prototype,"writeOpacity",null),Object(d.a)([Object(P.b)({json:{type:N.a,write:{target:"parentLayerId",allowNull:!0,overridePolicy:X}}})],re.prototype,"parent",void 0),Object(d.a)([Object(C.a)("parent")],re.prototype,"writeParent",null),Object(d.a)([Object(P.b)({type:Boolean,value:!0,json:{read:{source:"disablePopup",reader:function(e,t){return!t.disablePopup}},write:{target:"disablePopup",overridePolicy:Z,writer:function(e,t,r){t[r]=!e}}}})],re.prototype,"popupEnabled",void 0),Object(d.a)([Object(P.b)({type:f.a,json:{read:{source:"popupInfo"},write:{target:"popupInfo",overridePolicy:Z}}})],re.prototype,"popupTemplate",void 0),Object(d.a)([Object(P.b)({readOnly:!0})],re.prototype,"defaultPopupTemplate",null),Object(d.a)([Object(P.b)({types:j.a,value:null,json:{name:"layerDefinition.drawingInfo.renderer",write:{overridePolicy:X},origins:{"web-scene":{types:j.b,name:"layerDefinition.drawingInfo.renderer",write:{overridePolicy:X}}}}})],re.prototype,"renderer",null),Object(d.a)([Object(P.b)({types:{key:"type",base:null,typeMap:{"data-layer":q.a,"map-layer":B.a}},cast:function(e){if(e){if("mapLayerId"in e)return Object(N.d)(B.a,e);if("dataSource"in e)return Object(N.d)(q.a,e)}return e},json:{name:"layerDefinition.source",write:{overridePolicy:X}}})],re.prototype,"source",null),Object(d.a)([Object(P.b)()],re.prototype,"sourceJSON",void 0),Object(d.a)([Object(P.b)({value:null,json:{type:[N.a],write:{target:"subLayerIds",allowNull:!0,overridePolicy:X}}})],re.prototype,"sublayers",null),Object(d.a)([Object(F.a)("sublayers")],re.prototype,"castSublayers",null),Object(d.a)([Object(C.a)("sublayers")],re.prototype,"writeSublayers",null),Object(d.a)([Object(P.b)({type:String,json:{read:{source:"name"},write:{target:"name",allowNull:!0,overridePolicy:Z}}})],re.prototype,"title",void 0),Object(d.a)([Object(P.b)({type:String})],re.prototype,"typeIdField",void 0),Object(d.a)([Object(_.a)("typeIdField",["layerDefinition.typeIdField"])],re.prototype,"readTypeIdField",null),Object(d.a)([Object(P.b)({type:[M.a],json:{origins:{service:{read:{source:"layerDefinition.types"}}}}})],re.prototype,"types",void 0),Object(d.a)([Object(P.b)({type:String,json:{read:{source:"layerUrl"},write:{target:"layerUrl",overridePolicy:W}}})],re.prototype,"url",null),Object(d.a)([Object(P.b)({type:Boolean,value:!0,json:{read:{source:"defaultVisibility"},write:{target:"defaultVisibility",overridePolicy:X}}})],re.prototype,"visible",null),Object(d.a)([Object(C.a)("visible")],re.prototype,"writeVisible",null);var ne=re=n=Object(d.a)([Object(D.a)("esri.layers.support.Sublayer")],re)},898:function(e,t,r){"use strict";r.d(t,"a",(function(){return S}));var n=r(21),i=r(13),a=r(7),o=r.n(a),s=r(12),l=r(2),c=r(4),u=r(5),b=r(6),p=r(0),y=r(82),d=r(30),f=r(27),j=r(838),v=r(1),O=(r(19),r(14),r(15),r(57)),h=r(10),m=r(58),g=r(45),w=r(671),S=function(e){var t=function(e){Object(u.a)(r,e);var t=Object(b.a)(r);function r(){var e;return Object(l.a)(this,r),(e=t.apply(this,arguments)).capabilities=void 0,e.copyright=null,e.fullExtent=null,e.legendEnabled=!0,e.spatialReference=null,e.version=null,e}return Object(c.a)(r,[{key:"readCapabilities",value:function(e,t){var r=t.capabilities&&t.capabilities.split(",").map((function(e){return e.toLowerCase().trim()}));if(!r)return{operations:{supportsQuery:!1,supportsExportMap:!1,supportsExportTiles:!1,supportsTileMap:!1},exportMap:null,exportTiles:null};var n=this.type,i=-1!==r.indexOf("query"),a=-1!==r.indexOf("map"),o=!!t.exportTilesAllowed,s=-1!==r.indexOf("tilemap"),l="tile"!==n&&!!t.supportsDynamicLayers,c="tile"!==n&&(!t.tileInfo||l),u="tile"!==n&&(!t.tileInfo||l),b="tile"!==n,p=!!t.cimVersion&&j.a.parse(t.cimVersion).since(1,4);return{operations:{supportsQuery:i,supportsExportMap:a,supportsExportTiles:o,supportsTileMap:s},exportMap:a?{supportsArcadeExpressionForLabeling:p,supportsSublayersChanges:b,supportsDynamicLayers:l,supportsSublayerVisibility:c,supportsSublayerDefinitionExpression:u}:null,exportTiles:o?{maxExportTilesCount:+t.maxExportTilesCount}:null}}},{key:"readVersion",value:function(e,t){var r=t.currentVersion;return r||(r=t.hasOwnProperty("capabilities")||t.hasOwnProperty("tables")?10:t.hasOwnProperty("supportedImageFormatTypes")?9.31:9.3),r}},{key:"fetchSublayerInfo",value:function(){var e=Object(s.a)(o.a.mark((function e(t,r){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetchAllLayersAndTables(r);case 2:return e.abrupt("return",this._allLayersAndTablesMap.get(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"fetchAllLayersAndTables",value:function(){var e=Object(s.a)(o.a.mark((function e(t){var r,a=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.load(t);case 2:return this._allLayersAndTablesPromise||(this._allLayersAndTablesPromise=Object(y.default)(Object(f.J)(this.url).path+"/layers",{responseType:"json",query:Object(i.a)(Object(i.a)({f:"json"},this.customParameters),{},{token:this.apiKey})}).then((function(e){a._allLayersAndTablesMap=new Map;var t,r=Object(n.a)(e.data.layers);try{for(r.s();!(t=r.n()).done;){var i=t.value;a._allLayersAndTablesMap.set(i.id,i)}}catch(o){r.e(o)}finally{r.f()}return{result:e.data}}),(function(e){return{error:e}}))),e.next=5,this._allLayersAndTablesPromise;case 5:if(r=e.sent,Object(d.v)(t),!("result"in r)){e.next=8;break}return e.abrupt("return",r.result);case 8:throw r.error;case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(e);return Object(p.a)([Object(v.b)({readOnly:!0})],t.prototype,"capabilities",void 0),Object(p.a)([Object(O.a)("service","capabilities",["capabilities","exportTilesAllowed","maxExportTilesCount","supportsDynamicLayers","tileInfo"])],t.prototype,"readCapabilities",null),Object(p.a)([Object(v.b)({json:{read:{source:"copyrightText"}}})],t.prototype,"copyright",void 0),Object(p.a)([Object(v.b)({type:m.a})],t.prototype,"fullExtent",void 0),Object(p.a)([Object(v.b)(w.c)],t.prototype,"id",void 0),Object(p.a)([Object(v.b)({type:Boolean,json:{origins:{service:{read:{enabled:!1}}},read:{source:"showLegend"},write:{target:"showLegend"}}})],t.prototype,"legendEnabled",void 0),Object(p.a)([Object(v.b)(w.j)],t.prototype,"popupEnabled",void 0),Object(p.a)([Object(v.b)({type:g.a})],t.prototype,"spatialReference",void 0),Object(p.a)([Object(v.b)()],t.prototype,"version",void 0),Object(p.a)([Object(O.a)("version",["currentVersion","capabilities","tables","supportedImageFormatTypes"])],t.prototype,"readVersion",null),t=Object(p.a)([Object(h.a)("esri.layers.mixins.ArcGISMapService")],t)}},899:function(e,t,r){"use strict";r.d(t,"a",(function(){return x}));var n=r(21),i=r(2),a=r(4),o=r(77),s=r(65),l=r(5),c=r(6),u=r(0),b=r(52),p=r(808),y=r(29),d=r(15),f=r(1),j=(r(19),r(69)),v=(r(14),r(10)),O=r(164),h=r(839),m=r(824),g=d.a.getLogger("esri.layers.TileLayer");var w=b.a.ofType(h.a);function S(e,t){e&&e.forEach((function(e){t(e),e.sublayers&&e.sublayers.length&&S(e.sublayers,t)}))}var x=function(e){var t=function(e){Object(l.a)(r,e);var t=Object(c.a)(r);function r(){var e;Object(i.a)(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).allSublayers=new p.a({getCollections:function(){return[e.sublayers]},getChildrenFunction:function(e){return e.sublayers}}),e.sublayersSourceJSON={2:{},3:{},4:{},5:{}},e.handles.add(e.watch("sublayers",(function(t,r){return e._handleSublayersChange(t,r)}),!0)),e}return Object(a.a)(r,[{key:"readSublayers",value:function(e,t){if(t&&e){var r=this.sublayersSourceJSON,n=Object(O.d)(t.origin);if(!(n<2)&&(r[n]={context:t,visibleLayers:e.visibleLayers||r[n].visibleLayers,layers:e.layers||r[n].layers},!(n>2))){this._set("serviceSublayers",this.createSublayersForOrigin("service").sublayers);var i=this.createSublayersForOrigin("web-document"),a=i.sublayers,o=i.origin,s=Object(j.a)(this);s.setDefaultOrigin(o),this._set("sublayers",new w(a)),s.setDefaultOrigin("user")}}}},{key:"findSublayerById",value:function(e){return this.allSublayers.find((function(t){return t.id===e}))}},{key:"createServiceSublayers",value:function(){return this.createSublayersForOrigin("service").sublayers}},{key:"createSublayersForOrigin",value:function(e){var t,r=Object(O.d)("web-document"===e?"web-map":e),i=2,a=this.sublayersSourceJSON[2].layers,o=this.sublayersSourceJSON[2].context,s=null,l=[3,4,5].filter((function(e){return e<=r})),c=Object(n.a)(l);try{for(c.s();!(t=c.n()).done;){var u=t.value,b=this.sublayersSourceJSON[u];Object(m.b)(b.layers)&&(i=u,a=b.layers,o=b.context,b.visibleLayers&&(s={visibleLayers:b.visibleLayers,context:b.context}))}}catch(N){c.e(N)}finally{c.f()}var p,y=[3,4,5].filter((function(e){return e>i&&e<=r})),d=null,f=Object(n.a)(y);try{for(f.s();!(p=f.n()).done;){var j=p.value,v=this.sublayersSourceJSON[j],g=v.layers,x=v.visibleLayers,k=v.context;g&&(d={layers:g,context:k}),x&&(s={visibleLayers:x,context:k})}}catch(N){f.e(N)}finally{f.f()}var I=function(e,t){var r=[],n={};return e?(e.forEach((function(e){var i=new h.a;if(i.read(e,t),n[i.id]=i,null!=e.parentLayerId&&-1!==e.parentLayerId){var a=n[e.parentLayerId];a.sublayers||(a.sublayers=[]),a.sublayers.unshift(i)}else r.unshift(i)})),r):r}(a,o),T=new Map,E=new Set;if(d){var P,L=Object(n.a)(d.layers);try{for(L.s();!(P=L.n()).done;){var F=P.value;T.set(F.id,F)}}catch(N){L.e(N)}finally{L.f()}}if(s){var _,D=Object(n.a)(s.visibleLayers);try{for(D.s();!(_=D.n()).done;){var C=_.value;E.add(C)}}catch(N){D.e(N)}finally{D.f()}}return S(I,(function(e){d&&e.read(T.get(e.id),d.context),s&&e.read({defaultVisibility:E.has(e.id)},s.context)})),{origin:Object(O.b)(i),sublayers:new w({items:I})}}},{key:"read",value:function(e,t){Object(o.a)(Object(s.a)(r.prototype),"read",this).call(this,e,t),this.readSublayers(e,t)}},{key:"_handleSublayersChange",value:function(e,t){var r=this;t&&(t.forEach((function(e){e.parent=null,e.layer=null})),this.handles.remove("sublayers-owner")),e&&(e.forEach((function(e){e.parent=r,e.layer=r})),this.handles.add([e.on("after-add",(function(e){var t=e.item;t.parent=r,t.layer=r})),e.on("after-remove",(function(e){var t=e.item;t.parent=null,t.layer=null}))],"sublayers-owner"),"tile"===this.type&&this.handles.add(e.on("before-changes",(function(e){g.error(new y.a("tilelayer:sublayers-non-modifiable","ISublayer can't be added, moved, or removed from the layer's sublayers",{layer:r})),e.preventDefault()})),"sublayers-owner"))}}]),r}(e);return Object(u.a)([Object(f.b)({readOnly:!0})],t.prototype,"allSublayers",void 0),Object(u.a)([Object(f.b)({readOnly:!0,type:b.a.ofType(h.a)})],t.prototype,"serviceSublayers",void 0),Object(u.a)([Object(f.b)({value:null,type:w,json:{read:!1,write:{allowNull:!0,ignoreOrigin:!0}}})],t.prototype,"sublayers",void 0),Object(u.a)([Object(f.b)({readOnly:!0})],t.prototype,"sublayersSourceJSON",void 0),t=Object(u.a)([Object(v.a)("esri.layers.mixins.SublayersOwner")],t),t}}}]);
//# sourceMappingURL=53.e7b87b6e.chunk.js.map