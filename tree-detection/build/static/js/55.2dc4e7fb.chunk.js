(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[55,62,115],{668:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return x}));var i=r(22),n=r(21),a=r(2),o=r(4),s=r(5),l=r(6),c=r(0),u=r(114),p=r(210),b=r(42),d=r(26),y=r(11),f=r(1),j=(r(19),r(14),r(15),r(57)),O=r(10),h=r(43),v=r(45),m=r(62),g=r(666),w=new b.a({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh","":null}),S=function(e){Object(s.a)(r,e);var t=Object(l.a)(r);function r(e){var i;return Object(a.a)(this,r),(i=t.call(this,e)).displayFieldName=null,i.exceededTransferLimit=!1,i.features=[],i.fields=null,i.geometryType=null,i.hasM=!1,i.hasZ=!1,i.queryGeometry=null,i.spatialReference=null,i}return Object(o.a)(r,[{key:"readFeatures",value:function(e,t){for(var r=v.a.fromJSON(t.spatialReference),i=[],n=0;n<e.length;n++){var a=e[n],o=p.a.fromJSON(a),s=a.geometry&&a.geometry.spatialReference;Object(y.j)(o.geometry)&&!s&&(o.geometry.spatialReference=r),i.push(o)}return i}},{key:"writeGeometryType",value:function(e,t,r,i){if(e)w.write(e,t,r,i);else{var a=this.features;if(a){var o,s=Object(n.a)(a);try{for(s.s();!(o=s.n()).done;){var l=o.value;if(l&&Object(y.j)(l.geometry))return void w.write(l.geometry.type,t,r,i)}}catch(c){s.e(c)}finally{s.f()}}}}},{key:"readQueryGeometry",value:function(e,t){if(!e)return null;var r=!!e.spatialReference,i=Object(m.a)(e);return!r&&t.spatialReference&&(i.spatialReference=v.a.fromJSON(t.spatialReference)),i}},{key:"writeSpatialReference",value:function(e,t){if(e)t.spatialReference=e.toJSON();else{var r=this.features;if(r){var i,a=Object(n.a)(r);try{for(a.s();!(i=a.n()).done;){var o=i.value;if(o&&Object(y.j)(o.geometry)&&o.geometry.spatialReference)return void(t.spatialReference=o.geometry.spatialReference.toJSON())}}catch(s){a.e(s)}finally{a.f()}}}}},{key:"toJSON",value:function(e){var t=this.write(null);if(t.features&&Array.isArray(e)&&e.length>0)for(var r=0;r<t.features.length;r++){var i=t.features[r];if(i.geometry){var n=e&&e[r];i.geometry=n&&n.toJSON()||i.geometry}}return t}},{key:"quantize",value:function(e){for(var t=Object(i.a)(e.scale,2),r=t[0],n=t[1],a=Object(i.a)(e.translate,2),o=a[0],s=a[1],l=this.features,c=this._getQuantizationFunction(this.geometryType,(function(e){return Math.round((e-o)/r)}),(function(e){return Math.round((s-e)/n)})),u=0,p=l.length;u<p;u++)c(Object(y.q)(l[u].geometry))||(l.splice(u,1),u--,p--);return this.transform=e,this}},{key:"unquantize",value:function(){var e=this.geometryType,t=this.features,r=this.transform;if(!r)return this;var a,o=Object(i.a)(r.translate,2),s=o[0],l=o[1],c=Object(i.a)(r.scale,2),u=c[0],p=c[1],b=this._getHydrationFunction(e,(function(e){return e*u+s}),(function(e){return l-e*p})),d=Object(n.a)(t);try{for(d.s();!(a=d.n()).done;){var f=a.value.geometry;Object(y.j)(f)&&b(f)}}catch(j){d.e(j)}finally{d.f()}return this.transform=null,this}},{key:"_quantizePoints",value:function(e,t,r){for(var i,n,a=[],o=0,s=e.length;o<s;o++){var l=e[o];if(o>0){var c=t(l[0]),u=r(l[1]);c===i&&u===n||(a.push([c-i,u-n]),i=c,n=u)}else i=t(l[0]),n=r(l[1]),a.push([i,n])}return a.length>0?a:null}},{key:"_getQuantizationFunction",value:function(e,t,r){var i=this;return"point"===e?function(e){return e.x=t(e.x),e.y=r(e.y),e}:"polyline"===e||"polygon"===e?function(e){for(var n=Object(m.g)(e)?e.rings:e.paths,a=[],o=0,s=n.length;o<s;o++){var l=n[o],c=i._quantizePoints(l,t,r);c&&a.push(c)}return a.length>0?(Object(m.g)(e)?e.rings=a:e.paths=a,e):null}:"multipoint"===e?function(e){var n=i._quantizePoints(e.points,t,r);return n.length>0?(e.points=n,e):null}:"extent"===e?function(e){return e}:null}},{key:"_getHydrationFunction",value:function(e,t,r){return"point"===e?function(e){e.x=t(e.x),e.y=r(e.y)}:"polyline"===e||"polygon"===e?function(e){for(var i,n,a=Object(m.g)(e)?e.rings:e.paths,o=0,s=a.length;o<s;o++)for(var l=a[o],c=0,u=l.length;c<u;c++){var p=l[c];c>0?(i+=p[0],n+=p[1]):(i=p[0],n=p[1]),p[0]=t(i),p[1]=r(n)}}:"extent"===e?function(e){e.xmin=t(e.xmin),e.ymin=r(e.ymin),e.xmax=t(e.xmax),e.ymax=r(e.ymax)}:"multipoint"===e?function(e){for(var i,n,a=e.points,o=0,s=a.length;o<s;o++){var l=a[o];o>0?(i+=l[0],n+=l[1]):(i=l[0],n=l[1]),l[0]=t(i),l[1]=r(n)}}:void 0}}]),r}(d.a);Object(c.a)([Object(f.b)({type:String,json:{write:!0}})],S.prototype,"displayFieldName",void 0),Object(c.a)([Object(f.b)({type:Boolean,json:{write:{overridePolicy:function(e){return{enabled:e}}}}})],S.prototype,"exceededTransferLimit",void 0),Object(c.a)([Object(f.b)({type:[p.a],json:{write:!0}})],S.prototype,"features",void 0),Object(c.a)([Object(j.a)("features")],S.prototype,"readFeatures",null),Object(c.a)([Object(f.b)({type:[g.a],json:{write:!0}})],S.prototype,"fields",void 0),Object(c.a)([Object(f.b)({type:["point","multipoint","polyline","polygon","extent","mesh"],json:{read:{reader:w.read}}})],S.prototype,"geometryType",void 0),Object(c.a)([Object(h.a)("geometryType")],S.prototype,"writeGeometryType",null),Object(c.a)([Object(f.b)({type:Boolean,json:{write:{overridePolicy:function(e){return{enabled:e}}}}})],S.prototype,"hasM",void 0),Object(c.a)([Object(f.b)({type:Boolean,json:{write:{overridePolicy:function(e){return{enabled:e}}}}})],S.prototype,"hasZ",void 0),Object(c.a)([Object(f.b)({types:u.a,json:{write:!0}})],S.prototype,"queryGeometry",void 0),Object(c.a)([Object(j.a)("queryGeometry")],S.prototype,"readQueryGeometry",null),Object(c.a)([Object(f.b)({type:v.a,json:{write:!0}})],S.prototype,"spatialReference",void 0),Object(c.a)([Object(h.a)("spatialReference")],S.prototype,"writeSpatialReference",null),Object(c.a)([Object(f.b)({json:{write:!0}})],S.prototype,"transform",void 0),(S=Object(c.a)([Object(O.a)("esri.rest.support.FeatureSet")],S)).prototype.toJSON.isDefaultToJSON=!0,S||(S={});var x=S},669:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var i=r(42),n=Object(i.b)()({esriTimeUnitsMilliseconds:"milliseconds",esriTimeUnitsSeconds:"seconds",esriTimeUnitsMinutes:"minutes",esriTimeUnitsHours:"hours",esriTimeUnitsDays:"days",esriTimeUnitsWeeks:"weeks",esriTimeUnitsMonths:"months",esriTimeUnitsYears:"years",esriTimeUnitsDecades:"decades",esriTimeUnitsCenturies:"centuries",esriTimeUnitsUnknown:void 0})},675:function(e,t,r){"use strict";r.d(t,"a",(function(){return E}));var i,n=r(2),a=r(4),o=r(5),s=r(6),l=r(0),c=r(332),u=r(42),p=r(26),b=r(18),d=r(1),y=(r(14),r(19),r(15),r(57)),f=r(10),j=r(43),O=r(693),h=i=function(e){Object(o.a)(r,e);var t=Object(s.a)(r);function r(){var e;return Object(n.a)(this,r),(e=t.apply(this,arguments)).expression=null,e.title=null,e.value=null,e}return Object(a.a)(r,[{key:"readExpression",value:function(e,t){return t.value?Object(O.a)(t.value):e}},{key:"writeExpression",value:function(e,t,r){null!=this.value&&(e=Object(O.a)(this.value)),t[r]=e}},{key:"clone",value:function(){return new i({expression:this.expression,title:this.title,value:this.value})}}]),r}(p.a);Object(l.a)([Object(d.b)({type:String,json:{write:{allowNull:!0}}})],h.prototype,"expression",void 0),Object(l.a)([Object(y.a)("expression",["expression","value"])],h.prototype,"readExpression",null),Object(l.a)([Object(j.a)("expression")],h.prototype,"writeExpression",null),Object(l.a)([Object(d.b)({type:String,json:{write:!0,origins:{"web-scene":{write:!1}}}})],h.prototype,"title",void 0),Object(l.a)([Object(d.b)({json:{read:!1,write:!1}})],h.prototype,"value",void 0);var v,m=h=i=Object(l.a)([Object(f.a)("esri.layers.support.LabelExpressionInfo")],h),g=r(725),w=r(753),S=new u.a({esriServerPointLabelPlacementAboveCenter:"above-center",esriServerPointLabelPlacementAboveLeft:"above-left",esriServerPointLabelPlacementAboveRight:"above-right",esriServerPointLabelPlacementBelowCenter:"below-center",esriServerPointLabelPlacementBelowLeft:"below-left",esriServerPointLabelPlacementBelowRight:"below-right",esriServerPointLabelPlacementCenterCenter:"center-center",esriServerPointLabelPlacementCenterLeft:"center-left",esriServerPointLabelPlacementCenterRight:"center-right",esriServerLinePlacementAboveAfter:"above-after",esriServerLinePlacementAboveAlong:"above-along",esriServerLinePlacementAboveBefore:"above-before",esriServerLinePlacementAboveStart:"above-start",esriServerLinePlacementAboveEnd:"above-end",esriServerLinePlacementBelowAfter:"below-after",esriServerLinePlacementBelowAlong:"below-along",esriServerLinePlacementBelowBefore:"below-before",esriServerLinePlacementBelowStart:"below-start",esriServerLinePlacementBelowEnd:"below-end",esriServerLinePlacementCenterAfter:"center-after",esriServerLinePlacementCenterAlong:"center-along",esriServerLinePlacementCenterBefore:"center-before",esriServerLinePlacementCenterStart:"center-start",esriServerLinePlacementCenterEnd:"center-end",esriServerPolygonPlacementAlwaysHorizontal:"always-horizontal"},{ignoreUnknown:!0});function x(e){return!e||"service"!==e.origin&&!F(e.layer)}function F(e){return"map-image"===(null==e?void 0:e.type)}function k(e){var t,r;return!!F(e)&&!(null==(t=e.capabilities)||null==(r=t.exportMap)||!r.supportsArcadeExpressionForLabeling)}var I=v=function(e){Object(o.a)(r,e);var t=Object(s.a)(r);function r(e){var i;return Object(n.a)(this,r),(i=t.call(this,e)).type="label",i.name=null,i.deconflictionStrategy="static",i.labelExpression=null,i.labelExpressionInfo=null,i.labelPlacement=null,i.maxScale=0,i.minScale=0,i.symbol=g.a,i.useCodedValues=void 0,i.where=null,i}return Object(a.a)(r,[{key:"readLabelExpression",value:function(e,t){var r=t.labelExpressionInfo;if(!r||!r.value&&!r.expression)return e}},{key:"writeLabelExpression",value:function(e,t,r){if(this.labelExpressionInfo)if(null!=this.labelExpressionInfo.value)e=Object(O.f)(this.labelExpressionInfo.value);else if(null!=this.labelExpressionInfo.expression){var i=Object(O.e)(this.labelExpressionInfo.expression);i&&(e="["+i+"]")}null!=e&&(t[r]=e)}},{key:"writeLabelExpressionInfo",value:function(e,t,r,i){if(null==e&&null!=this.labelExpression&&x(i))e=new m({expression:this.getLabelExpressionArcade()});else if(!e)return;var n=e.toJSON(i);n.expression&&(t[r]=n)}},{key:"writeMaxScale",value:function(e,t){(e||this.minScale)&&(t.maxScale=e)}},{key:"writeMinScale",value:function(e,t){(e||this.maxScale)&&(t.minScale=e)}},{key:"getLabelExpression",value:function(){return Object(O.b)(this)}},{key:"getLabelExpressionArcade",value:function(){return Object(O.c)(this)}},{key:"getLabelExpressionSingleField",value:function(){return Object(O.d)(this)}},{key:"hash",value:function(){return JSON.stringify(this)}},{key:"clone",value:function(){return new v({deconflictionStrategy:this.deconflictionStrategy,labelExpression:this.labelExpression,labelExpressionInfo:Object(b.a)(this.labelExpressionInfo),labelPlacement:this.labelPlacement,maxScale:this.maxScale,minScale:this.minScale,name:this.name,symbol:Object(b.a)(this.symbol),where:this.where,useCodedValues:this.useCodedValues})}}],[{key:"evaluateWhere",value:function(e,t){var r=function(e,t,r){switch(t){case"=":return e==r;case"<>":return e!=r;case">":return e>r;case">=":return e>=r;case"<":return e<r;case"<=":return e<=r}return!1};try{if(null==e)return!0;var i=e.split(" ");if(3===i.length)return r(t[i[0]],i[1],i[2]);if(7===i.length){var n=r(t[i[0]],i[1],i[2]),a=i[3],o=r(t[i[4]],i[5],i[6]);switch(a){case"AND":return n&&o;case"OR":return n||o}}return!1}catch(s){console.log("Error.: can't parse = "+e)}}}]),r}(p.a);Object(l.a)([Object(d.b)({type:String,json:{write:!0}})],I.prototype,"name",void 0),Object(l.a)([Object(d.b)({type:String,json:{write:!0,default:"static",origins:{"web-scene":{write:!1}}}})],I.prototype,"deconflictionStrategy",void 0),Object(l.a)([Object(d.b)({type:String,json:{write:{overridePolicy:function(e,t,r){return this.labelExpressionInfo&&"service"===(null==r?void 0:r.origin)&&k(r.layer)?{enabled:!1}:{allowNull:!0}}}}})],I.prototype,"labelExpression",void 0),Object(l.a)([Object(y.a)("labelExpression")],I.prototype,"readLabelExpression",null),Object(l.a)([Object(j.a)("labelExpression")],I.prototype,"writeLabelExpression",null),Object(l.a)([Object(d.b)({type:m,json:{write:{overridePolicy:function(e,t,r){return function(e){return x(e)||k(e.layer)}(r)?{allowNull:!0}:{enabled:!1}}}}})],I.prototype,"labelExpressionInfo",void 0),Object(l.a)([Object(j.a)("labelExpressionInfo")],I.prototype,"writeLabelExpressionInfo",null),Object(l.a)([Object(d.b)({type:S.apiValues,json:{type:S.jsonValues,read:S.read,write:S.write}})],I.prototype,"labelPlacement",void 0),Object(l.a)([Object(d.b)({type:Number})],I.prototype,"maxScale",void 0),Object(l.a)([Object(j.a)("maxScale")],I.prototype,"writeMaxScale",null),Object(l.a)([Object(d.b)({type:Number})],I.prototype,"minScale",void 0),Object(l.a)([Object(j.a)("minScale")],I.prototype,"writeMinScale",null),Object(l.a)([Object(d.b)({types:c.g,json:{origins:{"web-scene":{types:c.h,write:w.b,default:null}},write:w.b,default:null}})],I.prototype,"symbol",void 0),Object(l.a)([Object(d.b)({type:Boolean,json:{write:!0}})],I.prototype,"useCodedValues",void 0),Object(l.a)([Object(d.b)({type:String,json:{write:!0}})],I.prototype,"where",void 0);var E=I=v=Object(l.a)([Object(f.a)("esri.layers.support.LabelClass")],I)},678:function(e,t,r){"use strict";r.d(t,"a",(function(){return f}));var i,n=r(2),a=r(4),o=r(5),s=r(6),l=r(0),c=r(26),u=r(692),p=r(1),b=(r(19),r(14),r(15),r(10)),d=r(669),y=i=function(e){Object(o.a)(r,e);var t=Object(s.a)(r);function r(e){var i;return Object(n.a)(this,r),(i=t.call(this,e)).value=0,i.unit="milliseconds",i}return Object(a.a)(r,[{key:"toMilliseconds",value:function(){return Object(u.a)(this.value,this.unit,"milliseconds")}},{key:"clone",value:function(){return new i({value:this.value,unit:this.unit})}}]),r}(c.a);Object(l.a)([Object(p.b)({type:Number,json:{write:!0},nonNullable:!0})],y.prototype,"value",void 0),Object(l.a)([Object(p.b)({type:d.a.apiValues,json:{type:d.a.jsonValues,read:d.a.read,write:d.a.write},nonNullable:!0})],y.prototype,"unit",void 0);var f=y=i=Object(l.a)([Object(b.a)("esri.TimeInterval")],y)},683:function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var i=r(135),n=r(70),a={inches:Object(i.b)(1,"meters","inches"),feet:Object(i.b)(1,"meters","feet"),"us-feet":Object(i.b)(1,"meters","us-feet"),yards:Object(i.b)(1,"meters","yards"),miles:Object(i.b)(1,"meters","miles"),"nautical-miles":Object(i.b)(1,"meters","nautical-miles"),millimeters:Object(i.b)(1,"meters","millimeters"),centimeters:Object(i.b)(1,"meters","centimeters"),decimeters:Object(i.b)(1,"meters","decimeters"),meters:Object(i.b)(1,"meters","meters"),kilometers:Object(i.b)(1,"meters","kilometers"),"decimal-degrees":1/Object(i.i)(1,"meters",n.a.radius)}},693:function(e,t,r){"use strict";r.d(t,"a",(function(){return f})),r.d(t,"b",(function(){return b})),r.d(t,"c",(function(){return d})),r.d(t,"d",(function(){return y})),r.d(t,"e",(function(){return m})),r.d(t,"f",(function(){return p}));var i=r(109),n="__begin__",a="__end__",o=new RegExp(n,"ig"),s=new RegExp(a,"ig"),l=new RegExp("^"+n,"i"),c=new RegExp(a+"$","i"),u='"';function p(e){return e.replace(new RegExp("\\{","g"),"[").replace(new RegExp("\\}","g"),"]")}function b(e){var t={expression:"",type:"none"};return e.labelExpressionInfo?e.labelExpressionInfo.value?(t.expression=e.labelExpressionInfo.value,t.type="conventional"):e.labelExpressionInfo.expression&&(t.expression=e.labelExpressionInfo.expression,t.type="arcade"):null!=e.labelExpression&&(t.expression=function(e){return e.replace(new RegExp("\\[","g"),"{").replace(new RegExp("\\]","g"),"}")}(e.labelExpression),t.type="conventional"),t}function d(e){var t=b(e);if(!t)return null;switch(t.type){case"conventional":return f(t.expression);case"arcade":return t.expression}return null}function y(e){var t=b(e);if(!t)return null;switch(t.type){case"conventional":return function(e){var t=e.match(j);return t&&t[1].trim()||null}(t.expression);case"arcade":return m(t.expression)}return null}function f(e){var t;return e?(t=Object(i.c)(e,(function(e){return n+'$feature["'+e+'"]'+a})),t=l.test(t)?t.replace(l,""):u+t,t=(t=c.test(t)?t.replace(c,""):t+u).replace(o,'" + ').replace(s,' + "')):t='""',t}var j=/^\s*\{([^}]+)\}\s*$/i;var O=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])([\w\s]+)(\2)\]));?\s*$/i,h=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])([\w\s]+)(\2)\]));?\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(\1|\3)(\5)\s*\));?\s*$/i,v=/^\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])([\w\s]+)(\1)\s*\));?\s*$/i;function m(e){if(!e)return null;var t=O.exec(e)||h.exec(e);return t?t[1]||t[3]:(t=v.exec(e))?t[2]:null}},694:function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));r(19);function i(e){}},697:function(e,t,r){"use strict";r.d(t,"a",(function(){return I}));var i=r(7),n=r.n(i),a=r(12),o=r(2),s=r(4),l=r(8),c=r(5),u=r(6),p=r(0),b=r(15),d=r(30),y=r(1),f=(r(19),r(14),r(10)),j=r(21),O=r(52),h=r(215),v=new O.a,m=new WeakMap;function g(e){w(e)&&v.push(e)}function w(e){return e&&"object"==typeof e&&"refreshInterval"in e&&"refresh"in e}function S(e,t){return Number.isFinite(e)&&Number.isFinite(t)?t<=0?e:S(t,e%t):0}var x=0,F=0;function k(){var e,t=Date.now(),r=Object(j.a)(v);try{for(r.s();!(e=r.n()).done;){var i,n=e.value;if(n.refreshInterval)t-(null!=(i=m.get(n))?i:0)+5>=6e4*n.refreshInterval&&(m.set(n,t),n.refresh(t))}}catch(a){r.e(a)}finally{r.f()}}Object(h.a)((function(){var e,t=Date.now(),r=0,i=Object(j.a)(v);try{for(i.s();!(e=i.n()).done;){var n=e.value;r=S(Math.round(6e4*n.refreshInterval),r),n.refreshInterval?m.get(n)||m.set(n,t):m.delete(n)}}catch(a){i.e(a)}finally{i.f()}if(r!==F){if(F=r,clearInterval(x),0===F)return void(x=0);x=setInterval(k,F)}}));var I=function(e){var t=function(e){Object(c.a)(r,e);var t=Object(u.a)(r);function r(){var e;Object(o.a)(this,r);for(var i=arguments.length,n=new Array(i),a=0;a<i;a++)n[a]=arguments[a];return(e=t.call.apply(t,[this].concat(n))).refreshInterval=0,e.refreshTimestamp=0,e._debounceHasDataChanged=Object(d.i)((function(){return e.hasDataChanged()})),e.when().then((function(){g(Object(l.a)(e))}),(function(){})),e}return Object(s.a)(r,[{key:"destroy",value:function(){var e;w(e=this)&&v.includes(e)&&v.remove(e)}},{key:"refreshParameters",get:function(){return{_ts:this.refreshTimestamp||null}}},{key:"refresh",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now();Object(d.l)(this._debounceHasDataChanged()).then((function(r){r&&(e._set("refreshTimestamp",t),e.emit("refresh"))}),(function(t){b.a.getLogger(e.declaredClass).error(t)}))}},{key:"hasDataChanged",value:function(){var e=Object(a.a)(n.a.mark((function e(){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),r}(e);return Object(p.a)([Object(y.b)({type:Number,cast:function(e){return e>=.1?e:e<=0?0:.1},json:{write:!0,origins:{"web-document":{write:!0}}}})],t.prototype,"refreshInterval",void 0),Object(p.a)([Object(y.b)({readOnly:!0})],t.prototype,"refreshTimestamp",void 0),Object(p.a)([Object(y.b)()],t.prototype,"refreshParameters",null),t=Object(p.a)([Object(f.a)("esri.layers.mixins.RefreshableLayer")],t),t}},698:function(e,t,r){"use strict";r.d(t,"a",(function(){return S}));var i,n=r(2),a=r(4),o=r(5),s=r(6),l=r(0),c=r(665),u=r(678),p=r(26),b=r(18),d=r(11),y=r(1),f=(r(14),r(19),r(15),r(57)),j=r(10),O=r(43),h=i=function(e){Object(o.a)(r,e);var t=Object(s.a)(r);function r(e){var i;return Object(n.a)(this,r),(i=t.call(this,e)).respectsDaylightSaving=!1,i.timezone=null,i}return Object(a.a)(r,[{key:"readRespectsDaylightSaving",value:function(e,t){return void 0!==t.respectsDaylightSaving?t.respectsDaylightSaving:void 0!==t.respectDaylightSaving&&t.respectDaylightSaving}},{key:"clone",value:function(){var e=this.respectsDaylightSaving,t=this.timezone;return new i({respectsDaylightSaving:e,timezone:t})}}]),r}(p.a);Object(l.a)([Object(y.b)({type:Boolean,json:{write:!0}})],h.prototype,"respectsDaylightSaving",void 0),Object(l.a)([Object(f.a)("respectsDaylightSaving",["respectsDaylightSaving","respectDaylightSaving"])],h.prototype,"readRespectsDaylightSaving",null),Object(l.a)([Object(y.b)({type:String,json:{read:{source:"timeZone"},write:{target:"timeZone"}}})],h.prototype,"timezone",void 0);var v,m=h=i=Object(l.a)([Object(j.a)("esri.layers.support.TimeReference")],h),g=r(669),w=v=function(e){Object(o.a)(r,e);var t=Object(s.a)(r);function r(e){var i;return Object(n.a)(this,r),(i=t.call(this,e)).cumulative=!1,i.endField=null,i.fullTimeExtent=null,i.hasLiveData=!1,i.interval=null,i.startField=null,i.timeReference=null,i.trackIdField=null,i.useTime=!0,i}return Object(a.a)(r,[{key:"readFullTimeExtent",value:function(e,t){if(!t.timeExtent||!Array.isArray(t.timeExtent)||2!==t.timeExtent.length)return null;var r=new Date(t.timeExtent[0]),i=new Date(t.timeExtent[1]);return new c.a({start:r,end:i})}},{key:"writeFullTimeExtent",value:function(e,t){e&&Object(d.j)(e.start)&&Object(d.j)(e.end)?t.timeExtent=[e.start.getTime(),e.end.getTime()]:t.timeExtent=null}},{key:"readInterval",value:function(e,t){return t.timeInterval&&t.timeIntervalUnits?new u.a({value:t.timeInterval,unit:g.a.fromJSON(t.timeIntervalUnits)}):t.defaultTimeInterval&&t.defaultTimeIntervalUnits?new u.a({value:t.defaultTimeInterval,unit:g.a.fromJSON(t.defaultTimeIntervalUnits)}):null}},{key:"writeInterval",value:function(e,t){if(e){var r=e.toJSON();t.timeInterval=r.value,t.timeIntervalUnits=r.unit}else t.timeInterval=null,t.timeIntervalUnits=null}},{key:"clone",value:function(){var e=this.cumulative,t=this.endField,r=this.hasLiveData,i=this.interval,n=this.startField,a=this.timeReference,o=this.fullTimeExtent,s=this.trackIdField,l=this.useTime;return new v({cumulative:e,endField:t,hasLiveData:r,interval:i,startField:n,timeReference:Object(b.a)(a),fullTimeExtent:Object(b.a)(o),trackIdField:s,useTime:l})}}]),r}(p.a);Object(l.a)([Object(y.b)({type:Boolean,json:{read:{source:"exportOptions.timeDataCumulative"},write:{target:"exportOptions.timeDataCumulative"}}})],w.prototype,"cumulative",void 0),Object(l.a)([Object(y.b)({type:String,json:{read:{source:"endTimeField"},write:{target:"endTimeField",allowNull:!0}}})],w.prototype,"endField",void 0),Object(l.a)([Object(y.b)({type:c.a,json:{write:{enabled:!0,allowNull:!0}}})],w.prototype,"fullTimeExtent",void 0),Object(l.a)([Object(f.a)("fullTimeExtent",["timeExtent"])],w.prototype,"readFullTimeExtent",null),Object(l.a)([Object(O.a)("fullTimeExtent")],w.prototype,"writeFullTimeExtent",null),Object(l.a)([Object(y.b)({type:Boolean,json:{write:!0}})],w.prototype,"hasLiveData",void 0),Object(l.a)([Object(y.b)({type:u.a,json:{write:{enabled:!0,allowNull:!0}}})],w.prototype,"interval",void 0),Object(l.a)([Object(f.a)("interval",["timeInterval","timeIntervalUnits","defaultTimeInterval","defaultTimeIntervalUnits"])],w.prototype,"readInterval",null),Object(l.a)([Object(O.a)("interval")],w.prototype,"writeInterval",null),Object(l.a)([Object(y.b)({type:String,json:{read:{source:"startTimeField"},write:{target:"startTimeField",allowNull:!0}}})],w.prototype,"startField",void 0),Object(l.a)([Object(y.b)({type:m,json:{write:{enabled:!0,allowNull:!0}}})],w.prototype,"timeReference",void 0),Object(l.a)([Object(y.b)({type:String,json:{write:{enabled:!0,allowNull:!0}}})],w.prototype,"trackIdField",void 0),Object(l.a)([Object(y.b)({type:Boolean,json:{read:{source:"exportOptions.useTime"},write:{target:"exportOptions.useTime"}}})],w.prototype,"useTime",void 0);var S=w=v=Object(l.a)([Object(j.a)("esri.layers.support.TimeInfo")],w)},704:function(e,t,r){"use strict";function i(e){return e&&"esri.renderers.visualVariables.SizeVariable"===e.declaredClass}function n(e){return null!=e&&!isNaN(e)&&isFinite(e)}function a(e){return e.valueExpression?"expression":e.field&&"string"==typeof e.field?"field":"unknown"}function o(e,t){var r=t||a(e),i=e.valueUnit||"unknown";return"unknown"===r?"constant":e.stops?"stops":null!=e.minSize&&null!=e.maxSize&&null!=e.minDataValue&&null!=e.maxDataValue?"clamped-linear":"unknown"===i?null!=e.minSize&&null!=e.minDataValue?e.minSize&&e.minDataValue?"proportional":"additive":"identity":"real-world-size"}r.d(t,"a",(function(){return a})),r.d(t,"b",(function(){return o})),r.d(t,"c",(function(){return i})),r.d(t,"d",(function(){return n}))},705:function(e,t,r){"use strict";r.d(t,"a",(function(){return p}));var i=r(2),n=r(5),a=r(6),o=r(0),s=r(26),l=r(1),c=(r(19),r(14),r(15),r(10)),u=function(e){Object(n.a)(r,e);var t=Object(a.a)(r);function r(){var e;return Object(i.a)(this,r),(e=t.apply(this,arguments)).type=null,e}return r}(s.a);Object(o.a)([Object(l.b)({type:["selection","cluster"],readOnly:!0,json:{read:!1,write:!0}})],u.prototype,"type",void 0);var p=u=Object(o.a)([Object(c.a)("esri.layers.support.FeatureReduction")],u)},710:function(e,t,r){"use strict";r.d(t,"a",(function(){return d}));var i=r(2),n=r(4),a=r(5),o=r(6),s=r(0),l=r(15),c=r(11),u=r(1),p=(r(19),r(14),r(10)),b=r(676),d=function(e){var t=function(e){Object(a.a)(r,e);var t=Object(o.a)(r);function r(){return Object(i.a)(this,r),t.apply(this,arguments)}return Object(n.a)(r,[{key:"title",get:function(){if(this._get("title")&&"defaults"!==this.originOf("title"))return this._get("title");if(this.url){var e=Object(b.e)(this.url);if(Object(c.j)(e)&&e.title)return e.title}return this._get("title")||""},set:function(e){this._set("title",e)}},{key:"url",set:function(e){this._set("url",Object(b.g)(e,l.a.getLogger(this.declaredClass)))}}]),r}(e);return Object(s.a)([Object(u.b)()],t.prototype,"title",null),Object(s.a)([Object(u.b)({type:String})],t.prototype,"url",null),t=Object(s.a)([Object(p.a)("esri.layers.mixins.ArcGISService")],t)}},713:function(e,t,r){"use strict";r.d(t,"a",(function(){return j}));var i=r(2),n=r(4),a=r(5),o=r(6),s=r(0),l=r(42),c=r(26),u=r(18),p=r(1),b=(r(14),r(19),r(15),r(10)),d=r(43),y=new l.a({esriFeatureEditToolAutoCompletePolygon:"auto-complete-polygon",esriFeatureEditToolCircle:"circle",esriFeatureEditToolEllipse:"ellipse",esriFeatureEditToolFreehand:"freehand",esriFeatureEditToolLine:"line",esriFeatureEditToolNone:"none",esriFeatureEditToolPoint:"point",esriFeatureEditToolPolygon:"polygon",esriFeatureEditToolRectangle:"rectangle",esriFeatureEditToolArrow:"arrow",esriFeatureEditToolTriangle:"triangle",esriFeatureEditToolLeftArrow:"left-arrow",esriFeatureEditToolRightArrow:"right-arrow",esriFeatureEditToolUpArrow:"up-arrow",esriFeatureEditToolDownArrow:"down-arrow"}),f=function(e){Object(a.a)(r,e);var t=Object(o.a)(r);function r(e){var n;return Object(i.a)(this,r),(n=t.call(this,e)).name=null,n.description=null,n.drawingTool=null,n.prototype=null,n.thumbnail=null,n}return Object(n.a)(r,[{key:"writeDrawingTool",value:function(e,t){t.drawingTool=y.toJSON(e)}},{key:"writePrototype",value:function(e,t){t.prototype=Object(u.c)(Object(u.a)(e),!0)}},{key:"writeThumbnail",value:function(e,t){t.thumbnail=Object(u.c)(Object(u.a)(e))}}]),r}(c.a);Object(s.a)([Object(p.b)({json:{write:!0}})],f.prototype,"name",void 0),Object(s.a)([Object(p.b)({json:{write:!0}})],f.prototype,"description",void 0),Object(s.a)([Object(p.b)({json:{read:y.read,write:y.write}})],f.prototype,"drawingTool",void 0),Object(s.a)([Object(d.a)("drawingTool")],f.prototype,"writeDrawingTool",null),Object(s.a)([Object(p.b)({json:{write:!0}})],f.prototype,"prototype",void 0),Object(s.a)([Object(d.a)("prototype")],f.prototype,"writePrototype",null),Object(s.a)([Object(p.b)({json:{write:!0}})],f.prototype,"thumbnail",void 0),Object(s.a)([Object(d.a)("thumbnail")],f.prototype,"writeThumbnail",null);var j=f=Object(s.a)([Object(b.a)("esri.layers.support.FeatureTemplate")],f)},719:function(e,t,r){"use strict";r.d(t,"a",(function(){return j}));var i=r(2),n=r(4),a=r(5),o=r(6),s=r(0),l=r(665),c=r(678),u=r(1),p=(r(19),r(14),r(15),r(57)),b=r(10),d=r(698),y=r(209),f=r(669);var j=function(e){var t=function(e){Object(a.a)(r,e);var t=Object(o.a)(r);function r(){var e;return Object(i.a)(this,r),(e=t.apply(this,arguments)).timeExtent=null,e.timeOffset=null,e.useViewTime=!0,e}return Object(n.a)(r,[{key:"readOffset",value:function(e,t){var r=t.timeInfo.exportOptions;if(!r)return null;var i=r.timeOffset,n=f.a.fromJSON(r.timeOffsetUnits);return i&&n?new c.a({value:i,unit:n}):null}},{key:"timeInfo",set:function(e){Object(y.f)(e,this.fieldsIndex),this._set("timeInfo",e)}}]),r}(e);return Object(s.a)([Object(u.b)({type:l.a,json:{write:!1}})],t.prototype,"timeExtent",void 0),Object(s.a)([Object(u.b)({type:c.a})],t.prototype,"timeOffset",void 0),Object(s.a)([Object(p.a)("service","timeOffset",["timeInfo.exportOptions"])],t.prototype,"readOffset",null),Object(s.a)([Object(u.b)({value:null,type:d.a,json:{write:!0,origins:{"web-document":{read:!1,write:!1}}}})],t.prototype,"timeInfo",null),Object(s.a)([Object(u.b)({type:Boolean,json:{read:{source:"timeAnimation"},write:{target:"timeAnimation"},origins:{"web-scene":{read:!1,write:!1}}}})],t.prototype,"useViewTime",void 0),t=Object(s.a)([Object(b.a)("esri.layers.mixins.TemporalLayer")],t),t}},720:function(e,t,r){"use strict";r.d(t,"a",(function(){return k}));var i,n=r(2),a=r(4),o=r(5),s=r(6),l=r(0),c=r(114),u=r(665),p=r(42),b=r(26),d=r(18),y=r(1),f=r(14),j=(r(19),r(15),r(10)),O=r(43),h=r(62),v=i=function(e){Object(o.a)(r,e);var t=Object(s.a)(r);function r(e){var i;return Object(n.a)(this,r),(i=t.call(this,e)).groupByFields=void 0,i.topCount=void 0,i.orderByFields=void 0,i}return Object(a.a)(r,[{key:"clone",value:function(){return new i({groupByFields:this.groupByFields,topCount:this.topCount,orderByFields:this.orderByFields})}}]),r}(b.a);Object(l.a)([Object(y.b)({type:[String],json:{write:!0}})],v.prototype,"groupByFields",void 0),Object(l.a)([Object(y.b)({type:Number,json:{write:!0}})],v.prototype,"topCount",void 0),Object(l.a)([Object(y.b)({type:[String],json:{write:!0}})],v.prototype,"orderByFields",void 0);var m,g=v=i=Object(l.a)([Object(j.a)("esri.rest.support.TopFilter")],v),w=r(45),S=new p.a({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),x=new p.a({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"}),F=m=function(e){Object(o.a)(r,e);var t=Object(s.a)(r);function r(e){var i;return Object(n.a)(this,r),(i=t.call(this,e)).cacheHint=void 0,i.distance=void 0,i.geometry=null,i.geometryPrecision=void 0,i.maxAllowableOffset=void 0,i.num=void 0,i.objectIds=null,i.orderByFields=null,i.outFields=null,i.outSpatialReference=null,i.resultType=null,i.returnGeometry=!1,i.returnM=void 0,i.returnZ=void 0,i.start=void 0,i.spatialRelationship="intersects",i.timeExtent=null,i.topFilter=void 0,i.units=null,i.where="1=1",i}return Object(a.a)(r,[{key:"writeStart",value:function(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10}},{key:"clone",value:function(){return new m(Object(d.a)({cacheHint:this.cacheHint,distance:this.distance,geometry:this.geometry,geometryPrecision:this.geometryPrecision,maxAllowableOffset:this.maxAllowableOffset,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,resultType:this.resultType,returnGeometry:this.returnGeometry,returnZ:this.returnZ,returnM:this.returnM,start:this.start,spatialRelationship:this.spatialRelationship,timeExtent:this.timeExtent,topFilter:this.topFilter,units:this.units,where:this.where}))}}]),r}(b.a);Object(l.a)([Object(y.b)({type:Boolean,json:{write:!0}})],F.prototype,"cacheHint",void 0),Object(l.a)([Object(y.b)({type:Number,json:{write:{overridePolicy:function(e){return{enabled:e>0}}}}})],F.prototype,"distance",void 0),Object(l.a)([Object(y.b)({types:c.a,json:{read:h.a,write:!0}})],F.prototype,"geometry",void 0),Object(l.a)([Object(y.b)({type:Number,json:{write:!0}})],F.prototype,"geometryPrecision",void 0),Object(l.a)([Object(y.b)({type:Number,json:{write:!0}})],F.prototype,"maxAllowableOffset",void 0),Object(l.a)([Object(y.b)({type:Number,json:{read:{source:"resultRecordCount"}}})],F.prototype,"num",void 0),Object(l.a)([Object(y.b)({json:{write:!0}})],F.prototype,"objectIds",void 0),Object(l.a)([Object(y.b)({type:[String],json:{write:!0}})],F.prototype,"orderByFields",void 0),Object(l.a)([Object(y.b)({type:[String],json:{write:!0}})],F.prototype,"outFields",void 0),Object(l.a)([Object(y.b)({type:w.a,json:{read:{source:"outSR"},write:{target:"outSR"}}})],F.prototype,"outSpatialReference",void 0),Object(l.a)([Object(y.b)({type:String,json:{write:!0}})],F.prototype,"resultType",void 0),Object(l.a)([Object(y.b)({json:{write:!0}})],F.prototype,"returnGeometry",void 0),Object(l.a)([Object(y.b)({type:Boolean,json:{write:{overridePolicy:function(e){return{enabled:e}}}}})],F.prototype,"returnM",void 0),Object(l.a)([Object(y.b)({type:Boolean,json:{write:{overridePolicy:function(e){return{enabled:e}}}}})],F.prototype,"returnZ",void 0),Object(l.a)([Object(y.b)({type:Number,json:{read:{source:"resultOffset"}}})],F.prototype,"start",void 0),Object(l.a)([Object(O.a)("start"),Object(O.a)("num")],F.prototype,"writeStart",null),Object(l.a)([Object(y.b)({type:String,json:{read:{source:"spatialRel",reader:S.read},write:{target:"spatialRel",writer:S.write}}})],F.prototype,"spatialRelationship",void 0),Object(l.a)([Object(y.b)({type:u.a,json:{write:!0}})],F.prototype,"timeExtent",void 0),Object(l.a)([Object(y.b)({type:g,json:{write:!0}})],F.prototype,"topFilter",void 0),Object(l.a)([Object(y.b)({type:String,json:{read:x.read,write:{writer:x.write,overridePolicy:function(e){return{enabled:e&&this.distance>0}}}}})],F.prototype,"units",void 0),Object(l.a)([Object(y.b)({type:String,json:{write:!0}})],F.prototype,"where",void 0),(F=m=Object(l.a)([Object(j.a)("esri.rest.support.TopFeaturesQuery")],F)).from=Object(f.m)(F);var k=F},721:function(e,t,r){"use strict";r.d(t,"a",(function(){return c}));var i=r(2),n=r(5),a=r(6),o=r(0),s=r(1),l=(r(19),r(14),r(15),r(10)),c=function(e){var t=function(e){Object(n.a)(r,e);var t=Object(a.a)(r);function r(){var e;return Object(i.a)(this,r),(e=t.apply(this,arguments)).customParameters=null,e}return r}(e);return Object(o.a)([Object(s.b)({type:Object,json:{write:{overridePolicy:function(e){return{enabled:!!(e&&Object.keys(e).length>0)}}}}})],t.prototype,"customParameters",void 0),t=Object(o.a)([Object(l.a)("esri.layers.mixins.CustomParametersMixin")],t)}},724:function(e,t,r){"use strict";r.d(t,"a",(function(){return u}));var i=r(2),n=r(4),a=r(5),o=r(6),s=r(0),l=r(1),c=(r(19),r(14),r(15),r(10));var u=function(e){var t=function(e){Object(a.a)(r,e);var t=Object(o.a)(r);function r(){return Object(i.a)(this,r),t.apply(this,arguments)}return Object(n.a)(r,[{key:"apiKey",get:function(){var e;return this._isOverridden("apiKey")?this._get("apiKey"):function(e){return"portalItem"in e}(this)?null==(e=this.portalItem)?void 0:e.apiKey:null},set:function(e){null!=e?this._override("apiKey",e):(this._clearOverride("apiKey"),this.clear("apiKey","user"))}}]),r}(e);return Object(s.a)([Object(l.b)({type:String})],t.prototype,"apiKey",null),t=Object(s.a)([Object(c.a)("esri.layers.mixins.APIKeyMixin")],t)}},725:function(e,t,r){"use strict";r.d(t,"a",(function(){return l})),r.d(t,"b",(function(){return c})),r.d(t,"c",(function(){return p})),r.d(t,"d",(function(){return u}));r(19),r(11);var i=r(166),n=r(98),a=r(143),o=r(136),s=r(703),l=(a.a.fromJSON(s.a),n.a.fromJSON(s.c),i.a.fromJSON(s.b),o.a.fromJSON(s.d));var c=a.a.fromJSON(s.e),u=n.a.fromJSON(s.g),p=i.a.fromJSON(s.f)},728:function(e,t,r){"use strict";r.d(t,"a",(function(){return c}));var i=r(21),n=r(15),a=r(666),o=r(672),s=r(209),l=n.a.getLogger("esri.layers.support.fieldProperties");function c(){return{fields:{type:[a.a],value:null},fieldsIndex:{readOnly:!0,get:function(){return new o.a(this.fields||[])}},outFields:{type:[String],json:{read:!1},set:function(e){this._userOutFields=e,this.notifyChange("outFields")},get:function(){var e=this._userOutFields;if(!e||!e.length)return null;if(e.includes("*"))return["*"];if(!this.fields)return e;var t,r=Object(i.a)(e);try{for(r.s();!(t=r.n()).done;){var n=t.value;this.fieldsIndex.has(n)||l.error("field-attributes-layer:invalid-field","Invalid field ".concat(n," found in outFields"),{layer:this,outFields:e})}}catch(a){r.e(a)}finally{r.f()}return Object(s.d)(this.fieldsIndex,e)}}}}},729:function(e,t,r){"use strict";r.d(t,"a",(function(){return h}));var i,n=r(2),a=r(4),o=r(5),s=r(6),l=r(0),c=(r(114),r(26)),u=r(18),p=r(1),b=r(14),d=(r(19),r(15),r(10)),y=r(43),f=r(673),j=r(45),O=i=function(e){Object(o.a)(r,e);var t=Object(s.a)(r);function r(e){var i;return Object(n.a)(this,r),(i=t.call(this,e)).dynamicDataSource=void 0,i.gdbVersion=null,i.geometryPrecision=void 0,i.historicMoment=null,i.maxAllowableOffset=void 0,i.objectIds=null,i.orderByFields=null,i.outFields=null,i.outSpatialReference=null,i.relationshipId=void 0,i.start=void 0,i.num=void 0,i.returnGeometry=!1,i.returnM=void 0,i.returnZ=void 0,i.where=null,i}return Object(a.a)(r,[{key:"_writeHistoricMoment",value:function(e,t){t.historicMoment=e&&e.getTime()}},{key:"writeStart",value:function(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10,t.where="1=1"}},{key:"clone",value:function(){return new i(Object(u.a)({dynamicDataSource:this.dynamicDataSource,gdbVersion:this.gdbVersion,geometryPrecision:this.geometryPrecision,historicMoment:this.historicMoment&&new Date(this.historicMoment.getTime()),maxAllowableOffset:this.maxAllowableOffset,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,relationshipId:this.relationshipId,start:this.start,num:this.num,returnGeometry:this.returnGeometry,where:this.where,returnZ:this.returnZ,returnM:this.returnM}))}}]),r}(c.a);Object(l.a)([Object(p.b)({type:f.a,json:{write:!0}})],O.prototype,"dynamicDataSource",void 0),Object(l.a)([Object(p.b)({type:String,json:{write:!0}})],O.prototype,"gdbVersion",void 0),Object(l.a)([Object(p.b)({type:Number,json:{write:!0}})],O.prototype,"geometryPrecision",void 0),Object(l.a)([Object(p.b)({type:Date})],O.prototype,"historicMoment",void 0),Object(l.a)([Object(y.a)("historicMoment")],O.prototype,"_writeHistoricMoment",null),Object(l.a)([Object(p.b)({type:Number,json:{write:!0}})],O.prototype,"maxAllowableOffset",void 0),Object(l.a)([Object(p.b)({type:[Number],json:{write:!0}})],O.prototype,"objectIds",void 0),Object(l.a)([Object(p.b)({type:[String],json:{write:!0}})],O.prototype,"orderByFields",void 0),Object(l.a)([Object(p.b)({type:[String],json:{write:!0}})],O.prototype,"outFields",void 0),Object(l.a)([Object(p.b)({type:j.a,json:{read:{source:"outSR"},write:{target:"outSR"}}})],O.prototype,"outSpatialReference",void 0),Object(l.a)([Object(p.b)({json:{write:!0}})],O.prototype,"relationshipId",void 0),Object(l.a)([Object(p.b)({type:Number,json:{read:{source:"resultOffset"}}})],O.prototype,"start",void 0),Object(l.a)([Object(y.a)("start"),Object(y.a)("num")],O.prototype,"writeStart",null),Object(l.a)([Object(p.b)({type:Number,json:{read:{source:"resultRecordCount"}}})],O.prototype,"num",void 0),Object(l.a)([Object(p.b)({json:{write:!0}})],O.prototype,"returnGeometry",void 0),Object(l.a)([Object(p.b)({type:Boolean,json:{write:{overridePolicy:function(e){return{enabled:e}}}}})],O.prototype,"returnM",void 0),Object(l.a)([Object(p.b)({type:Boolean,json:{write:{overridePolicy:function(e){return{enabled:e}}}}})],O.prototype,"returnZ",void 0),Object(l.a)([Object(p.b)({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],O.prototype,"where",void 0),(O=i=Object(l.a)([Object(d.a)("esri.rest.support.RelationshipQuery")],O)).from=Object(b.m)(O);var h=O},733:function(e,t,r){"use strict";r.d(t,"a",(function(){return v}));var i=r(2),n=r(4),a=r(5),o=r(6),s=r(0),l=r(26),c=r(18),u=r(1),p=(r(14),r(19),r(15),r(57)),b=r(10),d=r(43),y=r(664),f=(r(660),r(661)),j=r(662),O=r(713),h=function(e){Object(a.a)(r,e);var t=Object(o.a)(r);function r(e){var n;return Object(i.a)(this,r),(n=t.call(this,e)).id=null,n.name=null,n.domains=null,n.templates=null,n}return Object(n.a)(r,[{key:"readDomains",value:function(e){var t={};for(var r in e)if(e.hasOwnProperty(r)){var i=e[r];switch(i.type){case"range":t[r]=j.a.fromJSON(i);break;case"codedValue":t[r]=y.a.fromJSON(i);break;case"inherited":t[r]=f.a.fromJSON(i)}}return t}},{key:"writeDomains",value:function(e,t){var r={};for(var i in e)e.hasOwnProperty(i)&&(r[i]=e[i]&&e[i].toJSON());Object(c.c)(r),t.domains=r}},{key:"readTemplates",value:function(e){return e&&e.map((function(e){return new O.a(e)}))}},{key:"writeTemplates",value:function(e,t){t.templates=e&&e.map((function(e){return e.toJSON()}))}}]),r}(l.a);Object(s.a)([Object(u.b)({json:{write:!0}})],h.prototype,"id",void 0),Object(s.a)([Object(u.b)({json:{write:!0}})],h.prototype,"name",void 0),Object(s.a)([Object(u.b)({json:{write:!0}})],h.prototype,"domains",void 0),Object(s.a)([Object(p.a)("domains")],h.prototype,"readDomains",null),Object(s.a)([Object(d.a)("domains")],h.prototype,"writeDomains",null),Object(s.a)([Object(u.b)({json:{write:!0}})],h.prototype,"templates",void 0),Object(s.a)([Object(p.a)("templates")],h.prototype,"readTemplates",null),Object(s.a)([Object(d.a)("templates")],h.prototype,"writeTemplates",null);var v=h=Object(s.a)([Object(b.a)("esri.layers.support.FeatureType")],h)},735:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return ar}));var i=r(21),n=r(7),a=r.n(n),o=r(12),s=r(13),l=r(2),c=r(4),u=r(77),p=r(65),b=r(5),d=r(6),y=r(0),f=r(214),j=(r(700),r(686),r(688),r(689),r(663),r(687)),O=r(701),h=r(715),v=r(691),m=r(82),g=r(332),w=r(52),S=r(29),x=r(183),F=r(19),k=r(42),I=r(15),E=r(11),T=r(677),R=r(66),M=r(30);function C(e,t){return D.apply(this,arguments)}function D(){return(D=Object(o.a)(a.a.mark((function e(t,i){var n,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.e(5).then(r.bind(null,736));case 2:return n=e.sent,o=n.WhereClause,e.abrupt("return",o.create(t,i));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var _,P=r(27),L=r(1),N=r(97),A=r(57),V=r(10),q=r(43),G=r(212),U=r(26),z=r(18),B=r(14),J=_=function(e){Object(b.a)(r,e);var t=Object(d.a)(r);function r(e){var i;return Object(l.a)(this,r),(i=t.call(this,e)).expression=null,i.name=null,i.returnType="boolean",i.title=null,i}return Object(c.a)(r,[{key:"clone",value:function(){return new _({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}}]),r}(U.a);Object(y.a)([Object(L.b)({type:String,json:{write:!0}})],J.prototype,"expression",void 0),Object(y.a)([Object(L.b)({type:String,json:{write:!0}})],J.prototype,"name",void 0),Object(y.a)([Object(L.b)({type:["boolean"],json:{write:!0}})],J.prototype,"returnType",void 0),Object(y.a)([Object(L.b)({type:String,json:{write:!0}})],J.prototype,"title",void 0);var Q=J=_=Object(y.a)([Object(V.a)("esri.form.ExpressionInfo")],J),W=function(e){Object(b.a)(r,e);var t=Object(d.a)(r);function r(e){var i;return Object(l.a)(this,r),(i=t.call(this,e)).description=null,i.label=null,i.type=null,i.visibilityExpression=null,i}return r}(U.a);Object(y.a)([Object(L.b)({type:String,json:{write:!0}})],W.prototype,"description",void 0),Object(y.a)([Object(L.b)({type:String,json:{write:!0}})],W.prototype,"label",void 0),Object(y.a)([Object(L.b)()],W.prototype,"type",void 0),Object(y.a)([Object(L.b)({type:String,json:{write:!0}})],W.prototype,"visibilityExpression",void 0);var H,Z=W=Object(y.a)([Object(V.a)("esri.form.elements.Element")],W),K=H=function(e){Object(b.a)(r,e);var t=Object(d.a)(r);function r(e){var i;return Object(l.a)(this,r),(i=t.call(this,e)).type=null,i}return Object(c.a)(r,[{key:"clone",value:function(){return new H({type:this.type})}}]),r}(U.a);Object(y.a)([Object(L.b)({type:["attachment","audio","document","image","signature","video"],json:{write:!0}})],K.prototype,"type",void 0);var $,Y=K=H=Object(y.a)([Object(V.a)("esri.form.elements.inputs.AttachmentInput")],K),X=$=function(e){Object(b.a)(r,e);var t=Object(d.a)(r);function r(e){var i;return Object(l.a)(this,r),(i=t.call(this,e)).attachmentKeyword=null,i.editable=!0,i.input=null,i.type="attachment",i}return Object(c.a)(r,[{key:"clone",value:function(){return new $({attachmentKeyword:this.attachmentKeyword,description:this.description,editable:this.editable,input:this.input,label:this.label,visibilityExpression:this.visibilityExpression})}}]),r}(Z);Object(y.a)([Object(L.b)({type:String,json:{write:!0}})],X.prototype,"attachmentKeyword",void 0),Object(y.a)([Object(L.b)({type:Boolean,json:{write:!0}})],X.prototype,"editable",void 0),Object(y.a)([Object(L.b)({type:Y,json:{read:{source:"inputType"},write:{target:"inputType"}}})],X.prototype,"input",void 0),Object(y.a)([Object(L.b)({type:["attachment"],json:{read:!1,write:!0}})],X.prototype,"type",void 0);var ee=X=$=Object(y.a)([Object(V.a)("esri.form.elements.AttachmentElement")],X),te=function(e){Object(b.a)(r,e);var t=Object(d.a)(r);function r(e){var i;return Object(l.a)(this,r),(i=t.call(this,e)).type=null,i}return r}(U.a);Object(y.a)([Object(L.b)()],te.prototype,"type",void 0);var re=te=Object(y.a)([Object(V.a)("esri.form.elements.inputs.Input")],te),ie=function(e){Object(b.a)(r,e);var t=Object(d.a)(r);function r(e){var i;return Object(l.a)(this,r),(i=t.call(this,e)).maxLength=null,i.minLength=0,i}return r}(re);Object(y.a)([Object(L.b)({type:Number,json:{write:!0}})],ie.prototype,"maxLength",void 0),Object(y.a)([Object(L.b)({type:Number,json:{write:!0}})],ie.prototype,"minLength",void 0);var ne,ae=ie=Object(y.a)([Object(V.a)("esri.form.elements.inputs.TextInput")],ie),oe=ne=function(e){Object(b.a)(r,e);var t=Object(d.a)(r);function r(e){var i;return Object(l.a)(this,r),(i=t.call(this,e)).type="barcode-scanner",i}return Object(c.a)(r,[{key:"clone",value:function(){return new ne({maxLength:this.maxLength,minLength:this.minLength})}}]),r}(ae);Object(y.a)([Object(L.b)({type:["barcode-scanner"],json:{read:!1,write:!0}})],oe.prototype,"type",void 0);var se,le=oe=ne=Object(y.a)([Object(V.a)("esri.form.elements.inputs.BarcodeScannerInput")],oe),ce=se=function(e){Object(b.a)(r,e);var t=Object(d.a)(r);function r(e){var i;return Object(l.a)(this,r),(i=t.call(this,e)).noValueOptionLabel=null,i.showNoValueOption=!1,i.type="combo-box",i}return Object(c.a)(r,[{key:"clone",value:function(){return new se({showNoValueOption:this.showNoValueOption,noValueOptionLabel:this.noValueOptionLabel})}}]),r}(re);Object(y.a)([Object(L.b)({type:String,json:{write:!0}})],ce.prototype,"noValueOptionLabel",void 0),Object(y.a)([Object(L.b)({type:Boolean,json:{write:!0}})],ce.prototype,"showNoValueOption",void 0),Object(y.a)([Object(L.b)({type:["combo-box"],json:{read:!1,write:!0}})],ce.prototype,"type",void 0);var ue,pe=ce=se=Object(y.a)([Object(V.a)("esri.form.elements.inputs.ComboBoxInput")],ce);function be(e){return null!=e?new Date(e):null}function de(e){return e?e.getTime():null}var ye=ue=function(e){Object(b.a)(r,e);var t=Object(d.a)(r);function r(e){var i;return Object(l.a)(this,r),(i=t.call(this,e)).includeTime=!1,i.max=null,i.min=null,i.type="datetime-picker",i}return Object(c.a)(r,[{key:"readMax",value:function(e,t){return be(t.max)}},{key:"writeMax",value:function(e,t){t.max=de(e)}},{key:"readMin",value:function(e,t){return be(t.min)}},{key:"writeMin",value:function(e,t){t.min=de(e)}},{key:"clone",value:function(){return new ue({includeTime:this.includeTime,max:this.max,min:this.min,type:this.type})}}]),r}(re);Object(y.a)([Object(L.b)({type:Boolean,json:{write:!0}})],ye.prototype,"includeTime",void 0),Object(y.a)([Object(L.b)({type:Date,json:{type:Number,write:!0}})],ye.prototype,"max",void 0),Object(y.a)([Object(A.a)("max")],ye.prototype,"readMax",null),Object(y.a)([Object(q.a)("max")],ye.prototype,"writeMax",null),Object(y.a)([Object(L.b)({type:Date,json:{type:Number,write:!0}})],ye.prototype,"min",void 0),Object(y.a)([Object(A.a)("min")],ye.prototype,"readMin",null),Object(y.a)([Object(q.a)("min")],ye.prototype,"writeMin",null),Object(y.a)([Object(L.b)({type:["datetime-picker"],json:{read:!1,write:!0}})],ye.prototype,"type",void 0);var fe,je=ye=ue=Object(y.a)([Object(V.a)("esri.form.elements.inputs.DateTimePickerInput")],ye),Oe=fe=function(e){Object(b.a)(r,e);var t=Object(d.a)(r);function r(e){var i;return Object(l.a)(this,r),(i=t.call(this,e)).noValueOptionLabel=null,i.showNoValueOption=!1,i.type="radio-buttons",i}return Object(c.a)(r,[{key:"clone",value:function(){return new fe({noValueOptionLabel:this.noValueOptionLabel,showNoValueOption:this.showNoValueOption})}}]),r}(re);Object(y.a)([Object(L.b)({type:String,json:{write:!0}})],Oe.prototype,"noValueOptionLabel",void 0),Object(y.a)([Object(L.b)({type:Boolean,json:{write:!0}})],Oe.prototype,"showNoValueOption",void 0),Object(y.a)([Object(L.b)({type:["radio-buttons"],json:{read:!1,write:!0}})],Oe.prototype,"type",void 0);var he,ve=Oe=fe=Object(y.a)([Object(V.a)("esri.form.elements.inputs.RadioButtonsInput")],Oe),me=he=function(e){Object(b.a)(r,e);var t=Object(d.a)(r);function r(e){var i;return Object(l.a)(this,r),(i=t.call(this,e)).offValue=null,i.onValue=null,i.type="switch",i}return Object(c.a)(r,[{key:"clone",value:function(){return new he({offValue:this.offValue,onValue:this.onValue})}}]),r}(re);Object(y.a)([Object(L.b)({type:[String,Number],json:{write:!0}})],me.prototype,"offValue",void 0),Object(y.a)([Object(L.b)({type:[String,Number],json:{write:!0}})],me.prototype,"onValue",void 0),Object(y.a)([Object(L.b)({type:["switch"],json:{read:!1,write:!0}})],me.prototype,"type",void 0);var ge,we=me=he=Object(y.a)([Object(V.a)("esri.form.elements.inputs.SwitchInput")],me),Se=ge=function(e){Object(b.a)(r,e);var t=Object(d.a)(r);function r(e){var i;return Object(l.a)(this,r),(i=t.call(this,e)).type="text-area",i}return Object(c.a)(r,[{key:"clone",value:function(){return new ge({maxLength:this.maxLength,minLength:this.minLength})}}]),r}(ae);Object(y.a)([Object(L.b)({type:["text-area"],json:{read:!1,write:!0}})],Se.prototype,"type",void 0);var xe,Fe=Se=ge=Object(y.a)([Object(V.a)("esri.form.elements.inputs.TextAreaInput")],Se),ke=xe=function(e){Object(b.a)(r,e);var t=Object(d.a)(r);function r(e){var i;return Object(l.a)(this,r),(i=t.call(this,e)).type="text-box",i}return Object(c.a)(r,[{key:"clone",value:function(){return new xe({maxLength:this.maxLength,minLength:this.minLength})}}]),r}(ae);Object(y.a)([Object(L.b)({type:["text-box"],json:{read:!1,write:!0}})],ke.prototype,"type",void 0);var Ie,Ee={base:re,key:"type",typeMap:{"barcode-scanner":le,"combo-box":pe,"datetime-picker":je,"radio-buttons":ve,switch:we,"text-area":Fe,"text-box":ke=xe=Object(y.a)([Object(V.a)("esri.form.elements.inputs.TextBoxInput")],ke)}},Te=r(679),Re=Ie=function(e){Object(b.a)(r,e);var t=Object(d.a)(r);function r(e){var i;return Object(l.a)(this,r),(i=t.call(this,e)).domain=null,i.editable=!0,i.fieldName=null,i.hint=null,i.input=null,i.requiredExpression=null,i.type="field",i}return Object(c.a)(r,[{key:"clone",value:function(){return new Ie({description:this.description,domain:this.domain,editable:this.editable,fieldName:this.fieldName,hint:this.hint,input:this.input,label:this.label,requiredExpression:this.requiredExpression,visibilityExpression:this.visibilityExpression})}}]),r}(Z);Object(y.a)([Object(L.b)({types:Te.b,json:{read:{reader:Te.a},write:!0}})],Re.prototype,"domain",void 0),Object(y.a)([Object(L.b)({type:Boolean,json:{write:!0}})],Re.prototype,"editable",void 0),Object(y.a)([Object(L.b)({type:String,json:{write:!0}})],Re.prototype,"fieldName",void 0),Object(y.a)([Object(L.b)({type:String,json:{write:!0}})],Re.prototype,"hint",void 0),Object(y.a)([Object(L.b)({types:Ee,json:{read:{source:"inputType"},write:{target:"inputType"}}})],Re.prototype,"input",void 0),Object(y.a)([Object(L.b)({type:String,json:{write:!0}})],Re.prototype,"requiredExpression",void 0),Object(y.a)([Object(L.b)({type:String,json:{read:!1,write:!0}})],Re.prototype,"type",void 0);var Me,Ce=Re=Ie=Object(y.a)([Object(V.a)("esri.form.elements.FieldElement")],Re),De=r(339),_e=Me=function(e){Object(b.a)(r,e);var t=Object(d.a)(r);function r(e){var i;return Object(l.a)(this,r),(i=t.call(this,e)).displayCount=null,i.displayType="list",i.editable=!0,i.orderByFields=null,i.relationshipId=null,i.type="relationship",i}return Object(c.a)(r,[{key:"clone",value:function(){return new Me({description:this.description,displayCount:this.displayCount,displayType:this.displayType,editable:this.editable,label:this.label,orderByFields:Object(z.a)(this.orderByFields),relationshipId:this.relationshipId,visibilityExpression:this.visibilityExpression})}}]),r}(Z);Object(y.a)([Object(L.b)({type:Number,json:{write:!0}})],_e.prototype,"displayCount",void 0),Object(y.a)([Object(L.b)({type:["list"],json:{write:!0}})],_e.prototype,"displayType",void 0),Object(y.a)([Object(L.b)({type:Boolean,json:{write:!0}})],_e.prototype,"editable",void 0),Object(y.a)([Object(L.b)({type:[De.a],json:{write:!0}})],_e.prototype,"orderByFields",void 0),Object(y.a)([Object(L.b)({type:Number,json:{write:!0}})],_e.prototype,"relationshipId",void 0),Object(y.a)([Object(L.b)({type:["relationship"],json:{read:!1,write:!0}})],_e.prototype,"type",void 0);var Pe,Le=_e=Me=Object(y.a)([Object(V.a)("esri.form.elements.RelationshipElement")],_e);function Ne(e){return{typesWithGroup:{base:Z,key:"type",typeMap:{attachment:ee,field:Ce,group:e,relationship:Le}},typesWithoutGroup:{base:Z,key:"type",typeMap:{attachment:ee,field:Ce,relationship:Le}}}}function Ae(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!e)return null;var i=r?t.typesWithGroup.typeMap:t.typesWithoutGroup.typeMap;return e.filter((function(e){return i[e.type]})).map((function(e){return i[e.type].fromJSON(e)}))}function Ve(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!e)return null;var i=r?t.typesWithGroup.typeMap:t.typesWithoutGroup.typeMap;return e.filter((function(e){return i[e.type]})).map((function(e){return e.toJSON()}))}function qe(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return e?e.map((function(e){return Object(B.k)(r?t.typesWithGroup:t.typesWithoutGroup,e)})):null}var Ge=Pe=function(e){Object(b.a)(r,e);var t=Object(d.a)(r);function r(e){var i;return Object(l.a)(this,r),(i=t.call(this,e)).elements=null,i.initialState="expanded",i.type="group",i}return Object(c.a)(r,[{key:"castElements",value:function(e){return qe(e,ze,!1)}},{key:"readElements",value:function(e,t){return Ae(t.formElements,ze,!1)}},{key:"writeElements",value:function(e,t){t.formElements=Ve(e,ze,!1)}},{key:"clone",value:function(){return new Pe({description:this.description,elements:Object(z.a)(this.elements),initialState:this.initialState,label:this.label,visibilityExpression:this.visibilityExpression})}}]),r}(Z);Object(y.a)([Object(L.b)({json:{write:!0}})],Ge.prototype,"elements",void 0),Object(y.a)([Object(N.a)("elements")],Ge.prototype,"castElements",null),Object(y.a)([Object(A.a)("elements",["formElements"])],Ge.prototype,"readElements",null),Object(y.a)([Object(q.a)("elements")],Ge.prototype,"writeElements",null),Object(y.a)([Object(L.b)({type:["collapsed","expanded"],json:{write:!0}})],Ge.prototype,"initialState",void 0),Object(y.a)([Object(L.b)({type:String,json:{read:!1,write:!0}})],Ge.prototype,"type",void 0);var Ue,ze=Ne(Ge=Pe=Object(y.a)([Object(V.a)("esri.form.elements.GroupElement")],Ge)),Be=Ne(Ge),Je=Ue=function(e){Object(b.a)(r,e);var t=Object(d.a)(r);function r(e){var i;return Object(l.a)(this,r),(i=t.call(this,e)).description=null,i.elements=null,i.expressionInfos=null,i.title=null,i}return Object(c.a)(r,[{key:"castElements",value:function(e){return qe(e,Be)}},{key:"readElements",value:function(e,t){return Ae(t.formElements,Be)}},{key:"writeElements",value:function(e,t){t.formElements=Ve(e,Be)}},{key:"clone",value:function(){return new Ue({description:this.description,expressionInfos:Object(z.a)(this.expressionInfos),elements:Object(z.a)(this.elements),title:this.title})}}]),r}(U.a);Object(y.a)([Object(L.b)({type:String,json:{write:!0}})],Je.prototype,"description",void 0),Object(y.a)([Object(L.b)({json:{write:!0}})],Je.prototype,"elements",void 0),Object(y.a)([Object(N.a)("elements")],Je.prototype,"castElements",null),Object(y.a)([Object(A.a)("elements",["formElements"])],Je.prototype,"readElements",null),Object(y.a)([Object(q.a)("elements")],Je.prototype,"writeElements",null),Object(y.a)([Object(L.b)({type:[Q],json:{write:!0}})],Je.prototype,"expressionInfos",void 0),Object(y.a)([Object(L.b)({type:String,json:{write:!0}})],Je.prototype,"title",void 0);var Qe=Je=Ue=Object(y.a)([Object(V.a)("esri.form.FormTemplate")],Je),We=r(58),He=r(742),Ze=r(45),Ke=r(682),$e=(r(114),r(210)),Ye=r(142),Xe=r(242),et=r(727);var tt,rt=r(723),it=r(702),nt=r(668),at=r(108),ot=r(236),st=0,lt=I.a.getLogger("esri.layers.graphics.sources.MemorySource"),ct=function(e){Object(b.a)(r,e);var t=Object(d.a)(r);function r(e){var i;return Object(l.a)(this,r),(i=t.call(this,e))._idToClientGraphic=null,i.type="memory",i}return Object(c.a)(r,[{key:"load",value:function(e){var t=Object(E.j)(e)?e.signal:null;return this.addResolvingPromise(this._startWorker(t)),Promise.resolve(this)}},{key:"destroy",value:function(){var e;null==(e=this._connection)||e.close(),this._connection=null}},{key:"workerGeometryType",get:function(){var e,t=null==(e=this.layer)?void 0:e.geometryType;return t?this._geometryTypeRequiresClientGraphicMapping(t)?"polygon":t:null}},{key:"applyEdits",value:function(e){var t=this;return this.load().then((function(){return t._applyEdits(e)}))}},{key:"openPorts",value:function(){var e=this;return this.load().then((function(){return e._connection.openPorts()}))}},{key:"queryFeatures",value:function(){var e=Object(o.a)(a.a.mark((function e(t){var r,n,o,s,l,c,u,p,b,d=arguments;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:{},e.next=3,this.load(r);case 3:return e.next=5,this._connection.invoke("queryFeatures",t?t.toJSON():null,r);case 5:if(n=e.sent,Object(rt.a)(t,this.layer.spatialReference,n),o=nt.default.fromJSON(n),this._requiresClientGraphicMapping()){e.next=10;break}return e.abrupt("return",o);case 10:s=this.layer.objectIdField,l=Object(i.a)(o.features);try{for(l.s();!(c=l.n()).done;)u=c.value,p=u.attributes[s],(b=this._idToClientGraphic.get(p))&&(u.geometry=b.geometry)}catch(a){l.e(a)}finally{l.f()}return e.abrupt("return",(o.geometryType=this.layer.geometryType,o));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queryFeaturesJSON",value:function(){var e=Object(o.a)(a.a.mark((function e(t){var r,i,n=arguments;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.length>1&&void 0!==n[1]?n[1]:{},!this._requiresClientGraphicMapping()){e.next=3;break}throw new S.a("query-features-json:unsupported","Cannot query in JSON format for client only geometry types (mesh and extent)");case 3:return e.next=5,this.load(r);case 5:return e.next=7,this._connection.invoke("queryFeatures",t?t.toJSON():null,r);case 7:return i=e.sent,e.abrupt("return",(Object(rt.a)(t,this.layer.spatialReference,i),i));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queryFeatureCount",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.load(r).then((function(){return t._connection.invoke("queryFeatureCount",e?e.toJSON():null,r)}))}},{key:"queryObjectIds",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.load(r).then((function(){return t._connection.invoke("queryObjectIds",e?e.toJSON():null,r)}))}},{key:"queryExtent",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.load(r).then((function(){return t._connection.invoke("queryExtent",e?e.toJSON():null,r)})).then((function(e){return{count:e.count,extent:We.a.fromJSON(e.extent)}}))}},{key:"querySnapping",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.load(r).then((function(){return t._connection.invoke("querySnapping",e,r)}))}},{key:"_applyEdits",value:function(){var e=Object(o.a)(a.a.mark((function e(t){var r,n,o,s,l,c,u,p,b,d,y,f,j,O,h,v,m;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._connection){e.next=2;break}throw new S.a("feature-layer-source:edit-failure","Memory source not loaded");case 2:return r=this.layer.objectIdField,n=null,o=[],s=[],e.next=7,Promise.all([this._prepareClientMapping(t.addFeatures,null),this._prepareClientMapping(t.updateFeatures,null)]);case 7:if(l=function(e){return"objectId"in e&&null!=e.objectId?e.objectId:"attributes"in e&&null!=e.attributes[r]?e.attributes[r]:null},t.addFeatures&&(n=this._prepareAddFeatures(t.addFeatures)),t.deleteFeatures){c=Object(i.a)(t.deleteFeatures);try{for(c.s();!(u=c.n()).done;)p=u.value,null!=(b=l(p))&&o.push(b)}catch(a){c.e(a)}finally{c.f()}}if(d=t.updateFeatures&&this._idToClientGraphic?new Map:null,t.updateFeatures){y=Object(i.a)(t.updateFeatures);try{for(y.s();!(f=y.n()).done;)j=f.value,s.push(this._serializeFeature(j)),d&&null!=(O=l(j))&&d.set(O,j)}catch(a){y.e(a)}finally{y.f()}}return Object(it.b)(n?n.features:null,s,this.layer.spatialReference),e.next=14,this._connection.invoke("applyEdits",{adds:n?n.features:[],updates:s,deletes:o});case 14:return h=e.sent,v=h.fullExtent,m=h.featureEditResults,e.abrupt("return",(this.fullExtent=v,n&&n.finish(m.uidToObjectId),this._updateClientGraphicIds(d,m),this._createEditsResult(m)));case 18:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_prepareClientMapping",value:function(){var e=Object(o.a)(a.a.mark((function e(t,r){var n,o,s,l;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("mesh"===this.layerOrSourceGeometryType&&!Object(E.i)(t)){e.next=2;break}return e.abrupt("return");case 2:n=[],o=Object(i.a)(t);try{for(o.s();!(s=o.n()).done;)l=s.value.geometry,!Object(E.j)(l)||"mesh"!==l.type||l.hasExtent||l.loaded||n.push(l.load({signal:r}))}catch(a){o.e(a)}finally{o.f()}if(e.t0=n.length,!e.t0){e.next=9;break}return e.next=9,Promise.all(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"_updateClientGraphicIds",value:function(e,t){if(this._idToClientGraphic){if(e){var r,n=Object(i.a)(t.updateResults);try{for(n.s();!(r=n.n()).done;){var a=r.value;if(a.success){var o=e.get(a.objectId);null!=o&&this._addIdToClientGraphic(o)}}}catch(u){n.e(u)}finally{n.f()}}var s,l=Object(i.a)(t.deleteResults);try{for(l.s();!(s=l.n()).done;){var c=s.value;c.success&&this._idToClientGraphic.delete(c.objectId)}}catch(u){l.e(u)}finally{l.f()}}}},{key:"_createEditsResult",value:function(e){return{addFeatureResults:e.addResults?e.addResults.map(this._createFeatureEditResult,this):[],updateFeatureResults:e.updateResults?e.updateResults.map(this._createFeatureEditResult,this):[],deleteFeatureResults:e.deleteResults?e.deleteResults.map(this._createFeatureEditResult,this):[],addAttachmentResults:[],updateAttachmentResults:[],deleteAttachmentResults:[]}}},{key:"_createFeatureEditResult",value:function(e){var t=!0===e.success?null:e.error||{code:void 0,description:void 0};return{objectId:e.objectId,globalId:e.globalId,error:t?new S.a("feature-layer-source:edit-failure",t.description,{code:t.code}):null}}},{key:"_prepareAddFeatures",value:function(e){for(var t=new Map,r=new Array(e.length),i=null,n=0;n<e.length;n++){var a=e[n],o=this._serializeFeature(a);!i&&Object(E.j)(a.geometry)&&(i=a.geometry.type),r[n]=o,t.set("".concat(o.uid),a)}var s=this;return{features:r,inferredGeometryType:i,finish:function(e){var r=s.sourceJSON.objectIdField;for(var i in e){var n=e[i],a=t.get(i);a&&(a.attributes||(a.attributes={}),-1===n?delete a.attributes[r]:a.attributes[r]=n,s._addIdToClientGraphic(a))}}}}},{key:"_addIdToClientGraphic",value:function(e){if(this._idToClientGraphic){var t=this.sourceJSON.objectIdField,r=e.attributes&&e.attributes[t];null!=r&&this._idToClientGraphic.set(r,e)}}},{key:"layerOrSourceGeometryType",get:function(){var e,t,r;return null!=(e=null==(t=this.layer)?void 0:t.geometryType)?e:null==(r=this.sourceJSON)?void 0:r.geometryType}},{key:"_requiresClientGraphicMapping",value:function(){return this._geometryTypeRequiresClientGraphicMapping(this.layerOrSourceGeometryType)}},{key:"_geometryRequiresClientGraphicMapping",value:function(e){return this._geometryTypeRequiresClientGraphicMapping(e.type)}},{key:"_geometryTypeRequiresClientGraphicMapping",value:function(e){return"mesh"===e||"multipatch"===e||"extent"===e}},{key:"_serializeFeature",value:function(e){var t=e.attributes,r=this._geometryForSerialization(e),i=(st++).toString();return r?{uid:i,geometry:r.toJSON(),attributes:t}:{uid:i,attributes:t}}},{key:"_geometryForSerialization",value:function(e){var t=e.geometry;return Object(E.i)(t)?null:this._geometryRequiresClientGraphicMapping(t)?t.extent?at.a.fromExtent(t.extent):null:t}},{key:"_startWorker",value:function(){var e=Object(o.a)(a.a.mark((function e(t){var r,n,o,s,l,c,u,p,b,d,y,f,j,O,h;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(et.a)("MemorySourceWorker",{strategy:Object(F.a)("feature-layers-workers")?"dedicated":"local",signal:t});case 2:return this._connection=e.sent,r=this.layer,n=r.fields,o=r.spatialReference,s=r.objectIdField,l=r.hasM,c=r.hasZ,u=r.timeInfo,p="defaults"===this.layer.originOf("spatialReference"),e.next=6,this._prepareClientMapping(this.items,t);case 6:return b=this._prepareAddFeatures(this.items),this.on("before-changes",(function(e){lt.error("Source modifications will not propagate after layer has been loaded. Please use .applyEdits() instead"),e.preventDefault()})),d={features:b.features,fields:n&&n.map((function(e){return e.toJSON()})),geometryType:ot.c.toJSON(this.workerGeometryType),hasM:"mesh"!==this.layerOrSourceGeometryType&&l,hasZ:"mesh"===this.layerOrSourceGeometryType||c,objectIdField:s,spatialReference:p?null:o&&o.toJSON(),timeInfo:u?u.toJSON():null},e.next=11,this._connection.invoke("load",d,{signal:t});case 11:y=e.sent,f=Object(i.a)(y.warnings);try{for(f.s();!(j=f.n()).done;)O=j.value,lt.warn(O.message,{layer:this.layer,warning:O})}catch(a){f.e(a)}finally{f.f()}y.featureErrors.length&&lt.warn("Encountered ".concat(y.featureErrors.length," validation errors while loading features"),y.featureErrors),h=y.layerDefinition,this._geometryTypeRequiresClientGraphicMapping(b.inferredGeometryType)&&(h.geometryType=ot.c.toJSON(b.inferredGeometryType)),this.sourceJSON=h,this._requiresClientGraphicMapping()&&(this._idToClientGraphic=new Map),b.finish(y.assignedObjectIds);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(Ye.a.LoadableMixin(Object(Xe.b)(w.a)));Object(y.a)([(tt={Type:$e.a,ensureType:Object(B.m)($e.a)},function(e,t){e[t]=tt})],ct.prototype,"itemType",void 0),Object(y.a)([Object(L.b)()],ct.prototype,"type",void 0),Object(y.a)([Object(L.b)({constructOnly:!0})],ct.prototype,"layer",void 0),Object(y.a)([Object(L.b)({readOnly:!0})],ct.prototype,"workerGeometryType",null),Object(y.a)([Object(L.b)()],ct.prototype,"sourceJSON",void 0);var ut,pt=ct=Object(y.a)([Object(V.a)("esri.layers.graphics.sources.MemorySource")],ct),bt=r(724),dt=r(710),yt=r(730),ft=r(721),jt=r(709),Ot=r(756),ht=r(699),vt=r(697),mt=r(716),gt=r(719),wt=r(676),St=r(671),xt=ut=function(e){Object(b.a)(r,e);var t=Object(d.a)(r);function r(e){return Object(l.a)(this,r),t.call(this,e)}return Object(c.a)(r,[{key:"clone",value:function(){var e=this.name,t=this.fields,r=this.isAscending,i=this.isUnique,n=this.description;return new ut({name:e,fields:t,isAscending:r,isUnique:i,description:n})}}]),r}(U.a);Object(y.a)([Object(L.b)({constructOnly:!0})],xt.prototype,"name",void 0),Object(y.a)([Object(L.b)({constructOnly:!0})],xt.prototype,"fields",void 0),Object(y.a)([Object(L.b)({constructOnly:!0})],xt.prototype,"isAscending",void 0),Object(y.a)([Object(L.b)({constructOnly:!0})],xt.prototype,"isUnique",void 0),Object(y.a)([Object(L.b)({constructOnly:!0})],xt.prototype,"description",void 0);xt=ut=Object(y.a)([Object(V.a)("esri.layers.support.FeatureIndex")],xt);var Ft=r(746),kt=r(713),It=r(733),Et=r(728),Tt=r(209),Rt=r(135),Mt=function(e){Object(b.a)(r,e);var t=Object(d.a)(r);function r(e){var i;return Object(l.a)(this,r),(i=t.call(this,e)).shapeAreaField=null,i.shapeLengthField=null,i.units=null,i}return r}(U.a);Object(y.a)([Object(L.b)({type:String,json:{read:{source:"shapeAreaFieldName"}}})],Mt.prototype,"shapeAreaField",void 0),Object(y.a)([Object(L.b)({type:String,json:{read:{source:"shapeLengthFieldName"}}})],Mt.prototype,"shapeLengthField",void 0),Object(y.a)([Object(L.b)({type:String,json:{read:function(e){return Rt.a.read(e)||Rt.j.read(e)}}})],Mt.prototype,"units",void 0);var Ct=Mt=Object(y.a)([Object(V.a)("esri.layers.support.GeometryFieldsInfo")],Mt),Dt=r(675),_t=r(740),Pt=r(745),Lt=new k.a({esriRelCardinalityOneToOne:"one-to-one",esriRelCardinalityOneToMany:"one-to-many",esriRelCardinalityManyToMany:"many-to-many"}),Nt=new k.a({esriRelRoleOrigin:"origin",esriRelRoleDestination:"destination"}),At=function(e){Object(b.a)(r,e);var t=Object(d.a)(r);function r(e){var i;return Object(l.a)(this,r),(i=t.call(this,e)).cardinality=null,i.composite=null,i.id=null,i.keyField=null,i.keyFieldInRelationshipTable=null,i.name=null,i.relatedTableId=null,i.relationshipTableId=null,i.role=null,i}return r}(U.a);Object(y.a)([Object(L.b)({json:{read:Lt.read,write:Lt.write}})],At.prototype,"cardinality",void 0),Object(y.a)([Object(L.b)({json:{read:!0,write:!0}})],At.prototype,"composite",void 0),Object(y.a)([Object(L.b)({json:{read:!0,write:!0}})],At.prototype,"id",void 0),Object(y.a)([Object(L.b)({json:{read:!0,write:!0}})],At.prototype,"keyField",void 0),Object(y.a)([Object(L.b)({json:{read:!0,write:!0}})],At.prototype,"keyFieldInRelationshipTable",void 0),Object(y.a)([Object(L.b)({json:{read:!0,write:!0}})],At.prototype,"name",void 0),Object(y.a)([Object(L.b)({json:{read:!0,write:!0}})],At.prototype,"relatedTableId",void 0),Object(y.a)([Object(L.b)({json:{read:!0,write:!0}})],At.prototype,"relationshipTableId",void 0),Object(y.a)([Object(L.b)({json:{read:Nt.read,write:Nt.write}})],At.prototype,"role",void 0);var Vt=At=Object(y.a)([Object(V.a)("esri.layers.support.Relationship")],At),qt=r(698),Gt=r(673),Ut=r(744),zt=r(747),Bt=r(670),Jt=r(729),Qt=r(720),Wt=r(755),Ht=new k.a({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch"}),Zt={name:"supportsName",size:"supportsSize",contentType:"supportsContentType",keywords:"supportsKeywords",exifInfo:"supportsExifInfo"},Kt="FeatureLayer",$t=I.a.getLogger("esri.layers.FeatureLayer");function Yt(e){return e&&e instanceof w.a}function Xt(e,t,r){return!!(e&&e.hasOwnProperty(t)?e[t]:r)}function er(e,t,r){return e&&e.hasOwnProperty(t)?e[t]:r}var tr=Object(Et.a)();function rr(e,t,r){var i=!(null==r||!r.writeLayerSchema);return{enabled:i,ignoreOrigin:i}}var ir=function(e){Object(b.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(l.a)(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i)))._handles=new x.a,e.capabilities=null,e.charts=null,e.copyright=null,e.datesInUnknownTimezone=!1,e.displayField=null,e.definitionExpression=null,e.dynamicDataSource=null,e.editFieldsInfo=null,e.editingInfo=null,e.elevationInfo=null,e.featureReduction=null,e.fields=null,e.fieldsIndex=null,e.floorInfo=null,e.formTemplate=null,e.fullExtent=null,e.gdbVersion=null,e.geometryFieldsInfo=null,e.geometryType=null,e.hasM=void 0,e.hasZ=void 0,e.heightModelInfo=null,e.historicMoment=null,e.infoFor3D=null,e.isTable=!1,e.labelsVisible=!0,e.labelingInfo=null,e.layerId=void 0,e.legendEnabled=!0,e.minScale=0,e.maxScale=0,e.globalIdField=null,e.objectIdField=null,e.outFields=null,e.path=null,e.popupEnabled=!0,e.popupTemplate=null,e.relationships=null,e.sourceJSON=null,e.returnM=void 0,e.returnZ=void 0,e.screenSizePerspectiveEnabled=!0,e.serviceDefinitionExpression=null,e.spatialReference=Ze.a.WGS84,e.subtypeCode=null,e.templates=null,e.timeInfo=null,e.title=null,e.sublayerTitleMode="item-title",e.trackIdField=null,e.type="feature",e.typeIdField=null,e.types=null,e.indexes=new(w.a.ofType(xt)),e.userIsAdmin=!1,e.version=void 0,e.visible=!0,e}return Object(c.a)(n,[{key:"destroy",value:function(){var e;null==(e=this.source)||e.destroy(),this._handles=Object(E.d)(this._handles)}},{key:"normalizeCtorArgs",value:function(e,t){return"string"==typeof e?Object(s.a)({url:e},t):e}},{key:"load",value:function(e){var t=this,r=Object(E.j)(e)?e.signal:null;if(!(this.portalItem&&this.portalItem.loaded&&this.source)){var i=this.loadFromPortal({supportedTypes:["Feature Service","Feature Collection"]},e).catch(M.u).then(Object(o.a)(a.a.mark((function e(){var i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.url||null!=t.layerId||!/FeatureServer|MapServer\/*$/i.test(t.url)){e.next=5;break}return e.next=3,t._fetchFirstLayerId(r);case 3:null!=(i=e.sent)&&(t.layerId=i);case 5:if(t.url||t._hasMemorySource()){e.next=7;break}throw new S.a("feature-layer:missing-url-or-source","Feature layer must be created with either a url or a source");case 7:return e.t0=t,e.next=10,t.createGraphicsSource(r);case 10:return e.t1=e.sent,e.abrupt("return",e.t0._initLayerProperties.call(e.t0,e.t1));case 12:case"end":return e.stop()}}),e)})))).then((function(){return t.finishLoadEditablePortalLayer(e)}));return this.addResolvingPromise(i),Promise.resolve(this)}this.addResolvingPromise(this.createGraphicsSource(r).then((function(e){return t._initLayerProperties(e)})))}},{key:"readCapabilities",value:function(e,t){return t=t.layerDefinition||t,{attachment:this._readAttachmentCapabilities(t.attachmentProperties),data:this._readDataCapabilities(t),metadata:this._readMetadataCapabilities(t),operations:this._readOperationsCapabilities(t.capabilities||e,t),query:this._readQueryCapabilities(t),queryRelated:this._readQueryRelatedCapabilities(t),editing:this._readEditingCapabilities(t)}}},{key:"createQueryVersion",get:function(){return this.commitProperty("definitionExpression"),this.commitProperty("dynamicDataSource"),this.commitProperty("timeExtent"),this.commitProperty("timeOffset"),this.commitProperty("geometryType"),this.commitProperty("gdbVersion"),this.commitProperty("historicMoment"),this.commitProperty("returnZ"),this.commitProperty("capabilities"),this.commitProperty("returnM"),(this._get("createQueryVersion")||0)+1}},{key:"editingEnabled",get:function(){return!(this.loaded&&!this.capabilities.operations.supportsEditing)&&(this._isOverridden("editingEnabled")?this._get("editingEnabled"):this._hasMemorySource()||this.userHasEditingPrivileges)},set:function(e){null!=e?this._override("editingEnabled",e):this._clearOverride("editingEnabled")}},{key:"readEditingEnabled",value:function(e,t){return this._readEditingEnabled(t,!1)}},{key:"readEditingEnabledFromWebMap",value:function(e,t,r){return this._readEditingEnabled(t,!0,r)}},{key:"writeEditingEnabled",value:function(e,t){this._writeEditingEnabled(e,t,!1)}},{key:"writeEditingEnabledToWebMap",value:function(e,t,r,i){this._writeEditingEnabled(e,t,!0,i)}},{key:"readEditingInfo",value:function(e,t){var r=t.editingInfo;return r?{lastEditDate:null!=r.lastEditDate?new Date(r.lastEditDate):null}:null}},{key:"readFeatureReduction",value:function(e,t){return Object(Ft.b)(e,t)}},{key:"writeWebSceneFeatureReduction",value:function(e,t,r,i){Object(Ft.d)(e,t,"layerDefinition.featureReduction",i)}},{key:"readIsTable",value:function(e,t){return"Table"===(t=t&&t.layerDefinition||t).type||!t.geometryType}},{key:"writeIsTable",value:function(e,t,r,i){null!=i&&i.writeLayerSchema&&Object(R.c)(r,e?"Table":"Feature Layer",t)}},{key:"readMinScale",value:function(e,t){return t.effectiveMinScale||e||0}},{key:"readMaxScale",value:function(e,t){return t.effectiveMaxScale||e||0}},{key:"readGlobalIdFieldFromService",value:function(e,t){if((t=t.layerDefinition||t).globalIdField)return t.globalIdField;if(t.fields){var r,n=Object(i.a)(t.fields);try{for(n.s();!(r=n.n()).done;){var a=r.value;if("esriFieldTypeGlobalID"===a.type)return a.name}}catch(o){n.e(o)}finally{n.f()}}}},{key:"readObjectIdFieldFromService",value:function(e,t){if((t=t.layerDefinition||t).objectIdField)return t.objectIdField;if(t.fields){var r,n=Object(i.a)(t.fields);try{for(n.s();!(r=n.n()).done;){var a=r.value;if("esriFieldTypeOID"===a.type)return a.name}}catch(o){n.e(o)}finally{n.f()}}}},{key:"parsedUrl",get:function(){var e=this.url?Object(P.J)(this.url):null;return null!=e&&(null!=this.dynamicDataSource?e.path=Object(P.y)(e.path,"dynamicLayer"):null!=this.layerId&&(e.path=Object(P.y)(e.path,this.layerId.toString()))),e}},{key:"defaultPopupTemplate",get:function(){return this.createPopupTemplate()}},{key:"renderer",set:function(e){Object(Tt.e)(e,this.fieldsIndex),this._set("renderer",e)}},{key:"readRenderer",value:function(e,t,r){var i=(t=t.layerDefinition||t).drawingInfo&&t.drawingInfo.renderer||void 0;if(i){var n=Object(h.b)(i,t,r)||void 0;return n||$t.error("Failed to create renderer",{rendererDefinition:t.drawingInfo.renderer,layer:this,context:r}),n}if(t.defaultSymbol)return t.types&&t.types.length?new O.a({defaultSymbol:nr(t.defaultSymbol,t,r),field:t.typeIdField,uniqueValueInfos:t.types.map((function(e){return{id:e.id,symbol:nr(e.symbol,e,r)}}))}):new j.a({symbol:nr(t.defaultSymbol,t,r)})}},{key:"source",set:function(e){var t=this._get("source");t!==e&&(Yt(t)&&this._resetMemorySource(t),Yt(e)&&this._initMemorySource(e),this._set("source",e))}},{key:"castSource",value:function(e){return e?Array.isArray(e)||e instanceof w.a?new pt({layer:this,items:e}):e:null}},{key:"readSource",value:function(e,t){var r=nt.default.fromJSON(t.featureSet);return new pt({layer:this,items:r&&r.features||[]})}},{key:"readServiceDefinitionExpression",value:function(e,t){return t.definitionQuery||t.definitionExpression}},{key:"readTemplates",value:function(e,t){var r=t.editFieldsInfo,i=r&&r.creatorField,n=r&&r.editorField;return e=e&&e.map((function(e){return kt.a.fromJSON(e)})),this._fixTemplates(e,i),this._fixTemplates(e,n),e}},{key:"readTitle",value:function(e,t){var r=t.layerDefinition&&t.layerDefinition.name||t.name,i=t.title||t.layerDefinition&&t.layerDefinition.title;if(r){var n=this.portalItem&&this.portalItem.title;if("item-title"===this.sublayerTitleMode)return this.url?Object(wt.i)(this.url,r):r;var a=r;if(!a&&this.url){var o=Object(wt.e)(this.url);Object(E.j)(o)&&(a=o.title)}if(!a)return;return"item-title-and-service-name"===this.sublayerTitleMode&&n&&n!==a&&(a=n+" - "+a),Object(wt.a)(a)}if("item-title"===this.sublayerTitleMode&&i)return i}},{key:"readTitleFromWebMap",value:function(e,t){return t.title||t.layerDefinition&&t.layerDefinition.name}},{key:"readTypeIdField",value:function(e,t){var r=(t=t.layerDefinition||t).typeIdField;if(r&&t.fields){r=r.toLowerCase();var i=t.fields.find((function(e){return e.name.toLowerCase()===r}));i&&(r=i.name)}return r}},{key:"readTypes",value:function(e,t){var r=this;e=(t=t.layerDefinition||t).types;var i=t.editFieldsInfo,n=i&&i.creatorField,a=i&&i.editorField;return e&&e.map((function(e){return e=It.a.fromJSON(e),r._fixTemplates(e.templates,n),r._fixTemplates(e.templates,a),e}))}},{key:"url",set:function(e){var t=Object(wt.h)({layer:this,url:e,nonStandardUrlAllowed:!0,logger:$t});this._set("url",t.url),null!=t.layerId&&this._set("layerId",t.layerId)}},{key:"writeUrl",value:function(e,t,r,i){Object(wt.j)(this,e,null,t,i)}},{key:"readVersion",value:function(e,t){return t.currentVersion?t.currentVersion:t.hasOwnProperty("capabilities")||t.hasOwnProperty("drawingInfo")||t.hasOwnProperty("hasAttachments")||t.hasOwnProperty("htmlPopupType")||t.hasOwnProperty("relationships")||t.hasOwnProperty("timeInfo")||t.hasOwnProperty("typeIdField")||t.hasOwnProperty("types")?10:9.3}},{key:"readVisible",value:function(e,t){return t.layerDefinition&&null!=t.layerDefinition.defaultVisibility?!!t.layerDefinition.defaultVisibility:null!=t.visibility?!!t.visibility:void 0}},{key:"addAttachment",value:function(e,t){var r=this;return this.load().then((function(){return r._checkAttachmentSupport(e)})).then((function(){if(!("addAttachment"in r.source))throw new S.a(Kt,"Layer source does not support addAttachment capability");return r.source.addAttachment(e,t)}))}},{key:"updateAttachment",value:function(e,t,r){var i=this;return this.load().then((function(){return i._checkAttachmentSupport(e)})).then((function(){if(!("updateAttachment"in i.source))throw new S.a(Kt,"Layer source does not support updateAttachment capability");return i.source.updateAttachment(e,t,r)}))}},{key:"applyEdits",value:function(){var e=Object(o.a)(a.a.mark((function e(t,i){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.e(28).then(r.bind(null,1091));case 2:return n=e.sent,e.next=5,this.load();case 5:return e.abrupt("return",n.applyEdits(this,this.source,t,i));case 6:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"on",value:function(e,t){return Object(u.a)(Object(p.a)(n.prototype),"on",this).call(this,e,t)}},{key:"createPopupTemplate",value:function(e){return Object(Wt.a)(this,e)}},{key:"createGraphicsSource",value:function(){var e=Object(o.a)(a.a.mark((function e(t){var i,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._hasMemorySource()){e.next=2;break}return e.abrupt("return",this.source.load({signal:t}));case 2:return e.next=4,Object(M.y)(Promise.all([r.e(6),r.e(24),r.e(73)]).then(r.bind(null,1092)),t);case 4:return i=e.sent,n=i.default,e.abrupt("return",new n({layer:this}).load({signal:t}));case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createQuery",value:function(){var e=new Bt.a,t=this.get("capabilities.data");e.dynamicDataSource=this.dynamicDataSource,e.gdbVersion=this.gdbVersion,e.historicMoment=this.historicMoment,e.returnGeometry=!0,t&&(t.supportsZ&&null!=this.returnZ&&(e.returnZ=this.returnZ),t.supportsM&&null!=this.returnM&&(e.returnM=this.returnM)),e.outFields=["*"],e.where=this.definitionExpression||"1=1";var r=this.timeOffset,i=this.timeExtent;return e.timeExtent=null!=r&&null!=i?i.offset(-r.value,r.unit):i||null,e.multipatchOption="multipatch"===this.geometryType?"xyFootprint":null,e}},{key:"deleteAttachments",value:function(e,t){var r=this;return this.load().then((function(){return r._checkAttachmentSupport(e)})).then((function(){if(!("deleteAttachments"in r.source))throw new S.a(Kt,"Layer source does not support deleteAttachments capability");return r.source.deleteAttachments(e,t)}))}},{key:"fetchRecomputedExtents",value:function(e){var t=this;return this.load({signal:null==e?void 0:e.signal}).then((function(){if(t.source.fetchRecomputedExtents)return t.source.fetchRecomputedExtents(e);throw new S.a(Kt,"Layer source does not support fetchUpdates capability")}))}},{key:"getFeatureType",value:function(e){var t=this.typeIdField,r=this.types;if(!t||!e)return null;var i=e.attributes?e.attributes[t]:void 0;if(null==i)return null;var n=null;return r.some((function(e){var t=e.id;return null!=t&&(t.toString()===i.toString()&&(n=e),!!n)})),n}},{key:"getFieldDomain",value:function(e,t){var r=t&&t.feature,i=this.getFeatureType(r);if(i){var n=i.domains&&i.domains[e];if(n&&"inherited"!==n.type)return n}return this._getLayerDomain(e)}},{key:"getField",value:function(e){return this.fieldsIndex.get(e)}},{key:"queryAttachments",value:function(e,t){var r=this;return e=zt.a.from(e),this.load().then((function(){if(!r.get("capabilities.data.supportsAttachment"))throw new S.a(Kt,"this layer doesn't support attachments");var t=e,i=t.attachmentTypes,n=t.objectIds,a=t.globalIds,o=t.num,s=t.size,l=t.start,c=t.where;if(!r.get("capabilities.operations.supportsQueryAttachments")){var u=n&&n.length>1,p=i&&i.length,b=a&&a.length,d=s&&s.length;if(u||p||b||d||o||l||c)throw new S.a(Kt,"when 'supportsQueryAttachments' is false, only objectIds of length 1 are supported",e)}if(!(n&&n.length||c))throw new S.a(Kt,"'objectIds' or 'where' are required to perform attachment query",e);if(!("queryAttachments"in r.source))throw new S.a(Kt,"Layer source does not support queryAttachments capability",e);return r.source.queryAttachments(e)}))}},{key:"queryFeatures",value:function(e,t){var r=this;return this.load().then((function(){return r.source.queryFeatures(Bt.a.from(e)||r.createQuery(),t)})).then((function(e){if(null!=e&&e.features){var t,n=Object(i.a)(e.features);try{for(n.s();!(t=n.n()).done;){var a=t.value;a.layer=a.sourceLayer=r}}catch(o){n.e(o)}finally{n.f()}}return e}))}},{key:"queryObjectIds",value:function(e,t){var r=this;return this.load().then((function(){if(r.source.queryObjectIds)return r.source.queryObjectIds(Bt.a.from(e)||r.createQuery(),t);throw new S.a(Kt,"Layer source does not support queryObjectIds capability")}))}},{key:"queryFeatureCount",value:function(e,t){var r=this;return this.load().then((function(){if(r.source.queryFeatureCount)return r.source.queryFeatureCount(Bt.a.from(e)||r.createQuery(),t);throw new S.a(Kt,"Layer source does not support queryFeatureCount capability")}))}},{key:"queryExtent",value:function(e,t){var r=this;return this.load().then((function(){if(r.source.queryExtent)return r.source.queryExtent(Bt.a.from(e)||r.createQuery(),t);throw new S.a(Kt,"Layer source does not support queryExtent capability")}))}},{key:"queryRelatedFeatures",value:function(e,t){var r=this;return this.load().then((function(){if("queryRelatedFeatures"in r.source)return r.source.queryRelatedFeatures(Jt.a.from(e),t);throw new S.a(Kt,"Layer source does not support queryRelatedFeatures capability")}))}},{key:"queryRelatedFeaturesCount",value:function(e,t){var r=this;return this.load().then((function(){if("queryRelatedFeaturesCount"in r.source)return r.source.queryRelatedFeaturesCount(Jt.a.from(e),t);throw new S.a(Kt,"Layer source does not support queryRelatedFeaturesCount capability")}))}},{key:"queryTopFeatures",value:function(e,t){var r=this;return this.load().then((function(){if("queryTopFeatures"in r.source&&r.get("capabilities.query.supportsTopFeaturesQuery"))return r.source.queryTopFeatures(Qt.a.from(e),t).then((function(e){if(null!=e&&e.features){var t,n=Object(i.a)(e.features);try{for(n.s();!(t=n.n()).done;){var a=t.value;a.layer=a.sourceLayer=r}}catch(o){n.e(o)}finally{n.f()}}return e}));throw new S.a(Kt,"Layer source does not support queryTopFeatures capability")}))}},{key:"queryTopObjectIds",value:function(e,t){var r=this;return this.load().then((function(){if("queryTopObjectIds"in r.source&&r.get("capabilities.query.supportsTopFeaturesQuery"))return r.source.queryTopObjectIds(Qt.a.from(e),t);throw new S.a(Kt,"Layer source does not support queryTopObjectIds capability")}))}},{key:"queryTopFeaturesExtent",value:function(e,t){var r=this;return this.load().then((function(){if("queryTopExtents"in r.source&&r.get("capabilities.query.supportsTopFeaturesQuery"))return r.source.queryTopExtents(Qt.a.from(e),t);throw new S.a(Kt,"Layer source does not support queryTopExtents capability")}))}},{key:"queryTopFeatureCount",value:function(e,t){var r=this;return this.load().then((function(){if("queryTopCount"in r.source&&r.get("capabilities.query.supportsTopFeaturesQuery"))return r.source.queryTopCount(Qt.a.from(e),t);throw new S.a(Kt,"Layer source does not support queryFeatureCount capability")}))}},{key:"read",value:function(e,t){var r=e.featureCollection;if(r){var i=r.layers;i&&1===i.length&&(Object(u.a)(Object(p.a)(n.prototype),"read",this).call(this,i[0],t),null!=r.showLegend&&Object(u.a)(Object(p.a)(n.prototype),"read",this).call(this,{showLegend:r.showLegend},t))}Object(u.a)(Object(p.a)(n.prototype),"read",this).call(this,e,t),t&&"service"===t.origin&&this.revert(["objectIdField","fields","timeInfo","spatialReference"],"service")}},{key:"write",value:function(e,t){var r,i,a=(t=Object(s.a)(Object(s.a)({},t),{},{writeLayerSchema:null!=(r=null==(i=t)?void 0:i.writeLayerSchema)?r:this._hasMemorySource()})).origin,o=t.layerContainerType,l=t.messages;if(this.isTable){if("web-scene"===a||"web-map"===a&&"tables"!==o)return l&&l.push(new S.a("layer:unsupported","Layer (".concat(this.title,", ").concat(this.id,") of type '").concat(this.declaredClass,"' using a Table source cannot be written to web scenes and web maps"),{layer:this})),null;if(this._hasMemorySource())return l&&l.push(new S.a("layer:unsupported","Layer (".concat(this.title,", ").concat(this.id,") of type '").concat(this.declaredClass,"' using an in-memory Table source cannot be written to web scenes and web maps"),{layer:this})),null}else if(this.loaded&&"web-map"===a&&"tables"===o)return l&&l.push(new S.a("layer:unsupported","Layer (".concat(this.title,", ").concat(this.id,") of type '").concat(this.declaredClass,"' using a non-table source cannot be written to tables in web maps"),{layer:this})),null;return Object(u.a)(Object(p.a)(n.prototype),"write",this).call(this,e,t)}},{key:"_readEditingEnabled",value:function(e,t,r){var i,n=null==(i=e.layerDefinition)?void 0:i.capabilities;return n?this._hasEditingCapability(n):(n=e.capabilities,t&&"web-map"===(null==r?void 0:r.origin)&&!this._hasMemorySource()&&n?this._hasEditingCapability(n):void 0)}},{key:"_hasEditingCapability",value:function(e){return e.toLowerCase().split(",").map((function(e){return e.trim()})).includes("editing")}},{key:"_writeEditingEnabled",value:function(e,t,r,i){if(!e){var n,a,o=null!=(n=this.capabilities)&&null!=(a=n.operations)&&a.supportsSync?"Query,Sync":"Query";Object(R.c)("layerDefinition.capabilities",o,t),!r||null!=i&&i.writeLayerSchema||(t.capabilities=o)}}},{key:"_checkAttachmentSupport",value:function(e){var t=e.attributes,r=this.objectIdField;return this.get("capabilities.data.supportsAttachment")?e?t?t[r]?void 0:Promise.reject(new S.a(Kt,"feature is missing the identifying attribute ".concat(r))):Promise.reject(new S.a(Kt,"'attributes' are required on a feature to query attachments")):Promise.reject(new S.a(Kt,"A feature is required to add/delete/update attachments")):Promise.reject(new S.a(Kt,"this layer doesn't support attachments"))}},{key:"_getLayerDomain",value:function(e){var t=this.fieldsIndex.get(e);return t?t.domain:null}},{key:"_fetchFirstLayerId",value:function(e){return Object(m.default)(this.url,{query:Object(s.a)(Object(s.a)({f:"json"},this.customParameters),{},{token:this.apiKey}),responseType:"json",signal:e}).then((function(e){var t=e.data;if(t)return Array.isArray(t.layers)&&t.layers.length>0?t.layers[0].id:Array.isArray(t.tables)&&t.tables.length>0?t.tables[0].id:void 0}))}},{key:"_initLayerProperties",value:function(){var e=Object(o.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(this._set("source",t),t.sourceJSON&&(this.sourceJSON=t.sourceJSON,this.read(t.sourceJSON,{origin:"service",url:this.parsedUrl})),this._verifySource(),this._verifyFields(),Object(Tt.e)(this.renderer,this.fieldsIndex),Object(Tt.f)(this.timeInfo,this.fieldsIndex),Object(Ut.a)(this,{origin:"service"})));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"hasDataChanged",value:function(){var e=Object(o.a)(a.a.mark((function e(){var t,r,i,n,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==(t=this.source)||!t.refresh){e.next=13;break}return e.prev=1,e.next=4,null==(r=this.source)?void 0:r.refresh();case 4:if(i=e.sent,n=i.hasUpdates,o=i.updates,Object(E.j)(o)&&(this.sourceJSON=Object(s.a)(Object(s.a)({},this.sourceJSON),o),this.read(o,{origin:"service",url:this.parsedUrl})),!n){e.next=9;break}return e.abrupt("return",!0);case 9:e.next=13;break;case 11:e.prev=11,e.t0=e.catch(1);case 13:if(!this.definitionExpression){e.next=22;break}return e.prev=14,e.next=17,C(this.definitionExpression,this.fieldsIndex);case 17:return e.abrupt("return",e.sent.hasDateFunctions);case 20:e.prev=20,e.t1=e.catch(14);case 22:return e.abrupt("return",!1);case 23:case"end":return e.stop()}}),e,this,[[1,11],[14,20]])})));return function(){return e.apply(this,arguments)}}()},{key:"_verifyFields",value:function(){var e=this.parsedUrl&&this.parsedUrl.path||"undefined";this.objectIdField||console.log("FeatureLayer: 'objectIdField' property is not defined (url: "+e+")"),this.isTable||this._hasMemorySource()||-1!==e.search(/\/FeatureServer\//i)||this.fields&&this.fields.some((function(e){return"geometry"===e.type}))||console.log("FeatureLayer: unable to find field of type 'geometry' in the layer 'fields' list. If you are using a map service layer, features will not have geometry (url: "+e+")")}},{key:"_fixTemplates",value:function(e,t){e&&e.forEach((function(e){var r=e.prototype&&e.prototype.attributes;r&&t&&delete r[t]}))}},{key:"_verifySource",value:function(){if(this._hasMemorySource()){if(this.url)throw new S.a("feature-layer:mixed-source-and-url","FeatureLayer cannot be created with both an in-memory source and a url")}else if(!this.url)throw new S.a("feature-layer:source-or-url-required","FeatureLayer requires either a url, a valid portal item or a source")}},{key:"_initMemorySource",value:function(e){var t=this;e.forEach((function(e){e.layer=t,e.sourceLayer=t})),this._handles.add([e.on("after-add",(function(e){e.item.layer=t,e.item.sourceLayer=t})),e.on("after-remove",(function(e){e.item.layer=null,e.item.sourceLayer=null}))],"fl-source")}},{key:"_resetMemorySource",value:function(e){e.forEach((function(e){e.layer=null,e.sourceLayer=null})),this._handles.remove("fl-source")}},{key:"_hasMemorySource",value:function(){return!(this.url||!this.source)}},{key:"_readAttachmentCapabilities",value:function(e){var t={supportsName:!1,supportsSize:!1,supportsContentType:!1,supportsKeywords:!1,supportsExifInfo:!1};return e&&Array.isArray(e)&&e.forEach((function(e){var r=Zt[e.name];r&&(t[r]=!!e.isEnabled)})),t}},{key:"_readDataCapabilities",value:function(e){return{isVersioned:Xt(e,"isDataVersioned",!1),supportsAttachment:Xt(e,"hasAttachments",!1),supportsM:Xt(e,"hasM",!1),supportsZ:Xt(e,"hasZ",!1)}}},{key:"_readMetadataCapabilities",value:function(e){return{supportsAdvancedFieldProperties:Xt(e,"supportsFieldDescriptionProperty",!1)}}},{key:"_readOperationsCapabilities",value:function(e,t){var r=e?e.toLowerCase().split(",").map((function(e){return e.trim()})):[],i=r.includes("editing")&&!t.datesInUnknownTimezone,n=i&&r.includes("create"),a=i&&r.includes("delete"),o=i&&r.includes("update"),s=r.includes("changetracking");return i&&!(n||a||o)&&(n=a=o=!0),{supportsCalculate:Xt(t,"supportsCalculate",!1),supportsTruncate:Xt(t,"supportsTruncate",!1),supportsValidateSql:Xt(t,"supportsValidateSql",!1),supportsAdd:n,supportsDelete:a,supportsEditing:i,supportsChangeTracking:s,supportsQuery:r.includes("query"),supportsQueryAttachments:Xt(t.advancedQueryCapabilities,"supportsQueryAttachments",!1),supportsResizeAttachments:Xt(t,"supportsAttachmentsResizing",!1),supportsSync:r.includes("sync"),supportsUpdate:o,supportsExceedsLimitStatistics:Xt(t,"supportsExceedsLimitStatistics",!1)}}},{key:"_readQueryCapabilities",value:function(e){var t,r=e.advancedQueryCapabilities,i=e.ownershipBasedAccessControlForFeatures,n=e.archivingInfo,a=null==(t=this.url)?void 0:t.includes("MapServer"),o=!Object(F.a)("mapserver-pbf-enabled")&&a&&this.version<10.81,s=(e.supportedQueryFormats||"").split(",").reduce((function(e,t){var r=t.toLowerCase().trim();return r&&e.add(r),e}),new Set);return{supportsStatistics:Xt(r,"supportsStatistics",e.supportsStatistics),supportsPercentileStatistics:Xt(r,"supportsPercentileStatistics",!1),supportsCentroid:Xt(r,"supportsReturningGeometryCentroid",!1),supportsDistance:Xt(r,"supportsQueryWithDistance",!1),supportsDistinct:Xt(r,"supportsDistinct",e.supportsAdvancedQueries),supportsExtent:Xt(r,"supportsReturningQueryExtent",!1),supportsGeometryProperties:Xt(r,"supportsReturningGeometryProperties",!1),supportsHavingClause:Xt(r,"supportsHavingClause",!1),supportsOrderBy:Xt(r,"supportsOrderBy",e.supportsAdvancedQueries),supportsPagination:Xt(r,"supportsPagination",!1),supportsQuantization:Xt(e,"supportsCoordinatesQuantization",!1),supportsQuantizationEditMode:Xt(e,"supportsQuantizationEditMode",!1),supportsQueryGeometry:Xt(e,"supportsReturningQueryGeometry",!1),supportsResultType:Xt(r,"supportsQueryWithResultType",!1),supportsMaxRecordCountFactor:Xt(r,"supportsMaxRecordCountFactor",!1),supportsSqlExpression:Xt(r,"supportsSqlExpression",!1),supportsStandardizedQueriesOnly:Xt(e,"useStandardizedQueries",!1),supportsTopFeaturesQuery:Xt(r,"supportsTopFeaturesQuery",!1),supportsQueryByOthers:Xt(i,"allowOthersToQuery",!0),supportsHistoricMoment:Xt(n,"supportsQueryWithHistoricMoment",!1),supportsFormatPBF:!o&&s.has("pbf"),supportsDisjointSpatialRelationship:Xt(r,"supportsDisjointSpatialRel",!1),supportsCacheHint:Xt(r,"supportsQueryWithCacheHint",!1),maxRecordCountFactor:er(e,"maxRecordCountFactor",void 0),maxRecordCount:er(e,"maxRecordCount",void 0),standardMaxRecordCount:er(e,"standardMaxRecordCount",void 0),tileMaxRecordCount:er(e,"tileMaxRecordCount",void 0)}}},{key:"_readQueryRelatedCapabilities",value:function(e){var t=e.advancedQueryCapabilities,r=Xt(t,"supportsAdvancedQueryRelated",!1);return{supportsPagination:Xt(t,"supportsQueryRelatedPagination",!1),supportsCount:r,supportsOrderBy:r}}},{key:"_readEditingCapabilities",value:function(e){var t=e.ownershipBasedAccessControlForFeatures;return{supportsGeometryUpdate:Xt(e,"allowGeometryUpdates",!0),supportsGlobalId:Xt(e,"supportsApplyEditsWithGlobalIds",!1),supportsReturnServiceEditsInSourceSpatialReference:Xt(e,"supportsReturnServiceEditsInSourceSR",!1),supportsRollbackOnFailure:Xt(e,"supportsRollbackOnFailureParameter",!1),supportsUpdateWithoutM:Xt(e,"allowUpdateWithoutMValues",!1),supportsUploadWithItemId:Xt(e,"supportsAttachmentsByUploadId",!1),supportsDeleteByAnonymous:Xt(t,"allowAnonymousToDelete",!0),supportsDeleteByOthers:Xt(t,"allowOthersToDelete",!0),supportsUpdateByAnonymous:Xt(t,"allowAnonymousToUpdate",!0),supportsUpdateByOthers:Xt(t,"allowOthersToUpdate",!0)}}}]),n}(Object(yt.a)(Object(Ot.a)(Object(gt.a)(Object(mt.a)(Object(vt.a)(Object(dt.a)(Object(jt.a)(Object(ht.a)(Object(T.a)(Object(ft.a)(Object(bt.a)(Ke.a))))))))))));Object(y.a)([Object(L.b)({readOnly:!0,json:{read:!1}})],ir.prototype,"capabilities",void 0),Object(y.a)([Object(A.a)("service","capabilities",["advancedQueryCapabilities","allowGeometryUpdates","allowUpdateWithoutMValues","archivingInfo","capabilities","datesInUnknownTimezone","hasAttachments","hasM","hasZ","maxRecordCount","maxRecordCountFactor","ownershipBasedAccessControlForFeatures","standardMaxRecordCount","supportedQueryFormats","supportsAdvancedQueries","supportsApplyEditsWithGlobalIds","supportsAttachmentsByUploadId","supportsAttachmentsResizing","supportsCalculate","supportsCoordinatesQuantization","supportsExceedsLimitStatistics","supportsFieldDescriptionProperty","supportsQuantizationEditMode","supportsRollbackOnFailureParameter","supportsStatistics","supportsTruncate","supportsValidateSql","tileMaxRecordCount","useStandardizedQueries"])],ir.prototype,"readCapabilities",null),Object(y.a)([Object(L.b)({json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],ir.prototype,"charts",void 0),Object(y.a)([Object(L.b)({readOnly:!0})],ir.prototype,"createQueryVersion",null),Object(y.a)([Object(L.b)({type:String,json:{read:{source:"layerDefinition.copyrightText"},origins:{service:{read:{source:"copyrightText"}}}}})],ir.prototype,"copyright",void 0),Object(y.a)([Object(L.b)({type:Boolean})],ir.prototype,"datesInUnknownTimezone",void 0),Object(y.a)([Object(L.b)({type:String,json:{read:{source:"layerDefinition.displayField"},origins:{service:{read:{source:"displayField"}}}}})],ir.prototype,"displayField",void 0),Object(y.a)([Object(L.b)({type:String,json:{origins:{service:{read:!1,write:!1}},name:"layerDefinition.definitionExpression",write:{enabled:!0,allowNull:!0}}})],ir.prototype,"definitionExpression",void 0),Object(y.a)([Object(L.b)({types:g.e,readOnly:!0})],ir.prototype,"defaultSymbol",void 0),Object(y.a)([Object(L.b)({type:Gt.a})],ir.prototype,"dynamicDataSource",void 0),Object(y.a)([Object(L.b)({readOnly:!0})],ir.prototype,"editFieldsInfo",void 0),Object(y.a)([Object(L.b)({type:Boolean})],ir.prototype,"editingEnabled",null),Object(y.a)([Object(A.a)(["portal-item","web-scene"],"editingEnabled",["layerDefinition.capabilities"])],ir.prototype,"readEditingEnabled",null),Object(y.a)([Object(A.a)("web-map","editingEnabled",["capabilities","layerDefinition.capabilities"])],ir.prototype,"readEditingEnabledFromWebMap",null),Object(y.a)([Object(q.a)(["portal-item","web-scene"],"editingEnabled",{"layerDefinition.capabilities":{type:String}})],ir.prototype,"writeEditingEnabled",null),Object(y.a)([Object(q.a)("web-map","editingEnabled",{capabilities:{type:String},"layerDefinition.capabilities":{type:String}})],ir.prototype,"writeEditingEnabledToWebMap",null),Object(y.a)([Object(L.b)({readOnly:!0})],ir.prototype,"editingInfo",void 0),Object(y.a)([Object(A.a)("editingInfo")],ir.prototype,"readEditingInfo",null),Object(y.a)([Object(L.b)(St.b)],ir.prototype,"elevationInfo",void 0),Object(y.a)([Object(L.b)(Ft.a)],ir.prototype,"featureReduction",void 0),Object(y.a)([Object(A.a)("featureReduction",["layerDefinition.featureReduction"])],ir.prototype,"readFeatureReduction",null),Object(y.a)([Object(q.a)("web-scene","featureReduction",{"layerDefinition.featureReduction":{types:Ft.c}})],ir.prototype,"writeWebSceneFeatureReduction",null),Object(y.a)([Object(L.b)(Object(s.a)(Object(s.a)({},tr.fields),{},{json:{read:{source:"layerDefinition.fields"},origins:{service:{read:!0},"web-map":{write:{target:"layerDefinition.fields",overridePolicy:rr}}}}}))],ir.prototype,"fields",void 0),Object(y.a)([Object(L.b)(tr.fieldsIndex)],ir.prototype,"fieldsIndex",void 0),Object(y.a)([Object(L.b)({type:Pt.a,json:{read:{source:"layerDefinition.floorInfo"},write:{target:"layerDefinition.floorInfo"}}})],ir.prototype,"floorInfo",void 0),Object(y.a)([Object(L.b)({type:Qe,json:{name:"formInfo",write:!0,origins:{"web-scene":{read:!1,write:!1}}}})],ir.prototype,"formTemplate",void 0),Object(y.a)([Object(L.b)({type:We.a,json:{origins:{service:{read:{source:"extent"}}},read:{source:"layerDefinition.extent"}}})],ir.prototype,"fullExtent",void 0),Object(y.a)([Object(L.b)()],ir.prototype,"gdbVersion",void 0),Object(y.a)([Object(L.b)({readOnly:!0,type:Ct,json:{read:{source:"geometryProperties"}}})],ir.prototype,"geometryFieldsInfo",void 0),Object(y.a)([Object(L.b)({type:["point","polygon","polyline","multipoint","multipatch","mesh"],json:{origins:{service:{read:Ht.read},"web-map":{write:{target:"layerDefinition.geometryType",overridePolicy:rr,writer:function(e,t,r){var i=e?Ht.toJSON(e):null;i&&Object(R.c)(r,i,t)}}}},read:{source:"layerDefinition.geometryType",reader:Ht.read}}})],ir.prototype,"geometryType",void 0),Object(y.a)([Object(L.b)({type:Boolean,json:{origins:{service:{read:!0}},read:{source:"layerDefinition.hasM"}}})],ir.prototype,"hasM",void 0),Object(y.a)([Object(L.b)({type:Boolean,json:{origins:{service:{read:!0}},read:{source:"layerDefinition.hasZ"}}})],ir.prototype,"hasZ",void 0),Object(y.a)([Object(L.b)({readOnly:!0,type:He.a})],ir.prototype,"heightModelInfo",void 0),Object(y.a)([Object(L.b)({type:Date})],ir.prototype,"historicMoment",void 0),Object(y.a)([Object(L.b)(St.c)],ir.prototype,"id",void 0),Object(y.a)([Object(L.b)({readOnly:!0,json:{origins:{service:{read:!0}},read:!1}})],ir.prototype,"infoFor3D",void 0),Object(y.a)([Object(L.b)({readOnly:!0,json:{origins:{"web-map":{write:{target:"layerDefinition.type"}}}}})],ir.prototype,"isTable",void 0),Object(y.a)([Object(A.a)("service","isTable",["type","geometryType"]),Object(A.a)("isTable",["layerDefinition.type","layerDefinition.geometryType"])],ir.prototype,"readIsTable",null),Object(y.a)([Object(q.a)("web-map","isTable")],ir.prototype,"writeIsTable",null),Object(y.a)([Object(L.b)(St.d)],ir.prototype,"labelsVisible",void 0),Object(y.a)([Object(L.b)({type:[Dt.a],json:{origins:{service:{read:{source:"drawingInfo.labelingInfo",reader:_t.a},write:{target:"drawingInfo.labelingInfo",enabled:!1}}},read:{source:"layerDefinition.drawingInfo.labelingInfo",reader:_t.a},write:{target:"layerDefinition.drawingInfo.labelingInfo"}}})],ir.prototype,"labelingInfo",void 0),Object(y.a)([Object(L.b)(St.i)],ir.prototype,"opacity",void 0),Object(y.a)([Object(L.b)({type:Number,json:{origins:{service:{read:{source:"id"}}},read:!1}})],ir.prototype,"layerId",void 0),Object(y.a)([Object(L.b)(St.e)],ir.prototype,"legendEnabled",void 0),Object(y.a)([Object(L.b)({type:["show","hide"]})],ir.prototype,"listMode",void 0),Object(y.a)([Object(L.b)(St.g)],ir.prototype,"minScale",void 0),Object(y.a)([Object(A.a)("service","minScale",["minScale","effectiveMinScale"])],ir.prototype,"readMinScale",null),Object(y.a)([Object(L.b)(St.f)],ir.prototype,"maxScale",void 0),Object(y.a)([Object(A.a)("service","maxScale",["maxScale","effectiveMaxScale"])],ir.prototype,"readMaxScale",null),Object(y.a)([Object(L.b)({type:String})],ir.prototype,"globalIdField",void 0),Object(y.a)([Object(A.a)("globalIdField",["layerDefinition.globalIdField","layerDefinition.fields"]),Object(A.a)("service","globalIdField",["globalIdField","fields"])],ir.prototype,"readGlobalIdFieldFromService",null),Object(y.a)([Object(L.b)({type:String,json:{origins:{"web-map":{write:{target:"layerDefinition.objectIdField",overridePolicy:rr}}}}})],ir.prototype,"objectIdField",void 0),Object(y.a)([Object(A.a)("objectIdField",["layerDefinition.objectIdField","layerDefinition.fields"]),Object(A.a)("service","objectIdField",["objectIdField","fields"])],ir.prototype,"readObjectIdFieldFromService",null),Object(y.a)([Object(L.b)({value:"ArcGISFeatureLayer",type:["ArcGISFeatureLayer"]})],ir.prototype,"operationalLayerType",void 0),Object(y.a)([Object(L.b)(tr.outFields)],ir.prototype,"outFields",void 0),Object(y.a)([Object(L.b)({readOnly:!0})],ir.prototype,"parsedUrl",null),Object(y.a)([Object(L.b)({type:String,json:{origins:{"web-scene":{read:!0,write:!0}},read:!1}})],ir.prototype,"path",void 0),Object(y.a)([Object(L.b)(St.j)],ir.prototype,"popupEnabled",void 0),Object(y.a)([Object(L.b)({type:f.a,json:{read:{source:"popupInfo"},write:{target:"popupInfo"}}})],ir.prototype,"popupTemplate",void 0),Object(y.a)([Object(L.b)({readOnly:!0})],ir.prototype,"defaultPopupTemplate",null),Object(y.a)([Object(L.b)({type:[Vt],readOnly:!0})],ir.prototype,"relationships",void 0),Object(y.a)([Object(L.b)({types:v.a,json:{origins:{service:{write:{target:"drawingInfo.renderer",enabled:!1}},"web-scene":{types:v.b,write:{target:"layerDefinition.drawingInfo.renderer",writer:h.c}}},write:{target:"layerDefinition.drawingInfo.renderer",overridePolicy:function(e,t,r){return{ignoreOrigin:null==r?void 0:r.writeLayerSchema}},writer:h.c}}})],ir.prototype,"renderer",null),Object(y.a)([Object(A.a)("service","renderer",["drawingInfo.renderer","defaultSymbol"]),Object(A.a)("renderer",["layerDefinition.drawingInfo.renderer","layerDefinition.defaultSymbol"])],ir.prototype,"readRenderer",null),Object(y.a)([Object(L.b)()],ir.prototype,"sourceJSON",void 0),Object(y.a)([Object(L.b)({type:Boolean})],ir.prototype,"returnM",void 0),Object(y.a)([Object(L.b)({type:Boolean})],ir.prototype,"returnZ",void 0),Object(y.a)([Object(L.b)(St.m)],ir.prototype,"screenSizePerspectiveEnabled",void 0),Object(y.a)([Object(L.b)()],ir.prototype,"source",null),Object(y.a)([Object(N.a)("source")],ir.prototype,"castSource",null),Object(y.a)([Object(A.a)("portal-item","source",["featureSet"]),Object(A.a)("web-map","source",["featureSet"])],ir.prototype,"readSource",null),Object(y.a)([Object(L.b)({readOnly:!0})],ir.prototype,"serviceDefinitionExpression",void 0),Object(y.a)([Object(A.a)("service","serviceDefinitionExpression",["definitionQuery","definitionExpression"])],ir.prototype,"readServiceDefinitionExpression",null),Object(y.a)([Object(L.b)({type:Ze.a,json:{origins:{service:{read:{source:"extent.spatialReference"}}},read:{source:"layerDefinition.extent.spatialReference"}}})],ir.prototype,"spatialReference",void 0),Object(y.a)([Object(L.b)({type:Number})],ir.prototype,"subtypeCode",void 0),Object(y.a)([Object(L.b)({type:[kt.a]})],ir.prototype,"templates",void 0),Object(y.a)([Object(A.a)("templates",["editFieldsInfo","creatorField","editorField","templates"])],ir.prototype,"readTemplates",null),Object(y.a)([Object(L.b)({type:qt.a})],ir.prototype,"timeInfo",void 0),Object(y.a)([Object(L.b)()],ir.prototype,"title",void 0),Object(y.a)([Object(A.a)("service","title",["name"]),Object(A.a)("portal-item","title",["layerDefinition.title","layerDefinition.name","title"])],ir.prototype,"readTitle",null),Object(y.a)([Object(A.a)("web-map","title",["layerDefinition.name","title"])],ir.prototype,"readTitleFromWebMap",null),Object(y.a)([Object(L.b)({type:String})],ir.prototype,"sublayerTitleMode",void 0),Object(y.a)([Object(L.b)({type:String,json:{read:{source:"timeInfo.trackIdField"}}})],ir.prototype,"trackIdField",void 0),Object(y.a)([Object(L.b)({json:{read:!1}})],ir.prototype,"type",void 0),Object(y.a)([Object(L.b)({type:String})],ir.prototype,"typeIdField",void 0),Object(y.a)([Object(A.a)("service","typeIdField"),Object(A.a)("typeIdField",["layerDefinition.typeIdField"])],ir.prototype,"readTypeIdField",null),Object(y.a)([Object(L.b)({type:[It.a]})],ir.prototype,"types",void 0),Object(y.a)([Object(A.a)("service","types",["types"]),Object(A.a)("types",["layerDefinition.types"])],ir.prototype,"readTypes",null),Object(y.a)([Object(L.b)({readOnly:!0,json:{write:!1}})],ir.prototype,"serverGens",void 0),Object(y.a)([Object(L.b)({type:w.a.ofType(xt),readOnly:!0})],ir.prototype,"indexes",void 0),Object(y.a)([Object(L.b)(St.n)],ir.prototype,"url",null),Object(y.a)([Object(q.a)("url")],ir.prototype,"writeUrl",null),Object(y.a)([Object(L.b)({readOnly:!0})],ir.prototype,"userIsAdmin",void 0),Object(y.a)([Object(L.b)({json:{origins:{service:{read:!0}},read:!1}})],ir.prototype,"version",void 0),Object(y.a)([Object(A.a)("service","version",["currentVersion","capabilities","drawingInfo","hasAttachments","htmlPopupType","relationships","timeInfo","typeIdField","types"])],ir.prototype,"readVersion",null),Object(y.a)([Object(L.b)({type:Boolean,json:{origins:{"portal-item":{write:{target:"layerDefinition.defaultVisibility"}}}}})],ir.prototype,"visible",void 0),Object(y.a)([Object(A.a)("portal-item","visible",["visibility","layerDefinition.defaultVisibility"])],ir.prototype,"readVisible",null),ir=Object(y.a)([Object(V.a)("esri.layers.FeatureLayer")],ir);var nr=Object(G.b)({types:g.i}),ar=ir},739:function(e,t,r){"use strict";r.d(t,"a",(function(){return d}));var i,n=r(2),a=r(4),o=r(5),s=r(6),l=r(0),c=r(1),u=(r(19),r(14),r(15),r(10)),p=r(705),b=i=function(e){Object(o.a)(r,e);var t=Object(s.a)(r);function r(e){var i;return Object(n.a)(this,r),(i=t.call(this,e)).type="selection",i}return Object(a.a)(r,[{key:"clone",value:function(){return new i}}]),r}(p.a);Object(l.a)([Object(c.b)({type:["selection"]})],b.prototype,"type",void 0);var d=b=i=Object(l.a)([Object(u.a)("esri.layers.support.FeatureReductionSelection")],b)},740:function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var i=r(675),n=/\[([^\[\]]+)\]/gi;function a(e,t,r){var a=this;return e?e.map((function(e){var o=new i.a;if(o.read(e,r),o.labelExpression){var s=t.fields||t.layerDefinition&&t.layerDefinition.fields||a.fields;o.labelExpression=o.labelExpression.replace(n,(function(e,t){return"[".concat(function(e,t){if(!t)return e;for(var r=e.toLowerCase(),i=0;i<t.length;i++){var n=t[i].name;if(n.toLowerCase()===r)return n}return e}(t,s),"]")}))}return o})):null}},742:function(e,t,r){"use strict";r.d(t,"a",(function(){return k}));var i,n=r(13),a=r(2),o=r(4),s=r(77),l=r(65),c=r(5),u=r(6),p=r(0),b=r(137),d=r(42),y=r(26),f=r(135),j=r(165),O=r(1),h=(r(19),r(14),r(15),r(57)),v=r(10),m=r(43),g=Object(d.b)()({orthometric:"gravity-related-height",gravity_related_height:"gravity-related-height",ellipsoidal:"ellipsoidal"}),w=g.jsonValues.slice();Object(b.g)(w,"orthometric");var S=Object(d.b)()({meter:"meters",foot:"feet","us-foot":"us-feet","clarke-foot":"clarke-feet","clarke-yard":"clarke-yards","clarke-link":"clarke-links","sears-yard":"sears-yards","sears-foot":"sears-feet","sears-chain":"sears-chains","benoit-1895-b-chain":"benoit-1895-b-chains","indian-yard":"indian-yards","indian-1937-yard":"indian-1937-yards","gold-coast-foot":"gold-coast-feet","sears-1922-truncated-chain":"sears-1922-truncated-chains","50-kilometers":"50-kilometers","150-kilometers":"150-kilometers"}),x=i=function(e){Object(c.a)(r,e);var t=Object(u.a)(r);function r(e){var i;return Object(a.a)(this,r),(i=t.call(this,e)).heightModel="gravity-related-height",i.heightUnit="meters",i.vertCRS=null,i}return Object(o.a)(r,[{key:"writeHeightModel",value:function(e,t,r){return g.write(e,t,r)}},{key:"readHeightModel",value:function(e,t,r){return g.read(e)||(r&&r.messages&&r.messages.push(function(e,t){return new j.a("height-model:unsupported","Height model of value '".concat(e,"' is not supported"),t)}(e,{context:r})),null)}},{key:"readHeightUnit",value:function(e,t,r){return S.read(e)||(r&&r.messages&&r.messages.push(F(e,{context:r})),null)}},{key:"readHeightUnitService",value:function(e,t,r){return Object(f.k)(e)||S.read(e)||(r&&r.messages&&r.messages.push(F(e,{context:r})),null)}},{key:"readVertCRS",value:function(e,t){return t.vertCRS||t.ellipsoid||t.geoid}},{key:"clone",value:function(){return new i({heightModel:this.heightModel,heightUnit:this.heightUnit,vertCRS:this.vertCRS})}},{key:"equals",value:function(e){return!!e&&(this===e||this.heightModel===e.heightModel&&this.heightUnit===e.heightUnit&&this.vertCRS===e.vertCRS)}},{key:"write",value:function(e,t){return t=Object(n.a)({origin:"web-scene"},t),Object(s.a)(Object(l.a)(r.prototype),"write",this).call(this,e,t)}}],[{key:"deriveUnitFromSR",value:function(e,t){var r=Object(f.g)(t);return new i({heightModel:e.heightModel,heightUnit:r,vertCRS:e.vertCRS})}},{key:"fromJSON",value:function(e){if(!e)return null;var t=new i;return t.read(e,{origin:"web-scene"}),t}}]),r}(y.a);function F(e,t){return new j.a("height-unit:unsupported","Height unit of value '".concat(e,"' is not supported"),t)}Object(p.a)([Object(O.b)({type:g.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:w,default:"ellipsoidal"}}}})],x.prototype,"heightModel",void 0),Object(p.a)([Object(m.a)("web-scene","heightModel")],x.prototype,"writeHeightModel",null),Object(p.a)([Object(h.a)(["web-scene","service"],"heightModel")],x.prototype,"readHeightModel",null),Object(p.a)([Object(O.b)({type:S.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:S.jsonValues,write:S.write}}}})],x.prototype,"heightUnit",void 0),Object(p.a)([Object(h.a)("web-scene","heightUnit")],x.prototype,"readHeightUnit",null),Object(p.a)([Object(h.a)("service","heightUnit")],x.prototype,"readHeightUnitService",null),Object(p.a)([Object(O.b)({type:String,constructOnly:!0,json:{origins:{"web-scene":{write:!0}}}})],x.prototype,"vertCRS",void 0),Object(p.a)([Object(h.a)("service","vertCRS",["vertCRS","ellipsoid","geoid"])],x.prototype,"readVertCRS",null);var k=x=i=Object(p.a)([Object(v.a)("esri.geometry.HeightModelInfo")],x)},744:function(e,t,r){"use strict";r.d(t,"a",(function(){return c}));var i=r(7),n=r.n(i),a=r(12),o=r(295),s=r(30),l=r(165);function c(e,t,r){return u.apply(this,arguments)}function u(){return u=Object(a.a)(n.a.mark((function e(t,r,i){var a,c,u;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=t&&t.getAtOrigin&&t.getAtOrigin("renderer",r.origin))||"unique-value"!==a.type||!a.styleOrigin){e.next=6;break}return e.next=4,Object(o.c)(a.populateFromStyle());case 4:c=e.sent,Object(s.v)(i),!1===c.ok&&(u=c.error,r&&r.messages&&r.messages.push(new l.a("renderer:style-reference","Failed to create unique value renderer from style reference: ".concat(u.message),{error:u,context:r})),t.clear("renderer",r.origin));case 6:case"end":return e.stop()}}),e)}))),u.apply(this,arguments)}},745:function(e,t,r){"use strict";r.d(t,"a",(function(){return y}));var i,n=r(2),a=r(4),o=r(5),s=r(6),l=r(0),c=r(52),u=r(26),p=r(1),b=(r(19),r(14),r(15),r(10)),d=i=function(e){Object(o.a)(r,e);var t=Object(s.a)(r);function r(e){var i;return Object(n.a)(this,r),(i=t.call(this,e)).floorField=null,i.viewAllMode=!1,i.viewAllLevelIds=new c.a,i}return Object(a.a)(r,[{key:"clone",value:function(){return new i({floorField:this.floorField,viewAllMode:this.viewAllMode,viewAllLevelIds:this.viewAllLevelIds})}}]),r}(u.a);Object(l.a)([Object(p.b)({type:String,json:{write:!0}})],d.prototype,"floorField",void 0),Object(l.a)([Object(p.b)({json:{read:!1,write:!1}})],d.prototype,"viewAllMode",void 0),Object(l.a)([Object(p.b)({json:{read:!1,write:!1}})],d.prototype,"viewAllLevelIds",void 0);var y=d=i=Object(l.a)([Object(b.a)("esri.layers.support.LayerFloorInfo")],d)},746:function(e,t,r){"use strict";r.d(t,"a",(function(){return D})),r.d(t,"b",(function(){return M})),r.d(t,"c",(function(){return R})),r.d(t,"d",(function(){return C}));var i,n=r(29),a=r(66),o=r(705),s=r(2),l=r(4),c=r(5),u=r(6),p=r(0),b=r(214),d=r(332),y=r(26),f=r(18),j=r(44),O=r(1),h=(r(14),r(19),r(15),r(10)),v=i=function(e){Object(c.a)(r,e);var t=Object(u.a)(r);function r(){var e;return Object(s.a)(this,r),(e=t.apply(this,arguments)).statisticType=null,e.onStatisticField=null,e.onStatisticValueExpression=null,e}return Object(l.a)(r,[{key:"clone",value:function(){return new i({statisticType:this.statisticType,onStatisticField:this.onStatisticField,onStatisticValueExpression:this.onStatisticValueExpression})}}]),r}(y.a);Object(p.a)([Object(O.b)({type:String,json:{write:!0}})],v.prototype,"statisticType",void 0),Object(p.a)([Object(O.b)({type:String,json:{write:!0}})],v.prototype,"onStatisticField",void 0),Object(p.a)([Object(O.b)({type:String,json:{write:!0}})],v.prototype,"onStatisticValueExpression",void 0);var m,g=v=i=Object(p.a)([Object(h.a)("esri.layers.support.OutStatistic")],v),w=m=function(e){Object(c.a)(r,e);var t=Object(u.a)(r);function r(){var e;return Object(s.a)(this,r),(e=t.apply(this,arguments)).name=null,e}return Object(l.a)(r,[{key:"clone",value:function(){return new m({name:this.name,outStatistic:this.outStatistic.clone()})}}]),r}(y.a);Object(p.a)([Object(O.b)({type:String,json:{write:!0}})],w.prototype,"name",void 0),Object(p.a)([Object(O.b)({type:g,json:{write:!0}})],w.prototype,"outStatistic",void 0);var S,x=w=m=Object(p.a)([Object(h.a)("esri.layers.support.AggregateField")],w),F=r(671),k=r(675),I=S=function(e){Object(c.a)(r,e);var t=Object(u.a)(r);function r(e){var i;return Object(s.a)(this,r),(i=t.call(this,e)).type="cluster",i.clusterRadius=Object(j.d)("80px"),i.clusterMinSize=Object(j.d)("12px"),i.clusterMaxSize=Object(j.d)("50px"),i.popupEnabled=!0,i.popupTemplate=null,i.symbol=null,i.labelingInfo=null,i.labelsVisible=!0,i.fields=null,i}return Object(l.a)(r,[{key:"clone",value:function(){return new S({clusterRadius:this.clusterRadius,clusterMinSize:this.clusterMinSize,clusterMaxSize:this.clusterMaxSize,labelingInfo:Object(f.a)(this.labelingInfo),labelsVisible:this.labelsVisible,fields:Object(f.a)(this.fields),popupEnabled:this.popupEnabled,popupTemplate:Object(f.a)(this.popupTemplate)})}}]),r}(y.a);Object(p.a)([Object(O.b)({type:["cluster"],readOnly:!0,json:{write:!0}})],I.prototype,"type",void 0),Object(p.a)([Object(O.b)({type:Number,cast:function(e){return"auto"===e?e:Object(j.d)(e)},json:{write:!0}})],I.prototype,"clusterRadius",void 0),Object(p.a)([Object(O.b)({type:Number,cast:j.d,json:{write:!0}})],I.prototype,"clusterMinSize",void 0),Object(p.a)([Object(O.b)({type:Number,cast:j.d,json:{write:!0}})],I.prototype,"clusterMaxSize",void 0),Object(p.a)([Object(O.b)(F.j)],I.prototype,"popupEnabled",void 0),Object(p.a)([Object(O.b)({type:b.a,json:{read:{source:"popupInfo"},write:{target:"popupInfo"}}})],I.prototype,"popupTemplate",void 0),Object(p.a)([Object(O.b)({types:d.f})],I.prototype,"symbol",void 0),Object(p.a)([Object(O.b)({type:[k.a],json:{read:{source:"drawingInfo.labelingInfo"},write:{target:"drawingInfo.labelingInfo"}}})],I.prototype,"labelingInfo",void 0),Object(p.a)([Object(O.b)(F.d)],I.prototype,"labelsVisible",void 0),Object(p.a)([Object(O.b)({type:[x],json:{write:!0}})],I.prototype,"fields",void 0);var E=I=S=Object(p.a)([Object(h.a)("esri.layers.support.FeatureReductionCluster")],I),T=r(739),R={key:"type",base:o.a,typeMap:{selection:T.a}};function M(e,t){var r=(t=t.layerDefinition||t).featureReduction;if(r)switch(r.type){case"selection":return T.a.fromJSON(r);case"cluster":return E.fromJSON(r)}return null}function C(e,t,r,i){var o=function(e,t,r){return e?"selection"!==e.type?(r.messages&&r.messages.push(new n.a("featureReduction:unsupported","FeatureReduction of type '".concat(e.declaredClass,"' are not supported in scenes."),{featureReduction:e,context:r})),null):e.write(t,r):null}(e,{},i);o&&Object(a.c)(r,o,t)}var D={types:{key:"type",base:o.a,typeMap:{selection:T.a,cluster:E}},json:{write:{target:"layerDefinition.featureReduction",allowNull:!0}}}},747:function(e,t,r){"use strict";r.d(t,"a",(function(){return j}));var i,n=r(2),a=r(4),o=r(5),s=r(6),l=r(0),c=r(26),u=r(18),p=r(1),b=r(14),d=(r(19),r(15),r(10)),y=r(43),f=i=function(e){Object(o.a)(r,e);var t=Object(s.a)(r);function r(e){var i;return Object(n.a)(this,r),(i=t.call(this,e)).attachmentTypes=null,i.attachmentsWhere=null,i.keywords=null,i.globalIds=null,i.name=null,i.num=null,i.objectIds=null,i.returnMetadata=!1,i.size=null,i.start=null,i.where=null,i}return Object(a.a)(r,[{key:"writeStart",value:function(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10}},{key:"clone",value:function(){return new i(Object(u.a)({attachmentTypes:this.attachmentTypes,attachmentsWhere:this.attachmentsWhere,keywords:this.keywords,where:this.where,globalIds:this.globalIds,name:this.name,num:this.num,objectIds:this.objectIds,returnMetadata:this.returnMetadata,size:this.size,start:this.start}))}}]),r}(c.a);Object(l.a)([Object(p.b)({type:[String],json:{write:!0}})],f.prototype,"attachmentTypes",void 0),Object(l.a)([Object(p.b)({type:String,json:{read:{source:"attachmentsDefinitionExpression"},write:{target:"attachmentsDefinitionExpression"}}})],f.prototype,"attachmentsWhere",void 0),Object(l.a)([Object(p.b)({type:[String],json:{write:!0}})],f.prototype,"keywords",void 0),Object(l.a)([Object(p.b)({type:[Number],json:{write:!0}})],f.prototype,"globalIds",void 0),Object(l.a)([Object(p.b)({json:{write:!0}})],f.prototype,"name",void 0),Object(l.a)([Object(p.b)({type:Number,json:{read:{source:"resultRecordCount"}}})],f.prototype,"num",void 0),Object(l.a)([Object(p.b)({type:[Number],json:{write:!0}})],f.prototype,"objectIds",void 0),Object(l.a)([Object(p.b)({type:Boolean,json:{default:!1,write:!0}})],f.prototype,"returnMetadata",void 0),Object(l.a)([Object(p.b)({type:[Number],json:{write:!0}})],f.prototype,"size",void 0),Object(l.a)([Object(p.b)({type:Number,json:{read:{source:"resultOffset"}}})],f.prototype,"start",void 0),Object(l.a)([Object(y.a)("start"),Object(y.a)("num")],f.prototype,"writeStart",null),Object(l.a)([Object(p.b)({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],f.prototype,"where",void 0),(f=i=Object(l.a)([Object(d.a)("esri.rest.support.AttachmentQuery")],f)).from=Object(b.m)(f);var j=f},751:function(e,t,r){"use strict";r.d(t,"a",(function(){return x})),r.d(t,"b",(function(){return j})),r.d(t,"c",(function(){return O})),r.d(t,"d",(function(){return h})),r.d(t,"e",(function(){return v})),r.d(t,"f",(function(){return w})),r.d(t,"g",(function(){return f}));var i=r(21),n=r(22),a=r(46),o=r(210),s=r(694),l=r(15),c=r(11),u=r(683),p=r(704),b=l.a.getLogger("esri.renderers.visualVariables.support.visualVariableUtils"),d=new o.a,y=Math.PI,f=/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i;function j(e,t,r){var i="visualVariables"in e&&e.visualVariables?e.visualVariables.filter((function(e){return"color"===e.type}))[0]:e;if(i)if("esri.renderers.visualVariables.ColorVariable"===i.declaredClass){var n="number"==typeof t,o=n?null:t,s=o&&o.attributes,l=n?t:null,u=i.field,p=i.cache,d=p.ipData,y=p.hasExpression,f=i.cache.compiledFunc;if(!u&&!y){var j=i.stops;return j&&j[0]&&j[0].color}if("number"!=typeof l)if(y){if(!Object(c.j)(r)||!Object(c.j)(r.arcade))return void b.error("Use of arcade expressions requires an arcade context");var O={viewingMode:r.viewingMode,scale:r.scale,spatialReference:r.spatialReference},h=r.arcade.arcadeUtils,v=h.getViewInfo(O),m=h.createExecContext(o,v);if(!f){var g=h.createSyntaxTree(i.valueExpression);f=h.createFunction(g),i.cache.compiledFunc=f}l=h.executeFunction(f,m)}else s&&(l=s[u]);var w=i.normalizationField,x=s?parseFloat(s[w]):void 0;if(null!=l&&(!w||n||!isNaN(x)&&0!==x)){isNaN(x)||n||(l/=x);var F=S(l,d);if(F){var k=F[0],I=F[1],E=k===I?i.stops[k].color:a.a.blendColors(i.stops[k].color,i.stops[I].color,F[2],Object(c.j)(r)?r.color:void 0);return new a.a(E)}}}else b.warn("The visualVariable should be an instance of esri.renderers.visualVariables.ColorVariable")}function O(e,t,r){var i="visualVariables"in e&&e.visualVariables?e.visualVariables.filter((function(e){return"opacity"===e.type}))[0]:e;if(i)if("esri.renderers.visualVariables.OpacityVariable"===i.declaredClass){var n="number"==typeof t,a=n?null:t,o=a&&a.attributes,s=n?t:null,l=i.field,u=i.cache,p=u.ipData,d=u.hasExpression,y=i.cache.compiledFunc;if(!l&&!d){var f=i.stops;return f&&f[0]&&f[0].opacity}if("number"!=typeof s)if(d){if(Object(c.i)(r)||Object(c.i)(r.arcade))return void b.error("Use of arcade expressions requires an arcade context");var j={viewingMode:r.viewingMode,scale:r.scale,spatialReference:r.spatialReference},O=r.arcade.arcadeUtils,h=O.getViewInfo(j),v=O.createExecContext(a,h);if(!y){var m=O.createSyntaxTree(i.valueExpression);y=O.createFunction(m),i.cache.compiledFunc=y}s=O.executeFunction(y,v)}else o&&(s=o[l]);var g=i.normalizationField,w=o?parseFloat(o[g]):void 0;if(null!=s&&(!g||n||!isNaN(w)&&0!==w)){isNaN(w)||n||(s/=w);var x=S(s,p);if(x){var F=x[0],k=x[1];if(F===k)return i.stops[F].opacity;var I=i.stops[F].opacity;return I+(i.stops[k].opacity-I)*x[2]}}}else b.warn("The visualVariable should be an instance of esri.renderers.visualVariables.OpacityVariable")}function h(e,t,r){var i="visualVariables"in e&&e.visualVariables?e.visualVariables.filter((function(e){return"rotation"===e.type}))[0]:e;if(i){if("esri.renderers.visualVariables.RotationVariable"===i.declaredClass){var n=i.axis||"heading",a="heading"===n&&"arithmetic"===i.rotationType?90:0,o="heading"===n&&"arithmetic"===i.rotationType?-1:1,s="number"==typeof t?null:t,l=s&&s.attributes,u=i.field,p=i.cache.hasExpression,d=i.cache.compiledFunc,y=0;if(!u&&!p)return y;if(p){if(Object(c.i)(r)||Object(c.i)(r.arcade))return void b.error("Use of arcade expressions requires an arcade context");var f={viewingMode:r.viewingMode,scale:r.scale,spatialReference:r.spatialReference},j=r.arcade.arcadeUtils,O=j.getViewInfo(f),h=j.createExecContext(s,O);if(!d){var v=j.createSyntaxTree(i.valueExpression);d=j.createFunction(v),i.cache.compiledFunc=d}y=j.executeFunction(d,h)}else l&&(y=l[u]||0);return y="number"!=typeof y||isNaN(y)?null:a+o*y}b.warn("The visualVariable should be an instance of esri.renderers.visualVariables.RotationVariable")}}function v(e,t,r){var i="visualVariables"in e&&e.visualVariables?e.visualVariables.filter((function(e){return"size"===e.type}))[0]:e;if(i){if("esri.renderers.visualVariables.SizeVariable"===i.declaredClass){var a=function(e,t,r,i,a){switch(t.transformationType){case"additive":return function(e,t,r,i){return e+(m(t.minSize,r,i)||t.minDataValue)}(e,t,r,i);case"constant":return function(e,t,r){var i=e.stops,n=i&&i.length&&i[0].size;return null==n&&(n=e.minSize),m(n,t,r)}(t,r,i);case"clamped-linear":return function(e,t,r,i){var n=(e-t.minDataValue)/(t.maxDataValue-t.minDataValue),a=m(t.minSize,r,i),o=m(t.maxSize,r,i),s=Object(c.j)(i)?i.shape:void 0;if(e<=t.minDataValue)return a;if(e>=t.maxDataValue)return o;if("area"===t.scaleBy&&s){var l="circle"===s,u=l?y*Math.pow(a/2,2):a*a,p=u+n*((l?y*Math.pow(o/2,2):o*o)-u);return l?2*Math.sqrt(p/y):Math.sqrt(p)}return a+n*(o-a)}(e,t,r,i);case"proportional":return function(e,t,r,i){var n=Object(c.j)(i)?i.shape:void 0,a=e/t.minDataValue,o=m(t.minSize,r,i),s=m(t.maxSize,r,i);return g("circle"===n?2*Math.sqrt(a*Math.pow(o/2,2)):"square"===n||"diamond"===n||"image"===n?Math.sqrt(a*Math.pow(o,2)):a*o,o,s)}(e,t,r,i);case"stops":return function(e,t,r,i,a){var o=S(e,a),s=Object(n.a)(o,3),l=s[0],c=s[1],u=s[2];if(l===c)return m(t.stops[l].size,r,i);var p=m(t.stops[l].size,r,i);return p+(m(t.stops[c].size,r,i)-p)*u}(e,t,r,i,a);case"real-world-size":return function(e,t,r,i){var n=(Object(c.j)(i)&&i.resolution?i.resolution:1)*u.a[t.valueUnit],a=m(t.minSize,r,i),o=m(t.maxSize,r,i),s=t.valueRepresentation;return g("area"===s?2*Math.sqrt(e/y)/n:"radius"===s||"distance"===s?2*e/n:e/n,a,o)}(e,t,r,i);case"identity":return e;case"unknown":return null}}(function(e,t,r){var i="number"==typeof t,n=i?null:t,a=n&&n.attributes,o=i?t:null,s=e.cache.isScaleDriven,l=e.cache.compiledFunc;if(s){var u=Object(c.j)(r)?r.scale:void 0,d=Object(c.j)(r)?r.view:void 0;o=null==u||"3d"===d?function(e){var t=null,r=null,i=e.stops;return i?(t=i[0].value,r=i[i.length-1].value):(t=e.minDataValue||0,r=e.maxDataValue||0),(t+r)/2}(e):u}else if(!i)switch(e.inputValueType){case"expression":if(Object(c.i)(r)||Object(c.i)(r.arcade))return void b.error("Use of arcade expressions requires an arcade context");var y={viewingMode:r.viewingMode,scale:r.scale,spatialReference:r.spatialReference},f=r.arcade.arcadeUtils,j=f.getViewInfo(y),O=f.createExecContext(n,j);if(!l){var h=f.createSyntaxTree(e.valueExpression);l=f.createFunction(h),e.cache.compiledFunc=l}o=f.executeFunction(l,O);break;case"field":a&&(o=a[e.field]);break;case"unknown":o=null}if(!Object(p.d)(o))return null;if(i||!e.normalizationField)return o;var v=a?parseFloat(a[e.normalizationField]):null;return Object(p.d)(v)&&0!==v?o/v:null}(i,t,r),i,t,r,i.cache.ipData);return null==a||isNaN(a)?0:a}b.warn("The visualVariable should be an instance of esri.renderers.visualVariables.SizeVariable")}}function m(e,t,r){return null==e?null:Object(p.c)(e)?v(e,t,r):Object(p.d)(e)?e:null}function g(e,t,r){return Object(p.d)(r)&&e>r?r:Object(p.d)(t)&&e<t?t:e}function w(e,t,r){if(!(e.cache.isScaleDriven&&"3d"===r||t))return null;var i={scale:t,view:r},n=m(e.minSize,d,i),a=m(e.maxSize,d,i);if(null!=n||null!=a){if(n>a){var o=a;a=n,n=o}return{minSize:n,maxSize:a}}}function S(e,t){if(t){var r=0,i=t.length-1;return t.some((function(t,n){return e<t?(i=n,!0):(r=n,!1)})),[r,i,(e-t[r])/(t[i]-t[r])]}}function x(e,t,r){var n,a=["proportional","proportional","proportional"],o=Object(i.a)(e);try{for(o.s();!(n=o.n()).done;){var l=n.value,c=l.useSymbolValue?"symbol-value":v(l,t,r);switch(l.axis){case"width":a[0]=c;break;case"depth":a[1]=c;break;case"height":a[2]=c;break;case"width-and-depth":a[0]=c,a[1]=c;break;case"all":case void 0:case null:a[0]=c,a[1]=c,a[2]=c;break;default:Object(s.a)(l.axis)}}}catch(u){o.e(u)}finally{o.f()}return a}},756:function(e,t,r){"use strict";r.d(t,"a",(function(){return v}));var i,n=r(2),a=r(5),o=r(6),s=r(0),l=r(66),c=r(1),u=(r(19),r(14),r(15),r(10)),p=r(4),b=r(42),d=r(26),y=new b.a({asc:"ascending",desc:"descending"}),f=i=function(e){Object(a.a)(r,e);var t=Object(o.a)(r);function r(){var e;return Object(n.a)(this,r),(e=t.apply(this,arguments)).field=null,e.valueExpression=null,e.order="ascending",e}return Object(p.a)(r,[{key:"clone",value:function(){return new i({field:this.field,valueExpression:this.valueExpression,order:this.order})}}]),r}(d.a);Object(s.a)([Object(c.b)({type:String,json:{write:!0}})],f.prototype,"field",void 0),Object(s.a)([Object(c.b)({type:String,json:{write:!0}})],f.prototype,"valueExpression",void 0),Object(s.a)([Object(c.b)({type:y.apiValues,json:{read:y.read,write:y.write}})],f.prototype,"order",void 0);var j=f=i=Object(s.a)([Object(u.a)("esri.layers.support.OrderByInfo")],f);function O(e,t,r){if(!e)return null;var i=e.find((function(e){return!!e.field}));if(!i)return null;var n=new j;return n.read(i,r),[n]}function h(e,t,r,i){var n=e.find((function(e){return!!e.field}));n&&Object(l.c)(r,[n.toJSON()],t)}var v=function(e){var t=function(e){Object(a.a)(r,e);var t=Object(o.a)(r);function r(){var e;return Object(n.a)(this,r),(e=t.apply(this,arguments)).orderBy=null,e}return r}(e);return Object(s.a)([Object(c.b)({type:[j],json:{origins:{"web-scene":{write:!1,read:!1}},read:{source:"layerDefinition.orderBy",reader:O},write:{target:"layerDefinition.orderBy",writer:h}}})],t.prototype,"orderBy",void 0),t=Object(s.a)([Object(u.a)("esri.layers.mixins.OrderedLayer")],t)}}}]);
//# sourceMappingURL=55.2dc4e7fb.chunk.js.map