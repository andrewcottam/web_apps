{"version":3,"sources":["../node_modules/@arcgis/core/layers/support/arcgisLayerUrl.js","../node_modules/@arcgis/core/renderers/support/lengthUtils.js","../node_modules/@arcgis/core/layers/mixins/ArcGISService.js","../node_modules/@arcgis/core/layers/mixins/APIKeyMixin.js","../node_modules/@arcgis/core/geometry/HeightModelInfo.js","../node_modules/@arcgis/core/portal/support/resourceUtils.js","../node_modules/@arcgis/core/layers/support/I3SIndexInfo.js","../node_modules/@arcgis/core/core/multiOriginJSONSupportUtils.js","../node_modules/@arcgis/core/core/accessorSupport/originUtils.js","../node_modules/@arcgis/core/webdoc/support/saveUtils.js","../node_modules/@arcgis/core/layers/mixins/SceneService.js"],"names":["l","mapserver","imageserver","featureserver","sceneserver","streamserver","vectortileserver","a","Object","values","c","RegExp","join","f","v","p","e","test","d","t","r","n","path","match","s","i","o","u","indexOf","title","w","slice","serverType","toLowerCase","sublayer","parseInt","url","m","serviceUrl","sublayerId","Number","replace","toUpperCase","h","push","length","y","g","O","logger","layer","layerId","nonStandardUrlAllowed","C","toString","S","inches","feet","yards","miles","millimeters","centimeters","decimeters","meters","kilometers","radius","this","_get","originOf","_set","getLogger","declaredClass","prototype","type","String","_isOverridden","portalItem","apiKey","_override","_clearOverride","clear","orthometric","gravity_related_height","ellipsoidal","jsonValues","meter","foot","heightModel","heightUnit","vertCRS","write","read","messages","context","ellipsoid","geoid","origin","apiValues","constructOnly","json","origins","default","load","itemUrl","start","num","sortOrder","sortField","query","token","signal","portal","_request","total","nextStart","resources","map","created","size","resource","Date","resourceFromPath","hasPath","userItemUrl","FormData","append","access","method","body","deleteAll","lastIndexOf","Blob","responseType","data","Math","floor","rootIndex","nodesPerPage","lodSelectionMetricType","rootPage","pageSize","lodMetric","urlPrefix","warn","split","pop","rootNode","pageError","nodeError","writtenProperties","forEach","target","newOrigin","oldOrigin","updateOrigin","propName","Set","paths","toKeep","delete","toUpdate","has","content","finish","error","add","toAdd","removeResource","catch","filter","errors","addResource","ok","update","R","N","arguments","spatialReference","fullExtent","heightModelInfo","minScale","maxScale","version","major","NaN","minor","versionString","copyright","sublayerTitleMode","indexInfo","_debouncedSaveOperations","_save","_saveAs","_readSpatialReference","fromJSON","store","indexCRS","geographicCRS","substring","extent","Array","isArray","some","xmin","ymin","xmax","ymax","name","x","parsedUrl","hasZ","_updateExtent","nodes","obb","center","halfSize","sqrt","zmin","zmax","mbs","_fetchFirstLayerId","_fetchServiceLayer","layers","id","ssl","validateLayer","beforeSave","typeKeywords","getTypeKeywords","E","j","from","Promise","reject","clone","b","getDefault","_ensureLoadBeforeSave","T","blockedRelativeUrls","pendingOperations","all","_validateAgainstJSONSchema","_updateTypeKeywords","_signIn","user","addItem","item","folder","_","resourceReferences","message","details","validationOptions","ignoreUnsupported","enabled","U","validate","portalItemLayerType","failPolicy","concat","combined","readOnly","service","source","isRequired","ignoreOrigin","I"],"mappings":"8dAIyPA,EAAE,CAACC,UAAU,YAAYC,YAAY,cAAcC,cAAc,gBAAgBC,YAAY,cAAcC,aAAa,eAAeC,iBAAiB,oBAAoBC,EAAEC,OAAOC,OAAOT,GAAGU,EAAE,IAAIC,OAAJ,iEAAqEJ,EAAEK,KAAK,KAA5E,kCAAiH,KAAKC,EAAE,IAAIF,OAAJ,sDAA0DJ,EAAEK,KAAK,KAAjE,kCAAsG,KAAKE,EAAE,iCAAiC,SAASC,EAAEC,GAAG,QAAQN,EAAEO,KAAKD,GAAG,SAASE,EAAEF,GAAG,IAAMG,EAAEC,YAAEJ,GAAGK,EAAEF,EAAEG,KAAKC,MAAMb,IAAIS,EAAEG,KAAKC,MAAMV,GAAG,IAAIQ,EAAE,OAAO,KAAK,kBAAgBA,EAAhB,GAAOG,EAAP,KAASC,EAAT,KAAWC,EAAX,KAAaC,EAAb,KAAkBpB,EAAEkB,EAAEG,QAAQ,KAAK,MAAM,CAACC,MAAMC,GAAG,IAAIvB,EAAEkB,EAAEM,MAAMxB,EAAE,GAAGkB,GAAGO,WAAWhC,EAAE0B,EAAEO,eAAeC,SAAS,MAAMP,GAAG,KAAKA,EAAEQ,SAASR,EAAE,IAAI,KAAKS,IAAI,CAACd,KAAKE,IAAI,SAASa,EAAErB,GAAG,IAAMG,EAAEC,YAAEJ,GAAGM,KAAKC,MAAMT,GAAG,OAAOK,EAAE,CAACmB,WAAWnB,EAAE,GAAGoB,WAAWC,OAAOrB,EAAE,KAAK,KAAK,SAASW,EAAEd,GAAG,OAAOA,EAAEA,EAAEyB,QAAQ,eAAe,MAAM,GAAGC,cAAc1B,EAAEe,MAAM,GAAG,SAASY,EAAEvB,EAAED,GAAG,IAAME,EAAE,GAAG,GAAGD,EAAE,CAAC,IAAMD,EAAED,EAAEE,GAAGJ,YAAEG,IAAIA,EAAEU,OAAOR,EAAEuB,KAAKzB,EAAEU,OAAO,GAAGV,EAAE,CAAC,IAAMH,EAAEc,EAAEX,GAAGE,EAAEuB,KAAK5B,GAAG,GAAG,IAAIK,EAAEwB,OAAO,CAAC,IAAI,IAAIxB,EAAE,GAAGY,cAAcL,QAAQP,EAAE,GAAGY,eAAe,OAAOZ,EAAE,GAAG,IAAI,IAAIA,EAAE,GAAGY,cAAcL,QAAQP,EAAE,GAAGY,eAAe,OAAOZ,EAAE,GAAG,OAAOA,EAAET,KAAK,OAAO,SAASkC,EAAE9B,GAAG,IAAIA,EAAE,OAAM,EAAG,IAAiES,GAAG,KAAKT,EAAEA,EAAEiB,eAAeL,QAApF,gBAA+FF,GAAG,IAAIV,EAAEY,QAAvF,gBAAoG,IAAIZ,EAAEY,QAA3F,aAAwG,IAAIZ,EAAEY,QAAlG,cAA6G,OAAOH,GAAGC,EAA6E,SAASqB,EAAE/B,EAAEI,GAAG,OAAOJ,EAAEG,YAAEE,YAAEL,EAAEI,IAAIJ,EAAE,SAASgC,EAAExB,GAAG,IAAQC,EAAGD,EAAPY,IAAS,IAAIX,EAAE,MAAM,CAACW,IAAIX,GAAGA,EAAEJ,YAAEI,EAAED,EAAEyB,QAAQ,IAA6BjD,EAAvB0B,EAAEN,YAAEK,GAAGE,EAAET,EAAEQ,EAAEJ,MAAY,GAAGN,YAAEW,GAAG,MAAMA,EAAEO,UAAU,MAAMV,EAAE0B,MAAMC,UAAUnD,EAAE2B,EAAEO,UAAUT,EAAEE,EAAES,IAAId,UAAU,GAAGE,EAAE4B,sBAAsB,CAAC,IAAMhC,EAAEiB,EAAEX,EAAEJ,MAAMN,YAAEI,KAAKK,EAAEL,EAAEkB,WAAWtC,EAAEoB,EAAEmB,YAAY,MAAM,CAACH,IAAIjB,YAAEM,GAAG0B,QAAQnD,GAAG,SAASqD,EAAErC,EAAEI,EAAED,EAAEE,EAAEI,GAAGE,YAAEP,EAAEC,EAAE,MAAMI,GAAGJ,EAAEe,KAAK,MAAMpB,EAAEmC,UAAU9B,EAAEe,IAAIZ,YAAEH,EAAEe,IAAIjB,EAAEH,EAAEmC,QAAQG,aAAa,SAASC,EAAEvC,GAAG,IAAIA,EAAE,OAAM,EAAG,IAAMI,EAAEJ,EAAEiB,cAAcd,GAAG,IAAIC,EAAEQ,QAAQ,cAAcP,GAAG,IAAID,EAAEQ,QAAQ,wBAAwBJ,GAAG,IAAIJ,EAAEQ,QAAQ,0BAA0BH,GAAG,IAAIL,EAAEQ,QAAQ,cAAc,OAAOT,IAAIE,GAAGG,GAAGC,K,iCCJjzE,uDAI6IY,EAAE,CAACmB,OAAOxC,YAAE,EAAE,SAAS,UAAUyC,KAAKzC,YAAE,EAAE,SAAS,QAAQ,UAAUA,YAAE,EAAE,SAAS,WAAW0C,MAAM1C,YAAE,EAAE,SAAS,SAAS2C,MAAM3C,YAAE,EAAE,SAAS,SAAS,iBAAiBA,YAAE,EAAE,SAAS,kBAAkB4C,YAAY5C,YAAE,EAAE,SAAS,eAAe6C,YAAY7C,YAAE,EAAE,SAAS,eAAe8C,WAAW9C,YAAE,EAAE,SAAS,cAAc+C,OAAO/C,YAAE,EAAE,SAAS,UAAUgD,WAAWhD,YAAE,EAAE,SAAS,cAAc,kBAAkB,EAAEQ,YAAE,EAAE,SAASL,IAAE8C,U,gKCA/HlD,EAAE,SAAAA,GAAI,IAAIL,EAAC,yJAAiB,WAAY,GAAGwD,KAAKC,KAAK,UAAU,aAAaD,KAAKE,SAAS,SAAS,OAAOF,KAAKC,KAAK,SAAS,GAAGD,KAAK9B,IAAI,CAAC,IAAMjB,EAAEM,YAAEyC,KAAK9B,KAAK,GAAGpB,YAAEG,IAAIA,EAAEU,MAAM,OAAOV,EAAEU,MAAM,OAAOqC,KAAKC,KAAK,UAAU,IAA9M,IAAiN,SAAUhD,GAAG+C,KAAKG,KAAK,QAAQlD,KAAhP,eAAmP,SAAQA,GAAG+C,KAAKG,KAAK,MAAMrE,YAAEmB,EAAEC,IAAEkD,UAAUJ,KAAKK,qBAAnS,GAAexD,GAAuS,OAAOI,YAAE,CAACK,eAAKd,EAAE8D,UAAU,QAAQ,MAAMrD,YAAE,CAACK,YAAE,CAACiD,KAAKC,UAAUhE,EAAE8D,UAAU,MAAM,MAAM9D,EAAES,YAAE,CAACO,YAAE,qCAAqChB,K,6ICA9hB,IAAMe,EAAE,SAAAA,GAAI,IAAIC,EAAC,0JAAiB,WAAa,IAAIV,EAAE,OAAOkD,KAAKS,cAAc,UAAUT,KAAKC,KAAK,UAAxI,SAAWnD,GAAG,MAAM,eAAeA,EAA+GG,CAAE+C,MAAM,OAAOlD,EAAEkD,KAAKU,iBAAY,EAAO5D,EAAE6D,OAAO,MAA9I,IAAmJ,SAAW7D,GAAG,MAAMA,EAAEkD,KAAKY,UAAU,SAAS9D,IAAIkD,KAAKa,eAAe,UAAUb,KAAKc,MAAM,SAAS,aAAvP,GAAevD,GAAmP,OAAOT,YAAE,CAACI,YAAE,CAACqD,KAAKC,UAAUhD,EAAE8C,UAAU,SAAS,MAAM9C,EAAEV,YAAE,CAACQ,YAAE,mCAAmCE,K,uECARR,E,yJAAQH,EAAEK,cAAI,CAAC6D,YAAY,yBAAyBC,uBAAuB,yBAAyBC,YAAY,gBAAgBxD,EAAEZ,EAAEqE,WAAWrD,QAAQZ,YAAEQ,EAAE,eAAe,IAAMoB,EAAE3B,cAAI,CAACiE,MAAM,SAASC,KAAK,OAAO,UAAU,UAAU,cAAc,cAAc,cAAc,eAAe,cAAc,eAAe,aAAa,cAAc,aAAa,aAAa,cAAc,eAAe,sBAAsB,uBAAuB,cAAc,eAAe,mBAAmB,oBAAoB,kBAAkB,kBAAkB,6BAA6B,8BAA8B,gBAAgB,gBAAgB,iBAAiB,mBAAuBjD,EAAEnB,EAAC,kDAAiB,WAAYF,GAAE,kCAAC,cAAMA,IAAQuE,YAAY,yBAAyB,EAAKC,WAAW,SAAS,EAAKC,QAAQ,KAA1F,EAA/B,oDAA8H,SAAiBzE,EAAEG,EAAEC,GAAG,OAAOL,EAAE2E,MAAM1E,EAAEG,EAAEC,KAAzK,6BAA4K,SAAgBJ,EAAEG,EAAEC,GAAqB,OAAVL,EAAE4E,KAAK3E,KAAcI,GAAGA,EAAEwE,UAAUxE,EAAEwE,SAAShD,KAA+4B,SAAW5B,EAAEG,GAAG,OAAO,IAAIE,IAAE,2BAAN,iCAA2DL,EAA3D,sBAAiFG,GAAl/BN,CAAEG,EAAE,CAAC6E,QAAQzE,KAAK,QAAjR,4BAAuR,SAAeJ,EAAEG,EAAEC,GAAqB,OAAV2B,EAAE4C,KAAK3E,KAAcI,GAAGA,EAAEwE,UAAUxE,EAAEwE,SAAShD,KAAKE,EAAE9B,EAAE,CAAC6E,QAAQzE,KAAK,QAA3X,mCAAiY,SAAsBJ,EAAEG,EAAEC,GAA2B,OAAhBK,YAAET,IAAI+B,EAAE4C,KAAK3E,KAAcI,GAAGA,EAAEwE,UAAUxE,EAAEwE,SAAShD,KAAKE,EAAE9B,EAAE,CAAC6E,QAAQzE,KAAK,QAAlf,yBAAwf,SAAYJ,EAAEG,GAAG,OAAOA,EAAEsE,SAAStE,EAAE2E,WAAW3E,EAAE4E,QAA1iB,mBAAgjB,WAAQ,OAAO,IAAI7E,EAAE,CAACqE,YAAYrB,KAAKqB,YAAYC,WAAWtB,KAAKsB,WAAWC,QAAQvB,KAAKuB,YAA3oB,oBAAqpB,SAAOzE,GAAG,QAAQA,IAAIkD,OAAOlD,GAAGkD,KAAKqB,cAAcvE,EAAEuE,aAAarB,KAAKsB,aAAaxE,EAAEwE,YAAYtB,KAAKuB,UAAUzE,EAAEyE,WAAxwB,mBAAo4B,SAAMzE,EAAEG,GAAG,OAAOA,EAAC,aAAE6E,OAAO,aAAe7E,GAAzB,6DAAwCH,EAAEG,MAAh8B,+BAAixB,SAAwBH,EAAEG,GAAG,IAAMC,EAAEI,YAAEL,GAAG,OAAO,IAAID,EAAE,CAACqE,YAAYvE,EAAEuE,YAAYC,WAAWpE,EAAEqE,QAAQzE,EAAEyE,YAA13B,sBAAm8B,SAAgBzE,GAAG,IAAIA,EAAE,OAAO,KAAK,IAAMG,EAAE,IAAID,EAAE,OAAOC,EAAEwE,KAAK3E,EAAE,CAACgF,OAAO,cAAc7E,MAA5hC,GAAeO,KAAihC,SAASoB,EAAE9B,EAAEG,GAAG,OAAO,IAAIE,IAAE,0BAAN,gCAAyDL,EAAzD,sBAA+EG,GAA8GH,YAAE,CAACT,YAAE,CAACkE,KAAK1D,EAAEkF,UAAUC,eAAc,EAAGC,KAAK,CAACC,QAAQ,CAAC,YAAY,CAAC3B,KAAK9C,EAAE0E,QAAQ,oBAAoBhE,EAAEmC,UAAU,mBAAc,GAAQxD,YAAE,CAAC2B,YAAE,YAAY,gBAAgBN,EAAEmC,UAAU,mBAAmB,MAAMxD,YAAE,CAAChB,YAAE,CAAC,YAAY,WAAW,gBAAgBqC,EAAEmC,UAAU,kBAAkB,MAAMxD,YAAE,CAACT,YAAE,CAACkE,KAAK1B,EAAEkD,UAAUC,eAAc,EAAGC,KAAK,CAACC,QAAQ,CAAC,YAAY,CAAC3B,KAAK1B,EAAEqC,WAAWM,MAAM3C,EAAE2C,YAAYrD,EAAEmC,UAAU,kBAAa,GAAQxD,YAAE,CAAChB,YAAE,YAAY,eAAeqC,EAAEmC,UAAU,iBAAiB,MAAMxD,YAAE,CAAChB,YAAE,UAAU,eAAeqC,EAAEmC,UAAU,wBAAwB,MAAMxD,YAAE,CAACT,YAAE,CAACkE,KAAKC,OAAOwB,eAAc,EAAGC,KAAK,CAACC,QAAQ,CAAC,YAAY,CAACV,OAAM,QAASrD,EAAEmC,UAAU,eAAU,GAAQxD,YAAE,CAAChB,YAAE,UAAU,UAAU,CAAC,UAAU,YAAY,WAAWqC,EAAEmC,UAAU,cAAc,MAAoD,IAAI1D,EAAlDuB,EAAEnB,EAAEF,YAAE,CAACN,YAAE,kCAAkC2B,I,mhBCA9qG3B,E,8EAAf,WAAiBM,GAAjB,MAAAT,EAAA,yCAAAA,EAAA,6DAAmBY,EAAnB,+BAAqB,GAAGZ,EAAxB,gCAAiCS,EAAEsF,KAAK/F,GAAxC,cAAiDmB,EAAEF,YAAER,EAAEuF,QAAQ,aAA/D,EAAyIpF,EAA5DqF,MAAMnF,OAAnF,MAAqF,EAArF,IAAyIF,EAAlDsF,IAAI/F,OAA3F,MAA6F,GAA7F,IAAyIS,EAAzCuF,UAAU/E,OAA1G,MAA4G,MAA5G,IAAyIR,EAAvBwF,UAAyB3G,EAAE,CAAC4G,MAAM,CAACJ,MAAMnF,EAAEoF,IAAI/F,EAAEgG,UAAU/E,EAAEgF,eAA/K,MAA8H,UAA9H,EAA2LE,MAAM7F,EAAE6D,QAAQiC,OAAO1F,YAAEb,EAAE,WAAtN,UAAyOS,EAAE+F,OAAOC,SAAStF,EAAE1B,GAA7P,eAAiOe,EAAjO,yBAAsQ,CAACkG,MAAMlG,EAAEkG,MAAMC,UAAUnG,EAAEmG,UAAUC,UAAUpG,EAAEoG,UAAUC,KAAK,gBAAUjG,EAAV,EAAEkG,QAAejG,EAAjB,EAAYkG,KAAgB/G,EAA5B,EAAmBgH,SAAnB,MAAkC,CAACF,QAAQ,IAAIG,KAAKrG,GAAGmG,KAAKlG,EAAEmG,SAASvG,EAAEyG,iBAAiBlH,SAAha,4C,iCAAuboB,E,oFAAf,WAAiBX,EAAEU,EAAEL,EAAEX,GAAvB,6BAAAH,EAAA,yDAA8BS,EAAE0G,UAAhC,sBAAgD,IAAIvG,IAAJ,+BAA8BO,EAA9B,iBAA+C,uCAA/F,cAA4IC,EAAEX,EAAE4D,WAAhJ,SAAiKjD,EAAE2E,KAAK5F,GAAxK,cAAiLe,EAAED,YAAEG,EAAEgG,YAAY,QAAQjG,EAAE,eAAe,mBAA5N,EAAqPX,EAAEC,EAAEM,MAAzP,mBAAgPtB,EAAhP,KAAkPkB,EAAlP,eAAuQyB,EAAEtB,GAAzQ,eAA+PgB,EAA/P,OAA4QxB,EAAE,IAAI+G,SAAgB5H,GAAG,MAAMA,GAAGa,EAAEgH,OAAO,kBAAkB7H,GAAGa,EAAEgH,OAAO,WAAW3G,GAAGL,EAAEgH,OAAO,OAAOxF,EAAEnB,GAAGL,EAAEgH,OAAO,IAAI,QAAQtH,YAAEG,IAAIA,EAAEoH,QAAQjH,EAAEgH,OAAO,SAASnH,EAAEoH,QAAjb,UAA+bnG,EAAEoF,OAAOC,SAASvF,EAAE,CAACsG,OAAO,OAAOC,KAAKnH,EAAEiG,OAAO1F,YAAEV,EAAE,YAApf,iCAAggBM,GAAhgB,4C,iCAAihBS,E,kFAAf,WAAiBT,EAAET,EAAEmB,GAArB,eAAAnB,EAAA,yDAA4BA,EAAEmH,UAA9B,sBAA8C,IAAIvG,IAAE,4CAA4C,uCAAhG,uBAA6IH,EAAEsF,KAAK5E,GAApJ,cAA6JL,EAAEG,YAAER,EAAE2G,YAAY,mBAA/K,SAAwM3G,EAAE+F,OAAOC,SAAS3F,EAAE,CAAC0G,OAAO,OAAOnB,MAAM,CAACW,SAAShH,EAAEe,MAAMwF,OAAO1F,YAAEM,EAAE,YAA9Q,OAA0RnB,EAAEqE,WAAW,KAAvS,4C,+BAA2T5E,E,gFAAf,WAAiBgB,EAAEG,GAAnB,IAAAZ,EAAA,SAAAA,EAAA,sEAA4BS,EAAEsF,KAAKnF,GAAnC,cAA4CZ,EAAEiB,YAAER,EAAE2G,YAAY,mBAA9D,kBAAwF3G,EAAE+F,OAAOC,SAASzG,EAAE,CAACwH,OAAO,OAAOnB,MAAM,CAACqB,WAAU,GAAInB,OAAO1F,YAAED,EAAE,aAA3J,4C,sBAAuK,SAASJ,EAAEC,GAAG,IAAMG,EAAEH,EAAEkH,YAAY,KAAK,OAAO,IAAI/G,EAAE,CAAC,IAAIH,GAAG,CAACA,EAAEe,MAAM,EAAEZ,GAAGH,EAAEe,MAAMZ,EAAE,IAAI,SAASD,EAAEF,GAAG,MAAyC,SAAWA,GAAG,IAAMG,EAAEE,YAAEL,GAAG,OAAOU,YAAEP,GAAG,CAACH,EAAE,IAAI,CAACA,EAAEe,MAAM,EAAEf,EAAE6B,OAAO1B,EAAE0B,OAAO,GAA7B,WAAoC1B,IAAhHkB,CAAErB,GAAb,mBAAMG,EAAN,KAAQC,EAAR,OAAsBL,EAAEI,GAAxB,mBAA2B,MAAM,CAAjC,UAAsCC,G,SAAyGuB,E,8EAAf,WAAiBxB,GAAjB,SAAAZ,EAAA,2DAAuBY,aAAagH,MAApC,yCAAgDhH,GAAhD,uBAA+DH,kBAAEG,EAAEiB,IAAI,CAACgG,aAAa,SAArF,uCAA+FC,MAA/F,4C,sBAAoG,SAASxH,EAAEG,EAAEG,GAAG,IAAIH,EAAE0G,UAAU,OAAO,KAAK,MAAYxG,EAAEF,EAAEM,MAAhB,mBAAMF,EAAN,KAASb,EAAT,KAAsB,OAAOS,EAAE4D,WAAW6C,iBAAiBjG,YAAEJ,EAAED,EAAEZ,IAAI,SAASuB,EAAEd,EAAEG,GAAG,IAAIH,EAAE0G,UAAU,OAAO,KAAK,MAAYxG,EAAEF,EAAEM,MAAhB,mBAAMF,EAAN,KAASb,EAAT,KAAsB,OAAOS,EAAE4D,WAAW6C,iBAAiBjG,YAAEJ,EAAED,EAAEZ,M,gICAj/Dc,E,wFAAf,WAAiBA,EAAEF,EAAEK,EAAEjB,EAAEkB,EAAEP,GAA3B,uBAAAX,EAAA,yDAAkCP,EAAE,MAAQoB,YAAEI,GAA9C,wBAAwDE,EAAxD,UAA6DL,EAA7D,eAA4EF,EAAEO,EAAE4G,KAAKC,MAAM/G,EAAEgH,UAAUhH,EAAEiH,cAAzG,kBAA8JzH,kBAAEG,EAAE,CAACyF,MAAM,CAAC/F,EAAE,OAAOgG,MAAMtG,GAAG6H,aAAa,OAAOtB,OAAO5F,IAAvN,0BAA4NmH,KAA5N,KAA2O7G,EAAEgH,UAA7O,KAAgQhH,EAAEiH,aAAlQ,KAAyRjH,EAAEkH,uBAA3R,KAA4ThH,EAA5T,mBAAkI+C,KAAK,OAAOkE,SAA9I,KAAiOH,UAAjO,KAAuPI,SAAvP,KAA+QC,UAA/Q,KAAkTC,UAAlT,yCAAwU1H,YAAEK,IAAIA,EAAEsH,KAAK,oBAAoB,iEAAiE5H,EAA5F,MAAiGnB,EAAC,KAAhb,WAAwbmB,EAAxb,0CAAic,MAAjc,eAA4cJ,EAA5c,UAAidM,EAAjd,WAA4dX,EAAEK,GAAGI,GAAGA,EAAE6H,MAAM,KAAKC,OAAjf,oBAA+hBjI,kBAAEN,EAAE,CAACkG,MAAM,CAAC/F,EAAE,OAAOgG,MAAMtG,GAAG6H,aAAa,OAAOtB,OAAO5F,IAAxlB,2BAA6lBmH,KAA7lB,KAA4mBtH,EAA5mB,mBAAmgB0D,KAAK,OAAOyE,SAA/gB,KAAkmBJ,UAAlmB,gDAA8nB,IAAIpH,IAAE,iCAAiC,qBAAqB,CAACyH,UAAUnJ,EAAEoJ,UAAS,KAAGhH,IAAI1B,IAAvtB,kE,2DCAhH,SAASe,EAAEA,GAAG,OAAOA,GAAG,gBAAgBA,GAAG,aAAaA,EAJxD,mC,0PCI2E,SAASL,EAAEA,GAAGA,GAAGA,EAAEiI,mBAAmBjI,EAAEiI,kBAAkBC,SAAS,SAAAlI,GAAI,IAAMD,EAAEC,EAAEmI,OAAOnI,EAAEoI,WAAWpI,EAAEqI,YAAYrI,EAAEoI,WAAW/H,YAAEN,IAAIA,EAAEuI,aAAatI,EAAEuI,SAASvI,EAAEoI,c,6GCAmEjJ,E,kFAAf,WAAiBa,EAAEb,EAAEoB,GAArB,+CAAApB,EAAA,yDAA4BA,GAAIA,EAAE4G,UAAlC,iDAAyDxE,EAAEpC,EAAEqE,aAAaxD,EAAEwD,WAAW,IAAIgF,IAAIxI,EAAEyI,OAAO,IAAID,IAAIxI,EAAEyI,MAAMhH,OAAO,EAAEzB,EAAEwD,WAAWrE,EAAEqE,WAAiBnD,EAAE,IAAImI,IAAIrJ,EAAE4G,UAAU2C,OAAO1C,KAAK,SAAAhG,GAAC,OAAEA,EAAEmG,SAASjG,SAAQT,EAAE,IAAI+I,IAAIvH,EAAE,GAAGZ,EAAE6H,SAAS,SAAAtI,GAAI2B,EAAEoH,OAAO/I,GAAGI,EAAEyI,MAAMjH,KAAK5B,MAAhR,cAAqST,EAAE4G,UAAU6C,UAAjT,IAAsR,2BAAUhJ,EAAV,QAAuC2B,EAAEoH,OAAO/I,EAAEuG,SAASjG,MAAMG,EAAEwI,IAAIjJ,EAAEuG,SAASjG,OAAOT,EAAEoJ,IAAIjJ,EAAEuG,SAASjG,OAAsBI,EAA8BV,EAAvCuG,SAAmBpG,EAAoBH,EAA5BkJ,QAAiB3J,EAAWS,EAAlBmJ,OAAepJ,EAAGC,EAAToJ,MAAWzH,EAAEjC,gCAAEgB,EAAEF,eAAKJ,EAAEyI,MAAMjH,KAAKD,EAAErB,MAAMe,EAAEO,KAAKvB,EAAE,CAACkG,SAAS5E,EAAEuH,QAAQ/I,EAAEgJ,OAAO5J,EAAE6J,MAAMrJ,GAAGY,MAASP,EAAEyI,MAAMjH,KAAK5B,EAAEuG,SAASjG,MAAMe,EAAEO,KAAK7B,EAAEC,EAAEW,IAAId,EAAEwJ,IAAIrJ,EAAEuG,SAASjG,OAA9kB,4CAAmmBf,EAAE4G,UAAUmD,OAA/mB,IAAolB,2BAAUtJ,EAAV,QAAiCqB,EAAEO,KAAKvB,EAAEL,EAAEW,IAAIP,EAAEyI,MAAMjH,KAAK5B,EAAEuG,SAASjG,MAA5pB,iCAAqqBqB,EAAE2G,SAAS,SAAAlI,GAAI,IAAMJ,EAAET,EAAEqE,WAAW6C,iBAAiBrG,GAAGiB,EAAEO,KAAK5B,EAAE4D,WAAW2F,eAAevJ,GAAGwJ,OAAO,mBAAa,IAAInI,EAAEQ,OAA7xB,oEAAyzBnB,YAAEW,GAA3zB,WAAizBrC,EAAjzB,OAA8zBmB,YAAEQ,GAAST,EAAElB,EAAEyK,QAAQ,SAAArJ,GAAC,MAAE,UAAUA,KAAIgG,KAAK,SAAAhG,GAAC,OAAEA,EAAEgJ,WAAWlJ,EAAE2B,OAAO,GAAp4B,uBAA44B,IAAI7B,IAAE,iBAAiB,uCAAuC,CAAC0J,OAAOxJ,IAAl9B,6C,+BAAq+BG,E,gFAAf,WAAiBL,EAAEU,GAAnB,eAAAnB,EAAA,sEAAoCa,YAAEJ,EAAEuG,SAAS3C,WAAW+F,YAAY3J,EAAEuG,SAASvG,EAAEkJ,QAAQxI,IAA7F,WAAoG,KAAxEP,EAA5B,QAA2GyJ,GAA3G,sBAAoH5J,EAAEoJ,OAAOpJ,EAAEoJ,MAAMjJ,EAAEiJ,OAAOjJ,EAAEiJ,MAAhJ,OAAsJpJ,EAAEmJ,QAAQnJ,EAAEmJ,OAAOnJ,EAAEuG,UAA3K,4C,+BAAoMxG,E,gFAAf,WAAiBC,EAAEU,GAAnB,eAAAnB,EAAA,sEAAoCa,YAAEJ,EAAEuG,SAASsD,OAAO7J,EAAEkJ,QAAQxI,IAAlE,WAAyE,KAA7CP,EAA5B,QAAgFyJ,GAAhF,sBAAyF5J,EAAEoJ,MAAMjJ,EAAEiJ,OAAOjJ,EAAEiJ,MAA5G,OAAkHpJ,EAAEmJ,OAAOnJ,EAAEuG,UAA7H,4C,sBCArJ,IAAMuD,EAAEpJ,IAAE4C,UAAU,mCAAmCyG,EAAE,SAAArJ,GAAI,IAAIqJ,EAAC,kDAAiB,aAAa,kCAAC,eAASC,YAAgBC,iBAAiB,KAAK,EAAKC,WAAW,KAAK,EAAKC,gBAAgB,KAAK,EAAKC,SAAS,EAAE,EAAKC,SAAS,EAAE,EAAKC,QAAQ,CAACC,MAAM/I,OAAOgJ,IAAIC,MAAMjJ,OAAOgJ,IAAIE,cAAc,IAAI,EAAKC,UAAU,KAAK,EAAKC,kBAAkB,aAAa,EAAK/J,MAAM,KAAK,EAAKsB,QAAQ,KAAK,EAAK0I,UAAU,KAAK,EAAKC,yBAAyBtK,YAAC,uCAAE,WAAMR,EAAEG,EAAEC,GAAV,SAAAb,EAAA,2DAAsBS,EAAtB,OAA8B,IAA9B,OAA0D,IAA1D,+CAAuC,EAAK+K,MAAM5K,IAAlD,gCAAmE,EAAK6K,QAAQ5K,EAAED,IAAlF,2CAAF,2DAA9U,EAA9B,wDAAuc,SAAqBH,EAAEG,GAAG,OAAO+C,KAAK+H,sBAAsB9K,KAAngB,mCAAsgB,SAAsBH,GAAG,GAAG,MAAMA,EAAEiK,iBAAiB,OAAOnI,IAAEoJ,SAASlL,EAAEiK,kBAAmB,IAAM9J,EAAEH,EAAEmL,MAAM/K,EAAED,EAAEiL,UAAUjL,EAAEkL,cAAc3K,EAAEN,GAAGe,SAASf,EAAEkL,UAAUlL,EAAE8G,YAAY,KAAK,EAAE9G,EAAEyB,QAAQ,IAAI,OAAO,MAAMnB,EAAE,IAAIoB,IAAEpB,GAAG,OAAruB,4BAA2uB,SAAeV,EAAEG,EAAEC,GAAG,GAAG,MAAMJ,GAAG,iBAAiBA,EAAE,CAAC,IAAMU,EAAE,MAAMV,EAAEiK,iBAAR,2BAA6BjK,GAA7B,IAA+BiK,iBAAiB/G,KAAK+H,sBAAsB9K,KAAIH,EAAE,OAAOW,IAAEuK,SAASxK,EAAEN,GAAG,IAAMM,EAAEP,EAAEgL,MAAM1K,EAAEyC,KAAK+H,sBAAsB9K,GAAG,OAAO,MAAMM,GAAG,MAAMC,GAAG,MAAMA,EAAE6K,SAASC,MAAMC,QAAQ/K,EAAE6K,SAAS7K,EAAE6K,OAAOG,MAAM,SAAA1L,GAAC,OAAEA,EAAEgC,KAAI,KAAK,IAAIrB,IAAE,CAACgL,KAAKjL,EAAE6K,OAAO,GAAGK,KAAKlL,EAAE6K,OAAO,GAAGM,KAAKnL,EAAE6K,OAAO,GAAGO,KAAKpL,EAAE6K,OAAO,GAAGtB,iBAAiBxJ,MAA7nC,yBAAioC,SAAYT,EAAEG,GAAG,IAAMC,EAAED,EAAEgL,MAAMzK,EAAE,MAAMN,EAAEkK,QAAQlK,EAAEkK,QAAQhI,WAAW,GAAG7B,EAAE,CAAC8J,MAAM/I,OAAOgJ,IAAIC,MAAMjJ,OAAOgJ,IAAIE,cAAchK,GAAGF,EAAEE,EAAEsH,MAAM,KAAK,OAAOxH,EAAEqB,QAAQ,IAAIpB,EAAE8J,MAAMpJ,SAASX,EAAE,GAAG,IAAIC,EAAEgK,MAAMtJ,SAASX,EAAE,GAAG,KAAKC,IAA31C,iCAA61C,SAAoBT,GAAG,MAAM,eAAekD,KAAK0H,uBAAkB,EAAO5K,IAAv6C,8BAAy6C,SAAiBA,EAAEG,GAAG,IAAMC,EAAE8C,KAAKU,YAAYV,KAAKU,WAAW/C,MAAM,GAAG,eAAeqC,KAAK0H,kBAAkB,OAAOjJ,YAAEuB,KAAK9B,IAAIjB,EAAE4L,MAAM,IAAIrL,EAAEP,EAAE4L,KAAK,IAAIrL,GAAGwC,KAAK9B,IAAI,CAAC,IAAMpB,EAAEH,YAAEqD,KAAK9B,KAAKX,YAAET,KAAKU,EAAEV,EAAEa,OAAO,MAAM,gCAAgCqC,KAAK0H,mBAAmBxK,IAAIM,EAAEN,EAAE,MAAMM,GAAGZ,YAAEY,KAAtsD,eAAysD,SAAQV,GAAG,IAAMG,EAAE4B,YAAE,CAACG,MAAMgB,KAAK9B,IAAIpB,EAAEoC,uBAAsB,EAAGH,OAAO6H,IAAI5G,KAAKG,KAAK,MAAMlD,EAAEiB,KAAK,MAAMjB,EAAEgC,SAASe,KAAKG,KAAK,UAAUlD,EAAEgC,WAAl1D,sBAA21D,SAASnC,EAAEG,EAAEC,EAAEM,GAAG6B,YAAEW,KAAKlD,EAAE,SAASG,EAAEO,KAAj4D,qBAAo4D,WAAgB,IAAMV,EAAEkD,KAAKC,KAAK,OAAO,IAAInD,EAAE,OAAO,KAAK,IAAMG,EAAEZ,YAAES,GAAG,OAAO,MAAMkD,KAAKf,UAAUhC,EAAEG,KAAF,UAAUH,EAAEG,KAAZ,mBAA2B4C,KAAKf,UAAWhC,IAAnhE,+EAAqhE,WAAiCH,EAAEG,GAAnC,SAAAZ,EAAA,yDAAsC2D,KAAK2H,UAAUmB,YAAE9I,KAAK+I,UAAU3L,KAAK4C,KAAKgF,SAASlI,EAAEkD,KAAKW,OAAOiG,EAAE3J,GAAzG,KAA4G,MAAM+C,KAAKgH,YAAYhH,KAAKgH,WAAWgC,KAAnJ,iCAAyJhJ,KAAzJ,SAAkLA,KAAK2H,UAAvL,wBAA8JsB,cAA9J,gEAArhE,oFAAutE,SAAcnM,GAAG,GAAG,UAAU,MAAMA,OAAE,EAAOA,EAAEyD,MAAM,CAAC,IAAItD,EAAEO,EAAQD,EAAET,EAAEwH,UAAUxH,EAAE4H,SAASpH,EAAE,OAAOL,EAAEH,EAAE2H,WAAW,OAAOjH,EAAEP,EAAEiM,YAAO,EAAO1L,EAAED,GAAG,GAAG,MAAMD,GAAG,MAAMA,EAAE6L,KAAK,MAAM7L,EAAE6L,IAAIC,QAAQ,MAAM9L,EAAE6L,IAAIE,SAAS,MAAM,IAAInM,IAAE,iCAAiC,sBAAsB,GAAGI,EAAE6L,IAAIC,OAAO,GAAGtK,GAAG,MAAMkB,KAAKgH,YAAYhH,KAAKgH,WAAWgC,KAAK,OAAO,IAAM3M,EAAEiB,EAAE6L,IAAIE,SAASlM,EAAEG,EAAE6L,IAAIC,OAAO,GAAGtN,EAAEsI,KAAKkF,KAAKjN,EAAE,GAAGA,EAAE,GAAGA,EAAE,GAAGA,EAAE,GAAGA,EAAE,GAAGA,EAAE,IAAI2D,KAAKgH,WAAWuC,KAAKpM,EAAErB,EAAEkE,KAAKgH,WAAWwC,KAAKrM,EAAErB,OAAO,GAAG,UAAU,MAAMgB,OAAE,EAAOA,EAAEyD,MAAM,CAAC,IAAIhD,EAAQN,EAAE,OAAOM,EAAET,EAAEkI,eAAU,EAAOzH,EAAEkM,IAAI,IAAInB,MAAMC,QAAQtL,IAAI,IAAIA,EAAE0B,QAAQ1B,EAAE,GAAG6B,EAAE,OAAO,IAAM5B,EAAED,EAAE,GAAGO,EAAEP,EAAE,GAAG+C,KAAKgH,WAAWuC,KAAKrM,EAAEM,EAAEwC,KAAKgH,WAAWwC,KAAKtM,EAAEM,KAA94F,kEAAi5F,WAAoBV,GAApB,eAAAT,EAAA,yDAA0B,MAAM2D,KAAK9B,IAArC,sBAA+C,IAAIhB,IAAE,2BAA2B,oEAAhF,UAAuJ,MAAM8C,KAAKf,UAAS,mBAAmBlC,KAAKiD,KAAK9B,KAAxM,gCAA4N8B,KAAK0J,mBAAmB5M,GAApP,OAAuP,OAAnCG,EAApN,UAAiQ+C,KAAKf,QAAQhC,GAA9Q,gCAAwR+C,KAAK2J,mBAAmB7M,IAAhT,gDAAj5F,8HAAosG,WAAyBA,GAAzB,eAAAT,EAAA,sEAA0CY,kBAAE+C,KAAK9B,IAAI,CAACwE,MAAM,CAAC/F,EAAE,OAAOgG,MAAM3C,KAAKW,QAAQuD,aAAa,OAAOtB,OAAO9F,IAApH,aAAkCI,EAAlC,QAA6HiH,MAAMmE,MAAMC,QAAQrL,EAAEiH,KAAKyF,SAAS1M,EAAEiH,KAAKyF,OAAOjL,OAAO,GAAtL,yCAA+LzB,EAAEiH,KAAKyF,OAAO,GAAGC,IAAhN,gDAApsG,8HAAu5G,WAAyB/M,GAAzB,iBAAAT,EAAA,sEAA0CY,kBAAE+C,KAAK+I,UAAU3L,KAAK,CAACsF,MAAM,CAAC/F,EAAE,OAAOgG,MAAM3C,KAAKW,QAAQuD,aAAa,OAAOtB,OAAO9F,IAA/H,QAAkCI,EAAlC,QAAqI4M,MAAM9J,KAAK9B,IAAI8B,KAAK9B,IAAIK,QAAQ,UAAU,WAAiBf,EAAEN,EAAEiH,KAAKnE,KAAKyB,KAAKjE,EAAE,CAACsE,OAAO,UAAU5D,IAAI8B,KAAK+I,YAAY/I,KAAK+J,cAAcvM,GAA/Q,gDAAv5G,iIAAyqH,sBAAAnB,EAAA,sEAAoC2D,KAAKoC,OAAzC,eAAgD,eAAepC,MAAM,mBAAmBA,KAAKgK,YAA7F,qCAA+GhK,KAAKgK,aAApH,gDAAzqH,iFAA0yH,SAAclN,MAAxzH,iCAA4zH,SAAoBA,EAAEG,EAAEC,GAAGJ,EAAEmN,eAAenN,EAAEmN,aAAa,IAAI,IAArC,EAA2CzM,EAAEP,EAAEiN,kBAA/C,cAAgF1M,GAAhF,IAAiE,gCAAUD,EAAV,QAAiBT,EAAEmN,aAAavL,KAAKnB,IAAtG,8BAAyGT,EAAEmN,eAAenN,EAAEmN,aAAanN,EAAEmN,aAAa1D,QAAQ,SAACzJ,EAAEG,EAAEC,GAAL,OAASA,EAAEQ,QAAQZ,KAAKG,KAAI,IAAIC,IAAIJ,EAAEmN,aAAanN,EAAEmN,aAAa1D,QAAQ,SAAAzJ,GAAC,MAAE,mBAAmBA,SAAtlI,4DAA4lI,WAAcA,EAAEG,GAAhB,UAAAZ,EAAA,WAAAA,EAAA,yDAAyBmB,EAAzB,2BAA+B2M,GAAKlN,GAAOM,EAAE6M,UAAEC,KAAKvN,GAApD,KAAuDS,EAAvD,4BAA2DqJ,EAAEV,MAAM,+CAAnE,SAAwHoE,QAAQC,OAAO,IAAIrN,IAAE,oCAAoC,gDAAjL,cAAkOK,EAAEsM,MAAKtM,EAAEA,EAAEiN,SAAUX,GAAG,MAAYvM,EAAEC,EAAEsF,QAAQ4H,IAAEC,aAApR,UAAuS1K,KAAK2K,wBAA5S,eAAoUpN,EAAEgD,KAAKqK,EAAErN,EAAEsF,OAAOvF,EAAQjB,EAAE,CAACyF,OAAO,cAAc5D,IAAI,KAAKwD,SAAS,GAAGmB,OAAOvF,EAAEoD,WAAWnD,EAAE4H,kBAAkB,GAAG0F,oBAAoB,GAAG5H,UAAU,CAACmD,MAAM,GAAGN,SAAS,GAAGF,OAAO,GAAGkF,kBAAkB,KAAK3N,EAAE,CAACyM,OAAO,CAAC5J,KAAKwB,MAAM,KAAKnF,KAAziB,UAA2jBiO,QAAQS,IAAI1O,EAAE4G,UAAU6H,mBAAnlB,yBAA4mB9K,KAAKgL,2BAA2B7N,EAAEd,EAAEmB,GAAhpB,eAAmpBD,EAAEW,IAAI8B,KAAK9B,IAAIX,EAAEI,QAAQJ,EAAEI,MAAMqC,KAAKrC,OAAOqC,KAAKiL,oBAAoB1N,EAAEC,EAAE,GAA7tB,UAAsuBF,EAAE4N,UAAxuB,yBAAwvB5N,EAAE6N,KAAKC,QAAQ,CAACC,KAAK9N,EAAE+N,OAAO9N,GAAGA,EAAE8N,OAAOnH,KAAKhH,IAAvyB,yBAAizBoO,EAAEvL,KAAKwL,mBAAmBnP,EAAE,MAA70B,eAAm1B2D,KAAKU,WAAWnD,EAAEf,EAAEH,GAAGA,EAAEqE,WAAWnD,EAAv3B,kBAAy3BA,GAAz3B,iDAA5lI,mHAAu9J,WAAYT,GAAZ,mBAAAT,EAAA,yDAAqBY,EAArB,2BAA2BkN,GAAKrN,GAAhC,KAAmCkD,KAAKU,WAAxC,4BAAqDkG,EAAEV,MAAM,wDAA7D,SAA2HoE,QAAQC,OAAO,IAAIrN,IAAE,mCAAmC,iEAAnL,eAAqP8C,KAAKU,WAAWH,OAAOqK,GAA5Q,6BAAgRhE,EAAEV,MAAM,+CAA+ClG,KAAKU,WAAWH,KAAK,cAAcqK,GAA1W,UAAmXN,QAAQC,OAAO,IAAIrN,IAAE,sCAAN,0CAA+E0N,EAA/E,OAAlY,yBAA+d5K,KAAK2K,wBAApe,eAAkgBnN,EAAE,CAACsE,OAAO,cAAc5D,IAAI8B,KAAKU,WAAW2B,SAAShG,YAAE2D,KAAKU,WAAW2B,SAASX,SAAS,GAAGmB,OAAO7C,KAAKU,WAAWmC,QAAQ4H,IAAEC,aAAahK,WAAWV,KAAKU,WAAWyE,kBAAkB,GAAG0F,oBAAoB,GAAG5H,UAAU,CAACmD,MAAM,GAAGN,SAAS,GAAGF,OAAO,GAAGkF,kBAAkB,KAAKvN,EAAE,CAACqM,OAAO,CAAC5J,KAAKwB,MAAM,KAAKhE,KAA/yB,UAAi0B8M,QAAQS,IAAIvN,EAAEyF,UAAU6H,mBAAz1B,yBAAk3B9K,KAAKgL,2BAA2BzN,EAAEC,EAAEP,GAAt5B,eAAy5B+C,KAAKU,WAAWxC,IAAI8B,KAAK9B,IAAI8B,KAAKU,WAAW/C,QAAQqC,KAAKU,WAAW/C,MAAMqC,KAAKrC,OAAOqC,KAAKiL,oBAAoBjL,KAAKU,WAAWzD,EAAE,GAA3hC,UAAoiC+C,KAAKU,WAAWiG,OAAO,CAACxC,KAAK5G,IAAjkC,yBAA2kCgO,EAAEvL,KAAKwL,mBAAmBhO,EAAE,MAAvmC,eAA6mChB,EAAEgB,GAA/mC,kBAAknCwC,KAAKU,YAAvnC,iDAAv9J,sIAAylM,WAAiC5D,EAAEG,EAAEO,GAArC,qBAAAnB,EAAA,yDAA4CkB,EAAEN,EAAEyE,SAAS6E,QAAQ,SAAAzJ,GAAC,MAAE,UAAUA,EAAEyD,QAAO2C,KAAK,SAAApG,GAAC,OAAE,IAAII,IAAEJ,EAAE+L,KAAK/L,EAAE2O,QAAQ3O,EAAE4O,YAAclO,GAAGA,EAAEmO,kBAAkBC,oBAAoBrO,EAAEA,EAAEgJ,QAAQ,SAAAzJ,GAAC,MAAE,sBAAsBA,EAAE+L,MAAM,uBAAuB/L,EAAE+L,MAAM,6BAA6B/L,EAAE+L,MAAM,yBAAyB/L,EAAE+L,MAAM,oBAAoB/L,EAAE+L,MAAM,kCAAkC/L,EAAE+L,UAAQrL,EAAEmO,kBAAkBE,UAASC,EAAxa,iCAA0b,gCAA1b,aAAib7O,EAAjb,OAAme8O,SAASjP,EAAEU,EAAEwO,sBAA0BrN,OAAO,GAAjhB,oBAA0hB7B,EAA1hB,wCAA6jBG,EAAEP,KAAK,OAAWkK,EAAEV,MAAF,wCAAyCpJ,IAAK,UAAUU,EAAEmO,kBAAkBM,WAA3pB,uBAA6qBnP,EAAEG,EAAEiG,KAAK,SAAApG,GAAC,OAAE,IAAII,IAAE,iCAAiCJ,MAAKoP,OAAO3O,GAAS,IAAIL,IAAE,8BAA8B,4EAA4E,CAACiP,SAASrP,IAA/2B,aAAw3BS,EAAEoB,OAAO,GAAj4B,uBAAy4B,IAAIzB,IAAE,oBAAoB,wHAAwH,CAACsJ,OAAOjJ,IAAniC,4CAAzlM,gEAAeC,GAAmnO,OAAOV,YAAE,CAACK,YAAES,MAAIiJ,EAAEvG,UAAU,UAAK,GAAQxD,YAAE,CAACK,YAAE,CAACoD,KAAK3B,OAAKiI,EAAEvG,UAAU,wBAAmB,GAAQxD,YAAE,CAAChB,YAAE,mBAAmB,CAAC,mBAAmB,iBAAiB,yBAAyB+K,EAAEvG,UAAU,uBAAuB,MAAMxD,YAAE,CAACK,YAAE,CAACoD,KAAK9C,OAAKoJ,EAAEvG,UAAU,kBAAa,GAAQxD,YAAE,CAAChB,YAAE,aAAa,CAAC,aAAa,eAAe,mBAAmB,iBAAiB,yBAAyB+K,EAAEvG,UAAU,iBAAiB,MAAMxD,YAAE,CAACK,YAAE,CAACiP,UAAS,EAAG7L,KAAKpC,OAAK0I,EAAEvG,UAAU,uBAAkB,GAAQxD,YAAE,CAACK,YAAE,CAACoD,KAAKjC,OAAO2D,KAAK,CAAC4G,KAAK,2BAA2BrH,OAAM,EAAGU,QAAQ,CAACmK,QAAQ,CAAC5K,KAAK,CAAC6K,OAAO,YAAY9K,OAAM,QAASqF,EAAEvG,UAAU,gBAAW,GAAQxD,YAAE,CAACK,YAAE,CAACoD,KAAKjC,OAAO2D,KAAK,CAAC4G,KAAK,2BAA2BrH,OAAM,EAAGU,QAAQ,CAACmK,QAAQ,CAAC5K,KAAK,CAAC6K,OAAO,YAAY9K,OAAM,QAASqF,EAAEvG,UAAU,gBAAW,GAAQxD,YAAE,CAACK,YAAE,CAACiP,UAAS,KAAMvF,EAAEvG,UAAU,eAAU,GAAQxD,YAAE,CAAChB,YAAE,UAAU,CAAC,mBAAmB+K,EAAEvG,UAAU,cAAc,MAAMxD,YAAE,CAACK,YAAE,CAACoD,KAAKC,OAAOyB,KAAK,CAACR,KAAK,CAAC6K,OAAO,qBAAqBzF,EAAEvG,UAAU,iBAAY,GAAQxD,YAAE,CAACK,YAAE,CAACoD,KAAKC,OAAOyB,KAAK,CAACR,MAAK,MAAOoF,EAAEvG,UAAU,yBAAoB,GAAQxD,YAAE,CAACK,YAAE,CAACoD,KAAKC,UAAUqG,EAAEvG,UAAU,aAAQ,GAAQxD,YAAE,CAAChB,YAAE,cAAc,UAAU+K,EAAEvG,UAAU,sBAAsB,MAAMxD,YAAE,CAAChB,YAAE,UAAU,QAAQ,CAAC,UAAU+K,EAAEvG,UAAU,mBAAmB,MAAMxD,YAAE,CAACK,YAAE,CAACoD,KAAKjC,OAAO2D,KAAK,CAACC,QAAQ,CAACmK,QAAQ,CAAC5K,KAAK,CAAC6K,OAAO,OAAO,cAAc,CAAC9K,MAAM,CAAC6D,OAAO,KAAKkH,YAAW,EAAGC,cAAa,GAAI/K,MAAK,QAASoF,EAAEvG,UAAU,eAAU,GAAQxD,YAAE,CAACK,YAAEsP,MAAI5F,EAAEvG,UAAU,MAAM,MAAMxD,YAAE,CAACE,YAAE,QAAQ6J,EAAEvG,UAAU,WAAW,MAAMxD,YAAE,CAACK,eAAK0J,EAAEvG,UAAU,YAAY,MAAMxD,YAAE,CAACK,YAAE,CAACiP,UAAS,KAAMvF,EAAEvG,UAAU,aAAQ,GAAQxD,YAAE,CAACK,YAAE,CAACoD,KAAKC,OAAO4L,UAAS,EAAGnK,KAAK,CAACR,KAAK,CAAC6K,OAAO,sBAAsBzF,EAAEvG,UAAU,gBAAW,GAAQuG,EAAE/J,YAAE,CAACD,YAAE,oCAAoCgK,GAAGA,GAAG/H,GAAG,KAAKgN,GAAE,EAAGlB,EAAE,gBAAgBT,EAAE,CAACD,gBAAgB,iBAAI,IAAG8B,oBAAoB,UAAUL,kBAAkB,CAACE,SAAQ,EAAGD,mBAAkB,EAAGK,WAAW","file":"static/js/22.24e7831c.chunk.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{isSome as e}from\"../../core/maybe.js\";import{urlToObject as r,removeTrailingSlash as t,removeQueryParameters as n,join as s,Url as i,makeAbsolute as o}from\"../../core/urlUtils.js\";import{w as u}from\"../../chunks/persistableUrlUtils.js\";const l={mapserver:\"MapServer\",imageserver:\"ImageServer\",featureserver:\"FeatureServer\",sceneserver:\"SceneServer\",streamserver:\"StreamServer\",vectortileserver:\"VectorTileServer\"},a=Object.values(l),c=new RegExp(`^((?:https?:)?\\\\/\\\\/\\\\S+?\\\\/rest\\\\/services\\\\/(.+?)\\\\/(${a.join(\"|\")}))(?:\\\\/(?:layers\\\\/)?(\\\\d+))?`,\"i\"),f=new RegExp(`^((?:https?:)?\\\\/\\\\/\\\\S+?\\\\/([^\\\\/\\\\n]+)\\\\/(${a.join(\"|\")}))(?:\\\\/(?:layers\\\\/)?(\\\\d+))?`,\"i\"),v=/(.*?)\\/(?:layers\\/)?(\\d+)\\/?$/i;function p(e){return!!c.test(e)}function d(e){const t=r(e),n=t.path.match(c)||t.path.match(f);if(!n)return null;const[,s,i,o,u]=n,a=i.indexOf(\"/\");return{title:w(-1!==a?i.slice(a+1):i),serverType:l[o.toLowerCase()],sublayer:null!=u&&\"\"!==u?parseInt(u,10):null,url:{path:s}}}function m(e){const t=r(e).path.match(v);return t?{serviceUrl:t[1],sublayerId:Number(t[2])}:null}function w(e){return(e=e.replace(/\\s*[/_]+\\s*/g,\" \"))[0].toUpperCase()+e.slice(1)}function h(r,t){const n=[];if(r){const t=d(r);e(t)&&t.title&&n.push(t.title)}if(t){const e=w(t);n.push(e)}if(2===n.length){if(-1!==n[0].toLowerCase().indexOf(n[1].toLowerCase()))return n[0];if(-1!==n[1].toLowerCase().indexOf(n[0].toLowerCase()))return n[1]}return n.join(\" - \")}function y(e){if(!e)return!1;const r=\".arcgis.com/\",t=\"//services\",n=\"//tiles\",s=\"//features\",i=-1!==(e=e.toLowerCase()).indexOf(r),o=-1!==e.indexOf(t)||-1!==e.indexOf(n)||-1!==e.indexOf(s);return i&&o}function x(e,r){return r&&e&&-1!==e.toLowerCase().indexOf(r.toLowerCase())}function g(e,r){return e?t(n(e,r)):e}function O(s){let{url:i}=s;if(!i)return{url:i};i=n(i,s.logger);const o=r(i),u=d(o.path);let l;if(e(u))null!=u.sublayer&&null==s.layer.layerId&&(l=u.sublayer),i=u.url.path;else if(s.nonStandardUrlAllowed){const r=m(o.path);e(r)&&(i=r.serviceUrl,l=r.sublayerId)}return{url:t(i),layerId:l}}function C(e,r,t,n,i){u(r,n,\"url\",i),n.url&&null!=e.layerId&&(n.url=s(n.url,t,e.layerId.toString()))}function S(e){if(!e)return!1;const r=e.toLowerCase(),t=-1!==r.indexOf(\"/services/\"),n=-1!==r.indexOf(\"/mapserver/wmsserver\"),s=-1!==r.indexOf(\"/imageserver/wmsserver\"),i=-1!==r.indexOf(\"/wmsserver\");return t&&(n||s||i)}function L(e){if(!e)return!1;const r=new i(o(e)).authority.toLowerCase();return\"server.arcgisonline.com\"===r||\"services.arcgisonline.com\"===r}function b(e){if(!e)return!1;return new i(o(e)).authority.toLowerCase().includes(\"arcgis.com\")}export{w as cleanTitle,b as isAGOLUrl,p as isArcGISUrl,y as isHostedAgolService,x as isHostedSecuredProxyService,L as isServerOrServicesAGOLUrl,S as isWmsServer,d as parse,m as parseNonStandardSublayerUrl,g as sanitizeUrl,O as sanitizeUrlWithLayerId,a as serverTypes,h as titleFromUrlAndName,C as writeUrlWithLayerId};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{convertUnit as e,lengthToDegrees as s}from\"../../core/unitUtils.js\";import{earth as t}from\"../../geometry/support/Ellipsoid.js\";const m={inches:e(1,\"meters\",\"inches\"),feet:e(1,\"meters\",\"feet\"),\"us-feet\":e(1,\"meters\",\"us-feet\"),yards:e(1,\"meters\",\"yards\"),miles:e(1,\"meters\",\"miles\"),\"nautical-miles\":e(1,\"meters\",\"nautical-miles\"),millimeters:e(1,\"meters\",\"millimeters\"),centimeters:e(1,\"meters\",\"centimeters\"),decimeters:e(1,\"meters\",\"decimeters\"),meters:e(1,\"meters\",\"meters\"),kilometers:e(1,\"meters\",\"kilometers\"),\"decimal-degrees\":1/s(1,\"meters\",t.radius)};export{m as meterIn};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../chunks/tslib.es6.js\";import r from\"../../core/Logger.js\";import{isSome as e}from\"../../core/maybe.js\";import{property as s}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/has.js\";import\"../../core/accessorSupport/ensureType.js\";import{subclass as o}from\"../../core/accessorSupport/decorators/subclass.js\";import{parse as i,sanitizeUrl as l}from\"../support/arcgisLayerUrl.js\";const p=p=>{let c=class extends p{get title(){if(this._get(\"title\")&&\"defaults\"!==this.originOf(\"title\"))return this._get(\"title\");if(this.url){const t=i(this.url);if(e(t)&&t.title)return t.title}return this._get(\"title\")||\"\"}set title(t){this._set(\"title\",t)}set url(t){this._set(\"url\",l(t,r.getLogger(this.declaredClass)))}};return t([s()],c.prototype,\"title\",null),t([s({type:String})],c.prototype,\"url\",null),c=t([o(\"esri.layers.mixins.ArcGISService\")],c),c};export{p as ArcGISService};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import{property as r}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/has.js\";import\"../../core/accessorSupport/ensureType.js\";import\"../../core/Logger.js\";import{subclass as s}from\"../../core/accessorSupport/decorators/subclass.js\";function t(e){return\"portalItem\"in e}const i=i=>{let o=class extends i{get apiKey(){var e;return this._isOverridden(\"apiKey\")?this._get(\"apiKey\"):t(this)?null==(e=this.portalItem)?void 0:e.apiKey:null}set apiKey(e){null!=e?this._override(\"apiKey\",e):(this._clearOverride(\"apiKey\"),this.clear(\"apiKey\",\"user\"))}};return e([r({type:String})],o.prototype,\"apiKey\",null),o=e([s(\"esri.layers.mixins.APIKeyMixin\")],o),o};export{i as APIKeyMixin};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../chunks/tslib.es6.js\";import{removeUnordered as t}from\"../core/arrayUtils.js\";import{strict as r}from\"../core/jsonMap.js\";import{JSONSupport as o}from\"../core/JSONSupport.js\";import{unitFromRESTJSON as i,getVerticalUnitStringForSR as s}from\"../core/unitUtils.js\";import n from\"../core/Warning.js\";import{property as a}from\"../core/accessorSupport/decorators/property.js\";import\"../core/has.js\";import\"../core/accessorSupport/ensureType.js\";import\"../core/Logger.js\";import{reader as l}from\"../core/accessorSupport/decorators/reader.js\";import{subclass as c}from\"../core/accessorSupport/decorators/subclass.js\";import{writer as h}from\"../core/accessorSupport/decorators/writer.js\";var d;const p=r()({orthometric:\"gravity-related-height\",gravity_related_height:\"gravity-related-height\",ellipsoidal:\"ellipsoidal\"}),u=p.jsonValues.slice();t(u,\"orthometric\");const g=r()({meter:\"meters\",foot:\"feet\",\"us-foot\":\"us-feet\",\"clarke-foot\":\"clarke-feet\",\"clarke-yard\":\"clarke-yards\",\"clarke-link\":\"clarke-links\",\"sears-yard\":\"sears-yards\",\"sears-foot\":\"sears-feet\",\"sears-chain\":\"sears-chains\",\"benoit-1895-b-chain\":\"benoit-1895-b-chains\",\"indian-yard\":\"indian-yards\",\"indian-1937-yard\":\"indian-1937-yards\",\"gold-coast-foot\":\"gold-coast-feet\",\"sears-1922-truncated-chain\":\"sears-1922-truncated-chains\",\"50-kilometers\":\"50-kilometers\",\"150-kilometers\":\"150-kilometers\"});let m=d=class extends o{constructor(e){super(e),this.heightModel=\"gravity-related-height\",this.heightUnit=\"meters\",this.vertCRS=null}writeHeightModel(e,t,r){return p.write(e,t,r)}readHeightModel(e,t,r){const o=p.read(e);return o||(r&&r.messages&&r.messages.push(f(e,{context:r})),null)}readHeightUnit(e,t,r){const o=g.read(e);return o||(r&&r.messages&&r.messages.push(y(e,{context:r})),null)}readHeightUnitService(e,t,r){const o=i(e)||g.read(e);return o||(r&&r.messages&&r.messages.push(y(e,{context:r})),null)}readVertCRS(e,t){return t.vertCRS||t.ellipsoid||t.geoid}clone(){return new d({heightModel:this.heightModel,heightUnit:this.heightUnit,vertCRS:this.vertCRS})}equals(e){return!!e&&(this===e||this.heightModel===e.heightModel&&this.heightUnit===e.heightUnit&&this.vertCRS===e.vertCRS)}static deriveUnitFromSR(e,t){const r=s(t);return new d({heightModel:e.heightModel,heightUnit:r,vertCRS:e.vertCRS})}write(e,t){return t={origin:\"web-scene\",...t},super.write(e,t)}static fromJSON(e){if(!e)return null;const t=new d;return t.read(e,{origin:\"web-scene\"}),t}};function y(e,t){return new n(\"height-unit:unsupported\",`Height unit of value '${e}' is not supported`,t)}function f(e,t){return new n(\"height-model:unsupported\",`Height model of value '${e}' is not supported`,t)}e([a({type:p.apiValues,constructOnly:!0,json:{origins:{\"web-scene\":{type:u,default:\"ellipsoidal\"}}}})],m.prototype,\"heightModel\",void 0),e([h(\"web-scene\",\"heightModel\")],m.prototype,\"writeHeightModel\",null),e([l([\"web-scene\",\"service\"],\"heightModel\")],m.prototype,\"readHeightModel\",null),e([a({type:g.apiValues,constructOnly:!0,json:{origins:{\"web-scene\":{type:g.jsonValues,write:g.write}}}})],m.prototype,\"heightUnit\",void 0),e([l(\"web-scene\",\"heightUnit\")],m.prototype,\"readHeightUnit\",null),e([l(\"service\",\"heightUnit\")],m.prototype,\"readHeightUnitService\",null),e([a({type:String,constructOnly:!0,json:{origins:{\"web-scene\":{write:!0}}}})],m.prototype,\"vertCRS\",void 0),e([l(\"service\",\"vertCRS\",[\"vertCRS\",\"ellipsoid\",\"geoid\"])],m.prototype,\"readVertCRS\",null),m=d=e([c(\"esri.geometry.HeightModelInfo\")],m);var v=m;export{v as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport e from\"../../request.js\";import t from\"../../core/Error.js\";import{get as r,isSome as a,isNone as o}from\"../../core/maybe.js\";import{join as s,getPathExtension as n}from\"../../core/urlUtils.js\";async function c(e,t={},a){await e.load(a);const o=s(e.itemUrl,\"resources\"),{start:n=1,num:c=10,sortOrder:u=\"asc\",sortField:i=\"created\"}=t,l={query:{start:n,num:c,sortOrder:u,sortField:i,token:e.apiKey},signal:r(a,\"signal\")},p=await e.portal._request(o,l);return{total:p.total,nextStart:p.nextStart,resources:p.resources.map((({created:t,size:r,resource:a})=>({created:new Date(t),size:r,resource:e.resourceFromPath(a)})))}}async function u(e,o,n,c){if(!e.hasPath())throw new t(`portal-item-resource-${o}:invalid-path`,\"Resource does not have a valid path\");const u=e.portalItem;await u.load(c);const i=s(u.userItemUrl,\"add\"===o?\"addResources\":\"updateResources\"),[l,d]=p(e.path),m=await h(n),f=new FormData;return l&&\".\"!==l&&f.append(\"resourcesPrefix\",l),f.append(\"fileName\",d),f.append(\"file\",m,d),f.append(\"f\",\"json\"),a(c)&&c.access&&f.append(\"access\",c.access),await u.portal._request(i,{method:\"post\",body:f,signal:r(c,\"signal\")}),e}async function i(e,a,o){if(!a.hasPath())throw new t(\"portal-item-resources-remove:invalid-path\",\"Resource does not have a valid path\");await e.load(o);const n=s(e.userItemUrl,\"removeResources\");await e.portal._request(n,{method:\"post\",query:{resource:a.path},signal:r(o,\"signal\")}),a.portalItem=null}async function l(e,t){await e.load(t);const a=s(e.userItemUrl,\"removeResources\");return e.portal._request(a,{method:\"post\",query:{deleteAll:!0},signal:r(t,\"signal\")})}function p(e){const t=e.lastIndexOf(\"/\");return-1===t?[\".\",e]:[e.slice(0,t),e.slice(t+1)]}function d(e){const[t,r]=m(e),[a,o]=p(t);return[a,o,r]}function m(e){const t=n(e);return o(t)?[e,\"\"]:[e.slice(0,e.length-t.length-1),`.${t}`]}async function h(t){if(t instanceof Blob)return t;return(await e(t.url,{responseType:\"blob\"})).data}function f(e,t){if(!e.hasPath())return null;const[r,,a]=d(e.path);return e.portalItem.resourceFromPath(s(r,t+a))}function w(e,t){if(!e.hasPath())return null;const[r,,a]=d(e.path);return e.portalItem.resourceFromPath(s(r,t+a))}export{u as addOrUpdateResource,h as contentToBlob,c as fetchResources,f as getSiblingOfSameType,w as getSiblingOfSameTypeI,l as removeAllResources,i as removeResource,d as splitPrefixFileNameAndExtension};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport e from\"../../request.js\";import o from\"../../core/Error.js\";import{isSome as r}from\"../../core/maybe.js\";async function n(n,t,s,a,i,d){let l=null;if(r(s)){const o=`${n}/nodepages/`,t=o+Math.floor(s.rootIndex/s.nodesPerPage);try{return{type:\"page\",rootPage:(await e(t,{query:{f:\"json\",token:a},responseType:\"json\",signal:d})).data,rootIndex:s.rootIndex,pageSize:s.nodesPerPage,lodMetric:s.lodSelectionMetricType,urlPrefix:o}}catch(f){r(i)&&i.warn(\"#fetchIndexInfo()\",\"Failed to load root node page. Falling back to node documents.\",t,f),l=f}}if(!t)return null;const p=`${n}/nodes/`,c=p+(t&&t.split(\"/\").pop());try{return{type:\"node\",rootNode:(await e(c,{query:{f:\"json\",token:a},responseType:\"json\",signal:d})).data,urlPrefix:p}}catch(f){throw new o(\"sceneservice:root-node-missing\",\"Root node missing.\",{pageError:l,nodeError:f,url:c})}}export{n as fetchIndexInfo};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nfunction i(i){return i&&\"getAtOrigin\"in i&&\"originOf\"in i}export{i as isMultiOriginJSONMixin};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{isMultiOriginJSONMixin as i}from\"../multiOriginJSONSupportUtils.js\";function r(r){r&&r.writtenProperties&&r.writtenProperties.forEach((r=>{const t=r.target;r.newOrigin&&r.oldOrigin!==r.newOrigin&&i(t)&&t.updateOrigin(r.propName,r.newOrigin)}))}export{r as updateOrigins};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{result as r}from\"../../core/asyncUtils.js\";import e from\"../../core/Error.js\";import{eachAlways as o,throwIfAborted as t}from\"../../core/promiseUtils.js\";import{generateUUID as s}from\"../../core/uuid.js\";import{getSiblingOfSameTypeI as c}from\"../../portal/support/resourceUtils.js\";async function a(r,a,u){if(!a||!a.resources)return;const h=a.portalItem===r.portalItem?new Set(r.paths):new Set;r.paths.length=0,r.portalItem=a.portalItem;const i=new Set(a.resources.toKeep.map((r=>r.resource.path))),f=new Set,m=[];i.forEach((e=>{h.delete(e),r.paths.push(e)}));for(const e of a.resources.toUpdate)if(h.delete(e.resource.path),i.has(e.resource.path)||f.has(e.resource.path)){const{resource:o,content:t,finish:a,error:p}=e,h=c(o,s());r.paths.push(h.path),m.push(n({resource:h,content:t,finish:a,error:p},u))}else r.paths.push(e.resource.path),m.push(p(e,u)),f.add(e.resource.path);for(const e of a.resources.toAdd)m.push(n(e,u)),r.paths.push(e.resource.path);if(h.forEach((r=>{const e=a.portalItem.resourceFromPath(r);m.push(e.portalItem.removeResource(e).catch((()=>{})))})),0===m.length)return;const l=await o(m);t(u);const d=l.filter((r=>\"error\"in r)).map((r=>r.error));if(d.length>0)throw new e(\"save:resources\",\"Failed to save one or more resources\",{errors:d})}async function n(e,o){const t=await r(e.resource.portalItem.addResource(e.resource,e.content,o));if(!0!==t.ok)throw e.error&&e.error(t.error),t.error;e.finish&&e.finish(e.resource)}async function p(e,o){const t=await r(e.resource.update(e.content,o));if(!0!==t.ok)throw e.error(t.error),t.error;e.finish(e.resource)}export{a as saveResources};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import t from\"../../request.js\";import r from\"../../core/Error.js\";import\"../../core/has.js\";import o from\"../../core/Logger.js\";import{isSome as i}from\"../../core/maybe.js\";import{debounce as s}from\"../../core/promiseUtils.js\";import{urlToObject as a}from\"../../core/urlUtils.js\";import{property as n}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/accessorSupport/ensureType.js\";import{reader as l}from\"../../core/accessorSupport/decorators/reader.js\";import{subclass as p}from\"../../core/accessorSupport/decorators/subclass.js\";import{writer as d}from\"../../core/accessorSupport/decorators/writer.js\";import{updateOrigins as c}from\"../../core/accessorSupport/originUtils.js\";import u from\"../../geometry/Extent.js\";import m from\"../../geometry/HeightModelInfo.js\";import y from\"../../geometry/SpatialReference.js\";import{titleFromUrlAndName as h,parse as f,cleanTitle as v,sanitizeUrlWithLayerId as g,writeUrlWithLayerId as S}from\"../support/arcgisLayerUrl.js\";import{id as w,url as I}from\"../support/commonProperties.js\";import{fetchIndexInfo as x}from\"../support/I3SIndexInfo.js\";import b from\"../../portal/Portal.js\";import j from\"../../portal/PortalItem.js\";import{saveResources as _}from\"../../webdoc/support/saveUtils.js\";const R=o.getLogger(\"esri.layers.mixins.SceneService\"),N=o=>{let N=class extends o{constructor(){super(...arguments),this.spatialReference=null,this.fullExtent=null,this.heightModelInfo=null,this.minScale=0,this.maxScale=0,this.version={major:Number.NaN,minor:Number.NaN,versionString:\"\"},this.copyright=null,this.sublayerTitleMode=\"item-title\",this.title=null,this.layerId=null,this.indexInfo=null,this._debouncedSaveOperations=s((async(e,t,r)=>{switch(e){case 0:return this._save(t);case 1:return this._saveAs(r,t)}}))}readSpatialReference(e,t){return this._readSpatialReference(t)}_readSpatialReference(e){if(null!=e.spatialReference)return y.fromJSON(e.spatialReference);{const t=e.store,r=t.indexCRS||t.geographicCRS,o=r&&parseInt(r.substring(r.lastIndexOf(\"/\")+1,r.length),10);return null!=o?new y(o):null}}readFullExtent(e,t,r){if(null!=e&&\"object\"==typeof e){const o=null==e.spatialReference?{...e,spatialReference:this._readSpatialReference(t)}:e;return u.fromJSON(o,r)}const o=t.store,i=this._readSpatialReference(t);return null==i||null==o||null==o.extent||!Array.isArray(o.extent)||o.extent.some((e=>e<O))?null:new u({xmin:o.extent[0],ymin:o.extent[1],xmax:o.extent[2],ymax:o.extent[3],spatialReference:i})}readVersion(e,t){const r=t.store,o=null!=r.version?r.version.toString():\"\",i={major:Number.NaN,minor:Number.NaN,versionString:o},s=o.split(\".\");return s.length>=2&&(i.major=parseInt(s[0],10),i.minor=parseInt(s[1],10)),i}readTitlePortalItem(e){return\"item-title\"!==this.sublayerTitleMode?void 0:e}readTitleService(e,t){const r=this.portalItem&&this.portalItem.title;if(\"item-title\"===this.sublayerTitleMode)return h(this.url,t.name);let o=t.name;if(!o&&this.url){const e=f(this.url);i(e)&&(o=e.title)}return\"item-title-and-service-name\"===this.sublayerTitleMode&&r&&(o=r+\" - \"+o),v(o)}set url(e){const t=g({layer:this,url:e,nonStandardUrlAllowed:!1,logger:R});this._set(\"url\",t.url),null!=t.layerId&&this._set(\"layerId\",t.layerId)}writeUrl(e,t,r,o){S(this,e,\"layers\",t,o)}get parsedUrl(){const e=this._get(\"url\");if(!e)return null;const t=a(e);return null!=this.layerId&&(t.path=`${t.path}/layers/${this.layerId}`),t}async _fetchIndexAndUpdateExtent(e,t){this.indexInfo=x(this.parsedUrl.path,this.rootNode,e,this.apiKey,R,t),null==this.fullExtent||this.fullExtent.hasZ||this._updateExtent(await this.indexInfo)}_updateExtent(e){if(\"page\"===(null==e?void 0:e.type)){var t,o;const i=e.rootIndex%e.pageSize,s=null==(t=e.rootPage)||null==(o=t.nodes)?void 0:o[i];if(null==s||null==s.obb||null==s.obb.center||null==s.obb.halfSize)throw new r(\"sceneservice:invalid-node-page\",\"Invalid node page.\");if(s.obb.center[0]<O||null==this.fullExtent||this.fullExtent.hasZ)return;const a=s.obb.halfSize,n=s.obb.center[2],l=Math.sqrt(a[0]*a[0]+a[1]*a[1]+a[2]*a[2]);this.fullExtent.zmin=n-l,this.fullExtent.zmax=n+l}else if(\"node\"===(null==e?void 0:e.type)){var i;const t=null==(i=e.rootNode)?void 0:i.mbs;if(!Array.isArray(t)||4!==t.length||t[0]<O)return;const r=t[2],o=t[3];this.fullExtent.zmin=r-o,this.fullExtent.zmax=r+o}}async _fetchService(e){if(null==this.url)throw new r(\"sceneservice:url-not-set\",\"Scene service can not be loaded without valid portal item or url\");if(null==this.layerId&&/SceneServer\\/*$/i.test(this.url)){const t=await this._fetchFirstLayerId(e);null!=t&&(this.layerId=t)}return this._fetchServiceLayer(e)}async _fetchFirstLayerId(e){const r=await t(this.url,{query:{f:\"json\",token:this.apiKey},responseType:\"json\",signal:e});if(r.data&&Array.isArray(r.data.layers)&&r.data.layers.length>0)return r.data.layers[0].id}async _fetchServiceLayer(e){const r=await t(this.parsedUrl.path,{query:{f:\"json\",token:this.apiKey},responseType:\"json\",signal:e});r.ssl&&(this.url=this.url.replace(/^http:/i,\"https:\"));const o=r.data;this.read(o,{origin:\"service\",url:this.parsedUrl}),this.validateLayer(o)}async _ensureLoadBeforeSave(){await this.load(),\"beforeSave\"in this&&\"function\"==typeof this.beforeSave&&await this.beforeSave()}validateLayer(e){}_updateTypeKeywords(e,t,r){e.typeKeywords||(e.typeKeywords=[]);const o=t.getTypeKeywords();for(const i of o)e.typeKeywords.push(i);e.typeKeywords&&(e.typeKeywords=e.typeKeywords.filter(((e,t,r)=>r.indexOf(e)===t)),1===r&&(e.typeKeywords=e.typeKeywords.filter((e=>\"Hosted Service\"!==e))))}async _saveAs(e,t){const o={...E,...t};let i=j.from(e);i||(R.error(\"_saveAs(): requires a portal item parameter\"),await Promise.reject(new r(\"sceneservice:portal-item-required\",\"_saveAs() requires a portal item to save to\"))),i.id&&(i=i.clone(),i.id=null);const s=i.portal||b.getDefault();await this._ensureLoadBeforeSave(),i.type=T,i.portal=s;const a={origin:\"portal-item\",url:null,messages:[],portal:s,portalItem:i,writtenProperties:[],blockedRelativeUrls:[],resources:{toAdd:[],toUpdate:[],toKeep:[],pendingOperations:[]}},n={layers:[this.write(null,a)]};return await Promise.all(a.resources.pendingOperations),await this._validateAgainstJSONSchema(n,a,o),i.url=this.url,i.title||(i.title=this.title),this._updateTypeKeywords(i,o,1),await s._signIn(),await s.user.addItem({item:i,folder:o&&o.folder,data:n}),await _(this.resourceReferences,a,null),this.portalItem=i,c(a),a.portalItem=i,i}async _save(e){const t={...E,...e};this.portalItem||(R.error(\"_save(): requires the .portalItem property to be set\"),await Promise.reject(new r(\"sceneservice:portal-item-not-set\",\"Portal item to save to has not been set on this SceneService\"))),this.portalItem.type!==T&&(R.error(\"_save(): Non-matching portal item type. Got \"+this.portalItem.type+\", expected \"+T),await Promise.reject(new r(\"sceneservice:portal-item-wrong-type\",`Portal item needs to have type \"${T}\"`))),await this._ensureLoadBeforeSave();const o={origin:\"portal-item\",url:this.portalItem.itemUrl&&a(this.portalItem.itemUrl),messages:[],portal:this.portalItem.portal||b.getDefault(),portalItem:this.portalItem,writtenProperties:[],blockedRelativeUrls:[],resources:{toAdd:[],toUpdate:[],toKeep:[],pendingOperations:[]}},i={layers:[this.write(null,o)]};return await Promise.all(o.resources.pendingOperations),await this._validateAgainstJSONSchema(i,o,t),this.portalItem.url=this.url,this.portalItem.title||(this.portalItem.title=this.title),this._updateTypeKeywords(this.portalItem,t,0),await this.portalItem.update({data:i}),await _(this.resourceReferences,o,null),c(o),this.portalItem}async _validateAgainstJSONSchema(e,t,o){let i=t.messages.filter((e=>\"error\"===e.type)).map((e=>new r(e.name,e.message,e.details)));if(o&&o.validationOptions.ignoreUnsupported&&(i=i.filter((e=>\"layer:unsupported\"!==e.name&&\"symbol:unsupported\"!==e.name&&\"symbol-layer:unsupported\"!==e.name&&\"property:unsupported\"!==e.name&&\"url:unsupported\"!==e.name&&\"scenemodification:unsupported\"!==e.name))),o.validationOptions.enabled||U){const t=(await import(\"../support/schemaValidator.js\")).validate(e,o.portalItemLayerType);if(t.length>0){const e=`Layer item did not validate:\\n${t.join(\"\\n\")}`;if(R.error(`_validateAgainstJSONSchema(): ${e}`),\"throw\"===o.validationOptions.failPolicy){const e=t.map((e=>new r(\"sceneservice:schema-validation\",e))).concat(i);throw new r(\"sceneservice-validate:error\",\"Failed to save layer item due to schema validation, see `details.errors`.\",{combined:e})}}}if(i.length>0)throw new r(\"sceneservice:save\",\"Failed to save SceneService due to unsupported or invalid content. See 'details.errors' for more detailed information\",{errors:i})}};return e([n(w)],N.prototype,\"id\",void 0),e([n({type:y})],N.prototype,\"spatialReference\",void 0),e([l(\"spatialReference\",[\"spatialReference\",\"store.indexCRS\",\"store.geographicCRS\"])],N.prototype,\"readSpatialReference\",null),e([n({type:u})],N.prototype,\"fullExtent\",void 0),e([l(\"fullExtent\",[\"fullExtent\",\"store.extent\",\"spatialReference\",\"store.indexCRS\",\"store.geographicCRS\"])],N.prototype,\"readFullExtent\",null),e([n({readOnly:!0,type:m})],N.prototype,\"heightModelInfo\",void 0),e([n({type:Number,json:{name:\"layerDefinition.minScale\",write:!0,origins:{service:{read:{source:\"minScale\"},write:!1}}}})],N.prototype,\"minScale\",void 0),e([n({type:Number,json:{name:\"layerDefinition.maxScale\",write:!0,origins:{service:{read:{source:\"maxScale\"},write:!1}}}})],N.prototype,\"maxScale\",void 0),e([n({readOnly:!0})],N.prototype,\"version\",void 0),e([l(\"version\",[\"store.version\"])],N.prototype,\"readVersion\",null),e([n({type:String,json:{read:{source:\"copyrightText\"}}})],N.prototype,\"copyright\",void 0),e([n({type:String,json:{read:!1}})],N.prototype,\"sublayerTitleMode\",void 0),e([n({type:String})],N.prototype,\"title\",void 0),e([l(\"portal-item\",\"title\")],N.prototype,\"readTitlePortalItem\",null),e([l(\"service\",\"title\",[\"name\"])],N.prototype,\"readTitleService\",null),e([n({type:Number,json:{origins:{service:{read:{source:\"id\"}},\"portal-item\":{write:{target:\"id\",isRequired:!0,ignoreOrigin:!0},read:!1}}}})],N.prototype,\"layerId\",void 0),e([n(I)],N.prototype,\"url\",null),e([d(\"url\")],N.prototype,\"writeUrl\",null),e([n()],N.prototype,\"parsedUrl\",null),e([n({readOnly:!0})],N.prototype,\"store\",void 0),e([n({type:String,readOnly:!0,json:{read:{source:\"store.rootNode\"}}})],N.prototype,\"rootNode\",void 0),N=e([p(\"esri.layers.mixins.SceneService\")],N),N},O=-1e38,U=!1,T=\"Scene Service\",E={getTypeKeywords:()=>[],portalItemLayerType:\"unknown\",validationOptions:{enabled:!0,ignoreUnsupported:!1,failPolicy:\"throw\"}};export{T as SCENE_SERVICE_ITEM_TYPE,N as SceneService};\n"],"sourceRoot":""}