{"version":3,"sources":["../node_modules/@arcgis/core/layers/UnknownLayer.js","../node_modules/@arcgis/core/core/accessorSupport/MultiOriginStore.js","../node_modules/@arcgis/core/core/ReadOnlyMultiOriginJSONSupport.js","../node_modules/@arcgis/core/core/MultiOriginJSONSupport.js","../node_modules/@arcgis/core/layers/Layer.js","../node_modules/@arcgis/core/layers/mixins/PortalLayer.js"],"names":["a","r","resourceInfo","type","this","addResolvingPromise","Promise","e","s","layerType","o","i","p","t","readOnly","prototype","json","read","value","c","n","_propertyOriginMap","Map","_originStores","Array","_values","forEach","set","has","get","keys","delete","metadatas","store","Object","internalGet","u","originIdOf","originOf","invalidate","revert","commit","f","l","setAtOrigin","write","toJSON","isDefaultToJSON","O","m","h","getLogger","arguments","attributionDataUrl","fullExtent","d","WGS84","id","Date","now","toString","legendEnabled","listMode","opacity","parent","popupEnabled","attributionVisible","spatialReference","title","url","visible","when","catch","declaredClass","error","layers","includes","remove","tables","baseLayers","referenceLayers","hasAttributionData","query","responseType","data","fromUrl","portalItem","fromItem","portal","portalUrl","EventedMixin","y","String","Boolean","nonNullable","Number","range","min","max","b","j","w","resourceReferences","paths","userHasEditingPrivileges","destroy","_get","removeOrigin","_set","itemId","I","load","instance","supportedTypes","validateItem","supportsData","warn","fetchUserHasEditingPrivileges","findCredential","P","credential","user","fetchEditingUser","privileges","findServerInfo","owningSystemUrl","g","getDefault","loaded","restUrl","signal","authMode","ok","v","fromJSON","layer","messages","push"],"mappings":"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","file":"static/js/79.2e900635.chunk.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../chunks/tslib.es6.js\";import o from\"../core/Error.js\";import{MultiOriginJSONMixin as e}from\"../core/MultiOriginJSONSupport.js\";import{schedule as s}from\"../core/scheduling.js\";import{property as t}from\"../core/accessorSupport/decorators/property.js\";import\"../core/has.js\";import\"../core/accessorSupport/ensureType.js\";import\"../core/Logger.js\";import{subclass as n}from\"../core/accessorSupport/decorators/subclass.js\";import p from\"./Layer.js\";import{PortalLayer as i}from\"./mixins/PortalLayer.js\";let a=class extends(i(e(p))){constructor(r){super(r),this.resourceInfo=null,this.type=\"unknown\"}initialize(){this.addResolvingPromise(new Promise(((r,e)=>{s((()=>{const r=this.resourceInfo&&(this.resourceInfo.layerType||this.resourceInfo.type);let s=\"Unknown layer type\";r&&(s+=\" \"+r),e(new o(\"layer:unknown-layer-type\",s,{layerType:r}))}))})))}read(r,o){super.read({resourceInfo:r},o)}write(){return null}};r([t({readOnly:!0})],a.prototype,\"resourceInfo\",void 0),r([t({type:[\"show\",\"hide\"]})],a.prototype,\"listMode\",void 0),r([t({json:{read:!1},readOnly:!0,value:\"unknown\"})],a.prototype,\"type\",void 0),a=r([n(\"esri.layers.UnknownLayer\")],a);var c=a;export{c as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{clone as t}from\"../lang.js\";import{assumeNonNull as s}from\"../maybe.js\";import{OriginIdNum as e}from\"./PropertyOrigin.js\";class r{constructor(){this._propertyOriginMap=new Map,this._originStores=new Array(e),this._values=new Map}clone(s){const i=new r,o=this._originStores[0];o&&o.forEach(((s,e)=>{i.set(e,t(s),0)}));for(let r=2;r<e;r++){const e=this._originStores[r];e&&e.forEach(((e,o)=>{s&&s.has(o)||i.set(o,t(e),r)}))}return i}get(t,s){const e=void 0===s?this._values:this._originStores[s];return e?e.get(t):void 0}keys(t){const s=null==t?this._values:this._originStores[t];return s?[...s.keys()]:[]}set(t,e,r=6){let i=this._originStores[r];if(i||(i=new Map,this._originStores[r]=i),i.set(t,e),!this._values.has(t)||s(this._propertyOriginMap.get(t))<=r){const s=this._values.get(t);return this._values.set(t,e),this._propertyOriginMap.set(t,r),s!==e}return!1}delete(t,s=6){const e=this._originStores[s];if(!e)return;const r=e.get(t);if(e.delete(t),this._values.has(t)&&this._propertyOriginMap.get(t)===s){this._values.delete(t);for(let e=s-1;e>=0;e--){const s=this._originStores[e];if(s&&s.has(t)){this._values.set(t,s.get(t)),this._propertyOriginMap.set(t,e);break}}}return r}has(t,s){const e=void 0===s?this._values:this._originStores[s];return!!e&&e.has(t)}revert(t,s){for(;s>0&&!this.has(t,s);)--s;const e=this._originStores[s],r=e&&e.get(t),i=this._values.get(t);return this._values.set(t,r),this._propertyOriginMap.set(t,s),i!==r}originOf(t){return this._propertyOriginMap.get(t)||0}forEach(t){this._values.forEach(t)}}export{r as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../chunks/tslib.es6.js\";import t from\"./Accessor.js\";import{assumeNonNull as s}from\"./maybe.js\";import e from\"./accessorSupport/MultiOriginStore.js\";import{idToName as o,nameToId as i}from\"./accessorSupport/PropertyOrigin.js\";import{read as n}from\"./accessorSupport/read.js\";import{getProperties as c}from\"./accessorSupport/utils.js\";import{subclass as p}from\"./accessorSupport/decorators/subclass.js\";const a=t=>{let a=class extends t{constructor(...r){super(...r);const t=s(c(this)),o=t.metadatas,i=t.store,n=new e;t.store=n,i.keys().forEach((r=>{n.set(r,i.get(r),0)})),Object.keys(o).forEach((r=>{t.internalGet(r)&&n.set(r,t.internalGet(r),0)}))}read(r,t){n(this,r,t)}getAtOrigin(r,t){const s=u(this),e=i(t);if(\"string\"==typeof r)return s.get(r,e);const o={};return r.forEach((r=>{o[r]=s.get(r,e)})),o}originOf(r){return o(this.originIdOf(r))}originIdOf(r){return u(this).originOf(r)}revert(r,t){const s=u(this),e=i(t),o=c(this);let n;n=\"string\"==typeof r?\"*\"===r?s.keys(e):[r]:r,n.forEach((r=>{o.invalidate(r),s.revert(r,e),o.commit(r)}))}};return a=r([p(\"esri.core.ReadOnlyMultiOriginJSONSupport\")],a),a};function u(r){return c(r).store}let f=class extends(a(t)){};f=r([p(\"esri.core.ReadOnlyMultiOriginJSONSupport\")],f);export{a as ReadOnlyMultiOriginJSONMixin,f as ReadOnlyMultiOriginJSONSupport};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../chunks/tslib.es6.js\";import t from\"./Accessor.js\";import{ReadOnlyMultiOriginJSONMixin as s}from\"./ReadOnlyMultiOriginJSONSupport.js\";import{nameToId as e,OriginIdNum as o}from\"./accessorSupport/PropertyOrigin.js\";import{getProperties as i}from\"./accessorSupport/utils.js\";import{write as c}from\"./accessorSupport/write.js\";import{subclass as n}from\"./accessorSupport/decorators/subclass.js\";const p=t=>{let s=class extends t{constructor(...r){super(...r)}clear(r,t=\"user\"){return u(this).delete(r,e(t))}write(r={},t){return c(this,r=r||{},t),r}setAtOrigin(r,t,s){i(this).setAtOrigin(r,t,e(s))}removeOrigin(r){const t=u(this),s=e(r),o=t.keys(s);for(const e of o)t.originOf(e)===s&&t.set(e,t.get(e,s),6)}updateOrigin(r,t){const s=u(this),i=e(t),c=this.get(r);for(let e=i+1;e<o;++e)s.delete(r,e);s.set(r,c,i)}toJSON(r){return this.write({},r)}};return s=r([n(\"esri.core.WriteableMultiOriginJSONSupport\")],s),s.prototype.toJSON.isDefaultToJSON=!0,s};function u(r){return i(r).store}const l=t=>{let e=class extends(p(s(t))){constructor(...r){super(...r)}};return e=r([n(\"esri.core.MultiOriginJSONSupport\")],e),e};let O=class extends(l(t)){};O=r([n(\"esri.core.MultiOriginJSONSupport\")],O);export{l as MultiOriginJSONMixin,O as MultiOriginJSONSupport};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../chunks/tslib.es6.js\";import r from\"../config.js\";import\"../geometry.js\";import e from\"../request.js\";import o from\"../core/Error.js\";import i from\"../core/Evented.js\";import{IdentifiableMixin as a}from\"../core/Identifiable.js\";import s from\"../core/Loadable.js\";import l from\"../core/Logger.js\";import{isAbortError as p}from\"../core/promiseUtils.js\";import{urlToObject as n}from\"../core/urlUtils.js\";import{property as y}from\"../core/accessorSupport/decorators/property.js\";import\"../core/has.js\";import\"../core/accessorSupport/ensureType.js\";import{subclass as c}from\"../core/accessorSupport/decorators/subclass.js\";import u from\"../geometry/Extent.js\";import d from\"../geometry/SpatialReference.js\";let m=0;const h=l.getLogger(\"esri.layers.Layer\");let f=class extends(i.EventedMixin(a(s))){constructor(){super(...arguments),this.attributionDataUrl=null,this.fullExtent=new u(-180,-90,180,90,d.WGS84),this.id=Date.now().toString(16)+\"-layer-\"+m++,this.legendEnabled=!0,this.listMode=\"show\",this.opacity=1,this.parent=null,this.popupEnabled=!0,this.attributionVisible=!0,this.spatialReference=d.WGS84,this.title=null,this.type=null,this.url=null,this.visible=!0}static async fromArcGISServerUrl(t){const r=\"string\"==typeof t?{url:t}:t,e=await import(\"./support/arcgisLayers.js\");try{return await e.fromUrl(r)}catch(o){throw h.error(\"#fromArcGISServerUrl({ url: '\"+r.url+\"'})\",\"Failed to create layer from arcgis server url\",o),o}}static async fromPortalItem(t){const e=\"portalItem\"in t?t:{portalItem:t},o=await import(\"../portal/support/portalLayers.js\");try{return await o.fromItem(e)}catch(i){const t=e&&e.portalItem,o=t&&t.id||\"unset\",a=t&&t.portal&&t.portal.url||r.portalUrl;throw h.error(\"#fromPortalItem()\",\"Failed to create layer from portal item (portal: '\"+a+\"', id: '\"+o+\"')\",i),i}}initialize(){this.when().catch((t=>{var r,e;p(t)||l.getLogger(this.declaredClass).error(\"#load()\",`Failed to load layer (title: '${null!=(r=this.title)?r:\"no title\"}', id: '${null!=(e=this.id)?e:\"no id\"}')`,{error:t})}))}destroy(){if(this.parent){const t=this,r=this.parent;\"layers\"in r&&r.layers.includes(t)?r.layers.remove(t):\"tables\"in r&&r.tables.includes(t)?r.tables.remove(t):\"baseLayers\"in r&&r.baseLayers.includes(t)?r.baseLayers.remove(t):\"baseLayers\"in r&&r.referenceLayers.includes(t)&&r.referenceLayers.remove(t)}}get hasAttributionData(){return null!=this.attributionDataUrl}get parsedUrl(){const t=this.url;return t?n(t):null}async fetchAttributionData(){const t=this.attributionDataUrl;if(this.hasAttributionData&&t){return(await e(t,{query:{f:\"json\"},responseType:\"json\"})).data}throw new o(\"layer:no-attribution-data\",\"Layer does not have attribution data\")}};t([y({type:String})],f.prototype,\"attributionDataUrl\",void 0),t([y({type:u})],f.prototype,\"fullExtent\",void 0),t([y({readOnly:!0})],f.prototype,\"hasAttributionData\",null),t([y({type:String})],f.prototype,\"id\",void 0),t([y({type:Boolean,nonNullable:!0})],f.prototype,\"legendEnabled\",void 0),t([y({type:[\"show\",\"hide\",\"hide-children\"]})],f.prototype,\"listMode\",void 0),t([y({type:Number,range:{min:0,max:1},nonNullable:!0})],f.prototype,\"opacity\",void 0),t([y()],f.prototype,\"parent\",void 0),t([y({readOnly:!0})],f.prototype,\"parsedUrl\",null),t([y({type:Boolean})],f.prototype,\"popupEnabled\",void 0),t([y({type:Boolean})],f.prototype,\"attributionVisible\",void 0),t([y({type:d})],f.prototype,\"spatialReference\",void 0),t([y({type:String})],f.prototype,\"title\",void 0),t([y({type:String,readOnly:!0,json:{read:!1}})],f.prototype,\"type\",void 0),t([y()],f.prototype,\"url\",void 0),t([y({type:Boolean,nonNullable:!0})],f.prototype,\"visible\",void 0),f=t([c(\"esri.layers.Layer\")],f);var b=f;export{b as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../chunks/tslib.es6.js\";import{id as e}from\"../../kernel.js\";import r from\"../../request.js\";import{result as s}from\"../../core/asyncUtils.js\";import o from\"../../core/Error.js\";import i from\"../../core/Logger.js\";import{isNone as a,isSome as l}from\"../../core/maybe.js\";import{throwIfAborted as n,isAbortError as p,throwIfAbortError as m}from\"../../core/promiseUtils.js\";import{normalize as u,hasSamePortal as c}from\"../../core/urlUtils.js\";import{property as d}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/has.js\";import\"../../core/accessorSupport/ensureType.js\";import{reader as h}from\"../../core/accessorSupport/decorators/reader.js\";import{subclass as f}from\"../../core/accessorSupport/decorators/subclass.js\";import{writer as y}from\"../../core/accessorSupport/decorators/writer.js\";import g from\"../../portal/Portal.js\";import I from\"../../portal/PortalItem.js\";import v from\"../../portal/PortalUser.js\";const j=i.getLogger(\"esri.layers.mixins.PortalLayer\"),w=i=>{let w=class extends i{constructor(){super(...arguments),this.resourceReferences={portalItem:null,paths:[]},this.userHasEditingPrivileges=!0}destroy(){var t;null==(t=this.portalItem)||t.destroy(),this.portalItem=null}set portalItem(t){t!==this._get(\"portalItem\")&&(this.removeOrigin(\"portal-item\"),this._set(\"portalItem\",t))}readPortalItem(t,e,r){if(e.itemId)return new I({id:e.itemId,portal:r&&r.portal})}writePortalItem(t,e){t&&t.id&&(e.itemId=t.id)}async loadFromPortal(t,e){if(this.portalItem&&this.portalItem.id)try{const r=await import(\"../../portal/support/layersLoader.js\");return n(e),await r.load({instance:this,supportedTypes:t.supportedTypes,validateItem:t.validateItem,supportsData:t.supportsData},e)}catch(r){throw p(r)||j.warn(`Failed to load layer (${this.title}, ${this.id}) portal item (${this.portalItem.id})\\n  ${r}`),r}}async finishLoadEditablePortalLayer(t){this._set(\"userHasEditingPrivileges\",await this.fetchUserHasEditingPrivileges(t).catch((t=>(m(t),!0))))}async fetchUserHasEditingPrivileges(t){const r=this.url?null==e?void 0:e.findCredential(this.url):null;if(!r)return!0;const s=P.credential===r?P.user:await this.fetchEditingUser(t);return P.credential=r,P.user=s,a(s)||null==s.privileges||s.privileges.includes(\"features:user:edit\")}async fetchEditingUser(t){var o,i;const a=null==(o=this.portalItem)||null==(i=o.portal)?void 0:i.user;if(a)return a;const n=e.findServerInfo(this.url);if(null==n||!n.owningSystemUrl)return null;const p=`${n.owningSystemUrl}/sharing/rest`,m=g.getDefault();if(m&&m.loaded&&u(m.restUrl)===u(p))return m.user;const c=`${p}/community/self`,d=l(t)?t.signal:null,h=await s(r(c,{authMode:\"no-prompt\",query:{f:\"json\"},signal:d}));return h.ok?v.fromJSON(h.value.data):null}read(t,e){e&&(e.layer=this),super.read(t,e)}write(t,e){const r=e&&e.portal,s=this.portalItem&&this.portalItem.id&&(this.portalItem.portal||g.getDefault());return r&&s&&!c(s.restUrl,r.restUrl)?(e.messages&&e.messages.push(new o(\"layer:cross-portal\",`The layer '${this.title} (${this.id})' cannot be persisted because it refers to an item on a different portal than the one being saved to. To save the scene, set the layer.portalItem to null or save the scene to the same portal as the item associated with the layer`,{layer:this})),null):super.write(t,{...e,layer:this})}};return t([d({type:I})],w.prototype,\"portalItem\",null),t([h(\"web-document\",\"portalItem\",[\"itemId\"])],w.prototype,\"readPortalItem\",null),t([y(\"web-document\",\"portalItem\",{itemId:{type:String}})],w.prototype,\"writePortalItem\",null),t([d()],w.prototype,\"resourceReferences\",void 0),t([d({readOnly:!0})],w.prototype,\"userHasEditingPrivileges\",void 0),w=t([f(\"esri.layers.mixins.PortalLayer\")],w),w},P={credential:null,user:null};export{w as PortalLayer};\n"],"sourceRoot":""}