(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[28],{1091:function(e,t,a){"use strict";a.r(t),a.d(t,"applyEdits",(function(){return b}));var r=a(13),n=a(7),i=a.n(n),s=a(12),u=a(210),o=a(52),c=a(29),l=a(18),p=a(11),d=a(27),f=a(696);function h(e){return e&&null!=e.applyEdits}function b(e,t,a){return y.apply(this,arguments)}function y(){return y=Object(s.a)(i.a.mark((function e(t,a,r){var n,s,u,o,c,p,d,f,h,b,y=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=y.length>3&&void 0!==y[3]?y[3]:{},o={edits:r,result:new Promise((function(e,t){s=e,u=t}))},t.emit("apply-edits",o),e.prev=3,e.next=6,m(t,a,r,n);case 6:return p=e.sent,d=p.results,f=p.edits,h=function(e){return e.filter((function(e){return!e.error})).map(l.a)},b={edits:f,addedFeatures:h(d.addFeatureResults),updatedFeatures:h(d.updateFeatureResults),deletedFeatures:h(d.deleteFeatureResults),addedAttachments:h(d.addAttachmentResults),updatedAttachments:h(d.updateAttachmentResults),deletedAttachments:h(d.deleteAttachmentResults)},e.abrupt("return",(null!=(c=d.editedFeatureResults)&&c.length&&(b.editedFeatures=d.editedFeatureResults),(b.addedFeatures.length||b.updatedFeatures.length||b.deletedFeatures.length||b.addedAttachments.length||b.updatedAttachments.length||b.deletedAttachments.length)&&t.emit("edits",b),s(b),d));case 14:throw e.prev=14,e.t0=e.catch(3),u(e.t0),e.t0;case 17:case"end":return e.stop()}}),e,null,[[3,14]])}))),y.apply(this,arguments)}function m(e,t,a,r){return g.apply(this,arguments)}function g(){return(g=Object(s.a)(i.a.mark((function e(t,a,r,n){var s,u,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.load();case 2:if(h(a)){e.next=4;break}return e.abrupt("return",Promise.reject(new c.a("".concat(t.type,"-layer:no-editing-support"),"Layer source does not support applyEdits capability",{layer:t})));case 4:if(t.editingEnabled){e.next=6;break}throw new c.a("".concat(t.type,"-layer:editing-disabled"),"Editing is disabled for layer",{layer:t});case 6:return e.next=8,v(t,r,n);case 8:if(s=e.sent,u=s.edits,o=s.options,!(u.addFeatures.length||u.updateFeatures.length||u.deleteFeatures.length||u.addAttachments.length||u.updateAttachments.length||u.deleteAttachments.length)){e.next=19;break}return e.t1=u,e.next=15,a.applyEdits(u,o);case 15:e.t2=e.sent,e.t0={edits:e.t1,results:e.t2},e.next=20;break;case 19:e.t0={edits:u,results:{addFeatureResults:[],updateFeatureResults:[],deleteFeatureResults:[],addAttachmentResults:[],updateAttachmentResults:[],deleteAttachmentResults:[]}};case 20:return e.abrupt("return",e.t0);case 21:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(e,t,a){return w.apply(this,arguments)}function w(){return w=Object(s.a)(i.a.mark((function e(t,a,n){var s,u,l,p,d;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=a&&(a.addFeatures||a.updateFeatures||a.deleteFeatures),u=a&&(a.addAttachments||a.updateAttachments||a.deleteAttachments),a&&(s||u)){e.next=3;break}throw new c.a("".concat(t.type,"-layer:missing-parameters"),"'addFeatures', 'updateFeatures', 'deleteFeatures', 'addAttachments', 'updateAttachments' or 'deleteAttachments' parameter is required");case 3:if(t.capabilities.data.isVersioned||!n||!n.gdbVersion){e.next=5;break}throw new c.a("".concat(t.type,"-layer:invalid-parameter"),"'gdbVersion' is applicable only if the layer supports versioned data. See: 'capabilities.data.isVersioned'");case 5:if(t.capabilities.editing.supportsRollbackOnFailure||!n||!n.rollbackOnFailureEnabled){e.next=7;break}throw new c.a("".concat(t.type,"-layer:invalid-parameter"),"This layer does not support 'rollbackOnFailureEnabled' parameter. See: 'capabilities.editing.supportsRollbackOnFailure'");case 7:if(t.capabilities.editing.supportsGlobalId||!n||!n.globalIdUsed){e.next=9;break}throw new c.a("".concat(t.type,"-layer:invalid-parameter"),"This layer does not support 'globalIdUsed' parameter. See: 'capabilities.editing.supportsGlobalId'");case 9:if(t.capabilities.editing.supportsGlobalId||!u){e.next=11;break}throw new c.a("".concat(t.type,"-layer:invalid-parameter"),"'addAttachments', 'updateAttachments' and 'deleteAttachments' are applicable only if the layer supports global ids. See: 'capabilities.editing.supportsGlobalId'");case 11:if(n&&n.globalIdUsed||!u){e.next=13;break}throw new c.a("".concat(t.type,"-layer:invalid-parameter"),"When 'addAttachments', 'updateAttachments' or 'deleteAttachments' is specified, globalIdUsed should be set to true");case 13:if(null!=(l=Object(r.a)({},n)).rollbackOnFailureEnabled||t.capabilities.editing.supportsRollbackOnFailure||(l.rollbackOnFailureEnabled=!0),!1!==l.rollbackOnFailureEnabled||"original-and-current-features"!==l.returnServiceEditsOption){e.next=16;break}throw new c.a("".concat(t.type,"-layer:invalid-parameter"),"'original-and-current-features' is valid for 'returnServiceEditsOption' only when 'rollBackOnFailure' is true.");case 16:if(t.capabilities.editing.supportsReturnServiceEditsInSourceSpatialReference||!l.returnServiceEditsInSourceSR){e.next=18;break}throw new c.a("".concat(t.type,"-layer:invalid-parameter"),"This layer does not support 'returnServiceEditsInSourceSR' parameter. See: 'capabilities.editing.supportsReturnServiceEditsInSourceSpatialReference'");case 18:if(!l.returnServiceEditsInSourceSR||"original-and-current-features"===l.returnServiceEditsOption){e.next=20;break}throw new c.a("".concat(t.type,"-layer:invalid-parameter"),"'returnServiceEditsOption' is valid only when 'returnServiceEditsOption' is set to 'original-and-current-features'");case 20:if((p=Object(r.a)({},a)).addFeatures=a&&o.a.isCollection(a.addFeatures)?a.addFeatures.toArray():p.addFeatures||[],p.updateFeatures=a&&o.a.isCollection(a.updateFeatures)?a.updateFeatures.toArray():p.updateFeatures||[],p.deleteFeatures=a&&o.a.isCollection(a.deleteFeatures)?a.deleteFeatures.toArray():p.deleteFeatures||[],!p.addFeatures.length||t.capabilities.operations.supportsAdd){e.next=23;break}throw new c.a("".concat(t.type,"-layer:unsupported-operation"),"Layer does not support adding features.");case 23:if(!p.updateFeatures.length||t.capabilities.operations.supportsUpdate){e.next=25;break}throw new c.a("".concat(t.type,"-layer:unsupported-operation"),"Layer does not support updating features.");case 25:if(!p.deleteFeatures.length||t.capabilities.operations.supportsDelete){e.next=27;break}throw new c.a("".concat(t.type,"-layer:unsupported-operation"),"Layer does not support deleting features.");case 27:return p.addAttachments=p.addAttachments||[],p.updateAttachments=p.updateAttachments||[],p.deleteAttachments=p.deleteAttachments||[],p.addFeatures=p.addFeatures.map(R),p.updateFeatures=p.updateFeatures.map(R),d=n&&n.globalIdUsed,p.addFeatures.forEach((function(e){return j(e,t,d)})),p.updateFeatures.forEach((function(e){return x(e,t,d)})),p.deleteFeatures.forEach((function(e){return F(e,t,d)})),p.addAttachments.forEach((function(e){return A(e,t)})),p.updateAttachments.forEach((function(e){return A(e,t)})),e.next=32,k(p);case 32:return e.t0=e.sent,e.t1=l,e.abrupt("return",{edits:e.t0,options:e.t1});case 35:case"end":return e.stop()}}),e)}))),w.apply(this,arguments)}function O(e,t,a){if(a){if("attributes"in e&&!e.attributes[t.globalIdField])throw new c.a("".concat(t.type,"-layer:invalid-parameter"),"Feature should have 'globalId' when 'globalIdUsed' is true");if(!("attributes"in e)&&!e.globalId)throw new c.a("".concat(t.type,"-layer:invalid-parameter"),"'globalId' of the feature should be passed when 'globalIdUsed' is true")}if("geometry"in e&&Object(p.j)(e.geometry)){if(e.geometry.hasZ&&!1===t.capabilities.data.supportsZ)throw new c.a("".concat(t.type,"-layer:z-unsupported"),"Layer does not support z values while feature has z values.");if(e.geometry.hasM&&!1===t.capabilities.data.supportsM)throw new c.a("".concat(t.type,"-layer:m-unsupported"),"Layer does not support m values while feature has m values.")}}function j(e,t,a){O(e,t,a)}function F(e,t,a){O(e,t,a)}function x(e,t,a){if(O(e,t,a),"geometry"in e&&Object(p.j)(e.geometry)&&!t.capabilities.editing.supportsGeometryUpdate)throw new c.a("".concat(t.type,"-layer:unsupported-operation"),"Layer does not support geometry updates.")}function A(e,t){var a=e.feature,r=e.attachment;if(!a||"attributes"in a&&!a.attributes[t.globalIdField])throw new c.a("".concat(t.type,"-layer:invalid-parameter"),"Attachment should have reference to a feature with 'globalId'");if(!("attributes"in a)&&!a.globalId)throw new c.a("".concat(t.type,"-layer:invalid-parameter"),"Attachment should have reference to 'globalId' of the parent feature");if(!r.globalId)throw new c.a("".concat(t.type,"-layer:invalid-parameter"),"Attachment should have 'globalId'");if(!r.data&&!r.uploadId)throw new c.a("".concat(t.type,"-layer:invalid-parameter"),"Attachment should have 'data' or 'uploadId'");if(!(r.data instanceof File&&r.data.name)&&!r.name)throw new c.a("".concat(t.type,"-layer:invalid-parameter"),"'name' is required when attachment is specified as Base64 encoded string using 'data'");if(!t.capabilities.editing.supportsUploadWithItemId&&r.uploadId)throw new c.a("".concat(t.type,"-layer:invalid-parameter"),"This layer does not support 'uploadId' parameter. See: 'capabilities.editing.supportsUploadWithItemId'");if("string"==typeof r.data){var n=Object(d.i)(r.data);if(n&&!n.isBase64)throw new c.a("".concat(t.type,"-layer:invalid-parameter"),"Attachment 'data' should be a Blob, File or Base64 encoded string")}}function k(e){return I.apply(this,arguments)}function I(){return I=Object(s.a)(i.a.mark((function e(t){var a,r,n,s,u,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.addFeatures,r=t.updateFeatures,n=a.concat(r).map((function(e){return e.geometry})),e.next=5,Object(f.a)(n);case 5:return s=e.sent,u=a.length,o=r.length,e.abrupt("return",(s.slice(0,u).forEach((function(e,a){return t.addFeatures[a].geometry=e})),s.slice(u,u+o).forEach((function(e,a){return t.updateFeatures[a].geometry=e})),t));case 9:case"end":return e.stop()}}),e)}))),I.apply(this,arguments)}function R(e){var t=new u.a;return e.attributes||(e.attributes={}),t.geometry=e.geometry,t.attributes=e.attributes,t}},696:function(e,t,a){"use strict";a.d(t,"a",(function(){return L})),a.d(t,"b",(function(){return J}));var r=a(7),n=a.n(r),i=a(22),s=a(12),u=a(21),o=a(68),c=a(29),l=a(15),p=a(11),d=a(108),f=a(107),h=a(732),b=a(53),y=a(71),m=a(13),g=(a(114),a(82)),v=a(27),w=a(62);function O(e,t,a,r){return j.apply(this,arguments)}function j(){return(j=Object(s.a)(n.a.mark((function e(t,a,r,i){var s,u,o,c,l,p,d,f;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s="string"==typeof t?Object(v.J)(t):t,u=a[0].spatialReference,o=Object(m.a)(Object(m.a)({},i),{},{query:Object(m.a)(Object(m.a)({},s.query),{},{f:"json",sr:JSON.stringify(u),target:JSON.stringify({geometryType:Object(w.c)(a[0]),geometries:a}),cutter:JSON.stringify(r)})}),e.next=5,Object(g.default)(s.path+"/cut",o);case 5:return c=e.sent,l=c.data,p=l.cutIndexes,d=l.geometries,f=void 0===d?[]:d,e.abrupt("return",{cutIndexes:p,geometries:f.map((function(e){var t=Object(w.a)(e);return t.spatialReference=u,t}))});case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function F(e,t,a){return x.apply(this,arguments)}function x(){return(x=Object(s.a)(n.a.mark((function e(t,a,r){var i,s,u,o;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i="string"==typeof t?Object(v.J)(t):t,s=a[0].spatialReference,u=Object(w.c)(a[0]),o=Object(m.a)(Object(m.a)({},r),{},{query:Object(m.a)(Object(m.a)({},i.query),{},{f:"json",sr:s.wkid?s.wkid:JSON.stringify(s),geometries:JSON.stringify(A(a))})}),e.t0=k,e.next=4,Object(g.default)(i.path+"/simplify",o);case 4:return e.t1=e.sent.data,e.t2=u,e.t3=s,e.abrupt("return",(0,e.t0)(e.t1,e.t2,e.t3));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A(e){return{geometryType:Object(w.c)(e[0]),geometries:e.map((function(e){return e.toJSON()}))}}function k(e,t,a){var r=Object(w.b)(t);return e.map((function(e){var t=r.fromJSON(e);return t.spatialReference=a,t}))}var I=l.a.getLogger("esri.geometry.support.normalizeUtils");function R(e,t,a){if(t){var r=function(e,t){if(!(e instanceof f.a||e instanceof d.a)){var a="straightLineDensify: the input geometry is neither polyline nor polygon";throw I.error(a),new c.a(a)}var r,n=Object(h.b)(e),i=[],s=Object(u.a)(n);try{for(s.s();!(r=s.n()).done;){var o=r.value,l=[];i.push(l),l.push([o[0][0],o[0][1]]);for(var p=0;p<o.length-1;p++){var b=o[p][0],y=o[p][1],m=o[p+1][0],g=o[p+1][1],v=Math.sqrt((m-b)*(m-b)+(g-y)*(g-y)),w=(g-y)/v,O=(m-b)/v,j=v/t;if(j>1){for(var F=1;F<=j-1;F++){var x=F*t,A=O*x+b,k=w*x+y;l.push([A,k])}var R=(v+Math.floor(j-1)*t)/2,S=O*R+b,E=w*R+y;l.push([S,E])}l.push([m,g])}}}catch(L){s.e(L)}finally{s.f()}return function(e){return"polygon"===e.type}(e)?new d.a({rings:i,spatialReference:e.spatialReference}):new f.a({paths:i,spatialReference:e.spatialReference})}(e,1e6);e=Object(y.e)(r,!0)}return a&&(e=Object(h.e)(e,a)),e}function S(e,t,a){if(Array.isArray(e)){var r=e[0];if(r>t){var n=Object(h.d)(r,t);e[0]=r+n*(-2*t)}else if(r<a){var i=Object(h.d)(r,a);e[0]=r+i*(-2*a)}}else{var s=e.x;if(s>t){var u=Object(h.d)(s,t);e=e.clone().offset(u*(-2*t),0)}else if(s<a){var o=Object(h.d)(s,a);e=e.clone().offset(o*(-2*a),0)}}return e}function E(e,t){for(var a=-1,r=function(r){for(var n=t.cutIndexes[r],i=t.geometries[r],s=Object(h.b)(i),o=function(e){var t=s[e];t.some((function(a){if(a[0]<180)return!0;for(var r=0,n=0;n<t.length;n++){var s=t[n][0];r=s>r?s:r}r=Number(r.toFixed(9));for(var u=-360*Object(h.d)(r,180),o=0;o<t.length;o++){var c=i.getPoint(e,o);i.setPoint(e,o,c.clone().offset(u,0))}return!0}))},c=0;c<s.length;c++)o(c);if(n===a){if(function(e){return"polygon"===e[0].type}(e)){var l,p=Object(u.a)(Object(h.b)(i));try{for(p.s();!(l=p.n()).done;){var d=l.value;e[n]=e[n].addRing(d)}}catch(m){p.e(m)}finally{p.f()}}else if(function(e){return"polyline"===e[0].type}(e)){var f,b=Object(u.a)(Object(h.b)(i));try{for(b.s();!(f=b.n()).done;){var y=f.value;e[n]=e[n].addPath(y)}}catch(m){b.e(m)}finally{b.f()}}}else a=n,e[n]=i},n=0;n<t.cutIndexes.length;n++)r(n);return e}function L(e,t,a){return U.apply(this,arguments)}function U(){return(U=Object(s.a)(n.a.mark((function e(t,a,r){var i,s,c,l,m,g,v,w,j,x,A,k,I,U,J,M,W,N,X,q,G,P,T,z,B,V,C,D,Z,_,H,K,Q,Y,$,ee,te,ae,re,ne;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Array.isArray(t)){e.next=2;break}return e.abrupt("return",L([t],a));case 2:i=a?a.url:o.a.geometryServiceUrl,x=0,A=[],k=[],I=Object(u.a)(t);try{for(I.s();!(U=I.n()).done;)J=U.value,Object(p.i)(J)?k.push(J):(s||(s=J.spatialReference,c=Object(b.e)(s),l=s.isWebMercator,v=l?102100:4326,m=h.a[v].maxX,g=h.a[v].minX,w=h.a[v].plus180Line,j=h.a[v].minus180Line),c?"mesh"===J.type?k.push(J):"point"===J.type?k.push(S(J.clone(),m,g)):"multipoint"===J.type?((M=J.clone()).points=M.points.map((function(e){return S(e,m,g)})),k.push(M)):"extent"===J.type?(W=J.clone()._normalize(!1,!1,c),k.push(W.rings?new d.a(W):W)):J.extent?(N=J.extent,X=Object(h.d)(N.xmin,g)*(2*m),q=0===X?J.clone():Object(h.e)(J.clone(),X),N.offset(X,0),N.intersects(w)&&N.xmax!==m?(x=N.xmax>x?N.xmax:x,q=R(q,l),A.push(q),k.push("cut")):N.intersects(j)&&N.xmin!==g?(x=N.xmax*(2*m)>x?N.xmax*(2*m):x,q=R(q,l,360),A.push(q),k.push("cut")):k.push(q)):k.push(J.clone()):k.push(J))}catch(n){I.e(n)}finally{I.f()}for(G=Object(h.d)(x,m),P=-90,T=G,z=new f.a;G>0;)B=360*G-180,z.addPath([[B,P],[B,-1*P]]),P*=-1,G--;if(!(A.length>0&&T>0)){e.next=28;break}return e.t0=E,e.t1=A,e.next=15,O(i,A,z,r);case 15:for(e.t2=e.sent,V=(0,e.t0)(e.t1,e.t2),C=[],D=[],Z=0;Z<k.length;Z++)"cut"!==(_=k[Z])?D.push(_):(H=V.shift(),K=t[Z],Object(p.j)(K)&&"polygon"===K.type&&K.rings&&K.rings.length>1&&H.rings.length>=K.rings.length?(C.push(H),D.push("simplify")):D.push(l?Object(y.b)(H):H));if(C.length){e.next=22;break}return e.abrupt("return",D);case 22:return e.next=24,F(i,C,r);case 24:for(Q=e.sent,Y=[],$=0;$<D.length;$++)"simplify"!==(ee=D[$])?Y.push(ee):Y.push(l?Object(y.b)(Q.shift()):Q.shift());return e.abrupt("return",Y);case 28:for(te=[],ae=0;ae<k.length;ae++)"cut"!==(re=k[ae])?te.push(re):(ne=A.shift(),te.push(!0===l?Object(y.b)(ne):ne));return e.abrupt("return",Promise.resolve(te));case 31:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function J(e,t){var a=Object(b.e)(t);if(a){var r=Object(i.a)(a.valid,2),n=r[0],s=r[1],u=s-n;if(e<n)for(;e<n;)e+=u;if(e>s)for(;e>s;)e-=u}return e}},732:function(e,t,a){"use strict";a.d(t,"a",(function(){return u})),a.d(t,"b",(function(){return l})),a.d(t,"c",(function(){return p})),a.d(t,"d",(function(){return o})),a.d(t,"e",(function(){return c}));var r=a(21),n=a(107),i=a(45),s=a(62),u={102100:{maxX:20037508.342788905,minX:-20037508.342788905,plus180Line:new n.a({paths:[[[20037508.342788905,-20037508.342788905],[20037508.342788905,20037508.342788905]]],spatialReference:i.a.WebMercator}),minus180Line:new n.a({paths:[[[-20037508.342788905,-20037508.342788905],[-20037508.342788905,20037508.342788905]]],spatialReference:i.a.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new n.a({paths:[[[180,-180],[180,180]]],spatialReference:i.a.WGS84}),minus180Line:new n.a({paths:[[[-180,-180],[-180,180]]],spatialReference:i.a.WGS84})}};function o(e,t){return Math.ceil((e-t)/(2*t))}function c(e,t){var a,n=l(e),i=Object(r.a)(n);try{for(i.s();!(a=i.n()).done;){var s,u=a.value,o=Object(r.a)(u);try{for(o.s();!(s=o.n()).done;){s.value[0]+=t}}catch(c){o.e(c)}finally{o.f()}}}catch(c){i.e(c)}finally{i.f()}return e}function l(e){return Object(s.g)(e)?e.rings:e.paths}function p(e){var t=(null==e?void 0:e.isWebMercator)?102100:4326;return[u[t].minX,u[t].maxX]}}}]);
//# sourceMappingURL=28.4d6190eb.chunk.js.map