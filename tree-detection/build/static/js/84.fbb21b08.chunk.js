(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[84],{617:function(e,t,n){"use strict";n.r(t),n.d(t,"fetchStyle",(function(){return w})),n.d(t,"fetchSymbolFromStyle",(function(){return j})),n.d(t,"resolveWebStyleSymbol",(function(){return g})),n.d(t,"styleNameFromItem",(function(){return O}));var r=n(13),a=n(21),o=n(82),s=n(332),l=n(918),i=n(29),c=n(27),u=n(85),m=n(132),y=n(19),f=n(87),b=n(753),p=n(264),d=n(256),h={};function v(e,t,n){var r,o=t.portal||u.a.getDefault(),s="".concat(o.url," - ").concat(o.user&&o.user.username," - ").concat(e);return h[s]||(h[s]=function(e,t,n){return t.load(n).then((function(){var r=new m.a({disableExtraQuery:!0,query:"owner:".concat(U," AND type:").concat(C,' AND typekeywords:"').concat(e,'"')});return t.queryItems(r,n)})).then((function(t){var r=t.results,o=null,s=e.toLowerCase();if(r&&Array.isArray(r)){var l,c=Object(a.a)(r);try{for(c.s();!(l=c.n()).done;){var u=l.value;if(u.typeKeywords.some((function(e){return e.toLowerCase()===s}))&&u.type===C&&u.owner===U){o=u;break}}}catch(m){c.e(m)}finally{c.f()}}if(!o)throw new i.a("symbolstyleutils:style-not-found","The style '".concat(e,"' could not be found"),{styleName:e});return o.load(n)}))}(e,o,n).then((function(e){return r=e,e.fetchData()})).then((function(t){return{data:t,baseUrl:r.itemUrl,styleName:e}}))),h[s]}function w(e,t,n){return e.styleUrl?function(e,t){return N(e,t).then((function(t){return{data:t.data,baseUrl:Object(c.F)(e),styleUrl:e}}))}(e.styleUrl,n):e.styleName?v(e.styleName,t,n):Promise.reject(new i.a("symbolstyleutils:style-url-and-name-missing","Either styleUrl or styleName is required to resolve a style"))}function g(e,t,n,r){return e.name?e.styleName&&"Esri2DPointSymbolsStyle"===e.styleName?function(e,t,n){var r=D.replace(/\{SymbolName\}/gi,e.name);return N(r,n).then((function(e){var n=S(e.data);return Object(b.a)(n,{portal:t.portal,url:Object(c.J)(Object(c.F)(r)),origin:"portal-item"})}))}(e,t,r):w(e,t,r).then((function(a){return j(a,e.name,t,n,r)})):Promise.reject(new i.a("symbolstyleutils:style-symbol-reference-name-missing","Missing name in style symbol reference"))}function j(e,t,n,r,o){var u=e.data,m={portal:n.portal,url:Object(c.J)(e.baseUrl),origin:"portal-item"},h=u.items.find((function(e){return e.name===t}));if(!h){var v="The symbol name '".concat(t,"' could not be found");return Promise.reject(new i.a("symbolstyleutils:symbol-name-not-found",v,{symbolName:t}))}var w=Object(f.a)(function(e,t){if("cimRef"===t)return e.cimRef;if(e.formatInfos&&!Object(y.a)("enable-feature:force-wosr")){var n,r=Object(a.a)(e.formatInfos);try{for(r.s();!(n=r.n()).done;){var o=n.value;if("gltf"===o.type)return o.href}}catch(s){r.e(s)}finally{r.f()}}return e.webRef}(h,r),m),g=h.thumbnail&&h.thumbnail.href,j=h.thumbnail&&h.thumbnail.imageData;Object(l.b)()&&(w=Object(l.a)(w),g=Object(l.a)(g));var O={portal:n.portal,url:Object(c.J)(Object(c.F)(w)),origin:"portal-item"};return N(w,o).then((function(a){var o="cimRef"===r?S(a.data):a.data,l=Object(b.a)(o,O);if(l&&Object(s.c)(l)){if(g){var i=Object(f.a)(g,m);l.thumbnail=new d.a({url:i})}else j&&(l.thumbnail=new d.a({url:"data:image/png;base64,".concat(j)}));e.styleUrl?l.styleOrigin=new p.a({portal:n.portal,styleUrl:e.styleUrl,name:t}):e.styleName&&(l.styleOrigin=new p.a({portal:n.portal,styleName:e.styleName,name:t}))}return l}))}function S(e){return null===e||"CIMSymbolReference"===e.type?e:{type:"CIMSymbolReference",symbol:e}}function O(e){var t,n=Object(a.a)(e.typeKeywords);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(/^Esri.*Style$/.test(r)&&"Esri Style"!==r)return r}}catch(o){n.e(o)}finally{n.f()}}function N(e,t){var n=Object(r.a)({responseType:"json",query:{f:"json"}},t);return Object(o.default)(Object(c.C)(e),n)}var U="esri_en",C="Style",D="https://cdn.arcgis.com/sharing/rest/content/items/220936cc6ed342c9937abd8f180e7d1e/resources/styles/cim/{SymbolName}.json?f=json"},753:function(e,t,n){"use strict";n.d(t,"a",(function(){return h})),n.d(t,"b",(function(){return d}));var r=n(332),a=n(29),o=n(110),s=n(147),l=n(173),i=n(98),c=n(172),u=n(143),m=n(146),y=n(166),f=n(169),b=n(136),p=n(171);function d(e,t,n,d){var h=function(e,t,n){if(!e)return null;if(n&&"web-scene"===n.origin&&!(e instanceof o.a)&&!(e instanceof s.a)){var d="cim"!==e.type?function(e){var t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],d=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(!e)return{symbol:null};if(Object(r.c)(e)||e instanceof s.a)t=e.clone();else if("cim"===e.type)t=l.a.fromCIMSymbol(e);else if(e instanceof i.a)t=c.a.fromSimpleLineSymbol(e);else if(e instanceof u.a)t=l.a.fromSimpleMarkerSymbol(e);else if(e instanceof m.a)t=l.a.fromPictureMarkerSymbol(e);else if(e instanceof y.a)t=f.a.fromSimpleFillSymbol(e);else{if(!(e instanceof b.a))return{error:new a.a("symbol-conversion:unsupported-2d-symbol","2D symbol of type '".concat(e.type||e.declaredClass,"' is unsupported in 3D"),{symbol:e})};t=d?p.a.fromTextSymbol(e):l.a.fromTextSymbol(e)}if(n&&(t.id=e.id),o&&Object(r.c)(t))for(var h=0;h<t.symbolLayers.length;++h)t.symbolLayers.getItemAt(h)._ignoreDrivers=!0;return{symbol:t}}(e):{symbol:null,error:new a.a("symbol-conversion:unsupported-cim-symbol","CIM symbol is unsupported in web scenes",{symbol:e})};return d.symbol?d.symbol.write(t,n):(n.messages&&n.messages.push(new a.a("symbol:unsupported","Symbols of type '".concat(e.declaredClass,"' are not supported in scenes. Use 3D symbology instead when working with WebScene and SceneView"),{symbol:e,context:n,error:d.error})),null)}return n&&"web-map"===n.origin&&"web-style"===e.type?(n.messages&&n.messages.push(new a.a("symbol:unsupported","Symbols of type '".concat(e.declaredClass,"' are not supported in webmaps. Use CIMSymbol instead when working with WebMap in MapView."),{symbol:e,context:n})),null):e.write(t,n)}(e,{},d);h&&(t[n]=h)}function h(e,t){return Object(r.d)(e,null,t)}},918:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return a}));var r=n(37);function a(e){return e=e||r.a.location.hostname,u.some((function(t){var n;return null!=(null==(n=e)?void 0:n.match(t))}))}function o(e,t){return e&&(t=t||r.a.location.hostname)?null!=t.match(s)||null!=t.match(i)?e.replace("static.arcgis.com","staticdev.arcgis.com"):null!=t.match(l)||null!=t.match(c)?e.replace("static.arcgis.com","staticqa.arcgis.com"):e:e}var s=/^devext.arcgis.com$/,l=/^qaext.arcgis.com$/,i=/^[\w-]*\.mapsdevext.arcgis.com$/,c=/^[\w-]*\.mapsqa.arcgis.com$/,u=[/^([\w-]*\.)?[\w-]*\.zrh-dev-local.esri.com$/,s,l,/^jsapps.esri.com$/,i,c]}}]);
//# sourceMappingURL=84.fbb21b08.chunk.js.map