(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[45,7,16,55,62,98,115],{660:function(e,t,r){"use strict";r.d(t,"a",(function(){return y}));var n=r(2),i=r(5),a=r(6),o=r(0),s=r(42),c=r(26),l=r(1),u=(r(19),r(14),r(15),r(31)),p=r(10),b=new s.a({inherited:"inherited",codedValue:"coded-value",range:"range"}),d=function(e){Object(i.a)(r,e);var t=Object(a.a)(r);function r(e){var i;return Object(n.a)(this,r),(i=t.call(this,e)).name=null,i.type=null,i}return r}(c.a);Object(o.a)([Object(l.b)({type:String,json:{write:!0}})],d.prototype,"name",void 0),Object(o.a)([Object(u.a)(b)],d.prototype,"type",void 0);var y=d=Object(o.a)([Object(p.a)("esri.layers.support.Domain")],d)},661:function(e,t,r){"use strict";r.d(t,"a",(function(){return d}));var n,i=r(2),a=r(4),o=r(5),s=r(6),c=r(0),l=(r(1),r(19),r(14),r(15),r(31)),u=r(10),p=r(660),b=n=function(e){Object(o.a)(r,e);var t=Object(s.a)(r);function r(e){var n;return Object(i.a)(this,r),(n=t.call(this,e)).type="inherited",n}return Object(a.a)(r,[{key:"clone",value:function(){return new n}}]),r}(p.a);Object(c.a)([Object(l.a)({inherited:"inherited"})],b.prototype,"type",void 0);var d=b=n=Object(c.a)([Object(u.a)("esri.layers.support.InheritedDomain")],b)},662:function(e,t,r){"use strict";r.d(t,"a",(function(){return y}));var n,i=r(2),a=r(4),o=r(5),s=r(6),c=r(0),l=r(1),u=(r(19),r(14),r(15),r(31)),p=r(10),b=r(660),d=n=function(e){Object(o.a)(r,e);var t=Object(s.a)(r);function r(e){var n;return Object(i.a)(this,r),(n=t.call(this,e)).maxValue=null,n.minValue=null,n.type="range",n}return Object(a.a)(r,[{key:"clone",value:function(){return new n({maxValue:this.maxValue,minValue:this.minValue,name:this.name})}}]),r}(b.a);Object(c.a)([Object(l.b)({type:Number,json:{type:[Number],read:{source:"range",reader:function(e,t){return t.range&&t.range[1]}},write:{enabled:!1,overridePolicy:function(){return{enabled:null!=this.maxValue&&null==this.minValue}},target:"range",writer:function(e,t,r){t[r]=[this.minValue||0,e]}}}})],d.prototype,"maxValue",void 0),Object(c.a)([Object(l.b)({type:Number,json:{type:[Number],read:{source:"range",reader:function(e,t){return t.range&&t.range[0]}},write:{target:"range",writer:function(e,t,r){t[r]=[e,this.maxValue||0]}}}})],d.prototype,"minValue",void 0),Object(c.a)([Object(u.a)({range:"range"})],d.prototype,"type",void 0);var y=d=n=Object(c.a)([Object(p.a)("esri.layers.support.RangeDomain")],d)},664:function(e,t,r){"use strict";r.d(t,"a",(function(){return v}));var n,i=r(2),a=r(4),o=r(5),s=r(6),c=r(0),l=r(18),u=r(1),p=(r(14),r(19),r(15),r(31)),b=r(10),d=r(26),y=n=function(e){Object(o.a)(r,e);var t=Object(s.a)(r);function r(e){var n;return Object(i.a)(this,r),(n=t.call(this,e)).name=null,n.code=null,n}return Object(a.a)(r,[{key:"clone",value:function(){return new n({name:this.name,code:this.code})}}]),r}(d.a);Object(c.a)([Object(u.b)({type:String,json:{write:!0}})],y.prototype,"name",void 0),Object(c.a)([Object(u.b)({type:[String,Number],json:{write:!0}})],y.prototype,"code",void 0);var f,j=y=n=Object(c.a)([Object(b.a)("esri.layers.support.CodedValue")],y),h=r(660),O=f=function(e){Object(o.a)(r,e);var t=Object(s.a)(r);function r(e){var n;return Object(i.a)(this,r),(n=t.call(this,e)).codedValues=null,n.type="coded-value",n}return Object(a.a)(r,[{key:"getName",value:function(e){var t=null;if(this.codedValues){var r=String(e);this.codedValues.some((function(e){return String(e.code)===r&&(t=e.name),!!t}))}return t}},{key:"clone",value:function(){return new f({codedValues:Object(l.a)(this.codedValues),name:this.name})}}]),r}(h.a);Object(c.a)([Object(u.b)({type:[j],json:{write:!0}})],O.prototype,"codedValues",void 0),Object(c.a)([Object(p.a)({codedValue:"coded-value"})],O.prototype,"type",void 0);var v=O=f=Object(c.a)([Object(b.a)("esri.layers.support.CodedValueDomain")],O)},666:function(e,t,r){"use strict";r.d(t,"a",(function(){return m}));var n,i=r(2),a=r(4),o=r(5),s=r(6),c=r(0),l=r(42),u=r(26),p=r(1),b=(r(19),r(14)),d=(r(15),r(31)),y=r(57),f=r(10),j=r(679),h=r(690),O=new l.a({binary:"binary",coordinate:"coordinate",countOrAmount:"count-or-amount",dateAndTime:"date-and-time",description:"description",locationOrPlaceName:"location-or-place-name",measurement:"measurement",nameOrTitle:"name-or-title",none:"none",orderedOrRanked:"ordered-or-ranked",percentageOrRatio:"percentage-or-ratio",typeOrCategory:"type-or-category",uniqueIdentifier:"unique-identifier"}),v=n=function(e){Object(o.a)(r,e);var t=Object(s.a)(r);function r(e){var n;return Object(i.a)(this,r),(n=t.call(this,e)).alias=null,n.defaultValue=void 0,n.description=null,n.domain=null,n.editable=!0,n.length=-1,n.name=null,n.nullable=!0,n.type=null,n.valueType=null,n}return Object(a.a)(r,[{key:"readDescription",value:function(e,t){var r,n=t.description;try{r=JSON.parse(n)}catch(i){}return r?r.value:null}},{key:"readValueType",value:function(e,t){var r,n=t.description;try{r=JSON.parse(n)}catch(i){}return r?O.fromJSON(r.fieldValueType):null}},{key:"clone",value:function(){return new n({alias:this.alias,defaultValue:this.defaultValue,description:this.description,domain:this.domain&&this.domain.clone()||null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type,valueType:this.valueType})}}]),r}(u.a);Object(c.a)([Object(p.b)({type:String,json:{write:!0}})],v.prototype,"alias",void 0),Object(c.a)([Object(p.b)({type:[String,Number],json:{write:{allowNull:!0}}})],v.prototype,"defaultValue",void 0),Object(c.a)([Object(p.b)()],v.prototype,"description",void 0),Object(c.a)([Object(y.a)("description")],v.prototype,"readDescription",null),Object(c.a)([Object(p.b)({types:j.b,json:{read:{reader:j.a},write:!0}})],v.prototype,"domain",void 0),Object(c.a)([Object(p.b)({type:Boolean,json:{write:!0}})],v.prototype,"editable",void 0),Object(c.a)([Object(p.b)({type:b.a,json:{write:!0}})],v.prototype,"length",void 0),Object(c.a)([Object(p.b)({type:String,json:{write:!0}})],v.prototype,"name",void 0),Object(c.a)([Object(p.b)({type:Boolean,json:{write:!0}})],v.prototype,"nullable",void 0),Object(c.a)([Object(d.a)(h.a)],v.prototype,"type",void 0),Object(c.a)([Object(p.b)()],v.prototype,"valueType",void 0),Object(c.a)([Object(y.a)("valueType",["description"])],v.prototype,"readValueType",null);var m=v=n=Object(c.a)([Object(f.a)("esri.layers.support.Field")],v)},667:function(e,t,r){"use strict";r.d(t,"a",(function(){return g}));var n=r(21),i=r(2),a=r(4),o=r(83),s=r(29),c=r(122),l=r(11),u=r(30),p=r(674),b=r(296),d={statsWorker:function(){return r.e(99).then(r.bind(null,787))},geometryEngineWorker:function(){return Promise.all([r.e(9),r.e(82)]).then(r.bind(null,788))},CSVSourceWorker:function(){return Promise.all([r.e(4),r.e(5),r.e(6),r.e(8),r.e(59)]).then(r.bind(null,803))},EdgeProcessingWorker:function(){return Promise.all([r.e(12),r.e(81)]).then(r.bind(null,797))},ElevationSamplerWorker:function(){return Promise.all([r.e(4),r.e(8),r.e(12),r.e(20),r.e(111)]).then(r.bind(null,789))},FeatureServiceSnappingSourceWorker:function(){return Promise.all([r.e(4),r.e(5),r.e(6),r.e(8),r.e(51)]).then(r.bind(null,798))},GeoJSONSourceWorker:function(){return Promise.all([r.e(4),r.e(5),r.e(6),r.e(8),r.e(58)]).then(r.bind(null,790))},LercWorker:function(){return r.e(89).then(r.bind(null,791))},MemorySourceWorker:function(){return Promise.all([r.e(4),r.e(5),r.e(6),r.e(8),r.e(57)]).then(r.bind(null,792))},PBFDecoderWorker:function(){return Promise.all([r.e(6),r.e(65)]).then(r.bind(null,800))},Pipeline:function(){return Promise.all([r.e(2),r.e(4),r.e(5),r.e(6),r.e(39)]).then(r.bind(null,795))},PointCloudWorker:function(){return Promise.all([r.e(4),r.e(27),r.e(75)]).then(r.bind(null,799))},RasterWorker:function(){return r.e(63).then(r.bind(null,793))},SceneLayerWorker:function(){return r.e(121).then(r.bind(null,804))},WFSSourceWorker:function(){return Promise.all([r.e(4),r.e(5),r.e(6),r.e(8),r.e(56)]).then(r.bind(null,794))},WorkerTileHandler:function(){return Promise.all([r.e(26),r.e(23),r.e(93)]).then(r.bind(null,796))}},y=p.a.CLOSE,f=p.a.ABORT,j=p.a.INVOKE,h=p.a.RESPONSE,O=p.a.OPEN_PORT,v=p.a.ON,m=function(){function e(t){Object(i.a)(this,e),this._timer=null,this._cancelledJobIds=new Set,this._invokeMessages=[],this._invoke=t,this._timer=null,this._process=this._process.bind(this)}return Object(a.a)(e,[{key:"push",value:function(e){e.type===p.a.ABORT?this._cancelledJobIds.add(e.jobId):(this._invokeMessages.push(e),null===this._timer&&(this._timer=setTimeout(this._process,0)))}},{key:"clear",value:function(){this._invokeMessages.length=0,this._cancelledJobIds.clear(),this._timer=null}},{key:"_process",value:function(){this._timer=null;var e,t=Object(n.a)(this._invokeMessages);try{for(t.s();!(e=t.n()).done;){var r=e.value;this._cancelledJobIds.has(r.jobId)||this._invoke(r)}}catch(i){t.e(i)}finally{t.f()}this._cancelledJobIds.clear(),this._invokeMessages.length=0}}]),e}(),g=function(){function e(t,r){var n=this;Object(i.a)(this,e),this._port=t,this._outJobs=new Map,this._inJobs=new Map,this._invokeQueue=new m((function(e){return n._onInvokeMessage(e)})),this._client=r.client,this._onMessage=this._onMessage.bind(this),this._channel=r.channel,this._schedule=r.schedule,this._port.addEventListener("message",this._onMessage),this._port.start()}return Object(a.a)(e,[{key:"close",value:function(){this._post({type:y}),this._close()}},{key:"isBusy",value:function(){return this._outJobs.size>0}},{key:"invoke",value:function(e,t,r){var n=this,i=r&&r.signal,a=r&&r.transferList;if(!this._port)return Promise.reject(new s.a("worker:port-closed","Cannot call invoke('".concat(e,"'), port is closed"),{methodName:e,data:t}));var o=Object(p.b)();return new Promise((function(r,s){var c=Object(u.r)(i,(function(){var e,t=n._outJobs.get(o);t&&(n._outJobs.delete(o),null==(e=t.abortHandle)||e.remove(),n._post({type:f,jobId:o}),s(Object(u.e)()))})),l={resolve:r,reject:s,abortHandle:c,debugInfo:e};n._outJobs.set(o,l),n._post({type:j,jobId:o,methodName:e,abortable:null!=i},t,a)}))}},{key:"on",value:function(e,t){var r=new MessageChannel;function n(e){t(e.data)}return this._port.postMessage({type:p.a.ON,eventType:e,port:r.port2},[r.port2]),r.port1.addEventListener("message",n),r.port1.start(),{remove:function(){r.port1.postMessage({type:p.a.CLOSE}),r.port1.close(),r.port1.removeEventListener("message",n)}}}},{key:"openPort",value:function(){var e=new MessageChannel;return this._post({type:O,port:e.port2}),e.port1}},{key:"_close",value:function(){this._channel&&(this._channel=null),this._port.removeEventListener("message",this._onMessage),this._port.close(),this._outJobs.forEach((function(e){var t;null==(t=e.abortHandle)||t.remove(),e.reject(Object(u.e)("Worker closing, aborting job calling '".concat(e.debugInfo,"'")))})),this._inJobs.clear(),this._outJobs.clear(),this._invokeQueue.clear(),this._port=this._client=this._schedule=null}},{key:"_onMessage",value:function(e){var t=this;Object(l.j)(this._schedule)?this._schedule((function(){return t._processMessage(e)})):this._processMessage(e)}},{key:"_processMessage",value:function(e){var t=Object(p.d)(e);if(t)switch(t.type){case h:this._onResponseMessage(t);break;case j:this._invokeQueue.push(t);break;case f:this._onAbortMessage(t);break;case y:this._onCloseMessage();break;case O:this._onOpenPortMessage(t);break;case v:this._onOnMessage(t)}}},{key:"_onAbortMessage",value:function(e){var t=this._inJobs,r=e.jobId,n=t.get(r);this._invokeQueue.push(e),n&&(n.controller&&n.controller.abort(),t.delete(r))}},{key:"_onCloseMessage",value:function(){var t=this._client;this._close(),t&&"destroy"in t&&e.clients.get(this)===t&&t.destroy(),e.clients.delete(this),t&&t.remoteClient&&(t.remoteClient=null)}},{key:"_onInvokeMessage",value:function(e){var t,r=this,n=e.methodName,i=e.jobId,a=e.data,o=e.abortable?Object(u.d)():null,s=this._inJobs,c=this._client,l=c[n];try{if(!l&&n&&-1!==n.indexOf("."))for(var b=n.split("."),d=0;d<b.length-1;d++)l=(c=c[b[d]])[b[d+1]];if("function"!=typeof l)throw new TypeError("".concat(n," is not a function"));t=l.call(c,a,{client:this,signal:o?o.signal:null})}catch(y){return void this._post({type:h,jobId:i,error:Object(p.e)(y)})}Object(u.p)(t)?(s.set(i,{controller:o,promise:t}),t.then((function(e){s.has(i)&&(s.delete(i),r._post({type:h,jobId:i},e))}),(function(e){s.has(i)&&(s.delete(i),Object(u.m)(e)||r._post({type:h,jobId:i,error:Object(p.e)(e||{message:"Error encountered at method ".concat(n)})}))}))):this._post({type:h,jobId:i},t)}},{key:"_onOpenPortMessage",value:function(t){new e(t.port,{client:this._client})}},{key:"_onOnMessage",value:function(e){var t=e.port,r=this._client.on(e.eventType,(function(e){t.postMessage(e)})),n=Object(c.c)(e.port,"message",(function(e){Object(p.d)(e).type===p.a.CLOSE&&(n.remove(),r.remove(),t.close())}))}},{key:"_onResponseMessage",value:function(e){var t,r=e.jobId,n=e.error,i=e.data,a=this._outJobs;if(a.has(r)){var o=a.get(r);a.delete(r),null==(t=o.abortHandle)||t.remove(),n?o.reject(s.a.fromJSON(JSON.parse(n))):o.resolve(i)}}},{key:"_post",value:function(e,t,r){return Object(p.c)(this._port,e,t,r)}}],[{key:"connect",value:function(t){var r,n=new MessageChannel;r="function"==typeof t?new t:"default"in t&&"function"==typeof t.default?new t.default:t;var i=new e(n.port1,{channel:n,client:r});return"object"==typeof r&&"remoteClient"in r&&(r.remoteClient=i),e.clients.set(i,r),n.port2}},{key:"loadWorker",value:function(e){var t=d[e];return t?t():Promise.resolve(null)}}]),e}();g.kernelInfo={revision:b.b,version:o.d,buildDate:b.a},g.clients=new Map},668:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return k}));var n=r(22),i=r(21),a=r(2),o=r(4),s=r(5),c=r(6),l=r(0),u=r(114),p=r(210),b=r(42),d=r(26),y=r(11),f=r(1),j=(r(19),r(14),r(15),r(57)),h=r(10),O=r(43),v=r(45),m=r(62),g=r(666),w=new b.a({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh","":null}),S=function(e){Object(s.a)(r,e);var t=Object(c.a)(r);function r(e){var n;return Object(a.a)(this,r),(n=t.call(this,e)).displayFieldName=null,n.exceededTransferLimit=!1,n.features=[],n.fields=null,n.geometryType=null,n.hasM=!1,n.hasZ=!1,n.queryGeometry=null,n.spatialReference=null,n}return Object(o.a)(r,[{key:"readFeatures",value:function(e,t){for(var r=v.a.fromJSON(t.spatialReference),n=[],i=0;i<e.length;i++){var a=e[i],o=p.a.fromJSON(a),s=a.geometry&&a.geometry.spatialReference;Object(y.j)(o.geometry)&&!s&&(o.geometry.spatialReference=r),n.push(o)}return n}},{key:"writeGeometryType",value:function(e,t,r,n){if(e)w.write(e,t,r,n);else{var a=this.features;if(a){var o,s=Object(i.a)(a);try{for(s.s();!(o=s.n()).done;){var c=o.value;if(c&&Object(y.j)(c.geometry))return void w.write(c.geometry.type,t,r,n)}}catch(l){s.e(l)}finally{s.f()}}}}},{key:"readQueryGeometry",value:function(e,t){if(!e)return null;var r=!!e.spatialReference,n=Object(m.a)(e);return!r&&t.spatialReference&&(n.spatialReference=v.a.fromJSON(t.spatialReference)),n}},{key:"writeSpatialReference",value:function(e,t){if(e)t.spatialReference=e.toJSON();else{var r=this.features;if(r){var n,a=Object(i.a)(r);try{for(a.s();!(n=a.n()).done;){var o=n.value;if(o&&Object(y.j)(o.geometry)&&o.geometry.spatialReference)return void(t.spatialReference=o.geometry.spatialReference.toJSON())}}catch(s){a.e(s)}finally{a.f()}}}}},{key:"toJSON",value:function(e){var t=this.write(null);if(t.features&&Array.isArray(e)&&e.length>0)for(var r=0;r<t.features.length;r++){var n=t.features[r];if(n.geometry){var i=e&&e[r];n.geometry=i&&i.toJSON()||n.geometry}}return t}},{key:"quantize",value:function(e){for(var t=Object(n.a)(e.scale,2),r=t[0],i=t[1],a=Object(n.a)(e.translate,2),o=a[0],s=a[1],c=this.features,l=this._getQuantizationFunction(this.geometryType,(function(e){return Math.round((e-o)/r)}),(function(e){return Math.round((s-e)/i)})),u=0,p=c.length;u<p;u++)l(Object(y.q)(c[u].geometry))||(c.splice(u,1),u--,p--);return this.transform=e,this}},{key:"unquantize",value:function(){var e=this.geometryType,t=this.features,r=this.transform;if(!r)return this;var a,o=Object(n.a)(r.translate,2),s=o[0],c=o[1],l=Object(n.a)(r.scale,2),u=l[0],p=l[1],b=this._getHydrationFunction(e,(function(e){return e*u+s}),(function(e){return c-e*p})),d=Object(i.a)(t);try{for(d.s();!(a=d.n()).done;){var f=a.value.geometry;Object(y.j)(f)&&b(f)}}catch(j){d.e(j)}finally{d.f()}return this.transform=null,this}},{key:"_quantizePoints",value:function(e,t,r){for(var n,i,a=[],o=0,s=e.length;o<s;o++){var c=e[o];if(o>0){var l=t(c[0]),u=r(c[1]);l===n&&u===i||(a.push([l-n,u-i]),n=l,i=u)}else n=t(c[0]),i=r(c[1]),a.push([n,i])}return a.length>0?a:null}},{key:"_getQuantizationFunction",value:function(e,t,r){var n=this;return"point"===e?function(e){return e.x=t(e.x),e.y=r(e.y),e}:"polyline"===e||"polygon"===e?function(e){for(var i=Object(m.g)(e)?e.rings:e.paths,a=[],o=0,s=i.length;o<s;o++){var c=i[o],l=n._quantizePoints(c,t,r);l&&a.push(l)}return a.length>0?(Object(m.g)(e)?e.rings=a:e.paths=a,e):null}:"multipoint"===e?function(e){var i=n._quantizePoints(e.points,t,r);return i.length>0?(e.points=i,e):null}:"extent"===e?function(e){return e}:null}},{key:"_getHydrationFunction",value:function(e,t,r){return"point"===e?function(e){e.x=t(e.x),e.y=r(e.y)}:"polyline"===e||"polygon"===e?function(e){for(var n,i,a=Object(m.g)(e)?e.rings:e.paths,o=0,s=a.length;o<s;o++)for(var c=a[o],l=0,u=c.length;l<u;l++){var p=c[l];l>0?(n+=p[0],i+=p[1]):(n=p[0],i=p[1]),p[0]=t(n),p[1]=r(i)}}:"extent"===e?function(e){e.xmin=t(e.xmin),e.ymin=r(e.ymin),e.xmax=t(e.xmax),e.ymax=r(e.ymax)}:"multipoint"===e?function(e){for(var n,i,a=e.points,o=0,s=a.length;o<s;o++){var c=a[o];o>0?(n+=c[0],i+=c[1]):(n=c[0],i=c[1]),c[0]=t(n),c[1]=r(i)}}:void 0}}]),r}(d.a);Object(l.a)([Object(f.b)({type:String,json:{write:!0}})],S.prototype,"displayFieldName",void 0),Object(l.a)([Object(f.b)({type:Boolean,json:{write:{overridePolicy:function(e){return{enabled:e}}}}})],S.prototype,"exceededTransferLimit",void 0),Object(l.a)([Object(f.b)({type:[p.a],json:{write:!0}})],S.prototype,"features",void 0),Object(l.a)([Object(j.a)("features")],S.prototype,"readFeatures",null),Object(l.a)([Object(f.b)({type:[g.a],json:{write:!0}})],S.prototype,"fields",void 0),Object(l.a)([Object(f.b)({type:["point","multipoint","polyline","polygon","extent","mesh"],json:{read:{reader:w.read}}})],S.prototype,"geometryType",void 0),Object(l.a)([Object(O.a)("geometryType")],S.prototype,"writeGeometryType",null),Object(l.a)([Object(f.b)({type:Boolean,json:{write:{overridePolicy:function(e){return{enabled:e}}}}})],S.prototype,"hasM",void 0),Object(l.a)([Object(f.b)({type:Boolean,json:{write:{overridePolicy:function(e){return{enabled:e}}}}})],S.prototype,"hasZ",void 0),Object(l.a)([Object(f.b)({types:u.a,json:{write:!0}})],S.prototype,"queryGeometry",void 0),Object(l.a)([Object(j.a)("queryGeometry")],S.prototype,"readQueryGeometry",null),Object(l.a)([Object(f.b)({type:v.a,json:{write:!0}})],S.prototype,"spatialReference",void 0),Object(l.a)([Object(O.a)("spatialReference")],S.prototype,"writeSpatialReference",null),Object(l.a)([Object(f.b)({json:{write:!0}})],S.prototype,"transform",void 0),(S=Object(l.a)([Object(h.a)("esri.rest.support.FeatureSet")],S)).prototype.toJSON.isDefaultToJSON=!0,S||(S={});var k=S},669:function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var n=r(42),i=Object(n.b)()({esriTimeUnitsMilliseconds:"milliseconds",esriTimeUnitsSeconds:"seconds",esriTimeUnitsMinutes:"minutes",esriTimeUnitsHours:"hours",esriTimeUnitsDays:"days",esriTimeUnitsWeeks:"weeks",esriTimeUnitsMonths:"months",esriTimeUnitsYears:"years",esriTimeUnitsDecades:"decades",esriTimeUnitsCenturies:"centuries",esriTimeUnitsUnknown:void 0})},670:function(e,t,r){"use strict";r.d(t,"a",(function(){return _}));var n,i=r(2),a=r(4),o=r(5),s=r(6),c=r(0),l=r(114),u=r(665),p=r(42),b=r(26),d=r(18),y=r(11),f=r(1),j=r(97),h=(r(19),r(15),r(31)),O=r(10),v=r(43),m=r(14),g=r(62),w=r(673),S=r(717),k=r(714),x=r(45),I=r(48),E=new p.a({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),F=new p.a({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"}),T=n=function(e){Object(o.a)(r,e);var t=Object(s.a)(r);function r(e){var n;return Object(i.a)(this,r),(n=t.call(this,e)).aggregateIds=null,n.cacheHint=void 0,n.datumTransformation=null,n.distance=void 0,n.dynamicDataSource=void 0,n.formatOf3DObjects=null,n.gdbVersion=null,n.geometry=null,n.geometryPrecision=void 0,n.groupByFieldsForStatistics=null,n.having=null,n.historicMoment=null,n.maxAllowableOffset=void 0,n.maxRecordCountFactor=1,n.multipatchOption=null,n.num=void 0,n.objectIds=null,n.orderByFields=null,n.outFields=null,n.outSpatialReference=null,n.outStatistics=null,n.parameterValues=null,n.pixelSize=null,n.quantizationParameters=null,n.rangeValues=null,n.relationParameter=null,n.resultType=null,n.returnCentroid=!1,n.returnDistinctValues=!1,n.returnExceededLimitFeatures=!0,n.returnGeometry=!1,n.returnQueryGeometry=!1,n.returnM=void 0,n.returnZ=void 0,n.sourceSpatialReference=null,n.spatialRelationship="intersects",n.start=void 0,n.sqlFormat=null,n.text=null,n.timeExtent=null,n.timeReferenceUnknownClient=!1,n.units=null,n.where=null,n}return Object(a.a)(r,[{key:"castDatumTransformation",value:function(e){return"number"==typeof e||"object"==typeof e?e:null}},{key:"writeHistoricMoment",value:function(e,t){t.historicMoment=e&&e.getTime()}},{key:"writeParameterValues",value:function(e,t){if(e){var r={};for(var n in e){var i=e[n];Array.isArray(i)?r[n]=i.map((function(e){return e instanceof Date?e.getTime():e})):i instanceof Date?r[n]=i.getTime():r[n]=i}t.parameterValues=r}}},{key:"writeStart",value:function(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10,t.where="1=1"}},{key:"writeWhere",value:function(e,t){t.where=e||"1=1"}},{key:"clone",value:function(){return new n(Object(d.a)({aggregateIds:this.aggregateIds,cacheHint:this.cacheHint,datumTransformation:this.datumTransformation,distance:this.distance,gdbVersion:this.gdbVersion,geometry:this.geometry,geometryPrecision:this.geometryPrecision,groupByFieldsForStatistics:this.groupByFieldsForStatistics,having:this.having,historicMoment:Object(y.j)(this.historicMoment)?new Date(this.historicMoment.getTime()):null,maxAllowableOffset:this.maxAllowableOffset,maxRecordCountFactor:this.maxRecordCountFactor,multipatchOption:this.multipatchOption,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,outStatistics:this.outStatistics,parameterValues:this.parameterValues,pixelSize:this.pixelSize,quantizationParameters:this.quantizationParameters,rangeValues:this.rangeValues,relationParameter:this.relationParameter,resultType:this.resultType,returnDistinctValues:this.returnDistinctValues,returnGeometry:this.returnGeometry,returnCentroid:this.returnCentroid,returnExceededLimitFeatures:this.returnExceededLimitFeatures,returnQueryGeometry:this.returnQueryGeometry,returnM:this.returnM,returnZ:this.returnZ,dynamicDataSource:this.dynamicDataSource,sourceSpatialReference:this.sourceSpatialReference,spatialRelationship:this.spatialRelationship,start:this.start,sqlFormat:this.sqlFormat,text:this.text,timeExtent:this.timeExtent,timeReferenceUnknownClient:this.timeReferenceUnknownClient,units:this.units,where:this.where}))}}],[{key:"from",value:function(e){return Object(m.d)(n,e)}}]),r}(b.a);T.MAX_MAX_RECORD_COUNT_FACTOR=5,Object(c.a)([Object(f.b)({json:{write:!0}})],T.prototype,"aggregateIds",void 0),Object(c.a)([Object(f.b)({type:Boolean,json:{write:!0}})],T.prototype,"cacheHint",void 0),Object(c.a)([Object(f.b)({json:{write:!0}})],T.prototype,"datumTransformation",void 0),Object(c.a)([Object(j.a)("datumTransformation")],T.prototype,"castDatumTransformation",null),Object(c.a)([Object(f.b)({type:Number,json:{write:{overridePolicy:function(e){return{enabled:e>0}}}}})],T.prototype,"distance",void 0),Object(c.a)([Object(f.b)({type:w.a,json:{write:!0}})],T.prototype,"dynamicDataSource",void 0),Object(c.a)([Object(f.b)({type:String,json:{write:!0}})],T.prototype,"formatOf3DObjects",void 0),Object(c.a)([Object(f.b)({type:String,json:{write:!0}})],T.prototype,"gdbVersion",void 0),Object(c.a)([Object(f.b)({types:l.a,json:{read:g.a,write:!0}})],T.prototype,"geometry",void 0),Object(c.a)([Object(f.b)({type:Number,json:{write:!0}})],T.prototype,"geometryPrecision",void 0),Object(c.a)([Object(f.b)({type:[String],json:{write:!0}})],T.prototype,"groupByFieldsForStatistics",void 0),Object(c.a)([Object(f.b)({type:String,json:{write:!0}})],T.prototype,"having",void 0),Object(c.a)([Object(f.b)({type:Date})],T.prototype,"historicMoment",void 0),Object(c.a)([Object(v.a)("historicMoment")],T.prototype,"writeHistoricMoment",null),Object(c.a)([Object(f.b)({type:Number,json:{write:!0}})],T.prototype,"maxAllowableOffset",void 0),Object(c.a)([Object(f.b)({type:Number,cast:function(e){return e<1?1:e>n.MAX_MAX_RECORD_COUNT_FACTOR?n.MAX_MAX_RECORD_COUNT_FACTOR:e},json:{write:{overridePolicy:function(e){return{enabled:e>1}}}}})],T.prototype,"maxRecordCountFactor",void 0),Object(c.a)([Object(f.b)({type:["xyFootprint"],json:{write:!0}})],T.prototype,"multipatchOption",void 0),Object(c.a)([Object(f.b)({type:Number,json:{read:{source:"resultRecordCount"}}})],T.prototype,"num",void 0),Object(c.a)([Object(f.b)({json:{write:!0}})],T.prototype,"objectIds",void 0),Object(c.a)([Object(f.b)({type:[String],json:{write:!0}})],T.prototype,"orderByFields",void 0),Object(c.a)([Object(f.b)({type:[String],json:{write:!0}})],T.prototype,"outFields",void 0),Object(c.a)([Object(f.b)({type:x.a,json:{name:"outSR",write:!0}})],T.prototype,"outSpatialReference",void 0),Object(c.a)([Object(f.b)({type:[k.a],json:{write:{enabled:!0,overridePolicy:function(){return{enabled:Object(y.j)(this.outStatistics)&&this.outStatistics.length>0}}}}})],T.prototype,"outStatistics",void 0),Object(c.a)([Object(f.b)({json:{write:!0}})],T.prototype,"parameterValues",void 0),Object(c.a)([Object(v.a)("parameterValues")],T.prototype,"writeParameterValues",null),Object(c.a)([Object(f.b)({type:I.a,json:{write:!0}})],T.prototype,"pixelSize",void 0),Object(c.a)([Object(f.b)({type:S.a,json:{write:!0}})],T.prototype,"quantizationParameters",void 0),Object(c.a)([Object(f.b)({type:[Object],json:{write:!0}})],T.prototype,"rangeValues",void 0),Object(c.a)([Object(f.b)({type:String,json:{read:{source:"relationParam"},write:{target:"relationParam",overridePolicy:function(){return{enabled:"relation"===this.spatialRelationship}}}}})],T.prototype,"relationParameter",void 0),Object(c.a)([Object(f.b)({type:String,json:{write:!0}})],T.prototype,"resultType",void 0),Object(c.a)([Object(f.b)({type:Boolean,json:{default:!1,write:!0}})],T.prototype,"returnCentroid",void 0),Object(c.a)([Object(f.b)({type:Boolean,json:{default:!1,write:!0}})],T.prototype,"returnDistinctValues",void 0),Object(c.a)([Object(f.b)({type:Boolean,json:{default:!0,write:!0}})],T.prototype,"returnExceededLimitFeatures",void 0),Object(c.a)([Object(f.b)({type:Boolean,json:{write:!0}})],T.prototype,"returnGeometry",void 0),Object(c.a)([Object(f.b)({type:Boolean,json:{default:!1,write:!0}})],T.prototype,"returnQueryGeometry",void 0),Object(c.a)([Object(f.b)({type:Boolean,json:{default:!1,write:!0}})],T.prototype,"returnM",void 0),Object(c.a)([Object(f.b)({type:Boolean,json:{write:{overridePolicy:function(e){return{enabled:e}}}}})],T.prototype,"returnZ",void 0),Object(c.a)([Object(f.b)({type:x.a,json:{write:!0}})],T.prototype,"sourceSpatialReference",void 0),Object(c.a)([Object(h.a)(E,{ignoreUnknown:!1,name:"spatialRel"})],T.prototype,"spatialRelationship",void 0),Object(c.a)([Object(f.b)({type:Number,json:{read:{source:"resultOffset"}}})],T.prototype,"start",void 0),Object(c.a)([Object(v.a)("start"),Object(v.a)("num")],T.prototype,"writeStart",null),Object(c.a)([Object(f.b)({type:String,json:{write:!0}})],T.prototype,"sqlFormat",void 0),Object(c.a)([Object(f.b)({type:String,json:{write:!0}})],T.prototype,"text",void 0),Object(c.a)([Object(f.b)({type:u.a,json:{write:!0}})],T.prototype,"timeExtent",void 0),Object(c.a)([Object(f.b)({type:Boolean,json:{default:!1,write:!0}})],T.prototype,"timeReferenceUnknownClient",void 0),Object(c.a)([Object(h.a)(F,{ignoreUnknown:!1}),Object(f.b)({json:{write:{overridePolicy:function(e){return{enabled:e&&this.distance>0}}}}})],T.prototype,"units",void 0),Object(c.a)([Object(f.b)({type:String,json:{write:{overridePolicy:function(e){return{enabled:null!=e||this.start>0}}}}})],T.prototype,"where",void 0),Object(c.a)([Object(v.a)("where")],T.prototype,"writeWhere",null);var _=T=n=Object(c.a)([Object(O.a)("esri.rest.support.Query")],T)},672:function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));var n=r(21),i=r(2),a=r(4);function o(e){return"date"===e.type||"esriFieldTypeDate"===e.type}var s=function(){function e(t){if(Object(i.a)(this,e),this.fields=t,this._fieldsMap=new Map,this._dateFieldsSet=new Set,this.dateFields=[],t){var r,a=[],s=Object(n.a)(t);try{for(s.s();!(r=s.n()).done;){var l=r.value,u=l&&l.name;if(u){var p=c(u);this._fieldsMap.set(u,l),this._fieldsMap.set(p,l),a.push(p),o(l)&&(this.dateFields.push(l),this._dateFieldsSet.add(l))}}}catch(b){s.e(b)}finally{s.f()}a.sort(),this.uid=a.join(",")}}return Object(a.a)(e,[{key:"destroy",value:function(){this._fieldsMap.clear()}},{key:"has",value:function(e){return null!=this.get(e)}},{key:"get",value:function(e){return null!=e?this._fieldsMap.get(e)||this._fieldsMap.get(c(e)):void 0}},{key:"isDateField",value:function(e){return this._dateFieldsSet.has(this.get(e))}},{key:"normalizeFieldName",value:function(e){var t=this.get(e);if(t)return t.name}}]),e}();function c(e){return e.toLowerCase().trim()}},673:function(e,t,r){"use strict";r.d(t,"a",(function(){return D}));var n,i,a=r(2),o=r(4),s=r(5),c=r(6),l=r(0),u=r(42),p=r(26),b=r(1),d=(r(19),r(97)),y=(r(15),r(31)),f=r(57),j=r(10),h=r(14),O=r(212),v=r(666),m=r(711),g=(r(114),r(45)),w=r(236),S=n=function(e){Object(s.a)(r,e);var t=Object(c.a)(r);function r(e){var n;return Object(a.a)(this,r),(n=t.call(this,e)).type="query-table",n}return Object(o.a)(r,[{key:"clone",value:function(){var e,t=this.workspaceId,r=this.query,i=this.oidFields,a=this.spatialReference,o=this.geometryType,s={workspaceId:t,query:r,oidFields:i,spatialReference:null!=(e=null==a?void 0:a.clone())?e:void 0,geometryType:o};return new n(s)}}]),r}(p.a);Object(l.a)([Object(y.a)({queryTable:"query-table"})],S.prototype,"type",void 0),Object(l.a)([Object(b.b)({type:String,json:{write:!0}})],S.prototype,"workspaceId",void 0),Object(l.a)([Object(b.b)({type:String,json:{write:!0}})],S.prototype,"query",void 0),Object(l.a)([Object(b.b)({type:String,json:{write:!0}})],S.prototype,"oidFields",void 0),Object(l.a)([Object(b.b)({type:g.a,json:{write:!0}})],S.prototype,"spatialReference",void 0),Object(l.a)([Object(y.a)(w.a)],S.prototype,"geometryType",void 0),S=n=Object(l.a)([Object(j.a)("esri.layers.support.source.QueryTableDataSource")],S);var k,x=i=function(e){Object(s.a)(r,e);var t=Object(c.a)(r);function r(e){var n;return Object(a.a)(this,r),(n=t.call(this,e)).type="raster",n}return Object(o.a)(r,[{key:"clone",value:function(){var e=this.workspaceId,t=this.dataSourceName;return new i({workspaceId:e,dataSourceName:t})}}]),r}(p.a);Object(l.a)([Object(y.a)({raster:"raster"})],x.prototype,"type",void 0),Object(l.a)([Object(b.b)({type:String,json:{write:!0}})],x.prototype,"dataSourceName",void 0),Object(l.a)([Object(b.b)({type:String,json:{write:!0}})],x.prototype,"workspaceId",void 0),x=i=Object(l.a)([Object(j.a)("esri.layers.support.source.RasterDataSource")],x);var I,E,F=k=function(e){Object(s.a)(r,e);var t=Object(c.a)(r);function r(e){var n;return Object(a.a)(this,r),(n=t.call(this,e)).type="table",n}return Object(o.a)(r,[{key:"clone",value:function(){var e=this.workspaceId,t=this.gdbVersion,r=this.dataSourceName;return new k({workspaceId:e,gdbVersion:t,dataSourceName:r})}}]),r}(p.a);Object(l.a)([Object(y.a)({table:"table"})],F.prototype,"type",void 0),Object(l.a)([Object(b.b)({type:String,json:{write:!0}})],F.prototype,"workspaceId",void 0),Object(l.a)([Object(b.b)({type:String,json:{write:!0}})],F.prototype,"gdbVersion",void 0),Object(l.a)([Object(b.b)({type:String,json:{write:!0}})],F.prototype,"dataSourceName",void 0),F=k=Object(l.a)([Object(j.a)("esri.layers.support.source.TableDataSource")],F);var T=Object(u.b)()({esriLeftInnerJoin:"left-inner-join",esriLeftOuterJoin:"left-outer-join"}),_=I=function(e){Object(s.a)(r,e);var t=Object(c.a)(r);function r(e){var n;return Object(a.a)(this,r),(n=t.call(this,e)).type="join-table",n}return Object(o.a)(r,[{key:"readLeftTableSource",value:function(e,t,r){return M()(e,t,r)}},{key:"castLeftTableSource",value:function(e){return Object(h.k)(C(),e)}},{key:"readRightTableSource",value:function(e,t,r){return M()(e,t,r)}},{key:"castRightTableSource",value:function(e){return Object(h.k)(C(),e)}},{key:"clone",value:function(){var e,t,r=this.leftTableKey,n=this.rightTableKey,i=this.leftTableSource,a=this.rightTableSource,o=this.joinType,s={leftTableKey:r,rightTableKey:n,leftTableSource:null!=(e=null==i?void 0:i.clone())?e:void 0,rightTableSource:null!=(t=null==a?void 0:a.clone())?t:void 0,joinType:o};return new I(s)}}]),r}(p.a);Object(l.a)([Object(y.a)({joinTable:"join-table"})],_.prototype,"type",void 0),Object(l.a)([Object(b.b)({type:String,json:{write:!0}})],_.prototype,"leftTableKey",void 0),Object(l.a)([Object(b.b)({type:String,json:{write:!0}})],_.prototype,"rightTableKey",void 0),Object(l.a)([Object(b.b)({json:{write:!0}})],_.prototype,"leftTableSource",void 0),Object(l.a)([Object(f.a)("leftTableSource")],_.prototype,"readLeftTableSource",null),Object(l.a)([Object(d.a)("leftTableSource")],_.prototype,"castLeftTableSource",null),Object(l.a)([Object(b.b)({json:{write:!0}})],_.prototype,"rightTableSource",void 0),Object(l.a)([Object(f.a)("rightTableSource")],_.prototype,"readRightTableSource",null),Object(l.a)([Object(d.a)("rightTableSource")],_.prototype,"castRightTableSource",null),Object(l.a)([Object(y.a)(T)],_.prototype,"joinType",void 0),_=I=Object(l.a)([Object(j.a)("esri.layers.support.source.JoinTableDataSource")],_);var R=null;function M(){return R||(R=Object(O.b)({types:C()})),R}var P=null;function C(){return P||(P={key:"type",base:null,typeMap:{"data-layer":D,"map-layer":m.a}}),P}var N={key:"type",base:null,typeMap:{"join-table":_,"query-table":S,raster:x,table:F}},D=E=function(e){Object(s.a)(r,e);var t=Object(c.a)(r);function r(e){var n;return Object(a.a)(this,r),(n=t.call(this,e)).type="data-layer",n}return Object(o.a)(r,[{key:"clone",value:function(){var e=this.fields,t=this.dataSource;return new E({fields:e,dataSource:t})}}]),r}(p.a);Object(l.a)([Object(y.a)({dataLayer:"data-layer"})],D.prototype,"type",void 0),Object(l.a)([Object(b.b)({type:[v.a],json:{write:!0}})],D.prototype,"fields",void 0),Object(l.a)([Object(b.b)({types:N,json:{write:!0}})],D.prototype,"dataSource",void 0),(D=E=Object(l.a)([Object(j.a)("esri.layers.support.source.DataLayerSource")],D)).from=Object(h.m)(D)},674:function(e,t,r){"use strict";r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return s})),r.d(t,"c",(function(){return l})),r.d(t,"d",(function(){return u})),r.d(t,"e",(function(){return c}));var n,i,a=r(19);(i=n||(n={}))[i.HANDSHAKE=0]="HANDSHAKE",i[i.OPEN=1]="OPEN",i[i.OPENED=2]="OPENED",i[i.RESPONSE=3]="RESPONSE",i[i.INVOKE=4]="INVOKE",i[i.ABORT=5]="ABORT",i[i.CLOSE=6]="CLOSE",i[i.OPEN_PORT=7]="OPEN_PORT",i[i.ON=8]="ON";var o=0;function s(){return o++}function c(e){return e?"string"==typeof e?JSON.stringify({name:"message",message:e}):e.toJSON?JSON.stringify(e):JSON.stringify({name:e.name,message:e.message,details:e.details||{stack:e.stack}}):null}function l(e,t,r,i){var a;t.type!==n.OPEN_PORT?t.type===n.INVOKE||t.type===n.RESPONSE?(!function(e){return e&&"object"==typeof e&&("result"in e||"transferList"in e)}(r)?(a=p(i),t.data=r):(a=p(r.transferList),t.data=r.result),a?e.postMessage(t,a):e.postMessage(t)):e.postMessage(t):e.postMessage(t,[t.port])}function u(e){if(!e)return null;var t=e.data;return t?"string"==typeof t?JSON.parse(t):t:null}function p(e){if(!e||!e.length)return null;if(Object(a.a)("esri-workers-arraybuffer-transfer"))return e;var t=e.filter((function(e){return!function(e){return e instanceof ArrayBuffer||e&&e.constructor&&"ArrayBuffer"===e.constructor.name}(e)}));return t.length?t:null}},675:function(e,t,r){"use strict";r.d(t,"a",(function(){return F}));var n,i=r(2),a=r(4),o=r(5),s=r(6),c=r(0),l=r(332),u=r(42),p=r(26),b=r(18),d=r(1),y=(r(14),r(19),r(15),r(57)),f=r(10),j=r(43),h=r(693),O=n=function(e){Object(o.a)(r,e);var t=Object(s.a)(r);function r(){var e;return Object(i.a)(this,r),(e=t.apply(this,arguments)).expression=null,e.title=null,e.value=null,e}return Object(a.a)(r,[{key:"readExpression",value:function(e,t){return t.value?Object(h.a)(t.value):e}},{key:"writeExpression",value:function(e,t,r){null!=this.value&&(e=Object(h.a)(this.value)),t[r]=e}},{key:"clone",value:function(){return new n({expression:this.expression,title:this.title,value:this.value})}}]),r}(p.a);Object(c.a)([Object(d.b)({type:String,json:{write:{allowNull:!0}}})],O.prototype,"expression",void 0),Object(c.a)([Object(y.a)("expression",["expression","value"])],O.prototype,"readExpression",null),Object(c.a)([Object(j.a)("expression")],O.prototype,"writeExpression",null),Object(c.a)([Object(d.b)({type:String,json:{write:!0,origins:{"web-scene":{write:!1}}}})],O.prototype,"title",void 0),Object(c.a)([Object(d.b)({json:{read:!1,write:!1}})],O.prototype,"value",void 0);var v,m=O=n=Object(c.a)([Object(f.a)("esri.layers.support.LabelExpressionInfo")],O),g=r(725),w=r(753),S=new u.a({esriServerPointLabelPlacementAboveCenter:"above-center",esriServerPointLabelPlacementAboveLeft:"above-left",esriServerPointLabelPlacementAboveRight:"above-right",esriServerPointLabelPlacementBelowCenter:"below-center",esriServerPointLabelPlacementBelowLeft:"below-left",esriServerPointLabelPlacementBelowRight:"below-right",esriServerPointLabelPlacementCenterCenter:"center-center",esriServerPointLabelPlacementCenterLeft:"center-left",esriServerPointLabelPlacementCenterRight:"center-right",esriServerLinePlacementAboveAfter:"above-after",esriServerLinePlacementAboveAlong:"above-along",esriServerLinePlacementAboveBefore:"above-before",esriServerLinePlacementAboveStart:"above-start",esriServerLinePlacementAboveEnd:"above-end",esriServerLinePlacementBelowAfter:"below-after",esriServerLinePlacementBelowAlong:"below-along",esriServerLinePlacementBelowBefore:"below-before",esriServerLinePlacementBelowStart:"below-start",esriServerLinePlacementBelowEnd:"below-end",esriServerLinePlacementCenterAfter:"center-after",esriServerLinePlacementCenterAlong:"center-along",esriServerLinePlacementCenterBefore:"center-before",esriServerLinePlacementCenterStart:"center-start",esriServerLinePlacementCenterEnd:"center-end",esriServerPolygonPlacementAlwaysHorizontal:"always-horizontal"},{ignoreUnknown:!0});function k(e){return!e||"service"!==e.origin&&!x(e.layer)}function x(e){return"map-image"===(null==e?void 0:e.type)}function I(e){var t,r;return!!x(e)&&!(null==(t=e.capabilities)||null==(r=t.exportMap)||!r.supportsArcadeExpressionForLabeling)}var E=v=function(e){Object(o.a)(r,e);var t=Object(s.a)(r);function r(e){var n;return Object(i.a)(this,r),(n=t.call(this,e)).type="label",n.name=null,n.deconflictionStrategy="static",n.labelExpression=null,n.labelExpressionInfo=null,n.labelPlacement=null,n.maxScale=0,n.minScale=0,n.symbol=g.a,n.useCodedValues=void 0,n.where=null,n}return Object(a.a)(r,[{key:"readLabelExpression",value:function(e,t){var r=t.labelExpressionInfo;if(!r||!r.value&&!r.expression)return e}},{key:"writeLabelExpression",value:function(e,t,r){if(this.labelExpressionInfo)if(null!=this.labelExpressionInfo.value)e=Object(h.f)(this.labelExpressionInfo.value);else if(null!=this.labelExpressionInfo.expression){var n=Object(h.e)(this.labelExpressionInfo.expression);n&&(e="["+n+"]")}null!=e&&(t[r]=e)}},{key:"writeLabelExpressionInfo",value:function(e,t,r,n){if(null==e&&null!=this.labelExpression&&k(n))e=new m({expression:this.getLabelExpressionArcade()});else if(!e)return;var i=e.toJSON(n);i.expression&&(t[r]=i)}},{key:"writeMaxScale",value:function(e,t){(e||this.minScale)&&(t.maxScale=e)}},{key:"writeMinScale",value:function(e,t){(e||this.maxScale)&&(t.minScale=e)}},{key:"getLabelExpression",value:function(){return Object(h.b)(this)}},{key:"getLabelExpressionArcade",value:function(){return Object(h.c)(this)}},{key:"getLabelExpressionSingleField",value:function(){return Object(h.d)(this)}},{key:"hash",value:function(){return JSON.stringify(this)}},{key:"clone",value:function(){return new v({deconflictionStrategy:this.deconflictionStrategy,labelExpression:this.labelExpression,labelExpressionInfo:Object(b.a)(this.labelExpressionInfo),labelPlacement:this.labelPlacement,maxScale:this.maxScale,minScale:this.minScale,name:this.name,symbol:Object(b.a)(this.symbol),where:this.where,useCodedValues:this.useCodedValues})}}],[{key:"evaluateWhere",value:function(e,t){var r=function(e,t,r){switch(t){case"=":return e==r;case"<>":return e!=r;case">":return e>r;case">=":return e>=r;case"<":return e<r;case"<=":return e<=r}return!1};try{if(null==e)return!0;var n=e.split(" ");if(3===n.length)return r(t[n[0]],n[1],n[2]);if(7===n.length){var i=r(t[n[0]],n[1],n[2]),a=n[3],o=r(t[n[4]],n[5],n[6]);switch(a){case"AND":return i&&o;case"OR":return i||o}}return!1}catch(s){console.log("Error.: can't parse = "+e)}}}]),r}(p.a);Object(c.a)([Object(d.b)({type:String,json:{write:!0}})],E.prototype,"name",void 0),Object(c.a)([Object(d.b)({type:String,json:{write:!0,default:"static",origins:{"web-scene":{write:!1}}}})],E.prototype,"deconflictionStrategy",void 0),Object(c.a)([Object(d.b)({type:String,json:{write:{overridePolicy:function(e,t,r){return this.labelExpressionInfo&&"service"===(null==r?void 0:r.origin)&&I(r.layer)?{enabled:!1}:{allowNull:!0}}}}})],E.prototype,"labelExpression",void 0),Object(c.a)([Object(y.a)("labelExpression")],E.prototype,"readLabelExpression",null),Object(c.a)([Object(j.a)("labelExpression")],E.prototype,"writeLabelExpression",null),Object(c.a)([Object(d.b)({type:m,json:{write:{overridePolicy:function(e,t,r){return function(e){return k(e)||I(e.layer)}(r)?{allowNull:!0}:{enabled:!1}}}}})],E.prototype,"labelExpressionInfo",void 0),Object(c.a)([Object(j.a)("labelExpressionInfo")],E.prototype,"writeLabelExpressionInfo",null),Object(c.a)([Object(d.b)({type:S.apiValues,json:{type:S.jsonValues,read:S.read,write:S.write}})],E.prototype,"labelPlacement",void 0),Object(c.a)([Object(d.b)({type:Number})],E.prototype,"maxScale",void 0),Object(c.a)([Object(j.a)("maxScale")],E.prototype,"writeMaxScale",null),Object(c.a)([Object(d.b)({type:Number})],E.prototype,"minScale",void 0),Object(c.a)([Object(j.a)("minScale")],E.prototype,"writeMinScale",null),Object(c.a)([Object(d.b)({types:l.g,json:{origins:{"web-scene":{types:l.h,write:w.b,default:null}},write:w.b,default:null}})],E.prototype,"symbol",void 0),Object(c.a)([Object(d.b)({type:Boolean,json:{write:!0}})],E.prototype,"useCodedValues",void 0),Object(c.a)([Object(d.b)({type:String,json:{write:!0}})],E.prototype,"where",void 0);var F=E=v=Object(c.a)([Object(f.a)("esri.layers.support.LabelClass")],E)},676:function(e,t,r){"use strict";r.d(t,"a",(function(){return f})),r.d(t,"b",(function(){return b})),r.d(t,"c",(function(){return h})),r.d(t,"d",(function(){return g})),r.d(t,"e",(function(){return d})),r.d(t,"f",(function(){return y})),r.d(t,"g",(function(){return O})),r.d(t,"h",(function(){return v})),r.d(t,"i",(function(){return j})),r.d(t,"j",(function(){return m}));var n=r(22),i=r(11),a=r(27),o=r(87),s={mapserver:"MapServer",imageserver:"ImageServer",featureserver:"FeatureServer",sceneserver:"SceneServer",streamserver:"StreamServer",vectortileserver:"VectorTileServer"},c=Object.values(s),l=new RegExp("^((?:https?:)?\\/\\/\\S+?\\/rest\\/services\\/(.+?)\\/(".concat(c.join("|"),"))(?:\\/(?:layers\\/)?(\\d+))?"),"i"),u=new RegExp("^((?:https?:)?\\/\\/\\S+?\\/([^\\/\\n]+)\\/(".concat(c.join("|"),"))(?:\\/(?:layers\\/)?(\\d+))?"),"i"),p=/(.*?)\/(?:layers\/)?(\d+)\/?$/i;function b(e){return!!l.test(e)}function d(e){var t=Object(a.J)(e),r=t.path.match(l)||t.path.match(u);if(!r)return null;var i=Object(n.a)(r,5),o=i[1],c=i[2],p=i[3],b=i[4],d=c.indexOf("/");return{title:f(-1!==d?c.slice(d+1):c),serverType:s[p.toLowerCase()],sublayer:null!=b&&""!==b?parseInt(b,10):null,url:{path:o}}}function y(e){var t=Object(a.J)(e).path.match(p);return t?{serviceUrl:t[1],sublayerId:Number(t[2])}:null}function f(e){return(e=e.replace(/\s*[/_]+\s*/g," "))[0].toUpperCase()+e.slice(1)}function j(e,t){var r=[];if(e){var n=d(e);Object(i.j)(n)&&n.title&&r.push(n.title)}if(t){var a=f(t);r.push(a)}if(2===r.length){if(-1!==r[0].toLowerCase().indexOf(r[1].toLowerCase()))return r[0];if(-1!==r[1].toLowerCase().indexOf(r[0].toLowerCase()))return r[1]}return r.join(" - ")}function h(e){if(!e)return!1;var t=-1!==(e=e.toLowerCase()).indexOf(".arcgis.com/"),r=-1!==e.indexOf("//services")||-1!==e.indexOf("//tiles")||-1!==e.indexOf("//features");return t&&r}function O(e,t){return e?Object(a.H)(Object(a.G)(e,t)):e}function v(e){var t=e.url;if(!t)return{url:t};t=Object(a.G)(t,e.logger);var r,n=Object(a.J)(t),o=d(n.path);if(Object(i.j)(o))null!=o.sublayer&&null==e.layer.layerId&&(r=o.sublayer),t=o.url.path;else if(e.nonStandardUrlAllowed){var s=y(n.path);Object(i.j)(s)&&(t=s.serviceUrl,r=s.sublayerId)}return{url:Object(a.H)(t),layerId:r}}function m(e,t,r,n,i){Object(o.f)(t,n,"url",i),n.url&&null!=e.layerId&&(n.url=Object(a.y)(n.url,r,e.layerId.toString()))}function g(e){if(!e)return!1;var t=e.toLowerCase(),r=-1!==t.indexOf("/services/"),n=-1!==t.indexOf("/mapserver/wmsserver"),i=-1!==t.indexOf("/imageserver/wmsserver"),a=-1!==t.indexOf("/wmsserver");return r&&(n||i||a)}},678:function(e,t,r){"use strict";r.d(t,"a",(function(){return f}));var n,i=r(2),a=r(4),o=r(5),s=r(6),c=r(0),l=r(26),u=r(692),p=r(1),b=(r(19),r(14),r(15),r(10)),d=r(669),y=n=function(e){Object(o.a)(r,e);var t=Object(s.a)(r);function r(e){var n;return Object(i.a)(this,r),(n=t.call(this,e)).value=0,n.unit="milliseconds",n}return Object(a.a)(r,[{key:"toMilliseconds",value:function(){return Object(u.a)(this.value,this.unit,"milliseconds")}},{key:"clone",value:function(){return new n({value:this.value,unit:this.unit})}}]),r}(l.a);Object(c.a)([Object(p.b)({type:Number,json:{write:!0},nonNullable:!0})],y.prototype,"value",void 0),Object(c.a)([Object(p.b)({type:d.a.apiValues,json:{type:d.a.jsonValues,read:d.a.read,write:d.a.write},nonNullable:!0})],y.prototype,"unit",void 0);var f=y=n=Object(c.a)([Object(b.a)("esri.TimeInterval")],y)},679:function(e,t,r){"use strict";r.d(t,"a",(function(){return c})),r.d(t,"b",(function(){return s}));r(19);var n=r(664),i=r(660),a=r(661),o=r(662),s={key:"type",base:i.a,typeMap:{range:o.a,"coded-value":n.a,inherited:a.a}};function c(e){if(!e||!e.type)return null;switch(e.type){case"range":return o.a.fromJSON(e);case"codedValue":return n.a.fromJSON(e);case"inherited":return a.a.fromJSON(e)}return null}},683:function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var n=r(135),i=r(70),a={inches:Object(n.b)(1,"meters","inches"),feet:Object(n.b)(1,"meters","feet"),"us-feet":Object(n.b)(1,"meters","us-feet"),yards:Object(n.b)(1,"meters","yards"),miles:Object(n.b)(1,"meters","miles"),"nautical-miles":Object(n.b)(1,"meters","nautical-miles"),millimeters:Object(n.b)(1,"meters","millimeters"),centimeters:Object(n.b)(1,"meters","centimeters"),decimeters:Object(n.b)(1,"meters","decimeters"),meters:Object(n.b)(1,"meters","meters"),kilometers:Object(n.b)(1,"meters","kilometers"),"decimal-degrees":1/Object(n.i)(1,"meters",i.a.radius)}},685:function(e,t,r){"use strict";r.d(t,"a",(function(){return p}));var n=r(21),i=r(2),a=r(4),o=r(185),s=r(15),c=r(30),l=r(667),u=s.a.getLogger("esri.core.workers.Connection"),p=function(){function e(){Object(i.a)(this,e),this._clients=new Array,this._clientPromises=new Array,this._clientIdx=0}return Object(a.a)(e,[{key:"destroy",value:function(){this.close()}},{key:"closed",get:function(){return!this._clients||!this._clients.length}},{key:"open",value:function(e,t){var r=this;return new Promise((function(n,i){var a=!0,o=function(e){Object(c.v)(t.signal),a&&(a=!1,e())};r._clients.length=e.length,r._clientPromises.length=e.length;for(var s=function(a){var s=e[a];Object(c.p)(s)?r._clientPromises[a]=s.then((function(e){return r._clients[a]=new l.a(e,t),o(n),r._clients[a]}),(function(){return o(i),null})):(r._clients[a]=new l.a(s,t),r._clientPromises[a]=Promise.resolve(r._clients[a]),o(n))},u=0;u<e.length;++u)s(u)}))}},{key:"broadcast",value:function(e,t,r){for(var n=new Array(this._clientPromises.length),i=0;i<this._clientPromises.length;++i){var a=this._clientPromises[i];n[i]=a.then((function(n){return n.invoke(e,t,r)}))}return n}},{key:"close",value:function(){var e,t=Object(n.a)(this._clientPromises);try{for(t.s();!(e=t.n()).done;){e.value.then((function(e){return e.close()}))}}catch(r){t.e(r)}finally{t.f()}this._clients.length=0,this._clientPromises.length=0}},{key:"getAvailableClient",value:function(){for(var e,t=0;t<this._clients.length;++t){var r=this._clients[t];if(r){if(!r.isBusy())return Promise.resolve(r)}else(e=e||[]).push(this._clientPromises[t])}return e?Promise.race(e):(this._clientIdx=(this._clientIdx+1)%this._clients.length,Promise.resolve(this._clients[this._clientIdx]))}},{key:"invoke",value:function(e,t,r){var n=null;return Array.isArray(r)?(u.warn("invoke()","The transferList parameter is deprecated, use the options object instead"),n={transferList:r}):n=r,this.closed?Promise.reject(new Error("Connection closed")):this.getAvailableClient().then((function(r){return r.invoke(e,t,n)}))}},{key:"on",value:function(e,t){var r=this;return Promise.all(this._clientPromises).then((function(){return Object(o.a)(r._clients.map((function(r){return r.on(e,t)})))}))}},{key:"openPorts",value:function(){var e=this;return new Promise((function(t){for(var r=new Array(e._clientPromises.length),n=r.length,i=function(i){e._clientPromises[i].then((function(e){r[i]=e.openPort(),0==--n&&t(r)}))},a=0;a<e._clientPromises.length;++a)i(a)}))}},{key:"test",get:function(){return{numClients:this._clients.length}}}]),e}()},686:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return V}));var n,i=r(23),a=r(13),o=r(22),s=r(7),c=r.n(s),l=r(21),u=r(12),p=r(2),b=r(4),d=r(77),y=r(65),f=r(5),j=r(6),h=r(0),O=r(46),v=r(82),m=r(29),g=r(18),w=r(15),S=r(712),k=r(11),x=r(30),I=r(109),E=r(1),F=(r(14),r(19),r(10)),T=r(43),_=r(209),R=r(663),M=r(684),P=r(237),C=r(186),N=w.a.getLogger("esri.renderers.DictionaryRenderer"),D={type:"CIMSimpleLineCallout",lineSymbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",width:.5,color:[0,0,0,255]}]}},L=n=function(e){Object(f.a)(r,e);var t=Object(j.a)(r);function r(e){var n;return Object(p.a)(this,r),(n=t.call(this,e))._ongoingRequests=new Map,n._symbolCache=new S.a(100),n.config=null,n.fieldMap=null,n.scaleExpression=null,n.scaleExpressionTitle=null,n.url=null,n.type="dictionary",n}return Object(b.a)(r,[{key:"writeData",value:function(e,t){e&&(t.scalingExpressionInfo={expression:e,returnType:"number"})}},{key:"writeVisualVariables",value:function(e,t,n,i){null!=i&&i.origin||Object(d.a)(Object(y.a)(r.prototype),"writeVisualVariables",this).call(this,e,t,n,i)}},{key:"clone",value:function(){return new n({config:Object(g.a)(this.config),scaleExpression:this.scaleExpression,scaleExpressionTitle:this.scaleExpressionTitle,fieldMap:Object(g.a)(this.fieldMap),url:Object(g.a)(this.url),visualVariables:Object(g.a)(this.visualVariables)})}},{key:"getSymbolAsync",value:function(){var e=Object(u.a)(c.a.mark((function e(t,r){var n,i,a,o,s,u,p,b,d,y,f,j,h,v,m,g,w,S,E,F,T,_,R,M,P,C,N=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._dictionaryPromise||(this._dictionaryPromise=this.fetchResources(r)),e.prev=1,e.next=4,this._dictionaryPromise;case 4:n=e.sent,e.next=11;break;case 7:if(e.prev=7,e.t0=e.catch(1),!Object(x.m)(e.t0)){e.next=11;break}return e.abrupt("return",(this._dictionaryPromise=null,null));case 11:if(i={},this.fieldMap){a=Object(l.a)(this._symbolFields);try{for(a.s();!(o=a.n()).done;)s=o.value,(u=this.fieldMap[s])&&null!==t.attributes[u]&&void 0!==t.attributes[u]?(p=""+t.attributes[u],i[s]=p):i[s]=""}catch(c){a.e(c)}finally{a.f()}}if((b=n(i,r))&&"string"==typeof b){e.next=16;break}return e.abrupt("return",null);case 16:if(d=Object(I.b)(b).toString(),!(y=this._symbolCache.get(d))){e.next=19;break}return e.abrupt("return",(y.catch((function(){N._symbolCache.pop(d)})),y));case 19:f=b.split(";"),j=[],h=[],v=Object(l.a)(f);try{for(v.s();!(m=v.n()).done;)if((g=m.value)&&0!==g.length)if(-1===g.indexOf("po:"))if(-1!==g.indexOf("|")){w=Object(l.a)(g.split("|"));try{for(w.s();!(S=w.n()).done;)E=S.value,this._itemNames.has(E)&&j.push(E)}catch(c){w.e(c)}finally{w.f()}}else this._itemNames.has(g)&&j.push(g);else 3===(F=g.substr(3).split("|")).length&&(T=F[0],_=F[1],R=F[2],"DashTemplate"===_?R=R.split(" ").map((function(e){return Number(e)})):"Color"===_?(M=new O.a(R).toRgba(),R=[M[0],M[1],M[2],255*M[3]]):R=Number(R),h.push({primitiveName:T,propertyName:_,value:R}))}catch(c){v.e(c)}finally{v.f()}return P=!Object(k.j)(t.geometry)||!t.geometry.hasZ&&"point"===t.geometry.type,C=this._cimPartsToCIMSymbol(j,h,P,r),e.abrupt("return",(this._symbolCache.put(d,C,1),C));case 24:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"collectRequiredFields",value:function(){var e=Object(u.a)(c.a.mark((function e(t,r){var n,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.collectVVRequiredFields(t,r);case 2:if(e.t0=this.scaleExpression,!e.t0){e.next=6;break}return e.next=6,Object(_.a)(t,r,this.scaleExpression);case 6:for(n in this.fieldMap)i=this.fieldMap[n],r.has(i)&&t.add(i);case 7:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"arcadeRequired",get:function(){return!0}},{key:"fetchResources",value:function(){var e=Object(u.a)(c.a.mark((function e(t){var r,n,i,s,u,p,b,d,y,f,j,h,O,g,w,S,x,I=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._dictionaryPromise){e.next=2;break}return e.abrupt("return",this._dictionaryPromise);case 2:if(this.url){e.next=4;break}return e.abrupt("return",void N.error("no valid URL!"));case 4:return r=Object(k.j)(t)?t.abortOptions:null,n=Object(v.default)(this.url+"/resources/styles/dictionary-info.json",Object(a.a)({responseType:"json",query:{f:"json"}},r)),e.next=8,Promise.all([n,Object(P.e)()]);case 8:if(i=e.sent,s=Object(o.a)(i,1),u=s[0].data){e.next=13;break}throw this._dictionaryPromise=null,new m.a("esri.renderers.DictionaryRenderer","Bad dictionary data!");case 13:if(p=u.expression,b=u.authoringInfo,this._refSymbolUrlTemplate=this.url+"/"+u.cimRefTemplateUrl,this._itemNames=new Set(u.itemsNames),this._symbolFields=b.symbol,d={},this.config)for(f in y=this.config)d[f]=y[f];if(b.configuration){j=Object(l.a)(b.configuration);try{for(j.s();!(h=j.n()).done;)O=h.value,d.hasOwnProperty(O.name)||(d[O.name]=O.value)}catch(c){j.e(c)}finally{j.f()}}if(g=[],Object(k.j)(t)&&t.fields&&this.fieldMap){w=Object(l.a)(this._symbolFields);try{for(x=function(){var e=S.value,r=I.fieldMap[e],n=t.fields.filter((function(e){return e.name===r}));n.length>0&&g.push(Object(a.a)(Object(a.a)({},n[0]),{},{name:e}))},w.s();!(S=w.n()).done;)x()}catch(c){w.e(c)}finally{w.f()}}return e.abrupt("return",(this._dictionaryPromise=Object(P.b)(p,Object(k.j)(t)?t.spatialReference:null,g,d).then((function(e){var t={scale:0};return function(r,n){var i=e.repurposeFeature({geometry:null,attributes:r});return t.scale=Object(k.j)(n)?n.scale:void 0,e.evaluate({$feature:i,$view:t})}})).catch((function(e){return N.error("Creating dictinoary expression failed:",e),null})),this._dictionaryPromise));case 21:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getSymbol",value:function(){return null}},{key:"getSymbols",value:function(){return[]}},{key:"getAttributeHash",value:function(){return this.visualVariables&&this.visualVariables.reduce((function(e,t){return e+t.getAttributeHash()}),"")}},{key:"getMeshHash",value:function(){return"".concat(this.url,"-").concat(JSON.stringify(this.fieldMap))}},{key:"getSymbolFields",value:function(){return this._symbolFields}},{key:"_getSymbolPart",value:function(){var e=Object(u.a)(c.a.mark((function e(t,r){var n,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._ongoingRequests.has(t)){e.next=2;break}return e.abrupt("return",this._ongoingRequests.get(t).then((function(e){return e.data})));case 2:return n=this._refSymbolUrlTemplate.replace(/\{itemName\}/gi,t),i=Object(v.default)(n,Object(a.a)({responseType:"json",query:{f:"json"}},r)),this._ongoingRequests.set(t,i),e.prev=4,e.next=7,i;case 7:return e.abrupt("return",e.sent.data);case 10:return e.prev=10,e.t0=e.catch(4),e.abrupt("return",(this._ongoingRequests.delete(t),Promise.reject(e.t0)));case 13:case"end":return e.stop()}}),e,this,[[4,10]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"_combineSymbolParts",value:function(e,t,r){if(!e||0===e.length)return null;var n=Object(a.a)({},e[0]);if(e.length>1){n.symbolLayers=[];var o,s=Object(l.a)(e);try{for(s.s();!(o=s.n()).done;){var c,u=o.value;(c=n.symbolLayers).unshift.apply(c,Object(i.a)(u.symbolLayers))}}catch(p){s.e(p)}finally{s.f()}}return r&&(n.callout=D),{type:"CIMSymbolReference",symbol:n,primitiveOverrides:t}}},{key:"_cimPartsToCIMSymbol",value:function(){var e=Object(u.a)(c.a.mark((function e(t,r,n,i){var a,o,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(a=new Array(t.length),o=0;o<t.length;o++)a[o]=this._getSymbolPart(t[o],i);return e.next=4,Promise.all(a);case 4:return s=e.sent,e.abrupt("return",new C.a({data:this._combineSymbolParts(s,r,n)}));case 6:case"end":return e.stop()}}),e,this)})));return function(t,r,n,i){return e.apply(this,arguments)}}()}]),r}(Object(M.a)(R.a));Object(h.a)([Object(E.b)({type:Object,json:{read:{source:"configuration"},write:{target:"configuration"}}})],L.prototype,"config",void 0),Object(h.a)([Object(E.b)({type:Object,json:{write:!0}})],L.prototype,"fieldMap",void 0),Object(h.a)([Object(E.b)({type:String,json:{read:{source:"scalingExpressionInfo.expression"},write:!0}})],L.prototype,"scaleExpression",void 0),Object(h.a)([Object(T.a)("scaleExpression")],L.prototype,"writeData",null),Object(h.a)([Object(E.b)({type:String,json:{read:{source:"scalingExpressionInfo.title"},write:{target:"scalingExpressionInfo.title",overridePolicy:function(e){return{enabled:!!e&&!!this.scaleExpression}}}}})],L.prototype,"scaleExpressionTitle",void 0),Object(h.a)([Object(E.b)({type:String,json:{write:!0}})],L.prototype,"url",void 0),Object(h.a)([Object(T.a)("visualVariables")],L.prototype,"writeVisualVariables",null);var V=L=n=Object(h.a)([Object(F.a)("esri.renderers.DictionaryRenderer")],L)},687:function(e,t,r){"use strict";r.d(t,"a",(function(){return m}));var n,i=r(7),a=r.n(i),o=r(12),s=r(2),c=r(4),l=r(5),u=r(6),p=r(0),b=r(18),d=r(1),y=(r(14),r(19),r(15),r(31)),f=r(10),j=r(663),h=r(684),O=r(765),v=n=function(e){Object(l.a)(r,e);var t=Object(u.a)(r);function r(e){var n;return Object(s.a)(this,r),(n=t.call(this,e)).description=null,n.label=null,n.symbol=null,n.type="simple",n}return Object(c.a)(r,[{key:"collectRequiredFields",value:function(){var e=Object(o.a)(a.a.mark((function e(t,r){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this.collectSymbolFields(t,r),this.collectVVRequiredFields(t,r)]);case 2:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"collectSymbolFields",value:function(){var e=Object(o.a)(a.a.mark((function e(t,r){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(this.getSymbols().map((function(e){return e.collectRequiredFields(t,r)})));case 2:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getSymbol",value:function(e,t){return this.symbol}},{key:"getSymbolAsync",value:function(){var e=Object(o.a)(a.a.mark((function e(t,r){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.symbol);case 1:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getSymbols",value:function(){return this.symbol?[this.symbol]:[]}},{key:"getAttributeHash",value:function(){return this.visualVariables&&this.visualVariables.reduce((function(e,t){return e+t.getAttributeHash()}),"")}},{key:"getMeshHash",value:function(){return this.getSymbols().reduce((function(e,t){return e+JSON.stringify(t)}),"")}},{key:"arcadeRequired",get:function(){return this.arcadeRequiredForVisualVariables}},{key:"clone",value:function(){return new n({description:this.description,label:this.label,symbol:this.symbol&&this.symbol.clone(),visualVariables:Object(b.a)(this.visualVariables),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})}}]),r}(Object(h.a)(j.a));Object(p.a)([Object(d.b)({type:String,json:{write:!0}})],v.prototype,"description",void 0),Object(p.a)([Object(d.b)({type:String,json:{write:!0}})],v.prototype,"label",void 0),Object(p.a)([Object(d.b)(O.b)],v.prototype,"symbol",void 0),Object(p.a)([Object(y.a)({simple:"simple"})],v.prototype,"type",void 0);var m=v=n=Object(p.a)([Object(f.a)("esri.renderers.SimpleRenderer")],v)},688:function(e,t,r){"use strict";r.d(t,"a",(function(){return D}));var n,i=r(21),a=r(7),o=r.n(a),s=r(12),c=r(2),l=r(4),u=r(5),p=r(6),b=r(0),d=r(46),y=r(18),f=r(61),j=r(14),h=(r(19),r(15)),O=r(31),v=r(1),m=r(10),g=r(209),w=r(663),S=r(684),k=r(26),x=r(97),I=h.a.getLogger("esri.renderers.support.AttributeColorInfo"),E=n=function(e){Object(u.a)(r,e);var t=Object(p.a)(r);function r(e){var n;return Object(c.a)(this,r),(n=t.call(this,e)).color=null,n.field=null,n.label=null,n.valueExpression=null,n.valueExpressionTitle=null,n}return Object(l.a)(r,[{key:"castField",value:function(e){return null==e?e:"function"==typeof e?(I.error(".field: field must be a string value"),null):Object(j.l)(e)}},{key:"getAttributeHash",value:function(){return"".concat(this.field,"-").concat(this.valueExpression)}},{key:"clone",value:function(){return new n({color:this.color&&this.color.clone(),field:this.field,label:this.label,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})}}]),r}(k.a);Object(b.a)([Object(v.b)({type:d.a,json:{type:[Number],write:!0}})],E.prototype,"color",void 0),Object(b.a)([Object(v.b)({type:String,json:{write:!0}})],E.prototype,"field",void 0),Object(b.a)([Object(x.a)("field")],E.prototype,"castField",null),Object(b.a)([Object(v.b)({type:String,json:{write:!0}})],E.prototype,"label",void 0),Object(b.a)([Object(v.b)({type:String,json:{write:!0}})],E.prototype,"valueExpression",void 0),Object(b.a)([Object(v.b)({type:String,json:{write:!0}})],E.prototype,"valueExpressionTitle",void 0);var F,T=E=n=Object(b.a)([Object(m.a)("esri.renderers.support.AttributeColorInfo")],E),_=F=function(e){Object(u.a)(r,e);var t=Object(p.a)(r);function r(){var e;return Object(c.a)(this,r),(e=t.apply(this,arguments)).unit=null,e}return Object(l.a)(r,[{key:"clone",value:function(){return new F({unit:this.unit})}}]),r}(k.a);Object(b.a)([Object(v.b)({type:String,json:{write:!0}})],_.prototype,"unit",void 0);var R,M=_=F=Object(b.a)([Object(m.a)("esri.renderers.support.DotDensityLegendOptions")],_),P=r(166),C=r(98),N=R=function(e){Object(u.a)(r,e);var t=Object(p.a)(r);function r(e){var n;return Object(c.a)(this,r),(n=t.call(this,e)).attributes=null,n.backgroundColor=new d.a([0,0,0,0]),n.blendDots=!0,n.dotBlendingEnabled=!0,n.dotShape="square",n.dotSize=1,n.legendOptions=null,n.outline=new C.a,n.dotValue=null,n.referenceDotValue=null,n.referenceScale=null,n.seed=1,n.type="dot-density",n}return Object(l.a)(r,[{key:"calculateDotValue",value:function(e){if(null==this.referenceScale)return this.dotValue;var t=e/this.referenceScale*this.dotValue;return t<1?1:t}},{key:"getSymbol",value:function(){return new P.a({outline:this.outline})}},{key:"getSymbolAsync",value:function(){var e=Object(s.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.getSymbol());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getSymbols",value:function(){return[this.getSymbol()]}},{key:"getAttributeHash",value:function(){return this.attributes&&this.attributes.reduce((function(e,t){return e+t.getAttributeHash()}),"")}},{key:"getMeshHash",value:function(){return JSON.stringify(this.outline)}},{key:"clone",value:function(){return new R({attributes:Object(y.a)(this.attributes),backgroundColor:Object(y.a)(this.backgroundColor),dotBlendingEnabled:Object(y.a)(this.dotBlendingEnabled),dotShape:Object(y.a)(this.dotShape),dotSize:Object(y.a)(this.dotSize),dotValue:Object(y.a)(this.dotValue),legendOptions:Object(y.a)(this.legendOptions),outline:Object(y.a)(this.outline),referenceScale:Object(y.a)(this.referenceScale),visualVariables:Object(y.a)(this.visualVariables),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})}},{key:"getControllerHash",value:function(){return"".concat(this.attributes.map((function(e){return e.field||e.valueExpression||""})),"-").concat(this.outline&&JSON.stringify(this.outline.toJSON())||"")}},{key:"collectRequiredFields",value:function(){var e=Object(s.a)(o.a.mark((function e(t,r){var n,a,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.collectVVRequiredFields(t,r);case 2:n=Object(i.a)(this.attributes),e.prev=3,n.s();case 5:if((a=n.n()).done){e.next=14;break}if(s=a.value,e.t0=s.valueExpression,!e.t0){e.next=11;break}return e.next=11,Object(g.a)(t,r,s.valueExpression);case 11:s.field&&t.add(s.field);case 12:e.next=5;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(3),n.e(e.t1);case 19:return e.prev=19,n.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,this,[[3,16,19,22]])})));return function(t,r){return e.apply(this,arguments)}}()}]),r}(Object(S.a)(w.a));Object(b.a)([Object(v.b)({type:[T],json:{write:!0}})],N.prototype,"attributes",void 0),Object(b.a)([Object(v.b)({type:d.a,json:{write:!0}})],N.prototype,"backgroundColor",void 0),Object(b.a)([Object(v.b)({type:Boolean}),Object(f.a)("dotBlendingEnabled")],N.prototype,"blendDots",void 0),Object(b.a)([Object(v.b)({type:Boolean,json:{write:!0}})],N.prototype,"dotBlendingEnabled",void 0),Object(b.a)([Object(v.b)({type:String,json:{write:!1}})],N.prototype,"dotShape",void 0),Object(b.a)([Object(v.b)({type:Number,json:{write:!1}})],N.prototype,"dotSize",void 0),Object(b.a)([Object(v.b)({type:M,json:{write:!0}})],N.prototype,"legendOptions",void 0),Object(b.a)([Object(v.b)({type:C.a,json:{default:null,write:!0}})],N.prototype,"outline",void 0),Object(b.a)([Object(v.b)({type:Number,json:{write:!0}})],N.prototype,"dotValue",void 0),Object(b.a)([Object(v.b)({type:Number}),Object(f.a)("dotValue")],N.prototype,"referenceDotValue",void 0),Object(b.a)([Object(v.b)({type:Number,json:{write:!0}})],N.prototype,"referenceScale",void 0),Object(b.a)([Object(v.b)({type:Number,json:{write:!0}})],N.prototype,"seed",void 0),Object(b.a)([Object(O.a)({dotDensity:"dot-density"})],N.prototype,"type",void 0);var D=N=R=Object(b.a)([Object(m.a)("esri.renderers.DotDensityRenderer")],N)},689:function(e,t,r){"use strict";r.d(t,"a",(function(){return k}));var n,i=r(7),a=r.n(i),o=r(12),s=r(2),c=r(4),l=r(5),u=r(6),p=r(0),b=r(46),d=r(18),y=r(1),f=(r(14),r(19),r(15),r(31)),j=r(10),h=r(209),O=r(663),v=r(26),m=n=function(e){Object(l.a)(r,e);var t=Object(u.a)(r);function r(e){var n;return Object(s.a)(this,r),(n=t.call(this,e)).color=null,n.ratio=null,n}return Object(c.a)(r,[{key:"clone",value:function(){return new n({color:this.color,ratio:this.ratio})}}]),r}(v.a);Object(p.a)([Object(y.b)({type:b.a,json:{write:!0}})],m.prototype,"color",void 0),Object(p.a)([Object(y.b)({type:Number,json:{write:!0}})],m.prototype,"ratio",void 0);var g,w=m=n=Object(p.a)([Object(j.a)("esri.renderers.support.HeatmapColorStop")],m),S=g=function(e){Object(l.a)(r,e);var t=Object(u.a)(r);function r(e){var n;return Object(s.a)(this,r),(n=t.call(this,e)).blurRadius=10,n.colorStops=[new w({ratio:0,color:new b.a("rgba(255, 140, 0, 0)")}),new w({ratio:.75,color:new b.a("rgba(255, 140, 0, 1)")}),new w({ratio:.9,color:new b.a("rgba(255, 0,   0, 1)")})],n.field=null,n.fieldOffset=0,n.maxPixelIntensity=100,n.minPixelIntensity=0,n.type="heatmap",n}return Object(c.a)(r,[{key:"collectRequiredFields",value:function(){var e=Object(o.a)(a.a.mark((function e(t,r){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(n=this.field)&&"string"==typeof n&&Object(h.b)(t,r,n);case 2:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getAttributeHash",value:function(){return null}},{key:"getMeshHash",value:function(){return"".concat(JSON.stringify(this.colorStops),".").concat(this.blurRadius,".").concat(this.field)}},{key:"clone",value:function(){return new g({blurRadius:this.blurRadius,colorStops:Object(d.a)(this.colorStops),field:this.field,maxPixelIntensity:this.maxPixelIntensity,minPixelIntensity:this.minPixelIntensity})}}]),r}(O.a);Object(p.a)([Object(y.b)({type:Number,json:{write:!0}})],S.prototype,"blurRadius",void 0),Object(p.a)([Object(y.b)({type:[w],json:{write:!0}})],S.prototype,"colorStops",void 0),Object(p.a)([Object(y.b)({type:String,json:{write:!0}})],S.prototype,"field",void 0),Object(p.a)([Object(y.b)({type:Number,json:{write:{overridePolicy:function(e,t,r){return{enabled:null==r}}}}})],S.prototype,"fieldOffset",void 0),Object(p.a)([Object(y.b)({type:Number,json:{write:!0}})],S.prototype,"maxPixelIntensity",void 0),Object(p.a)([Object(y.b)({type:Number,json:{write:!0}})],S.prototype,"minPixelIntensity",void 0),Object(p.a)([Object(f.a)({heatmap:"heatmap"})],S.prototype,"type",void 0);var k=S=g=Object(p.a)([Object(j.a)("esri.renderers.HeatmapRenderer")],S)},690:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var n=new(r(42).a)({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml"})},691:function(e,t,r){"use strict";r.d(t,"a",(function(){return u})),r.d(t,"b",(function(){return p}));var n=r(700),i=r(686),a=r(688),o=r(689),s=r(663),c=r(687),l=r(701),u={key:"type",base:s.a,typeMap:{heatmap:o.a,simple:c.a,"unique-value":l.a,"class-breaks":n.a,"dot-density":a.a,dictionary:i.default},errorContext:"renderer"},p={key:"type",base:s.a,typeMap:{simple:c.a,"unique-value":l.a,"class-breaks":n.a},errorContext:"renderer"}},693:function(e,t,r){"use strict";r.d(t,"a",(function(){return f})),r.d(t,"b",(function(){return b})),r.d(t,"c",(function(){return d})),r.d(t,"d",(function(){return y})),r.d(t,"e",(function(){return m})),r.d(t,"f",(function(){return p}));var n=r(109),i="__begin__",a="__end__",o=new RegExp(i,"ig"),s=new RegExp(a,"ig"),c=new RegExp("^"+i,"i"),l=new RegExp(a+"$","i"),u='"';function p(e){return e.replace(new RegExp("\\{","g"),"[").replace(new RegExp("\\}","g"),"]")}function b(e){var t={expression:"",type:"none"};return e.labelExpressionInfo?e.labelExpressionInfo.value?(t.expression=e.labelExpressionInfo.value,t.type="conventional"):e.labelExpressionInfo.expression&&(t.expression=e.labelExpressionInfo.expression,t.type="arcade"):null!=e.labelExpression&&(t.expression=function(e){return e.replace(new RegExp("\\[","g"),"{").replace(new RegExp("\\]","g"),"}")}(e.labelExpression),t.type="conventional"),t}function d(e){var t=b(e);if(!t)return null;switch(t.type){case"conventional":return f(t.expression);case"arcade":return t.expression}return null}function y(e){var t=b(e);if(!t)return null;switch(t.type){case"conventional":return function(e){var t=e.match(j);return t&&t[1].trim()||null}(t.expression);case"arcade":return m(t.expression)}return null}function f(e){var t;return e?(t=Object(n.c)(e,(function(e){return i+'$feature["'+e+'"]'+a})),t=c.test(t)?t.replace(c,""):u+t,t=(t=l.test(t)?t.replace(l,""):t+u).replace(o,'" + ').replace(s,' + "')):t='""',t}var j=/^\s*\{([^}]+)\}\s*$/i;var h=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])([\w\s]+)(\2)\]));?\s*$/i,O=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])([\w\s]+)(\2)\]));?\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(\1|\3)(\5)\s*\));?\s*$/i,v=/^\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])([\w\s]+)(\1)\s*\));?\s*$/i;function m(e){if(!e)return null;var t=h.exec(e)||O.exec(e);return t?t[1]||t[3]:(t=v.exec(e))?t[2]:null}},694:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));r(19);function n(e){}},697:function(e,t,r){"use strict";r.d(t,"a",(function(){return E}));var n=r(7),i=r.n(n),a=r(12),o=r(2),s=r(4),c=r(8),l=r(5),u=r(6),p=r(0),b=r(15),d=r(30),y=r(1),f=(r(19),r(14),r(10)),j=r(21),h=r(52),O=r(215),v=new h.a,m=new WeakMap;function g(e){w(e)&&v.push(e)}function w(e){return e&&"object"==typeof e&&"refreshInterval"in e&&"refresh"in e}function S(e,t){return Number.isFinite(e)&&Number.isFinite(t)?t<=0?e:S(t,e%t):0}var k=0,x=0;function I(){var e,t=Date.now(),r=Object(j.a)(v);try{for(r.s();!(e=r.n()).done;){var n,i=e.value;if(i.refreshInterval)t-(null!=(n=m.get(i))?n:0)+5>=6e4*i.refreshInterval&&(m.set(i,t),i.refresh(t))}}catch(a){r.e(a)}finally{r.f()}}Object(O.a)((function(){var e,t=Date.now(),r=0,n=Object(j.a)(v);try{for(n.s();!(e=n.n()).done;){var i=e.value;r=S(Math.round(6e4*i.refreshInterval),r),i.refreshInterval?m.get(i)||m.set(i,t):m.delete(i)}}catch(a){n.e(a)}finally{n.f()}if(r!==x){if(x=r,clearInterval(k),0===x)return void(k=0);k=setInterval(I,x)}}));var E=function(e){var t=function(e){Object(l.a)(r,e);var t=Object(u.a)(r);function r(){var e;Object(o.a)(this,r);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).refreshInterval=0,e.refreshTimestamp=0,e._debounceHasDataChanged=Object(d.i)((function(){return e.hasDataChanged()})),e.when().then((function(){g(Object(c.a)(e))}),(function(){})),e}return Object(s.a)(r,[{key:"destroy",value:function(){var e;w(e=this)&&v.includes(e)&&v.remove(e)}},{key:"refreshParameters",get:function(){return{_ts:this.refreshTimestamp||null}}},{key:"refresh",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now();Object(d.l)(this._debounceHasDataChanged()).then((function(r){r&&(e._set("refreshTimestamp",t),e.emit("refresh"))}),(function(t){b.a.getLogger(e.declaredClass).error(t)}))}},{key:"hasDataChanged",value:function(){var e=Object(a.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),r}(e);return Object(p.a)([Object(y.b)({type:Number,cast:function(e){return e>=.1?e:e<=0?0:.1},json:{write:!0,origins:{"web-document":{write:!0}}}})],t.prototype,"refreshInterval",void 0),Object(p.a)([Object(y.b)({readOnly:!0})],t.prototype,"refreshTimestamp",void 0),Object(p.a)([Object(y.b)()],t.prototype,"refreshParameters",null),t=Object(p.a)([Object(f.a)("esri.layers.mixins.RefreshableLayer")],t),t}},698:function(e,t,r){"use strict";r.d(t,"a",(function(){return S}));var n,i=r(2),a=r(4),o=r(5),s=r(6),c=r(0),l=r(665),u=r(678),p=r(26),b=r(18),d=r(11),y=r(1),f=(r(14),r(19),r(15),r(57)),j=r(10),h=r(43),O=n=function(e){Object(o.a)(r,e);var t=Object(s.a)(r);function r(e){var n;return Object(i.a)(this,r),(n=t.call(this,e)).respectsDaylightSaving=!1,n.timezone=null,n}return Object(a.a)(r,[{key:"readRespectsDaylightSaving",value:function(e,t){return void 0!==t.respectsDaylightSaving?t.respectsDaylightSaving:void 0!==t.respectDaylightSaving&&t.respectDaylightSaving}},{key:"clone",value:function(){var e=this.respectsDaylightSaving,t=this.timezone;return new n({respectsDaylightSaving:e,timezone:t})}}]),r}(p.a);Object(c.a)([Object(y.b)({type:Boolean,json:{write:!0}})],O.prototype,"respectsDaylightSaving",void 0),Object(c.a)([Object(f.a)("respectsDaylightSaving",["respectsDaylightSaving","respectDaylightSaving"])],O.prototype,"readRespectsDaylightSaving",null),Object(c.a)([Object(y.b)({type:String,json:{read:{source:"timeZone"},write:{target:"timeZone"}}})],O.prototype,"timezone",void 0);var v,m=O=n=Object(c.a)([Object(j.a)("esri.layers.support.TimeReference")],O),g=r(669),w=v=function(e){Object(o.a)(r,e);var t=Object(s.a)(r);function r(e){var n;return Object(i.a)(this,r),(n=t.call(this,e)).cumulative=!1,n.endField=null,n.fullTimeExtent=null,n.hasLiveData=!1,n.interval=null,n.startField=null,n.timeReference=null,n.trackIdField=null,n.useTime=!0,n}return Object(a.a)(r,[{key:"readFullTimeExtent",value:function(e,t){if(!t.timeExtent||!Array.isArray(t.timeExtent)||2!==t.timeExtent.length)return null;var r=new Date(t.timeExtent[0]),n=new Date(t.timeExtent[1]);return new l.a({start:r,end:n})}},{key:"writeFullTimeExtent",value:function(e,t){e&&Object(d.j)(e.start)&&Object(d.j)(e.end)?t.timeExtent=[e.start.getTime(),e.end.getTime()]:t.timeExtent=null}},{key:"readInterval",value:function(e,t){return t.timeInterval&&t.timeIntervalUnits?new u.a({value:t.timeInterval,unit:g.a.fromJSON(t.timeIntervalUnits)}):t.defaultTimeInterval&&t.defaultTimeIntervalUnits?new u.a({value:t.defaultTimeInterval,unit:g.a.fromJSON(t.defaultTimeIntervalUnits)}):null}},{key:"writeInterval",value:function(e,t){if(e){var r=e.toJSON();t.timeInterval=r.value,t.timeIntervalUnits=r.unit}else t.timeInterval=null,t.timeIntervalUnits=null}},{key:"clone",value:function(){var e=this.cumulative,t=this.endField,r=this.hasLiveData,n=this.interval,i=this.startField,a=this.timeReference,o=this.fullTimeExtent,s=this.trackIdField,c=this.useTime;return new v({cumulative:e,endField:t,hasLiveData:r,interval:n,startField:i,timeReference:Object(b.a)(a),fullTimeExtent:Object(b.a)(o),trackIdField:s,useTime:c})}}]),r}(p.a);Object(c.a)([Object(y.b)({type:Boolean,json:{read:{source:"exportOptions.timeDataCumulative"},write:{target:"exportOptions.timeDataCumulative"}}})],w.prototype,"cumulative",void 0),Object(c.a)([Object(y.b)({type:String,json:{read:{source:"endTimeField"},write:{target:"endTimeField",allowNull:!0}}})],w.prototype,"endField",void 0),Object(c.a)([Object(y.b)({type:l.a,json:{write:{enabled:!0,allowNull:!0}}})],w.prototype,"fullTimeExtent",void 0),Object(c.a)([Object(f.a)("fullTimeExtent",["timeExtent"])],w.prototype,"readFullTimeExtent",null),Object(c.a)([Object(h.a)("fullTimeExtent")],w.prototype,"writeFullTimeExtent",null),Object(c.a)([Object(y.b)({type:Boolean,json:{write:!0}})],w.prototype,"hasLiveData",void 0),Object(c.a)([Object(y.b)({type:u.a,json:{write:{enabled:!0,allowNull:!0}}})],w.prototype,"interval",void 0),Object(c.a)([Object(f.a)("interval",["timeInterval","timeIntervalUnits","defaultTimeInterval","defaultTimeIntervalUnits"])],w.prototype,"readInterval",null),Object(c.a)([Object(h.a)("interval")],w.prototype,"writeInterval",null),Object(c.a)([Object(y.b)({type:String,json:{read:{source:"startTimeField"},write:{target:"startTimeField",allowNull:!0}}})],w.prototype,"startField",void 0),Object(c.a)([Object(y.b)({type:m,json:{write:{enabled:!0,allowNull:!0}}})],w.prototype,"timeReference",void 0),Object(c.a)([Object(y.b)({type:String,json:{write:{enabled:!0,allowNull:!0}}})],w.prototype,"trackIdField",void 0),Object(c.a)([Object(y.b)({type:Boolean,json:{read:{source:"exportOptions.useTime"},write:{target:"exportOptions.useTime"}}})],w.prototype,"useTime",void 0);var S=w=v=Object(c.a)([Object(j.a)("esri.layers.support.TimeInfo")],w)},702:function(e,t,r){"use strict";r.d(t,"a",(function(){return s})),r.d(t,"b",(function(){return l}));var n=r(21),i=r(11),a=r(135),o=r(53);function s(e,t,r){if(Object(i.i)(t)||Object(i.i)(r)||r.vcsWkid||Object(o.d)(t,r))return null;var s=Object(a.e)(t)/Object(a.e)(r);if(1===s)return null;switch(e){case"point":case"esriGeometryPoint":return function(e){return function(e,t){e&&null!=e.z&&(e.z*=t)}(e,s)};case"polyline":case"esriGeometryPolyline":return function(e){return function(e,t){if(e){var r,i=Object(n.a)(e.paths);try{for(i.s();!(r=i.n()).done;){var a,o=r.value,s=Object(n.a)(o);try{for(s.s();!(a=s.n()).done;){var c=a.value;c.length>2&&(c[2]*=t)}}catch(l){s.e(l)}finally{s.f()}}}catch(l){i.e(l)}finally{i.f()}}}(e,s)};case"polygon":case"esriGeometryPolygon":return function(e){return function(e,t){if(e){var r,i=Object(n.a)(e.rings);try{for(i.s();!(r=i.n()).done;){var a,o=r.value,s=Object(n.a)(o);try{for(s.s();!(a=s.n()).done;){var c=a.value;c.length>2&&(c[2]*=t)}}catch(l){s.e(l)}finally{s.f()}}}catch(l){i.e(l)}finally{i.f()}}}(e,s)};case"multipoint":case"esriGeometryMultipoint":return function(e){return function(e,t){if(e){var r,i=Object(n.a)(e.points);try{for(i.s();!(r=i.n()).done;){var a=r.value;a.length>2&&(a[2]*=t)}}catch(o){i.e(o)}finally{i.f()}}}(e,s)};default:return null}}function c(e,t,r){if(null==e.hasM||e.hasZ){var i,a=Object(n.a)(t);try{for(a.s();!(i=a.n()).done;){var o,s=i.value,c=Object(n.a)(s);try{for(c.s();!(o=c.n()).done;){var l=o.value;l.length>2&&(l[2]*=r)}}catch(u){c.e(u)}finally{c.f()}}}catch(u){a.e(u)}finally{a.f()}}}function l(e,t,r){if((e||t)&&r){var n=Object(a.e)(r);u(e,r,n),u(t,r,n)}}function u(e,t,r){if(e){var i,a=Object(n.a)(e);try{for(a.s();!(i=a.n()).done;){p(i.value.geometry,t,r)}}catch(o){a.e(o)}finally{a.f()}}}function p(e,t,r){if(!Object(i.i)(e)&&e.spatialReference&&!Object(o.d)(e.spatialReference,t)){var s=Object(a.e)(e.spatialReference)/r;if(1!==s)if("x"in e)null!=e.z&&(e.z*=s);else if("rings"in e)c(e,e.rings,s);else if("paths"in e)c(e,e.paths,s);else if("points"in e&&(null==e.hasM||e.hasZ)){var l,u=Object(n.a)(e.points);try{for(u.s();!(l=u.n()).done;){var p=l.value;p.length>2&&(p[2]*=s)}}catch(b){u.e(b)}finally{u.f()}}}}},703:function(e,t,r){"use strict";r.d(t,"a",(function(){return i})),r.d(t,"b",(function(){return o})),r.d(t,"c",(function(){return a})),r.d(t,"d",(function(){return s})),r.d(t,"e",(function(){return c})),r.d(t,"f",(function(){return u})),r.d(t,"g",(function(){return l}));var n=[252,146,31,255],i={type:"esriSMS",style:"esriSMSCircle",size:6,color:n,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},a={type:"esriSLS",style:"esriSLSSolid",width:.75,color:n},o={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}},s={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0},c={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5},l={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5},u={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null}},704:function(e,t,r){"use strict";function n(e){return e&&"esri.renderers.visualVariables.SizeVariable"===e.declaredClass}function i(e){return null!=e&&!isNaN(e)&&isFinite(e)}function a(e){return e.valueExpression?"expression":e.field&&"string"==typeof e.field?"field":"unknown"}function o(e,t){var r=t||a(e),n=e.valueUnit||"unknown";return"unknown"===r?"constant":e.stops?"stops":null!=e.minSize&&null!=e.maxSize&&null!=e.minDataValue&&null!=e.maxDataValue?"clamped-linear":"unknown"===n?null!=e.minSize&&null!=e.minDataValue?e.minSize&&e.minDataValue?"proportional":"additive":"identity":"real-world-size"}r.d(t,"a",(function(){return a})),r.d(t,"b",(function(){return o})),r.d(t,"c",(function(){return n})),r.d(t,"d",(function(){return i}))},705:function(e,t,r){"use strict";r.d(t,"a",(function(){return p}));var n=r(2),i=r(5),a=r(6),o=r(0),s=r(26),c=r(1),l=(r(19),r(14),r(15),r(10)),u=function(e){Object(i.a)(r,e);var t=Object(a.a)(r);function r(){var e;return Object(n.a)(this,r),(e=t.apply(this,arguments)).type=null,e}return r}(s.a);Object(o.a)([Object(c.b)({type:["selection","cluster"],readOnly:!0,json:{read:!1,write:!0}})],u.prototype,"type",void 0);var p=u=Object(o.a)([Object(l.a)("esri.layers.support.FeatureReduction")],u)},710:function(e,t,r){"use strict";r.d(t,"a",(function(){return d}));var n=r(2),i=r(4),a=r(5),o=r(6),s=r(0),c=r(15),l=r(11),u=r(1),p=(r(19),r(14),r(10)),b=r(676),d=function(e){var t=function(e){Object(a.a)(r,e);var t=Object(o.a)(r);function r(){return Object(n.a)(this,r),t.apply(this,arguments)}return Object(i.a)(r,[{key:"title",get:function(){if(this._get("title")&&"defaults"!==this.originOf("title"))return this._get("title");if(this.url){var e=Object(b.e)(this.url);if(Object(l.j)(e)&&e.title)return e.title}return this._get("title")||""},set:function(e){this._set("title",e)}},{key:"url",set:function(e){this._set("url",Object(b.g)(e,c.a.getLogger(this.declaredClass)))}}]),r}(e);return Object(s.a)([Object(u.b)()],t.prototype,"title",null),Object(s.a)([Object(u.b)({type:String})],t.prototype,"url",null),t=Object(s.a)([Object(p.a)("esri.layers.mixins.ArcGISService")],t)}},711:function(e,t,r){"use strict";r.d(t,"a",(function(){return y}));var n,i=r(2),a=r(4),o=r(5),s=r(6),c=r(0),l=r(26),u=r(1),p=(r(19),r(14)),b=(r(15),r(31)),d=r(10),y=n=function(e){Object(o.a)(r,e);var t=Object(s.a)(r);function r(e){var n;return Object(i.a)(this,r),(n=t.call(this,e)).type="map-layer",n}return Object(a.a)(r,[{key:"clone",value:function(){var e=this.mapLayerId,t=this.gdbVersion;return new n({mapLayerId:e,gdbVersion:t})}}]),r}(l.a);Object(c.a)([Object(b.a)({mapLayer:"map-layer"})],y.prototype,"type",void 0),Object(c.a)([Object(u.b)({type:p.a,json:{write:!0}})],y.prototype,"mapLayerId",void 0),Object(c.a)([Object(u.b)({type:String,json:{write:!0}})],y.prototype,"gdbVersion",void 0),y=n=Object(c.a)([Object(d.a)("esri.layers.support.source.MapLayerSource")],y)},712:function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));var n=r(2),i=r(4),a=r(708),o=function(){function e(t,r){Object(n.a)(this,e),this._storage=new a.b,this._storage.maxSize=t,r&&this._storage.registerRemoveFunc("",r)}return Object(i.a)(e,[{key:"put",value:function(e,t,r){this._storage.put(e,t,r,1)}},{key:"pop",value:function(e){return this._storage.pop(e)}},{key:"get",value:function(e){return this._storage.get(e)}},{key:"clear",value:function(){this._storage.clearAll()}},{key:"destroy",value:function(){this._storage.destroy()}},{key:"maxSize",get:function(){return this._storage.maxSize},set:function(e){this._storage.maxSize=e}}]),e}()},713:function(e,t,r){"use strict";r.d(t,"a",(function(){return j}));var n=r(2),i=r(4),a=r(5),o=r(6),s=r(0),c=r(42),l=r(26),u=r(18),p=r(1),b=(r(14),r(19),r(15),r(10)),d=r(43),y=new c.a({esriFeatureEditToolAutoCompletePolygon:"auto-complete-polygon",esriFeatureEditToolCircle:"circle",esriFeatureEditToolEllipse:"ellipse",esriFeatureEditToolFreehand:"freehand",esriFeatureEditToolLine:"line",esriFeatureEditToolNone:"none",esriFeatureEditToolPoint:"point",esriFeatureEditToolPolygon:"polygon",esriFeatureEditToolRectangle:"rectangle",esriFeatureEditToolArrow:"arrow",esriFeatureEditToolTriangle:"triangle",esriFeatureEditToolLeftArrow:"left-arrow",esriFeatureEditToolRightArrow:"right-arrow",esriFeatureEditToolUpArrow:"up-arrow",esriFeatureEditToolDownArrow:"down-arrow"}),f=function(e){Object(a.a)(r,e);var t=Object(o.a)(r);function r(e){var i;return Object(n.a)(this,r),(i=t.call(this,e)).name=null,i.description=null,i.drawingTool=null,i.prototype=null,i.thumbnail=null,i}return Object(i.a)(r,[{key:"writeDrawingTool",value:function(e,t){t.drawingTool=y.toJSON(e)}},{key:"writePrototype",value:function(e,t){t.prototype=Object(u.c)(Object(u.a)(e),!0)}},{key:"writeThumbnail",value:function(e,t){t.thumbnail=Object(u.c)(Object(u.a)(e))}}]),r}(l.a);Object(s.a)([Object(p.b)({json:{write:!0}})],f.prototype,"name",void 0),Object(s.a)([Object(p.b)({json:{write:!0}})],f.prototype,"description",void 0),Object(s.a)([Object(p.b)({json:{read:y.read,write:y.write}})],f.prototype,"drawingTool",void 0),Object(s.a)([Object(d.a)("drawingTool")],f.prototype,"writeDrawingTool",null),Object(s.a)([Object(p.b)({json:{write:!0}})],f.prototype,"prototype",void 0),Object(s.a)([Object(d.a)("prototype")],f.prototype,"writePrototype",null),Object(s.a)([Object(p.b)({json:{write:!0}})],f.prototype,"thumbnail",void 0),Object(s.a)([Object(d.a)("thumbnail")],f.prototype,"writeThumbnail",null);var j=f=Object(s.a)([Object(b.a)("esri.layers.support.FeatureTemplate")],f)},714:function(e,t,r){"use strict";r.d(t,"a",(function(){return h}));var n,i=r(2),a=r(4),o=r(5),s=r(6),c=r(0),l=r(42),u=r(26),p=r(18),b=r(1),d=(r(14),r(19),r(15),r(10)),y=r(43),f=new l.a({count:"count",sum:"sum",min:"min",max:"max",avg:"avg",stddev:"stddev",var:"var",exceedslimit:"exceedslimit",percentile_cont:"percentile-continuous",percentile_disc:"percentile-discrete"}),j=n=function(e){Object(o.a)(r,e);var t=Object(s.a)(r);function r(e){var n;return Object(i.a)(this,r),(n=t.call(this,e)).maxPointCount=void 0,n.maxRecordCount=void 0,n.maxVertexCount=void 0,n.onStatisticField=null,n.outStatisticFieldName=null,n.statisticType=null,n.statisticParameters=null,n}return Object(a.a)(r,[{key:"writeStatisticParameters",value:function(e,t){"percentile-continuous"!==this.statisticType&&"percentile-discrete"!==this.statisticType||(t.statisticParameters=Object(p.a)(e))}},{key:"clone",value:function(){return new n({maxPointCount:this.maxPointCount,maxRecordCount:this.maxRecordCount,maxVertexCount:this.maxVertexCount,onStatisticField:this.onStatisticField,outStatisticFieldName:this.outStatisticFieldName,statisticType:this.statisticType,statisticParameters:Object(p.a)(this.statisticParameters)})}}]),r}(u.a);Object(c.a)([Object(b.b)({type:Number,json:{write:!0}})],j.prototype,"maxPointCount",void 0),Object(c.a)([Object(b.b)({type:Number,json:{write:!0}})],j.prototype,"maxRecordCount",void 0),Object(c.a)([Object(b.b)({type:Number,json:{write:!0}})],j.prototype,"maxVertexCount",void 0),Object(c.a)([Object(b.b)({type:String,json:{write:!0}})],j.prototype,"onStatisticField",void 0),Object(c.a)([Object(b.b)({type:String,json:{write:!0}})],j.prototype,"outStatisticFieldName",void 0),Object(c.a)([Object(b.b)({type:String,json:{read:{source:"statisticType",reader:f.read},write:{target:"statisticType",writer:f.write}}})],j.prototype,"statisticType",void 0),Object(c.a)([Object(b.b)({type:Object})],j.prototype,"statisticParameters",void 0),Object(c.a)([Object(y.a)("statisticParameters")],j.prototype,"writeStatisticParameters",null);var h=j=n=Object(c.a)([Object(d.a)("esri.rest.support.StatisticDefinition")],j)},715:function(e,t,r){"use strict";r.d(t,"a",(function(){return l})),r.d(t,"b",(function(){return p})),r.d(t,"c",(function(){return c}));r(19);var n=r(29),i=r(66),a=r(165),o=r(212),s=r(691);function c(e,t,r,a){var o=function(e,t){return e?function(e,t){if(!t||"web-scene"!==t.origin)return!0;switch(e.type){case"simple":case"unique-value":case"class-breaks":return!0;default:return!1}}(e,t)?e.write({},t):(t.messages&&t.messages.push(new n.a("renderer:unsupported","Renderer of type '".concat(e.declaredClass,"' are not supported in scenes."),{renderer:e,context:t})),null):null}(e,a);o&&Object(i.c)(r,o,t)}function l(e,t){return p(e,null,t)}var u=Object(o.b)({types:s.a});function p(e,t,r){return e?e&&(e.styleName||e.styleUrl)&&"uniqueValue"!==e.type?(r&&r.messages&&r.messages.push(new a.a("renderer:unsupported","Only UniqueValueRenderer can be referenced from a web style, but found '"+e.type+"'",{definition:e,context:r})),null):u(e,t,r):null}},717:function(e,t,r){"use strict";r.d(t,"a",(function(){return h}));var n,i=r(2),a=r(4),o=r(5),s=r(6),c=r(0),l=(r(114),r(42)),u=r(26),p=r(18),b=r(1),d=(r(14),r(19),r(15),r(10)),y=r(58),f=new l.a({upperLeft:"upper-left",lowerLeft:"lower-left"}),j=n=function(e){Object(o.a)(r,e);var t=Object(s.a)(r);function r(e){var n;return Object(i.a)(this,r),(n=t.call(this,e)).extent=null,n.mode="view",n.originPosition="upper-left",n.tolerance=1,n}return Object(a.a)(r,[{key:"clone",value:function(){return new n(Object(p.a)({extent:this.extent,mode:this.mode,originPosition:this.originPosition,tolerance:this.tolerance}))}}]),r}(u.a);Object(c.a)([Object(b.b)({type:y.a,json:{write:{overridePolicy:function(){return{enabled:"view"===this.mode}}}}})],j.prototype,"extent",void 0),Object(c.a)([Object(b.b)({type:["view","edit"],json:{write:!0}})],j.prototype,"mode",void 0),Object(c.a)([Object(b.b)({type:String,json:{read:f.read,write:f.write}})],j.prototype,"originPosition",void 0),Object(c.a)([Object(b.b)({type:Number,json:{write:{overridePolicy:function(){return{enabled:"view"===this.mode}}}}})],j.prototype,"tolerance",void 0);var h=j=n=Object(c.a)([Object(d.a)("esri.rest.support.QuantizationParameters")],j)},719:function(e,t,r){"use strict";r.d(t,"a",(function(){return j}));var n=r(2),i=r(4),a=r(5),o=r(6),s=r(0),c=r(665),l=r(678),u=r(1),p=(r(19),r(14),r(15),r(57)),b=r(10),d=r(698),y=r(209),f=r(669);var j=function(e){var t=function(e){Object(a.a)(r,e);var t=Object(o.a)(r);function r(){var e;return Object(n.a)(this,r),(e=t.apply(this,arguments)).timeExtent=null,e.timeOffset=null,e.useViewTime=!0,e}return Object(i.a)(r,[{key:"readOffset",value:function(e,t){var r=t.timeInfo.exportOptions;if(!r)return null;var n=r.timeOffset,i=f.a.fromJSON(r.timeOffsetUnits);return n&&i?new l.a({value:n,unit:i}):null}},{key:"timeInfo",set:function(e){Object(y.f)(e,this.fieldsIndex),this._set("timeInfo",e)}}]),r}(e);return Object(s.a)([Object(u.b)({type:c.a,json:{write:!1}})],t.prototype,"timeExtent",void 0),Object(s.a)([Object(u.b)({type:l.a})],t.prototype,"timeOffset",void 0),Object(s.a)([Object(p.a)("service","timeOffset",["timeInfo.exportOptions"])],t.prototype,"readOffset",null),Object(s.a)([Object(u.b)({value:null,type:d.a,json:{write:!0,origins:{"web-document":{read:!1,write:!1}}}})],t.prototype,"timeInfo",null),Object(s.a)([Object(u.b)({type:Boolean,json:{read:{source:"timeAnimation"},write:{target:"timeAnimation"},origins:{"web-scene":{read:!1,write:!1}}}})],t.prototype,"useViewTime",void 0),t=Object(s.a)([Object(b.a)("esri.layers.mixins.TemporalLayer")],t),t}},720:function(e,t,r){"use strict";r.d(t,"a",(function(){return I}));var n,i=r(2),a=r(4),o=r(5),s=r(6),c=r(0),l=r(114),u=r(665),p=r(42),b=r(26),d=r(18),y=r(1),f=r(14),j=(r(19),r(15),r(10)),h=r(43),O=r(62),v=n=function(e){Object(o.a)(r,e);var t=Object(s.a)(r);function r(e){var n;return Object(i.a)(this,r),(n=t.call(this,e)).groupByFields=void 0,n.topCount=void 0,n.orderByFields=void 0,n}return Object(a.a)(r,[{key:"clone",value:function(){return new n({groupByFields:this.groupByFields,topCount:this.topCount,orderByFields:this.orderByFields})}}]),r}(b.a);Object(c.a)([Object(y.b)({type:[String],json:{write:!0}})],v.prototype,"groupByFields",void 0),Object(c.a)([Object(y.b)({type:Number,json:{write:!0}})],v.prototype,"topCount",void 0),Object(c.a)([Object(y.b)({type:[String],json:{write:!0}})],v.prototype,"orderByFields",void 0);var m,g=v=n=Object(c.a)([Object(j.a)("esri.rest.support.TopFilter")],v),w=r(45),S=new p.a({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),k=new p.a({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"}),x=m=function(e){Object(o.a)(r,e);var t=Object(s.a)(r);function r(e){var n;return Object(i.a)(this,r),(n=t.call(this,e)).cacheHint=void 0,n.distance=void 0,n.geometry=null,n.geometryPrecision=void 0,n.maxAllowableOffset=void 0,n.num=void 0,n.objectIds=null,n.orderByFields=null,n.outFields=null,n.outSpatialReference=null,n.resultType=null,n.returnGeometry=!1,n.returnM=void 0,n.returnZ=void 0,n.start=void 0,n.spatialRelationship="intersects",n.timeExtent=null,n.topFilter=void 0,n.units=null,n.where="1=1",n}return Object(a.a)(r,[{key:"writeStart",value:function(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10}},{key:"clone",value:function(){return new m(Object(d.a)({cacheHint:this.cacheHint,distance:this.distance,geometry:this.geometry,geometryPrecision:this.geometryPrecision,maxAllowableOffset:this.maxAllowableOffset,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,resultType:this.resultType,returnGeometry:this.returnGeometry,returnZ:this.returnZ,returnM:this.returnM,start:this.start,spatialRelationship:this.spatialRelationship,timeExtent:this.timeExtent,topFilter:this.topFilter,units:this.units,where:this.where}))}}]),r}(b.a);Object(c.a)([Object(y.b)({type:Boolean,json:{write:!0}})],x.prototype,"cacheHint",void 0),Object(c.a)([Object(y.b)({type:Number,json:{write:{overridePolicy:function(e){return{enabled:e>0}}}}})],x.prototype,"distance",void 0),Object(c.a)([Object(y.b)({types:l.a,json:{read:O.a,write:!0}})],x.prototype,"geometry",void 0),Object(c.a)([Object(y.b)({type:Number,json:{write:!0}})],x.prototype,"geometryPrecision",void 0),Object(c.a)([Object(y.b)({type:Number,json:{write:!0}})],x.prototype,"maxAllowableOffset",void 0),Object(c.a)([Object(y.b)({type:Number,json:{read:{source:"resultRecordCount"}}})],x.prototype,"num",void 0),Object(c.a)([Object(y.b)({json:{write:!0}})],x.prototype,"objectIds",void 0),Object(c.a)([Object(y.b)({type:[String],json:{write:!0}})],x.prototype,"orderByFields",void 0),Object(c.a)([Object(y.b)({type:[String],json:{write:!0}})],x.prototype,"outFields",void 0),Object(c.a)([Object(y.b)({type:w.a,json:{read:{source:"outSR"},write:{target:"outSR"}}})],x.prototype,"outSpatialReference",void 0),Object(c.a)([Object(y.b)({type:String,json:{write:!0}})],x.prototype,"resultType",void 0),Object(c.a)([Object(y.b)({json:{write:!0}})],x.prototype,"returnGeometry",void 0),Object(c.a)([Object(y.b)({type:Boolean,json:{write:{overridePolicy:function(e){return{enabled:e}}}}})],x.prototype,"returnM",void 0),Object(c.a)([Object(y.b)({type:Boolean,json:{write:{overridePolicy:function(e){return{enabled:e}}}}})],x.prototype,"returnZ",void 0),Object(c.a)([Object(y.b)({type:Number,json:{read:{source:"resultOffset"}}})],x.prototype,"start",void 0),Object(c.a)([Object(h.a)("start"),Object(h.a)("num")],x.prototype,"writeStart",null),Object(c.a)([Object(y.b)({type:String,json:{read:{source:"spatialRel",reader:S.read},write:{target:"spatialRel",writer:S.write}}})],x.prototype,"spatialRelationship",void 0),Object(c.a)([Object(y.b)({type:u.a,json:{write:!0}})],x.prototype,"timeExtent",void 0),Object(c.a)([Object(y.b)({type:g,json:{write:!0}})],x.prototype,"topFilter",void 0),Object(c.a)([Object(y.b)({type:String,json:{read:k.read,write:{writer:k.write,overridePolicy:function(e){return{enabled:e&&this.distance>0}}}}})],x.prototype,"units",void 0),Object(c.a)([Object(y.b)({type:String,json:{write:!0}})],x.prototype,"where",void 0),(x=m=Object(c.a)([Object(j.a)("esri.rest.support.TopFeaturesQuery")],x)).from=Object(f.m)(x);var I=x},721:function(e,t,r){"use strict";r.d(t,"a",(function(){return l}));var n=r(2),i=r(5),a=r(6),o=r(0),s=r(1),c=(r(19),r(14),r(15),r(10)),l=function(e){var t=function(e){Object(i.a)(r,e);var t=Object(a.a)(r);function r(){var e;return Object(n.a)(this,r),(e=t.apply(this,arguments)).customParameters=null,e}return r}(e);return Object(o.a)([Object(s.b)({type:Object,json:{write:{overridePolicy:function(e){return{enabled:!!(e&&Object.keys(e).length>0)}}}}})],t.prototype,"customParameters",void 0),t=Object(o.a)([Object(c.a)("esri.layers.mixins.CustomParametersMixin")],t)}},723:function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var n=r(21),i=r(702);function a(e,t,r){if(r&&r.features&&r.hasZ){var a=Object(i.a)(r.geometryType,t,e.outSpatialReference);if(a){var o,s=Object(n.a)(r.features);try{for(s.s();!(o=s.n()).done;){a(o.value.geometry)}}catch(c){s.e(c)}finally{s.f()}}}}},724:function(e,t,r){"use strict";r.d(t,"a",(function(){return u}));var n=r(2),i=r(4),a=r(5),o=r(6),s=r(0),c=r(1),l=(r(19),r(14),r(15),r(10));var u=function(e){var t=function(e){Object(a.a)(r,e);var t=Object(o.a)(r);function r(){return Object(n.a)(this,r),t.apply(this,arguments)}return Object(i.a)(r,[{key:"apiKey",get:function(){var e;return this._isOverridden("apiKey")?this._get("apiKey"):function(e){return"portalItem"in e}(this)?null==(e=this.portalItem)?void 0:e.apiKey:null},set:function(e){null!=e?this._override("apiKey",e):(this._clearOverride("apiKey"),this.clear("apiKey","user"))}}]),r}(e);return Object(s.a)([Object(c.b)({type:String})],t.prototype,"apiKey",null),t=Object(s.a)([Object(l.a)("esri.layers.mixins.APIKeyMixin")],t)}},725:function(e,t,r){"use strict";r.d(t,"a",(function(){return c})),r.d(t,"b",(function(){return l})),r.d(t,"c",(function(){return p})),r.d(t,"d",(function(){return u}));r(19),r(11);var n=r(166),i=r(98),a=r(143),o=r(136),s=r(703),c=(a.a.fromJSON(s.a),i.a.fromJSON(s.c),n.a.fromJSON(s.b),o.a.fromJSON(s.d));var l=a.a.fromJSON(s.e),u=i.a.fromJSON(s.g),p=n.a.fromJSON(s.f)},727:function(e,t,r){"use strict";r.d(t,"a",(function(){return te}));var n=r(13),i=r(7),a=r.n(i),o=r(12),s=r(29),c=r(19),l=r(30),u=r(685),p=r(667),b=r(2),d=r(4),y=r(83),f=r(15),j=r(674),h=r(54),O=r(68),v=(r(243),r(27)),m=r(21),g={};function w(e){var t,r={async:e.async,isDebug:e.isDebug,locale:e.locale,baseUrl:e.baseUrl,has:Object(n.a)({},e.has),map:Object(n.a)({},e.map),packages:e.packages&&e.packages.concat()||[],paths:Object(n.a)({},e.paths)};return e.hasOwnProperty("async")||(r.async=!0),e.hasOwnProperty("isDebug")||(r.isDebug=!1),e.baseUrl||(r.baseUrl=g.baseUrl),null==(t=g.packages)||t.forEach((function(e){!function(e,t){var r,n=Object(m.a)(e);try{for(n.s();!(r=n.n()).done;)if(r.value.name===t.name)return}catch(i){n.e(i)}finally{n.f()}e.push(t)}(r.packages,e)})),r}var S,k,x=r(37),I=function e(){var t=this;Object(b.a)(this,e);var r=document.createDocumentFragment();["addEventListener","dispatchEvent","removeEventListener"].forEach((function(e){t[e]=function(){return r[e].apply(r,arguments)}}))},E=x.a.MutationObserver||x.a.WebKitMutationObserver,F=function(){var e;if(x.a.process&&x.a.process.nextTick)e=function(e){x.a.process.nextTick(e)};else if(x.a.Promise)e=function(e){x.a.Promise.resolve().then(e)};else if(E){var t=[],r=document.createElement("div");new E((function(){for(;t.length>0;)t.shift()()})).observe(r,{attributes:!0}),e=function(e){t.push(e),r.setAttribute("queueStatus","1")}}return e}(),T=function(){var e=x.a.MessageEvent;try{new e("message",{data:null})}catch(t){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.data,n=t.bubbles,i=void 0!==n&&n,a=t.cancelable,o=void 0!==a&&a,s=document.createEvent("Event");return s.initEvent(e,i,o),s.data=r,s}}return function(t,r){return new e(t,r)}}(),_=function(){function e(){Object(b.a)(this,e),this._dispatcher=new I,this._workerPostMessage({type:j.a.HANDSHAKE})}return Object(d.a)(e,[{key:"terminate",value:function(){}},{key:"onmessage",get:function(){return this._onmessageHandler},set:function(e){this._onmessageHandler&&this.removeEventListener("message",this._onmessageHandler),this._onmessageHandler=e,e&&this.addEventListener("message",e)}},{key:"onmessageerror",get:function(){return this._onmessageerrorHandler},set:function(e){this._onmessageerrorHandler&&this.removeEventListener("messageerror",this._onmessageerrorHandler),this._onmessageerrorHandler=e,e&&this.addEventListener("messageerror",e)}},{key:"onerror",get:function(){return this._onerrorHandler},set:function(e){this._onerrorHandler&&this.removeEventListener("error",this._onerrorHandler),this._onerrorHandler=e,e&&this.addEventListener("error",e)}},{key:"postMessage",value:function(e){var t=this;F((function(){t._workerMessageHandler(T("message",{data:e}))}))}},{key:"dispatchEvent",value:function(e){return this._dispatcher.dispatchEvent(e)}},{key:"addEventListener",value:function(e,t,r){this._dispatcher.addEventListener(e,t,r)}},{key:"removeEventListener",value:function(e,t,r){this._dispatcher.removeEventListener(e,t,r)}},{key:"_workerPostMessage",value:function(e){var t=this;F((function(){t.dispatchEvent(T("message",{data:e}))}))}},{key:"_workerMessageHandler",value:function(){var e=Object(o.a)(a.a.mark((function e(t){var r,n,i,o,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=Object(j.d)(t))||r.type!==j.a.OPEN){e.next=13;break}return n=r.modulePath,i=r.jobId,e.next=5,p.a.loadWorker(n);case 5:if(o=e.sent,e.t0=o,e.t0){e.next=11;break}return e.next=10,import(n);case 10:o=e.sent;case 11:s=p.a.connect(o),this._workerPostMessage({type:j.a.OPENED,jobId:i,data:s});case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),R=r(75),M=r(296),P=f.a.getLogger("esri.core.workers"),C=j.a.HANDSHAKE,N='let globalId=0;const outgoing=new Map,configuration=JSON.parse("{CONFIGURATION}");self.esriConfig=configuration.esriConfig;const workerPath=self.esriConfig.workers.workerPath,HANDSHAKE=0,OPEN=1,OPENED=2,RESPONSE=3,INVOKE=4,ABORT=5;function createAbortError(){const e=new Error("Aborted");return e.name="AbortError",e}function receiveMessage(e){return e&&e.data?"string"==typeof e.data?JSON.parse(e.data):e.data:null}function invokeStaticMessage(e,o,r){const t=r&&r.signal,n=globalId++;return new Promise(((r,i)=>{if(t){if(t.aborted)return i(createAbortError());t.addEventListener("abort",(()=>{outgoing.get(n)&&(outgoing.delete(n),self.postMessage({type:5,jobId:n}),i(createAbortError()))}))}outgoing.set(n,{resolve:r,reject:i}),self.postMessage({type:4,jobId:n,methodName:e,abortable:null!=t,data:o})}))}let workerRevisionChecked=!1;function checkWorkerRevision(e){if(!workerRevisionChecked&&e.kernelInfo){workerRevisionChecked=!0;const{revision:o,buildDate:r,version:t}=configuration.kernelInfo,{revision:n,buildDate:i,version:s}=e.kernelInfo;o!==n&&console.warn(`[esri.core.workers] Version mismatch detected between ArcGIS API for JavaScript and assets:\nAPI version: ${t} [Date: ${r}, Revision: ${o.slice(0,8)}]\nAssets version: ${s} [Date: ${i}, Revision: ${n.slice(0,8)}]`)}}function messageHandler(e){const o=receiveMessage(e);if(!o)return;const r=o.jobId;switch(o.type){case 1:let e;function t(o){const t=e.connect(o);self.postMessage({type:2,jobId:r,data:t},[t])}"function"==typeof define&&define.amd?require([workerPath],(r=>{e=r.default||r,checkWorkerRevision(e),e.loadWorker(o.modulePath).then((e=>e||new Promise((e=>{require([o.modulePath],e)})))).then(t)})):"System"in self&&"function"==typeof System.import?System.import(workerPath).then((r=>(e=r.default,checkWorkerRevision(e),e.loadWorker(o.modulePath)))).then((e=>e||System.import(o.modulePath))).then(t):(self.RemoteClient||importScripts(workerPath),e=self.RemoteClient.default||self.RemoteClient,checkWorkerRevision(e),e.loadWorker(o.modulePath).then(t));break;case 3:if(outgoing.has(r)){const e=outgoing.get(r);outgoing.delete(r),o.error?e.reject(JSON.parse(o.error)):e.resolve(o.data)}}}self.dojoConfig=configuration.loaderConfig,esriConfig.workers.loaderUrl&&(self.importScripts(esriConfig.workers.loaderUrl),"function"==typeof require&&"function"==typeof require.config&&require.config(configuration.loaderConfig)),self.addEventListener("message",messageHandler),self.postMessage({type:0});',D="Failed to create Worker. Fallback to execute module in main thread";function L(){return V.apply(this,arguments)}function V(){return(V=Object(o.a)(a.a.mark((function e(){var t,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Object(c.a)("esri-workers")){e.next=2;break}return e.abrupt("return",A(new _));case 2:if(!S&&!k)try{t=N.replace('"{CONFIGURATION}"',"'".concat(J(),"'")),S=URL.createObjectURL(new Blob([t],{type:"text/javascript"}))}catch(n){k=n||{}}if(S)try{r=new Worker(S,{name:"esri-worker-"+U++})}catch(n){P.warn(D,k),r=new _}else P.warn(D,k),r=new _;return e.abrupt("return",A(r));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A(e){return q.apply(this,arguments)}function q(){return(q=Object(o.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){function r(i){var a=Object(j.d)(i);a&&a.type===C&&(t.removeEventListener("message",r),t.removeEventListener("error",n),e(t))}function n(e){e.preventDefault(),t.removeEventListener("message",r),t.removeEventListener("error",n),P.warn("Failed to create Worker. Fallback to execute module in main thread",e),(t=new _).addEventListener("message",r),t.addEventListener("error",n)}t.addEventListener("message",r),t.addEventListener("error",n)})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function J(){var e;if(null!=O.a.default){var t=Object(n.a)({},O.a);delete t.default,e=JSON.parse(JSON.stringify(t))}else e=JSON.parse(JSON.stringify(O.a));e.assetsPath=Object(v.z)(e.assetsPath),e.request.interceptors=[],e.log.interceptors=[],e.locale=Object(R.b)(),e.has={"csp-restrictions":Object(c.a)("csp-restrictions"),"esri-2d-debug":!1,"esri-2d-update-debug":Object(c.a)("esri-2d-update-debug"),"esri-2d-query-centroid-enabled":Object(c.a)("esri-2d-query-centroid-enabled"),"featurelayer-pbf":Object(c.a)("featurelayer-pbf"),"featurelayer-simplify-thresholds":Object(c.a)("featurelayer-simplify-thresholds"),"featurelayer-simplify-payload-size-factors":Object(c.a)("featurelayer-simplify-payload-size-factors"),"esri-atomics":Object(c.a)("esri-atomics"),"esri-shared-array-buffer":Object(c.a)("esri-shared-array-buffer"),"esri-tiles-debug":Object(c.a)("esri-tiles-debug"),"esri-workers-arraybuffer-transfer":Object(c.a)("esri-workers-arraybuffer-transfer"),"host-webworker":1},e.workers.loaderUrl&&(e.workers.loaderUrl=Object(v.z)(e.workers.loaderUrl)),e.workers.workerPath?e.workers.workerPath=Object(v.z)(e.workers.workerPath):e.workers.workerPath=Object(v.z)(Object(h.a)("esri/core/workers/RemoteClient.js"));var r=O.a.workers.loaderConfig,i=w({baseUrl:null==r?void 0:r.baseUrl,locale:Object(R.b)(),has:Object(n.a)({"csp-restrictions":Object(c.a)("csp-restrictions"),"dojo-test-sniff":0,"host-webworker":1},null==r?void 0:r.has),map:Object(n.a)({},null==r?void 0:r.map),paths:Object(n.a)({},null==r?void 0:r.paths),packages:(null==r?void 0:r.packages)||[]}),a={version:y.d,buildDate:M.a,revision:M.b};return JSON.stringify({esriConfig:e,loaderConfig:i,kernelInfo:a})}var U=0,B=f.a.getLogger("esri.core.workers"),z=j.a.ABORT,G=j.a.INVOKE,H=j.a.OPEN,W=j.a.OPENED,Q=j.a.RESPONSE,K=function(){function e(t,r){Object(b.a)(this,e),this._outJobs=new Map,this._inJobs=new Map,this.worker=t,this.id=r,t.addEventListener("message",this._onMessage.bind(this)),t.addEventListener("error",(function(e){e.preventDefault(),B.error(e)}))}return Object(d.a)(e,[{key:"terminate",value:function(){this.worker.terminate()}},{key:"open",value:function(){var e=Object(o.a)(a.a.mark((function e(t){var r,n,i,o=this,s=arguments;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>1&&void 0!==s[1]?s[1]:{},n=r.signal,i=Object(j.b)(),e.abrupt("return",new Promise((function(e,r){var a={resolve:e,reject:r,abortHandle:Object(l.r)(n,(function(){o._outJobs.delete(i),o._post({type:z,jobId:i})}))};o._outJobs.set(i,a),o._post({type:H,jobId:i,modulePath:t})})));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"_onMessage",value:function(e){var t=Object(j.d)(e);if(t)switch(t.type){case W:this._onOpenedMessage(t);break;case Q:this._onResponseMessage(t);break;case z:this._onAbortMessage(t);break;case G:this._onInvokeMessage(t)}}},{key:"_onAbortMessage",value:function(e){var t=this._inJobs,r=e.jobId,n=t.get(r);n&&(n.controller&&n.controller.abort(),t.delete(r))}},{key:"_onInvokeMessage",value:function(e){var t,r=this,n=e.methodName,i=e.jobId,a=e.data,o=e.abortable?Object(l.d)():null,s=this._inJobs,c=y.e[n];try{if("function"!=typeof c)throw new TypeError("".concat(n," is not a function"));t=c.call(null,a,{signal:o?o.signal:null})}catch(u){return void this._post({type:Q,jobId:i,error:Object(j.e)(u)})}Object(l.p)(t)?(s.set(i,{controller:o,promise:t}),t.then((function(e){s.has(i)&&(s.delete(i),r._post({type:Q,jobId:i},e))}),(function(e){s.has(i)&&(s.delete(i),e||(e={message:"Error encountered at method"+n}),Object(l.m)(e)||r._post({type:Q,jobId:i,error:Object(j.e)(e||{message:"Error encountered at method ".concat(n)})}))}))):this._post({type:Q,jobId:i},t)}},{key:"_onOpenedMessage",value:function(e){var t,r=e.jobId,n=e.data,i=this._outJobs.get(r);i&&(this._outJobs.delete(r),null==(t=i.abortHandle)||t.remove(),i.resolve(n))}},{key:"_onResponseMessage",value:function(e){var t,r=e.jobId,n=e.error,i=e.data,a=this._outJobs.get(r);a&&(this._outJobs.delete(r),null==(t=a.abortHandle)||t.remove(),n?a.reject(s.a.fromJSON(JSON.parse(n))):a.resolve(i))}},{key:"_post",value:function(e,t,r){return Object(j.c)(this.worker,e,t,r)}}],[{key:"create",value:function(){var t=Object(o.a)(a.a.mark((function t(r){var n;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,L();case 2:return n=t.sent,t.abrupt("return",new e(n,r));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}]),e}(),Z=Object(c.a)("esri-workers-debug")?1:Object(c.a)("host-browser")?navigator.hardwareConcurrency-1:0;Z||(Z=Object(c.a)("safari")&&Object(c.a)("mac")||Object(c.a)("trident")?7:2);var $=0,X=[];function Y(e,t){return ee.apply(this,arguments)}function ee(){return(ee=Object(o.a)(a.a.mark((function e(t,r){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new u.a,e.next=3,n.open(t,r);case 3:return e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function te(e){return re.apply(this,arguments)}function re(){return re=Object(o.a)(a.a.mark((function e(t){var r,i,o,u,b,d,y,f,j,h=arguments;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=h.length>1&&void 0!==h[1]?h[1]:{},"string"==typeof t){e.next=3;break}throw new s.a("workers:undefined-module","modulePath is missing");case 3:if(i=r.strategy||"distributed",Object(c.a)("host-webworker")&&!Object(c.a)("esri-workers")&&(i="local"),"local"!==i){e.next=16;break}return e.next=7,p.a.loadWorker(t);case 7:if(o=e.sent,e.t0=o,e.t0){e.next=13;break}return e.next=12,import(t);case 12:o=e.sent;case 13:return Object(l.v)(r.signal),u=r.client||o,e.abrupt("return",Y([p.a.connect(o)],Object(n.a)(Object(n.a)({},r),{},{client:u})));case 16:return e.next=18,ie();case 18:if(Object(l.v)(r.signal),"dedicated"!==i){e.next=28;break}return b=$++%Z,e.t1=Y,e.next=24,X[b].open(t,r);case 24:return e.t2=e.sent,e.t3=[e.t2],e.t4=r,e.abrupt("return",(0,e.t1)(e.t3,e.t4));case 28:if(!(r.maxNumWorkers&&r.maxNumWorkers>0)){e.next=34;break}if(!((d=Math.min(r.maxNumWorkers,Z))<Z)){e.next=34;break}for(y=new Array(d),f=0;f<d;++f)j=$++%Z,y[f]=X[j].open(t,r);return e.abrupt("return",Y(y,r));case 34:return e.abrupt("return",Y(X.map((function(e){return e.open(t,r)})),r));case 35:case"end":return e.stop()}}),e)}))),re.apply(this,arguments)}var ne=null;function ie(){return ae.apply(this,arguments)}function ae(){return(ae=Object(o.a)(a.a.mark((function e(){var t,r,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!ne){e.next=2;break}return e.abrupt("return",ne);case 2:for(Object(l.d)(),t=[],r=function(e){var r=K.create(e).then((function(t){return X[e]=t,t}));t.push(r)},n=0;n<Z;n++)r(n);return e.abrupt("return",ne=Promise.all(t));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},728:function(e,t,r){"use strict";r.d(t,"a",(function(){return l}));var n=r(21),i=r(15),a=r(666),o=r(672),s=r(209),c=i.a.getLogger("esri.layers.support.fieldProperties");function l(){return{fields:{type:[a.a],value:null},fieldsIndex:{readOnly:!0,get:function(){return new o.a(this.fields||[])}},outFields:{type:[String],json:{read:!1},set:function(e){this._userOutFields=e,this.notifyChange("outFields")},get:function(){var e=this._userOutFields;if(!e||!e.length)return null;if(e.includes("*"))return["*"];if(!this.fields)return e;var t,r=Object(n.a)(e);try{for(r.s();!(t=r.n()).done;){var i=t.value;this.fieldsIndex.has(i)||c.error("field-attributes-layer:invalid-field","Invalid field ".concat(i," found in outFields"),{layer:this,outFields:e})}}catch(a){r.e(a)}finally{r.f()}return Object(s.d)(this.fieldsIndex,e)}}}}},729:function(e,t,r){"use strict";r.d(t,"a",(function(){return O}));var n,i=r(2),a=r(4),o=r(5),s=r(6),c=r(0),l=(r(114),r(26)),u=r(18),p=r(1),b=r(14),d=(r(19),r(15),r(10)),y=r(43),f=r(673),j=r(45),h=n=function(e){Object(o.a)(r,e);var t=Object(s.a)(r);function r(e){var n;return Object(i.a)(this,r),(n=t.call(this,e)).dynamicDataSource=void 0,n.gdbVersion=null,n.geometryPrecision=void 0,n.historicMoment=null,n.maxAllowableOffset=void 0,n.objectIds=null,n.orderByFields=null,n.outFields=null,n.outSpatialReference=null,n.relationshipId=void 0,n.start=void 0,n.num=void 0,n.returnGeometry=!1,n.returnM=void 0,n.returnZ=void 0,n.where=null,n}return Object(a.a)(r,[{key:"_writeHistoricMoment",value:function(e,t){t.historicMoment=e&&e.getTime()}},{key:"writeStart",value:function(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10,t.where="1=1"}},{key:"clone",value:function(){return new n(Object(u.a)({dynamicDataSource:this.dynamicDataSource,gdbVersion:this.gdbVersion,geometryPrecision:this.geometryPrecision,historicMoment:this.historicMoment&&new Date(this.historicMoment.getTime()),maxAllowableOffset:this.maxAllowableOffset,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,relationshipId:this.relationshipId,start:this.start,num:this.num,returnGeometry:this.returnGeometry,where:this.where,returnZ:this.returnZ,returnM:this.returnM}))}}]),r}(l.a);Object(c.a)([Object(p.b)({type:f.a,json:{write:!0}})],h.prototype,"dynamicDataSource",void 0),Object(c.a)([Object(p.b)({type:String,json:{write:!0}})],h.prototype,"gdbVersion",void 0),Object(c.a)([Object(p.b)({type:Number,json:{write:!0}})],h.prototype,"geometryPrecision",void 0),Object(c.a)([Object(p.b)({type:Date})],h.prototype,"historicMoment",void 0),Object(c.a)([Object(y.a)("historicMoment")],h.prototype,"_writeHistoricMoment",null),Object(c.a)([Object(p.b)({type:Number,json:{write:!0}})],h.prototype,"maxAllowableOffset",void 0),Object(c.a)([Object(p.b)({type:[Number],json:{write:!0}})],h.prototype,"objectIds",void 0),Object(c.a)([Object(p.b)({type:[String],json:{write:!0}})],h.prototype,"orderByFields",void 0),Object(c.a)([Object(p.b)({type:[String],json:{write:!0}})],h.prototype,"outFields",void 0),Object(c.a)([Object(p.b)({type:j.a,json:{read:{source:"outSR"},write:{target:"outSR"}}})],h.prototype,"outSpatialReference",void 0),Object(c.a)([Object(p.b)({json:{write:!0}})],h.prototype,"relationshipId",void 0),Object(c.a)([Object(p.b)({type:Number,json:{read:{source:"resultOffset"}}})],h.prototype,"start",void 0),Object(c.a)([Object(y.a)("start"),Object(y.a)("num")],h.prototype,"writeStart",null),Object(c.a)([Object(p.b)({type:Number,json:{read:{source:"resultRecordCount"}}})],h.prototype,"num",void 0),Object(c.a)([Object(p.b)({json:{write:!0}})],h.prototype,"returnGeometry",void 0),Object(c.a)([Object(p.b)({type:Boolean,json:{write:{overridePolicy:function(e){return{enabled:e}}}}})],h.prototype,"returnM",void 0),Object(c.a)([Object(p.b)({type:Boolean,json:{write:{overridePolicy:function(e){return{enabled:e}}}}})],h.prototype,"returnZ",void 0),Object(c.a)([Object(p.b)({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],h.prototype,"where",void 0),(h=n=Object(c.a)([Object(d.a)("esri.rest.support.RelationshipQuery")],h)).from=Object(b.m)(h);var O=h},733:function(e,t,r){"use strict";r.d(t,"a",(function(){return v}));var n=r(2),i=r(4),a=r(5),o=r(6),s=r(0),c=r(26),l=r(18),u=r(1),p=(r(14),r(19),r(15),r(57)),b=r(10),d=r(43),y=r(664),f=(r(660),r(661)),j=r(662),h=r(713),O=function(e){Object(a.a)(r,e);var t=Object(o.a)(r);function r(e){var i;return Object(n.a)(this,r),(i=t.call(this,e)).id=null,i.name=null,i.domains=null,i.templates=null,i}return Object(i.a)(r,[{key:"readDomains",value:function(e){var t={};for(var r in e)if(e.hasOwnProperty(r)){var n=e[r];switch(n.type){case"range":t[r]=j.a.fromJSON(n);break;case"codedValue":t[r]=y.a.fromJSON(n);break;case"inherited":t[r]=f.a.fromJSON(n)}}return t}},{key:"writeDomains",value:function(e,t){var r={};for(var n in e)e.hasOwnProperty(n)&&(r[n]=e[n]&&e[n].toJSON());Object(l.c)(r),t.domains=r}},{key:"readTemplates",value:function(e){return e&&e.map((function(e){return new h.a(e)}))}},{key:"writeTemplates",value:function(e,t){t.templates=e&&e.map((function(e){return e.toJSON()}))}}]),r}(c.a);Object(s.a)([Object(u.b)({json:{write:!0}})],O.prototype,"id",void 0),Object(s.a)([Object(u.b)({json:{write:!0}})],O.prototype,"name",void 0),Object(s.a)([Object(u.b)({json:{write:!0}})],O.prototype,"domains",void 0),Object(s.a)([Object(p.a)("domains")],O.prototype,"readDomains",null),Object(s.a)([Object(d.a)("domains")],O.prototype,"writeDomains",null),Object(s.a)([Object(u.b)({json:{write:!0}})],O.prototype,"templates",void 0),Object(s.a)([Object(p.a)("templates")],O.prototype,"readTemplates",null),Object(s.a)([Object(d.a)("templates")],O.prototype,"writeTemplates",null);var v=O=Object(s.a)([Object(b.a)("esri.layers.support.FeatureType")],O)},735:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return ar}));var n=r(21),i=r(7),a=r.n(i),o=r(12),s=r(13),c=r(2),l=r(4),u=r(77),p=r(65),b=r(5),d=r(6),y=r(0),f=r(214),j=(r(700),r(686),r(688),r(689),r(663),r(687)),h=r(701),O=r(715),v=r(691),m=r(82),g=r(332),w=r(52),S=r(29),k=r(183),x=r(19),I=r(42),E=r(15),F=r(11),T=r(677),_=r(66),R=r(30);function M(e,t){return P.apply(this,arguments)}function P(){return(P=Object(o.a)(a.a.mark((function e(t,n){var i,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.e(5).then(r.bind(null,736));case 2:return i=e.sent,o=i.WhereClause,e.abrupt("return",o.create(t,n));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var C,N=r(27),D=r(1),L=r(97),V=r(57),A=r(10),q=r(43),J=r(212),U=r(26),B=r(18),z=r(14),G=C=function(e){Object(b.a)(r,e);var t=Object(d.a)(r);function r(e){var n;return Object(c.a)(this,r),(n=t.call(this,e)).expression=null,n.name=null,n.returnType="boolean",n.title=null,n}return Object(l.a)(r,[{key:"clone",value:function(){return new C({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}}]),r}(U.a);Object(y.a)([Object(D.b)({type:String,json:{write:!0}})],G.prototype,"expression",void 0),Object(y.a)([Object(D.b)({type:String,json:{write:!0}})],G.prototype,"name",void 0),Object(y.a)([Object(D.b)({type:["boolean"],json:{write:!0}})],G.prototype,"returnType",void 0),Object(y.a)([Object(D.b)({type:String,json:{write:!0}})],G.prototype,"title",void 0);var H=G=C=Object(y.a)([Object(A.a)("esri.form.ExpressionInfo")],G),W=function(e){Object(b.a)(r,e);var t=Object(d.a)(r);function r(e){var n;return Object(c.a)(this,r),(n=t.call(this,e)).description=null,n.label=null,n.type=null,n.visibilityExpression=null,n}return r}(U.a);Object(y.a)([Object(D.b)({type:String,json:{write:!0}})],W.prototype,"description",void 0),Object(y.a)([Object(D.b)({type:String,json:{write:!0}})],W.prototype,"label",void 0),Object(y.a)([Object(D.b)()],W.prototype,"type",void 0),Object(y.a)([Object(D.b)({type:String,json:{write:!0}})],W.prototype,"visibilityExpression",void 0);var Q,K=W=Object(y.a)([Object(A.a)("esri.form.elements.Element")],W),Z=Q=function(e){Object(b.a)(r,e);var t=Object(d.a)(r);function r(e){var n;return Object(c.a)(this,r),(n=t.call(this,e)).type=null,n}return Object(l.a)(r,[{key:"clone",value:function(){return new Q({type:this.type})}}]),r}(U.a);Object(y.a)([Object(D.b)({type:["attachment","audio","document","image","signature","video"],json:{write:!0}})],Z.prototype,"type",void 0);var $,X=Z=Q=Object(y.a)([Object(A.a)("esri.form.elements.inputs.AttachmentInput")],Z),Y=$=function(e){Object(b.a)(r,e);var t=Object(d.a)(r);function r(e){var n;return Object(c.a)(this,r),(n=t.call(this,e)).attachmentKeyword=null,n.editable=!0,n.input=null,n.type="attachment",n}return Object(l.a)(r,[{key:"clone",value:function(){return new $({attachmentKeyword:this.attachmentKeyword,description:this.description,editable:this.editable,input:this.input,label:this.label,visibilityExpression:this.visibilityExpression})}}]),r}(K);Object(y.a)([Object(D.b)({type:String,json:{write:!0}})],Y.prototype,"attachmentKeyword",void 0),Object(y.a)([Object(D.b)({type:Boolean,json:{write:!0}})],Y.prototype,"editable",void 0),Object(y.a)([Object(D.b)({type:X,json:{read:{source:"inputType"},write:{target:"inputType"}}})],Y.prototype,"input",void 0),Object(y.a)([Object(D.b)({type:["attachment"],json:{read:!1,write:!0}})],Y.prototype,"type",void 0);var ee=Y=$=Object(y.a)([Object(A.a)("esri.form.elements.AttachmentElement")],Y),te=function(e){Object(b.a)(r,e);var t=Object(d.a)(r);function r(e){var n;return Object(c.a)(this,r),(n=t.call(this,e)).type=null,n}return r}(U.a);Object(y.a)([Object(D.b)()],te.prototype,"type",void 0);var re=te=Object(y.a)([Object(A.a)("esri.form.elements.inputs.Input")],te),ne=function(e){Object(b.a)(r,e);var t=Object(d.a)(r);function r(e){var n;return Object(c.a)(this,r),(n=t.call(this,e)).maxLength=null,n.minLength=0,n}return r}(re);Object(y.a)([Object(D.b)({type:Number,json:{write:!0}})],ne.prototype,"maxLength",void 0),Object(y.a)([Object(D.b)({type:Number,json:{write:!0}})],ne.prototype,"minLength",void 0);var ie,ae=ne=Object(y.a)([Object(A.a)("esri.form.elements.inputs.TextInput")],ne),oe=ie=function(e){Object(b.a)(r,e);var t=Object(d.a)(r);function r(e){var n;return Object(c.a)(this,r),(n=t.call(this,e)).type="barcode-scanner",n}return Object(l.a)(r,[{key:"clone",value:function(){return new ie({maxLength:this.maxLength,minLength:this.minLength})}}]),r}(ae);Object(y.a)([Object(D.b)({type:["barcode-scanner"],json:{read:!1,write:!0}})],oe.prototype,"type",void 0);var se,ce=oe=ie=Object(y.a)([Object(A.a)("esri.form.elements.inputs.BarcodeScannerInput")],oe),le=se=function(e){Object(b.a)(r,e);var t=Object(d.a)(r);function r(e){var n;return Object(c.a)(this,r),(n=t.call(this,e)).noValueOptionLabel=null,n.showNoValueOption=!1,n.type="combo-box",n}return Object(l.a)(r,[{key:"clone",value:function(){return new se({showNoValueOption:this.showNoValueOption,noValueOptionLabel:this.noValueOptionLabel})}}]),r}(re);Object(y.a)([Object(D.b)({type:String,json:{write:!0}})],le.prototype,"noValueOptionLabel",void 0),Object(y.a)([Object(D.b)({type:Boolean,json:{write:!0}})],le.prototype,"showNoValueOption",void 0),Object(y.a)([Object(D.b)({type:["combo-box"],json:{read:!1,write:!0}})],le.prototype,"type",void 0);var ue,pe=le=se=Object(y.a)([Object(A.a)("esri.form.elements.inputs.ComboBoxInput")],le);function be(e){return null!=e?new Date(e):null}function de(e){return e?e.getTime():null}var ye=ue=function(e){Object(b.a)(r,e);var t=Object(d.a)(r);function r(e){var n;return Object(c.a)(this,r),(n=t.call(this,e)).includeTime=!1,n.max=null,n.min=null,n.type="datetime-picker",n}return Object(l.a)(r,[{key:"readMax",value:function(e,t){return be(t.max)}},{key:"writeMax",value:function(e,t){t.max=de(e)}},{key:"readMin",value:function(e,t){return be(t.min)}},{key:"writeMin",value:function(e,t){t.min=de(e)}},{key:"clone",value:function(){return new ue({includeTime:this.includeTime,max:this.max,min:this.min,type:this.type})}}]),r}(re);Object(y.a)([Object(D.b)({type:Boolean,json:{write:!0}})],ye.prototype,"includeTime",void 0),Object(y.a)([Object(D.b)({type:Date,json:{type:Number,write:!0}})],ye.prototype,"max",void 0),Object(y.a)([Object(V.a)("max")],ye.prototype,"readMax",null),Object(y.a)([Object(q.a)("max")],ye.prototype,"writeMax",null),Object(y.a)([Object(D.b)({type:Date,json:{type:Number,write:!0}})],ye.prototype,"min",void 0),Object(y.a)([Object(V.a)("min")],ye.prototype,"readMin",null),Object(y.a)([Object(q.a)("min")],ye.prototype,"writeMin",null),Object(y.a)([Object(D.b)({type:["datetime-picker"],json:{read:!1,write:!0}})],ye.prototype,"type",void 0);var fe,je=ye=ue=Object(y.a)([Object(A.a)("esri.form.elements.inputs.DateTimePickerInput")],ye),he=fe=function(e){Object(b.a)(r,e);var t=Object(d.a)(r);function r(e){var n;return Object(c.a)(this,r),(n=t.call(this,e)).noValueOptionLabel=null,n.showNoValueOption=!1,n.type="radio-buttons",n}return Object(l.a)(r,[{key:"clone",value:function(){return new fe({noValueOptionLabel:this.noValueOptionLabel,showNoValueOption:this.showNoValueOption})}}]),r}(re);Object(y.a)([Object(D.b)({type:String,json:{write:!0}})],he.prototype,"noValueOptionLabel",void 0),Object(y.a)([Object(D.b)({type:Boolean,json:{write:!0}})],he.prototype,"showNoValueOption",void 0),Object(y.a)([Object(D.b)({type:["radio-buttons"],json:{read:!1,write:!0}})],he.prototype,"type",void 0);var Oe,ve=he=fe=Object(y.a)([Object(A.a)("esri.form.elements.inputs.RadioButtonsInput")],he),me=Oe=function(e){Object(b.a)(r,e);var t=Object(d.a)(r);function r(e){var n;return Object(c.a)(this,r),(n=t.call(this,e)).offValue=null,n.onValue=null,n.type="switch",n}return Object(l.a)(r,[{key:"clone",value:function(){return new Oe({offValue:this.offValue,onValue:this.onValue})}}]),r}(re);Object(y.a)([Object(D.b)({type:[String,Number],json:{write:!0}})],me.prototype,"offValue",void 0),Object(y.a)([Object(D.b)({type:[String,Number],json:{write:!0}})],me.prototype,"onValue",void 0),Object(y.a)([Object(D.b)({type:["switch"],json:{read:!1,write:!0}})],me.prototype,"type",void 0);var ge,we=me=Oe=Object(y.a)([Object(A.a)("esri.form.elements.inputs.SwitchInput")],me),Se=ge=function(e){Object(b.a)(r,e);var t=Object(d.a)(r);function r(e){var n;return Object(c.a)(this,r),(n=t.call(this,e)).type="text-area",n}return Object(l.a)(r,[{key:"clone",value:function(){return new ge({maxLength:this.maxLength,minLength:this.minLength})}}]),r}(ae);Object(y.a)([Object(D.b)({type:["text-area"],json:{read:!1,write:!0}})],Se.prototype,"type",void 0);var ke,xe=Se=ge=Object(y.a)([Object(A.a)("esri.form.elements.inputs.TextAreaInput")],Se),Ie=ke=function(e){Object(b.a)(r,e);var t=Object(d.a)(r);function r(e){var n;return Object(c.a)(this,r),(n=t.call(this,e)).type="text-box",n}return Object(l.a)(r,[{key:"clone",value:function(){return new ke({maxLength:this.maxLength,minLength:this.minLength})}}]),r}(ae);Object(y.a)([Object(D.b)({type:["text-box"],json:{read:!1,write:!0}})],Ie.prototype,"type",void 0);var Ee,Fe={base:re,key:"type",typeMap:{"barcode-scanner":ce,"combo-box":pe,"datetime-picker":je,"radio-buttons":ve,switch:we,"text-area":xe,"text-box":Ie=ke=Object(y.a)([Object(A.a)("esri.form.elements.inputs.TextBoxInput")],Ie)}},Te=r(679),_e=Ee=function(e){Object(b.a)(r,e);var t=Object(d.a)(r);function r(e){var n;return Object(c.a)(this,r),(n=t.call(this,e)).domain=null,n.editable=!0,n.fieldName=null,n.hint=null,n.input=null,n.requiredExpression=null,n.type="field",n}return Object(l.a)(r,[{key:"clone",value:function(){return new Ee({description:this.description,domain:this.domain,editable:this.editable,fieldName:this.fieldName,hint:this.hint,input:this.input,label:this.label,requiredExpression:this.requiredExpression,visibilityExpression:this.visibilityExpression})}}]),r}(K);Object(y.a)([Object(D.b)({types:Te.b,json:{read:{reader:Te.a},write:!0}})],_e.prototype,"domain",void 0),Object(y.a)([Object(D.b)({type:Boolean,json:{write:!0}})],_e.prototype,"editable",void 0),Object(y.a)([Object(D.b)({type:String,json:{write:!0}})],_e.prototype,"fieldName",void 0),Object(y.a)([Object(D.b)({type:String,json:{write:!0}})],_e.prototype,"hint",void 0),Object(y.a)([Object(D.b)({types:Fe,json:{read:{source:"inputType"},write:{target:"inputType"}}})],_e.prototype,"input",void 0),Object(y.a)([Object(D.b)({type:String,json:{write:!0}})],_e.prototype,"requiredExpression",void 0),Object(y.a)([Object(D.b)({type:String,json:{read:!1,write:!0}})],_e.prototype,"type",void 0);var Re,Me=_e=Ee=Object(y.a)([Object(A.a)("esri.form.elements.FieldElement")],_e),Pe=r(339),Ce=Re=function(e){Object(b.a)(r,e);var t=Object(d.a)(r);function r(e){var n;return Object(c.a)(this,r),(n=t.call(this,e)).displayCount=null,n.displayType="list",n.editable=!0,n.orderByFields=null,n.relationshipId=null,n.type="relationship",n}return Object(l.a)(r,[{key:"clone",value:function(){return new Re({description:this.description,displayCount:this.displayCount,displayType:this.displayType,editable:this.editable,label:this.label,orderByFields:Object(B.a)(this.orderByFields),relationshipId:this.relationshipId,visibilityExpression:this.visibilityExpression})}}]),r}(K);Object(y.a)([Object(D.b)({type:Number,json:{write:!0}})],Ce.prototype,"displayCount",void 0),Object(y.a)([Object(D.b)({type:["list"],json:{write:!0}})],Ce.prototype,"displayType",void 0),Object(y.a)([Object(D.b)({type:Boolean,json:{write:!0}})],Ce.prototype,"editable",void 0),Object(y.a)([Object(D.b)({type:[Pe.a],json:{write:!0}})],Ce.prototype,"orderByFields",void 0),Object(y.a)([Object(D.b)({type:Number,json:{write:!0}})],Ce.prototype,"relationshipId",void 0),Object(y.a)([Object(D.b)({type:["relationship"],json:{read:!1,write:!0}})],Ce.prototype,"type",void 0);var Ne,De=Ce=Re=Object(y.a)([Object(A.a)("esri.form.elements.RelationshipElement")],Ce);function Le(e){return{typesWithGroup:{base:K,key:"type",typeMap:{attachment:ee,field:Me,group:e,relationship:De}},typesWithoutGroup:{base:K,key:"type",typeMap:{attachment:ee,field:Me,relationship:De}}}}function Ve(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!e)return null;var n=r?t.typesWithGroup.typeMap:t.typesWithoutGroup.typeMap;return e.filter((function(e){return n[e.type]})).map((function(e){return n[e.type].fromJSON(e)}))}function Ae(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!e)return null;var n=r?t.typesWithGroup.typeMap:t.typesWithoutGroup.typeMap;return e.filter((function(e){return n[e.type]})).map((function(e){return e.toJSON()}))}function qe(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return e?e.map((function(e){return Object(z.k)(r?t.typesWithGroup:t.typesWithoutGroup,e)})):null}var Je=Ne=function(e){Object(b.a)(r,e);var t=Object(d.a)(r);function r(e){var n;return Object(c.a)(this,r),(n=t.call(this,e)).elements=null,n.initialState="expanded",n.type="group",n}return Object(l.a)(r,[{key:"castElements",value:function(e){return qe(e,Be,!1)}},{key:"readElements",value:function(e,t){return Ve(t.formElements,Be,!1)}},{key:"writeElements",value:function(e,t){t.formElements=Ae(e,Be,!1)}},{key:"clone",value:function(){return new Ne({description:this.description,elements:Object(B.a)(this.elements),initialState:this.initialState,label:this.label,visibilityExpression:this.visibilityExpression})}}]),r}(K);Object(y.a)([Object(D.b)({json:{write:!0}})],Je.prototype,"elements",void 0),Object(y.a)([Object(L.a)("elements")],Je.prototype,"castElements",null),Object(y.a)([Object(V.a)("elements",["formElements"])],Je.prototype,"readElements",null),Object(y.a)([Object(q.a)("elements")],Je.prototype,"writeElements",null),Object(y.a)([Object(D.b)({type:["collapsed","expanded"],json:{write:!0}})],Je.prototype,"initialState",void 0),Object(y.a)([Object(D.b)({type:String,json:{read:!1,write:!0}})],Je.prototype,"type",void 0);var Ue,Be=Le(Je=Ne=Object(y.a)([Object(A.a)("esri.form.elements.GroupElement")],Je)),ze=Le(Je),Ge=Ue=function(e){Object(b.a)(r,e);var t=Object(d.a)(r);function r(e){var n;return Object(c.a)(this,r),(n=t.call(this,e)).description=null,n.elements=null,n.expressionInfos=null,n.title=null,n}return Object(l.a)(r,[{key:"castElements",value:function(e){return qe(e,ze)}},{key:"readElements",value:function(e,t){return Ve(t.formElements,ze)}},{key:"writeElements",value:function(e,t){t.formElements=Ae(e,ze)}},{key:"clone",value:function(){return new Ue({description:this.description,expressionInfos:Object(B.a)(this.expressionInfos),elements:Object(B.a)(this.elements),title:this.title})}}]),r}(U.a);Object(y.a)([Object(D.b)({type:String,json:{write:!0}})],Ge.prototype,"description",void 0),Object(y.a)([Object(D.b)({json:{write:!0}})],Ge.prototype,"elements",void 0),Object(y.a)([Object(L.a)("elements")],Ge.prototype,"castElements",null),Object(y.a)([Object(V.a)("elements",["formElements"])],Ge.prototype,"readElements",null),Object(y.a)([Object(q.a)("elements")],Ge.prototype,"writeElements",null),Object(y.a)([Object(D.b)({type:[H],json:{write:!0}})],Ge.prototype,"expressionInfos",void 0),Object(y.a)([Object(D.b)({type:String,json:{write:!0}})],Ge.prototype,"title",void 0);var He=Ge=Ue=Object(y.a)([Object(A.a)("esri.form.FormTemplate")],Ge),We=r(58),Qe=r(742),Ke=r(45),Ze=r(682),$e=(r(114),r(210)),Xe=r(142),Ye=r(242),et=r(727);var tt,rt=r(723),nt=r(702),it=r(668),at=r(108),ot=r(236),st=0,ct=E.a.getLogger("esri.layers.graphics.sources.MemorySource"),lt=function(e){Object(b.a)(r,e);var t=Object(d.a)(r);function r(e){var n;return Object(c.a)(this,r),(n=t.call(this,e))._idToClientGraphic=null,n.type="memory",n}return Object(l.a)(r,[{key:"load",value:function(e){var t=Object(F.j)(e)?e.signal:null;return this.addResolvingPromise(this._startWorker(t)),Promise.resolve(this)}},{key:"destroy",value:function(){var e;null==(e=this._connection)||e.close(),this._connection=null}},{key:"workerGeometryType",get:function(){var e,t=null==(e=this.layer)?void 0:e.geometryType;return t?this._geometryTypeRequiresClientGraphicMapping(t)?"polygon":t:null}},{key:"applyEdits",value:function(e){var t=this;return this.load().then((function(){return t._applyEdits(e)}))}},{key:"openPorts",value:function(){var e=this;return this.load().then((function(){return e._connection.openPorts()}))}},{key:"queryFeatures",value:function(){var e=Object(o.a)(a.a.mark((function e(t){var r,i,o,s,c,l,u,p,b,d=arguments;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:{},e.next=3,this.load(r);case 3:return e.next=5,this._connection.invoke("queryFeatures",t?t.toJSON():null,r);case 5:if(i=e.sent,Object(rt.a)(t,this.layer.spatialReference,i),o=it.default.fromJSON(i),this._requiresClientGraphicMapping()){e.next=10;break}return e.abrupt("return",o);case 10:s=this.layer.objectIdField,c=Object(n.a)(o.features);try{for(c.s();!(l=c.n()).done;)u=l.value,p=u.attributes[s],(b=this._idToClientGraphic.get(p))&&(u.geometry=b.geometry)}catch(a){c.e(a)}finally{c.f()}return e.abrupt("return",(o.geometryType=this.layer.geometryType,o));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queryFeaturesJSON",value:function(){var e=Object(o.a)(a.a.mark((function e(t){var r,n,i=arguments;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=i.length>1&&void 0!==i[1]?i[1]:{},!this._requiresClientGraphicMapping()){e.next=3;break}throw new S.a("query-features-json:unsupported","Cannot query in JSON format for client only geometry types (mesh and extent)");case 3:return e.next=5,this.load(r);case 5:return e.next=7,this._connection.invoke("queryFeatures",t?t.toJSON():null,r);case 7:return n=e.sent,e.abrupt("return",(Object(rt.a)(t,this.layer.spatialReference,n),n));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queryFeatureCount",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.load(r).then((function(){return t._connection.invoke("queryFeatureCount",e?e.toJSON():null,r)}))}},{key:"queryObjectIds",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.load(r).then((function(){return t._connection.invoke("queryObjectIds",e?e.toJSON():null,r)}))}},{key:"queryExtent",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.load(r).then((function(){return t._connection.invoke("queryExtent",e?e.toJSON():null,r)})).then((function(e){return{count:e.count,extent:We.a.fromJSON(e.extent)}}))}},{key:"querySnapping",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.load(r).then((function(){return t._connection.invoke("querySnapping",e,r)}))}},{key:"_applyEdits",value:function(){var e=Object(o.a)(a.a.mark((function e(t){var r,i,o,s,c,l,u,p,b,d,y,f,j,h,O,v,m;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._connection){e.next=2;break}throw new S.a("feature-layer-source:edit-failure","Memory source not loaded");case 2:return r=this.layer.objectIdField,i=null,o=[],s=[],e.next=7,Promise.all([this._prepareClientMapping(t.addFeatures,null),this._prepareClientMapping(t.updateFeatures,null)]);case 7:if(c=function(e){return"objectId"in e&&null!=e.objectId?e.objectId:"attributes"in e&&null!=e.attributes[r]?e.attributes[r]:null},t.addFeatures&&(i=this._prepareAddFeatures(t.addFeatures)),t.deleteFeatures){l=Object(n.a)(t.deleteFeatures);try{for(l.s();!(u=l.n()).done;)p=u.value,null!=(b=c(p))&&o.push(b)}catch(a){l.e(a)}finally{l.f()}}if(d=t.updateFeatures&&this._idToClientGraphic?new Map:null,t.updateFeatures){y=Object(n.a)(t.updateFeatures);try{for(y.s();!(f=y.n()).done;)j=f.value,s.push(this._serializeFeature(j)),d&&null!=(h=c(j))&&d.set(h,j)}catch(a){y.e(a)}finally{y.f()}}return Object(nt.b)(i?i.features:null,s,this.layer.spatialReference),e.next=14,this._connection.invoke("applyEdits",{adds:i?i.features:[],updates:s,deletes:o});case 14:return O=e.sent,v=O.fullExtent,m=O.featureEditResults,e.abrupt("return",(this.fullExtent=v,i&&i.finish(m.uidToObjectId),this._updateClientGraphicIds(d,m),this._createEditsResult(m)));case 18:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_prepareClientMapping",value:function(){var e=Object(o.a)(a.a.mark((function e(t,r){var i,o,s,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("mesh"===this.layerOrSourceGeometryType&&!Object(F.i)(t)){e.next=2;break}return e.abrupt("return");case 2:i=[],o=Object(n.a)(t);try{for(o.s();!(s=o.n()).done;)c=s.value.geometry,!Object(F.j)(c)||"mesh"!==c.type||c.hasExtent||c.loaded||i.push(c.load({signal:r}))}catch(a){o.e(a)}finally{o.f()}if(e.t0=i.length,!e.t0){e.next=9;break}return e.next=9,Promise.all(i);case 9:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"_updateClientGraphicIds",value:function(e,t){if(this._idToClientGraphic){if(e){var r,i=Object(n.a)(t.updateResults);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a.success){var o=e.get(a.objectId);null!=o&&this._addIdToClientGraphic(o)}}}catch(u){i.e(u)}finally{i.f()}}var s,c=Object(n.a)(t.deleteResults);try{for(c.s();!(s=c.n()).done;){var l=s.value;l.success&&this._idToClientGraphic.delete(l.objectId)}}catch(u){c.e(u)}finally{c.f()}}}},{key:"_createEditsResult",value:function(e){return{addFeatureResults:e.addResults?e.addResults.map(this._createFeatureEditResult,this):[],updateFeatureResults:e.updateResults?e.updateResults.map(this._createFeatureEditResult,this):[],deleteFeatureResults:e.deleteResults?e.deleteResults.map(this._createFeatureEditResult,this):[],addAttachmentResults:[],updateAttachmentResults:[],deleteAttachmentResults:[]}}},{key:"_createFeatureEditResult",value:function(e){var t=!0===e.success?null:e.error||{code:void 0,description:void 0};return{objectId:e.objectId,globalId:e.globalId,error:t?new S.a("feature-layer-source:edit-failure",t.description,{code:t.code}):null}}},{key:"_prepareAddFeatures",value:function(e){for(var t=new Map,r=new Array(e.length),n=null,i=0;i<e.length;i++){var a=e[i],o=this._serializeFeature(a);!n&&Object(F.j)(a.geometry)&&(n=a.geometry.type),r[i]=o,t.set("".concat(o.uid),a)}var s=this;return{features:r,inferredGeometryType:n,finish:function(e){var r=s.sourceJSON.objectIdField;for(var n in e){var i=e[n],a=t.get(n);a&&(a.attributes||(a.attributes={}),-1===i?delete a.attributes[r]:a.attributes[r]=i,s._addIdToClientGraphic(a))}}}}},{key:"_addIdToClientGraphic",value:function(e){if(this._idToClientGraphic){var t=this.sourceJSON.objectIdField,r=e.attributes&&e.attributes[t];null!=r&&this._idToClientGraphic.set(r,e)}}},{key:"layerOrSourceGeometryType",get:function(){var e,t,r;return null!=(e=null==(t=this.layer)?void 0:t.geometryType)?e:null==(r=this.sourceJSON)?void 0:r.geometryType}},{key:"_requiresClientGraphicMapping",value:function(){return this._geometryTypeRequiresClientGraphicMapping(this.layerOrSourceGeometryType)}},{key:"_geometryRequiresClientGraphicMapping",value:function(e){return this._geometryTypeRequiresClientGraphicMapping(e.type)}},{key:"_geometryTypeRequiresClientGraphicMapping",value:function(e){return"mesh"===e||"multipatch"===e||"extent"===e}},{key:"_serializeFeature",value:function(e){var t=e.attributes,r=this._geometryForSerialization(e),n=(st++).toString();return r?{uid:n,geometry:r.toJSON(),attributes:t}:{uid:n,attributes:t}}},{key:"_geometryForSerialization",value:function(e){var t=e.geometry;return Object(F.i)(t)?null:this._geometryRequiresClientGraphicMapping(t)?t.extent?at.a.fromExtent(t.extent):null:t}},{key:"_startWorker",value:function(){var e=Object(o.a)(a.a.mark((function e(t){var r,i,o,s,c,l,u,p,b,d,y,f,j,h,O;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(et.a)("MemorySourceWorker",{strategy:Object(x.a)("feature-layers-workers")?"dedicated":"local",signal:t});case 2:return this._connection=e.sent,r=this.layer,i=r.fields,o=r.spatialReference,s=r.objectIdField,c=r.hasM,l=r.hasZ,u=r.timeInfo,p="defaults"===this.layer.originOf("spatialReference"),e.next=6,this._prepareClientMapping(this.items,t);case 6:return b=this._prepareAddFeatures(this.items),this.on("before-changes",(function(e){ct.error("Source modifications will not propagate after layer has been loaded. Please use .applyEdits() instead"),e.preventDefault()})),d={features:b.features,fields:i&&i.map((function(e){return e.toJSON()})),geometryType:ot.c.toJSON(this.workerGeometryType),hasM:"mesh"!==this.layerOrSourceGeometryType&&c,hasZ:"mesh"===this.layerOrSourceGeometryType||l,objectIdField:s,spatialReference:p?null:o&&o.toJSON(),timeInfo:u?u.toJSON():null},e.next=11,this._connection.invoke("load",d,{signal:t});case 11:y=e.sent,f=Object(n.a)(y.warnings);try{for(f.s();!(j=f.n()).done;)h=j.value,ct.warn(h.message,{layer:this.layer,warning:h})}catch(a){f.e(a)}finally{f.f()}y.featureErrors.length&&ct.warn("Encountered ".concat(y.featureErrors.length," validation errors while loading features"),y.featureErrors),O=y.layerDefinition,this._geometryTypeRequiresClientGraphicMapping(b.inferredGeometryType)&&(O.geometryType=ot.c.toJSON(b.inferredGeometryType)),this.sourceJSON=O,this._requiresClientGraphicMapping()&&(this._idToClientGraphic=new Map),b.finish(y.assignedObjectIds);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(Xe.a.LoadableMixin(Object(Ye.b)(w.a)));Object(y.a)([(tt={Type:$e.a,ensureType:Object(z.m)($e.a)},function(e,t){e[t]=tt})],lt.prototype,"itemType",void 0),Object(y.a)([Object(D.b)()],lt.prototype,"type",void 0),Object(y.a)([Object(D.b)({constructOnly:!0})],lt.prototype,"layer",void 0),Object(y.a)([Object(D.b)({readOnly:!0})],lt.prototype,"workerGeometryType",null),Object(y.a)([Object(D.b)()],lt.prototype,"sourceJSON",void 0);var ut,pt=lt=Object(y.a)([Object(A.a)("esri.layers.graphics.sources.MemorySource")],lt),bt=r(724),dt=r(710),yt=r(730),ft=r(721),jt=r(709),ht=r(756),Ot=r(699),vt=r(697),mt=r(716),gt=r(719),wt=r(676),St=r(671),kt=ut=function(e){Object(b.a)(r,e);var t=Object(d.a)(r);function r(e){return Object(c.a)(this,r),t.call(this,e)}return Object(l.a)(r,[{key:"clone",value:function(){var e=this.name,t=this.fields,r=this.isAscending,n=this.isUnique,i=this.description;return new ut({name:e,fields:t,isAscending:r,isUnique:n,description:i})}}]),r}(U.a);Object(y.a)([Object(D.b)({constructOnly:!0})],kt.prototype,"name",void 0),Object(y.a)([Object(D.b)({constructOnly:!0})],kt.prototype,"fields",void 0),Object(y.a)([Object(D.b)({constructOnly:!0})],kt.prototype,"isAscending",void 0),Object(y.a)([Object(D.b)({constructOnly:!0})],kt.prototype,"isUnique",void 0),Object(y.a)([Object(D.b)({constructOnly:!0})],kt.prototype,"description",void 0);kt=ut=Object(y.a)([Object(A.a)("esri.layers.support.FeatureIndex")],kt);var xt=r(746),It=r(713),Et=r(733),Ft=r(728),Tt=r(209),_t=r(135),Rt=function(e){Object(b.a)(r,e);var t=Object(d.a)(r);function r(e){var n;return Object(c.a)(this,r),(n=t.call(this,e)).shapeAreaField=null,n.shapeLengthField=null,n.units=null,n}return r}(U.a);Object(y.a)([Object(D.b)({type:String,json:{read:{source:"shapeAreaFieldName"}}})],Rt.prototype,"shapeAreaField",void 0),Object(y.a)([Object(D.b)({type:String,json:{read:{source:"shapeLengthFieldName"}}})],Rt.prototype,"shapeLengthField",void 0),Object(y.a)([Object(D.b)({type:String,json:{read:function(e){return _t.a.read(e)||_t.j.read(e)}}})],Rt.prototype,"units",void 0);var Mt=Rt=Object(y.a)([Object(A.a)("esri.layers.support.GeometryFieldsInfo")],Rt),Pt=r(675),Ct=r(740),Nt=r(745),Dt=new I.a({esriRelCardinalityOneToOne:"one-to-one",esriRelCardinalityOneToMany:"one-to-many",esriRelCardinalityManyToMany:"many-to-many"}),Lt=new I.a({esriRelRoleOrigin:"origin",esriRelRoleDestination:"destination"}),Vt=function(e){Object(b.a)(r,e);var t=Object(d.a)(r);function r(e){var n;return Object(c.a)(this,r),(n=t.call(this,e)).cardinality=null,n.composite=null,n.id=null,n.keyField=null,n.keyFieldInRelationshipTable=null,n.name=null,n.relatedTableId=null,n.relationshipTableId=null,n.role=null,n}return r}(U.a);Object(y.a)([Object(D.b)({json:{read:Dt.read,write:Dt.write}})],Vt.prototype,"cardinality",void 0),Object(y.a)([Object(D.b)({json:{read:!0,write:!0}})],Vt.prototype,"composite",void 0),Object(y.a)([Object(D.b)({json:{read:!0,write:!0}})],Vt.prototype,"id",void 0),Object(y.a)([Object(D.b)({json:{read:!0,write:!0}})],Vt.prototype,"keyField",void 0),Object(y.a)([Object(D.b)({json:{read:!0,write:!0}})],Vt.prototype,"keyFieldInRelationshipTable",void 0),Object(y.a)([Object(D.b)({json:{read:!0,write:!0}})],Vt.prototype,"name",void 0),Object(y.a)([Object(D.b)({json:{read:!0,write:!0}})],Vt.prototype,"relatedTableId",void 0),Object(y.a)([Object(D.b)({json:{read:!0,write:!0}})],Vt.prototype,"relationshipTableId",void 0),Object(y.a)([Object(D.b)({json:{read:Lt.read,write:Lt.write}})],Vt.prototype,"role",void 0);var At=Vt=Object(y.a)([Object(A.a)("esri.layers.support.Relationship")],Vt),qt=r(698),Jt=r(673),Ut=r(744),Bt=r(747),zt=r(670),Gt=r(729),Ht=r(720),Wt=r(755),Qt=new I.a({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch"}),Kt={name:"supportsName",size:"supportsSize",contentType:"supportsContentType",keywords:"supportsKeywords",exifInfo:"supportsExifInfo"},Zt="FeatureLayer",$t=E.a.getLogger("esri.layers.FeatureLayer");function Xt(e){return e&&e instanceof w.a}function Yt(e,t,r){return!!(e&&e.hasOwnProperty(t)?e[t]:r)}function er(e,t,r){return e&&e.hasOwnProperty(t)?e[t]:r}var tr=Object(Ft.a)();function rr(e,t,r){var n=!(null==r||!r.writeLayerSchema);return{enabled:n,ignoreOrigin:n}}var nr=function(e){Object(b.a)(i,e);var t=Object(d.a)(i);function i(){var e;Object(c.a)(this,i);for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return(e=t.call.apply(t,[this].concat(n)))._handles=new k.a,e.capabilities=null,e.charts=null,e.copyright=null,e.datesInUnknownTimezone=!1,e.displayField=null,e.definitionExpression=null,e.dynamicDataSource=null,e.editFieldsInfo=null,e.editingInfo=null,e.elevationInfo=null,e.featureReduction=null,e.fields=null,e.fieldsIndex=null,e.floorInfo=null,e.formTemplate=null,e.fullExtent=null,e.gdbVersion=null,e.geometryFieldsInfo=null,e.geometryType=null,e.hasM=void 0,e.hasZ=void 0,e.heightModelInfo=null,e.historicMoment=null,e.infoFor3D=null,e.isTable=!1,e.labelsVisible=!0,e.labelingInfo=null,e.layerId=void 0,e.legendEnabled=!0,e.minScale=0,e.maxScale=0,e.globalIdField=null,e.objectIdField=null,e.outFields=null,e.path=null,e.popupEnabled=!0,e.popupTemplate=null,e.relationships=null,e.sourceJSON=null,e.returnM=void 0,e.returnZ=void 0,e.screenSizePerspectiveEnabled=!0,e.serviceDefinitionExpression=null,e.spatialReference=Ke.a.WGS84,e.subtypeCode=null,e.templates=null,e.timeInfo=null,e.title=null,e.sublayerTitleMode="item-title",e.trackIdField=null,e.type="feature",e.typeIdField=null,e.types=null,e.indexes=new(w.a.ofType(kt)),e.userIsAdmin=!1,e.version=void 0,e.visible=!0,e}return Object(l.a)(i,[{key:"destroy",value:function(){var e;null==(e=this.source)||e.destroy(),this._handles=Object(F.d)(this._handles)}},{key:"normalizeCtorArgs",value:function(e,t){return"string"==typeof e?Object(s.a)({url:e},t):e}},{key:"load",value:function(e){var t=this,r=Object(F.j)(e)?e.signal:null;if(!(this.portalItem&&this.portalItem.loaded&&this.source)){var n=this.loadFromPortal({supportedTypes:["Feature Service","Feature Collection"]},e).catch(R.u).then(Object(o.a)(a.a.mark((function e(){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.url||null!=t.layerId||!/FeatureServer|MapServer\/*$/i.test(t.url)){e.next=5;break}return e.next=3,t._fetchFirstLayerId(r);case 3:null!=(n=e.sent)&&(t.layerId=n);case 5:if(t.url||t._hasMemorySource()){e.next=7;break}throw new S.a("feature-layer:missing-url-or-source","Feature layer must be created with either a url or a source");case 7:return e.t0=t,e.next=10,t.createGraphicsSource(r);case 10:return e.t1=e.sent,e.abrupt("return",e.t0._initLayerProperties.call(e.t0,e.t1));case 12:case"end":return e.stop()}}),e)})))).then((function(){return t.finishLoadEditablePortalLayer(e)}));return this.addResolvingPromise(n),Promise.resolve(this)}this.addResolvingPromise(this.createGraphicsSource(r).then((function(e){return t._initLayerProperties(e)})))}},{key:"readCapabilities",value:function(e,t){return t=t.layerDefinition||t,{attachment:this._readAttachmentCapabilities(t.attachmentProperties),data:this._readDataCapabilities(t),metadata:this._readMetadataCapabilities(t),operations:this._readOperationsCapabilities(t.capabilities||e,t),query:this._readQueryCapabilities(t),queryRelated:this._readQueryRelatedCapabilities(t),editing:this._readEditingCapabilities(t)}}},{key:"createQueryVersion",get:function(){return this.commitProperty("definitionExpression"),this.commitProperty("dynamicDataSource"),this.commitProperty("timeExtent"),this.commitProperty("timeOffset"),this.commitProperty("geometryType"),this.commitProperty("gdbVersion"),this.commitProperty("historicMoment"),this.commitProperty("returnZ"),this.commitProperty("capabilities"),this.commitProperty("returnM"),(this._get("createQueryVersion")||0)+1}},{key:"editingEnabled",get:function(){return!(this.loaded&&!this.capabilities.operations.supportsEditing)&&(this._isOverridden("editingEnabled")?this._get("editingEnabled"):this._hasMemorySource()||this.userHasEditingPrivileges)},set:function(e){null!=e?this._override("editingEnabled",e):this._clearOverride("editingEnabled")}},{key:"readEditingEnabled",value:function(e,t){return this._readEditingEnabled(t,!1)}},{key:"readEditingEnabledFromWebMap",value:function(e,t,r){return this._readEditingEnabled(t,!0,r)}},{key:"writeEditingEnabled",value:function(e,t){this._writeEditingEnabled(e,t,!1)}},{key:"writeEditingEnabledToWebMap",value:function(e,t,r,n){this._writeEditingEnabled(e,t,!0,n)}},{key:"readEditingInfo",value:function(e,t){var r=t.editingInfo;return r?{lastEditDate:null!=r.lastEditDate?new Date(r.lastEditDate):null}:null}},{key:"readFeatureReduction",value:function(e,t){return Object(xt.b)(e,t)}},{key:"writeWebSceneFeatureReduction",value:function(e,t,r,n){Object(xt.d)(e,t,"layerDefinition.featureReduction",n)}},{key:"readIsTable",value:function(e,t){return"Table"===(t=t&&t.layerDefinition||t).type||!t.geometryType}},{key:"writeIsTable",value:function(e,t,r,n){null!=n&&n.writeLayerSchema&&Object(_.c)(r,e?"Table":"Feature Layer",t)}},{key:"readMinScale",value:function(e,t){return t.effectiveMinScale||e||0}},{key:"readMaxScale",value:function(e,t){return t.effectiveMaxScale||e||0}},{key:"readGlobalIdFieldFromService",value:function(e,t){if((t=t.layerDefinition||t).globalIdField)return t.globalIdField;if(t.fields){var r,i=Object(n.a)(t.fields);try{for(i.s();!(r=i.n()).done;){var a=r.value;if("esriFieldTypeGlobalID"===a.type)return a.name}}catch(o){i.e(o)}finally{i.f()}}}},{key:"readObjectIdFieldFromService",value:function(e,t){if((t=t.layerDefinition||t).objectIdField)return t.objectIdField;if(t.fields){var r,i=Object(n.a)(t.fields);try{for(i.s();!(r=i.n()).done;){var a=r.value;if("esriFieldTypeOID"===a.type)return a.name}}catch(o){i.e(o)}finally{i.f()}}}},{key:"parsedUrl",get:function(){var e=this.url?Object(N.J)(this.url):null;return null!=e&&(null!=this.dynamicDataSource?e.path=Object(N.y)(e.path,"dynamicLayer"):null!=this.layerId&&(e.path=Object(N.y)(e.path,this.layerId.toString()))),e}},{key:"defaultPopupTemplate",get:function(){return this.createPopupTemplate()}},{key:"renderer",set:function(e){Object(Tt.e)(e,this.fieldsIndex),this._set("renderer",e)}},{key:"readRenderer",value:function(e,t,r){var n=(t=t.layerDefinition||t).drawingInfo&&t.drawingInfo.renderer||void 0;if(n){var i=Object(O.b)(n,t,r)||void 0;return i||$t.error("Failed to create renderer",{rendererDefinition:t.drawingInfo.renderer,layer:this,context:r}),i}if(t.defaultSymbol)return t.types&&t.types.length?new h.a({defaultSymbol:ir(t.defaultSymbol,t,r),field:t.typeIdField,uniqueValueInfos:t.types.map((function(e){return{id:e.id,symbol:ir(e.symbol,e,r)}}))}):new j.a({symbol:ir(t.defaultSymbol,t,r)})}},{key:"source",set:function(e){var t=this._get("source");t!==e&&(Xt(t)&&this._resetMemorySource(t),Xt(e)&&this._initMemorySource(e),this._set("source",e))}},{key:"castSource",value:function(e){return e?Array.isArray(e)||e instanceof w.a?new pt({layer:this,items:e}):e:null}},{key:"readSource",value:function(e,t){var r=it.default.fromJSON(t.featureSet);return new pt({layer:this,items:r&&r.features||[]})}},{key:"readServiceDefinitionExpression",value:function(e,t){return t.definitionQuery||t.definitionExpression}},{key:"readTemplates",value:function(e,t){var r=t.editFieldsInfo,n=r&&r.creatorField,i=r&&r.editorField;return e=e&&e.map((function(e){return It.a.fromJSON(e)})),this._fixTemplates(e,n),this._fixTemplates(e,i),e}},{key:"readTitle",value:function(e,t){var r=t.layerDefinition&&t.layerDefinition.name||t.name,n=t.title||t.layerDefinition&&t.layerDefinition.title;if(r){var i=this.portalItem&&this.portalItem.title;if("item-title"===this.sublayerTitleMode)return this.url?Object(wt.i)(this.url,r):r;var a=r;if(!a&&this.url){var o=Object(wt.e)(this.url);Object(F.j)(o)&&(a=o.title)}if(!a)return;return"item-title-and-service-name"===this.sublayerTitleMode&&i&&i!==a&&(a=i+" - "+a),Object(wt.a)(a)}if("item-title"===this.sublayerTitleMode&&n)return n}},{key:"readTitleFromWebMap",value:function(e,t){return t.title||t.layerDefinition&&t.layerDefinition.name}},{key:"readTypeIdField",value:function(e,t){var r=(t=t.layerDefinition||t).typeIdField;if(r&&t.fields){r=r.toLowerCase();var n=t.fields.find((function(e){return e.name.toLowerCase()===r}));n&&(r=n.name)}return r}},{key:"readTypes",value:function(e,t){var r=this;e=(t=t.layerDefinition||t).types;var n=t.editFieldsInfo,i=n&&n.creatorField,a=n&&n.editorField;return e&&e.map((function(e){return e=Et.a.fromJSON(e),r._fixTemplates(e.templates,i),r._fixTemplates(e.templates,a),e}))}},{key:"url",set:function(e){var t=Object(wt.h)({layer:this,url:e,nonStandardUrlAllowed:!0,logger:$t});this._set("url",t.url),null!=t.layerId&&this._set("layerId",t.layerId)}},{key:"writeUrl",value:function(e,t,r,n){Object(wt.j)(this,e,null,t,n)}},{key:"readVersion",value:function(e,t){return t.currentVersion?t.currentVersion:t.hasOwnProperty("capabilities")||t.hasOwnProperty("drawingInfo")||t.hasOwnProperty("hasAttachments")||t.hasOwnProperty("htmlPopupType")||t.hasOwnProperty("relationships")||t.hasOwnProperty("timeInfo")||t.hasOwnProperty("typeIdField")||t.hasOwnProperty("types")?10:9.3}},{key:"readVisible",value:function(e,t){return t.layerDefinition&&null!=t.layerDefinition.defaultVisibility?!!t.layerDefinition.defaultVisibility:null!=t.visibility?!!t.visibility:void 0}},{key:"addAttachment",value:function(e,t){var r=this;return this.load().then((function(){return r._checkAttachmentSupport(e)})).then((function(){if(!("addAttachment"in r.source))throw new S.a(Zt,"Layer source does not support addAttachment capability");return r.source.addAttachment(e,t)}))}},{key:"updateAttachment",value:function(e,t,r){var n=this;return this.load().then((function(){return n._checkAttachmentSupport(e)})).then((function(){if(!("updateAttachment"in n.source))throw new S.a(Zt,"Layer source does not support updateAttachment capability");return n.source.updateAttachment(e,t,r)}))}},{key:"applyEdits",value:function(){var e=Object(o.a)(a.a.mark((function e(t,n){var i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.e(28).then(r.bind(null,1091));case 2:return i=e.sent,e.next=5,this.load();case 5:return e.abrupt("return",i.applyEdits(this,this.source,t,n));case 6:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"on",value:function(e,t){return Object(u.a)(Object(p.a)(i.prototype),"on",this).call(this,e,t)}},{key:"createPopupTemplate",value:function(e){return Object(Wt.a)(this,e)}},{key:"createGraphicsSource",value:function(){var e=Object(o.a)(a.a.mark((function e(t){var n,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._hasMemorySource()){e.next=2;break}return e.abrupt("return",this.source.load({signal:t}));case 2:return e.next=4,Object(R.y)(Promise.all([r.e(6),r.e(24),r.e(73)]).then(r.bind(null,1092)),t);case 4:return n=e.sent,i=n.default,e.abrupt("return",new i({layer:this}).load({signal:t}));case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createQuery",value:function(){var e=new zt.a,t=this.get("capabilities.data");e.dynamicDataSource=this.dynamicDataSource,e.gdbVersion=this.gdbVersion,e.historicMoment=this.historicMoment,e.returnGeometry=!0,t&&(t.supportsZ&&null!=this.returnZ&&(e.returnZ=this.returnZ),t.supportsM&&null!=this.returnM&&(e.returnM=this.returnM)),e.outFields=["*"],e.where=this.definitionExpression||"1=1";var r=this.timeOffset,n=this.timeExtent;return e.timeExtent=null!=r&&null!=n?n.offset(-r.value,r.unit):n||null,e.multipatchOption="multipatch"===this.geometryType?"xyFootprint":null,e}},{key:"deleteAttachments",value:function(e,t){var r=this;return this.load().then((function(){return r._checkAttachmentSupport(e)})).then((function(){if(!("deleteAttachments"in r.source))throw new S.a(Zt,"Layer source does not support deleteAttachments capability");return r.source.deleteAttachments(e,t)}))}},{key:"fetchRecomputedExtents",value:function(e){var t=this;return this.load({signal:null==e?void 0:e.signal}).then((function(){if(t.source.fetchRecomputedExtents)return t.source.fetchRecomputedExtents(e);throw new S.a(Zt,"Layer source does not support fetchUpdates capability")}))}},{key:"getFeatureType",value:function(e){var t=this.typeIdField,r=this.types;if(!t||!e)return null;var n=e.attributes?e.attributes[t]:void 0;if(null==n)return null;var i=null;return r.some((function(e){var t=e.id;return null!=t&&(t.toString()===n.toString()&&(i=e),!!i)})),i}},{key:"getFieldDomain",value:function(e,t){var r=t&&t.feature,n=this.getFeatureType(r);if(n){var i=n.domains&&n.domains[e];if(i&&"inherited"!==i.type)return i}return this._getLayerDomain(e)}},{key:"getField",value:function(e){return this.fieldsIndex.get(e)}},{key:"queryAttachments",value:function(e,t){var r=this;return e=Bt.a.from(e),this.load().then((function(){if(!r.get("capabilities.data.supportsAttachment"))throw new S.a(Zt,"this layer doesn't support attachments");var t=e,n=t.attachmentTypes,i=t.objectIds,a=t.globalIds,o=t.num,s=t.size,c=t.start,l=t.where;if(!r.get("capabilities.operations.supportsQueryAttachments")){var u=i&&i.length>1,p=n&&n.length,b=a&&a.length,d=s&&s.length;if(u||p||b||d||o||c||l)throw new S.a(Zt,"when 'supportsQueryAttachments' is false, only objectIds of length 1 are supported",e)}if(!(i&&i.length||l))throw new S.a(Zt,"'objectIds' or 'where' are required to perform attachment query",e);if(!("queryAttachments"in r.source))throw new S.a(Zt,"Layer source does not support queryAttachments capability",e);return r.source.queryAttachments(e)}))}},{key:"queryFeatures",value:function(e,t){var r=this;return this.load().then((function(){return r.source.queryFeatures(zt.a.from(e)||r.createQuery(),t)})).then((function(e){if(null!=e&&e.features){var t,i=Object(n.a)(e.features);try{for(i.s();!(t=i.n()).done;){var a=t.value;a.layer=a.sourceLayer=r}}catch(o){i.e(o)}finally{i.f()}}return e}))}},{key:"queryObjectIds",value:function(e,t){var r=this;return this.load().then((function(){if(r.source.queryObjectIds)return r.source.queryObjectIds(zt.a.from(e)||r.createQuery(),t);throw new S.a(Zt,"Layer source does not support queryObjectIds capability")}))}},{key:"queryFeatureCount",value:function(e,t){var r=this;return this.load().then((function(){if(r.source.queryFeatureCount)return r.source.queryFeatureCount(zt.a.from(e)||r.createQuery(),t);throw new S.a(Zt,"Layer source does not support queryFeatureCount capability")}))}},{key:"queryExtent",value:function(e,t){var r=this;return this.load().then((function(){if(r.source.queryExtent)return r.source.queryExtent(zt.a.from(e)||r.createQuery(),t);throw new S.a(Zt,"Layer source does not support queryExtent capability")}))}},{key:"queryRelatedFeatures",value:function(e,t){var r=this;return this.load().then((function(){if("queryRelatedFeatures"in r.source)return r.source.queryRelatedFeatures(Gt.a.from(e),t);throw new S.a(Zt,"Layer source does not support queryRelatedFeatures capability")}))}},{key:"queryRelatedFeaturesCount",value:function(e,t){var r=this;return this.load().then((function(){if("queryRelatedFeaturesCount"in r.source)return r.source.queryRelatedFeaturesCount(Gt.a.from(e),t);throw new S.a(Zt,"Layer source does not support queryRelatedFeaturesCount capability")}))}},{key:"queryTopFeatures",value:function(e,t){var r=this;return this.load().then((function(){if("queryTopFeatures"in r.source&&r.get("capabilities.query.supportsTopFeaturesQuery"))return r.source.queryTopFeatures(Ht.a.from(e),t).then((function(e){if(null!=e&&e.features){var t,i=Object(n.a)(e.features);try{for(i.s();!(t=i.n()).done;){var a=t.value;a.layer=a.sourceLayer=r}}catch(o){i.e(o)}finally{i.f()}}return e}));throw new S.a(Zt,"Layer source does not support queryTopFeatures capability")}))}},{key:"queryTopObjectIds",value:function(e,t){var r=this;return this.load().then((function(){if("queryTopObjectIds"in r.source&&r.get("capabilities.query.supportsTopFeaturesQuery"))return r.source.queryTopObjectIds(Ht.a.from(e),t);throw new S.a(Zt,"Layer source does not support queryTopObjectIds capability")}))}},{key:"queryTopFeaturesExtent",value:function(e,t){var r=this;return this.load().then((function(){if("queryTopExtents"in r.source&&r.get("capabilities.query.supportsTopFeaturesQuery"))return r.source.queryTopExtents(Ht.a.from(e),t);throw new S.a(Zt,"Layer source does not support queryTopExtents capability")}))}},{key:"queryTopFeatureCount",value:function(e,t){var r=this;return this.load().then((function(){if("queryTopCount"in r.source&&r.get("capabilities.query.supportsTopFeaturesQuery"))return r.source.queryTopCount(Ht.a.from(e),t);throw new S.a(Zt,"Layer source does not support queryFeatureCount capability")}))}},{key:"read",value:function(e,t){var r=e.featureCollection;if(r){var n=r.layers;n&&1===n.length&&(Object(u.a)(Object(p.a)(i.prototype),"read",this).call(this,n[0],t),null!=r.showLegend&&Object(u.a)(Object(p.a)(i.prototype),"read",this).call(this,{showLegend:r.showLegend},t))}Object(u.a)(Object(p.a)(i.prototype),"read",this).call(this,e,t),t&&"service"===t.origin&&this.revert(["objectIdField","fields","timeInfo","spatialReference"],"service")}},{key:"write",value:function(e,t){var r,n,a=(t=Object(s.a)(Object(s.a)({},t),{},{writeLayerSchema:null!=(r=null==(n=t)?void 0:n.writeLayerSchema)?r:this._hasMemorySource()})).origin,o=t.layerContainerType,c=t.messages;if(this.isTable){if("web-scene"===a||"web-map"===a&&"tables"!==o)return c&&c.push(new S.a("layer:unsupported","Layer (".concat(this.title,", ").concat(this.id,") of type '").concat(this.declaredClass,"' using a Table source cannot be written to web scenes and web maps"),{layer:this})),null;if(this._hasMemorySource())return c&&c.push(new S.a("layer:unsupported","Layer (".concat(this.title,", ").concat(this.id,") of type '").concat(this.declaredClass,"' using an in-memory Table source cannot be written to web scenes and web maps"),{layer:this})),null}else if(this.loaded&&"web-map"===a&&"tables"===o)return c&&c.push(new S.a("layer:unsupported","Layer (".concat(this.title,", ").concat(this.id,") of type '").concat(this.declaredClass,"' using a non-table source cannot be written to tables in web maps"),{layer:this})),null;return Object(u.a)(Object(p.a)(i.prototype),"write",this).call(this,e,t)}},{key:"_readEditingEnabled",value:function(e,t,r){var n,i=null==(n=e.layerDefinition)?void 0:n.capabilities;return i?this._hasEditingCapability(i):(i=e.capabilities,t&&"web-map"===(null==r?void 0:r.origin)&&!this._hasMemorySource()&&i?this._hasEditingCapability(i):void 0)}},{key:"_hasEditingCapability",value:function(e){return e.toLowerCase().split(",").map((function(e){return e.trim()})).includes("editing")}},{key:"_writeEditingEnabled",value:function(e,t,r,n){if(!e){var i,a,o=null!=(i=this.capabilities)&&null!=(a=i.operations)&&a.supportsSync?"Query,Sync":"Query";Object(_.c)("layerDefinition.capabilities",o,t),!r||null!=n&&n.writeLayerSchema||(t.capabilities=o)}}},{key:"_checkAttachmentSupport",value:function(e){var t=e.attributes,r=this.objectIdField;return this.get("capabilities.data.supportsAttachment")?e?t?t[r]?void 0:Promise.reject(new S.a(Zt,"feature is missing the identifying attribute ".concat(r))):Promise.reject(new S.a(Zt,"'attributes' are required on a feature to query attachments")):Promise.reject(new S.a(Zt,"A feature is required to add/delete/update attachments")):Promise.reject(new S.a(Zt,"this layer doesn't support attachments"))}},{key:"_getLayerDomain",value:function(e){var t=this.fieldsIndex.get(e);return t?t.domain:null}},{key:"_fetchFirstLayerId",value:function(e){return Object(m.default)(this.url,{query:Object(s.a)(Object(s.a)({f:"json"},this.customParameters),{},{token:this.apiKey}),responseType:"json",signal:e}).then((function(e){var t=e.data;if(t)return Array.isArray(t.layers)&&t.layers.length>0?t.layers[0].id:Array.isArray(t.tables)&&t.tables.length>0?t.tables[0].id:void 0}))}},{key:"_initLayerProperties",value:function(){var e=Object(o.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(this._set("source",t),t.sourceJSON&&(this.sourceJSON=t.sourceJSON,this.read(t.sourceJSON,{origin:"service",url:this.parsedUrl})),this._verifySource(),this._verifyFields(),Object(Tt.e)(this.renderer,this.fieldsIndex),Object(Tt.f)(this.timeInfo,this.fieldsIndex),Object(Ut.a)(this,{origin:"service"})));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"hasDataChanged",value:function(){var e=Object(o.a)(a.a.mark((function e(){var t,r,n,i,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==(t=this.source)||!t.refresh){e.next=13;break}return e.prev=1,e.next=4,null==(r=this.source)?void 0:r.refresh();case 4:if(n=e.sent,i=n.hasUpdates,o=n.updates,Object(F.j)(o)&&(this.sourceJSON=Object(s.a)(Object(s.a)({},this.sourceJSON),o),this.read(o,{origin:"service",url:this.parsedUrl})),!i){e.next=9;break}return e.abrupt("return",!0);case 9:e.next=13;break;case 11:e.prev=11,e.t0=e.catch(1);case 13:if(!this.definitionExpression){e.next=22;break}return e.prev=14,e.next=17,M(this.definitionExpression,this.fieldsIndex);case 17:return e.abrupt("return",e.sent.hasDateFunctions);case 20:e.prev=20,e.t1=e.catch(14);case 22:return e.abrupt("return",!1);case 23:case"end":return e.stop()}}),e,this,[[1,11],[14,20]])})));return function(){return e.apply(this,arguments)}}()},{key:"_verifyFields",value:function(){var e=this.parsedUrl&&this.parsedUrl.path||"undefined";this.objectIdField||console.log("FeatureLayer: 'objectIdField' property is not defined (url: "+e+")"),this.isTable||this._hasMemorySource()||-1!==e.search(/\/FeatureServer\//i)||this.fields&&this.fields.some((function(e){return"geometry"===e.type}))||console.log("FeatureLayer: unable to find field of type 'geometry' in the layer 'fields' list. If you are using a map service layer, features will not have geometry (url: "+e+")")}},{key:"_fixTemplates",value:function(e,t){e&&e.forEach((function(e){var r=e.prototype&&e.prototype.attributes;r&&t&&delete r[t]}))}},{key:"_verifySource",value:function(){if(this._hasMemorySource()){if(this.url)throw new S.a("feature-layer:mixed-source-and-url","FeatureLayer cannot be created with both an in-memory source and a url")}else if(!this.url)throw new S.a("feature-layer:source-or-url-required","FeatureLayer requires either a url, a valid portal item or a source")}},{key:"_initMemorySource",value:function(e){var t=this;e.forEach((function(e){e.layer=t,e.sourceLayer=t})),this._handles.add([e.on("after-add",(function(e){e.item.layer=t,e.item.sourceLayer=t})),e.on("after-remove",(function(e){e.item.layer=null,e.item.sourceLayer=null}))],"fl-source")}},{key:"_resetMemorySource",value:function(e){e.forEach((function(e){e.layer=null,e.sourceLayer=null})),this._handles.remove("fl-source")}},{key:"_hasMemorySource",value:function(){return!(this.url||!this.source)}},{key:"_readAttachmentCapabilities",value:function(e){var t={supportsName:!1,supportsSize:!1,supportsContentType:!1,supportsKeywords:!1,supportsExifInfo:!1};return e&&Array.isArray(e)&&e.forEach((function(e){var r=Kt[e.name];r&&(t[r]=!!e.isEnabled)})),t}},{key:"_readDataCapabilities",value:function(e){return{isVersioned:Yt(e,"isDataVersioned",!1),supportsAttachment:Yt(e,"hasAttachments",!1),supportsM:Yt(e,"hasM",!1),supportsZ:Yt(e,"hasZ",!1)}}},{key:"_readMetadataCapabilities",value:function(e){return{supportsAdvancedFieldProperties:Yt(e,"supportsFieldDescriptionProperty",!1)}}},{key:"_readOperationsCapabilities",value:function(e,t){var r=e?e.toLowerCase().split(",").map((function(e){return e.trim()})):[],n=r.includes("editing")&&!t.datesInUnknownTimezone,i=n&&r.includes("create"),a=n&&r.includes("delete"),o=n&&r.includes("update"),s=r.includes("changetracking");return n&&!(i||a||o)&&(i=a=o=!0),{supportsCalculate:Yt(t,"supportsCalculate",!1),supportsTruncate:Yt(t,"supportsTruncate",!1),supportsValidateSql:Yt(t,"supportsValidateSql",!1),supportsAdd:i,supportsDelete:a,supportsEditing:n,supportsChangeTracking:s,supportsQuery:r.includes("query"),supportsQueryAttachments:Yt(t.advancedQueryCapabilities,"supportsQueryAttachments",!1),supportsResizeAttachments:Yt(t,"supportsAttachmentsResizing",!1),supportsSync:r.includes("sync"),supportsUpdate:o,supportsExceedsLimitStatistics:Yt(t,"supportsExceedsLimitStatistics",!1)}}},{key:"_readQueryCapabilities",value:function(e){var t,r=e.advancedQueryCapabilities,n=e.ownershipBasedAccessControlForFeatures,i=e.archivingInfo,a=null==(t=this.url)?void 0:t.includes("MapServer"),o=!Object(x.a)("mapserver-pbf-enabled")&&a&&this.version<10.81,s=(e.supportedQueryFormats||"").split(",").reduce((function(e,t){var r=t.toLowerCase().trim();return r&&e.add(r),e}),new Set);return{supportsStatistics:Yt(r,"supportsStatistics",e.supportsStatistics),supportsPercentileStatistics:Yt(r,"supportsPercentileStatistics",!1),supportsCentroid:Yt(r,"supportsReturningGeometryCentroid",!1),supportsDistance:Yt(r,"supportsQueryWithDistance",!1),supportsDistinct:Yt(r,"supportsDistinct",e.supportsAdvancedQueries),supportsExtent:Yt(r,"supportsReturningQueryExtent",!1),supportsGeometryProperties:Yt(r,"supportsReturningGeometryProperties",!1),supportsHavingClause:Yt(r,"supportsHavingClause",!1),supportsOrderBy:Yt(r,"supportsOrderBy",e.supportsAdvancedQueries),supportsPagination:Yt(r,"supportsPagination",!1),supportsQuantization:Yt(e,"supportsCoordinatesQuantization",!1),supportsQuantizationEditMode:Yt(e,"supportsQuantizationEditMode",!1),supportsQueryGeometry:Yt(e,"supportsReturningQueryGeometry",!1),supportsResultType:Yt(r,"supportsQueryWithResultType",!1),supportsMaxRecordCountFactor:Yt(r,"supportsMaxRecordCountFactor",!1),supportsSqlExpression:Yt(r,"supportsSqlExpression",!1),supportsStandardizedQueriesOnly:Yt(e,"useStandardizedQueries",!1),supportsTopFeaturesQuery:Yt(r,"supportsTopFeaturesQuery",!1),supportsQueryByOthers:Yt(n,"allowOthersToQuery",!0),supportsHistoricMoment:Yt(i,"supportsQueryWithHistoricMoment",!1),supportsFormatPBF:!o&&s.has("pbf"),supportsDisjointSpatialRelationship:Yt(r,"supportsDisjointSpatialRel",!1),supportsCacheHint:Yt(r,"supportsQueryWithCacheHint",!1),maxRecordCountFactor:er(e,"maxRecordCountFactor",void 0),maxRecordCount:er(e,"maxRecordCount",void 0),standardMaxRecordCount:er(e,"standardMaxRecordCount",void 0),tileMaxRecordCount:er(e,"tileMaxRecordCount",void 0)}}},{key:"_readQueryRelatedCapabilities",value:function(e){var t=e.advancedQueryCapabilities,r=Yt(t,"supportsAdvancedQueryRelated",!1);return{supportsPagination:Yt(t,"supportsQueryRelatedPagination",!1),supportsCount:r,supportsOrderBy:r}}},{key:"_readEditingCapabilities",value:function(e){var t=e.ownershipBasedAccessControlForFeatures;return{supportsGeometryUpdate:Yt(e,"allowGeometryUpdates",!0),supportsGlobalId:Yt(e,"supportsApplyEditsWithGlobalIds",!1),supportsReturnServiceEditsInSourceSpatialReference:Yt(e,"supportsReturnServiceEditsInSourceSR",!1),supportsRollbackOnFailure:Yt(e,"supportsRollbackOnFailureParameter",!1),supportsUpdateWithoutM:Yt(e,"allowUpdateWithoutMValues",!1),supportsUploadWithItemId:Yt(e,"supportsAttachmentsByUploadId",!1),supportsDeleteByAnonymous:Yt(t,"allowAnonymousToDelete",!0),supportsDeleteByOthers:Yt(t,"allowOthersToDelete",!0),supportsUpdateByAnonymous:Yt(t,"allowAnonymousToUpdate",!0),supportsUpdateByOthers:Yt(t,"allowOthersToUpdate",!0)}}}]),i}(Object(yt.a)(Object(ht.a)(Object(gt.a)(Object(mt.a)(Object(vt.a)(Object(dt.a)(Object(jt.a)(Object(Ot.a)(Object(T.a)(Object(ft.a)(Object(bt.a)(Ze.a))))))))))));Object(y.a)([Object(D.b)({readOnly:!0,json:{read:!1}})],nr.prototype,"capabilities",void 0),Object(y.a)([Object(V.a)("service","capabilities",["advancedQueryCapabilities","allowGeometryUpdates","allowUpdateWithoutMValues","archivingInfo","capabilities","datesInUnknownTimezone","hasAttachments","hasM","hasZ","maxRecordCount","maxRecordCountFactor","ownershipBasedAccessControlForFeatures","standardMaxRecordCount","supportedQueryFormats","supportsAdvancedQueries","supportsApplyEditsWithGlobalIds","supportsAttachmentsByUploadId","supportsAttachmentsResizing","supportsCalculate","supportsCoordinatesQuantization","supportsExceedsLimitStatistics","supportsFieldDescriptionProperty","supportsQuantizationEditMode","supportsRollbackOnFailureParameter","supportsStatistics","supportsTruncate","supportsValidateSql","tileMaxRecordCount","useStandardizedQueries"])],nr.prototype,"readCapabilities",null),Object(y.a)([Object(D.b)({json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],nr.prototype,"charts",void 0),Object(y.a)([Object(D.b)({readOnly:!0})],nr.prototype,"createQueryVersion",null),Object(y.a)([Object(D.b)({type:String,json:{read:{source:"layerDefinition.copyrightText"},origins:{service:{read:{source:"copyrightText"}}}}})],nr.prototype,"copyright",void 0),Object(y.a)([Object(D.b)({type:Boolean})],nr.prototype,"datesInUnknownTimezone",void 0),Object(y.a)([Object(D.b)({type:String,json:{read:{source:"layerDefinition.displayField"},origins:{service:{read:{source:"displayField"}}}}})],nr.prototype,"displayField",void 0),Object(y.a)([Object(D.b)({type:String,json:{origins:{service:{read:!1,write:!1}},name:"layerDefinition.definitionExpression",write:{enabled:!0,allowNull:!0}}})],nr.prototype,"definitionExpression",void 0),Object(y.a)([Object(D.b)({types:g.e,readOnly:!0})],nr.prototype,"defaultSymbol",void 0),Object(y.a)([Object(D.b)({type:Jt.a})],nr.prototype,"dynamicDataSource",void 0),Object(y.a)([Object(D.b)({readOnly:!0})],nr.prototype,"editFieldsInfo",void 0),Object(y.a)([Object(D.b)({type:Boolean})],nr.prototype,"editingEnabled",null),Object(y.a)([Object(V.a)(["portal-item","web-scene"],"editingEnabled",["layerDefinition.capabilities"])],nr.prototype,"readEditingEnabled",null),Object(y.a)([Object(V.a)("web-map","editingEnabled",["capabilities","layerDefinition.capabilities"])],nr.prototype,"readEditingEnabledFromWebMap",null),Object(y.a)([Object(q.a)(["portal-item","web-scene"],"editingEnabled",{"layerDefinition.capabilities":{type:String}})],nr.prototype,"writeEditingEnabled",null),Object(y.a)([Object(q.a)("web-map","editingEnabled",{capabilities:{type:String},"layerDefinition.capabilities":{type:String}})],nr.prototype,"writeEditingEnabledToWebMap",null),Object(y.a)([Object(D.b)({readOnly:!0})],nr.prototype,"editingInfo",void 0),Object(y.a)([Object(V.a)("editingInfo")],nr.prototype,"readEditingInfo",null),Object(y.a)([Object(D.b)(St.b)],nr.prototype,"elevationInfo",void 0),Object(y.a)([Object(D.b)(xt.a)],nr.prototype,"featureReduction",void 0),Object(y.a)([Object(V.a)("featureReduction",["layerDefinition.featureReduction"])],nr.prototype,"readFeatureReduction",null),Object(y.a)([Object(q.a)("web-scene","featureReduction",{"layerDefinition.featureReduction":{types:xt.c}})],nr.prototype,"writeWebSceneFeatureReduction",null),Object(y.a)([Object(D.b)(Object(s.a)(Object(s.a)({},tr.fields),{},{json:{read:{source:"layerDefinition.fields"},origins:{service:{read:!0},"web-map":{write:{target:"layerDefinition.fields",overridePolicy:rr}}}}}))],nr.prototype,"fields",void 0),Object(y.a)([Object(D.b)(tr.fieldsIndex)],nr.prototype,"fieldsIndex",void 0),Object(y.a)([Object(D.b)({type:Nt.a,json:{read:{source:"layerDefinition.floorInfo"},write:{target:"layerDefinition.floorInfo"}}})],nr.prototype,"floorInfo",void 0),Object(y.a)([Object(D.b)({type:He,json:{name:"formInfo",write:!0,origins:{"web-scene":{read:!1,write:!1}}}})],nr.prototype,"formTemplate",void 0),Object(y.a)([Object(D.b)({type:We.a,json:{origins:{service:{read:{source:"extent"}}},read:{source:"layerDefinition.extent"}}})],nr.prototype,"fullExtent",void 0),Object(y.a)([Object(D.b)()],nr.prototype,"gdbVersion",void 0),Object(y.a)([Object(D.b)({readOnly:!0,type:Mt,json:{read:{source:"geometryProperties"}}})],nr.prototype,"geometryFieldsInfo",void 0),Object(y.a)([Object(D.b)({type:["point","polygon","polyline","multipoint","multipatch","mesh"],json:{origins:{service:{read:Qt.read},"web-map":{write:{target:"layerDefinition.geometryType",overridePolicy:rr,writer:function(e,t,r){var n=e?Qt.toJSON(e):null;n&&Object(_.c)(r,n,t)}}}},read:{source:"layerDefinition.geometryType",reader:Qt.read}}})],nr.prototype,"geometryType",void 0),Object(y.a)([Object(D.b)({type:Boolean,json:{origins:{service:{read:!0}},read:{source:"layerDefinition.hasM"}}})],nr.prototype,"hasM",void 0),Object(y.a)([Object(D.b)({type:Boolean,json:{origins:{service:{read:!0}},read:{source:"layerDefinition.hasZ"}}})],nr.prototype,"hasZ",void 0),Object(y.a)([Object(D.b)({readOnly:!0,type:Qe.a})],nr.prototype,"heightModelInfo",void 0),Object(y.a)([Object(D.b)({type:Date})],nr.prototype,"historicMoment",void 0),Object(y.a)([Object(D.b)(St.c)],nr.prototype,"id",void 0),Object(y.a)([Object(D.b)({readOnly:!0,json:{origins:{service:{read:!0}},read:!1}})],nr.prototype,"infoFor3D",void 0),Object(y.a)([Object(D.b)({readOnly:!0,json:{origins:{"web-map":{write:{target:"layerDefinition.type"}}}}})],nr.prototype,"isTable",void 0),Object(y.a)([Object(V.a)("service","isTable",["type","geometryType"]),Object(V.a)("isTable",["layerDefinition.type","layerDefinition.geometryType"])],nr.prototype,"readIsTable",null),Object(y.a)([Object(q.a)("web-map","isTable")],nr.prototype,"writeIsTable",null),Object(y.a)([Object(D.b)(St.d)],nr.prototype,"labelsVisible",void 0),Object(y.a)([Object(D.b)({type:[Pt.a],json:{origins:{service:{read:{source:"drawingInfo.labelingInfo",reader:Ct.a},write:{target:"drawingInfo.labelingInfo",enabled:!1}}},read:{source:"layerDefinition.drawingInfo.labelingInfo",reader:Ct.a},write:{target:"layerDefinition.drawingInfo.labelingInfo"}}})],nr.prototype,"labelingInfo",void 0),Object(y.a)([Object(D.b)(St.i)],nr.prototype,"opacity",void 0),Object(y.a)([Object(D.b)({type:Number,json:{origins:{service:{read:{source:"id"}}},read:!1}})],nr.prototype,"layerId",void 0),Object(y.a)([Object(D.b)(St.e)],nr.prototype,"legendEnabled",void 0),Object(y.a)([Object(D.b)({type:["show","hide"]})],nr.prototype,"listMode",void 0),Object(y.a)([Object(D.b)(St.g)],nr.prototype,"minScale",void 0),Object(y.a)([Object(V.a)("service","minScale",["minScale","effectiveMinScale"])],nr.prototype,"readMinScale",null),Object(y.a)([Object(D.b)(St.f)],nr.prototype,"maxScale",void 0),Object(y.a)([Object(V.a)("service","maxScale",["maxScale","effectiveMaxScale"])],nr.prototype,"readMaxScale",null),Object(y.a)([Object(D.b)({type:String})],nr.prototype,"globalIdField",void 0),Object(y.a)([Object(V.a)("globalIdField",["layerDefinition.globalIdField","layerDefinition.fields"]),Object(V.a)("service","globalIdField",["globalIdField","fields"])],nr.prototype,"readGlobalIdFieldFromService",null),Object(y.a)([Object(D.b)({type:String,json:{origins:{"web-map":{write:{target:"layerDefinition.objectIdField",overridePolicy:rr}}}}})],nr.prototype,"objectIdField",void 0),Object(y.a)([Object(V.a)("objectIdField",["layerDefinition.objectIdField","layerDefinition.fields"]),Object(V.a)("service","objectIdField",["objectIdField","fields"])],nr.prototype,"readObjectIdFieldFromService",null),Object(y.a)([Object(D.b)({value:"ArcGISFeatureLayer",type:["ArcGISFeatureLayer"]})],nr.prototype,"operationalLayerType",void 0),Object(y.a)([Object(D.b)(tr.outFields)],nr.prototype,"outFields",void 0),Object(y.a)([Object(D.b)({readOnly:!0})],nr.prototype,"parsedUrl",null),Object(y.a)([Object(D.b)({type:String,json:{origins:{"web-scene":{read:!0,write:!0}},read:!1}})],nr.prototype,"path",void 0),Object(y.a)([Object(D.b)(St.j)],nr.prototype,"popupEnabled",void 0),Object(y.a)([Object(D.b)({type:f.a,json:{read:{source:"popupInfo"},write:{target:"popupInfo"}}})],nr.prototype,"popupTemplate",void 0),Object(y.a)([Object(D.b)({readOnly:!0})],nr.prototype,"defaultPopupTemplate",null),Object(y.a)([Object(D.b)({type:[At],readOnly:!0})],nr.prototype,"relationships",void 0),Object(y.a)([Object(D.b)({types:v.a,json:{origins:{service:{write:{target:"drawingInfo.renderer",enabled:!1}},"web-scene":{types:v.b,write:{target:"layerDefinition.drawingInfo.renderer",writer:O.c}}},write:{target:"layerDefinition.drawingInfo.renderer",overridePolicy:function(e,t,r){return{ignoreOrigin:null==r?void 0:r.writeLayerSchema}},writer:O.c}}})],nr.prototype,"renderer",null),Object(y.a)([Object(V.a)("service","renderer",["drawingInfo.renderer","defaultSymbol"]),Object(V.a)("renderer",["layerDefinition.drawingInfo.renderer","layerDefinition.defaultSymbol"])],nr.prototype,"readRenderer",null),Object(y.a)([Object(D.b)()],nr.prototype,"sourceJSON",void 0),Object(y.a)([Object(D.b)({type:Boolean})],nr.prototype,"returnM",void 0),Object(y.a)([Object(D.b)({type:Boolean})],nr.prototype,"returnZ",void 0),Object(y.a)([Object(D.b)(St.m)],nr.prototype,"screenSizePerspectiveEnabled",void 0),Object(y.a)([Object(D.b)()],nr.prototype,"source",null),Object(y.a)([Object(L.a)("source")],nr.prototype,"castSource",null),Object(y.a)([Object(V.a)("portal-item","source",["featureSet"]),Object(V.a)("web-map","source",["featureSet"])],nr.prototype,"readSource",null),Object(y.a)([Object(D.b)({readOnly:!0})],nr.prototype,"serviceDefinitionExpression",void 0),Object(y.a)([Object(V.a)("service","serviceDefinitionExpression",["definitionQuery","definitionExpression"])],nr.prototype,"readServiceDefinitionExpression",null),Object(y.a)([Object(D.b)({type:Ke.a,json:{origins:{service:{read:{source:"extent.spatialReference"}}},read:{source:"layerDefinition.extent.spatialReference"}}})],nr.prototype,"spatialReference",void 0),Object(y.a)([Object(D.b)({type:Number})],nr.prototype,"subtypeCode",void 0),Object(y.a)([Object(D.b)({type:[It.a]})],nr.prototype,"templates",void 0),Object(y.a)([Object(V.a)("templates",["editFieldsInfo","creatorField","editorField","templates"])],nr.prototype,"readTemplates",null),Object(y.a)([Object(D.b)({type:qt.a})],nr.prototype,"timeInfo",void 0),Object(y.a)([Object(D.b)()],nr.prototype,"title",void 0),Object(y.a)([Object(V.a)("service","title",["name"]),Object(V.a)("portal-item","title",["layerDefinition.title","layerDefinition.name","title"])],nr.prototype,"readTitle",null),Object(y.a)([Object(V.a)("web-map","title",["layerDefinition.name","title"])],nr.prototype,"readTitleFromWebMap",null),Object(y.a)([Object(D.b)({type:String})],nr.prototype,"sublayerTitleMode",void 0),Object(y.a)([Object(D.b)({type:String,json:{read:{source:"timeInfo.trackIdField"}}})],nr.prototype,"trackIdField",void 0),Object(y.a)([Object(D.b)({json:{read:!1}})],nr.prototype,"type",void 0),Object(y.a)([Object(D.b)({type:String})],nr.prototype,"typeIdField",void 0),Object(y.a)([Object(V.a)("service","typeIdField"),Object(V.a)("typeIdField",["layerDefinition.typeIdField"])],nr.prototype,"readTypeIdField",null),Object(y.a)([Object(D.b)({type:[Et.a]})],nr.prototype,"types",void 0),Object(y.a)([Object(V.a)("service","types",["types"]),Object(V.a)("types",["layerDefinition.types"])],nr.prototype,"readTypes",null),Object(y.a)([Object(D.b)({readOnly:!0,json:{write:!1}})],nr.prototype,"serverGens",void 0),Object(y.a)([Object(D.b)({type:w.a.ofType(kt),readOnly:!0})],nr.prototype,"indexes",void 0),Object(y.a)([Object(D.b)(St.n)],nr.prototype,"url",null),Object(y.a)([Object(q.a)("url")],nr.prototype,"writeUrl",null),Object(y.a)([Object(D.b)({readOnly:!0})],nr.prototype,"userIsAdmin",void 0),Object(y.a)([Object(D.b)({json:{origins:{service:{read:!0}},read:!1}})],nr.prototype,"version",void 0),Object(y.a)([Object(V.a)("service","version",["currentVersion","capabilities","drawingInfo","hasAttachments","htmlPopupType","relationships","timeInfo","typeIdField","types"])],nr.prototype,"readVersion",null),Object(y.a)([Object(D.b)({type:Boolean,json:{origins:{"portal-item":{write:{target:"layerDefinition.defaultVisibility"}}}}})],nr.prototype,"visible",void 0),Object(y.a)([Object(V.a)("portal-item","visible",["visibility","layerDefinition.defaultVisibility"])],nr.prototype,"readVisible",null),nr=Object(y.a)([Object(A.a)("esri.layers.FeatureLayer")],nr);var ir=Object(J.b)({types:g.i}),ar=nr},739:function(e,t,r){"use strict";r.d(t,"a",(function(){return d}));var n,i=r(2),a=r(4),o=r(5),s=r(6),c=r(0),l=r(1),u=(r(19),r(14),r(15),r(10)),p=r(705),b=n=function(e){Object(o.a)(r,e);var t=Object(s.a)(r);function r(e){var n;return Object(i.a)(this,r),(n=t.call(this,e)).type="selection",n}return Object(a.a)(r,[{key:"clone",value:function(){return new n}}]),r}(p.a);Object(c.a)([Object(l.b)({type:["selection"]})],b.prototype,"type",void 0);var d=b=n=Object(c.a)([Object(u.a)("esri.layers.support.FeatureReductionSelection")],b)},740:function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var n=r(675),i=/\[([^\[\]]+)\]/gi;function a(e,t,r){var a=this;return e?e.map((function(e){var o=new n.a;if(o.read(e,r),o.labelExpression){var s=t.fields||t.layerDefinition&&t.layerDefinition.fields||a.fields;o.labelExpression=o.labelExpression.replace(i,(function(e,t){return"[".concat(function(e,t){if(!t)return e;for(var r=e.toLowerCase(),n=0;n<t.length;n++){var i=t[n].name;if(i.toLowerCase()===r)return i}return e}(t,s),"]")}))}return o})):null}},742:function(e,t,r){"use strict";r.d(t,"a",(function(){return I}));var n,i=r(13),a=r(2),o=r(4),s=r(77),c=r(65),l=r(5),u=r(6),p=r(0),b=r(137),d=r(42),y=r(26),f=r(135),j=r(165),h=r(1),O=(r(19),r(14),r(15),r(57)),v=r(10),m=r(43),g=Object(d.b)()({orthometric:"gravity-related-height",gravity_related_height:"gravity-related-height",ellipsoidal:"ellipsoidal"}),w=g.jsonValues.slice();Object(b.g)(w,"orthometric");var S=Object(d.b)()({meter:"meters",foot:"feet","us-foot":"us-feet","clarke-foot":"clarke-feet","clarke-yard":"clarke-yards","clarke-link":"clarke-links","sears-yard":"sears-yards","sears-foot":"sears-feet","sears-chain":"sears-chains","benoit-1895-b-chain":"benoit-1895-b-chains","indian-yard":"indian-yards","indian-1937-yard":"indian-1937-yards","gold-coast-foot":"gold-coast-feet","sears-1922-truncated-chain":"sears-1922-truncated-chains","50-kilometers":"50-kilometers","150-kilometers":"150-kilometers"}),k=n=function(e){Object(l.a)(r,e);var t=Object(u.a)(r);function r(e){var n;return Object(a.a)(this,r),(n=t.call(this,e)).heightModel="gravity-related-height",n.heightUnit="meters",n.vertCRS=null,n}return Object(o.a)(r,[{key:"writeHeightModel",value:function(e,t,r){return g.write(e,t,r)}},{key:"readHeightModel",value:function(e,t,r){return g.read(e)||(r&&r.messages&&r.messages.push(function(e,t){return new j.a("height-model:unsupported","Height model of value '".concat(e,"' is not supported"),t)}(e,{context:r})),null)}},{key:"readHeightUnit",value:function(e,t,r){return S.read(e)||(r&&r.messages&&r.messages.push(x(e,{context:r})),null)}},{key:"readHeightUnitService",value:function(e,t,r){return Object(f.k)(e)||S.read(e)||(r&&r.messages&&r.messages.push(x(e,{context:r})),null)}},{key:"readVertCRS",value:function(e,t){return t.vertCRS||t.ellipsoid||t.geoid}},{key:"clone",value:function(){return new n({heightModel:this.heightModel,heightUnit:this.heightUnit,vertCRS:this.vertCRS})}},{key:"equals",value:function(e){return!!e&&(this===e||this.heightModel===e.heightModel&&this.heightUnit===e.heightUnit&&this.vertCRS===e.vertCRS)}},{key:"write",value:function(e,t){return t=Object(i.a)({origin:"web-scene"},t),Object(s.a)(Object(c.a)(r.prototype),"write",this).call(this,e,t)}}],[{key:"deriveUnitFromSR",value:function(e,t){var r=Object(f.g)(t);return new n({heightModel:e.heightModel,heightUnit:r,vertCRS:e.vertCRS})}},{key:"fromJSON",value:function(e){if(!e)return null;var t=new n;return t.read(e,{origin:"web-scene"}),t}}]),r}(y.a);function x(e,t){return new j.a("height-unit:unsupported","Height unit of value '".concat(e,"' is not supported"),t)}Object(p.a)([Object(h.b)({type:g.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:w,default:"ellipsoidal"}}}})],k.prototype,"heightModel",void 0),Object(p.a)([Object(m.a)("web-scene","heightModel")],k.prototype,"writeHeightModel",null),Object(p.a)([Object(O.a)(["web-scene","service"],"heightModel")],k.prototype,"readHeightModel",null),Object(p.a)([Object(h.b)({type:S.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:S.jsonValues,write:S.write}}}})],k.prototype,"heightUnit",void 0),Object(p.a)([Object(O.a)("web-scene","heightUnit")],k.prototype,"readHeightUnit",null),Object(p.a)([Object(O.a)("service","heightUnit")],k.prototype,"readHeightUnitService",null),Object(p.a)([Object(h.b)({type:String,constructOnly:!0,json:{origins:{"web-scene":{write:!0}}}})],k.prototype,"vertCRS",void 0),Object(p.a)([Object(O.a)("service","vertCRS",["vertCRS","ellipsoid","geoid"])],k.prototype,"readVertCRS",null);var I=k=n=Object(p.a)([Object(v.a)("esri.geometry.HeightModelInfo")],k)},744:function(e,t,r){"use strict";r.d(t,"a",(function(){return l}));var n=r(7),i=r.n(n),a=r(12),o=r(295),s=r(30),c=r(165);function l(e,t,r){return u.apply(this,arguments)}function u(){return u=Object(a.a)(i.a.mark((function e(t,r,n){var a,l,u;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=t&&t.getAtOrigin&&t.getAtOrigin("renderer",r.origin))||"unique-value"!==a.type||!a.styleOrigin){e.next=6;break}return e.next=4,Object(o.c)(a.populateFromStyle());case 4:l=e.sent,Object(s.v)(n),!1===l.ok&&(u=l.error,r&&r.messages&&r.messages.push(new c.a("renderer:style-reference","Failed to create unique value renderer from style reference: ".concat(u.message),{error:u,context:r})),t.clear("renderer",r.origin));case 6:case"end":return e.stop()}}),e)}))),u.apply(this,arguments)}},745:function(e,t,r){"use strict";r.d(t,"a",(function(){return y}));var n,i=r(2),a=r(4),o=r(5),s=r(6),c=r(0),l=r(52),u=r(26),p=r(1),b=(r(19),r(14),r(15),r(10)),d=n=function(e){Object(o.a)(r,e);var t=Object(s.a)(r);function r(e){var n;return Object(i.a)(this,r),(n=t.call(this,e)).floorField=null,n.viewAllMode=!1,n.viewAllLevelIds=new l.a,n}return Object(a.a)(r,[{key:"clone",value:function(){return new n({floorField:this.floorField,viewAllMode:this.viewAllMode,viewAllLevelIds:this.viewAllLevelIds})}}]),r}(u.a);Object(c.a)([Object(p.b)({type:String,json:{write:!0}})],d.prototype,"floorField",void 0),Object(c.a)([Object(p.b)({json:{read:!1,write:!1}})],d.prototype,"viewAllMode",void 0),Object(c.a)([Object(p.b)({json:{read:!1,write:!1}})],d.prototype,"viewAllLevelIds",void 0);var y=d=n=Object(c.a)([Object(b.a)("esri.layers.support.LayerFloorInfo")],d)},746:function(e,t,r){"use strict";r.d(t,"a",(function(){return P})),r.d(t,"b",(function(){return R})),r.d(t,"c",(function(){return _})),r.d(t,"d",(function(){return M}));var n,i=r(29),a=r(66),o=r(705),s=r(2),c=r(4),l=r(5),u=r(6),p=r(0),b=r(214),d=r(332),y=r(26),f=r(18),j=r(44),h=r(1),O=(r(14),r(19),r(15),r(10)),v=n=function(e){Object(l.a)(r,e);var t=Object(u.a)(r);function r(){var e;return Object(s.a)(this,r),(e=t.apply(this,arguments)).statisticType=null,e.onStatisticField=null,e.onStatisticValueExpression=null,e}return Object(c.a)(r,[{key:"clone",value:function(){return new n({statisticType:this.statisticType,onStatisticField:this.onStatisticField,onStatisticValueExpression:this.onStatisticValueExpression})}}]),r}(y.a);Object(p.a)([Object(h.b)({type:String,json:{write:!0}})],v.prototype,"statisticType",void 0),Object(p.a)([Object(h.b)({type:String,json:{write:!0}})],v.prototype,"onStatisticField",void 0),Object(p.a)([Object(h.b)({type:String,json:{write:!0}})],v.prototype,"onStatisticValueExpression",void 0);var m,g=v=n=Object(p.a)([Object(O.a)("esri.layers.support.OutStatistic")],v),w=m=function(e){Object(l.a)(r,e);var t=Object(u.a)(r);function r(){var e;return Object(s.a)(this,r),(e=t.apply(this,arguments)).name=null,e}return Object(c.a)(r,[{key:"clone",value:function(){return new m({name:this.name,outStatistic:this.outStatistic.clone()})}}]),r}(y.a);Object(p.a)([Object(h.b)({type:String,json:{write:!0}})],w.prototype,"name",void 0),Object(p.a)([Object(h.b)({type:g,json:{write:!0}})],w.prototype,"outStatistic",void 0);var S,k=w=m=Object(p.a)([Object(O.a)("esri.layers.support.AggregateField")],w),x=r(671),I=r(675),E=S=function(e){Object(l.a)(r,e);var t=Object(u.a)(r);function r(e){var n;return Object(s.a)(this,r),(n=t.call(this,e)).type="cluster",n.clusterRadius=Object(j.d)("80px"),n.clusterMinSize=Object(j.d)("12px"),n.clusterMaxSize=Object(j.d)("50px"),n.popupEnabled=!0,n.popupTemplate=null,n.symbol=null,n.labelingInfo=null,n.labelsVisible=!0,n.fields=null,n}return Object(c.a)(r,[{key:"clone",value:function(){return new S({clusterRadius:this.clusterRadius,clusterMinSize:this.clusterMinSize,clusterMaxSize:this.clusterMaxSize,labelingInfo:Object(f.a)(this.labelingInfo),labelsVisible:this.labelsVisible,fields:Object(f.a)(this.fields),popupEnabled:this.popupEnabled,popupTemplate:Object(f.a)(this.popupTemplate)})}}]),r}(y.a);Object(p.a)([Object(h.b)({type:["cluster"],readOnly:!0,json:{write:!0}})],E.prototype,"type",void 0),Object(p.a)([Object(h.b)({type:Number,cast:function(e){return"auto"===e?e:Object(j.d)(e)},json:{write:!0}})],E.prototype,"clusterRadius",void 0),Object(p.a)([Object(h.b)({type:Number,cast:j.d,json:{write:!0}})],E.prototype,"clusterMinSize",void 0),Object(p.a)([Object(h.b)({type:Number,cast:j.d,json:{write:!0}})],E.prototype,"clusterMaxSize",void 0),Object(p.a)([Object(h.b)(x.j)],E.prototype,"popupEnabled",void 0),Object(p.a)([Object(h.b)({type:b.a,json:{read:{source:"popupInfo"},write:{target:"popupInfo"}}})],E.prototype,"popupTemplate",void 0),Object(p.a)([Object(h.b)({types:d.f})],E.prototype,"symbol",void 0),Object(p.a)([Object(h.b)({type:[I.a],json:{read:{source:"drawingInfo.labelingInfo"},write:{target:"drawingInfo.labelingInfo"}}})],E.prototype,"labelingInfo",void 0),Object(p.a)([Object(h.b)(x.d)],E.prototype,"labelsVisible",void 0),Object(p.a)([Object(h.b)({type:[k],json:{write:!0}})],E.prototype,"fields",void 0);var F=E=S=Object(p.a)([Object(O.a)("esri.layers.support.FeatureReductionCluster")],E),T=r(739),_={key:"type",base:o.a,typeMap:{selection:T.a}};function R(e,t){var r=(t=t.layerDefinition||t).featureReduction;if(r)switch(r.type){case"selection":return T.a.fromJSON(r);case"cluster":return F.fromJSON(r)}return null}function M(e,t,r,n){var o=function(e,t,r){return e?"selection"!==e.type?(r.messages&&r.messages.push(new i.a("featureReduction:unsupported","FeatureReduction of type '".concat(e.declaredClass,"' are not supported in scenes."),{featureReduction:e,context:r})),null):e.write(t,r):null}(e,{},n);o&&Object(a.c)(r,o,t)}var P={types:{key:"type",base:o.a,typeMap:{selection:T.a,cluster:F}},json:{write:{target:"layerDefinition.featureReduction",allowNull:!0}}}},747:function(e,t,r){"use strict";r.d(t,"a",(function(){return j}));var n,i=r(2),a=r(4),o=r(5),s=r(6),c=r(0),l=r(26),u=r(18),p=r(1),b=r(14),d=(r(19),r(15),r(10)),y=r(43),f=n=function(e){Object(o.a)(r,e);var t=Object(s.a)(r);function r(e){var n;return Object(i.a)(this,r),(n=t.call(this,e)).attachmentTypes=null,n.attachmentsWhere=null,n.keywords=null,n.globalIds=null,n.name=null,n.num=null,n.objectIds=null,n.returnMetadata=!1,n.size=null,n.start=null,n.where=null,n}return Object(a.a)(r,[{key:"writeStart",value:function(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10}},{key:"clone",value:function(){return new n(Object(u.a)({attachmentTypes:this.attachmentTypes,attachmentsWhere:this.attachmentsWhere,keywords:this.keywords,where:this.where,globalIds:this.globalIds,name:this.name,num:this.num,objectIds:this.objectIds,returnMetadata:this.returnMetadata,size:this.size,start:this.start}))}}]),r}(l.a);Object(c.a)([Object(p.b)({type:[String],json:{write:!0}})],f.prototype,"attachmentTypes",void 0),Object(c.a)([Object(p.b)({type:String,json:{read:{source:"attachmentsDefinitionExpression"},write:{target:"attachmentsDefinitionExpression"}}})],f.prototype,"attachmentsWhere",void 0),Object(c.a)([Object(p.b)({type:[String],json:{write:!0}})],f.prototype,"keywords",void 0),Object(c.a)([Object(p.b)({type:[Number],json:{write:!0}})],f.prototype,"globalIds",void 0),Object(c.a)([Object(p.b)({json:{write:!0}})],f.prototype,"name",void 0),Object(c.a)([Object(p.b)({type:Number,json:{read:{source:"resultRecordCount"}}})],f.prototype,"num",void 0),Object(c.a)([Object(p.b)({type:[Number],json:{write:!0}})],f.prototype,"objectIds",void 0),Object(c.a)([Object(p.b)({type:Boolean,json:{default:!1,write:!0}})],f.prototype,"returnMetadata",void 0),Object(c.a)([Object(p.b)({type:[Number],json:{write:!0}})],f.prototype,"size",void 0),Object(c.a)([Object(p.b)({type:Number,json:{read:{source:"resultOffset"}}})],f.prototype,"start",void 0),Object(c.a)([Object(y.a)("start"),Object(y.a)("num")],f.prototype,"writeStart",null),Object(c.a)([Object(p.b)({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],f.prototype,"where",void 0),(f=n=Object(c.a)([Object(d.a)("esri.rest.support.AttachmentQuery")],f)).from=Object(b.m)(f);var j=f},751:function(e,t,r){"use strict";r.d(t,"a",(function(){return k})),r.d(t,"b",(function(){return j})),r.d(t,"c",(function(){return h})),r.d(t,"d",(function(){return O})),r.d(t,"e",(function(){return v})),r.d(t,"f",(function(){return w})),r.d(t,"g",(function(){return f}));var n=r(21),i=r(22),a=r(46),o=r(210),s=r(694),c=r(15),l=r(11),u=r(683),p=r(704),b=c.a.getLogger("esri.renderers.visualVariables.support.visualVariableUtils"),d=new o.a,y=Math.PI,f=/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i;function j(e,t,r){var n="visualVariables"in e&&e.visualVariables?e.visualVariables.filter((function(e){return"color"===e.type}))[0]:e;if(n)if("esri.renderers.visualVariables.ColorVariable"===n.declaredClass){var i="number"==typeof t,o=i?null:t,s=o&&o.attributes,c=i?t:null,u=n.field,p=n.cache,d=p.ipData,y=p.hasExpression,f=n.cache.compiledFunc;if(!u&&!y){var j=n.stops;return j&&j[0]&&j[0].color}if("number"!=typeof c)if(y){if(!Object(l.j)(r)||!Object(l.j)(r.arcade))return void b.error("Use of arcade expressions requires an arcade context");var h={viewingMode:r.viewingMode,scale:r.scale,spatialReference:r.spatialReference},O=r.arcade.arcadeUtils,v=O.getViewInfo(h),m=O.createExecContext(o,v);if(!f){var g=O.createSyntaxTree(n.valueExpression);f=O.createFunction(g),n.cache.compiledFunc=f}c=O.executeFunction(f,m)}else s&&(c=s[u]);var w=n.normalizationField,k=s?parseFloat(s[w]):void 0;if(null!=c&&(!w||i||!isNaN(k)&&0!==k)){isNaN(k)||i||(c/=k);var x=S(c,d);if(x){var I=x[0],E=x[1],F=I===E?n.stops[I].color:a.a.blendColors(n.stops[I].color,n.stops[E].color,x[2],Object(l.j)(r)?r.color:void 0);return new a.a(F)}}}else b.warn("The visualVariable should be an instance of esri.renderers.visualVariables.ColorVariable")}function h(e,t,r){var n="visualVariables"in e&&e.visualVariables?e.visualVariables.filter((function(e){return"opacity"===e.type}))[0]:e;if(n)if("esri.renderers.visualVariables.OpacityVariable"===n.declaredClass){var i="number"==typeof t,a=i?null:t,o=a&&a.attributes,s=i?t:null,c=n.field,u=n.cache,p=u.ipData,d=u.hasExpression,y=n.cache.compiledFunc;if(!c&&!d){var f=n.stops;return f&&f[0]&&f[0].opacity}if("number"!=typeof s)if(d){if(Object(l.i)(r)||Object(l.i)(r.arcade))return void b.error("Use of arcade expressions requires an arcade context");var j={viewingMode:r.viewingMode,scale:r.scale,spatialReference:r.spatialReference},h=r.arcade.arcadeUtils,O=h.getViewInfo(j),v=h.createExecContext(a,O);if(!y){var m=h.createSyntaxTree(n.valueExpression);y=h.createFunction(m),n.cache.compiledFunc=y}s=h.executeFunction(y,v)}else o&&(s=o[c]);var g=n.normalizationField,w=o?parseFloat(o[g]):void 0;if(null!=s&&(!g||i||!isNaN(w)&&0!==w)){isNaN(w)||i||(s/=w);var k=S(s,p);if(k){var x=k[0],I=k[1];if(x===I)return n.stops[x].opacity;var E=n.stops[x].opacity;return E+(n.stops[I].opacity-E)*k[2]}}}else b.warn("The visualVariable should be an instance of esri.renderers.visualVariables.OpacityVariable")}function O(e,t,r){var n="visualVariables"in e&&e.visualVariables?e.visualVariables.filter((function(e){return"rotation"===e.type}))[0]:e;if(n){if("esri.renderers.visualVariables.RotationVariable"===n.declaredClass){var i=n.axis||"heading",a="heading"===i&&"arithmetic"===n.rotationType?90:0,o="heading"===i&&"arithmetic"===n.rotationType?-1:1,s="number"==typeof t?null:t,c=s&&s.attributes,u=n.field,p=n.cache.hasExpression,d=n.cache.compiledFunc,y=0;if(!u&&!p)return y;if(p){if(Object(l.i)(r)||Object(l.i)(r.arcade))return void b.error("Use of arcade expressions requires an arcade context");var f={viewingMode:r.viewingMode,scale:r.scale,spatialReference:r.spatialReference},j=r.arcade.arcadeUtils,h=j.getViewInfo(f),O=j.createExecContext(s,h);if(!d){var v=j.createSyntaxTree(n.valueExpression);d=j.createFunction(v),n.cache.compiledFunc=d}y=j.executeFunction(d,O)}else c&&(y=c[u]||0);return y="number"!=typeof y||isNaN(y)?null:a+o*y}b.warn("The visualVariable should be an instance of esri.renderers.visualVariables.RotationVariable")}}function v(e,t,r){var n="visualVariables"in e&&e.visualVariables?e.visualVariables.filter((function(e){return"size"===e.type}))[0]:e;if(n){if("esri.renderers.visualVariables.SizeVariable"===n.declaredClass){var a=function(e,t,r,n,a){switch(t.transformationType){case"additive":return function(e,t,r,n){return e+(m(t.minSize,r,n)||t.minDataValue)}(e,t,r,n);case"constant":return function(e,t,r){var n=e.stops,i=n&&n.length&&n[0].size;return null==i&&(i=e.minSize),m(i,t,r)}(t,r,n);case"clamped-linear":return function(e,t,r,n){var i=(e-t.minDataValue)/(t.maxDataValue-t.minDataValue),a=m(t.minSize,r,n),o=m(t.maxSize,r,n),s=Object(l.j)(n)?n.shape:void 0;if(e<=t.minDataValue)return a;if(e>=t.maxDataValue)return o;if("area"===t.scaleBy&&s){var c="circle"===s,u=c?y*Math.pow(a/2,2):a*a,p=u+i*((c?y*Math.pow(o/2,2):o*o)-u);return c?2*Math.sqrt(p/y):Math.sqrt(p)}return a+i*(o-a)}(e,t,r,n);case"proportional":return function(e,t,r,n){var i=Object(l.j)(n)?n.shape:void 0,a=e/t.minDataValue,o=m(t.minSize,r,n),s=m(t.maxSize,r,n);return g("circle"===i?2*Math.sqrt(a*Math.pow(o/2,2)):"square"===i||"diamond"===i||"image"===i?Math.sqrt(a*Math.pow(o,2)):a*o,o,s)}(e,t,r,n);case"stops":return function(e,t,r,n,a){var o=S(e,a),s=Object(i.a)(o,3),c=s[0],l=s[1],u=s[2];if(c===l)return m(t.stops[c].size,r,n);var p=m(t.stops[c].size,r,n);return p+(m(t.stops[l].size,r,n)-p)*u}(e,t,r,n,a);case"real-world-size":return function(e,t,r,n){var i=(Object(l.j)(n)&&n.resolution?n.resolution:1)*u.a[t.valueUnit],a=m(t.minSize,r,n),o=m(t.maxSize,r,n),s=t.valueRepresentation;return g("area"===s?2*Math.sqrt(e/y)/i:"radius"===s||"distance"===s?2*e/i:e/i,a,o)}(e,t,r,n);case"identity":return e;case"unknown":return null}}(function(e,t,r){var n="number"==typeof t,i=n?null:t,a=i&&i.attributes,o=n?t:null,s=e.cache.isScaleDriven,c=e.cache.compiledFunc;if(s){var u=Object(l.j)(r)?r.scale:void 0,d=Object(l.j)(r)?r.view:void 0;o=null==u||"3d"===d?function(e){var t=null,r=null,n=e.stops;return n?(t=n[0].value,r=n[n.length-1].value):(t=e.minDataValue||0,r=e.maxDataValue||0),(t+r)/2}(e):u}else if(!n)switch(e.inputValueType){case"expression":if(Object(l.i)(r)||Object(l.i)(r.arcade))return void b.error("Use of arcade expressions requires an arcade context");var y={viewingMode:r.viewingMode,scale:r.scale,spatialReference:r.spatialReference},f=r.arcade.arcadeUtils,j=f.getViewInfo(y),h=f.createExecContext(i,j);if(!c){var O=f.createSyntaxTree(e.valueExpression);c=f.createFunction(O),e.cache.compiledFunc=c}o=f.executeFunction(c,h);break;case"field":a&&(o=a[e.field]);break;case"unknown":o=null}if(!Object(p.d)(o))return null;if(n||!e.normalizationField)return o;var v=a?parseFloat(a[e.normalizationField]):null;return Object(p.d)(v)&&0!==v?o/v:null}(n,t,r),n,t,r,n.cache.ipData);return null==a||isNaN(a)?0:a}b.warn("The visualVariable should be an instance of esri.renderers.visualVariables.SizeVariable")}}function m(e,t,r){return null==e?null:Object(p.c)(e)?v(e,t,r):Object(p.d)(e)?e:null}function g(e,t,r){return Object(p.d)(r)&&e>r?r:Object(p.d)(t)&&e<t?t:e}function w(e,t,r){if(!(e.cache.isScaleDriven&&"3d"===r||t))return null;var n={scale:t,view:r},i=m(e.minSize,d,n),a=m(e.maxSize,d,n);if(null!=i||null!=a){if(i>a){var o=a;a=i,i=o}return{minSize:i,maxSize:a}}}function S(e,t){if(t){var r=0,n=t.length-1;return t.some((function(t,i){return e<t?(n=i,!0):(r=i,!1)})),[r,n,(e-t[r])/(t[n]-t[r])]}}function k(e,t,r){var i,a=["proportional","proportional","proportional"],o=Object(n.a)(e);try{for(o.s();!(i=o.n()).done;){var c=i.value,l=c.useSymbolValue?"symbol-value":v(c,t,r);switch(c.axis){case"width":a[0]=l;break;case"depth":a[1]=l;break;case"height":a[2]=l;break;case"width-and-depth":a[0]=l,a[1]=l;break;case"all":case void 0:case null:a[0]=l,a[1]=l,a[2]=l;break;default:Object(s.a)(c.axis)}}}catch(u){o.e(u)}finally{o.f()}return a}},756:function(e,t,r){"use strict";r.d(t,"a",(function(){return v}));var n,i=r(2),a=r(5),o=r(6),s=r(0),c=r(66),l=r(1),u=(r(19),r(14),r(15),r(10)),p=r(4),b=r(42),d=r(26),y=new b.a({asc:"ascending",desc:"descending"}),f=n=function(e){Object(a.a)(r,e);var t=Object(o.a)(r);function r(){var e;return Object(i.a)(this,r),(e=t.apply(this,arguments)).field=null,e.valueExpression=null,e.order="ascending",e}return Object(p.a)(r,[{key:"clone",value:function(){return new n({field:this.field,valueExpression:this.valueExpression,order:this.order})}}]),r}(d.a);Object(s.a)([Object(l.b)({type:String,json:{write:!0}})],f.prototype,"field",void 0),Object(s.a)([Object(l.b)({type:String,json:{write:!0}})],f.prototype,"valueExpression",void 0),Object(s.a)([Object(l.b)({type:y.apiValues,json:{read:y.read,write:y.write}})],f.prototype,"order",void 0);var j=f=n=Object(s.a)([Object(u.a)("esri.layers.support.OrderByInfo")],f);function h(e,t,r){if(!e)return null;var n=e.find((function(e){return!!e.field}));if(!n)return null;var i=new j;return i.read(n,r),[i]}function O(e,t,r,n){var i=e.find((function(e){return!!e.field}));i&&Object(c.c)(r,[i.toJSON()],t)}var v=function(e){var t=function(e){Object(a.a)(r,e);var t=Object(o.a)(r);function r(){var e;return Object(i.a)(this,r),(e=t.apply(this,arguments)).orderBy=null,e}return r}(e);return Object(s.a)([Object(l.b)({type:[j],json:{origins:{"web-scene":{write:!1,read:!1}},read:{source:"layerDefinition.orderBy",reader:h},write:{target:"layerDefinition.orderBy",writer:O}}})],t.prototype,"orderBy",void 0),t=Object(s.a)([Object(u.a)("esri.layers.mixins.OrderedLayer")],t)}}}]);
//# sourceMappingURL=45.d43fb6bc.chunk.js.map