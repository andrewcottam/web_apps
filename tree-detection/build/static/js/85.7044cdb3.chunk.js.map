{"version":3,"sources":["../node_modules/@arcgis/core/layers/support/arcgisLayerUrl.js","../node_modules/@arcgis/core/layers/support/arcgisLayers.js","../node_modules/@arcgis/core/layers/support/lazyLayerLoader.js"],"names":["l","mapserver","imageserver","featureserver","sceneserver","streamserver","vectortileserver","a","Object","values","c","RegExp","join","f","v","p","e","test","d","t","r","n","path","match","s","i","o","u","indexOf","title","w","slice","serverType","toLowerCase","sublayer","parseInt","url","m","serviceUrl","sublayerId","Number","replace","toUpperCase","h","push","length","y","g","O","logger","layer","layerId","nonStandardUrlAllowed","C","toString","S","properties","customParameters","sublayerIds","layerOrTableId","sourceJSON","Constructor","default","parsedUrl","find","id","sublayerTitleMode","forEach","sublayerInfos","add","tableIds","tableInfos","tables","FeatureServer","StreamServer","VectorTileServer","then","tileInfo","format","cacheType","Point","IntegratedMesh","PointCloud","Building","Array","isArray","layers","layerType","FeatureLayer","SceneLayer","layerInfos","layerIds","I","b","type","hasOwnProperty","name","layersJSON","serviceJSON","map","reverse","filter","currentVersion","responseType","query","data","BingMapsLayer","BuildingSceneLayer","CSVLayer","ElevationLayer","GroupLayer","GeoRSSLayer","ImageryLayer","ImageryTileLayer","IntegratedMeshLayer","KMLLayer","MapImageLayer","MapNotesLayer","OGCFeatureLayer","OpenStreetMapLayer","PointCloudLayer","RouteLayer","StreamLayer","TileLayer","UnknownLayer","UnsupportedLayer","VectorTileLayer","VoxelLayer","WebTileLayer","WFSLayer","WMSLayer","WMTSLayer"],"mappings":"2dAIyPA,EAAE,CAACC,UAAU,YAAYC,YAAY,cAAcC,cAAc,gBAAgBC,YAAY,cAAcC,aAAa,eAAeC,iBAAiB,oBAAoBC,EAAEC,OAAOC,OAAOT,GAAGU,EAAE,IAAIC,OAAJ,iEAAqEJ,EAAEK,KAAK,KAA5E,kCAAiH,KAAKC,EAAE,IAAIF,OAAJ,sDAA0DJ,EAAEK,KAAK,KAAjE,kCAAsG,KAAKE,EAAE,iCAAiC,SAASC,EAAEC,GAAG,QAAQN,EAAEO,KAAKD,GAAG,SAASE,EAAEF,GAAG,IAAMG,EAAEC,YAAEJ,GAAGK,EAAEF,EAAEG,KAAKC,MAAMb,IAAIS,EAAEG,KAAKC,MAAMV,GAAG,IAAIQ,EAAE,OAAO,KAAK,kBAAgBA,EAAhB,GAAOG,EAAP,KAASC,EAAT,KAAWC,EAAX,KAAaC,EAAb,KAAkBpB,EAAEkB,EAAEG,QAAQ,KAAK,MAAM,CAACC,MAAMC,GAAG,IAAIvB,EAAEkB,EAAEM,MAAMxB,EAAE,GAAGkB,GAAGO,WAAWhC,EAAE0B,EAAEO,eAAeC,SAAS,MAAMP,GAAG,KAAKA,EAAEQ,SAASR,EAAE,IAAI,KAAKS,IAAI,CAACd,KAAKE,IAAI,SAASa,EAAErB,GAAG,IAAMG,EAAEC,YAAEJ,GAAGM,KAAKC,MAAMT,GAAG,OAAOK,EAAE,CAACmB,WAAWnB,EAAE,GAAGoB,WAAWC,OAAOrB,EAAE,KAAK,KAAK,SAASW,EAAEd,GAAG,OAAOA,EAAEA,EAAEyB,QAAQ,eAAe,MAAM,GAAGC,cAAc1B,EAAEe,MAAM,GAAG,SAASY,EAAEvB,EAAED,GAAG,IAAME,EAAE,GAAG,GAAGD,EAAE,CAAC,IAAMD,EAAED,EAAEE,GAAGJ,YAAEG,IAAIA,EAAEU,OAAOR,EAAEuB,KAAKzB,EAAEU,OAAO,GAAGV,EAAE,CAAC,IAAMH,EAAEc,EAAEX,GAAGE,EAAEuB,KAAK5B,GAAG,GAAG,IAAIK,EAAEwB,OAAO,CAAC,IAAI,IAAIxB,EAAE,GAAGY,cAAcL,QAAQP,EAAE,GAAGY,eAAe,OAAOZ,EAAE,GAAG,IAAI,IAAIA,EAAE,GAAGY,cAAcL,QAAQP,EAAE,GAAGY,eAAe,OAAOZ,EAAE,GAAG,OAAOA,EAAET,KAAK,OAAO,SAASkC,EAAE9B,GAAG,IAAIA,EAAE,OAAM,EAAG,IAAiES,GAAG,KAAKT,EAAEA,EAAEiB,eAAeL,QAApF,gBAA+FF,GAAG,IAAIV,EAAEY,QAAvF,gBAAoG,IAAIZ,EAAEY,QAA3F,aAAwG,IAAIZ,EAAEY,QAAlG,cAA6G,OAAOH,GAAGC,EAA6E,SAASqB,EAAE/B,EAAEI,GAAG,OAAOJ,EAAEG,YAAEE,YAAEL,EAAEI,IAAIJ,EAAE,SAASgC,EAAExB,GAAG,IAAQC,EAAGD,EAAPY,IAAS,IAAIX,EAAE,MAAM,CAACW,IAAIX,GAAGA,EAAEJ,YAAEI,EAAED,EAAEyB,QAAQ,IAA6BjD,EAAvB0B,EAAEN,YAAEK,GAAGE,EAAET,EAAEQ,EAAEJ,MAAY,GAAGN,YAAEW,GAAG,MAAMA,EAAEO,UAAU,MAAMV,EAAE0B,MAAMC,UAAUnD,EAAE2B,EAAEO,UAAUT,EAAEE,EAAES,IAAId,UAAU,GAAGE,EAAE4B,sBAAsB,CAAC,IAAMhC,EAAEiB,EAAEX,EAAEJ,MAAMN,YAAEI,KAAKK,EAAEL,EAAEkB,WAAWtC,EAAEoB,EAAEmB,YAAY,MAAM,CAACH,IAAIjB,YAAEM,GAAG0B,QAAQnD,GAAG,SAASqD,EAAErC,EAAEI,EAAED,EAAEE,EAAEI,GAAGE,YAAEP,EAAEC,EAAE,MAAMI,GAAGJ,EAAEe,KAAK,MAAMpB,EAAEmC,UAAU9B,EAAEe,IAAIZ,YAAEH,EAAEe,IAAIjB,EAAEH,EAAEmC,QAAQG,aAAa,SAASC,EAAEvC,GAAG,IAAIA,EAAE,OAAM,EAAG,IAAMI,EAAEJ,EAAEiB,cAAcd,GAAG,IAAIC,EAAEQ,QAAQ,cAAcP,GAAG,IAAID,EAAEQ,QAAQ,wBAAwBJ,GAAG,IAAIJ,EAAEQ,QAAQ,0BAA0BH,GAAG,IAAIL,EAAEQ,QAAQ,cAAc,OAAOT,IAAIE,GAAGG,GAAGC,K,+KCA79DA,E,8EAAf,WAAiBT,GAAjB,MAAAT,EAAA,eAAAA,EAAA,6DAAgCA,EAAE,OAAOa,EAAEJ,EAAEwC,iBAAY,EAAOpC,EAAEqC,iBAAlE,SAA2FvC,EAAEF,EAAEoB,IAAI7B,GAAnG,UAAmFY,EAAnF,OAAsGnB,EAAtG,2BAA4GgB,EAAEwC,YAA9G,IAAyHpB,IAAIpB,EAAEoB,MAASjB,EAAEuC,YAA1I,0CAA6J,MAAMvC,EAAEwC,iBAAiB3D,EAAEmD,QAAQhC,EAAEwC,eAAe3D,EAAE4D,WAAWzC,EAAEyC,YAAY,IAAIzC,EAAE0C,YAAY7D,KAA9P,wBAAsR,sDAAtR,2BAAkT8D,QAAlT,KAA2T,CAACjC,MAAMV,EAAE4C,UAAUlC,OAAvER,EAAvQ,kCAA6VX,EAAEW,EAAEF,EAAEnB,GAAGqB,IAAtW,6C,sBAAwW,SAASyB,EAAE9B,EAAEI,GAAG,OAAOJ,EAAEA,EAAEgD,MAAM,SAAAhD,GAAC,OAAEA,EAAEiD,KAAK7C,KAAI,KAAK,SAASV,EAAEM,EAAEI,EAAEb,GAAG,SAASP,EAAEgB,EAAEhB,GAAG,IAAMqB,EAAC,2BAAKd,GAAL,IAAO4C,QAAQnC,EAAEkD,kBAAkB,iBAAgB,OAAO/C,YAAEnB,KAAKqB,EAAEuC,WAAW5D,GAAG,IAAIoB,EAAEyC,YAAYxC,GAAGD,EAAEsC,YAAYS,SAAS,SAAA5D,GAAI,IAAMY,EAAEnB,EAAEO,EAAEuC,EAAE1B,EAAEgD,cAAc7D,IAAIS,EAAEqD,IAAIlD,MAAMC,EAAEkD,SAASH,SAAS,SAAA5D,GAAI,IAAMY,EAAEnB,EAAEO,EAAEuC,EAAE1B,EAAEmD,WAAWhE,IAAIS,EAAEwD,OAAOH,IAAIlD,M,SAAqBD,E,gFAAf,WAAiBF,EAAEG,GAAnB,uCAAAZ,EAAA,yDAA0BP,EAAEwB,YAAER,GAA9B,KAAoCT,YAAEP,IAAtC,qCAAmDa,EAAEG,EAAEG,GAAvD,OAA2CnB,EAA3C,kBAA2DO,YAAEP,GAA7D,sBAAsE,IAAIoB,EAAE,6BAA6B,kDAAkD,CAACgB,IAAIpB,IAAhK,OAAqLK,GAArL,EAAmMrB,GAAzBgC,WAAsBN,EAAhM,EAAuLQ,SAA0BT,EAAE,CAACgD,cAAc,eAAeC,aAAa,cAAcC,iBAAiB,mBAA7R,KAAuTtD,EAAvT,OAA8T,cAA9T,QAA6Z,gBAA7Z,QAAyoB,gBAAzoB,gCAA0UM,EAAE,MAAMD,EAAE,eAAe6B,EAAEvC,EAAEG,GAAGyD,MAAM,SAAA5D,GAAC,OAAEA,EAAE,YAAY,mBAAjY,oCAA2aW,EAAEG,EAAEd,EAAEG,GAAGyD,MAAM,SAAA5D,GAAI,IAAMI,EAAEJ,EAAE6D,UAAU7D,EAAE6D,SAASC,OAAO,OAAO9D,EAAE6D,UAAUzD,GAAG,SAASA,EAAEsB,eAAe1B,EAAE+D,WAAW,cAAc/D,EAAE+D,UAAU9C,cAAc,mBAAmB,iBAAiB,kBAA7mB,oCAAupBN,EAAEG,EAAE9B,EAAEoC,IAAId,KAAKH,GAAGyD,MAAM,SAAA5D,GAAI,IAAMI,EAAE,CAAC4D,MAAM,aAAa,WAAW,aAAaC,eAAe,sBAAsBC,WAAW,kBAAkBC,SAAS,sBAAsB,GAAGnE,GAAGoE,MAAMC,QAAQrE,EAAEsE,SAAStE,EAAEsE,OAAOzC,OAAO,EAAE,CAAC,IAAMtC,EAAES,EAAEsE,OAAO,GAAGC,UAAU,GAAG,MAAMnE,EAAEb,GAAG,OAAOa,EAAEb,GAAG,MAAM,gBAAx7B,6BAAs9BoB,EAAEF,EAAEJ,GAA19B,eAAm+ByB,EAAE,CAAC0C,cAAa,EAAGC,YAAW,GAA0BvE,EAAE,CAAC6C,UAAU/D,EAAE6D,YAAY,KAAKF,gBAAtDjD,EAAE,kBAAkBW,GAAmDK,EAAE,KAAKgC,YAAY,KAAKY,SAAS,MAA7mC,UAA2nC3C,EAA3nC,WAAmnCZ,EAAnnC,QAAgoC+B,EAAE/B,IAAI,MAAMW,EAA5oC,kCAA6pCZ,EAAEE,EAAEK,EAAEF,GAAnqC,QAAqpCC,EAArpC,OAAsqCV,IAAIQ,EAAEkD,cAAchD,EAAEsE,WAAWxE,EAAEqD,WAAWnD,EAAEmD,YAAe,IAAInD,EAAEuE,SAAS9C,OAAOzB,EAAEkD,SAASzB,QAAO3B,EAAEwC,YAAYtC,EAAEuE,SAASzE,EAAEoD,SAASlD,EAAEkD,UAAiB5D,IAAWQ,EAAEyC,eAAe,OAAOiC,EAAExE,EAAEuE,SAAS,IAAIC,EAAExE,EAAEkD,SAAS,GAAGpD,EAAE0C,WAAW,OAAOiC,EAAEzE,EAAEsE,WAAW,IAAIG,EAAEzE,EAAEmD,WAAW,IAA97C,yBAA69ClC,EAAEtB,GAA/9C,eAAy8CG,EAAE2C,YAA38C,yBAAk+C3C,GAAl+C,4C,iCAAm/CL,E,gFAAf,WAAiBG,EAAEI,GAAnB,IAAAb,EAAA,mBAAAA,EAAA,sEAA0CuB,EAAEd,EAAEI,GAA9C,UAAkCI,EAAlC,OAAqDG,EAAE,KAAKF,EAAE,KAAuB,mBAAZqB,EAAEtB,EAAEsE,OAA6B,UAAUhD,GAAGnB,EAAE,gBAAgBF,EAAED,EAAEyC,IAAI,kBAAkBnB,EAAEnB,EAAE,mBAAmBH,EAAEuE,eAAe,WAAWpE,EAAE,YAAYH,EAAEuE,eAAe,cAAcvE,EAAEuE,eAAe,cAAcpE,EAAE,cAAcH,EAAEuE,eAAe,mBAAmBvE,EAAEuE,eAAe,wBAAwBpE,EAAE,gBAAgBH,EAAEuE,eAAe,cAAcpE,EAAE,eAAeZ,EAAES,IAAIG,EAAE,cAAcF,EAAED,EAAEyC,IAAIzC,EAAEuE,eAAe,WAAWhF,EAAE,OAAOR,EAAEiB,EAAE8D,aAAQ,EAAO/E,EAAE,MAAMoB,EAAE,eAAgBA,EAAjjB,yCAA0jB,MAA1jB,cAAqkBjB,EAAE,MAAMe,EAAEC,YAAEV,GAAG,KAAplB,kBAA+lB,CAACa,MAAMV,YAAET,IAAIc,EAAEwE,MAAMhG,YAAEgB,GAAGgB,WAAWL,EAAEO,SAAST,EAAEW,IAAI,CAACd,KAAKH,YAAET,GAAGA,EAAE4B,WAAWjB,YAAEL,GAAGM,QAAlrB,2C,wBAAyrB,SAASP,EAAEC,GAAG,OAAO,MAAMA,OAAE,EAAOA,EAAE+E,eAAe,WAAW/E,EAAE+E,eAAe,OAAO,iBAAiB/E,EAAEiD,G,SAAkBnD,E,kFAAf,WAAiBE,EAAEI,EAAEb,GAArB,2BAAAA,EAAA,yDAAsCiB,GAAE,EAAM,kBAAkBJ,EAAhE,gCAAiFyE,EAAE7E,EAAET,GAArF,OAAyEa,EAAzE,OAAwFI,IAAIJ,EAAE6E,WAAW5E,EAAED,EAAE6E,YAAY7E,EAAE8E,YAA3H,wCAAoJpE,EAAEd,EAAET,GAAxJ,QAA4Ic,EAA5I,sBAAiKK,EAAE,OAAOP,EAAEE,QAAG,EAAOF,EAAEmE,OAAO3D,EAAE,OAAO3B,EAAEqB,QAAG,EAAOrB,EAAEwE,OAAtN,kBAAmO,CAACmB,UAAU,MAAMjE,OAAE,EAAOA,EAAEyE,KAAK,SAAAnF,GAAC,OAAEA,EAAEiD,MAAKmC,YAAY,GAAG9B,UAAU,MAAM3C,OAAE,EAAOA,EAAEwE,KAAK,SAAAnF,GAAC,OAAEA,EAAEiD,MAAKmC,YAAY,GAAGV,WAAWlE,EAAEE,EAAE,GAAG6C,WAAW/C,EAAEG,EAAE,KAAvX,6C,sBAA2X,SAASiE,EAAE5E,GAAG,OAAOA,EAAE8E,MAAM,kBAAkB9E,EAAE8E,K,SAAoBD,E,gFAAf,WAAiB7E,EAAEI,GAAnB,IAAAb,EAAA,iBAAAA,EAAA,sEAA0CuB,EAAEd,EAAEI,GAA9C,WAAiDpB,GAAfA,EAAlC,SAAsD,IAAKsF,QAAQ,OAAO/E,EAAEP,EAAEsF,aAAQ,EAAO/E,EAAE8F,OAAOT,KAAK,GAASvE,EAAE,CAAC6E,YAAYlG,KAAMA,EAAEsG,eAAe,MAA1J,yCAAsKjF,GAAtK,uBAAsLS,EAAEd,EAAE,UAAUI,GAApM,cAA8KI,EAA9K,0BAA8MH,EAAE4E,WAAW,CAACX,QAAQ,MAAM9D,GAAG,OAAOL,EAAEK,EAAE8D,aAAQ,EAAOnE,EAAEkF,OAAOT,KAAK,GAAGpB,QAAQ,MAAMhD,OAAE,EAAOA,EAAEgD,SAAS,IAAInD,IAA9T,6C,+BAA+UgB,E,8EAAf,WAAiBrB,GAAjB,SAAAT,EAAA,gFAA0B,EAAGoB,IAAEX,OAA/B,4C,+BAAoDuC,E,gFAAf,WAAiBvC,EAAEI,GAAnB,SAAAb,EAAA,sEAAmCuB,EAAEd,EAAEI,GAAvC,uCAA2CyD,UAA3C,4C,+BAAmE/C,E,gFAAf,WAAiBV,EAAEb,GAAnB,SAAAA,EAAA,sEAAmCS,kBAAEI,EAAE,CAACmF,aAAa,OAAOC,MAAK,aAAE3F,EAAE,QAAUN,KAA/E,uCAAqFkG,MAArF,4C,uHCAllIlG,EAAE,CAACmG,cAAa,uCAAC,sBAAAnG,EAAA,sEAAgB,sDAAhB,uCAA+CuD,SAA/C,2CAAD,qDAAwD6C,mBAAkB,uCAAC,sBAAApG,EAAA,sEAAgB,2EAAhB,uCAAoDuD,SAApD,2CAAD,qDAA6D8C,SAAQ,uCAAC,sBAAArG,EAAA,sEAAgB,2EAAhB,uCAA0CuD,SAA1C,2CAAD,qDAAmD+C,eAAc,uCAAC,sBAAAtG,EAAA,sEAAgB,8DAAhB,uCAAgDuD,SAAhD,2CAAD,qDAAyD0B,aAAY,uCAAC,sBAAAjF,EAAA,sEAAgB,0EAAhB,uCAA8CuD,SAA9C,2CAAD,qDAAuDgD,WAAU,uCAAC,sBAAAvG,EAAA,sEAAgB,8DAAhB,uCAA4CuD,SAA5C,2CAAD,qDAAqDiD,YAAW,uCAAC,sBAAAxG,EAAA,sEAAgB,sDAAhB,uCAA6CuD,SAA7C,2CAAD,qDAAsDkD,aAAY,uCAAC,sBAAAzG,EAAA,sEAAgB,2EAAhB,uCAA8CuD,SAA9C,2CAAD,qDAAuDmD,iBAAgB,uCAAC,sBAAA1G,EAAA,sEAAgB,2EAAhB,uCAAkDuD,SAAlD,2CAAD,qDAA2DoD,oBAAmB,uCAAC,sBAAA3G,EAAA,sEAAgB,8DAAhB,uCAAqDuD,SAArD,2CAAD,qDAA8DqD,SAAQ,uCAAC,sBAAA5G,EAAA,sEAAgB,4EAAhB,uCAA0CuD,SAA1C,2CAAD,qDAAmDsD,cAAa,uCAAC,sBAAA7G,EAAA,sEAAgB,2EAAhB,uCAA+CuD,SAA/C,2CAAD,qDAAwDuD,cAAa,uCAAC,sBAAA9G,EAAA,sEAAgB,2EAAhB,uCAA+CuD,SAA/C,2CAAD,qDAAwDwD,gBAAe,uCAAC,sBAAA/G,EAAA,sEAAgB,2EAAhB,uCAAiDuD,SAAjD,2CAAD,qDAA0DyD,mBAAkB,uCAAC,sBAAAhH,EAAA,sEAAgB,+DAAhB,uCAAoDuD,SAApD,2CAAD,qDAA6D0D,gBAAe,uCAAC,sBAAAjH,EAAA,sEAAgB,sEAAhB,uCAAiDuD,SAAjD,2CAAD,qDAA0D2D,WAAU,uCAAC,sBAAAlH,EAAA,sEAAgB,2EAAhB,uCAA4CuD,SAA5C,2CAAD,qDAAqD2B,WAAU,uCAAC,sBAAAlF,EAAA,sEAAgB,2EAAhB,uCAA4CuD,SAA5C,2CAAD,qDAAqD4D,YAAW,uCAAC,sBAAAnH,EAAA,sEAAgB,2EAAhB,uCAA6CuD,SAA7C,2CAAD,qDAAsD6D,UAAS,uCAAC,sBAAApH,EAAA,sEAAgB,2EAAhB,uCAA2CuD,SAA3C,2CAAD,qDAAoD8D,aAAY,uCAAC,sBAAArH,EAAA,sEAAgB,gCAAhB,uCAA8CuD,SAA9C,2CAAD,qDAAuD+D,iBAAgB,uCAAC,sBAAAtH,EAAA,sEAAgB,gCAAhB,uCAAkDuD,SAAlD,2CAAD,qDAA2DgE,gBAAe,uCAAC,sBAAAvH,EAAA,sEAAgB,sEAAhB,uCAAiDuD,SAAjD,2CAAD,qDAA0DiE,WAAU,uCAAC,sBAAAxH,EAAA,sEAAgB,gCAAhB,uCAA4CuD,SAA5C,2CAAD,qDAAqDkE,aAAY,uCAAC,sBAAAzH,EAAA,sEAAgB,qDAAhB,uCAA8CuD,SAA9C,2CAAD,qDAAuDmE,SAAQ,uCAAC,sBAAA1H,EAAA,sEAAgB,2EAAhB,uCAA0CuD,SAA1C,2CAAD,qDAAmDoE,SAAQ,uCAAC,sBAAA3H,EAAA,sEAAgB,sDAAhB,uCAA0CuD,SAA1C,2CAAD,qDAAmDqE,UAAS,uCAAC,sBAAA5H,EAAA,sEAAgB,8DAAhB,uCAA2CuD,SAA3C,2CAAD","file":"static/js/85.7044cdb3.chunk.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{isSome as e}from\"../../core/maybe.js\";import{urlToObject as r,removeTrailingSlash as t,removeQueryParameters as n,join as s,Url as i,makeAbsolute as o}from\"../../core/urlUtils.js\";import{w as u}from\"../../chunks/persistableUrlUtils.js\";const l={mapserver:\"MapServer\",imageserver:\"ImageServer\",featureserver:\"FeatureServer\",sceneserver:\"SceneServer\",streamserver:\"StreamServer\",vectortileserver:\"VectorTileServer\"},a=Object.values(l),c=new RegExp(`^((?:https?:)?\\\\/\\\\/\\\\S+?\\\\/rest\\\\/services\\\\/(.+?)\\\\/(${a.join(\"|\")}))(?:\\\\/(?:layers\\\\/)?(\\\\d+))?`,\"i\"),f=new RegExp(`^((?:https?:)?\\\\/\\\\/\\\\S+?\\\\/([^\\\\/\\\\n]+)\\\\/(${a.join(\"|\")}))(?:\\\\/(?:layers\\\\/)?(\\\\d+))?`,\"i\"),v=/(.*?)\\/(?:layers\\/)?(\\d+)\\/?$/i;function p(e){return!!c.test(e)}function d(e){const t=r(e),n=t.path.match(c)||t.path.match(f);if(!n)return null;const[,s,i,o,u]=n,a=i.indexOf(\"/\");return{title:w(-1!==a?i.slice(a+1):i),serverType:l[o.toLowerCase()],sublayer:null!=u&&\"\"!==u?parseInt(u,10):null,url:{path:s}}}function m(e){const t=r(e).path.match(v);return t?{serviceUrl:t[1],sublayerId:Number(t[2])}:null}function w(e){return(e=e.replace(/\\s*[/_]+\\s*/g,\" \"))[0].toUpperCase()+e.slice(1)}function h(r,t){const n=[];if(r){const t=d(r);e(t)&&t.title&&n.push(t.title)}if(t){const e=w(t);n.push(e)}if(2===n.length){if(-1!==n[0].toLowerCase().indexOf(n[1].toLowerCase()))return n[0];if(-1!==n[1].toLowerCase().indexOf(n[0].toLowerCase()))return n[1]}return n.join(\" - \")}function y(e){if(!e)return!1;const r=\".arcgis.com/\",t=\"//services\",n=\"//tiles\",s=\"//features\",i=-1!==(e=e.toLowerCase()).indexOf(r),o=-1!==e.indexOf(t)||-1!==e.indexOf(n)||-1!==e.indexOf(s);return i&&o}function x(e,r){return r&&e&&-1!==e.toLowerCase().indexOf(r.toLowerCase())}function g(e,r){return e?t(n(e,r)):e}function O(s){let{url:i}=s;if(!i)return{url:i};i=n(i,s.logger);const o=r(i),u=d(o.path);let l;if(e(u))null!=u.sublayer&&null==s.layer.layerId&&(l=u.sublayer),i=u.url.path;else if(s.nonStandardUrlAllowed){const r=m(o.path);e(r)&&(i=r.serviceUrl,l=r.sublayerId)}return{url:t(i),layerId:l}}function C(e,r,t,n,i){u(r,n,\"url\",i),n.url&&null!=e.layerId&&(n.url=s(n.url,t,e.layerId.toString()))}function S(e){if(!e)return!1;const r=e.toLowerCase(),t=-1!==r.indexOf(\"/services/\"),n=-1!==r.indexOf(\"/mapserver/wmsserver\"),s=-1!==r.indexOf(\"/imageserver/wmsserver\"),i=-1!==r.indexOf(\"/wmsserver\");return t&&(n||s||i)}function L(e){if(!e)return!1;const r=new i(o(e)).authority.toLowerCase();return\"server.arcgisonline.com\"===r||\"services.arcgisonline.com\"===r}function b(e){if(!e)return!1;return new i(o(e)).authority.toLowerCase().includes(\"arcgis.com\")}export{w as cleanTitle,b as isAGOLUrl,p as isArcGISUrl,y as isHostedAgolService,x as isHostedSecuredProxyService,L as isServerOrServicesAGOLUrl,S as isWmsServer,d as parse,m as parseNonStandardSublayerUrl,g as sanitizeUrl,O as sanitizeUrlWithLayerId,a as serverTypes,h as titleFromUrlAndName,C as writeUrlWithLayerId};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport e from\"../../request.js\";import r from\"../../core/Error.js\";import{isNone as a,isSome as t}from\"../../core/maybe.js\";import{getFilename as l,urlToObject as n}from\"../../core/urlUtils.js\";import{parse as s,parseNonStandardSublayerUrl as o}from\"./arcgisLayerUrl.js\";import{layerLookupMap as u}from\"./lazyLayerLoader.js\";async function i(e){var r;const a=null==(r=e.properties)?void 0:r.customParameters,t=await d(e.url,a),l={...e.properties,url:e.url};if(!t.sublayerIds)return null!=t.layerOrTableId&&(l.layerId=t.layerOrTableId,l.sourceJSON=t.sourceJSON),new t.Constructor(l);const n=new(0,(await import(\"../GroupLayer.js\")).default)({title:t.parsedUrl.title});return c(n,t,l),n}function y(e,r){return e?e.find((e=>e.id===r)):null}function c(e,r,a){function l(e,l){const n={...a,layerId:e,sublayerTitleMode:\"service-name\"};return t(l)&&(n.sourceJSON=l),new r.Constructor(n)}r.sublayerIds.forEach((a=>{const t=l(a,y(r.sublayerInfos,a));e.add(t)})),r.tableIds.forEach((a=>{const t=l(a,y(r.tableInfos,a));e.tables.add(t)}))}async function d(e,t){let l=s(e);if(a(l)&&(l=await f(e,t)),a(l))throw new r(\"arcgis-layers:url-mismatch\",\"The url '${url}' is not a valid arcgis resource\",{url:e});const{serverType:n,sublayer:o}=l;let u;const i={FeatureServer:\"FeatureLayer\",StreamServer:\"StreamLayer\",VectorTileServer:\"VectorTileLayer\"};switch(n){case\"MapServer\":u=null!=o?\"FeatureLayer\":S(e,t).then((e=>e?\"TileLayer\":\"MapImageLayer\"));break;case\"ImageServer\":u=w(e,t).then((e=>{const r=e.tileInfo&&e.tileInfo.format;return e.tileInfo?!r||\"LERC\"!==r.toUpperCase()||e.cacheType&&\"elevation\"!==e.cacheType.toLowerCase()?\"ImageryTileLayer\":\"ElevationLayer\":\"ImageryLayer\"}));break;case\"SceneServer\":u=w(l.url.path,t).then((e=>{const r={Point:\"SceneLayer\",\"3DObject\":\"SceneLayer\",IntegratedMesh:\"IntegratedMeshLayer\",PointCloud:\"PointCloudLayer\",Building:\"BuildingSceneLayer\"};if(e&&Array.isArray(e.layers)&&e.layers.length>0){const a=e.layers[0].layerType;if(null!=r[a])return r[a]}return\"SceneLayer\"}));break;default:u=i[n]}const y={FeatureLayer:!0,SceneLayer:!0},c=\"FeatureServer\"===n,d={parsedUrl:l,Constructor:null,layerOrTableId:c?o:null,sublayerIds:null,tableIds:null},p=await u;if(y[p]&&null==o){const r=await v(e,n,t);c&&(d.sublayerInfos=r.layerInfos,d.tableInfos=r.tableInfos);if(1!==r.layerIds.length+r.tableIds.length)d.sublayerIds=r.layerIds,d.tableIds=r.tableIds;else if(c){var I,b;d.layerOrTableId=null!=(I=r.layerIds[0])?I:r.tableIds[0],d.sourceJSON=null!=(b=r.layerInfos[0])?b:r.tableInfos[0]}}return d.Constructor=await m(p),d}async function f(e,r){var a;const s=await w(e,r);let u=null,i=null;const y=s.type;if(\"Feature Layer\"===y||\"Table\"===y?(u=\"FeatureServer\",i=s.id):\"indexedVector\"===y?u=\"VectorTileServer\":s.hasOwnProperty(\"mapName\")?u=\"MapServer\":s.hasOwnProperty(\"bandCount\")&&s.hasOwnProperty(\"pixelSizeX\")?u=\"ImageServer\":s.hasOwnProperty(\"maxRecordCount\")&&s.hasOwnProperty(\"allowGeometryUpdates\")?u=\"FeatureServer\":s.hasOwnProperty(\"streamUrls\")?u=\"StreamServer\":p(s)?(u=\"SceneServer\",i=s.id):s.hasOwnProperty(\"layers\")&&p(null==(a=s.layers)?void 0:a[0])&&(u=\"SceneServer\"),!u)return null;const c=null!=i?o(e):null;return{title:t(c)&&s.name||l(e),serverType:u,sublayer:i,url:{path:t(c)?c.serviceUrl:n(e).path}}}function p(e){return(null==e?void 0:e.hasOwnProperty(\"store\"))&&e.hasOwnProperty(\"id\")&&\"number\"==typeof e.id}async function v(e,r,a){var t,l;let n,s=!1;if(\"FeatureServer\"===r){const r=await b(e,a);s=!!r.layersJSON,n=r.layersJSON||r.serviceJSON}else n=await w(e,a);const o=null==(t=n)?void 0:t.layers,u=null==(l=n)?void 0:l.tables;return{layerIds:(null==o?void 0:o.map((e=>e.id)).reverse())||[],tableIds:(null==u?void 0:u.map((e=>e.id)).reverse())||[],layerInfos:s?o:[],tableInfos:s?u:[]}}function I(e){return!e.type||\"Feature Layer\"===e.type}async function b(e,r){var a,t;let l=await w(e,r);l=l||{},l.layers=(null==(a=l.layers)?void 0:a.filter(I))||[];const n={serviceJSON:l};if(l.currentVersion<10.5)return n;const s=await w(e+\"/layers\",r);return n.layersJSON={layers:(null==s||null==(t=s.layers)?void 0:t.filter(I))||[],tables:(null==s?void 0:s.tables)||[]},n}async function m(e){return(0,u[e])()}async function S(e,r){return(await w(e,r)).tileInfo}async function w(r,a){return(await e(r,{responseType:\"json\",query:{f:\"json\",...a}})).data}export{i as fromUrl};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nconst a={BingMapsLayer:async()=>(await import(\"../BingMapsLayer.js\")).default,BuildingSceneLayer:async()=>(await import(\"../BuildingSceneLayer.js\")).default,CSVLayer:async()=>(await import(\"../CSVLayer.js\")).default,ElevationLayer:async()=>(await import(\"../ElevationLayer.js\")).default,FeatureLayer:async()=>(await import(\"../FeatureLayer.js\")).default,GroupLayer:async()=>(await import(\"../GroupLayer.js\")).default,GeoRSSLayer:async()=>(await import(\"../GeoRSSLayer.js\")).default,ImageryLayer:async()=>(await import(\"../ImageryLayer.js\")).default,ImageryTileLayer:async()=>(await import(\"../ImageryTileLayer.js\")).default,IntegratedMeshLayer:async()=>(await import(\"../IntegratedMeshLayer.js\")).default,KMLLayer:async()=>(await import(\"../KMLLayer.js\")).default,MapImageLayer:async()=>(await import(\"../MapImageLayer.js\")).default,MapNotesLayer:async()=>(await import(\"../MapNotesLayer.js\")).default,OGCFeatureLayer:async()=>(await import(\"../OGCFeatureLayer.js\")).default,OpenStreetMapLayer:async()=>(await import(\"../OpenStreetMapLayer.js\")).default,PointCloudLayer:async()=>(await import(\"../PointCloudLayer.js\")).default,RouteLayer:async()=>(await import(\"../RouteLayer.js\")).default,SceneLayer:async()=>(await import(\"../SceneLayer.js\")).default,StreamLayer:async()=>(await import(\"../StreamLayer.js\")).default,TileLayer:async()=>(await import(\"../TileLayer.js\")).default,UnknownLayer:async()=>(await import(\"../UnknownLayer.js\")).default,UnsupportedLayer:async()=>(await import(\"../UnsupportedLayer.js\")).default,VectorTileLayer:async()=>(await import(\"../VectorTileLayer.js\")).default,VoxelLayer:async()=>(await import(\"../VoxelLayer.js\")).default,WebTileLayer:async()=>(await import(\"../WebTileLayer.js\")).default,WFSLayer:async()=>(await import(\"../WFSLayer.js\")).default,WMSLayer:async()=>(await import(\"../WMSLayer.js\")).default,WMTSLayer:async()=>(await import(\"../WMTSLayer.js\")).default};export{a as layerLookupMap};\n"],"sourceRoot":""}