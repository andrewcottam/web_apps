(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[50,16,53],{1012:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return K}));var a=r(7),n=r.n(a),i=r(12),o=r(13),s=r(2),l=r(4),c=r(5),u=r(6),b=r(0),p=r(82),d=r(665),y=r(29),f=r(726),v=r(344),j=r(11),O=r(677),h=r(30),m=r(1),g=(r(19),r(14)),w=(r(15),r(57)),S=r(10),x=r(43),k=r(164),I=r(58),T=r(346),F=r(682),E=r(724),P=r(898),L=r(710),V=r(730),D=r(721),N=r(709),_=r(699),C=r(697),R=r(716),M=r(899),A=r(719),U=r(671),q=r(60),J=r(824),z=r(832),B={visible:"visibleSublayers",definitionExpression:"layerDefs",labelingInfo:"hasDynamicLayers",labelsVisible:"hasDynamicLayers",opacity:"hasDynamicLayers",minScale:"visibleSublayers",maxScale:"visibleSublayers",renderer:"hasDynamicLayers",source:"hasDynamicLayers"},H=function(e){Object(c.a)(r,e);var t=Object(u.a)(r);function r(e){var a;return Object(s.a)(this,r),(a=t.call(this,e)).floors=null,a.scale=0,a}return Object(l.a)(r,[{key:"destroy",value:function(){this.layer=null}},{key:"dynamicLayers",get:function(){var e=this;if(!this.hasDynamicLayers)return null;var t=this.visibleSublayers.map((function(t){var r=Object(z.c)(e.floors,t);return t.toExportImageJSON(r)}));return t.length?JSON.stringify(t):null}},{key:"hasDynamicLayers",get:function(){return this.layer&&Object(J.a)(this.visibleSublayers,this.layer.serviceSublayers,this.layer)}},{key:"layer",set:function(e){var t=this;this._get("layer")!==e&&(this._set("layer",e),this.handles.remove("layer"),e&&this.handles.add([e.allSublayers.on("change",(function(){return t.notifyChange("visibleSublayers")})),e.on("sublayer-update",(function(e){return t.notifyChange(B[e.propertyName])}))],"layer"))}},{key:"layers",get:function(){var e=this.visibleSublayers;return e?e.length?"show:"+e.map((function(e){return e.id})).join(","):"show:-1":null}},{key:"layerDefs",get:function(){var e,t=this,r=!(null==(e=this.floors)||!e.length),a=this.visibleSublayers.filter((function(e){return null!=e.definitionExpression||r&&null!=e.floorInfo}));return a.length?JSON.stringify(a.reduce((function(e,r){var a=Object(z.c)(t.floors,r),n=Object(j.j)(a)?Object(z.a)(a,r):r.definitionExpression;return e[r.id]=n,e}),{})):null}},{key:"version",get:function(){this.commitProperty("layers"),this.commitProperty("layerDefs"),this.commitProperty("dynamicLayers"),this.commitProperty("timeExtent");var e=this.layer;return e&&(e.commitProperty("dpi"),e.commitProperty("imageFormat"),e.commitProperty("imageTransparency"),e.commitProperty("gdbVersion")),(this._get("version")||0)+1}},{key:"visibleSublayers",get:function(){var e=this,t=[];if(!this.layer)return t;var r=this.layer.sublayers;r&&r.forEach((function r(a){var n=e.scale,i=0===n,o=0===a.minScale||n<=a.minScale,s=0===a.maxScale||n>=a.maxScale;a.visible&&(i||o&&s)&&(a.sublayers?a.sublayers.forEach(r):t.unshift(a))}));var a=this._get("visibleSublayers");return!a||a.length!==t.length||a.some((function(e,r){return t[r]!==e}))?t:a}},{key:"toJSON",value:function(){var e=this.layer,t={dpi:e.dpi,format:e.imageFormat,transparent:e.imageTransparency,gdbVersion:e.gdbVersion||null};return this.hasDynamicLayers&&this.dynamicLayers?t.dynamicLayers=this.dynamicLayers:t=Object(o.a)(Object(o.a)({},t),{},{layers:this.layers,layerDefs:this.layerDefs}),t}}]),r}(Object(f.b)(q.a));Object(b.a)([Object(m.b)({readOnly:!0})],H.prototype,"dynamicLayers",null),Object(b.a)([Object(m.b)()],H.prototype,"floors",void 0),Object(b.a)([Object(m.b)({readOnly:!0})],H.prototype,"hasDynamicLayers",null),Object(b.a)([Object(m.b)()],H.prototype,"layer",null),Object(b.a)([Object(m.b)({readOnly:!0})],H.prototype,"layers",null),Object(b.a)([Object(m.b)({readOnly:!0})],H.prototype,"layerDefs",null),Object(b.a)([Object(m.b)({type:Number})],H.prototype,"scale",void 0),Object(b.a)([Object(m.b)(U.a)],H.prototype,"timeExtent",void 0),Object(b.a)([Object(m.b)({readOnly:!0})],H.prototype,"version",null),Object(b.a)([Object(m.b)({readOnly:!0})],H.prototype,"visibleSublayers",null),H=Object(b.a)([Object(S.a)("esri.layers.mixins.ExportImageParameters")],H);var G=r(839),$=function(e){Object(c.a)(r,e);var t=Object(u.a)(r);function r(){var e;Object(s.a)(this,r);for(var a=arguments.length,n=new Array(a),i=0;i<a;i++)n[i]=arguments[i];return(e=t.call.apply(t,[this].concat(n))).datesInUnknownTimezone=!1,e.dpi=96,e.gdbVersion=null,e.imageFormat="png24",e.imageMaxHeight=2048,e.imageMaxWidth=2048,e.imageTransparency=!0,e.isReference=null,e.labelsVisible=!1,e.operationalLayerType="ArcGISMapServiceLayer",e.sourceJSON=null,e.sublayers=null,e.type="map-image",e.url=null,e}return Object(l.a)(r,[{key:"normalizeCtorArgs",value:function(e,t){return"string"==typeof e?Object(o.a)({url:e},t):e}},{key:"load",value:function(e){var t=this,r=Object(j.j)(e)?e.signal:null;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Map Service"]},e).catch(h.u).then((function(){return t._fetchService(r)}))),Promise.resolve(this)}},{key:"readImageFormat",value:function(e,t){var r=t.supportedImageFormatTypes;return r&&r.indexOf("PNG32")>-1?"png32":"png24"}},{key:"writeSublayers",value:function(e,t,r,a){if(this.loaded&&e){var n=e.slice().reverse().flatten((function(e){var t=e.sublayers;return t&&t.toArray().reverse()})).toArray(),i=!1;if(this.capabilities&&this.capabilities.operations.supportsExportMap&&this.capabilities.exportMap.supportsDynamicLayers){var s=Object(k.d)(a.origin);if(3===s){var l=this.createSublayersForOrigin("service").sublayers;i=Object(J.c)(n,l,2)}else if(s>3){var c=this.createSublayersForOrigin("portal-item");i=Object(J.c)(n,c.sublayers,Object(k.d)(c.origin))}}var u=[],b=Object(o.a)({writeSublayerStructure:i},a),p=i;n.forEach((function(e){var t=e.write({},b);u.push(t),p=p||"user"===e.originOf("visible")})),u.some((function(e){return Object.keys(e).length>1}))&&(t.layers=u),p&&(t.visibleLayers=n.filter((function(e){return e.visible})).map((function(e){return e.id})))}}},{key:"createExportImageParameters",value:function(e,t,r,a){var n=a&&a.pixelRatio||1;e&&this.version>=10&&(e=e.clone().shiftCentralMeridian());var i=new H({layer:this,floors:null==a?void 0:a.floors,scale:Object(T.b)({extent:e,width:t})*n}),s=i.toJSON();i.destroy();var l=!a||!a.rotation||this.version<10.3?{}:{rotation:-a.rotation},c=e&&e.spatialReference,u=c.wkid||JSON.stringify(c.toJSON());s.dpi*=n;var b={};if(null!=a&&a.timeExtent){var p=a.timeExtent.toJSON(),d=p.start,y=p.end;b.time=d&&y&&d===y?""+d:"".concat(null==d?"null":d,",").concat(null==y?"null":y)}else this.timeInfo&&!this.timeInfo.hasLiveData&&(b.time="null,null");return Object(o.a)(Object(o.a)(Object(o.a)({bbox:e&&e.xmin+","+e.ymin+","+e.xmax+","+e.ymax,bboxSR:u,imageSR:u,size:t+","+r},s),l),b)}},{key:"fetchImage",value:function(){var e=Object(i.a)(n.a.mark((function e(t,r,a,i){var s,l,c;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l={responseType:"image",signal:null!=(s=null==i?void 0:i.signal)?s:null,query:Object(o.a)(Object(o.a)(Object(o.a)(Object(o.a)(Object(o.a)({},this.parsedUrl.query),this.createExportImageParameters(t,r,a,i)),{},{f:"image"},this.refreshParameters),this.customParameters),{},{token:this.apiKey})},c=this.parsedUrl.path+"/export",null==l.query.dynamicLayers||this.capabilities.exportMap.supportsDynamicLayers){e.next=3;break}return e.abrupt("return",Promise.reject(new y.a("mapimagelayer:dynamiclayer-not-supported","service ".concat(this.url," doesn't support dynamic layers, which is required to be able to change the sublayer's order, rendering, labeling or source."),{query:l.query})));case 3:return e.abrupt("return",Object(p.default)(c,l).then((function(e){return e.data})).catch((function(e){if(Object(h.m)(e))throw e;throw new y.a("mapimagelayer:image-fetch-error","Unable to load image: ".concat(c),{error:e})})));case 4:case"end":return e.stop()}}),e,this)})));return function(t,r,a,n){return e.apply(this,arguments)}}()},{key:"fetchRecomputedExtents",value:function(){var e=Object(i.a)(n.a.mark((function e(){var t,r,a,i,s,l,c,u,b=arguments;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=b.length>0&&void 0!==b[0]?b[0]:{},r=Object(o.a)(Object(o.a)({},t),{},{query:Object(o.a)(Object(o.a)({returnUpdates:!0,f:"json"},this.customParameters),{},{token:this.apiKey})}),e.next=4,Object(p.default)(this.url,r);case 4:return a=e.sent,i=a.data,s=i.extent,l=i.fullExtent,c=i.timeExtent,u=s||l,e.abrupt("return",{fullExtent:u&&I.a.fromJSON(u),timeExtent:c&&d.a.fromJSON({start:c[0],end:c[1]})});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadAll",value:function(){var e=this;return Object(v.a)(this,(function(t){t(e.allSublayers)}))}},{key:"_fetchService",value:function(){var e=Object(i.a)(n.a.mark((function e(t){var r,a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.sourceJSON){e.next=2;break}return e.abrupt("return",void this.read(this.sourceJSON,{origin:"service",url:this.parsedUrl}));case 2:return e.next=4,Object(p.default)(this.parsedUrl.path,{query:Object(o.a)(Object(o.a)(Object(o.a)({f:"json"},this.parsedUrl.query),this.customParameters),{},{token:this.apiKey}),signal:t});case 4:r=e.sent,a=r.data,r.ssl&&(this.url=this.url.replace(/^http:/i,"https:")),this.sourceJSON=a,this.read(a,{origin:"service",url:this.parsedUrl});case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(Object(V.a)(Object(A.a)(Object(R.a)(Object(M.a)(Object(P.a)(Object(L.a)(Object(N.a)(Object(_.a)(Object(O.a)(Object(C.a)(Object(E.a)(Object(D.a)(Object(f.b)(F.a))))))))))))));Object(b.a)([Object(m.b)({type:Boolean})],$.prototype,"datesInUnknownTimezone",void 0),Object(b.a)([Object(m.b)()],$.prototype,"dpi",void 0),Object(b.a)([Object(m.b)()],$.prototype,"gdbVersion",void 0),Object(b.a)([Object(m.b)()],$.prototype,"imageFormat",void 0),Object(b.a)([Object(w.a)("imageFormat",["supportedImageFormatTypes"])],$.prototype,"readImageFormat",null),Object(b.a)([Object(m.b)({json:{origins:{service:{read:{source:"maxImageHeight"}}}}})],$.prototype,"imageMaxHeight",void 0),Object(b.a)([Object(m.b)({json:{origins:{service:{read:{source:"maxImageWidth"}}}}})],$.prototype,"imageMaxWidth",void 0),Object(b.a)([Object(m.b)()],$.prototype,"imageTransparency",void 0),Object(b.a)([Object(m.b)({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:function(){return{enabled:!1}}}}})],$.prototype,"isReference",void 0),Object(b.a)([Object(m.b)({json:{read:!1,write:!1}})],$.prototype,"labelsVisible",void 0),Object(b.a)([Object(m.b)({type:["ArcGISMapServiceLayer"]})],$.prototype,"operationalLayerType",void 0),Object(b.a)([Object(m.b)({json:{read:!1,write:!1}})],$.prototype,"popupEnabled",void 0),Object(b.a)([Object(m.b)()],$.prototype,"sourceJSON",void 0),Object(b.a)([Object(m.b)({json:{write:{ignoreOrigin:!0}}})],$.prototype,"sublayers",void 0),Object(b.a)([Object(x.a)("sublayers",{layers:{type:[G.a]},visibleLayers:{type:[g.a]}})],$.prototype,"writeSublayers",null),Object(b.a)([Object(m.b)({type:["show","hide","hide-children"]})],$.prototype,"listMode",void 0),Object(b.a)([Object(m.b)({json:{read:!1},readOnly:!0,value:"map-image"})],$.prototype,"type",void 0),Object(b.a)([Object(m.b)(U.n)],$.prototype,"url",void 0);var K=$=Object(b.a)([Object(S.a)("esri.layers.MapImageLayer")],$)},660:function(e,t,r){"use strict";r.d(t,"a",(function(){return y}));var a=r(2),n=r(5),i=r(6),o=r(0),s=r(42),l=r(26),c=r(1),u=(r(19),r(14),r(15),r(31)),b=r(10),p=new s.a({inherited:"inherited",codedValue:"coded-value",range:"range"}),d=function(e){Object(n.a)(r,e);var t=Object(i.a)(r);function r(e){var n;return Object(a.a)(this,r),(n=t.call(this,e)).name=null,n.type=null,n}return r}(l.a);Object(o.a)([Object(c.b)({type:String,json:{write:!0}})],d.prototype,"name",void 0),Object(o.a)([Object(u.a)(p)],d.prototype,"type",void 0);var y=d=Object(o.a)([Object(b.a)("esri.layers.support.Domain")],d)},661:function(e,t,r){"use strict";r.d(t,"a",(function(){return d}));var a,n=r(2),i=r(4),o=r(5),s=r(6),l=r(0),c=(r(1),r(19),r(14),r(15),r(31)),u=r(10),b=r(660),p=a=function(e){Object(o.a)(r,e);var t=Object(s.a)(r);function r(e){var a;return Object(n.a)(this,r),(a=t.call(this,e)).type="inherited",a}return Object(i.a)(r,[{key:"clone",value:function(){return new a}}]),r}(b.a);Object(l.a)([Object(c.a)({inherited:"inherited"})],p.prototype,"type",void 0);var d=p=a=Object(l.a)([Object(u.a)("esri.layers.support.InheritedDomain")],p)},662:function(e,t,r){"use strict";r.d(t,"a",(function(){return y}));var a,n=r(2),i=r(4),o=r(5),s=r(6),l=r(0),c=r(1),u=(r(19),r(14),r(15),r(31)),b=r(10),p=r(660),d=a=function(e){Object(o.a)(r,e);var t=Object(s.a)(r);function r(e){var a;return Object(n.a)(this,r),(a=t.call(this,e)).maxValue=null,a.minValue=null,a.type="range",a}return Object(i.a)(r,[{key:"clone",value:function(){return new a({maxValue:this.maxValue,minValue:this.minValue,name:this.name})}}]),r}(p.a);Object(l.a)([Object(c.b)({type:Number,json:{type:[Number],read:{source:"range",reader:function(e,t){return t.range&&t.range[1]}},write:{enabled:!1,overridePolicy:function(){return{enabled:null!=this.maxValue&&null==this.minValue}},target:"range",writer:function(e,t,r){t[r]=[this.minValue||0,e]}}}})],d.prototype,"maxValue",void 0),Object(l.a)([Object(c.b)({type:Number,json:{type:[Number],read:{source:"range",reader:function(e,t){return t.range&&t.range[0]}},write:{target:"range",writer:function(e,t,r){t[r]=[e,this.maxValue||0]}}}})],d.prototype,"minValue",void 0),Object(l.a)([Object(u.a)({range:"range"})],d.prototype,"type",void 0);var y=d=a=Object(l.a)([Object(b.a)("esri.layers.support.RangeDomain")],d)},664:function(e,t,r){"use strict";r.d(t,"a",(function(){return h}));var a,n=r(2),i=r(4),o=r(5),s=r(6),l=r(0),c=r(18),u=r(1),b=(r(14),r(19),r(15),r(31)),p=r(10),d=r(26),y=a=function(e){Object(o.a)(r,e);var t=Object(s.a)(r);function r(e){var a;return Object(n.a)(this,r),(a=t.call(this,e)).name=null,a.code=null,a}return Object(i.a)(r,[{key:"clone",value:function(){return new a({name:this.name,code:this.code})}}]),r}(d.a);Object(l.a)([Object(u.b)({type:String,json:{write:!0}})],y.prototype,"name",void 0),Object(l.a)([Object(u.b)({type:[String,Number],json:{write:!0}})],y.prototype,"code",void 0);var f,v=y=a=Object(l.a)([Object(p.a)("esri.layers.support.CodedValue")],y),j=r(660),O=f=function(e){Object(o.a)(r,e);var t=Object(s.a)(r);function r(e){var a;return Object(n.a)(this,r),(a=t.call(this,e)).codedValues=null,a.type="coded-value",a}return Object(i.a)(r,[{key:"getName",value:function(e){var t=null;if(this.codedValues){var r=String(e);this.codedValues.some((function(e){return String(e.code)===r&&(t=e.name),!!t}))}return t}},{key:"clone",value:function(){return new f({codedValues:Object(c.a)(this.codedValues),name:this.name})}}]),r}(j.a);Object(l.a)([Object(u.b)({type:[v],json:{write:!0}})],O.prototype,"codedValues",void 0),Object(l.a)([Object(b.a)({codedValue:"coded-value"})],O.prototype,"type",void 0);var h=O=f=Object(l.a)([Object(p.a)("esri.layers.support.CodedValueDomain")],O)},666:function(e,t,r){"use strict";r.d(t,"a",(function(){return m}));var a,n=r(2),i=r(4),o=r(5),s=r(6),l=r(0),c=r(42),u=r(26),b=r(1),p=(r(19),r(14)),d=(r(15),r(31)),y=r(57),f=r(10),v=r(679),j=r(690),O=new c.a({binary:"binary",coordinate:"coordinate",countOrAmount:"count-or-amount",dateAndTime:"date-and-time",description:"description",locationOrPlaceName:"location-or-place-name",measurement:"measurement",nameOrTitle:"name-or-title",none:"none",orderedOrRanked:"ordered-or-ranked",percentageOrRatio:"percentage-or-ratio",typeOrCategory:"type-or-category",uniqueIdentifier:"unique-identifier"}),h=a=function(e){Object(o.a)(r,e);var t=Object(s.a)(r);function r(e){var a;return Object(n.a)(this,r),(a=t.call(this,e)).alias=null,a.defaultValue=void 0,a.description=null,a.domain=null,a.editable=!0,a.length=-1,a.name=null,a.nullable=!0,a.type=null,a.valueType=null,a}return Object(i.a)(r,[{key:"readDescription",value:function(e,t){var r,a=t.description;try{r=JSON.parse(a)}catch(n){}return r?r.value:null}},{key:"readValueType",value:function(e,t){var r,a=t.description;try{r=JSON.parse(a)}catch(n){}return r?O.fromJSON(r.fieldValueType):null}},{key:"clone",value:function(){return new a({alias:this.alias,defaultValue:this.defaultValue,description:this.description,domain:this.domain&&this.domain.clone()||null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type,valueType:this.valueType})}}]),r}(u.a);Object(l.a)([Object(b.b)({type:String,json:{write:!0}})],h.prototype,"alias",void 0),Object(l.a)([Object(b.b)({type:[String,Number],json:{write:{allowNull:!0}}})],h.prototype,"defaultValue",void 0),Object(l.a)([Object(b.b)()],h.prototype,"description",void 0),Object(l.a)([Object(y.a)("description")],h.prototype,"readDescription",null),Object(l.a)([Object(b.b)({types:v.b,json:{read:{reader:v.a},write:!0}})],h.prototype,"domain",void 0),Object(l.a)([Object(b.b)({type:Boolean,json:{write:!0}})],h.prototype,"editable",void 0),Object(l.a)([Object(b.b)({type:p.a,json:{write:!0}})],h.prototype,"length",void 0),Object(l.a)([Object(b.b)({type:String,json:{write:!0}})],h.prototype,"name",void 0),Object(l.a)([Object(b.b)({type:Boolean,json:{write:!0}})],h.prototype,"nullable",void 0),Object(l.a)([Object(d.a)(j.a)],h.prototype,"type",void 0),Object(l.a)([Object(b.b)()],h.prototype,"valueType",void 0),Object(l.a)([Object(y.a)("valueType",["description"])],h.prototype,"readValueType",null);var m=h=a=Object(l.a)([Object(f.a)("esri.layers.support.Field")],h)},669:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var a=r(42),n=Object(a.b)()({esriTimeUnitsMilliseconds:"milliseconds",esriTimeUnitsSeconds:"seconds",esriTimeUnitsMinutes:"minutes",esriTimeUnitsHours:"hours",esriTimeUnitsDays:"days",esriTimeUnitsWeeks:"weeks",esriTimeUnitsMonths:"months",esriTimeUnitsYears:"years",esriTimeUnitsDecades:"decades",esriTimeUnitsCenturies:"centuries",esriTimeUnitsUnknown:void 0})},670:function(e,t,r){"use strict";r.d(t,"a",(function(){return P}));var a,n=r(2),i=r(4),o=r(5),s=r(6),l=r(0),c=r(114),u=r(665),b=r(42),p=r(26),d=r(18),y=r(11),f=r(1),v=r(97),j=(r(19),r(15),r(31)),O=r(10),h=r(43),m=r(14),g=r(62),w=r(673),S=r(717),x=r(714),k=r(45),I=r(48),T=new b.a({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),F=new b.a({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"}),E=a=function(e){Object(o.a)(r,e);var t=Object(s.a)(r);function r(e){var a;return Object(n.a)(this,r),(a=t.call(this,e)).aggregateIds=null,a.cacheHint=void 0,a.datumTransformation=null,a.distance=void 0,a.dynamicDataSource=void 0,a.formatOf3DObjects=null,a.gdbVersion=null,a.geometry=null,a.geometryPrecision=void 0,a.groupByFieldsForStatistics=null,a.having=null,a.historicMoment=null,a.maxAllowableOffset=void 0,a.maxRecordCountFactor=1,a.multipatchOption=null,a.num=void 0,a.objectIds=null,a.orderByFields=null,a.outFields=null,a.outSpatialReference=null,a.outStatistics=null,a.parameterValues=null,a.pixelSize=null,a.quantizationParameters=null,a.rangeValues=null,a.relationParameter=null,a.resultType=null,a.returnCentroid=!1,a.returnDistinctValues=!1,a.returnExceededLimitFeatures=!0,a.returnGeometry=!1,a.returnQueryGeometry=!1,a.returnM=void 0,a.returnZ=void 0,a.sourceSpatialReference=null,a.spatialRelationship="intersects",a.start=void 0,a.sqlFormat=null,a.text=null,a.timeExtent=null,a.timeReferenceUnknownClient=!1,a.units=null,a.where=null,a}return Object(i.a)(r,[{key:"castDatumTransformation",value:function(e){return"number"==typeof e||"object"==typeof e?e:null}},{key:"writeHistoricMoment",value:function(e,t){t.historicMoment=e&&e.getTime()}},{key:"writeParameterValues",value:function(e,t){if(e){var r={};for(var a in e){var n=e[a];Array.isArray(n)?r[a]=n.map((function(e){return e instanceof Date?e.getTime():e})):n instanceof Date?r[a]=n.getTime():r[a]=n}t.parameterValues=r}}},{key:"writeStart",value:function(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10,t.where="1=1"}},{key:"writeWhere",value:function(e,t){t.where=e||"1=1"}},{key:"clone",value:function(){return new a(Object(d.a)({aggregateIds:this.aggregateIds,cacheHint:this.cacheHint,datumTransformation:this.datumTransformation,distance:this.distance,gdbVersion:this.gdbVersion,geometry:this.geometry,geometryPrecision:this.geometryPrecision,groupByFieldsForStatistics:this.groupByFieldsForStatistics,having:this.having,historicMoment:Object(y.j)(this.historicMoment)?new Date(this.historicMoment.getTime()):null,maxAllowableOffset:this.maxAllowableOffset,maxRecordCountFactor:this.maxRecordCountFactor,multipatchOption:this.multipatchOption,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,outStatistics:this.outStatistics,parameterValues:this.parameterValues,pixelSize:this.pixelSize,quantizationParameters:this.quantizationParameters,rangeValues:this.rangeValues,relationParameter:this.relationParameter,resultType:this.resultType,returnDistinctValues:this.returnDistinctValues,returnGeometry:this.returnGeometry,returnCentroid:this.returnCentroid,returnExceededLimitFeatures:this.returnExceededLimitFeatures,returnQueryGeometry:this.returnQueryGeometry,returnM:this.returnM,returnZ:this.returnZ,dynamicDataSource:this.dynamicDataSource,sourceSpatialReference:this.sourceSpatialReference,spatialRelationship:this.spatialRelationship,start:this.start,sqlFormat:this.sqlFormat,text:this.text,timeExtent:this.timeExtent,timeReferenceUnknownClient:this.timeReferenceUnknownClient,units:this.units,where:this.where}))}}],[{key:"from",value:function(e){return Object(m.d)(a,e)}}]),r}(p.a);E.MAX_MAX_RECORD_COUNT_FACTOR=5,Object(l.a)([Object(f.b)({json:{write:!0}})],E.prototype,"aggregateIds",void 0),Object(l.a)([Object(f.b)({type:Boolean,json:{write:!0}})],E.prototype,"cacheHint",void 0),Object(l.a)([Object(f.b)({json:{write:!0}})],E.prototype,"datumTransformation",void 0),Object(l.a)([Object(v.a)("datumTransformation")],E.prototype,"castDatumTransformation",null),Object(l.a)([Object(f.b)({type:Number,json:{write:{overridePolicy:function(e){return{enabled:e>0}}}}})],E.prototype,"distance",void 0),Object(l.a)([Object(f.b)({type:w.a,json:{write:!0}})],E.prototype,"dynamicDataSource",void 0),Object(l.a)([Object(f.b)({type:String,json:{write:!0}})],E.prototype,"formatOf3DObjects",void 0),Object(l.a)([Object(f.b)({type:String,json:{write:!0}})],E.prototype,"gdbVersion",void 0),Object(l.a)([Object(f.b)({types:c.a,json:{read:g.a,write:!0}})],E.prototype,"geometry",void 0),Object(l.a)([Object(f.b)({type:Number,json:{write:!0}})],E.prototype,"geometryPrecision",void 0),Object(l.a)([Object(f.b)({type:[String],json:{write:!0}})],E.prototype,"groupByFieldsForStatistics",void 0),Object(l.a)([Object(f.b)({type:String,json:{write:!0}})],E.prototype,"having",void 0),Object(l.a)([Object(f.b)({type:Date})],E.prototype,"historicMoment",void 0),Object(l.a)([Object(h.a)("historicMoment")],E.prototype,"writeHistoricMoment",null),Object(l.a)([Object(f.b)({type:Number,json:{write:!0}})],E.prototype,"maxAllowableOffset",void 0),Object(l.a)([Object(f.b)({type:Number,cast:function(e){return e<1?1:e>a.MAX_MAX_RECORD_COUNT_FACTOR?a.MAX_MAX_RECORD_COUNT_FACTOR:e},json:{write:{overridePolicy:function(e){return{enabled:e>1}}}}})],E.prototype,"maxRecordCountFactor",void 0),Object(l.a)([Object(f.b)({type:["xyFootprint"],json:{write:!0}})],E.prototype,"multipatchOption",void 0),Object(l.a)([Object(f.b)({type:Number,json:{read:{source:"resultRecordCount"}}})],E.prototype,"num",void 0),Object(l.a)([Object(f.b)({json:{write:!0}})],E.prototype,"objectIds",void 0),Object(l.a)([Object(f.b)({type:[String],json:{write:!0}})],E.prototype,"orderByFields",void 0),Object(l.a)([Object(f.b)({type:[String],json:{write:!0}})],E.prototype,"outFields",void 0),Object(l.a)([Object(f.b)({type:k.a,json:{name:"outSR",write:!0}})],E.prototype,"outSpatialReference",void 0),Object(l.a)([Object(f.b)({type:[x.a],json:{write:{enabled:!0,overridePolicy:function(){return{enabled:Object(y.j)(this.outStatistics)&&this.outStatistics.length>0}}}}})],E.prototype,"outStatistics",void 0),Object(l.a)([Object(f.b)({json:{write:!0}})],E.prototype,"parameterValues",void 0),Object(l.a)([Object(h.a)("parameterValues")],E.prototype,"writeParameterValues",null),Object(l.a)([Object(f.b)({type:I.a,json:{write:!0}})],E.prototype,"pixelSize",void 0),Object(l.a)([Object(f.b)({type:S.a,json:{write:!0}})],E.prototype,"quantizationParameters",void 0),Object(l.a)([Object(f.b)({type:[Object],json:{write:!0}})],E.prototype,"rangeValues",void 0),Object(l.a)([Object(f.b)({type:String,json:{read:{source:"relationParam"},write:{target:"relationParam",overridePolicy:function(){return{enabled:"relation"===this.spatialRelationship}}}}})],E.prototype,"relationParameter",void 0),Object(l.a)([Object(f.b)({type:String,json:{write:!0}})],E.prototype,"resultType",void 0),Object(l.a)([Object(f.b)({type:Boolean,json:{default:!1,write:!0}})],E.prototype,"returnCentroid",void 0),Object(l.a)([Object(f.b)({type:Boolean,json:{default:!1,write:!0}})],E.prototype,"returnDistinctValues",void 0),Object(l.a)([Object(f.b)({type:Boolean,json:{default:!0,write:!0}})],E.prototype,"returnExceededLimitFeatures",void 0),Object(l.a)([Object(f.b)({type:Boolean,json:{write:!0}})],E.prototype,"returnGeometry",void 0),Object(l.a)([Object(f.b)({type:Boolean,json:{default:!1,write:!0}})],E.prototype,"returnQueryGeometry",void 0),Object(l.a)([Object(f.b)({type:Boolean,json:{default:!1,write:!0}})],E.prototype,"returnM",void 0),Object(l.a)([Object(f.b)({type:Boolean,json:{write:{overridePolicy:function(e){return{enabled:e}}}}})],E.prototype,"returnZ",void 0),Object(l.a)([Object(f.b)({type:k.a,json:{write:!0}})],E.prototype,"sourceSpatialReference",void 0),Object(l.a)([Object(j.a)(T,{ignoreUnknown:!1,name:"spatialRel"})],E.prototype,"spatialRelationship",void 0),Object(l.a)([Object(f.b)({type:Number,json:{read:{source:"resultOffset"}}})],E.prototype,"start",void 0),Object(l.a)([Object(h.a)("start"),Object(h.a)("num")],E.prototype,"writeStart",null),Object(l.a)([Object(f.b)({type:String,json:{write:!0}})],E.prototype,"sqlFormat",void 0),Object(l.a)([Object(f.b)({type:String,json:{write:!0}})],E.prototype,"text",void 0),Object(l.a)([Object(f.b)({type:u.a,json:{write:!0}})],E.prototype,"timeExtent",void 0),Object(l.a)([Object(f.b)({type:Boolean,json:{default:!1,write:!0}})],E.prototype,"timeReferenceUnknownClient",void 0),Object(l.a)([Object(j.a)(F,{ignoreUnknown:!1}),Object(f.b)({json:{write:{overridePolicy:function(e){return{enabled:e&&this.distance>0}}}}})],E.prototype,"units",void 0),Object(l.a)([Object(f.b)({type:String,json:{write:{overridePolicy:function(e){return{enabled:null!=e||this.start>0}}}}})],E.prototype,"where",void 0),Object(l.a)([Object(h.a)("where")],E.prototype,"writeWhere",null);var P=E=a=Object(l.a)([Object(O.a)("esri.rest.support.Query")],E)},672:function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));var a=r(21),n=r(2),i=r(4);function o(e){return"date"===e.type||"esriFieldTypeDate"===e.type}var s=function(){function e(t){if(Object(n.a)(this,e),this.fields=t,this._fieldsMap=new Map,this._dateFieldsSet=new Set,this.dateFields=[],t){var r,i=[],s=Object(a.a)(t);try{for(s.s();!(r=s.n()).done;){var c=r.value,u=c&&c.name;if(u){var b=l(u);this._fieldsMap.set(u,c),this._fieldsMap.set(b,c),i.push(b),o(c)&&(this.dateFields.push(c),this._dateFieldsSet.add(c))}}}catch(p){s.e(p)}finally{s.f()}i.sort(),this.uid=i.join(",")}}return Object(i.a)(e,[{key:"destroy",value:function(){this._fieldsMap.clear()}},{key:"has",value:function(e){return null!=this.get(e)}},{key:"get",value:function(e){return null!=e?this._fieldsMap.get(e)||this._fieldsMap.get(l(e)):void 0}},{key:"isDateField",value:function(e){return this._dateFieldsSet.has(this.get(e))}},{key:"normalizeFieldName",value:function(e){var t=this.get(e);if(t)return t.name}}]),e}();function l(e){return e.toLowerCase().trim()}},673:function(e,t,r){"use strict";r.d(t,"a",(function(){return C}));var a,n,i=r(2),o=r(4),s=r(5),l=r(6),c=r(0),u=r(42),b=r(26),p=r(1),d=(r(19),r(97)),y=(r(15),r(31)),f=r(57),v=r(10),j=r(14),O=r(212),h=r(666),m=r(711),g=(r(114),r(45)),w=r(236),S=a=function(e){Object(s.a)(r,e);var t=Object(l.a)(r);function r(e){var a;return Object(i.a)(this,r),(a=t.call(this,e)).type="query-table",a}return Object(o.a)(r,[{key:"clone",value:function(){var e,t=this.workspaceId,r=this.query,n=this.oidFields,i=this.spatialReference,o=this.geometryType,s={workspaceId:t,query:r,oidFields:n,spatialReference:null!=(e=null==i?void 0:i.clone())?e:void 0,geometryType:o};return new a(s)}}]),r}(b.a);Object(c.a)([Object(y.a)({queryTable:"query-table"})],S.prototype,"type",void 0),Object(c.a)([Object(p.b)({type:String,json:{write:!0}})],S.prototype,"workspaceId",void 0),Object(c.a)([Object(p.b)({type:String,json:{write:!0}})],S.prototype,"query",void 0),Object(c.a)([Object(p.b)({type:String,json:{write:!0}})],S.prototype,"oidFields",void 0),Object(c.a)([Object(p.b)({type:g.a,json:{write:!0}})],S.prototype,"spatialReference",void 0),Object(c.a)([Object(y.a)(w.a)],S.prototype,"geometryType",void 0),S=a=Object(c.a)([Object(v.a)("esri.layers.support.source.QueryTableDataSource")],S);var x,k=n=function(e){Object(s.a)(r,e);var t=Object(l.a)(r);function r(e){var a;return Object(i.a)(this,r),(a=t.call(this,e)).type="raster",a}return Object(o.a)(r,[{key:"clone",value:function(){var e=this.workspaceId,t=this.dataSourceName;return new n({workspaceId:e,dataSourceName:t})}}]),r}(b.a);Object(c.a)([Object(y.a)({raster:"raster"})],k.prototype,"type",void 0),Object(c.a)([Object(p.b)({type:String,json:{write:!0}})],k.prototype,"dataSourceName",void 0),Object(c.a)([Object(p.b)({type:String,json:{write:!0}})],k.prototype,"workspaceId",void 0),k=n=Object(c.a)([Object(v.a)("esri.layers.support.source.RasterDataSource")],k);var I,T,F=x=function(e){Object(s.a)(r,e);var t=Object(l.a)(r);function r(e){var a;return Object(i.a)(this,r),(a=t.call(this,e)).type="table",a}return Object(o.a)(r,[{key:"clone",value:function(){var e=this.workspaceId,t=this.gdbVersion,r=this.dataSourceName;return new x({workspaceId:e,gdbVersion:t,dataSourceName:r})}}]),r}(b.a);Object(c.a)([Object(y.a)({table:"table"})],F.prototype,"type",void 0),Object(c.a)([Object(p.b)({type:String,json:{write:!0}})],F.prototype,"workspaceId",void 0),Object(c.a)([Object(p.b)({type:String,json:{write:!0}})],F.prototype,"gdbVersion",void 0),Object(c.a)([Object(p.b)({type:String,json:{write:!0}})],F.prototype,"dataSourceName",void 0),F=x=Object(c.a)([Object(v.a)("esri.layers.support.source.TableDataSource")],F);var E=Object(u.b)()({esriLeftInnerJoin:"left-inner-join",esriLeftOuterJoin:"left-outer-join"}),P=I=function(e){Object(s.a)(r,e);var t=Object(l.a)(r);function r(e){var a;return Object(i.a)(this,r),(a=t.call(this,e)).type="join-table",a}return Object(o.a)(r,[{key:"readLeftTableSource",value:function(e,t,r){return V()(e,t,r)}},{key:"castLeftTableSource",value:function(e){return Object(j.k)(N(),e)}},{key:"readRightTableSource",value:function(e,t,r){return V()(e,t,r)}},{key:"castRightTableSource",value:function(e){return Object(j.k)(N(),e)}},{key:"clone",value:function(){var e,t,r=this.leftTableKey,a=this.rightTableKey,n=this.leftTableSource,i=this.rightTableSource,o=this.joinType,s={leftTableKey:r,rightTableKey:a,leftTableSource:null!=(e=null==n?void 0:n.clone())?e:void 0,rightTableSource:null!=(t=null==i?void 0:i.clone())?t:void 0,joinType:o};return new I(s)}}]),r}(b.a);Object(c.a)([Object(y.a)({joinTable:"join-table"})],P.prototype,"type",void 0),Object(c.a)([Object(p.b)({type:String,json:{write:!0}})],P.prototype,"leftTableKey",void 0),Object(c.a)([Object(p.b)({type:String,json:{write:!0}})],P.prototype,"rightTableKey",void 0),Object(c.a)([Object(p.b)({json:{write:!0}})],P.prototype,"leftTableSource",void 0),Object(c.a)([Object(f.a)("leftTableSource")],P.prototype,"readLeftTableSource",null),Object(c.a)([Object(d.a)("leftTableSource")],P.prototype,"castLeftTableSource",null),Object(c.a)([Object(p.b)({json:{write:!0}})],P.prototype,"rightTableSource",void 0),Object(c.a)([Object(f.a)("rightTableSource")],P.prototype,"readRightTableSource",null),Object(c.a)([Object(d.a)("rightTableSource")],P.prototype,"castRightTableSource",null),Object(c.a)([Object(y.a)(E)],P.prototype,"joinType",void 0),P=I=Object(c.a)([Object(v.a)("esri.layers.support.source.JoinTableDataSource")],P);var L=null;function V(){return L||(L=Object(O.b)({types:N()})),L}var D=null;function N(){return D||(D={key:"type",base:null,typeMap:{"data-layer":C,"map-layer":m.a}}),D}var _={key:"type",base:null,typeMap:{"join-table":P,"query-table":S,raster:k,table:F}},C=T=function(e){Object(s.a)(r,e);var t=Object(l.a)(r);function r(e){var a;return Object(i.a)(this,r),(a=t.call(this,e)).type="data-layer",a}return Object(o.a)(r,[{key:"clone",value:function(){var e=this.fields,t=this.dataSource;return new T({fields:e,dataSource:t})}}]),r}(b.a);Object(c.a)([Object(y.a)({dataLayer:"data-layer"})],C.prototype,"type",void 0),Object(c.a)([Object(p.b)({type:[h.a],json:{write:!0}})],C.prototype,"fields",void 0),Object(c.a)([Object(p.b)({types:_,json:{write:!0}})],C.prototype,"dataSource",void 0),(C=T=Object(c.a)([Object(v.a)("esri.layers.support.source.DataLayerSource")],C)).from=Object(j.m)(C)},675:function(e,t,r){"use strict";r.d(t,"a",(function(){return F}));var a,n=r(2),i=r(4),o=r(5),s=r(6),l=r(0),c=r(332),u=r(42),b=r(26),p=r(18),d=r(1),y=(r(14),r(19),r(15),r(57)),f=r(10),v=r(43),j=r(693),O=a=function(e){Object(o.a)(r,e);var t=Object(s.a)(r);function r(){var e;return Object(n.a)(this,r),(e=t.apply(this,arguments)).expression=null,e.title=null,e.value=null,e}return Object(i.a)(r,[{key:"readExpression",value:function(e,t){return t.value?Object(j.a)(t.value):e}},{key:"writeExpression",value:function(e,t,r){null!=this.value&&(e=Object(j.a)(this.value)),t[r]=e}},{key:"clone",value:function(){return new a({expression:this.expression,title:this.title,value:this.value})}}]),r}(b.a);Object(l.a)([Object(d.b)({type:String,json:{write:{allowNull:!0}}})],O.prototype,"expression",void 0),Object(l.a)([Object(y.a)("expression",["expression","value"])],O.prototype,"readExpression",null),Object(l.a)([Object(v.a)("expression")],O.prototype,"writeExpression",null),Object(l.a)([Object(d.b)({type:String,json:{write:!0,origins:{"web-scene":{write:!1}}}})],O.prototype,"title",void 0),Object(l.a)([Object(d.b)({json:{read:!1,write:!1}})],O.prototype,"value",void 0);var h,m=O=a=Object(l.a)([Object(f.a)("esri.layers.support.LabelExpressionInfo")],O),g=r(725),w=r(753),S=new u.a({esriServerPointLabelPlacementAboveCenter:"above-center",esriServerPointLabelPlacementAboveLeft:"above-left",esriServerPointLabelPlacementAboveRight:"above-right",esriServerPointLabelPlacementBelowCenter:"below-center",esriServerPointLabelPlacementBelowLeft:"below-left",esriServerPointLabelPlacementBelowRight:"below-right",esriServerPointLabelPlacementCenterCenter:"center-center",esriServerPointLabelPlacementCenterLeft:"center-left",esriServerPointLabelPlacementCenterRight:"center-right",esriServerLinePlacementAboveAfter:"above-after",esriServerLinePlacementAboveAlong:"above-along",esriServerLinePlacementAboveBefore:"above-before",esriServerLinePlacementAboveStart:"above-start",esriServerLinePlacementAboveEnd:"above-end",esriServerLinePlacementBelowAfter:"below-after",esriServerLinePlacementBelowAlong:"below-along",esriServerLinePlacementBelowBefore:"below-before",esriServerLinePlacementBelowStart:"below-start",esriServerLinePlacementBelowEnd:"below-end",esriServerLinePlacementCenterAfter:"center-after",esriServerLinePlacementCenterAlong:"center-along",esriServerLinePlacementCenterBefore:"center-before",esriServerLinePlacementCenterStart:"center-start",esriServerLinePlacementCenterEnd:"center-end",esriServerPolygonPlacementAlwaysHorizontal:"always-horizontal"},{ignoreUnknown:!0});function x(e){return!e||"service"!==e.origin&&!k(e.layer)}function k(e){return"map-image"===(null==e?void 0:e.type)}function I(e){var t,r;return!!k(e)&&!(null==(t=e.capabilities)||null==(r=t.exportMap)||!r.supportsArcadeExpressionForLabeling)}var T=h=function(e){Object(o.a)(r,e);var t=Object(s.a)(r);function r(e){var a;return Object(n.a)(this,r),(a=t.call(this,e)).type="label",a.name=null,a.deconflictionStrategy="static",a.labelExpression=null,a.labelExpressionInfo=null,a.labelPlacement=null,a.maxScale=0,a.minScale=0,a.symbol=g.a,a.useCodedValues=void 0,a.where=null,a}return Object(i.a)(r,[{key:"readLabelExpression",value:function(e,t){var r=t.labelExpressionInfo;if(!r||!r.value&&!r.expression)return e}},{key:"writeLabelExpression",value:function(e,t,r){if(this.labelExpressionInfo)if(null!=this.labelExpressionInfo.value)e=Object(j.f)(this.labelExpressionInfo.value);else if(null!=this.labelExpressionInfo.expression){var a=Object(j.e)(this.labelExpressionInfo.expression);a&&(e="["+a+"]")}null!=e&&(t[r]=e)}},{key:"writeLabelExpressionInfo",value:function(e,t,r,a){if(null==e&&null!=this.labelExpression&&x(a))e=new m({expression:this.getLabelExpressionArcade()});else if(!e)return;var n=e.toJSON(a);n.expression&&(t[r]=n)}},{key:"writeMaxScale",value:function(e,t){(e||this.minScale)&&(t.maxScale=e)}},{key:"writeMinScale",value:function(e,t){(e||this.maxScale)&&(t.minScale=e)}},{key:"getLabelExpression",value:function(){return Object(j.b)(this)}},{key:"getLabelExpressionArcade",value:function(){return Object(j.c)(this)}},{key:"getLabelExpressionSingleField",value:function(){return Object(j.d)(this)}},{key:"hash",value:function(){return JSON.stringify(this)}},{key:"clone",value:function(){return new h({deconflictionStrategy:this.deconflictionStrategy,labelExpression:this.labelExpression,labelExpressionInfo:Object(p.a)(this.labelExpressionInfo),labelPlacement:this.labelPlacement,maxScale:this.maxScale,minScale:this.minScale,name:this.name,symbol:Object(p.a)(this.symbol),where:this.where,useCodedValues:this.useCodedValues})}}],[{key:"evaluateWhere",value:function(e,t){var r=function(e,t,r){switch(t){case"=":return e==r;case"<>":return e!=r;case">":return e>r;case">=":return e>=r;case"<":return e<r;case"<=":return e<=r}return!1};try{if(null==e)return!0;var a=e.split(" ");if(3===a.length)return r(t[a[0]],a[1],a[2]);if(7===a.length){var n=r(t[a[0]],a[1],a[2]),i=a[3],o=r(t[a[4]],a[5],a[6]);switch(i){case"AND":return n&&o;case"OR":return n||o}}return!1}catch(s){console.log("Error.: can't parse = "+e)}}}]),r}(b.a);Object(l.a)([Object(d.b)({type:String,json:{write:!0}})],T.prototype,"name",void 0),Object(l.a)([Object(d.b)({type:String,json:{write:!0,default:"static",origins:{"web-scene":{write:!1}}}})],T.prototype,"deconflictionStrategy",void 0),Object(l.a)([Object(d.b)({type:String,json:{write:{overridePolicy:function(e,t,r){return this.labelExpressionInfo&&"service"===(null==r?void 0:r.origin)&&I(r.layer)?{enabled:!1}:{allowNull:!0}}}}})],T.prototype,"labelExpression",void 0),Object(l.a)([Object(y.a)("labelExpression")],T.prototype,"readLabelExpression",null),Object(l.a)([Object(v.a)("labelExpression")],T.prototype,"writeLabelExpression",null),Object(l.a)([Object(d.b)({type:m,json:{write:{overridePolicy:function(e,t,r){return function(e){return x(e)||I(e.layer)}(r)?{allowNull:!0}:{enabled:!1}}}}})],T.prototype,"labelExpressionInfo",void 0),Object(l.a)([Object(v.a)("labelExpressionInfo")],T.prototype,"writeLabelExpressionInfo",null),Object(l.a)([Object(d.b)({type:S.apiValues,json:{type:S.jsonValues,read:S.read,write:S.write}})],T.prototype,"labelPlacement",void 0),Object(l.a)([Object(d.b)({type:Number})],T.prototype,"maxScale",void 0),Object(l.a)([Object(v.a)("maxScale")],T.prototype,"writeMaxScale",null),Object(l.a)([Object(d.b)({type:Number})],T.prototype,"minScale",void 0),Object(l.a)([Object(v.a)("minScale")],T.prototype,"writeMinScale",null),Object(l.a)([Object(d.b)({types:c.g,json:{origins:{"web-scene":{types:c.h,write:w.b,default:null}},write:w.b,default:null}})],T.prototype,"symbol",void 0),Object(l.a)([Object(d.b)({type:Boolean,json:{write:!0}})],T.prototype,"useCodedValues",void 0),Object(l.a)([Object(d.b)({type:String,json:{write:!0}})],T.prototype,"where",void 0);var F=T=h=Object(l.a)([Object(f.a)("esri.layers.support.LabelClass")],T)},676:function(e,t,r){"use strict";r.d(t,"a",(function(){return f})),r.d(t,"b",(function(){return p})),r.d(t,"c",(function(){return j})),r.d(t,"d",(function(){return g})),r.d(t,"e",(function(){return d})),r.d(t,"f",(function(){return y})),r.d(t,"g",(function(){return O})),r.d(t,"h",(function(){return h})),r.d(t,"i",(function(){return v})),r.d(t,"j",(function(){return m}));var a=r(22),n=r(11),i=r(27),o=r(87),s={mapserver:"MapServer",imageserver:"ImageServer",featureserver:"FeatureServer",sceneserver:"SceneServer",streamserver:"StreamServer",vectortileserver:"VectorTileServer"},l=Object.values(s),c=new RegExp("^((?:https?:)?\\/\\/\\S+?\\/rest\\/services\\/(.+?)\\/(".concat(l.join("|"),"))(?:\\/(?:layers\\/)?(\\d+))?"),"i"),u=new RegExp("^((?:https?:)?\\/\\/\\S+?\\/([^\\/\\n]+)\\/(".concat(l.join("|"),"))(?:\\/(?:layers\\/)?(\\d+))?"),"i"),b=/(.*?)\/(?:layers\/)?(\d+)\/?$/i;function p(e){return!!c.test(e)}function d(e){var t=Object(i.J)(e),r=t.path.match(c)||t.path.match(u);if(!r)return null;var n=Object(a.a)(r,5),o=n[1],l=n[2],b=n[3],p=n[4],d=l.indexOf("/");return{title:f(-1!==d?l.slice(d+1):l),serverType:s[b.toLowerCase()],sublayer:null!=p&&""!==p?parseInt(p,10):null,url:{path:o}}}function y(e){var t=Object(i.J)(e).path.match(b);return t?{serviceUrl:t[1],sublayerId:Number(t[2])}:null}function f(e){return(e=e.replace(/\s*[/_]+\s*/g," "))[0].toUpperCase()+e.slice(1)}function v(e,t){var r=[];if(e){var a=d(e);Object(n.j)(a)&&a.title&&r.push(a.title)}if(t){var i=f(t);r.push(i)}if(2===r.length){if(-1!==r[0].toLowerCase().indexOf(r[1].toLowerCase()))return r[0];if(-1!==r[1].toLowerCase().indexOf(r[0].toLowerCase()))return r[1]}return r.join(" - ")}function j(e){if(!e)return!1;var t=-1!==(e=e.toLowerCase()).indexOf(".arcgis.com/"),r=-1!==e.indexOf("//services")||-1!==e.indexOf("//tiles")||-1!==e.indexOf("//features");return t&&r}function O(e,t){return e?Object(i.H)(Object(i.G)(e,t)):e}function h(e){var t=e.url;if(!t)return{url:t};t=Object(i.G)(t,e.logger);var r,a=Object(i.J)(t),o=d(a.path);if(Object(n.j)(o))null!=o.sublayer&&null==e.layer.layerId&&(r=o.sublayer),t=o.url.path;else if(e.nonStandardUrlAllowed){var s=y(a.path);Object(n.j)(s)&&(t=s.serviceUrl,r=s.sublayerId)}return{url:Object(i.H)(t),layerId:r}}function m(e,t,r,a,n){Object(o.f)(t,a,"url",n),a.url&&null!=e.layerId&&(a.url=Object(i.y)(a.url,r,e.layerId.toString()))}function g(e){if(!e)return!1;var t=e.toLowerCase(),r=-1!==t.indexOf("/services/"),a=-1!==t.indexOf("/mapserver/wmsserver"),n=-1!==t.indexOf("/imageserver/wmsserver"),i=-1!==t.indexOf("/wmsserver");return r&&(a||n||i)}},678:function(e,t,r){"use strict";r.d(t,"a",(function(){return f}));var a,n=r(2),i=r(4),o=r(5),s=r(6),l=r(0),c=r(26),u=r(692),b=r(1),p=(r(19),r(14),r(15),r(10)),d=r(669),y=a=function(e){Object(o.a)(r,e);var t=Object(s.a)(r);function r(e){var a;return Object(n.a)(this,r),(a=t.call(this,e)).value=0,a.unit="milliseconds",a}return Object(i.a)(r,[{key:"toMilliseconds",value:function(){return Object(u.a)(this.value,this.unit,"milliseconds")}},{key:"clone",value:function(){return new a({value:this.value,unit:this.unit})}}]),r}(c.a);Object(l.a)([Object(b.b)({type:Number,json:{write:!0},nonNullable:!0})],y.prototype,"value",void 0),Object(l.a)([Object(b.b)({type:d.a.apiValues,json:{type:d.a.jsonValues,read:d.a.read,write:d.a.write},nonNullable:!0})],y.prototype,"unit",void 0);var f=y=a=Object(l.a)([Object(p.a)("esri.TimeInterval")],y)},679:function(e,t,r){"use strict";r.d(t,"a",(function(){return l})),r.d(t,"b",(function(){return s}));r(19);var a=r(664),n=r(660),i=r(661),o=r(662),s={key:"type",base:n.a,typeMap:{range:o.a,"coded-value":a.a,inherited:i.a}};function l(e){if(!e||!e.type)return null;switch(e.type){case"range":return o.a.fromJSON(e);case"codedValue":return a.a.fromJSON(e);case"inherited":return i.a.fromJSON(e)}return null}},683:function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var a=r(135),n=r(70),i={inches:Object(a.b)(1,"meters","inches"),feet:Object(a.b)(1,"meters","feet"),"us-feet":Object(a.b)(1,"meters","us-feet"),yards:Object(a.b)(1,"meters","yards"),miles:Object(a.b)(1,"meters","miles"),"nautical-miles":Object(a.b)(1,"meters","nautical-miles"),millimeters:Object(a.b)(1,"meters","millimeters"),centimeters:Object(a.b)(1,"meters","centimeters"),decimeters:Object(a.b)(1,"meters","decimeters"),meters:Object(a.b)(1,"meters","meters"),kilometers:Object(a.b)(1,"meters","kilometers"),"decimal-degrees":1/Object(a.i)(1,"meters",n.a.radius)}},686:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return M}));var a,n=r(23),i=r(13),o=r(22),s=r(7),l=r.n(s),c=r(21),u=r(12),b=r(2),p=r(4),d=r(77),y=r(65),f=r(5),v=r(6),j=r(0),O=r(46),h=r(82),m=r(29),g=r(18),w=r(15),S=r(712),x=r(11),k=r(30),I=r(109),T=r(1),F=(r(14),r(19),r(10)),E=r(43),P=r(209),L=r(663),V=r(684),D=r(237),N=r(186),_=w.a.getLogger("esri.renderers.DictionaryRenderer"),C={type:"CIMSimpleLineCallout",lineSymbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",width:.5,color:[0,0,0,255]}]}},R=a=function(e){Object(f.a)(r,e);var t=Object(v.a)(r);function r(e){var a;return Object(b.a)(this,r),(a=t.call(this,e))._ongoingRequests=new Map,a._symbolCache=new S.a(100),a.config=null,a.fieldMap=null,a.scaleExpression=null,a.scaleExpressionTitle=null,a.url=null,a.type="dictionary",a}return Object(p.a)(r,[{key:"writeData",value:function(e,t){e&&(t.scalingExpressionInfo={expression:e,returnType:"number"})}},{key:"writeVisualVariables",value:function(e,t,a,n){null!=n&&n.origin||Object(d.a)(Object(y.a)(r.prototype),"writeVisualVariables",this).call(this,e,t,a,n)}},{key:"clone",value:function(){return new a({config:Object(g.a)(this.config),scaleExpression:this.scaleExpression,scaleExpressionTitle:this.scaleExpressionTitle,fieldMap:Object(g.a)(this.fieldMap),url:Object(g.a)(this.url),visualVariables:Object(g.a)(this.visualVariables)})}},{key:"getSymbolAsync",value:function(){var e=Object(u.a)(l.a.mark((function e(t,r){var a,n,i,o,s,u,b,p,d,y,f,v,j,h,m,g,w,S,T,F,E,P,L,V,D,N,_=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._dictionaryPromise||(this._dictionaryPromise=this.fetchResources(r)),e.prev=1,e.next=4,this._dictionaryPromise;case 4:a=e.sent,e.next=11;break;case 7:if(e.prev=7,e.t0=e.catch(1),!Object(k.m)(e.t0)){e.next=11;break}return e.abrupt("return",(this._dictionaryPromise=null,null));case 11:if(n={},this.fieldMap){i=Object(c.a)(this._symbolFields);try{for(i.s();!(o=i.n()).done;)s=o.value,(u=this.fieldMap[s])&&null!==t.attributes[u]&&void 0!==t.attributes[u]?(b=""+t.attributes[u],n[s]=b):n[s]=""}catch(l){i.e(l)}finally{i.f()}}if((p=a(n,r))&&"string"==typeof p){e.next=16;break}return e.abrupt("return",null);case 16:if(d=Object(I.b)(p).toString(),!(y=this._symbolCache.get(d))){e.next=19;break}return e.abrupt("return",(y.catch((function(){_._symbolCache.pop(d)})),y));case 19:f=p.split(";"),v=[],j=[],h=Object(c.a)(f);try{for(h.s();!(m=h.n()).done;)if((g=m.value)&&0!==g.length)if(-1===g.indexOf("po:"))if(-1!==g.indexOf("|")){w=Object(c.a)(g.split("|"));try{for(w.s();!(S=w.n()).done;)T=S.value,this._itemNames.has(T)&&v.push(T)}catch(l){w.e(l)}finally{w.f()}}else this._itemNames.has(g)&&v.push(g);else 3===(F=g.substr(3).split("|")).length&&(E=F[0],P=F[1],L=F[2],"DashTemplate"===P?L=L.split(" ").map((function(e){return Number(e)})):"Color"===P?(V=new O.a(L).toRgba(),L=[V[0],V[1],V[2],255*V[3]]):L=Number(L),j.push({primitiveName:E,propertyName:P,value:L}))}catch(l){h.e(l)}finally{h.f()}return D=!Object(x.j)(t.geometry)||!t.geometry.hasZ&&"point"===t.geometry.type,N=this._cimPartsToCIMSymbol(v,j,D,r),e.abrupt("return",(this._symbolCache.put(d,N,1),N));case 24:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"collectRequiredFields",value:function(){var e=Object(u.a)(l.a.mark((function e(t,r){var a,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.collectVVRequiredFields(t,r);case 2:if(e.t0=this.scaleExpression,!e.t0){e.next=6;break}return e.next=6,Object(P.a)(t,r,this.scaleExpression);case 6:for(a in this.fieldMap)n=this.fieldMap[a],r.has(n)&&t.add(n);case 7:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"arcadeRequired",get:function(){return!0}},{key:"fetchResources",value:function(){var e=Object(u.a)(l.a.mark((function e(t){var r,a,n,s,u,b,p,d,y,f,v,j,O,g,w,S,k,I=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._dictionaryPromise){e.next=2;break}return e.abrupt("return",this._dictionaryPromise);case 2:if(this.url){e.next=4;break}return e.abrupt("return",void _.error("no valid URL!"));case 4:return r=Object(x.j)(t)?t.abortOptions:null,a=Object(h.default)(this.url+"/resources/styles/dictionary-info.json",Object(i.a)({responseType:"json",query:{f:"json"}},r)),e.next=8,Promise.all([a,Object(D.e)()]);case 8:if(n=e.sent,s=Object(o.a)(n,1),u=s[0].data){e.next=13;break}throw this._dictionaryPromise=null,new m.a("esri.renderers.DictionaryRenderer","Bad dictionary data!");case 13:if(b=u.expression,p=u.authoringInfo,this._refSymbolUrlTemplate=this.url+"/"+u.cimRefTemplateUrl,this._itemNames=new Set(u.itemsNames),this._symbolFields=p.symbol,d={},this.config)for(f in y=this.config)d[f]=y[f];if(p.configuration){v=Object(c.a)(p.configuration);try{for(v.s();!(j=v.n()).done;)O=j.value,d.hasOwnProperty(O.name)||(d[O.name]=O.value)}catch(l){v.e(l)}finally{v.f()}}if(g=[],Object(x.j)(t)&&t.fields&&this.fieldMap){w=Object(c.a)(this._symbolFields);try{for(k=function(){var e=S.value,r=I.fieldMap[e],a=t.fields.filter((function(e){return e.name===r}));a.length>0&&g.push(Object(i.a)(Object(i.a)({},a[0]),{},{name:e}))},w.s();!(S=w.n()).done;)k()}catch(l){w.e(l)}finally{w.f()}}return e.abrupt("return",(this._dictionaryPromise=Object(D.b)(b,Object(x.j)(t)?t.spatialReference:null,g,d).then((function(e){var t={scale:0};return function(r,a){var n=e.repurposeFeature({geometry:null,attributes:r});return t.scale=Object(x.j)(a)?a.scale:void 0,e.evaluate({$feature:n,$view:t})}})).catch((function(e){return _.error("Creating dictinoary expression failed:",e),null})),this._dictionaryPromise));case 21:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getSymbol",value:function(){return null}},{key:"getSymbols",value:function(){return[]}},{key:"getAttributeHash",value:function(){return this.visualVariables&&this.visualVariables.reduce((function(e,t){return e+t.getAttributeHash()}),"")}},{key:"getMeshHash",value:function(){return"".concat(this.url,"-").concat(JSON.stringify(this.fieldMap))}},{key:"getSymbolFields",value:function(){return this._symbolFields}},{key:"_getSymbolPart",value:function(){var e=Object(u.a)(l.a.mark((function e(t,r){var a,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._ongoingRequests.has(t)){e.next=2;break}return e.abrupt("return",this._ongoingRequests.get(t).then((function(e){return e.data})));case 2:return a=this._refSymbolUrlTemplate.replace(/\{itemName\}/gi,t),n=Object(h.default)(a,Object(i.a)({responseType:"json",query:{f:"json"}},r)),this._ongoingRequests.set(t,n),e.prev=4,e.next=7,n;case 7:return e.abrupt("return",e.sent.data);case 10:return e.prev=10,e.t0=e.catch(4),e.abrupt("return",(this._ongoingRequests.delete(t),Promise.reject(e.t0)));case 13:case"end":return e.stop()}}),e,this,[[4,10]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"_combineSymbolParts",value:function(e,t,r){if(!e||0===e.length)return null;var a=Object(i.a)({},e[0]);if(e.length>1){a.symbolLayers=[];var o,s=Object(c.a)(e);try{for(s.s();!(o=s.n()).done;){var l,u=o.value;(l=a.symbolLayers).unshift.apply(l,Object(n.a)(u.symbolLayers))}}catch(b){s.e(b)}finally{s.f()}}return r&&(a.callout=C),{type:"CIMSymbolReference",symbol:a,primitiveOverrides:t}}},{key:"_cimPartsToCIMSymbol",value:function(){var e=Object(u.a)(l.a.mark((function e(t,r,a,n){var i,o,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(i=new Array(t.length),o=0;o<t.length;o++)i[o]=this._getSymbolPart(t[o],n);return e.next=4,Promise.all(i);case 4:return s=e.sent,e.abrupt("return",new N.a({data:this._combineSymbolParts(s,r,a)}));case 6:case"end":return e.stop()}}),e,this)})));return function(t,r,a,n){return e.apply(this,arguments)}}()}]),r}(Object(V.a)(L.a));Object(j.a)([Object(T.b)({type:Object,json:{read:{source:"configuration"},write:{target:"configuration"}}})],R.prototype,"config",void 0),Object(j.a)([Object(T.b)({type:Object,json:{write:!0}})],R.prototype,"fieldMap",void 0),Object(j.a)([Object(T.b)({type:String,json:{read:{source:"scalingExpressionInfo.expression"},write:!0}})],R.prototype,"scaleExpression",void 0),Object(j.a)([Object(E.a)("scaleExpression")],R.prototype,"writeData",null),Object(j.a)([Object(T.b)({type:String,json:{read:{source:"scalingExpressionInfo.title"},write:{target:"scalingExpressionInfo.title",overridePolicy:function(e){return{enabled:!!e&&!!this.scaleExpression}}}}})],R.prototype,"scaleExpressionTitle",void 0),Object(j.a)([Object(T.b)({type:String,json:{write:!0}})],R.prototype,"url",void 0),Object(j.a)([Object(E.a)("visualVariables")],R.prototype,"writeVisualVariables",null);var M=R=a=Object(j.a)([Object(F.a)("esri.renderers.DictionaryRenderer")],R)},687:function(e,t,r){"use strict";r.d(t,"a",(function(){return m}));var a,n=r(7),i=r.n(n),o=r(12),s=r(2),l=r(4),c=r(5),u=r(6),b=r(0),p=r(18),d=r(1),y=(r(14),r(19),r(15),r(31)),f=r(10),v=r(663),j=r(684),O=r(765),h=a=function(e){Object(c.a)(r,e);var t=Object(u.a)(r);function r(e){var a;return Object(s.a)(this,r),(a=t.call(this,e)).description=null,a.label=null,a.symbol=null,a.type="simple",a}return Object(l.a)(r,[{key:"collectRequiredFields",value:function(){var e=Object(o.a)(i.a.mark((function e(t,r){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this.collectSymbolFields(t,r),this.collectVVRequiredFields(t,r)]);case 2:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"collectSymbolFields",value:function(){var e=Object(o.a)(i.a.mark((function e(t,r){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(this.getSymbols().map((function(e){return e.collectRequiredFields(t,r)})));case 2:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getSymbol",value:function(e,t){return this.symbol}},{key:"getSymbolAsync",value:function(){var e=Object(o.a)(i.a.mark((function e(t,r){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.symbol);case 1:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getSymbols",value:function(){return this.symbol?[this.symbol]:[]}},{key:"getAttributeHash",value:function(){return this.visualVariables&&this.visualVariables.reduce((function(e,t){return e+t.getAttributeHash()}),"")}},{key:"getMeshHash",value:function(){return this.getSymbols().reduce((function(e,t){return e+JSON.stringify(t)}),"")}},{key:"arcadeRequired",get:function(){return this.arcadeRequiredForVisualVariables}},{key:"clone",value:function(){return new a({description:this.description,label:this.label,symbol:this.symbol&&this.symbol.clone(),visualVariables:Object(p.a)(this.visualVariables),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})}}]),r}(Object(j.a)(v.a));Object(b.a)([Object(d.b)({type:String,json:{write:!0}})],h.prototype,"description",void 0),Object(b.a)([Object(d.b)({type:String,json:{write:!0}})],h.prototype,"label",void 0),Object(b.a)([Object(d.b)(O.b)],h.prototype,"symbol",void 0),Object(b.a)([Object(y.a)({simple:"simple"})],h.prototype,"type",void 0);var m=h=a=Object(b.a)([Object(f.a)("esri.renderers.SimpleRenderer")],h)},688:function(e,t,r){"use strict";r.d(t,"a",(function(){return C}));var a,n=r(21),i=r(7),o=r.n(i),s=r(12),l=r(2),c=r(4),u=r(5),b=r(6),p=r(0),d=r(46),y=r(18),f=r(61),v=r(14),j=(r(19),r(15)),O=r(31),h=r(1),m=r(10),g=r(209),w=r(663),S=r(684),x=r(26),k=r(97),I=j.a.getLogger("esri.renderers.support.AttributeColorInfo"),T=a=function(e){Object(u.a)(r,e);var t=Object(b.a)(r);function r(e){var a;return Object(l.a)(this,r),(a=t.call(this,e)).color=null,a.field=null,a.label=null,a.valueExpression=null,a.valueExpressionTitle=null,a}return Object(c.a)(r,[{key:"castField",value:function(e){return null==e?e:"function"==typeof e?(I.error(".field: field must be a string value"),null):Object(v.l)(e)}},{key:"getAttributeHash",value:function(){return"".concat(this.field,"-").concat(this.valueExpression)}},{key:"clone",value:function(){return new a({color:this.color&&this.color.clone(),field:this.field,label:this.label,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})}}]),r}(x.a);Object(p.a)([Object(h.b)({type:d.a,json:{type:[Number],write:!0}})],T.prototype,"color",void 0),Object(p.a)([Object(h.b)({type:String,json:{write:!0}})],T.prototype,"field",void 0),Object(p.a)([Object(k.a)("field")],T.prototype,"castField",null),Object(p.a)([Object(h.b)({type:String,json:{write:!0}})],T.prototype,"label",void 0),Object(p.a)([Object(h.b)({type:String,json:{write:!0}})],T.prototype,"valueExpression",void 0),Object(p.a)([Object(h.b)({type:String,json:{write:!0}})],T.prototype,"valueExpressionTitle",void 0);var F,E=T=a=Object(p.a)([Object(m.a)("esri.renderers.support.AttributeColorInfo")],T),P=F=function(e){Object(u.a)(r,e);var t=Object(b.a)(r);function r(){var e;return Object(l.a)(this,r),(e=t.apply(this,arguments)).unit=null,e}return Object(c.a)(r,[{key:"clone",value:function(){return new F({unit:this.unit})}}]),r}(x.a);Object(p.a)([Object(h.b)({type:String,json:{write:!0}})],P.prototype,"unit",void 0);var L,V=P=F=Object(p.a)([Object(m.a)("esri.renderers.support.DotDensityLegendOptions")],P),D=r(166),N=r(98),_=L=function(e){Object(u.a)(r,e);var t=Object(b.a)(r);function r(e){var a;return Object(l.a)(this,r),(a=t.call(this,e)).attributes=null,a.backgroundColor=new d.a([0,0,0,0]),a.blendDots=!0,a.dotBlendingEnabled=!0,a.dotShape="square",a.dotSize=1,a.legendOptions=null,a.outline=new N.a,a.dotValue=null,a.referenceDotValue=null,a.referenceScale=null,a.seed=1,a.type="dot-density",a}return Object(c.a)(r,[{key:"calculateDotValue",value:function(e){if(null==this.referenceScale)return this.dotValue;var t=e/this.referenceScale*this.dotValue;return t<1?1:t}},{key:"getSymbol",value:function(){return new D.a({outline:this.outline})}},{key:"getSymbolAsync",value:function(){var e=Object(s.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.getSymbol());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getSymbols",value:function(){return[this.getSymbol()]}},{key:"getAttributeHash",value:function(){return this.attributes&&this.attributes.reduce((function(e,t){return e+t.getAttributeHash()}),"")}},{key:"getMeshHash",value:function(){return JSON.stringify(this.outline)}},{key:"clone",value:function(){return new L({attributes:Object(y.a)(this.attributes),backgroundColor:Object(y.a)(this.backgroundColor),dotBlendingEnabled:Object(y.a)(this.dotBlendingEnabled),dotShape:Object(y.a)(this.dotShape),dotSize:Object(y.a)(this.dotSize),dotValue:Object(y.a)(this.dotValue),legendOptions:Object(y.a)(this.legendOptions),outline:Object(y.a)(this.outline),referenceScale:Object(y.a)(this.referenceScale),visualVariables:Object(y.a)(this.visualVariables),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})}},{key:"getControllerHash",value:function(){return"".concat(this.attributes.map((function(e){return e.field||e.valueExpression||""})),"-").concat(this.outline&&JSON.stringify(this.outline.toJSON())||"")}},{key:"collectRequiredFields",value:function(){var e=Object(s.a)(o.a.mark((function e(t,r){var a,i,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.collectVVRequiredFields(t,r);case 2:a=Object(n.a)(this.attributes),e.prev=3,a.s();case 5:if((i=a.n()).done){e.next=14;break}if(s=i.value,e.t0=s.valueExpression,!e.t0){e.next=11;break}return e.next=11,Object(g.a)(t,r,s.valueExpression);case 11:s.field&&t.add(s.field);case 12:e.next=5;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(3),a.e(e.t1);case 19:return e.prev=19,a.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,this,[[3,16,19,22]])})));return function(t,r){return e.apply(this,arguments)}}()}]),r}(Object(S.a)(w.a));Object(p.a)([Object(h.b)({type:[E],json:{write:!0}})],_.prototype,"attributes",void 0),Object(p.a)([Object(h.b)({type:d.a,json:{write:!0}})],_.prototype,"backgroundColor",void 0),Object(p.a)([Object(h.b)({type:Boolean}),Object(f.a)("dotBlendingEnabled")],_.prototype,"blendDots",void 0),Object(p.a)([Object(h.b)({type:Boolean,json:{write:!0}})],_.prototype,"dotBlendingEnabled",void 0),Object(p.a)([Object(h.b)({type:String,json:{write:!1}})],_.prototype,"dotShape",void 0),Object(p.a)([Object(h.b)({type:Number,json:{write:!1}})],_.prototype,"dotSize",void 0),Object(p.a)([Object(h.b)({type:V,json:{write:!0}})],_.prototype,"legendOptions",void 0),Object(p.a)([Object(h.b)({type:N.a,json:{default:null,write:!0}})],_.prototype,"outline",void 0),Object(p.a)([Object(h.b)({type:Number,json:{write:!0}})],_.prototype,"dotValue",void 0),Object(p.a)([Object(h.b)({type:Number}),Object(f.a)("dotValue")],_.prototype,"referenceDotValue",void 0),Object(p.a)([Object(h.b)({type:Number,json:{write:!0}})],_.prototype,"referenceScale",void 0),Object(p.a)([Object(h.b)({type:Number,json:{write:!0}})],_.prototype,"seed",void 0),Object(p.a)([Object(O.a)({dotDensity:"dot-density"})],_.prototype,"type",void 0);var C=_=L=Object(p.a)([Object(m.a)("esri.renderers.DotDensityRenderer")],_)},689:function(e,t,r){"use strict";r.d(t,"a",(function(){return x}));var a,n=r(7),i=r.n(n),o=r(12),s=r(2),l=r(4),c=r(5),u=r(6),b=r(0),p=r(46),d=r(18),y=r(1),f=(r(14),r(19),r(15),r(31)),v=r(10),j=r(209),O=r(663),h=r(26),m=a=function(e){Object(c.a)(r,e);var t=Object(u.a)(r);function r(e){var a;return Object(s.a)(this,r),(a=t.call(this,e)).color=null,a.ratio=null,a}return Object(l.a)(r,[{key:"clone",value:function(){return new a({color:this.color,ratio:this.ratio})}}]),r}(h.a);Object(b.a)([Object(y.b)({type:p.a,json:{write:!0}})],m.prototype,"color",void 0),Object(b.a)([Object(y.b)({type:Number,json:{write:!0}})],m.prototype,"ratio",void 0);var g,w=m=a=Object(b.a)([Object(v.a)("esri.renderers.support.HeatmapColorStop")],m),S=g=function(e){Object(c.a)(r,e);var t=Object(u.a)(r);function r(e){var a;return Object(s.a)(this,r),(a=t.call(this,e)).blurRadius=10,a.colorStops=[new w({ratio:0,color:new p.a("rgba(255, 140, 0, 0)")}),new w({ratio:.75,color:new p.a("rgba(255, 140, 0, 1)")}),new w({ratio:.9,color:new p.a("rgba(255, 0,   0, 1)")})],a.field=null,a.fieldOffset=0,a.maxPixelIntensity=100,a.minPixelIntensity=0,a.type="heatmap",a}return Object(l.a)(r,[{key:"collectRequiredFields",value:function(){var e=Object(o.a)(i.a.mark((function e(t,r){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(a=this.field)&&"string"==typeof a&&Object(j.b)(t,r,a);case 2:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getAttributeHash",value:function(){return null}},{key:"getMeshHash",value:function(){return"".concat(JSON.stringify(this.colorStops),".").concat(this.blurRadius,".").concat(this.field)}},{key:"clone",value:function(){return new g({blurRadius:this.blurRadius,colorStops:Object(d.a)(this.colorStops),field:this.field,maxPixelIntensity:this.maxPixelIntensity,minPixelIntensity:this.minPixelIntensity})}}]),r}(O.a);Object(b.a)([Object(y.b)({type:Number,json:{write:!0}})],S.prototype,"blurRadius",void 0),Object(b.a)([Object(y.b)({type:[w],json:{write:!0}})],S.prototype,"colorStops",void 0),Object(b.a)([Object(y.b)({type:String,json:{write:!0}})],S.prototype,"field",void 0),Object(b.a)([Object(y.b)({type:Number,json:{write:{overridePolicy:function(e,t,r){return{enabled:null==r}}}}})],S.prototype,"fieldOffset",void 0),Object(b.a)([Object(y.b)({type:Number,json:{write:!0}})],S.prototype,"maxPixelIntensity",void 0),Object(b.a)([Object(y.b)({type:Number,json:{write:!0}})],S.prototype,"minPixelIntensity",void 0),Object(b.a)([Object(f.a)({heatmap:"heatmap"})],S.prototype,"type",void 0);var x=S=g=Object(b.a)([Object(v.a)("esri.renderers.HeatmapRenderer")],S)},690:function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var a=new(r(42).a)({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml"})},691:function(e,t,r){"use strict";r.d(t,"a",(function(){return u})),r.d(t,"b",(function(){return b}));var a=r(700),n=r(686),i=r(688),o=r(689),s=r(663),l=r(687),c=r(701),u={key:"type",base:s.a,typeMap:{heatmap:o.a,simple:l.a,"unique-value":c.a,"class-breaks":a.a,"dot-density":i.a,dictionary:n.default},errorContext:"renderer"},b={key:"type",base:s.a,typeMap:{simple:l.a,"unique-value":c.a,"class-breaks":a.a},errorContext:"renderer"}},693:function(e,t,r){"use strict";r.d(t,"a",(function(){return f})),r.d(t,"b",(function(){return p})),r.d(t,"c",(function(){return d})),r.d(t,"d",(function(){return y})),r.d(t,"e",(function(){return m})),r.d(t,"f",(function(){return b}));var a=r(109),n="__begin__",i="__end__",o=new RegExp(n,"ig"),s=new RegExp(i,"ig"),l=new RegExp("^"+n,"i"),c=new RegExp(i+"$","i"),u='"';function b(e){return e.replace(new RegExp("\\{","g"),"[").replace(new RegExp("\\}","g"),"]")}function p(e){var t={expression:"",type:"none"};return e.labelExpressionInfo?e.labelExpressionInfo.value?(t.expression=e.labelExpressionInfo.value,t.type="conventional"):e.labelExpressionInfo.expression&&(t.expression=e.labelExpressionInfo.expression,t.type="arcade"):null!=e.labelExpression&&(t.expression=function(e){return e.replace(new RegExp("\\[","g"),"{").replace(new RegExp("\\]","g"),"}")}(e.labelExpression),t.type="conventional"),t}function d(e){var t=p(e);if(!t)return null;switch(t.type){case"conventional":return f(t.expression);case"arcade":return t.expression}return null}function y(e){var t=p(e);if(!t)return null;switch(t.type){case"conventional":return function(e){var t=e.match(v);return t&&t[1].trim()||null}(t.expression);case"arcade":return m(t.expression)}return null}function f(e){var t;return e?(t=Object(a.c)(e,(function(e){return n+'$feature["'+e+'"]'+i})),t=l.test(t)?t.replace(l,""):u+t,t=(t=c.test(t)?t.replace(c,""):t+u).replace(o,'" + ').replace(s,' + "')):t='""',t}var v=/^\s*\{([^}]+)\}\s*$/i;var j=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])([\w\s]+)(\2)\]));?\s*$/i,O=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])([\w\s]+)(\2)\]));?\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(\1|\3)(\5)\s*\));?\s*$/i,h=/^\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])([\w\s]+)(\1)\s*\));?\s*$/i;function m(e){if(!e)return null;var t=j.exec(e)||O.exec(e);return t?t[1]||t[3]:(t=h.exec(e))?t[2]:null}},694:function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));r(19);function a(e){}},697:function(e,t,r){"use strict";r.d(t,"a",(function(){return T}));var a=r(7),n=r.n(a),i=r(12),o=r(2),s=r(4),l=r(8),c=r(5),u=r(6),b=r(0),p=r(15),d=r(30),y=r(1),f=(r(19),r(14),r(10)),v=r(21),j=r(52),O=r(215),h=new j.a,m=new WeakMap;function g(e){w(e)&&h.push(e)}function w(e){return e&&"object"==typeof e&&"refreshInterval"in e&&"refresh"in e}function S(e,t){return Number.isFinite(e)&&Number.isFinite(t)?t<=0?e:S(t,e%t):0}var x=0,k=0;function I(){var e,t=Date.now(),r=Object(v.a)(h);try{for(r.s();!(e=r.n()).done;){var a,n=e.value;if(n.refreshInterval)t-(null!=(a=m.get(n))?a:0)+5>=6e4*n.refreshInterval&&(m.set(n,t),n.refresh(t))}}catch(i){r.e(i)}finally{r.f()}}Object(O.a)((function(){var e,t=Date.now(),r=0,a=Object(v.a)(h);try{for(a.s();!(e=a.n()).done;){var n=e.value;r=S(Math.round(6e4*n.refreshInterval),r),n.refreshInterval?m.get(n)||m.set(n,t):m.delete(n)}}catch(i){a.e(i)}finally{a.f()}if(r!==k){if(k=r,clearInterval(x),0===k)return void(x=0);x=setInterval(I,k)}}));var T=function(e){var t=function(e){Object(c.a)(r,e);var t=Object(u.a)(r);function r(){var e;Object(o.a)(this,r);for(var a=arguments.length,n=new Array(a),i=0;i<a;i++)n[i]=arguments[i];return(e=t.call.apply(t,[this].concat(n))).refreshInterval=0,e.refreshTimestamp=0,e._debounceHasDataChanged=Object(d.i)((function(){return e.hasDataChanged()})),e.when().then((function(){g(Object(l.a)(e))}),(function(){})),e}return Object(s.a)(r,[{key:"destroy",value:function(){var e;w(e=this)&&h.includes(e)&&h.remove(e)}},{key:"refreshParameters",get:function(){return{_ts:this.refreshTimestamp||null}}},{key:"refresh",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now();Object(d.l)(this._debounceHasDataChanged()).then((function(r){r&&(e._set("refreshTimestamp",t),e.emit("refresh"))}),(function(t){p.a.getLogger(e.declaredClass).error(t)}))}},{key:"hasDataChanged",value:function(){var e=Object(i.a)(n.a.mark((function e(){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),r}(e);return Object(b.a)([Object(y.b)({type:Number,cast:function(e){return e>=.1?e:e<=0?0:.1},json:{write:!0,origins:{"web-document":{write:!0}}}})],t.prototype,"refreshInterval",void 0),Object(b.a)([Object(y.b)({readOnly:!0})],t.prototype,"refreshTimestamp",void 0),Object(b.a)([Object(y.b)()],t.prototype,"refreshParameters",null),t=Object(b.a)([Object(f.a)("esri.layers.mixins.RefreshableLayer")],t),t}},698:function(e,t,r){"use strict";r.d(t,"a",(function(){return S}));var a,n=r(2),i=r(4),o=r(5),s=r(6),l=r(0),c=r(665),u=r(678),b=r(26),p=r(18),d=r(11),y=r(1),f=(r(14),r(19),r(15),r(57)),v=r(10),j=r(43),O=a=function(e){Object(o.a)(r,e);var t=Object(s.a)(r);function r(e){var a;return Object(n.a)(this,r),(a=t.call(this,e)).respectsDaylightSaving=!1,a.timezone=null,a}return Object(i.a)(r,[{key:"readRespectsDaylightSaving",value:function(e,t){return void 0!==t.respectsDaylightSaving?t.respectsDaylightSaving:void 0!==t.respectDaylightSaving&&t.respectDaylightSaving}},{key:"clone",value:function(){var e=this.respectsDaylightSaving,t=this.timezone;return new a({respectsDaylightSaving:e,timezone:t})}}]),r}(b.a);Object(l.a)([Object(y.b)({type:Boolean,json:{write:!0}})],O.prototype,"respectsDaylightSaving",void 0),Object(l.a)([Object(f.a)("respectsDaylightSaving",["respectsDaylightSaving","respectDaylightSaving"])],O.prototype,"readRespectsDaylightSaving",null),Object(l.a)([Object(y.b)({type:String,json:{read:{source:"timeZone"},write:{target:"timeZone"}}})],O.prototype,"timezone",void 0);var h,m=O=a=Object(l.a)([Object(v.a)("esri.layers.support.TimeReference")],O),g=r(669),w=h=function(e){Object(o.a)(r,e);var t=Object(s.a)(r);function r(e){var a;return Object(n.a)(this,r),(a=t.call(this,e)).cumulative=!1,a.endField=null,a.fullTimeExtent=null,a.hasLiveData=!1,a.interval=null,a.startField=null,a.timeReference=null,a.trackIdField=null,a.useTime=!0,a}return Object(i.a)(r,[{key:"readFullTimeExtent",value:function(e,t){if(!t.timeExtent||!Array.isArray(t.timeExtent)||2!==t.timeExtent.length)return null;var r=new Date(t.timeExtent[0]),a=new Date(t.timeExtent[1]);return new c.a({start:r,end:a})}},{key:"writeFullTimeExtent",value:function(e,t){e&&Object(d.j)(e.start)&&Object(d.j)(e.end)?t.timeExtent=[e.start.getTime(),e.end.getTime()]:t.timeExtent=null}},{key:"readInterval",value:function(e,t){return t.timeInterval&&t.timeIntervalUnits?new u.a({value:t.timeInterval,unit:g.a.fromJSON(t.timeIntervalUnits)}):t.defaultTimeInterval&&t.defaultTimeIntervalUnits?new u.a({value:t.defaultTimeInterval,unit:g.a.fromJSON(t.defaultTimeIntervalUnits)}):null}},{key:"writeInterval",value:function(e,t){if(e){var r=e.toJSON();t.timeInterval=r.value,t.timeIntervalUnits=r.unit}else t.timeInterval=null,t.timeIntervalUnits=null}},{key:"clone",value:function(){var e=this.cumulative,t=this.endField,r=this.hasLiveData,a=this.interval,n=this.startField,i=this.timeReference,o=this.fullTimeExtent,s=this.trackIdField,l=this.useTime;return new h({cumulative:e,endField:t,hasLiveData:r,interval:a,startField:n,timeReference:Object(p.a)(i),fullTimeExtent:Object(p.a)(o),trackIdField:s,useTime:l})}}]),r}(b.a);Object(l.a)([Object(y.b)({type:Boolean,json:{read:{source:"exportOptions.timeDataCumulative"},write:{target:"exportOptions.timeDataCumulative"}}})],w.prototype,"cumulative",void 0),Object(l.a)([Object(y.b)({type:String,json:{read:{source:"endTimeField"},write:{target:"endTimeField",allowNull:!0}}})],w.prototype,"endField",void 0),Object(l.a)([Object(y.b)({type:c.a,json:{write:{enabled:!0,allowNull:!0}}})],w.prototype,"fullTimeExtent",void 0),Object(l.a)([Object(f.a)("fullTimeExtent",["timeExtent"])],w.prototype,"readFullTimeExtent",null),Object(l.a)([Object(j.a)("fullTimeExtent")],w.prototype,"writeFullTimeExtent",null),Object(l.a)([Object(y.b)({type:Boolean,json:{write:!0}})],w.prototype,"hasLiveData",void 0),Object(l.a)([Object(y.b)({type:u.a,json:{write:{enabled:!0,allowNull:!0}}})],w.prototype,"interval",void 0),Object(l.a)([Object(f.a)("interval",["timeInterval","timeIntervalUnits","defaultTimeInterval","defaultTimeIntervalUnits"])],w.prototype,"readInterval",null),Object(l.a)([Object(j.a)("interval")],w.prototype,"writeInterval",null),Object(l.a)([Object(y.b)({type:String,json:{read:{source:"startTimeField"},write:{target:"startTimeField",allowNull:!0}}})],w.prototype,"startField",void 0),Object(l.a)([Object(y.b)({type:m,json:{write:{enabled:!0,allowNull:!0}}})],w.prototype,"timeReference",void 0),Object(l.a)([Object(y.b)({type:String,json:{write:{enabled:!0,allowNull:!0}}})],w.prototype,"trackIdField",void 0),Object(l.a)([Object(y.b)({type:Boolean,json:{read:{source:"exportOptions.useTime"},write:{target:"exportOptions.useTime"}}})],w.prototype,"useTime",void 0);var S=w=h=Object(l.a)([Object(v.a)("esri.layers.support.TimeInfo")],w)},703:function(e,t,r){"use strict";r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return o})),r.d(t,"c",(function(){return i})),r.d(t,"d",(function(){return s})),r.d(t,"e",(function(){return l})),r.d(t,"f",(function(){return u})),r.d(t,"g",(function(){return c}));var a=[252,146,31,255],n={type:"esriSMS",style:"esriSMSCircle",size:6,color:a,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},i={type:"esriSLS",style:"esriSLSSolid",width:.75,color:a},o={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}},s={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0},l={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5},c={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5},u={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null}},704:function(e,t,r){"use strict";function a(e){return e&&"esri.renderers.visualVariables.SizeVariable"===e.declaredClass}function n(e){return null!=e&&!isNaN(e)&&isFinite(e)}function i(e){return e.valueExpression?"expression":e.field&&"string"==typeof e.field?"field":"unknown"}function o(e,t){var r=t||i(e),a=e.valueUnit||"unknown";return"unknown"===r?"constant":e.stops?"stops":null!=e.minSize&&null!=e.maxSize&&null!=e.minDataValue&&null!=e.maxDataValue?"clamped-linear":"unknown"===a?null!=e.minSize&&null!=e.minDataValue?e.minSize&&e.minDataValue?"proportional":"additive":"identity":"real-world-size"}r.d(t,"a",(function(){return i})),r.d(t,"b",(function(){return o})),r.d(t,"c",(function(){return a})),r.d(t,"d",(function(){return n}))},710:function(e,t,r){"use strict";r.d(t,"a",(function(){return d}));var a=r(2),n=r(4),i=r(5),o=r(6),s=r(0),l=r(15),c=r(11),u=r(1),b=(r(19),r(14),r(10)),p=r(676),d=function(e){var t=function(e){Object(i.a)(r,e);var t=Object(o.a)(r);function r(){return Object(a.a)(this,r),t.apply(this,arguments)}return Object(n.a)(r,[{key:"title",get:function(){if(this._get("title")&&"defaults"!==this.originOf("title"))return this._get("title");if(this.url){var e=Object(p.e)(this.url);if(Object(c.j)(e)&&e.title)return e.title}return this._get("title")||""},set:function(e){this._set("title",e)}},{key:"url",set:function(e){this._set("url",Object(p.g)(e,l.a.getLogger(this.declaredClass)))}}]),r}(e);return Object(s.a)([Object(u.b)()],t.prototype,"title",null),Object(s.a)([Object(u.b)({type:String})],t.prototype,"url",null),t=Object(s.a)([Object(b.a)("esri.layers.mixins.ArcGISService")],t)}},711:function(e,t,r){"use strict";r.d(t,"a",(function(){return y}));var a,n=r(2),i=r(4),o=r(5),s=r(6),l=r(0),c=r(26),u=r(1),b=(r(19),r(14)),p=(r(15),r(31)),d=r(10),y=a=function(e){Object(o.a)(r,e);var t=Object(s.a)(r);function r(e){var a;return Object(n.a)(this,r),(a=t.call(this,e)).type="map-layer",a}return Object(i.a)(r,[{key:"clone",value:function(){var e=this.mapLayerId,t=this.gdbVersion;return new a({mapLayerId:e,gdbVersion:t})}}]),r}(c.a);Object(l.a)([Object(p.a)({mapLayer:"map-layer"})],y.prototype,"type",void 0),Object(l.a)([Object(u.b)({type:b.a,json:{write:!0}})],y.prototype,"mapLayerId",void 0),Object(l.a)([Object(u.b)({type:String,json:{write:!0}})],y.prototype,"gdbVersion",void 0),y=a=Object(l.a)([Object(d.a)("esri.layers.support.source.MapLayerSource")],y)},712:function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));var a=r(2),n=r(4),i=r(708),o=function(){function e(t,r){Object(a.a)(this,e),this._storage=new i.b,this._storage.maxSize=t,r&&this._storage.registerRemoveFunc("",r)}return Object(n.a)(e,[{key:"put",value:function(e,t,r){this._storage.put(e,t,r,1)}},{key:"pop",value:function(e){return this._storage.pop(e)}},{key:"get",value:function(e){return this._storage.get(e)}},{key:"clear",value:function(){this._storage.clearAll()}},{key:"destroy",value:function(){this._storage.destroy()}},{key:"maxSize",get:function(){return this._storage.maxSize},set:function(e){this._storage.maxSize=e}}]),e}()},713:function(e,t,r){"use strict";r.d(t,"a",(function(){return v}));var a=r(2),n=r(4),i=r(5),o=r(6),s=r(0),l=r(42),c=r(26),u=r(18),b=r(1),p=(r(14),r(19),r(15),r(10)),d=r(43),y=new l.a({esriFeatureEditToolAutoCompletePolygon:"auto-complete-polygon",esriFeatureEditToolCircle:"circle",esriFeatureEditToolEllipse:"ellipse",esriFeatureEditToolFreehand:"freehand",esriFeatureEditToolLine:"line",esriFeatureEditToolNone:"none",esriFeatureEditToolPoint:"point",esriFeatureEditToolPolygon:"polygon",esriFeatureEditToolRectangle:"rectangle",esriFeatureEditToolArrow:"arrow",esriFeatureEditToolTriangle:"triangle",esriFeatureEditToolLeftArrow:"left-arrow",esriFeatureEditToolRightArrow:"right-arrow",esriFeatureEditToolUpArrow:"up-arrow",esriFeatureEditToolDownArrow:"down-arrow"}),f=function(e){Object(i.a)(r,e);var t=Object(o.a)(r);function r(e){var n;return Object(a.a)(this,r),(n=t.call(this,e)).name=null,n.description=null,n.drawingTool=null,n.prototype=null,n.thumbnail=null,n}return Object(n.a)(r,[{key:"writeDrawingTool",value:function(e,t){t.drawingTool=y.toJSON(e)}},{key:"writePrototype",value:function(e,t){t.prototype=Object(u.c)(Object(u.a)(e),!0)}},{key:"writeThumbnail",value:function(e,t){t.thumbnail=Object(u.c)(Object(u.a)(e))}}]),r}(c.a);Object(s.a)([Object(b.b)({json:{write:!0}})],f.prototype,"name",void 0),Object(s.a)([Object(b.b)({json:{write:!0}})],f.prototype,"description",void 0),Object(s.a)([Object(b.b)({json:{read:y.read,write:y.write}})],f.prototype,"drawingTool",void 0),Object(s.a)([Object(d.a)("drawingTool")],f.prototype,"writeDrawingTool",null),Object(s.a)([Object(b.b)({json:{write:!0}})],f.prototype,"prototype",void 0),Object(s.a)([Object(d.a)("prototype")],f.prototype,"writePrototype",null),Object(s.a)([Object(b.b)({json:{write:!0}})],f.prototype,"thumbnail",void 0),Object(s.a)([Object(d.a)("thumbnail")],f.prototype,"writeThumbnail",null);var v=f=Object(s.a)([Object(p.a)("esri.layers.support.FeatureTemplate")],f)},714:function(e,t,r){"use strict";r.d(t,"a",(function(){return j}));var a,n=r(2),i=r(4),o=r(5),s=r(6),l=r(0),c=r(42),u=r(26),b=r(18),p=r(1),d=(r(14),r(19),r(15),r(10)),y=r(43),f=new c.a({count:"count",sum:"sum",min:"min",max:"max",avg:"avg",stddev:"stddev",var:"var",exceedslimit:"exceedslimit",percentile_cont:"percentile-continuous",percentile_disc:"percentile-discrete"}),v=a=function(e){Object(o.a)(r,e);var t=Object(s.a)(r);function r(e){var a;return Object(n.a)(this,r),(a=t.call(this,e)).maxPointCount=void 0,a.maxRecordCount=void 0,a.maxVertexCount=void 0,a.onStatisticField=null,a.outStatisticFieldName=null,a.statisticType=null,a.statisticParameters=null,a}return Object(i.a)(r,[{key:"writeStatisticParameters",value:function(e,t){"percentile-continuous"!==this.statisticType&&"percentile-discrete"!==this.statisticType||(t.statisticParameters=Object(b.a)(e))}},{key:"clone",value:function(){return new a({maxPointCount:this.maxPointCount,maxRecordCount:this.maxRecordCount,maxVertexCount:this.maxVertexCount,onStatisticField:this.onStatisticField,outStatisticFieldName:this.outStatisticFieldName,statisticType:this.statisticType,statisticParameters:Object(b.a)(this.statisticParameters)})}}]),r}(u.a);Object(l.a)([Object(p.b)({type:Number,json:{write:!0}})],v.prototype,"maxPointCount",void 0),Object(l.a)([Object(p.b)({type:Number,json:{write:!0}})],v.prototype,"maxRecordCount",void 0),Object(l.a)([Object(p.b)({type:Number,json:{write:!0}})],v.prototype,"maxVertexCount",void 0),Object(l.a)([Object(p.b)({type:String,json:{write:!0}})],v.prototype,"onStatisticField",void 0),Object(l.a)([Object(p.b)({type:String,json:{write:!0}})],v.prototype,"outStatisticFieldName",void 0),Object(l.a)([Object(p.b)({type:String,json:{read:{source:"statisticType",reader:f.read},write:{target:"statisticType",writer:f.write}}})],v.prototype,"statisticType",void 0),Object(l.a)([Object(p.b)({type:Object})],v.prototype,"statisticParameters",void 0),Object(l.a)([Object(y.a)("statisticParameters")],v.prototype,"writeStatisticParameters",null);var j=v=a=Object(l.a)([Object(d.a)("esri.rest.support.StatisticDefinition")],v)},715:function(e,t,r){"use strict";r.d(t,"a",(function(){return c})),r.d(t,"b",(function(){return b})),r.d(t,"c",(function(){return l}));r(19);var a=r(29),n=r(66),i=r(165),o=r(212),s=r(691);function l(e,t,r,i){var o=function(e,t){return e?function(e,t){if(!t||"web-scene"!==t.origin)return!0;switch(e.type){case"simple":case"unique-value":case"class-breaks":return!0;default:return!1}}(e,t)?e.write({},t):(t.messages&&t.messages.push(new a.a("renderer:unsupported","Renderer of type '".concat(e.declaredClass,"' are not supported in scenes."),{renderer:e,context:t})),null):null}(e,i);o&&Object(n.c)(r,o,t)}function c(e,t){return b(e,null,t)}var u=Object(o.b)({types:s.a});function b(e,t,r){return e?e&&(e.styleName||e.styleUrl)&&"uniqueValue"!==e.type?(r&&r.messages&&r.messages.push(new i.a("renderer:unsupported","Only UniqueValueRenderer can be referenced from a web style, but found '"+e.type+"'",{definition:e,context:r})),null):u(e,t,r):null}},717:function(e,t,r){"use strict";r.d(t,"a",(function(){return j}));var a,n=r(2),i=r(4),o=r(5),s=r(6),l=r(0),c=(r(114),r(42)),u=r(26),b=r(18),p=r(1),d=(r(14),r(19),r(15),r(10)),y=r(58),f=new c.a({upperLeft:"upper-left",lowerLeft:"lower-left"}),v=a=function(e){Object(o.a)(r,e);var t=Object(s.a)(r);function r(e){var a;return Object(n.a)(this,r),(a=t.call(this,e)).extent=null,a.mode="view",a.originPosition="upper-left",a.tolerance=1,a}return Object(i.a)(r,[{key:"clone",value:function(){return new a(Object(b.a)({extent:this.extent,mode:this.mode,originPosition:this.originPosition,tolerance:this.tolerance}))}}]),r}(u.a);Object(l.a)([Object(p.b)({type:y.a,json:{write:{overridePolicy:function(){return{enabled:"view"===this.mode}}}}})],v.prototype,"extent",void 0),Object(l.a)([Object(p.b)({type:["view","edit"],json:{write:!0}})],v.prototype,"mode",void 0),Object(l.a)([Object(p.b)({type:String,json:{read:f.read,write:f.write}})],v.prototype,"originPosition",void 0),Object(l.a)([Object(p.b)({type:Number,json:{write:{overridePolicy:function(){return{enabled:"view"===this.mode}}}}})],v.prototype,"tolerance",void 0);var j=v=a=Object(l.a)([Object(d.a)("esri.rest.support.QuantizationParameters")],v)},719:function(e,t,r){"use strict";r.d(t,"a",(function(){return v}));var a=r(2),n=r(4),i=r(5),o=r(6),s=r(0),l=r(665),c=r(678),u=r(1),b=(r(19),r(14),r(15),r(57)),p=r(10),d=r(698),y=r(209),f=r(669);var v=function(e){var t=function(e){Object(i.a)(r,e);var t=Object(o.a)(r);function r(){var e;return Object(a.a)(this,r),(e=t.apply(this,arguments)).timeExtent=null,e.timeOffset=null,e.useViewTime=!0,e}return Object(n.a)(r,[{key:"readOffset",value:function(e,t){var r=t.timeInfo.exportOptions;if(!r)return null;var a=r.timeOffset,n=f.a.fromJSON(r.timeOffsetUnits);return a&&n?new c.a({value:a,unit:n}):null}},{key:"timeInfo",set:function(e){Object(y.f)(e,this.fieldsIndex),this._set("timeInfo",e)}}]),r}(e);return Object(s.a)([Object(u.b)({type:l.a,json:{write:!1}})],t.prototype,"timeExtent",void 0),Object(s.a)([Object(u.b)({type:c.a})],t.prototype,"timeOffset",void 0),Object(s.a)([Object(b.a)("service","timeOffset",["timeInfo.exportOptions"])],t.prototype,"readOffset",null),Object(s.a)([Object(u.b)({value:null,type:d.a,json:{write:!0,origins:{"web-document":{read:!1,write:!1}}}})],t.prototype,"timeInfo",null),Object(s.a)([Object(u.b)({type:Boolean,json:{read:{source:"timeAnimation"},write:{target:"timeAnimation"},origins:{"web-scene":{read:!1,write:!1}}}})],t.prototype,"useViewTime",void 0),t=Object(s.a)([Object(p.a)("esri.layers.mixins.TemporalLayer")],t),t}},721:function(e,t,r){"use strict";r.d(t,"a",(function(){return c}));var a=r(2),n=r(5),i=r(6),o=r(0),s=r(1),l=(r(19),r(14),r(15),r(10)),c=function(e){var t=function(e){Object(n.a)(r,e);var t=Object(i.a)(r);function r(){var e;return Object(a.a)(this,r),(e=t.apply(this,arguments)).customParameters=null,e}return r}(e);return Object(o.a)([Object(s.b)({type:Object,json:{write:{overridePolicy:function(e){return{enabled:!!(e&&Object.keys(e).length>0)}}}}})],t.prototype,"customParameters",void 0),t=Object(o.a)([Object(l.a)("esri.layers.mixins.CustomParametersMixin")],t)}},724:function(e,t,r){"use strict";r.d(t,"a",(function(){return u}));var a=r(2),n=r(4),i=r(5),o=r(6),s=r(0),l=r(1),c=(r(19),r(14),r(15),r(10));var u=function(e){var t=function(e){Object(i.a)(r,e);var t=Object(o.a)(r);function r(){return Object(a.a)(this,r),t.apply(this,arguments)}return Object(n.a)(r,[{key:"apiKey",get:function(){var e;return this._isOverridden("apiKey")?this._get("apiKey"):function(e){return"portalItem"in e}(this)?null==(e=this.portalItem)?void 0:e.apiKey:null},set:function(e){null!=e?this._override("apiKey",e):(this._clearOverride("apiKey"),this.clear("apiKey","user"))}}]),r}(e);return Object(s.a)([Object(l.b)({type:String})],t.prototype,"apiKey",null),t=Object(s.a)([Object(c.a)("esri.layers.mixins.APIKeyMixin")],t)}},725:function(e,t,r){"use strict";r.d(t,"a",(function(){return l})),r.d(t,"b",(function(){return c})),r.d(t,"c",(function(){return b})),r.d(t,"d",(function(){return u}));r(19),r(11);var a=r(166),n=r(98),i=r(143),o=r(136),s=r(703),l=(i.a.fromJSON(s.a),n.a.fromJSON(s.c),a.a.fromJSON(s.b),o.a.fromJSON(s.d));var c=i.a.fromJSON(s.e),u=n.a.fromJSON(s.g),b=a.a.fromJSON(s.f)},726:function(e,t,r){"use strict";r.d(t,"a",(function(){return y})),r.d(t,"b",(function(){return d}));var a=r(2),n=r(4),i=r(5),o=r(6),s=r(0),l=r(60),c=r(183),u=r(1),b=r(10),p=r(763),d=function(e){var t=function(e){Object(i.a)(r,e);var t=Object(o.a)(r);function r(){return Object(a.a)(this,r),t.apply(this,arguments)}return Object(n.a)(r,[{key:"destroy",value:function(){this.destroyed||(this.handles.destroy(),this.updatingHandles.destroy())}},{key:"handles",get:function(){return this._get("handles")||new c.a}},{key:"updatingHandles",get:function(){return this._get("updatingHandles")||new p.a}}]),r}(e);return Object(s.a)([Object(u.b)({readOnly:!0})],t.prototype,"handles",null),Object(s.a)([Object(u.b)({readOnly:!0})],t.prototype,"updatingHandles",null),t=Object(s.a)([Object(b.a)("esri.core.HandleOwner")],t),t},y=function(e){Object(i.a)(r,e);var t=Object(o.a)(r);function r(){return Object(a.a)(this,r),t.apply(this,arguments)}return r}(d(l.a));y=Object(s.a)([Object(b.a)("esri.core.HandleOwner")],y)},733:function(e,t,r){"use strict";r.d(t,"a",(function(){return h}));var a=r(2),n=r(4),i=r(5),o=r(6),s=r(0),l=r(26),c=r(18),u=r(1),b=(r(14),r(19),r(15),r(57)),p=r(10),d=r(43),y=r(664),f=(r(660),r(661)),v=r(662),j=r(713),O=function(e){Object(i.a)(r,e);var t=Object(o.a)(r);function r(e){var n;return Object(a.a)(this,r),(n=t.call(this,e)).id=null,n.name=null,n.domains=null,n.templates=null,n}return Object(n.a)(r,[{key:"readDomains",value:function(e){var t={};for(var r in e)if(e.hasOwnProperty(r)){var a=e[r];switch(a.type){case"range":t[r]=v.a.fromJSON(a);break;case"codedValue":t[r]=y.a.fromJSON(a);break;case"inherited":t[r]=f.a.fromJSON(a)}}return t}},{key:"writeDomains",value:function(e,t){var r={};for(var a in e)e.hasOwnProperty(a)&&(r[a]=e[a]&&e[a].toJSON());Object(c.c)(r),t.domains=r}},{key:"readTemplates",value:function(e){return e&&e.map((function(e){return new j.a(e)}))}},{key:"writeTemplates",value:function(e,t){t.templates=e&&e.map((function(e){return e.toJSON()}))}}]),r}(l.a);Object(s.a)([Object(u.b)({json:{write:!0}})],O.prototype,"id",void 0),Object(s.a)([Object(u.b)({json:{write:!0}})],O.prototype,"name",void 0),Object(s.a)([Object(u.b)({json:{write:!0}})],O.prototype,"domains",void 0),Object(s.a)([Object(b.a)("domains")],O.prototype,"readDomains",null),Object(s.a)([Object(d.a)("domains")],O.prototype,"writeDomains",null),Object(s.a)([Object(u.b)({json:{write:!0}})],O.prototype,"templates",void 0),Object(s.a)([Object(b.a)("templates")],O.prototype,"readTemplates",null),Object(s.a)([Object(d.a)("templates")],O.prototype,"writeTemplates",null);var h=O=Object(s.a)([Object(p.a)("esri.layers.support.FeatureType")],O)},745:function(e,t,r){"use strict";r.d(t,"a",(function(){return y}));var a,n=r(2),i=r(4),o=r(5),s=r(6),l=r(0),c=r(52),u=r(26),b=r(1),p=(r(19),r(14),r(15),r(10)),d=a=function(e){Object(o.a)(r,e);var t=Object(s.a)(r);function r(e){var a;return Object(n.a)(this,r),(a=t.call(this,e)).floorField=null,a.viewAllMode=!1,a.viewAllLevelIds=new c.a,a}return Object(i.a)(r,[{key:"clone",value:function(){return new a({floorField:this.floorField,viewAllMode:this.viewAllMode,viewAllLevelIds:this.viewAllLevelIds})}}]),r}(u.a);Object(l.a)([Object(b.b)({type:String,json:{write:!0}})],d.prototype,"floorField",void 0),Object(l.a)([Object(b.b)({json:{read:!1,write:!1}})],d.prototype,"viewAllMode",void 0),Object(l.a)([Object(b.b)({json:{read:!1,write:!1}})],d.prototype,"viewAllLevelIds",void 0);var y=d=a=Object(l.a)([Object(p.a)("esri.layers.support.LayerFloorInfo")],d)},751:function(e,t,r){"use strict";r.d(t,"a",(function(){return x})),r.d(t,"b",(function(){return v})),r.d(t,"c",(function(){return j})),r.d(t,"d",(function(){return O})),r.d(t,"e",(function(){return h})),r.d(t,"f",(function(){return w})),r.d(t,"g",(function(){return f}));var a=r(21),n=r(22),i=r(46),o=r(210),s=r(694),l=r(15),c=r(11),u=r(683),b=r(704),p=l.a.getLogger("esri.renderers.visualVariables.support.visualVariableUtils"),d=new o.a,y=Math.PI,f=/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i;function v(e,t,r){var a="visualVariables"in e&&e.visualVariables?e.visualVariables.filter((function(e){return"color"===e.type}))[0]:e;if(a)if("esri.renderers.visualVariables.ColorVariable"===a.declaredClass){var n="number"==typeof t,o=n?null:t,s=o&&o.attributes,l=n?t:null,u=a.field,b=a.cache,d=b.ipData,y=b.hasExpression,f=a.cache.compiledFunc;if(!u&&!y){var v=a.stops;return v&&v[0]&&v[0].color}if("number"!=typeof l)if(y){if(!Object(c.j)(r)||!Object(c.j)(r.arcade))return void p.error("Use of arcade expressions requires an arcade context");var j={viewingMode:r.viewingMode,scale:r.scale,spatialReference:r.spatialReference},O=r.arcade.arcadeUtils,h=O.getViewInfo(j),m=O.createExecContext(o,h);if(!f){var g=O.createSyntaxTree(a.valueExpression);f=O.createFunction(g),a.cache.compiledFunc=f}l=O.executeFunction(f,m)}else s&&(l=s[u]);var w=a.normalizationField,x=s?parseFloat(s[w]):void 0;if(null!=l&&(!w||n||!isNaN(x)&&0!==x)){isNaN(x)||n||(l/=x);var k=S(l,d);if(k){var I=k[0],T=k[1],F=I===T?a.stops[I].color:i.a.blendColors(a.stops[I].color,a.stops[T].color,k[2],Object(c.j)(r)?r.color:void 0);return new i.a(F)}}}else p.warn("The visualVariable should be an instance of esri.renderers.visualVariables.ColorVariable")}function j(e,t,r){var a="visualVariables"in e&&e.visualVariables?e.visualVariables.filter((function(e){return"opacity"===e.type}))[0]:e;if(a)if("esri.renderers.visualVariables.OpacityVariable"===a.declaredClass){var n="number"==typeof t,i=n?null:t,o=i&&i.attributes,s=n?t:null,l=a.field,u=a.cache,b=u.ipData,d=u.hasExpression,y=a.cache.compiledFunc;if(!l&&!d){var f=a.stops;return f&&f[0]&&f[0].opacity}if("number"!=typeof s)if(d){if(Object(c.i)(r)||Object(c.i)(r.arcade))return void p.error("Use of arcade expressions requires an arcade context");var v={viewingMode:r.viewingMode,scale:r.scale,spatialReference:r.spatialReference},j=r.arcade.arcadeUtils,O=j.getViewInfo(v),h=j.createExecContext(i,O);if(!y){var m=j.createSyntaxTree(a.valueExpression);y=j.createFunction(m),a.cache.compiledFunc=y}s=j.executeFunction(y,h)}else o&&(s=o[l]);var g=a.normalizationField,w=o?parseFloat(o[g]):void 0;if(null!=s&&(!g||n||!isNaN(w)&&0!==w)){isNaN(w)||n||(s/=w);var x=S(s,b);if(x){var k=x[0],I=x[1];if(k===I)return a.stops[k].opacity;var T=a.stops[k].opacity;return T+(a.stops[I].opacity-T)*x[2]}}}else p.warn("The visualVariable should be an instance of esri.renderers.visualVariables.OpacityVariable")}function O(e,t,r){var a="visualVariables"in e&&e.visualVariables?e.visualVariables.filter((function(e){return"rotation"===e.type}))[0]:e;if(a){if("esri.renderers.visualVariables.RotationVariable"===a.declaredClass){var n=a.axis||"heading",i="heading"===n&&"arithmetic"===a.rotationType?90:0,o="heading"===n&&"arithmetic"===a.rotationType?-1:1,s="number"==typeof t?null:t,l=s&&s.attributes,u=a.field,b=a.cache.hasExpression,d=a.cache.compiledFunc,y=0;if(!u&&!b)return y;if(b){if(Object(c.i)(r)||Object(c.i)(r.arcade))return void p.error("Use of arcade expressions requires an arcade context");var f={viewingMode:r.viewingMode,scale:r.scale,spatialReference:r.spatialReference},v=r.arcade.arcadeUtils,j=v.getViewInfo(f),O=v.createExecContext(s,j);if(!d){var h=v.createSyntaxTree(a.valueExpression);d=v.createFunction(h),a.cache.compiledFunc=d}y=v.executeFunction(d,O)}else l&&(y=l[u]||0);return y="number"!=typeof y||isNaN(y)?null:i+o*y}p.warn("The visualVariable should be an instance of esri.renderers.visualVariables.RotationVariable")}}function h(e,t,r){var a="visualVariables"in e&&e.visualVariables?e.visualVariables.filter((function(e){return"size"===e.type}))[0]:e;if(a){if("esri.renderers.visualVariables.SizeVariable"===a.declaredClass){var i=function(e,t,r,a,i){switch(t.transformationType){case"additive":return function(e,t,r,a){return e+(m(t.minSize,r,a)||t.minDataValue)}(e,t,r,a);case"constant":return function(e,t,r){var a=e.stops,n=a&&a.length&&a[0].size;return null==n&&(n=e.minSize),m(n,t,r)}(t,r,a);case"clamped-linear":return function(e,t,r,a){var n=(e-t.minDataValue)/(t.maxDataValue-t.minDataValue),i=m(t.minSize,r,a),o=m(t.maxSize,r,a),s=Object(c.j)(a)?a.shape:void 0;if(e<=t.minDataValue)return i;if(e>=t.maxDataValue)return o;if("area"===t.scaleBy&&s){var l="circle"===s,u=l?y*Math.pow(i/2,2):i*i,b=u+n*((l?y*Math.pow(o/2,2):o*o)-u);return l?2*Math.sqrt(b/y):Math.sqrt(b)}return i+n*(o-i)}(e,t,r,a);case"proportional":return function(e,t,r,a){var n=Object(c.j)(a)?a.shape:void 0,i=e/t.minDataValue,o=m(t.minSize,r,a),s=m(t.maxSize,r,a);return g("circle"===n?2*Math.sqrt(i*Math.pow(o/2,2)):"square"===n||"diamond"===n||"image"===n?Math.sqrt(i*Math.pow(o,2)):i*o,o,s)}(e,t,r,a);case"stops":return function(e,t,r,a,i){var o=S(e,i),s=Object(n.a)(o,3),l=s[0],c=s[1],u=s[2];if(l===c)return m(t.stops[l].size,r,a);var b=m(t.stops[l].size,r,a);return b+(m(t.stops[c].size,r,a)-b)*u}(e,t,r,a,i);case"real-world-size":return function(e,t,r,a){var n=(Object(c.j)(a)&&a.resolution?a.resolution:1)*u.a[t.valueUnit],i=m(t.minSize,r,a),o=m(t.maxSize,r,a),s=t.valueRepresentation;return g("area"===s?2*Math.sqrt(e/y)/n:"radius"===s||"distance"===s?2*e/n:e/n,i,o)}(e,t,r,a);case"identity":return e;case"unknown":return null}}(function(e,t,r){var a="number"==typeof t,n=a?null:t,i=n&&n.attributes,o=a?t:null,s=e.cache.isScaleDriven,l=e.cache.compiledFunc;if(s){var u=Object(c.j)(r)?r.scale:void 0,d=Object(c.j)(r)?r.view:void 0;o=null==u||"3d"===d?function(e){var t=null,r=null,a=e.stops;return a?(t=a[0].value,r=a[a.length-1].value):(t=e.minDataValue||0,r=e.maxDataValue||0),(t+r)/2}(e):u}else if(!a)switch(e.inputValueType){case"expression":if(Object(c.i)(r)||Object(c.i)(r.arcade))return void p.error("Use of arcade expressions requires an arcade context");var y={viewingMode:r.viewingMode,scale:r.scale,spatialReference:r.spatialReference},f=r.arcade.arcadeUtils,v=f.getViewInfo(y),j=f.createExecContext(n,v);if(!l){var O=f.createSyntaxTree(e.valueExpression);l=f.createFunction(O),e.cache.compiledFunc=l}o=f.executeFunction(l,j);break;case"field":i&&(o=i[e.field]);break;case"unknown":o=null}if(!Object(b.d)(o))return null;if(a||!e.normalizationField)return o;var h=i?parseFloat(i[e.normalizationField]):null;return Object(b.d)(h)&&0!==h?o/h:null}(a,t,r),a,t,r,a.cache.ipData);return null==i||isNaN(i)?0:i}p.warn("The visualVariable should be an instance of esri.renderers.visualVariables.SizeVariable")}}function m(e,t,r){return null==e?null:Object(b.c)(e)?h(e,t,r):Object(b.d)(e)?e:null}function g(e,t,r){return Object(b.d)(r)&&e>r?r:Object(b.d)(t)&&e<t?t:e}function w(e,t,r){if(!(e.cache.isScaleDriven&&"3d"===r||t))return null;var a={scale:t,view:r},n=m(e.minSize,d,a),i=m(e.maxSize,d,a);if(null!=n||null!=i){if(n>i){var o=i;i=n,n=o}return{minSize:n,maxSize:i}}}function S(e,t){if(t){var r=0,a=t.length-1;return t.some((function(t,n){return e<t?(a=n,!0):(r=n,!1)})),[r,a,(e-t[r])/(t[a]-t[r])]}}function x(e,t,r){var n,i=["proportional","proportional","proportional"],o=Object(a.a)(e);try{for(o.s();!(n=o.n()).done;){var l=n.value,c=l.useSymbolValue?"symbol-value":h(l,t,r);switch(l.axis){case"width":i[0]=c;break;case"depth":i[1]=c;break;case"height":i[2]=c;break;case"width-and-depth":i[0]=c,i[1]=c;break;case"all":case void 0:case null:i[0]=c,i[1]=c,i[2]=c;break;default:Object(s.a)(l.axis)}}}catch(u){o.e(u)}finally{o.f()}return i}},763:function(e,t,r){"use strict";r.d(t,"a",(function(){return j}));var a=r(2),n=r(4),i=r(5),o=r(6),s=r(0),l=r(60),c=r(183),u=r(11),b=r(241),p=r(99),d=r(100),y=r(215),f=r(1),v=r(10),j=function(e){Object(i.a)(r,e);var t=Object(o.a)(r);function r(){var e;return Object(a.a)(this,r),(e=t.apply(this,arguments)).updating=!1,e.handleId=0,e.handles=new c.a,e.scheduleHandleId=0,e.pendingPromises=new Set,e}return Object(n.a)(r,[{key:"destroy",value:function(){this.removeAll(),this.handles.destroy()}},{key:"add",value:function(e,t,r){var a=this,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=0!=(1&n),o=++this.handleId;i||this.installSyncUpdatingWatch(e,t,o);var s=0!=(2&n)?Object(p.a)(e,t,r,i):e.watch(t,r,i);return this.handles.add(s,o),{remove:function(){return a.handles.remove(o)}}}},{key:"addOnCollectionPropertyChange",value:function(e,t,r){var a=this,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=0!=(2&n),o=++this.handleId;return this.handles.add([Object(p.b)(e,t,"after-changes",this.createSyncUpdatingCallback()),Object(p.b)(e,t,"change",r,i?function(e){r({added:e.items,removed:[],moved:[],target:e})}:void 0)],o),{remove:function(){a.handles.remove(o)}}}},{key:"addOnCollectionChange",value:function(e,t){var r=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=0!=(2&a),i=++this.handleId;return this.handles.add([e.on("after-changes",this.createSyncUpdatingCallback()),e.on("change",t)],i),n&&t({added:e.items,removed:[],moved:[],target:e}),{remove:function(){r.handles.remove(i)}}}},{key:"addPromise",value:function(e){var t=this;if(Object(u.i)(e))return e;var r=++this.handleId;this.handles.add({remove:function(){t.pendingPromises.delete(e)&&(0!==t.pendingPromises.size||t.handles.has(O)||t._set("updating",!1))}},r),this.pendingPromises.add(e),this._set("updating",!0);var a=function(){return t.handles.remove(r)};return e.then(a,a),e}},{key:"removeAll",value:function(){this.pendingPromises.clear(),this.handles.removeAll(),this._set("updating",!1)}},{key:"installSyncUpdatingWatch",value:function(e,t,r){var a=this.createSyncUpdatingCallback(),n=Object(y.b)((function(){return Object(d.c)(e,t)}),a);return this.handles.add(n,r),n}},{key:"createSyncUpdatingCallback",value:function(){var e=this;return function(){e.handles.remove(O),++e.scheduleHandleId;var t=e.scheduleHandleId;e._get("updating")||e._set("updating",!0),e.handles.add(Object(b.a)((function(){t===e.scheduleHandleId&&(e._set("updating",e.pendingPromises.size>0),e.handles.remove(O))})),O)}}}]),r}(l.a);Object(s.a)([Object(f.b)({readOnly:!0})],j.prototype,"updating",void 0),j=Object(s.a)([Object(v.a)("esri.views.support.WatchUpdatingTracking")],j);var O=-42},808:function(e,t,r){"use strict";r.d(t,"a",(function(){return v}));var a=r(21),n=r(2),i=r(4),o=r(5),s=r(6),l=r(0),c=r(52),u=r(726),b=r(11),p=r(1),d=(r(19),r(14),r(15),r(10)),y=r(215),f=function(e){Object(o.a)(r,e);var t=Object(s.a)(r);function r(e){var a;return Object(n.a)(this,r),(a=t.call(this,e)).getCollections=null,a}return Object(i.a)(r,[{key:"initialize",value:function(){var e=this;this.handles.add(Object(y.a)((function(){return e.refresh()})))}},{key:"destroy",value:function(){this.getCollections=null}},{key:"refresh",value:function(){var e=Object(b.j)(this.getCollections)?this.getCollections():null;if(Object(b.i)(e))this.removeAll();else{var t,r=0,n=Object(a.a)(e);try{for(n.s();!(t=n.n()).done;){var i=t.value;Object(b.j)(i)&&(r=this._processCollection(r,i))}}catch(o){n.e(o)}finally{n.f()}this.splice(r,this.length)}}},{key:"_createNewInstance",value:function(e){return new c.a(e)}},{key:"_processCollection",value:function(e,t){if(!t)return e;var r,n=this.itemFilterFunction?this.itemFilterFunction:function(e){return!!e},i=Object(a.a)(t);try{for(i.s();!(r=i.n()).done;){var o=r.value;if(o){if(n(o)){var s=this.indexOf(o,e);s>=0?s!==e&&this.reorder(o,e):this.add(o,e),++e}if(this.getChildrenFunction){var l=this.getChildrenFunction(o);if(Array.isArray(l)){var c,u=Object(a.a)(l);try{for(u.s();!(c=u.n()).done;){var b=c.value;e=this._processCollection(e,b)}}catch(p){u.e(p)}finally{u.f()}}else e=this._processCollection(e,l)}}}}catch(p){i.e(p)}finally{i.f()}return e}}]),r}(Object(u.b)(c.a));Object(l.a)([Object(p.b)()],f.prototype,"getCollections",void 0),Object(l.a)([Object(p.b)()],f.prototype,"getChildrenFunction",void 0),Object(l.a)([Object(p.b)()],f.prototype,"itemFilterFunction",void 0);var v=f=Object(l.a)([Object(d.a)("esri.core.CollectionFlattener")],f)},824:function(e,t,r){"use strict";r.d(t,"a",(function(){return i})),r.d(t,"b",(function(){return s})),r.d(t,"c",(function(){return n}));var a=r(21);function n(e,t,r){return t.flatten((function(e){return e.sublayers})).length!==e.length||(!!e.some((function(e){return e.originIdOf("minScale")>r||e.originIdOf("maxScale")>r||e.originIdOf("renderer")>r||e.originIdOf("labelingInfo")>r||e.originIdOf("opacity")>r||e.originIdOf("labelsVisible")>r||e.originIdOf("source")>r}))||!o(e,t))}function i(e,t,r){return!!e.some((function(e){var t=e.source;return!(!t||"map-layer"===t.type&&t.mapLayerId===e.id&&(!t.gdbVersion||t.gdbVersion===r.gdbVersion))||e.originIdOf("renderer")>2||e.originIdOf("labelingInfo")>2||e.originIdOf("opacity")>2||e.originIdOf("labelsVisible")>2}))||!o(e,t)}function o(e,t){if(!e||!e.length)return!0;var r=t.slice().reverse().flatten((function(e){var t=e.sublayers;return t&&t.toArray().reverse()})).map((function(e){return e.id})).toArray();if(e.length>r.length)return!1;var n,i=0,o=r.length,s=Object(a.a)(e);try{for(s.s();!(n=s.n()).done;){for(var l=n.value.id;i<o&&r[i]!==l;)i++;if(i>=o)return!1}}catch(c){s.e(c)}finally{s.f()}return!0}function s(e){return!!e&&e.some((function(e){return null!=e.minScale||e.layerDefinition&&null!=e.layerDefinition.minScale}))}},832:function(e,t,r){"use strict";function a(e){var t,r=e.layer;return"floorInfo"in r&&null!=(t=r.floorInfo)&&t.floorField&&"floors"in e.view?o(e.view.floors,r.floorInfo.floorField):null}function n(e,t){var r;return"floorInfo"in t&&null!=(r=t.floorInfo)&&r.floorField?o(e,t.floorInfo.floorField):null}function i(e,t){var r=t.definitionExpression;return e?r?"(".concat(r,") AND (").concat(e,")"):e:r}function o(e,t){if(null==e||!e.length)return null;var r=e.filter((function(e){return""!==e})).map((function(e){return"'".concat(e,"'")}));return r.push("''"),"".concat(t," IN (").concat(r.join(","),") OR ").concat(t," IS NULL")}r.d(t,"a",(function(){return i})),r.d(t,"b",(function(){return a})),r.d(t,"c",(function(){return n}))},838:function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));var a=r(22),n=r(2),i=r(4),o=r(29),s=function(){function e(t,r){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";Object(n.a)(this,e),this.major=t,this.minor=r,this._context=a}return Object(i.a)(e,[{key:"lessThan",value:function(e,t){return this.major<e||e===this.major&&this.minor<t}},{key:"since",value:function(e,t){return!this.lessThan(e,t)}},{key:"validate",value:function(e){if(this.major!==e.major){var t=this._context&&this._context+":",r=this._context&&this._context+" ";throw new o.a(t+"unsupported-version","Required major ".concat(r,"version is '").concat(this.major,"', but got '${version.major}.${version.minor}'"),{version:e})}}},{key:"clone",value:function(){return new e(this.major,this.minor,this._context)}}],[{key:"parse",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=t.split("."),i=Object(a.a)(n,2),s=i[0],l=i[1],c=/^\s*\d+\s*$/;if(!s||!s.match||!s.match(c))throw new o.a((r&&r+":")+"invalid-version","Expected major version to be a number, but got '${version}'",{version:t});if(!l||!l.match||!l.match(c))throw new o.a((r&&r+":")+"invalid-version","Expected minor version to be a number, but got '${version}'",{version:t});var u=parseInt(s,10),b=parseInt(l,10);return new e(u,b,r)}}]),e}()},839:function(e,t,r){"use strict";r.d(t,"a",(function(){return ae}));var a,n=r(22),i=r(21),o=r(7),s=r.n(o),l=r(13),c=r(12),u=r(2),b=r(4),p=r(5),d=r(6),y=r(0),f=(r(114),r(214)),v=(r(700),r(686),r(688),r(689),r(663),r(687),r(701),r(715),r(691)),j=r(82),O=r(332),h=r(52),m=r(29),g=r(726),w=r(239),S=r(18),x=r(142),k=r(15),I=r(11),T=r(677),F=r(27),E=r(1),P=r(69),L=r(97),V=(r(19),r(57)),D=r(10),N=r(43),_=r(14),C=r(164),R=r(733),M=r(666),A=r(672),U=r(675),q=r(745),J=r(673),z=r(711),B=r(670),H=r(755),G=r(832),$=r(58);function K(e){return e&&"esriSMS"===e.type}function Q(e,t,r){var a,n=this.originIdOf(t)>=Object(C.d)(r.origin);return{ignoreOrigin:!0,allowNull:n,enabled:!!r&&"map-image"===(null==(a=r.layer)?void 0:a.type)&&(r.writeSublayerStructure||n)}}function W(e,t,r){var a;return{enabled:!!r&&"tile"===(null==(a=r.layer)?void 0:a.type)&&this._isOverridden(t)}}function X(e,t,r){return{ignoreOrigin:!0,enabled:r&&r.writeSublayerStructure||!1}}function Z(e,t,r){return{ignoreOrigin:!0,enabled:!!r&&(r.writeSublayerStructure||this.originIdOf(t)>=Object(C.d)(r.origin))}}var Y=k.a.getLogger("esri.layers.support.Sublayer"),ee=0,te=new Set;te.add("layer"),te.add("parent"),te.add("loaded"),te.add("loadStatus"),te.add("loadError"),te.add("loadWarnings");var re=a=function(e){Object(p.a)(o,e);var t=Object(d.a)(o);function o(e){var r;return Object(u.a)(this,o),(r=t.call(this,e)).capabilities=void 0,r.fields=null,r.fullExtent=null,r.globalIdField=null,r.legendEnabled=!0,r.objectIdField=null,r.popupEnabled=!0,r.popupTemplate=null,r.sourceJSON=null,r.title=null,r.typeIdField=null,r.types=null,r}return Object(b.a)(o,[{key:"load",value:function(){var e=Object(c.a)(s.a.mark((function e(t){var r=this;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(this.addResolvingPromise(Object(c.a)(s.a.mark((function e(){var a,n,i,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.layer||r.url){e.next=2;break}throw new m.a("sublayer:missing-layer","Sublayer can't be loaded without being part of a layer",{sublayer:r});case 2:if(n=null,r.layer&&!(r.originIdOf("url")>2)&&"data-layer"!==(null==(a=r.source)?void 0:a.type)){e.next=9;break}return e.next=6,Object(j.default)(r.url,Object(l.a)({responseType:"json",query:{f:"json"}},t));case 6:n=e.sent.data,e.next=14;break;case 9:return o=r.id,"map-layer"===(null==(i=r.source)?void 0:i.type)&&(o=r.source.mapLayerId),e.next=13,r.layer.fetchSublayerInfo(o,t);case 13:n=e.sent;case 14:n&&(r.sourceJSON=n,r.read({layerDefinition:n},{origin:"service"}));case 15:case"end":return e.stop()}}),e)})))()),this));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"readCapabilities",value:function(e,t){var r=(e=(t=t.layerDefinition||t).capabilities||e)?e.toLowerCase().split(",").map((function(e){return e.trim()})):[];return{exportMap:{supportsModification:!!t.canModifyLayer},operations:{supportsQuery:-1!==r.indexOf("query")}}}},{key:"definitionExpression",set:function(e){this._setAndNotifyLayer("definitionExpression",e)}},{key:"fieldsIndex",get:function(){return new A.a(this.fields||[])}},{key:"floorInfo",set:function(e){this._setAndNotifyLayer("floorInfo",e)}},{key:"readGlobalIdFieldFromService",value:function(e,t){if((t=t.layerDefinition||t).globalIdField)return t.globalIdField;if(t.fields){var r,a=Object(i.a)(t.fields);try{for(a.s();!(r=a.n()).done;){var n=r.value;if("esriFieldTypeGlobalID"===n.type)return n.name}}catch(o){a.e(o)}finally{a.f()}}}},{key:"id",get:function(){var e=this._get("id");return null==e?ee++:e},set:function(e){this._get("id")!==e&&(!1!==this.get("layer.capabilities.exportMap.supportsDynamicLayers")?this._set("id",e):this._logLockedError("id","capability not available 'layer.capabilities.exportMap.supportsDynamicLayers'"))}},{key:"labelingInfo",set:function(e){this._setAndNotifyLayer("labelingInfo",e)}},{key:"writeLabelingInfo",value:function(e,t,r,a){e&&e.length&&(t.layerDefinition={drawingInfo:{labelingInfo:e.map((function(e){return e.write({},a)}))}})}},{key:"labelsVisible",set:function(e){this._setAndNotifyLayer("labelsVisible",e)}},{key:"layer",set:function(e){this._set("layer",e),this.sublayers&&this.sublayers.forEach((function(t){return t.layer=e}))}},{key:"listMode",set:function(e){this._set("listMode",e)}},{key:"minScale",set:function(e){this._setAndNotifyLayer("minScale",e)}},{key:"readMinScale",value:function(e,t){return t.minScale||t.layerDefinition&&t.layerDefinition.minScale||0}},{key:"maxScale",set:function(e){this._setAndNotifyLayer("maxScale",e)}},{key:"readMaxScale",value:function(e,t){return t.maxScale||t.layerDefinition&&t.layerDefinition.maxScale||0}},{key:"readObjectIdFieldFromService",value:function(e,t){if((t=t.layerDefinition||t).objectIdField)return t.objectIdField;if(t.fields){var r,a=Object(i.a)(t.fields);try{for(a.s();!(r=a.n()).done;){var n=r.value;if("esriFieldTypeOID"===n.type)return n.name}}catch(o){a.e(o)}finally{a.f()}}}},{key:"opacity",set:function(e){this._setAndNotifyLayer("opacity",e)}},{key:"readOpacity",value:function(e,t){var r=t.layerDefinition;return 1-.01*(null!=r.transparency?r.transparency:r.drawingInfo.transparency)}},{key:"writeOpacity",value:function(e,t,r,a){t.layerDefinition={drawingInfo:{transparency:100-100*e}}}},{key:"writeParent",value:function(e,t){this.parent&&this.parent!==this.layer?t.parentLayerId=Object(_.e)(this.parent.id):t.parentLayerId=-1}},{key:"defaultPopupTemplate",get:function(){return this.createPopupTemplate()}},{key:"renderer",set:function(e){if(e){var t,r=Object(i.a)(e.getSymbols());try{for(r.s();!(t=r.n()).done;){var a=t.value;if(Object(O.c)(a)){Y.warn("Sublayer renderer should use 2D symbols");break}}}catch(n){r.e(n)}finally{r.f()}}this._setAndNotifyLayer("renderer",e)}},{key:"source",get:function(){return this._get("source")||new z.a({mapLayerId:this.id})},set:function(e){this._setAndNotifyLayer("source",e)}},{key:"sublayers",set:function(e){this._handleSublayersChange(e,this._get("sublayers")),this._set("sublayers",e)}},{key:"castSublayers",value:function(e){return Object(_.m)(h.a.ofType(a),e)}},{key:"writeSublayers",value:function(e,t,r){this.get("sublayers.length")&&(t[r]=this.sublayers.map((function(e){return e.id})).toArray().reverse())}},{key:"readTypeIdField",value:function(e,t){var r=(t=t.layerDefinition||t).typeIdField;if(r&&t.fields){r=r.toLowerCase();var a=t.fields.find((function(e){return e.name.toLowerCase()===r}));a&&(r=a.name)}return null}},{key:"url",get:function(){var e,t,r=null!=(e=null==(t=this.layer)?void 0:t.parsedUrl)?e:this._lastParsedUrl,a=this.source;if(!r)return null;if(this._lastParsedUrl=r,"map-layer"===(null==a?void 0:a.type))return"".concat(r.path,"/").concat(a.mapLayerId);var n={layer:JSON.stringify({source:this.source})};return"".concat(r.path,"/dynamicLayer?").concat(Object(F.D)(n))},set:function(e){e?this._override("url",e):this._clearOverride("url")}},{key:"visible",set:function(e){this._setAndNotifyLayer("visible",e)}},{key:"writeVisible",value:function(e,t,r,a){t[r]=this.getAtOrigin("defaultVisibility","service")||e}},{key:"clone",value:function(){var e=Object(P.a)(this).store,t=new a;return Object(P.a)(t).store=e.clone(te),this.commitProperty("url"),t._lastParsedUrl=this._lastParsedUrl,t}},{key:"createPopupTemplate",value:function(e){return Object(H.a)(this,e)}},{key:"createQuery",value:function(){return new B.a({returnGeometry:!0,where:this.definitionExpression||"1=1"})}},{key:"createFeatureLayer",value:function(){var e=Object(c.a)(s.a.mark((function e(){var t,a,n,i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.hasOwnProperty("sublayers")){e.next=2;break}return e.abrupt("return",null);case 2:return n=null==(t=this.layer)?void 0:t.parsedUrl,e.next=6,Promise.all([r.e(7),r.e(62),r.e(98)]).then(r.bind(null,735));case 6:return e.t0=e.sent.default,e.t1={url:n.path},i=new e.t0(e.t1),e.abrupt("return",(n&&this.source&&("map-layer"===this.source.type?i.layerId=this.source.mapLayerId:i.dynamicDataSource=this.source),null!=this.layer.refreshInterval&&(i.refreshInterval=this.layer.refreshInterval),this.definitionExpression&&(i.definitionExpression=this.definitionExpression),this.floorInfo&&(i.floorInfo=Object(S.a)(this.floorInfo)),this.originIdOf("labelingInfo")>2&&(i.labelingInfo=Object(S.a)(this.labelingInfo)),this.originIdOf("labelsVisible")>0&&(i.labelsVisible=this.labelsVisible),this.originIdOf("legendEnabled")>0&&(i.legendEnabled=this.legendEnabled),this.originIdOf("visible")>0&&(i.visible=this.visible),this.originIdOf("minScale")>0&&(i.minScale=this.minScale),this.originIdOf("maxScale")>0&&(i.maxScale=this.maxScale),this.originIdOf("opacity")>0&&(i.opacity=this.opacity),this.originIdOf("popupTemplate")>0&&(i.popupTemplate=Object(S.a)(this.popupTemplate)),this.originIdOf("renderer")>2&&(i.renderer=Object(S.a)(this.renderer)),"data-layer"===(null==(a=this.source)?void 0:a.type)&&(i.dynamicDataSource=this.source.clone()),this.originIdOf("title")>0&&(i.title=this.title),"map-image"===this.layer.type&&this.layer.originIdOf("customParameters")>0&&(i.customParameters=this.layer.customParameters),"tile"===this.layer.type&&this.layer.originIdOf("customParameters")>0&&(i.customParameters=this.layer.customParameters),i));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getField",value:function(e){return this.fieldsIndex.get(e)}},{key:"getFeatureType",value:function(e){var t=this.typeIdField,r=this.types;if(!t||!e)return null;var a=e.attributes?e.attributes[t]:void 0;if(null==a)return null;var n=null;return r.some((function(e){var t=e.id;return null!=t&&(t.toString()===a.toString()&&(n=e),!!n)})),n}},{key:"getFieldDomain",value:function(e,t){var r=t&&t.feature,a=this.getFeatureType(r);if(a){var n=a.domains&&a.domains[e];if(n&&"inherited"!==n.type)return n}return this._getLayerDomain(e)}},{key:"queryFeatures",value:function(){var e=Object(c.a)(s.a.mark((function e(){var t,a,o,c,u,b,p,d,y,f,v,j,O,h,g=arguments;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=g.length>0&&void 0!==g[0]?g[0]:this.createQuery(),a=g.length>1?g[1]:void 0,e.next=4,this.load();case 4:if(this.get("capabilities.operations.supportsQuery")){e.next=6;break}throw new m.a("Sublayer.queryFeatures","this layer doesn't support queries.");case 6:return e.next=8,Promise.all([Promise.all([r.e(24),r.e(78)]).then(r.bind(null,722)),r.e(115).then(r.bind(null,668))]);case 8:return p=e.sent,d=Object(n.a)(p,2),y=d[0].executeQuery,f=d[1].default,e.next=14,y(this.url,B.a.from(t),null!=(o=null==(c=this.layer)?void 0:c.spatialReference)?o:null,Object(l.a)(Object(l.a)({},a),{},{query:Object(l.a)(Object(l.a)({},null==(u=this.layer)?void 0:u.customParameters),{},{token:null==(b=this.layer)?void 0:b.apiKey})}));case 14:if(v=e.sent,null!=(j=f.fromJSON(v.data))&&j.features){O=Object(i.a)(j.features);try{for(O.s();!(h=O.n()).done;)h.value.sourceLayer=this}catch(s){O.e(s)}finally{O.f()}}return e.abrupt("return",j);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toExportImageJSON",value:function(e){var t,r=this,a={id:this.id,source:(null==(t=this.source)?void 0:t.toJSON())||{mapLayerId:this.id,type:"mapLayer"}};if(this.definitionExpression){var n=Object(I.j)(e)?Object(G.a)(e,this):this.definitionExpression;a.definitionExpression=n}else Object(I.j)(e)&&(a.definitionExpression=e);var i=["renderer","labelingInfo","opacity","labelsVisible"].reduce((function(e,t){return e[t]=r.originIdOf(t),e}),{}),o=Object.keys(i).some((function(e){return i[e]>2}));if(o){var s=a.drawingInfo={};i.renderer>2&&(s.renderer=this.renderer?this.renderer.toJSON():null),i.labelsVisible>2&&(s.showLabels=this.labelsVisible),this.labelsVisible&&i.labelingInfo>2&&(s.labelingInfo=this.labelingInfo?this.labelingInfo.map((function(e){return e.write({},{origin:"service",layer:r.layer})})):null,s.showLabels=!0),i.opacity>2&&(s.transparency=100-100*this.opacity),this._assignDefaultSymbolColors(s.renderer)}return a}},{key:"_assignDefaultSymbolColors",value:function(e){this._forEachSimpleMarkerSymbols(e,(function(e){e.color||"esriSMSX"!==e.style&&"esriSMSCross"!==e.style||(e.outline&&e.outline.color?e.color=e.outline.color:e.color=[0,0,0,0])}))}},{key:"_forEachSimpleMarkerSymbols",value:function(e,t){if(e){var r,a="uniqueValueInfos"in e?e.uniqueValueInfos:"classBreakInfos"in e?e.classBreakInfos:[],n=Object(i.a)(a);try{for(n.s();!(r=n.n()).done;){var o=r.value;K(o.symbol)&&t(o.symbol)}}catch(s){n.e(s)}finally{n.f()}"symbol"in e&&K(e.symbol)&&t(e.symbol),"defaultSymbol"in e&&K(e.defaultSymbol)&&t(e.defaultSymbol)}}},{key:"_setAndNotifyLayer",value:function(e,t){var r,a,n=this.layer,i=this._get(e);switch(e){case"definitionExpression":case"floorInfo":r="supportsSublayerDefinitionExpression";case"minScale":case"maxScale":case"visible":r="supportsSublayerVisibility";break;case"labelingInfo":case"labelsVisible":case"opacity":case"renderer":case"source":r="supportsDynamicLayers",a="supportsModification"}var o=Object(P.a)(this).getDefaultOrigin();if("service"!==o){if(r&&!1===this.get("layer.capabilities.exportMap.".concat(r)))return void this._logLockedError(e,"capability not available 'layer.capabilities.exportMap.".concat(r,"'"));if(a&&!1===this.get("capabilities.exportMap.".concat(a)))return void this._logLockedError(e,"capability not available 'capabilities.exportMap.".concat(a,"'"))}"source"!==e||"not-loaded"===this.loadStatus?(this._set(e,t),"service"!==o&&i!==t&&n&&n.emit&&n.emit("sublayer-update",{propertyName:e,target:this})):this._logLockedError(e,"'source' can't be changed after calling sublayer.load()")}},{key:"_handleSublayersChange",value:function(e,t){var r=this;t&&(t.forEach((function(e){e.parent=null,e.layer=null})),this.handles.removeAll()),e&&(e.forEach((function(e){e.parent=r,e.layer=r.layer})),this.handles.add([e.on("after-add",(function(e){var t=e.item;t.parent=r,t.layer=r.layer})),e.on("after-remove",(function(e){var t=e.item;t.parent=null,t.layer=null})),e.on("before-changes",(function(e){var t=r.get("layer.capabilities.exportMap.supportsSublayersChanges");null==t||t||(Y.error(new m.a("sublayer:sublayers-non-modifiable","Sublayer can't be added, moved, or removed from the layer's sublayers",{sublayer:r,layer:r.layer})),e.preventDefault())}))]))}},{key:"_logLockedError",value:function(e,t){Y.error(new m.a("sublayer:locked","Property '".concat(e,"' can't be changed on Sublayer from the layer '").concat(this.layer.id,"'"),{reason:t,sublayer:this,layer:this.layer}))}},{key:"_getLayerDomain",value:function(e){var t=this.fieldsIndex.get(e);return t?t.domain:null}}]),o}(Object(g.b)(Object(T.a)(Object(w.a)(x.a))));re.test={isMapImageLayerOverridePolicy:function(e){return e===X||e===Q},isTileImageLayerOverridePolicy:function(e){return e===W}},Object(y.a)([Object(E.b)({readOnly:!0})],re.prototype,"capabilities",void 0),Object(y.a)([Object(V.a)("service","capabilities",["layerDefinition.canModifyLayer","layerDefinition.capabilities"])],re.prototype,"readCapabilities",null),Object(y.a)([Object(E.b)({type:String,value:null,json:{name:"layerDefinition.definitionExpression",write:{overridePolicy:Q}}})],re.prototype,"definitionExpression",null),Object(y.a)([Object(E.b)({type:[M.a],json:{origins:{service:{read:{source:"layerDefinition.fields"}}}}})],re.prototype,"fields",void 0),Object(y.a)([Object(E.b)({readOnly:!0})],re.prototype,"fieldsIndex",null),Object(y.a)([Object(E.b)({type:q.a,value:null,json:{name:"layerDefinition.floorInfo",read:{source:"layerDefinition.floorInfo"},write:{target:"layerDefinition.floorInfo",overridePolicy:Q},origins:{"web-scene":{read:!1,write:!1}}}})],re.prototype,"floorInfo",null),Object(y.a)([Object(E.b)({type:$.a,json:{read:{source:"layerDefinition.extent"}}})],re.prototype,"fullExtent",void 0),Object(y.a)([Object(E.b)({type:String})],re.prototype,"globalIdField",void 0),Object(y.a)([Object(V.a)("service","globalIdField",["layerDefinition.globalIdField","layerDefinition.fields"])],re.prototype,"readGlobalIdFieldFromService",null),Object(y.a)([Object(E.b)({type:_.a,json:{write:{ignoreOrigin:!0}}})],re.prototype,"id",null),Object(y.a)([Object(E.b)({value:null,type:[U.a],json:{read:{source:"layerDefinition.drawingInfo.labelingInfo"},write:{target:"layerDefinition.drawingInfo.labelingInfo",overridePolicy:X}}})],re.prototype,"labelingInfo",null),Object(y.a)([Object(N.a)("labelingInfo")],re.prototype,"writeLabelingInfo",null),Object(y.a)([Object(E.b)({type:Boolean,value:!0,json:{read:{source:"layerDefinition.drawingInfo.showLabels"},write:{target:"layerDefinition.drawingInfo.showLabels",overridePolicy:X}}})],re.prototype,"labelsVisible",null),Object(y.a)([Object(E.b)({value:null})],re.prototype,"layer",null),Object(y.a)([Object(E.b)({type:Boolean,value:!0,json:{origins:{service:{read:{enabled:!1}}},read:{source:"showLegend"},write:{target:"showLegend",overridePolicy:Z}}})],re.prototype,"legendEnabled",void 0),Object(y.a)([Object(E.b)({type:["show","hide","hide-children"],value:"show",json:{read:!1,write:!1,origins:{"web-scene":{read:!0,write:!0}}}})],re.prototype,"listMode",null),Object(y.a)([Object(E.b)({type:Number,value:0,json:{write:{overridePolicy:X}}})],re.prototype,"minScale",null),Object(y.a)([Object(V.a)("minScale",["minScale","layerDefinition.minScale"])],re.prototype,"readMinScale",null),Object(y.a)([Object(E.b)({type:Number,value:0,json:{write:{overridePolicy:X}}})],re.prototype,"maxScale",null),Object(y.a)([Object(V.a)("maxScale",["maxScale","layerDefinition.maxScale"])],re.prototype,"readMaxScale",null),Object(y.a)([Object(E.b)({type:String})],re.prototype,"objectIdField",void 0),Object(y.a)([Object(V.a)("service","objectIdField",["layerDefinition.objectIdField","layerDefinition.fields"])],re.prototype,"readObjectIdFieldFromService",null),Object(y.a)([Object(E.b)({type:Number,value:1,json:{write:{target:"layerDefinition.drawingInfo.transparency",overridePolicy:X}}})],re.prototype,"opacity",null),Object(y.a)([Object(V.a)("opacity",["layerDefinition.drawingInfo.transparency","layerDefinition.transparency"])],re.prototype,"readOpacity",null),Object(y.a)([Object(N.a)("opacity")],re.prototype,"writeOpacity",null),Object(y.a)([Object(E.b)({json:{type:_.a,write:{target:"parentLayerId",allowNull:!0,overridePolicy:X}}})],re.prototype,"parent",void 0),Object(y.a)([Object(N.a)("parent")],re.prototype,"writeParent",null),Object(y.a)([Object(E.b)({type:Boolean,value:!0,json:{read:{source:"disablePopup",reader:function(e,t){return!t.disablePopup}},write:{target:"disablePopup",overridePolicy:Z,writer:function(e,t,r){t[r]=!e}}}})],re.prototype,"popupEnabled",void 0),Object(y.a)([Object(E.b)({type:f.a,json:{read:{source:"popupInfo"},write:{target:"popupInfo",overridePolicy:Z}}})],re.prototype,"popupTemplate",void 0),Object(y.a)([Object(E.b)({readOnly:!0})],re.prototype,"defaultPopupTemplate",null),Object(y.a)([Object(E.b)({types:v.a,value:null,json:{name:"layerDefinition.drawingInfo.renderer",write:{overridePolicy:X},origins:{"web-scene":{types:v.b,name:"layerDefinition.drawingInfo.renderer",write:{overridePolicy:X}}}}})],re.prototype,"renderer",null),Object(y.a)([Object(E.b)({types:{key:"type",base:null,typeMap:{"data-layer":J.a,"map-layer":z.a}},cast:function(e){if(e){if("mapLayerId"in e)return Object(_.d)(z.a,e);if("dataSource"in e)return Object(_.d)(J.a,e)}return e},json:{name:"layerDefinition.source",write:{overridePolicy:X}}})],re.prototype,"source",null),Object(y.a)([Object(E.b)()],re.prototype,"sourceJSON",void 0),Object(y.a)([Object(E.b)({value:null,json:{type:[_.a],write:{target:"subLayerIds",allowNull:!0,overridePolicy:X}}})],re.prototype,"sublayers",null),Object(y.a)([Object(L.a)("sublayers")],re.prototype,"castSublayers",null),Object(y.a)([Object(N.a)("sublayers")],re.prototype,"writeSublayers",null),Object(y.a)([Object(E.b)({type:String,json:{read:{source:"name"},write:{target:"name",allowNull:!0,overridePolicy:Z}}})],re.prototype,"title",void 0),Object(y.a)([Object(E.b)({type:String})],re.prototype,"typeIdField",void 0),Object(y.a)([Object(V.a)("typeIdField",["layerDefinition.typeIdField"])],re.prototype,"readTypeIdField",null),Object(y.a)([Object(E.b)({type:[R.a],json:{origins:{service:{read:{source:"layerDefinition.types"}}}}})],re.prototype,"types",void 0),Object(y.a)([Object(E.b)({type:String,json:{read:{source:"layerUrl"},write:{target:"layerUrl",overridePolicy:W}}})],re.prototype,"url",null),Object(y.a)([Object(E.b)({type:Boolean,value:!0,json:{read:{source:"defaultVisibility"},write:{target:"defaultVisibility",overridePolicy:X}}})],re.prototype,"visible",null),Object(y.a)([Object(N.a)("visible")],re.prototype,"writeVisible",null);var ae=re=a=Object(y.a)([Object(D.a)("esri.layers.support.Sublayer")],re)},898:function(e,t,r){"use strict";r.d(t,"a",(function(){return S}));var a=r(21),n=r(13),i=r(7),o=r.n(i),s=r(12),l=r(2),c=r(4),u=r(5),b=r(6),p=r(0),d=r(82),y=r(30),f=r(27),v=r(838),j=r(1),O=(r(19),r(14),r(15),r(57)),h=r(10),m=r(58),g=r(45),w=r(671),S=function(e){var t=function(e){Object(u.a)(r,e);var t=Object(b.a)(r);function r(){var e;return Object(l.a)(this,r),(e=t.apply(this,arguments)).capabilities=void 0,e.copyright=null,e.fullExtent=null,e.legendEnabled=!0,e.spatialReference=null,e.version=null,e}return Object(c.a)(r,[{key:"readCapabilities",value:function(e,t){var r=t.capabilities&&t.capabilities.split(",").map((function(e){return e.toLowerCase().trim()}));if(!r)return{operations:{supportsQuery:!1,supportsExportMap:!1,supportsExportTiles:!1,supportsTileMap:!1},exportMap:null,exportTiles:null};var a=this.type,n=-1!==r.indexOf("query"),i=-1!==r.indexOf("map"),o=!!t.exportTilesAllowed,s=-1!==r.indexOf("tilemap"),l="tile"!==a&&!!t.supportsDynamicLayers,c="tile"!==a&&(!t.tileInfo||l),u="tile"!==a&&(!t.tileInfo||l),b="tile"!==a,p=!!t.cimVersion&&v.a.parse(t.cimVersion).since(1,4);return{operations:{supportsQuery:n,supportsExportMap:i,supportsExportTiles:o,supportsTileMap:s},exportMap:i?{supportsArcadeExpressionForLabeling:p,supportsSublayersChanges:b,supportsDynamicLayers:l,supportsSublayerVisibility:c,supportsSublayerDefinitionExpression:u}:null,exportTiles:o?{maxExportTilesCount:+t.maxExportTilesCount}:null}}},{key:"readVersion",value:function(e,t){var r=t.currentVersion;return r||(r=t.hasOwnProperty("capabilities")||t.hasOwnProperty("tables")?10:t.hasOwnProperty("supportedImageFormatTypes")?9.31:9.3),r}},{key:"fetchSublayerInfo",value:function(){var e=Object(s.a)(o.a.mark((function e(t,r){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetchAllLayersAndTables(r);case 2:return e.abrupt("return",this._allLayersAndTablesMap.get(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"fetchAllLayersAndTables",value:function(){var e=Object(s.a)(o.a.mark((function e(t){var r,i=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.load(t);case 2:return this._allLayersAndTablesPromise||(this._allLayersAndTablesPromise=Object(d.default)(Object(f.J)(this.url).path+"/layers",{responseType:"json",query:Object(n.a)(Object(n.a)({f:"json"},this.customParameters),{},{token:this.apiKey})}).then((function(e){i._allLayersAndTablesMap=new Map;var t,r=Object(a.a)(e.data.layers);try{for(r.s();!(t=r.n()).done;){var n=t.value;i._allLayersAndTablesMap.set(n.id,n)}}catch(o){r.e(o)}finally{r.f()}return{result:e.data}}),(function(e){return{error:e}}))),e.next=5,this._allLayersAndTablesPromise;case 5:if(r=e.sent,Object(y.v)(t),!("result"in r)){e.next=8;break}return e.abrupt("return",r.result);case 8:throw r.error;case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(e);return Object(p.a)([Object(j.b)({readOnly:!0})],t.prototype,"capabilities",void 0),Object(p.a)([Object(O.a)("service","capabilities",["capabilities","exportTilesAllowed","maxExportTilesCount","supportsDynamicLayers","tileInfo"])],t.prototype,"readCapabilities",null),Object(p.a)([Object(j.b)({json:{read:{source:"copyrightText"}}})],t.prototype,"copyright",void 0),Object(p.a)([Object(j.b)({type:m.a})],t.prototype,"fullExtent",void 0),Object(p.a)([Object(j.b)(w.c)],t.prototype,"id",void 0),Object(p.a)([Object(j.b)({type:Boolean,json:{origins:{service:{read:{enabled:!1}}},read:{source:"showLegend"},write:{target:"showLegend"}}})],t.prototype,"legendEnabled",void 0),Object(p.a)([Object(j.b)(w.j)],t.prototype,"popupEnabled",void 0),Object(p.a)([Object(j.b)({type:g.a})],t.prototype,"spatialReference",void 0),Object(p.a)([Object(j.b)()],t.prototype,"version",void 0),Object(p.a)([Object(O.a)("version",["currentVersion","capabilities","tables","supportedImageFormatTypes"])],t.prototype,"readVersion",null),t=Object(p.a)([Object(h.a)("esri.layers.mixins.ArcGISMapService")],t)}},899:function(e,t,r){"use strict";r.d(t,"a",(function(){return x}));var a=r(21),n=r(2),i=r(4),o=r(77),s=r(65),l=r(5),c=r(6),u=r(0),b=r(52),p=r(808),d=r(29),y=r(15),f=r(1),v=(r(19),r(69)),j=(r(14),r(10)),O=r(164),h=r(839),m=r(824),g=y.a.getLogger("esri.layers.TileLayer");var w=b.a.ofType(h.a);function S(e,t){e&&e.forEach((function(e){t(e),e.sublayers&&e.sublayers.length&&S(e.sublayers,t)}))}var x=function(e){var t=function(e){Object(l.a)(r,e);var t=Object(c.a)(r);function r(){var e;Object(n.a)(this,r);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).allSublayers=new p.a({getCollections:function(){return[e.sublayers]},getChildrenFunction:function(e){return e.sublayers}}),e.sublayersSourceJSON={2:{},3:{},4:{},5:{}},e.handles.add(e.watch("sublayers",(function(t,r){return e._handleSublayersChange(t,r)}),!0)),e}return Object(i.a)(r,[{key:"readSublayers",value:function(e,t){if(t&&e){var r=this.sublayersSourceJSON,a=Object(O.d)(t.origin);if(!(a<2)&&(r[a]={context:t,visibleLayers:e.visibleLayers||r[a].visibleLayers,layers:e.layers||r[a].layers},!(a>2))){this._set("serviceSublayers",this.createSublayersForOrigin("service").sublayers);var n=this.createSublayersForOrigin("web-document"),i=n.sublayers,o=n.origin,s=Object(v.a)(this);s.setDefaultOrigin(o),this._set("sublayers",new w(i)),s.setDefaultOrigin("user")}}}},{key:"findSublayerById",value:function(e){return this.allSublayers.find((function(t){return t.id===e}))}},{key:"createServiceSublayers",value:function(){return this.createSublayersForOrigin("service").sublayers}},{key:"createSublayersForOrigin",value:function(e){var t,r=Object(O.d)("web-document"===e?"web-map":e),n=2,i=this.sublayersSourceJSON[2].layers,o=this.sublayersSourceJSON[2].context,s=null,l=[3,4,5].filter((function(e){return e<=r})),c=Object(a.a)(l);try{for(c.s();!(t=c.n()).done;){var u=t.value,b=this.sublayersSourceJSON[u];Object(m.b)(b.layers)&&(n=u,i=b.layers,o=b.context,b.visibleLayers&&(s={visibleLayers:b.visibleLayers,context:b.context}))}}catch(_){c.e(_)}finally{c.f()}var p,d=[3,4,5].filter((function(e){return e>n&&e<=r})),y=null,f=Object(a.a)(d);try{for(f.s();!(p=f.n()).done;){var v=p.value,j=this.sublayersSourceJSON[v],g=j.layers,x=j.visibleLayers,k=j.context;g&&(y={layers:g,context:k}),x&&(s={visibleLayers:x,context:k})}}catch(_){f.e(_)}finally{f.f()}var I=function(e,t){var r=[],a={};return e?(e.forEach((function(e){var n=new h.a;if(n.read(e,t),a[n.id]=n,null!=e.parentLayerId&&-1!==e.parentLayerId){var i=a[e.parentLayerId];i.sublayers||(i.sublayers=[]),i.sublayers.unshift(n)}else r.unshift(n)})),r):r}(i,o),T=new Map,F=new Set;if(y){var E,P=Object(a.a)(y.layers);try{for(P.s();!(E=P.n()).done;){var L=E.value;T.set(L.id,L)}}catch(_){P.e(_)}finally{P.f()}}if(s){var V,D=Object(a.a)(s.visibleLayers);try{for(D.s();!(V=D.n()).done;){var N=V.value;F.add(N)}}catch(_){D.e(_)}finally{D.f()}}return S(I,(function(e){y&&e.read(T.get(e.id),y.context),s&&e.read({defaultVisibility:F.has(e.id)},s.context)})),{origin:Object(O.b)(n),sublayers:new w({items:I})}}},{key:"read",value:function(e,t){Object(o.a)(Object(s.a)(r.prototype),"read",this).call(this,e,t),this.readSublayers(e,t)}},{key:"_handleSublayersChange",value:function(e,t){var r=this;t&&(t.forEach((function(e){e.parent=null,e.layer=null})),this.handles.remove("sublayers-owner")),e&&(e.forEach((function(e){e.parent=r,e.layer=r})),this.handles.add([e.on("after-add",(function(e){var t=e.item;t.parent=r,t.layer=r})),e.on("after-remove",(function(e){var t=e.item;t.parent=null,t.layer=null}))],"sublayers-owner"),"tile"===this.type&&this.handles.add(e.on("before-changes",(function(e){g.error(new d.a("tilelayer:sublayers-non-modifiable","ISublayer can't be added, moved, or removed from the layer's sublayers",{layer:r})),e.preventDefault()})),"sublayers-owner"))}}]),r}(e);return Object(u.a)([Object(f.b)({readOnly:!0})],t.prototype,"allSublayers",void 0),Object(u.a)([Object(f.b)({readOnly:!0,type:b.a.ofType(h.a)})],t.prototype,"serviceSublayers",void 0),Object(u.a)([Object(f.b)({value:null,type:w,json:{read:!1,write:{allowNull:!0,ignoreOrigin:!0}}})],t.prototype,"sublayers",void 0),Object(u.a)([Object(f.b)({readOnly:!0})],t.prototype,"sublayersSourceJSON",void 0),t=Object(u.a)([Object(j.a)("esri.layers.mixins.SublayersOwner")],t),t}}}]);
//# sourceMappingURL=50.e5541b84.chunk.js.map